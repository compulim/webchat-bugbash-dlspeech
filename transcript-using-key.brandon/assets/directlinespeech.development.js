window["DirectLineSpeech"] =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./lib/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./lib/DirectLineSpeech.js":
/*!*********************************!*\
  !*** ./lib/DirectLineSpeech.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js"));

var _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));

var _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));

var _observable = _interopRequireDefault(__webpack_require__(/*! core-js/features/observable */ "./node_modules/core-js/features/observable/index.js"));

var _mathRandom = _interopRequireDefault(__webpack_require__(/*! math-random */ "./node_modules/math-random/browser.js"));

var _shareObservable = _interopRequireDefault(__webpack_require__(/*! ./shareObservable */ "./lib/shareObservable.js"));

var _SpeechSynthesisAudioStreamUtterance = _interopRequireDefault(__webpack_require__(/*! ./SpeechSynthesisAudioStreamUtterance */ "./lib/SpeechSynthesisAudioStreamUtterance.js"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function randomActivityId() {
  return (0, _mathRandom.default)().toString(36).substr(2);
}

var DirectLineSpeech =
/*#__PURE__*/
function () {
  function DirectLineSpeech(_ref) {
    var _this = this;

    var dialogServiceConnector = _ref.dialogServiceConnector;
    (0, _classCallCheck2.default)(this, DirectLineSpeech);
    var connectionStatusObserver;
    this.dialogServiceConnector = dialogServiceConnector;
    this.activity$ = (0, _shareObservable.default)(new _observable.default(function (observer) {
      _this._activityObserver = observer;
      connectionStatusObserver.next(0);
      connectionStatusObserver.next(1);
      connectionStatusObserver.next(2);
    }));
    this.connectionStatus$ = (0, _shareObservable.default)(new _observable.default(function (observer) {
      connectionStatusObserver = observer;
    }));

    dialogServiceConnector.activityReceived = function (_, _ref2) {
      var activity = _ref2.activity,
          audioStream = _ref2.audioStream;

      try {
        _this._activityObserver && _this._activityObserver.next(_objectSpread({}, activity, {
          channelData: _objectSpread({}, activity.channelData, {}, audioStream ? {
            speechSynthesisUtterance: new _SpeechSynthesisAudioStreamUtterance.default(audioStream)
          } : {}),
          from: _objectSpread({}, activity.from, {
            // Since DLSpeech service never ACK our outgoing activity, this activity must be from bot.
            role: 'bot'
          }),
          // Direct Line Speech server currently do not timestamp outgoing activities.
          // Thus, it will be easier to just re-timestamp every incoming/outgoing activities using local time.
          timestamp: new Date().toISOString()
        }));
      } catch (error) {
        console.error(error);
      }
    };
  }

  (0, _createClass2.default)(DirectLineSpeech, [{
    key: "end",
    value: function end() {
      this.dialogServiceConnector.close();
    }
  }, {
    key: "postActivity",
    value: function postActivity(activity) {
      // Currently, Web Chat set user ID on all outgoing activities.
      // As Direct Line Speech maintains its own user ID, Web Chat should not set the user ID.
      // TODO: [P2] We should move user ID into options of DirectLineJS, instead of Web Chat.
      activity = _objectSpread({}, activity, {
        from: {
          role: 'user'
        }
      });

      try {
        // TODO: [P1] Direct Line Speech server currently do not ack the outgoing activities with any activity ID or timestamp.
        var pseudoActivityId = randomActivityId();
        var isSpeech = !!(activity.channelData && activity.channelData.speech); // Do not send the activity if it was from speech.

        if (!isSpeech) {
          this.dialogServiceConnector.sendActivityAsync(activity);
        }

        this._activityObserver && this._activityObserver.next(_objectSpread({}, activity, {
          id: pseudoActivityId,
          timestamp: new Date().toISOString()
        }));
        return _observable.default.of(pseudoActivityId);
      } catch (err) {
        return new _observable.default(function (observer) {
          return observer.error(err);
        });
      }
    }
  }]);
  return DirectLineSpeech;
}(); // Interfaces not yet implemented in Web Chat:
// referenceGrammarId?: string,
// getSessionId? : () => Observable<string>


exports.default = DirectLineSpeech;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9EaXJlY3RMaW5lU3BlZWNoLmpzIl0sIm5hbWVzIjpbInJhbmRvbUFjdGl2aXR5SWQiLCJ0b1N0cmluZyIsInN1YnN0ciIsIkRpcmVjdExpbmVTcGVlY2giLCJkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yIiwiY29ubmVjdGlvblN0YXR1c09ic2VydmVyIiwiYWN0aXZpdHkkIiwiT2JzZXJ2YWJsZSIsIm9ic2VydmVyIiwiX2FjdGl2aXR5T2JzZXJ2ZXIiLCJuZXh0IiwiY29ubmVjdGlvblN0YXR1cyQiLCJhY3Rpdml0eVJlY2VpdmVkIiwiXyIsImFjdGl2aXR5IiwiYXVkaW9TdHJlYW0iLCJjaGFubmVsRGF0YSIsInNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSIsIlNwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlIiwiZnJvbSIsInJvbGUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvciIsImNvbnNvbGUiLCJjbG9zZSIsInBzZXVkb0FjdGl2aXR5SWQiLCJpc1NwZWVjaCIsInNwZWVjaCIsInNlbmRBY3Rpdml0eUFzeW5jIiwiaWQiLCJvZiIsImVyciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7OztBQUVBLFNBQVNBLGdCQUFULEdBQTRCO0FBQzFCLFNBQU8sMkJBQ0pDLFFBREksQ0FDSyxFQURMLEVBRUpDLE1BRkksQ0FFRyxDQUZILENBQVA7QUFHRDs7SUFFb0JDLGdCOzs7QUFDbkIsa0NBQXdDO0FBQUE7O0FBQUEsUUFBMUJDLHNCQUEwQixRQUExQkEsc0JBQTBCO0FBQUE7QUFDdEMsUUFBSUMsd0JBQUo7QUFFQSxTQUFLRCxzQkFBTCxHQUE4QkEsc0JBQTlCO0FBRUEsU0FBS0UsU0FBTCxHQUFpQiw4QkFDZixJQUFJQyxtQkFBSixDQUFlLFVBQUFDLFFBQVEsRUFBSTtBQUN6QixNQUFBLEtBQUksQ0FBQ0MsaUJBQUwsR0FBeUJELFFBQXpCO0FBRUFILE1BQUFBLHdCQUF3QixDQUFDSyxJQUF6QixDQUE4QixDQUE5QjtBQUNBTCxNQUFBQSx3QkFBd0IsQ0FBQ0ssSUFBekIsQ0FBOEIsQ0FBOUI7QUFDQUwsTUFBQUEsd0JBQXdCLENBQUNLLElBQXpCLENBQThCLENBQTlCO0FBQ0QsS0FORCxDQURlLENBQWpCO0FBVUEsU0FBS0MsaUJBQUwsR0FBeUIsOEJBQ3ZCLElBQUlKLG1CQUFKLENBQWUsVUFBQUMsUUFBUSxFQUFJO0FBQ3pCSCxNQUFBQSx3QkFBd0IsR0FBR0csUUFBM0I7QUFDRCxLQUZELENBRHVCLENBQXpCOztBQU1BSixJQUFBQSxzQkFBc0IsQ0FBQ1EsZ0JBQXZCLEdBQTBDLFVBQUNDLENBQUQsU0FBa0M7QUFBQSxVQUE1QkMsUUFBNEIsU0FBNUJBLFFBQTRCO0FBQUEsVUFBbEJDLFdBQWtCLFNBQWxCQSxXQUFrQjs7QUFDMUUsVUFBSTtBQUNGLFFBQUEsS0FBSSxDQUFDTixpQkFBTCxJQUNFLEtBQUksQ0FBQ0EsaUJBQUwsQ0FBdUJDLElBQXZCLG1CQUNLSSxRQURMO0FBRUVFLFVBQUFBLFdBQVcsb0JBQ05GLFFBQVEsQ0FBQ0UsV0FESCxNQUVMRCxXQUFXLEdBQUc7QUFBRUUsWUFBQUEsd0JBQXdCLEVBQUUsSUFBSUMsNENBQUosQ0FBd0NILFdBQXhDO0FBQTVCLFdBQUgsR0FBd0YsRUFGOUYsQ0FGYjtBQU1FSSxVQUFBQSxJQUFJLG9CQUNDTCxRQUFRLENBQUNLLElBRFY7QUFFRjtBQUNBQyxZQUFBQSxJQUFJLEVBQUU7QUFISixZQU5OO0FBV0U7QUFDQTtBQUNBQyxVQUFBQSxTQUFTLEVBQUUsSUFBSUMsSUFBSixHQUFXQyxXQUFYO0FBYmIsV0FERjtBQWdCRCxPQWpCRCxDQWlCRSxPQUFPQyxLQUFQLEVBQWM7QUFDZEMsUUFBQUEsT0FBTyxDQUFDRCxLQUFSLENBQWNBLEtBQWQ7QUFDRDtBQUNGLEtBckJEO0FBc0JEOzs7OzBCQUVLO0FBQ0osV0FBS3BCLHNCQUFMLENBQTRCc0IsS0FBNUI7QUFDRDs7O2lDQUVZWixRLEVBQVU7QUFDckI7QUFDQTtBQUNBO0FBQ0FBLE1BQUFBLFFBQVEscUJBQ0hBLFFBREc7QUFFTkssUUFBQUEsSUFBSSxFQUFFO0FBQUVDLFVBQUFBLElBQUksRUFBRTtBQUFSO0FBRkEsUUFBUjs7QUFLQSxVQUFJO0FBQ0Y7QUFDQSxZQUFNTyxnQkFBZ0IsR0FBRzNCLGdCQUFnQixFQUF6QztBQUNBLFlBQU00QixRQUFRLEdBQUcsQ0FBQyxFQUFFZCxRQUFRLENBQUNFLFdBQVQsSUFBd0JGLFFBQVEsQ0FBQ0UsV0FBVCxDQUFxQmEsTUFBL0MsQ0FBbEIsQ0FIRSxDQUtGOztBQUNBLFlBQUksQ0FBQ0QsUUFBTCxFQUFlO0FBQ2IsZUFBS3hCLHNCQUFMLENBQTRCMEIsaUJBQTVCLENBQThDaEIsUUFBOUM7QUFDRDs7QUFFRCxhQUFLTCxpQkFBTCxJQUNFLEtBQUtBLGlCQUFMLENBQXVCQyxJQUF2QixtQkFDS0ksUUFETDtBQUVFaUIsVUFBQUEsRUFBRSxFQUFFSixnQkFGTjtBQUdFTixVQUFBQSxTQUFTLEVBQUUsSUFBSUMsSUFBSixHQUFXQyxXQUFYO0FBSGIsV0FERjtBQU9BLGVBQU9oQixvQkFBV3lCLEVBQVgsQ0FBY0wsZ0JBQWQsQ0FBUDtBQUNELE9BbEJELENBa0JFLE9BQU9NLEdBQVAsRUFBWTtBQUNaLGVBQU8sSUFBSTFCLG1CQUFKLENBQWUsVUFBQUMsUUFBUTtBQUFBLGlCQUFJQSxRQUFRLENBQUNnQixLQUFULENBQWVTLEdBQWYsQ0FBSjtBQUFBLFNBQXZCLENBQVA7QUFDRDtBQUNGOzs7S0FHSDtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQgbm8tbWFnaWMtbnVtYmVyczogW1wiZXJyb3JcIiwgeyBcImlnbm9yZVwiOiBbMCwgMSwgMiwgMzZdIH1dICovXHJcblxyXG5pbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICdjb3JlLWpzL2ZlYXR1cmVzL29ic2VydmFibGUnO1xyXG5pbXBvcnQgcmFuZG9tIGZyb20gJ21hdGgtcmFuZG9tJztcclxuXHJcbmltcG9ydCBzaGFyZU9ic2VydmFibGUgZnJvbSAnLi9zaGFyZU9ic2VydmFibGUnO1xyXG5pbXBvcnQgU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2UgZnJvbSAnLi9TcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZSc7XHJcblxyXG5mdW5jdGlvbiByYW5kb21BY3Rpdml0eUlkKCkge1xyXG4gIHJldHVybiByYW5kb20oKVxyXG4gICAgLnRvU3RyaW5nKDM2KVxyXG4gICAgLnN1YnN0cigyKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlyZWN0TGluZVNwZWVjaCB7XHJcbiAgY29uc3RydWN0b3IoeyBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yIH0pIHtcclxuICAgIGxldCBjb25uZWN0aW9uU3RhdHVzT2JzZXJ2ZXI7XHJcblxyXG4gICAgdGhpcy5kaWFsb2dTZXJ2aWNlQ29ubmVjdG9yID0gZGlhbG9nU2VydmljZUNvbm5lY3RvcjtcclxuXHJcbiAgICB0aGlzLmFjdGl2aXR5JCA9IHNoYXJlT2JzZXJ2YWJsZShcclxuICAgICAgbmV3IE9ic2VydmFibGUob2JzZXJ2ZXIgPT4ge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2aXR5T2JzZXJ2ZXIgPSBvYnNlcnZlcjtcclxuXHJcbiAgICAgICAgY29ubmVjdGlvblN0YXR1c09ic2VydmVyLm5leHQoMCk7XHJcbiAgICAgICAgY29ubmVjdGlvblN0YXR1c09ic2VydmVyLm5leHQoMSk7XHJcbiAgICAgICAgY29ubmVjdGlvblN0YXR1c09ic2VydmVyLm5leHQoMik7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuY29ubmVjdGlvblN0YXR1cyQgPSBzaGFyZU9ic2VydmFibGUoXHJcbiAgICAgIG5ldyBPYnNlcnZhYmxlKG9ic2VydmVyID0+IHtcclxuICAgICAgICBjb25uZWN0aW9uU3RhdHVzT2JzZXJ2ZXIgPSBvYnNlcnZlcjtcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5hY3Rpdml0eVJlY2VpdmVkID0gKF8sIHsgYWN0aXZpdHksIGF1ZGlvU3RyZWFtIH0pID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB0aGlzLl9hY3Rpdml0eU9ic2VydmVyICYmXHJcbiAgICAgICAgICB0aGlzLl9hY3Rpdml0eU9ic2VydmVyLm5leHQoe1xyXG4gICAgICAgICAgICAuLi5hY3Rpdml0eSxcclxuICAgICAgICAgICAgY2hhbm5lbERhdGE6IHtcclxuICAgICAgICAgICAgICAuLi5hY3Rpdml0eS5jaGFubmVsRGF0YSxcclxuICAgICAgICAgICAgICAuLi4oYXVkaW9TdHJlYW0gPyB7IHNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZTogbmV3IFNwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlKGF1ZGlvU3RyZWFtKSB9IDoge30pXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZyb206IHtcclxuICAgICAgICAgICAgICAuLi5hY3Rpdml0eS5mcm9tLFxyXG4gICAgICAgICAgICAgIC8vIFNpbmNlIERMU3BlZWNoIHNlcnZpY2UgbmV2ZXIgQUNLIG91ciBvdXRnb2luZyBhY3Rpdml0eSwgdGhpcyBhY3Rpdml0eSBtdXN0IGJlIGZyb20gYm90LlxyXG4gICAgICAgICAgICAgIHJvbGU6ICdib3QnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIERpcmVjdCBMaW5lIFNwZWVjaCBzZXJ2ZXIgY3VycmVudGx5IGRvIG5vdCB0aW1lc3RhbXAgb3V0Z29pbmcgYWN0aXZpdGllcy5cclxuICAgICAgICAgICAgLy8gVGh1cywgaXQgd2lsbCBiZSBlYXNpZXIgdG8ganVzdCByZS10aW1lc3RhbXAgZXZlcnkgaW5jb21pbmcvb3V0Z29pbmcgYWN0aXZpdGllcyB1c2luZyBsb2NhbCB0aW1lLlxyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBlbmQoKSB7XHJcbiAgICB0aGlzLmRpYWxvZ1NlcnZpY2VDb25uZWN0b3IuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHBvc3RBY3Rpdml0eShhY3Rpdml0eSkge1xyXG4gICAgLy8gQ3VycmVudGx5LCBXZWIgQ2hhdCBzZXQgdXNlciBJRCBvbiBhbGwgb3V0Z29pbmcgYWN0aXZpdGllcy5cclxuICAgIC8vIEFzIERpcmVjdCBMaW5lIFNwZWVjaCBtYWludGFpbnMgaXRzIG93biB1c2VyIElELCBXZWIgQ2hhdCBzaG91bGQgbm90IHNldCB0aGUgdXNlciBJRC5cclxuICAgIC8vIFRPRE86IFtQMl0gV2Ugc2hvdWxkIG1vdmUgdXNlciBJRCBpbnRvIG9wdGlvbnMgb2YgRGlyZWN0TGluZUpTLCBpbnN0ZWFkIG9mIFdlYiBDaGF0LlxyXG4gICAgYWN0aXZpdHkgPSB7XHJcbiAgICAgIC4uLmFjdGl2aXR5LFxyXG4gICAgICBmcm9tOiB7IHJvbGU6ICd1c2VyJyB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFRPRE86IFtQMV0gRGlyZWN0IExpbmUgU3BlZWNoIHNlcnZlciBjdXJyZW50bHkgZG8gbm90IGFjayB0aGUgb3V0Z29pbmcgYWN0aXZpdGllcyB3aXRoIGFueSBhY3Rpdml0eSBJRCBvciB0aW1lc3RhbXAuXHJcbiAgICAgIGNvbnN0IHBzZXVkb0FjdGl2aXR5SWQgPSByYW5kb21BY3Rpdml0eUlkKCk7XHJcbiAgICAgIGNvbnN0IGlzU3BlZWNoID0gISEoYWN0aXZpdHkuY2hhbm5lbERhdGEgJiYgYWN0aXZpdHkuY2hhbm5lbERhdGEuc3BlZWNoKTtcclxuXHJcbiAgICAgIC8vIERvIG5vdCBzZW5kIHRoZSBhY3Rpdml0eSBpZiBpdCB3YXMgZnJvbSBzcGVlY2guXHJcbiAgICAgIGlmICghaXNTcGVlY2gpIHtcclxuICAgICAgICB0aGlzLmRpYWxvZ1NlcnZpY2VDb25uZWN0b3Iuc2VuZEFjdGl2aXR5QXN5bmMoYWN0aXZpdHkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl9hY3Rpdml0eU9ic2VydmVyICYmXHJcbiAgICAgICAgdGhpcy5fYWN0aXZpdHlPYnNlcnZlci5uZXh0KHtcclxuICAgICAgICAgIC4uLmFjdGl2aXR5LFxyXG4gICAgICAgICAgaWQ6IHBzZXVkb0FjdGl2aXR5SWQsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIE9ic2VydmFibGUub2YocHNldWRvQWN0aXZpdHlJZCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKG9ic2VydmVyID0+IG9ic2VydmVyLmVycm9yKGVycikpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gSW50ZXJmYWNlcyBub3QgeWV0IGltcGxlbWVudGVkIGluIFdlYiBDaGF0OlxyXG4vLyByZWZlcmVuY2VHcmFtbWFySWQ/OiBzdHJpbmcsXHJcbi8vIGdldFNlc3Npb25JZD8gOiAoKSA9PiBPYnNlcnZhYmxlPHN0cmluZz5cclxuIl19

/***/ }),

/***/ "./lib/SpeechSynthesisAudioStreamUtterance.js":
/*!****************************************************!*\
  !*** ./lib/SpeechSynthesisAudioStreamUtterance.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireWildcard = __webpack_require__(/*! @babel/runtime/helpers/interopRequireWildcard */ "./node_modules/@babel/runtime/helpers/interopRequireWildcard.js");

var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));

var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));

var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));

var _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));

var _eventTargetShim = _interopRequireWildcard(__webpack_require__(/*! ./external/event-target-shim */ "./lib/external/event-target-shim.js"));

var SpeechSynthesisAudioStreamUtterance =
/*#__PURE__*/
function (_EventTarget) {
  (0, _inherits2.default)(SpeechSynthesisAudioStreamUtterance, _EventTarget);

  function SpeechSynthesisAudioStreamUtterance(audioStream) {
    var _this;

    (0, _classCallCheck2.default)(this, SpeechSynthesisAudioStreamUtterance);
    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(SpeechSynthesisAudioStreamUtterance).call(this));

    if (audioStream && !(audioStream.format && audioStream.streamReader)) {
      throw new Error('The first argument must be a Cognitive Services audio stream.');
    }

    _this.audioStream = audioStream;
    return _this;
  }

  return SpeechSynthesisAudioStreamUtterance;
}(_eventTargetShim.default);

(0, _eventTargetShim.defineEventAttribute)(SpeechSynthesisAudioStreamUtterance, 'boundary');
(0, _eventTargetShim.defineEventAttribute)(SpeechSynthesisAudioStreamUtterance, 'end');
(0, _eventTargetShim.defineEventAttribute)(SpeechSynthesisAudioStreamUtterance, 'error');
(0, _eventTargetShim.defineEventAttribute)(SpeechSynthesisAudioStreamUtterance, 'start');
var _default = SpeechSynthesisAudioStreamUtterance;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9TcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZS5qcyJdLCJuYW1lcyI6WyJTcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZSIsImF1ZGlvU3RyZWFtIiwiZm9ybWF0Iiwic3RyZWFtUmVhZGVyIiwiRXJyb3IiLCJFdmVudFRhcmdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztJQUVNQSxtQzs7Ozs7QUFDSiwrQ0FBWUMsV0FBWixFQUF5QjtBQUFBOztBQUFBO0FBQ3ZCOztBQUVBLFFBQUlBLFdBQVcsSUFBSSxFQUFFQSxXQUFXLENBQUNDLE1BQVosSUFBc0JELFdBQVcsQ0FBQ0UsWUFBcEMsQ0FBbkIsRUFBc0U7QUFDcEUsWUFBTSxJQUFJQyxLQUFKLENBQVUsK0RBQVYsQ0FBTjtBQUNEOztBQUVELFVBQUtILFdBQUwsR0FBbUJBLFdBQW5CO0FBUHVCO0FBUXhCOzs7RUFUK0NJLHdCOztBQVlsRCwyQ0FBcUJMLG1DQUFyQixFQUEwRCxVQUExRDtBQUNBLDJDQUFxQkEsbUNBQXJCLEVBQTBELEtBQTFEO0FBQ0EsMkNBQXFCQSxtQ0FBckIsRUFBMEQsT0FBMUQ7QUFDQSwyQ0FBcUJBLG1DQUFyQixFQUEwRCxPQUExRDtlQUVlQSxtQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFdmVudFRhcmdldCwgeyBkZWZpbmVFdmVudEF0dHJpYnV0ZSB9IGZyb20gJy4vZXh0ZXJuYWwvZXZlbnQtdGFyZ2V0LXNoaW0nO1xyXG5cclxuY2xhc3MgU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2UgZXh0ZW5kcyBFdmVudFRhcmdldCB7XHJcbiAgY29uc3RydWN0b3IoYXVkaW9TdHJlYW0pIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgaWYgKGF1ZGlvU3RyZWFtICYmICEoYXVkaW9TdHJlYW0uZm9ybWF0ICYmIGF1ZGlvU3RyZWFtLnN0cmVhbVJlYWRlcikpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIENvZ25pdGl2ZSBTZXJ2aWNlcyBhdWRpbyBzdHJlYW0uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hdWRpb1N0cmVhbSA9IGF1ZGlvU3RyZWFtO1xyXG4gIH1cclxufVxyXG5cclxuZGVmaW5lRXZlbnRBdHRyaWJ1dGUoU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2UsICdib3VuZGFyeScpO1xyXG5kZWZpbmVFdmVudEF0dHJpYnV0ZShTcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZSwgJ2VuZCcpO1xyXG5kZWZpbmVFdmVudEF0dHJpYnV0ZShTcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZSwgJ2Vycm9yJyk7XHJcbmRlZmluZUV2ZW50QXR0cmlidXRlKFNwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlLCAnc3RhcnQnKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlO1xyXG4iXX0=

/***/ }),

/***/ "./lib/cognitiveServicesPromiseToESPromise.js":
/*!****************************************************!*\
  !*** ./lib/cognitiveServicesPromiseToESPromise.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = cognitiveServicesPromiseToESPromise;

function cognitiveServicesPromiseToESPromise(promise) {
  return new Promise(function (resolve, reject) {
    return promise.on(resolve, reject);
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb2duaXRpdmVTZXJ2aWNlc1Byb21pc2VUb0VTUHJvbWlzZS5qcyJdLCJuYW1lcyI6WyJjb2duaXRpdmVTZXJ2aWNlc1Byb21pc2VUb0VTUHJvbWlzZSIsInByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWUsU0FBU0EsbUNBQVQsQ0FBNkNDLE9BQTdDLEVBQXNEO0FBQ25FLFNBQU8sSUFBSUMsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVjtBQUFBLFdBQXFCSCxPQUFPLENBQUNJLEVBQVIsQ0FBV0YsT0FBWCxFQUFvQkMsTUFBcEIsQ0FBckI7QUFBQSxHQUFaLENBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvZ25pdGl2ZVNlcnZpY2VzUHJvbWlzZVRvRVNQcm9taXNlKHByb21pc2UpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gcHJvbWlzZS5vbihyZXNvbHZlLCByZWplY3QpKTtcclxufVxyXG4iXX0=

/***/ }),

/***/ "./lib/createAdapters.js":
/*!*******************************!*\
  !*** ./lib/createAdapters.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = create;

var _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js"));

var _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));

var _microsoftCognitiveservicesSpeechSdk = __webpack_require__(/*! microsoft-cognitiveservices-speech-sdk */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/microsoft.cognitiveservices.speech.sdk.js");

var _createWebSpeechPonyfillFactory = _interopRequireDefault(__webpack_require__(/*! ./createWebSpeechPonyfillFactory */ "./lib/createWebSpeechPonyfillFactory.js"));

var _DirectLineSpeech = _interopRequireDefault(__webpack_require__(/*! ./DirectLineSpeech */ "./lib/DirectLineSpeech.js"));

var _patchDialogServiceConnectorInline = _interopRequireDefault(__webpack_require__(/*! ./patchDialogServiceConnectorInline */ "./lib/patchDialogServiceConnectorInline.js"));

var _resolveFunctionOrReturnValue = _interopRequireDefault(__webpack_require__(/*! ./resolveFunctionOrReturnValue */ "./lib/resolveFunctionOrReturnValue.js"));

/* eslint complexity: ["error", 30] */
var TOKEN_RENEWAL_INTERVAL = 120000;

function create(_x) {
  return _create.apply(this, arguments);
}

function _create() {
  _create = (0, _asyncToGenerator2.default)(
  /*#__PURE__*/
  _regenerator.default.mark(function _callee2(_ref) {
    var audioConfig, audioContext, enableTelemetry, fetchCredentials, speechRecognitionEndpointId, _ref$speechRecognitio, speechRecognitionLanguage, speechSynthesisDeploymentId, speechSynthesisOutputFormat, textNormalization, userID, username, _ref2, authorizationToken, region, subscriptionKey, config, dialogServiceConnector, interval, directLine, webSpeechPonyfillFactory;

    return _regenerator.default.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            audioConfig = _ref.audioConfig, audioContext = _ref.audioContext, enableTelemetry = _ref.enableTelemetry, fetchCredentials = _ref.fetchCredentials, speechRecognitionEndpointId = _ref.speechRecognitionEndpointId, _ref$speechRecognitio = _ref.speechRecognitionLanguage, speechRecognitionLanguage = _ref$speechRecognitio === void 0 ? typeof window !== 'undefined' && typeof window.navigator !== 'undefined' && window.navigator.language || 'en-US' : _ref$speechRecognitio, speechSynthesisDeploymentId = _ref.speechSynthesisDeploymentId, speechSynthesisOutputFormat = _ref.speechSynthesisOutputFormat, textNormalization = _ref.textNormalization, userID = _ref.userID, username = _ref.username;
            console.warn('directlinespeech: Custom build.');

            if (fetchCredentials) {
              _context2.next = 4;
              break;
            }

            throw new Error('"fetchCredentials" must be specified.');

          case 4:
            _context2.next = 6;
            return (0, _resolveFunctionOrReturnValue.default)(fetchCredentials);

          case 6:
            _ref2 = _context2.sent;
            authorizationToken = _ref2.authorizationToken;
            region = _ref2.region;
            subscriptionKey = _ref2.subscriptionKey;

            if (!(!authorizationToken && !subscriptionKey || authorizationToken && subscriptionKey || authorizationToken && typeof authorizationToken !== 'string' || subscriptionKey && typeof subscriptionKey !== 'string')) {
              _context2.next = 12;
              break;
            }

            throw new Error('"fetchCredentials" must return either "authorizationToken" or "subscriptionKey" as a non-empty string only.');

          case 12:
            if (typeof enableTelemetry !== 'undefined') {
              console.warn('botframework-directlinespeech: Telemetry options are not yet supported. Please refer to Cognitive Services documentation for details.');
            }

            if (!(!region || typeof region !== 'string')) {
              _context2.next = 15;
              break;
            }

            throw new Error('"fetchCredentials" must return "region" as a non-empty string.');

          case 15:
            if (speechRecognitionEndpointId) {
              console.warn('botframework-directlinespeech: Custom Speech is currently not supported; ignoring speechRecognitionEndpointId.');
            }

            if (speechSynthesisDeploymentId) {
              console.warn('botframework-directlinespeech: Custom Voice is currently not supported; ignoring speechSynthesisDeploymentId.');
            }

            if (speechSynthesisOutputFormat) {
              console.warn('botframework-directlinespeech: Synthesis output format is currently not supported; ignoring speechSynthesisOutputFormat.');
            }

            if (textNormalization) {
              console.warn('botframework-directlinespeech: Text normalization is currently not supported; ignoring "textNormalization".');
            }

            if (userID || username) {
              console.warn('botframework-directlinespeech: Custom "userId" and "username" are currently not supported and are ignored.');
            }

            if (authorizationToken) {
              config = _microsoftCognitiveservicesSpeechSdk.BotFrameworkConfig.fromAuthorizationToken(authorizationToken, region);
            } else {
              config = _microsoftCognitiveservicesSpeechSdk.BotFrameworkConfig.fromSubscription(subscriptionKey, region);
            } // Supported options can be found in DialogConnectorFactory.js.


            config.setProperty(_microsoftCognitiveservicesSpeechSdk.PropertyId.SpeechServiceConnection_RecoLanguage, speechRecognitionLanguage); // The following code set the output format. But currently, none of the following works for setting detailed output format.
            // We will leave these code commented until the Speech SDK support, possibly it in one of the way mentioned below.
            // config.setProperty(PropertyId.SpeechServiceResponse_OutputFormatOption, OutputFormat[OutputFormat.Detailed]);
            // config.setProperty(PropertyId.SpeechServiceResponse_RequestDetailedResultTrueFalse, true);
            // config.setProperty(OutputFormatPropertyName, OutputFormat[OutputFormat.Detailed]);
            // config.setServiceProperty(PropertyId.SpeechServiceResponse_RequestDetailedResultTrueFalse, "true", ServicePropertyChannel.UriQueryParameter);
            // The following code is copied from C#, it should set from.id, but it did not.
            // https://github.com/Azure-Samples/Cognitive-Services-Direct-Line-Speech-Client/blob/master/DLSpeechClient/MainWindow.xaml.cs#L236

            userID && config.setProperty(_microsoftCognitiveservicesSpeechSdk.PropertyId.Conversation_From_Id, userID); // The following code is copied from C#, and it is not working yet.
            // https://github.com/Azure-Samples/Cognitive-Services-Direct-Line-Speech-Client/blob/master/DLSpeechClient/MainWindow.xaml.cs
            // speechRecognitionEndpointId && config.setServiceProperty('cid', speechRecognitionEndpointId, ServicePropertyChannel.UriQueryParameter);
            // speechSynthesisDeploymentId && config.setProperty(PropertyId.conversation_Custom_Voice_Deployment_Ids, speechSynthesisDeploymentId);

            dialogServiceConnector = (0, _patchDialogServiceConnectorInline.default)(new _microsoftCognitiveservicesSpeechSdk.DialogServiceConnector(config, audioConfig));
            dialogServiceConnector.connect(); // Renew token

            if (authorizationToken) {
              interval = setInterval(
              /*#__PURE__*/
              (0, _asyncToGenerator2.default)(
              /*#__PURE__*/
              _regenerator.default.mark(function _callee() {
                var _ref4, authorizationToken, nextRegion;

                return _regenerator.default.wrap(function _callee$(_context) {
                  while (1) {
                    switch (_context.prev = _context.next) {
                      case 0:
                        // If the connector has been disposed, we should stop renewing the token.
                        // TODO: We should use a public implementation if Speech SDK has one.
                        if (dialogServiceConnector.privIsDisposed) {
                          clearInterval(interval);
                        }

                        _context.next = 3;
                        return (0, _resolveFunctionOrReturnValue.default)(fetchCredentials);

                      case 3:
                        _ref4 = _context.sent;
                        authorizationToken = _ref4.authorizationToken;
                        nextRegion = _ref4.region;

                        if (authorizationToken) {
                          _context.next = 8;
                          break;
                        }

                        return _context.abrupt("return", console.warn('botframework-directlinespeech-sdk: Renew token failed because "fetchCredentials" call returned no authorization token.'));

                      case 8:
                        if (!(region !== nextRegion)) {
                          _context.next = 10;
                          break;
                        }

                        return _context.abrupt("return", console.warn('botframework-directlinespeech-sdk: Region change is not supported for renewed token. Authorization token is not renewed.'));

                      case 10:
                        dialogServiceConnector.authorizationToken = authorizationToken; // eslint-disable-line require-atomic-updates

                      case 11:
                      case "end":
                        return _context.stop();
                    }
                  }
                }, _callee);
              })), TOKEN_RENEWAL_INTERVAL);
            }

            directLine = new _DirectLineSpeech.default({
              dialogServiceConnector: dialogServiceConnector
            });
            webSpeechPonyfillFactory = (0, _createWebSpeechPonyfillFactory.default)({
              audioConfig: audioConfig,
              audioContext: audioContext,
              enableTelemetry: enableTelemetry,
              recognizer: dialogServiceConnector,
              textNormalization: textNormalization
            });
            return _context2.abrupt("return", {
              directLine: directLine,
              webSpeechPonyfillFactory: webSpeechPonyfillFactory
            });

          case 29:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  }));
  return _create.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVBZGFwdGVycy5qcyJdLCJuYW1lcyI6WyJUT0tFTl9SRU5FV0FMX0lOVEVSVkFMIiwiY3JlYXRlIiwiYXVkaW9Db25maWciLCJhdWRpb0NvbnRleHQiLCJlbmFibGVUZWxlbWV0cnkiLCJmZXRjaENyZWRlbnRpYWxzIiwic3BlZWNoUmVjb2duaXRpb25FbmRwb2ludElkIiwic3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSIsIndpbmRvdyIsIm5hdmlnYXRvciIsImxhbmd1YWdlIiwic3BlZWNoU3ludGhlc2lzRGVwbG95bWVudElkIiwic3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0IiwidGV4dE5vcm1hbGl6YXRpb24iLCJ1c2VySUQiLCJ1c2VybmFtZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJhdXRob3JpemF0aW9uVG9rZW4iLCJyZWdpb24iLCJzdWJzY3JpcHRpb25LZXkiLCJjb25maWciLCJCb3RGcmFtZXdvcmtDb25maWciLCJmcm9tQXV0aG9yaXphdGlvblRva2VuIiwiZnJvbVN1YnNjcmlwdGlvbiIsInNldFByb3BlcnR5IiwiUHJvcGVydHlJZCIsIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSIsIkNvbnZlcnNhdGlvbl9Gcm9tX0lkIiwiZGlhbG9nU2VydmljZUNvbm5lY3RvciIsIkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IiLCJjb25uZWN0IiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInByaXZJc0Rpc3Bvc2VkIiwiY2xlYXJJbnRlcnZhbCIsIm5leHRSZWdpb24iLCJkaXJlY3RMaW5lIiwiRGlyZWN0TGluZVNwZWVjaCIsIndlYlNwZWVjaFBvbnlmaWxsRmFjdG9yeSIsInJlY29nbml6ZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFFQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFQQTtBQVNBLElBQU1BLHNCQUFzQixHQUFHLE1BQS9COztTQUU4QkMsTTs7Ozs7Ozs0QkFB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QUFzQixFQUF0QkE7QUFBRixhQUFyQixDQXZJTjtBQXlJUFUsWUFBQUEsd0JBeklPLEdBeUlvQiw2Q0FBK0I7QUFDOUR0QyxjQUFBQSxXQUFXLEVBQVhBLFdBRDhEO0FBRTlEQyxjQUFBQSxZQUFZLEVBQVpBLFlBRjhEO0FBRzlEQyxjQUFBQSxlQUFlLEVBQWZBLGVBSDhEO0FBSTlEcUMsY0FBQUEsVUFBVSxFQUFFWCxzQkFKa0Q7QUFLOURqQixjQUFBQSxpQkFBaUIsRUFBakJBO0FBTDhELGFBQS9CLENBeklwQjtBQUFBLDhDQWlKTjtBQUNMeUIsY0FBQUEsVUFBVSxFQUFWQSxVQURLO0FBRUxFLGNBQUFBLHdCQUF3QixFQUF4QkE7QUFGSyxhQWpKTTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50IGNvbXBsZXhpdHk6IFtcImVycm9yXCIsIDMwXSAqL1xyXG5cclxuaW1wb3J0IHsgQm90RnJhbWV3b3JrQ29uZmlnLCBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLCBQcm9wZXJ0eUlkIH0gZnJvbSAnbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsnO1xyXG5cclxuaW1wb3J0IGNyZWF0ZVdlYlNwZWVjaFBvbnlmaWxsRmFjdG9yeSBmcm9tICcuL2NyZWF0ZVdlYlNwZWVjaFBvbnlmaWxsRmFjdG9yeSc7XHJcbmltcG9ydCBEaXJlY3RMaW5lU3BlZWNoIGZyb20gJy4vRGlyZWN0TGluZVNwZWVjaCc7XHJcbmltcG9ydCBwYXRjaERpYWxvZ1NlcnZpY2VDb25uZWN0b3JJbmxpbmUgZnJvbSAnLi9wYXRjaERpYWxvZ1NlcnZpY2VDb25uZWN0b3JJbmxpbmUnO1xyXG5pbXBvcnQgcmVzb2x2ZUZ1bmN0aW9uT3JSZXR1cm5WYWx1ZSBmcm9tICcuL3Jlc29sdmVGdW5jdGlvbk9yUmV0dXJuVmFsdWUnO1xyXG5cclxuY29uc3QgVE9LRU5fUkVORVdBTF9JTlRFUlZBTCA9IDEyMDAwMDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZSh7XHJcbiAgYXVkaW9Db25maWcsXHJcbiAgYXVkaW9Db250ZXh0LFxyXG4gIGVuYWJsZVRlbGVtZXRyeSxcclxuICBmZXRjaENyZWRlbnRpYWxzLFxyXG4gIHNwZWVjaFJlY29nbml0aW9uRW5kcG9pbnRJZCxcclxuICBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICB0eXBlb2Ygd2luZG93Lm5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgIHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2UpIHx8XHJcbiAgICAnZW4tVVMnLFxyXG4gIHNwZWVjaFN5bnRoZXNpc0RlcGxveW1lbnRJZCxcclxuICBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQsXHJcbiAgdGV4dE5vcm1hbGl6YXRpb24sXHJcbiAgdXNlcklELFxyXG4gIHVzZXJuYW1lXHJcbn0pIHtcclxuICBjb25zb2xlLndhcm4oJ2RpcmVjdGxpbmVzcGVlY2g6IEN1c3RvbSBidWlsZC4nKTtcclxuXHJcbiAgaWYgKCFmZXRjaENyZWRlbnRpYWxzKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiZmV0Y2hDcmVkZW50aWFsc1wiIG11c3QgYmUgc3BlY2lmaWVkLicpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgeyBhdXRob3JpemF0aW9uVG9rZW4sIHJlZ2lvbiwgc3Vic2NyaXB0aW9uS2V5IH0gPSBhd2FpdCByZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlKGZldGNoQ3JlZGVudGlhbHMpO1xyXG5cclxuICBpZiAoXHJcbiAgICAoIWF1dGhvcml6YXRpb25Ub2tlbiAmJiAhc3Vic2NyaXB0aW9uS2V5KSB8fFxyXG4gICAgKGF1dGhvcml6YXRpb25Ub2tlbiAmJiBzdWJzY3JpcHRpb25LZXkpIHx8XHJcbiAgICAoYXV0aG9yaXphdGlvblRva2VuICYmIHR5cGVvZiBhdXRob3JpemF0aW9uVG9rZW4gIT09ICdzdHJpbmcnKSB8fFxyXG4gICAgKHN1YnNjcmlwdGlvbktleSAmJiB0eXBlb2Ygc3Vic2NyaXB0aW9uS2V5ICE9PSAnc3RyaW5nJylcclxuICApIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgJ1wiZmV0Y2hDcmVkZW50aWFsc1wiIG11c3QgcmV0dXJuIGVpdGhlciBcImF1dGhvcml6YXRpb25Ub2tlblwiIG9yIFwic3Vic2NyaXB0aW9uS2V5XCIgYXMgYSBub24tZW1wdHkgc3RyaW5nIG9ubHkuJ1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmICh0eXBlb2YgZW5hYmxlVGVsZW1ldHJ5ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgY29uc29sZS53YXJuKFxyXG4gICAgICAnYm90ZnJhbWV3b3JrLWRpcmVjdGxpbmVzcGVlY2g6IFRlbGVtZXRyeSBvcHRpb25zIGFyZSBub3QgeWV0IHN1cHBvcnRlZC4gUGxlYXNlIHJlZmVyIHRvIENvZ25pdGl2ZSBTZXJ2aWNlcyBkb2N1bWVudGF0aW9uIGZvciBkZXRhaWxzLidcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXJlZ2lvbiB8fCB0eXBlb2YgcmVnaW9uICE9PSAnc3RyaW5nJykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdcImZldGNoQ3JlZGVudGlhbHNcIiBtdXN0IHJldHVybiBcInJlZ2lvblwiIGFzIGEgbm9uLWVtcHR5IHN0cmluZy4nKTtcclxuICB9XHJcblxyXG4gIGlmIChzcGVlY2hSZWNvZ25pdGlvbkVuZHBvaW50SWQpIHtcclxuICAgIGNvbnNvbGUud2FybihcclxuICAgICAgJ2JvdGZyYW1ld29yay1kaXJlY3RsaW5lc3BlZWNoOiBDdXN0b20gU3BlZWNoIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkOyBpZ25vcmluZyBzcGVlY2hSZWNvZ25pdGlvbkVuZHBvaW50SWQuJ1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmIChzcGVlY2hTeW50aGVzaXNEZXBsb3ltZW50SWQpIHtcclxuICAgIGNvbnNvbGUud2FybihcclxuICAgICAgJ2JvdGZyYW1ld29yay1kaXJlY3RsaW5lc3BlZWNoOiBDdXN0b20gVm9pY2UgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQ7IGlnbm9yaW5nIHNwZWVjaFN5bnRoZXNpc0RlcGxveW1lbnRJZC4nXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaWYgKHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdCkge1xyXG4gICAgY29uc29sZS53YXJuKFxyXG4gICAgICAnYm90ZnJhbWV3b3JrLWRpcmVjdGxpbmVzcGVlY2g6IFN5bnRoZXNpcyBvdXRwdXQgZm9ybWF0IGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkOyBpZ25vcmluZyBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuJ1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmICh0ZXh0Tm9ybWFsaXphdGlvbikge1xyXG4gICAgY29uc29sZS53YXJuKFxyXG4gICAgICAnYm90ZnJhbWV3b3JrLWRpcmVjdGxpbmVzcGVlY2g6IFRleHQgbm9ybWFsaXphdGlvbiBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZDsgaWdub3JpbmcgXCJ0ZXh0Tm9ybWFsaXphdGlvblwiLidcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBpZiAodXNlcklEIHx8IHVzZXJuYW1lKSB7XHJcbiAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICdib3RmcmFtZXdvcmstZGlyZWN0bGluZXNwZWVjaDogQ3VzdG9tIFwidXNlcklkXCIgYW5kIFwidXNlcm5hbWVcIiBhcmUgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQgYW5kIGFyZSBpZ25vcmVkLidcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBsZXQgY29uZmlnO1xyXG5cclxuICBpZiAoYXV0aG9yaXphdGlvblRva2VuKSB7XHJcbiAgICBjb25maWcgPSBCb3RGcmFtZXdvcmtDb25maWcuZnJvbUF1dGhvcml6YXRpb25Ub2tlbihhdXRob3JpemF0aW9uVG9rZW4sIHJlZ2lvbik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbmZpZyA9IEJvdEZyYW1ld29ya0NvbmZpZy5mcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbktleSwgcmVnaW9uKTtcclxuICB9XHJcblxyXG4gIC8vIFN1cHBvcnRlZCBvcHRpb25zIGNhbiBiZSBmb3VuZCBpbiBEaWFsb2dDb25uZWN0b3JGYWN0b3J5LmpzLlxyXG5cclxuICBjb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UsIHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UpO1xyXG5cclxuICAvLyBUaGUgZm9sbG93aW5nIGNvZGUgc2V0IHRoZSBvdXRwdXQgZm9ybWF0LiBCdXQgY3VycmVudGx5LCBub25lIG9mIHRoZSBmb2xsb3dpbmcgd29ya3MgZm9yIHNldHRpbmcgZGV0YWlsZWQgb3V0cHV0IGZvcm1hdC5cclxuICAvLyBXZSB3aWxsIGxlYXZlIHRoZXNlIGNvZGUgY29tbWVudGVkIHVudGlsIHRoZSBTcGVlY2ggU0RLIHN1cHBvcnQsIHBvc3NpYmx5IGl0IGluIG9uZSBvZiB0aGUgd2F5IG1lbnRpb25lZCBiZWxvdy5cclxuXHJcbiAgLy8gY29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX091dHB1dEZvcm1hdE9wdGlvbiwgT3V0cHV0Rm9ybWF0W091dHB1dEZvcm1hdC5EZXRhaWxlZF0pO1xyXG4gIC8vIGNvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0RGV0YWlsZWRSZXN1bHRUcnVlRmFsc2UsIHRydWUpO1xyXG4gIC8vIGNvbmZpZy5zZXRQcm9wZXJ0eShPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuRGV0YWlsZWRdKTtcclxuICAvLyBjb25maWcuc2V0U2VydmljZVByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3REZXRhaWxlZFJlc3VsdFRydWVGYWxzZSwgXCJ0cnVlXCIsIFNlcnZpY2VQcm9wZXJ0eUNoYW5uZWwuVXJpUXVlcnlQYXJhbWV0ZXIpO1xyXG5cclxuICAvLyBUaGUgZm9sbG93aW5nIGNvZGUgaXMgY29waWVkIGZyb20gQyMsIGl0IHNob3VsZCBzZXQgZnJvbS5pZCwgYnV0IGl0IGRpZCBub3QuXHJcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0F6dXJlLVNhbXBsZXMvQ29nbml0aXZlLVNlcnZpY2VzLURpcmVjdC1MaW5lLVNwZWVjaC1DbGllbnQvYmxvYi9tYXN0ZXIvRExTcGVlY2hDbGllbnQvTWFpbldpbmRvdy54YW1sLmNzI0wyMzZcclxuICB1c2VySUQgJiYgY29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0Zyb21fSWQsIHVzZXJJRCk7XHJcblxyXG4gIC8vIFRoZSBmb2xsb3dpbmcgY29kZSBpcyBjb3BpZWQgZnJvbSBDIywgYW5kIGl0IGlzIG5vdCB3b3JraW5nIHlldC5cclxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vQXp1cmUtU2FtcGxlcy9Db2duaXRpdmUtU2VydmljZXMtRGlyZWN0LUxpbmUtU3BlZWNoLUNsaWVudC9ibG9iL21hc3Rlci9ETFNwZWVjaENsaWVudC9NYWluV2luZG93LnhhbWwuY3NcclxuICAvLyBzcGVlY2hSZWNvZ25pdGlvbkVuZHBvaW50SWQgJiYgY29uZmlnLnNldFNlcnZpY2VQcm9wZXJ0eSgnY2lkJywgc3BlZWNoUmVjb2duaXRpb25FbmRwb2ludElkLCBTZXJ2aWNlUHJvcGVydHlDaGFubmVsLlVyaVF1ZXJ5UGFyYW1ldGVyKTtcclxuICAvLyBzcGVlY2hTeW50aGVzaXNEZXBsb3ltZW50SWQgJiYgY29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuY29udmVyc2F0aW9uX0N1c3RvbV9Wb2ljZV9EZXBsb3ltZW50X0lkcywgc3BlZWNoU3ludGhlc2lzRGVwbG95bWVudElkKTtcclxuXHJcbiAgY29uc3QgZGlhbG9nU2VydmljZUNvbm5lY3RvciA9IHBhdGNoRGlhbG9nU2VydmljZUNvbm5lY3RvcklubGluZShuZXcgRGlhbG9nU2VydmljZUNvbm5lY3Rvcihjb25maWcsIGF1ZGlvQ29uZmlnKSk7XHJcblxyXG4gIGRpYWxvZ1NlcnZpY2VDb25uZWN0b3IuY29ubmVjdCgpO1xyXG5cclxuICAvLyBSZW5ldyB0b2tlblxyXG4gIGlmIChhdXRob3JpemF0aW9uVG9rZW4pIHtcclxuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBJZiB0aGUgY29ubmVjdG9yIGhhcyBiZWVuIGRpc3Bvc2VkLCB3ZSBzaG91bGQgc3RvcCByZW5ld2luZyB0aGUgdG9rZW4uXHJcbiAgICAgIC8vIFRPRE86IFdlIHNob3VsZCB1c2UgYSBwdWJsaWMgaW1wbGVtZW50YXRpb24gaWYgU3BlZWNoIFNESyBoYXMgb25lLlxyXG4gICAgICBpZiAoZGlhbG9nU2VydmljZUNvbm5lY3Rvci5wcml2SXNEaXNwb3NlZCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IGF1dGhvcml6YXRpb25Ub2tlbiwgcmVnaW9uOiBuZXh0UmVnaW9uIH0gPSBhd2FpdCByZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlKGZldGNoQ3JlZGVudGlhbHMpO1xyXG5cclxuICAgICAgaWYgKCFhdXRob3JpemF0aW9uVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKFxyXG4gICAgICAgICAgJ2JvdGZyYW1ld29yay1kaXJlY3RsaW5lc3BlZWNoLXNkazogUmVuZXcgdG9rZW4gZmFpbGVkIGJlY2F1c2UgXCJmZXRjaENyZWRlbnRpYWxzXCIgY2FsbCByZXR1cm5lZCBubyBhdXRob3JpemF0aW9uIHRva2VuLidcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocmVnaW9uICE9PSBuZXh0UmVnaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihcclxuICAgICAgICAgICdib3RmcmFtZXdvcmstZGlyZWN0bGluZXNwZWVjaC1zZGs6IFJlZ2lvbiBjaGFuZ2UgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVuZXdlZCB0b2tlbi4gQXV0aG9yaXphdGlvbiB0b2tlbiBpcyBub3QgcmVuZXdlZC4nXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5hdXRob3JpemF0aW9uVG9rZW4gPSBhdXRob3JpemF0aW9uVG9rZW47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVxdWlyZS1hdG9taWMtdXBkYXRlc1xyXG4gICAgfSwgVE9LRU5fUkVORVdBTF9JTlRFUlZBTCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBkaXJlY3RMaW5lID0gbmV3IERpcmVjdExpbmVTcGVlY2goeyBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yIH0pO1xyXG5cclxuICBjb25zdCB3ZWJTcGVlY2hQb255ZmlsbEZhY3RvcnkgPSBjcmVhdGVXZWJTcGVlY2hQb255ZmlsbEZhY3Rvcnkoe1xyXG4gICAgYXVkaW9Db25maWcsXHJcbiAgICBhdWRpb0NvbnRleHQsXHJcbiAgICBlbmFibGVUZWxlbWV0cnksXHJcbiAgICByZWNvZ25pemVyOiBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLFxyXG4gICAgdGV4dE5vcm1hbGl6YXRpb25cclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGRpcmVjdExpbmUsXHJcbiAgICB3ZWJTcGVlY2hQb255ZmlsbEZhY3RvcnlcclxuICB9O1xyXG59XHJcbiJdfQ==

/***/ }),

/***/ "./lib/createErrorEvent.js":
/*!*********************************!*\
  !*** ./lib/createErrorEvent.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createErrorEvent;

function createErrorEvent(error) {
  var errorEvent = new Event('error');
  errorEvent.error = error;
  return errorEvent;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVFcnJvckV2ZW50LmpzIl0sIm5hbWVzIjpbImNyZWF0ZUVycm9yRXZlbnQiLCJlcnJvciIsImVycm9yRXZlbnQiLCJFdmVudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFlLFNBQVNBLGdCQUFULENBQTBCQyxLQUExQixFQUFpQztBQUM5QyxNQUFNQyxVQUFVLEdBQUcsSUFBSUMsS0FBSixDQUFVLE9BQVYsQ0FBbkI7QUFFQUQsRUFBQUEsVUFBVSxDQUFDRCxLQUFYLEdBQW1CQSxLQUFuQjtBQUVBLFNBQU9DLFVBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUVycm9yRXZlbnQoZXJyb3IpIHtcclxuICBjb25zdCBlcnJvckV2ZW50ID0gbmV3IEV2ZW50KCdlcnJvcicpO1xyXG5cclxuICBlcnJvckV2ZW50LmVycm9yID0gZXJyb3I7XHJcblxyXG4gIHJldHVybiBlcnJvckV2ZW50O1xyXG59XHJcbiJdfQ==

/***/ }),

/***/ "./lib/createTaskQueue.js":
/*!********************************!*\
  !*** ./lib/createTaskQueue.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createTaskQueue;

var _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js"));

var _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));

var _pDefer = _interopRequireDefault(__webpack_require__(/*! p-defer */ "./node_modules/p-defer/index.js"));

function createTaskQueue() {
  var queueWithCurrent = [];
  var queue = {
    cancelAll: function cancelAll() {
      queueWithCurrent.forEach(function (_ref) {
        var cancel = _ref.cancel;
        return cancel();
      });
    },
    push: function push(fn) {
      var cancelDeferred = (0, _pDefer.default)();
      var resultDeferred = (0, _pDefer.default)();
      var entry = {
        promise: resultDeferred.promise
      };
      var abort;

      var cancel = entry.cancel = function () {
        // Override the "fn" so we don't call the actual "fn" later.
        // In this approach, we can reuse the logic inside "start" to handle post-cancellation.
        fn = function fn() {
          return {
            result: Promise.reject(new Error('cancelled before start'))
          };
        }; // Abort the task if it is currently running.


        abort && abort();
        cancelDeferred.reject(new Error('cancelled in the midway'));
      };

      var start =
      /*#__PURE__*/
      function () {
        var _ref2 = (0, _asyncToGenerator2.default)(
        /*#__PURE__*/
        _regenerator.default.mark(function _callee() {
          var _fn, abortFn, result;

          return _regenerator.default.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _fn = fn(), abortFn = _fn.abort, result = _fn.result;
                  abort = abortFn;
                  _context.prev = 2;
                  _context.t0 = resultDeferred;
                  _context.next = 6;
                  return Promise.race([result, cancelDeferred.promise]);

                case 6:
                  _context.t1 = _context.sent;

                  _context.t0.resolve.call(_context.t0, _context.t1);

                  _context.next = 13;
                  break;

                case 10:
                  _context.prev = 10;
                  _context.t2 = _context["catch"](2);
                  resultDeferred.reject(_context.t2);

                case 13:
                  queueWithCurrent = queueWithCurrent.filter(function (e) {
                    return e !== entry;
                  });

                case 14:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, null, [[2, 10]]);
        }));

        return function start() {
          return _ref2.apply(this, arguments);
        };
      }();

      var lastEntry = queueWithCurrent[queueWithCurrent.length - 1];
      var lastPromise = lastEntry && lastEntry.promise || Promise.resolve();
      queueWithCurrent.push(entry); // After the last promise resolved/rejected, we will start this task.
      // We will start even if the last promise rejected.

      lastPromise.then(start, start);
      return {
        cancel: cancel,
        result: resultDeferred.promise
      };
    }
  };
  Object.defineProperty(queue, 'length', {
    get: function get() {
      return queueWithCurrent.length;
    }
  });
  return queue;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVUYXNrUXVldWUuanMiXSwibmFtZXMiOlsiY3JlYXRlVGFza1F1ZXVlIiwicXVldWVXaXRoQ3VycmVudCIsInF1ZXVlIiwiY2FuY2VsQWxsIiwiZm9yRWFjaCIsImNhbmNlbCIsInB1c2giLCJmbiIsImNhbmNlbERlZmVycmVkIiwicmVzdWx0RGVmZXJyZWQiLCJlbnRyeSIsInByb21pc2UiLCJhYm9ydCIsInJlc3VsdCIsIlByb21pc2UiLCJyZWplY3QiLCJFcnJvciIsInN0YXJ0IiwiYWJvcnRGbiIsInJhY2UiLCJyZXNvbHZlIiwiZmlsdGVyIiwiZSIsImxhc3RFbnRyeSIsImxlbmd0aCIsImxhc3RQcm9taXNlIiwidGhlbiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7O0FBRWUsU0FBU0EsZUFBVCxHQUEyQjtBQUN4QyxNQUFJQyxnQkFBZ0IsR0FBRyxFQUF2QjtBQUVBLE1BQU1DLEtBQUssR0FBRztBQUNaQyxJQUFBQSxTQUFTLEVBQUUscUJBQU07QUFDZkYsTUFBQUEsZ0JBQWdCLENBQUNHLE9BQWpCLENBQXlCO0FBQUEsWUFBR0MsTUFBSCxRQUFHQSxNQUFIO0FBQUEsZUFBZ0JBLE1BQU0sRUFBdEI7QUFBQSxPQUF6QjtBQUNELEtBSFc7QUFJWkMsSUFBQUEsSUFBSSxFQUFFLGNBQUFDLEVBQUUsRUFBSTtBQUNWLFVBQU1DLGNBQWMsR0FBRyxzQkFBdkI7QUFDQSxVQUFNQyxjQUFjLEdBQUcsc0JBQXZCO0FBQ0EsVUFBTUMsS0FBSyxHQUFHO0FBQUVDLFFBQUFBLE9BQU8sRUFBRUYsY0FBYyxDQUFDRTtBQUExQixPQUFkO0FBQ0EsVUFBSUMsS0FBSjs7QUFFQSxVQUFNUCxNQUFNLEdBQUlLLEtBQUssQ0FBQ0wsTUFBTixHQUFlLFlBQU07QUFDbkM7QUFDQTtBQUNBRSxRQUFBQSxFQUFFLEdBQUc7QUFBQSxpQkFBTztBQUFFTSxZQUFBQSxNQUFNLEVBQUVDLE9BQU8sQ0FBQ0MsTUFBUixDQUFlLElBQUlDLEtBQUosQ0FBVSx3QkFBVixDQUFmO0FBQVYsV0FBUDtBQUFBLFNBQUwsQ0FIbUMsQ0FLbkM7OztBQUNBSixRQUFBQSxLQUFLLElBQUlBLEtBQUssRUFBZDtBQUNBSixRQUFBQSxjQUFjLENBQUNPLE1BQWYsQ0FBc0IsSUFBSUMsS0FBSixDQUFVLHlCQUFWLENBQXRCO0FBQ0QsT0FSRDs7QUFVQSxVQUFNQyxLQUFLO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxrQ0FBRztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsd0JBQ3VCVixFQUFFLEVBRHpCLEVBQ0dXLE9BREgsT0FDSk4sS0FESSxFQUNZQyxNQURaLE9BQ1lBLE1BRFo7QUFHWkQsa0JBQUFBLEtBQUssR0FBR00sT0FBUjtBQUhZO0FBQUEsZ0NBT1ZULGNBUFU7QUFBQTtBQUFBLHlCQU9tQkssT0FBTyxDQUFDSyxJQUFSLENBQWEsQ0FBQ04sTUFBRCxFQUFTTCxjQUFjLENBQUNHLE9BQXhCLENBQWIsQ0FQbkI7O0FBQUE7QUFBQTs7QUFBQSw4QkFPS1MsT0FQTDs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQVNWWCxrQkFBQUEsY0FBYyxDQUFDTSxNQUFmOztBQVRVO0FBWVpkLGtCQUFBQSxnQkFBZ0IsR0FBR0EsZ0JBQWdCLENBQUNvQixNQUFqQixDQUF3QixVQUFBQyxDQUFDO0FBQUEsMkJBQUlBLENBQUMsS0FBS1osS0FBVjtBQUFBLG1CQUF6QixDQUFuQjs7QUFaWTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQUFIOztBQUFBLHdCQUFMTyxLQUFLO0FBQUE7QUFBQTtBQUFBLFNBQVg7O0FBZUEsVUFBTU0sU0FBUyxHQUFHdEIsZ0JBQWdCLENBQUNBLGdCQUFnQixDQUFDdUIsTUFBakIsR0FBMEIsQ0FBM0IsQ0FBbEM7QUFDQSxVQUFNQyxXQUFXLEdBQUlGLFNBQVMsSUFBSUEsU0FBUyxDQUFDWixPQUF4QixJQUFvQ0csT0FBTyxDQUFDTSxPQUFSLEVBQXhEO0FBRUFuQixNQUFBQSxnQkFBZ0IsQ0FBQ0ssSUFBakIsQ0FBc0JJLEtBQXRCLEVBbENVLENBb0NWO0FBQ0E7O0FBQ0FlLE1BQUFBLFdBQVcsQ0FBQ0MsSUFBWixDQUFpQlQsS0FBakIsRUFBd0JBLEtBQXhCO0FBRUEsYUFBTztBQUNMWixRQUFBQSxNQUFNLEVBQU5BLE1BREs7QUFFTFEsUUFBQUEsTUFBTSxFQUFFSixjQUFjLENBQUNFO0FBRmxCLE9BQVA7QUFJRDtBQWhEVyxHQUFkO0FBbURBZ0IsRUFBQUEsTUFBTSxDQUFDQyxjQUFQLENBQXNCMUIsS0FBdEIsRUFBNkIsUUFBN0IsRUFBdUM7QUFBRTJCLElBQUFBLEdBQUcsRUFBRTtBQUFBLGFBQU01QixnQkFBZ0IsQ0FBQ3VCLE1BQXZCO0FBQUE7QUFBUCxHQUF2QztBQUVBLFNBQU90QixLQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlYXRlRGVmZXJyZWQgZnJvbSAncC1kZWZlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVUYXNrUXVldWUoKSB7XHJcbiAgbGV0IHF1ZXVlV2l0aEN1cnJlbnQgPSBbXTtcclxuXHJcbiAgY29uc3QgcXVldWUgPSB7XHJcbiAgICBjYW5jZWxBbGw6ICgpID0+IHtcclxuICAgICAgcXVldWVXaXRoQ3VycmVudC5mb3JFYWNoKCh7IGNhbmNlbCB9KSA9PiBjYW5jZWwoKSk7XHJcbiAgICB9LFxyXG4gICAgcHVzaDogZm4gPT4ge1xyXG4gICAgICBjb25zdCBjYW5jZWxEZWZlcnJlZCA9IGNyZWF0ZURlZmVycmVkKCk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdERlZmVycmVkID0gY3JlYXRlRGVmZXJyZWQoKTtcclxuICAgICAgY29uc3QgZW50cnkgPSB7IHByb21pc2U6IHJlc3VsdERlZmVycmVkLnByb21pc2UgfTtcclxuICAgICAgbGV0IGFib3J0O1xyXG5cclxuICAgICAgY29uc3QgY2FuY2VsID0gKGVudHJ5LmNhbmNlbCA9ICgpID0+IHtcclxuICAgICAgICAvLyBPdmVycmlkZSB0aGUgXCJmblwiIHNvIHdlIGRvbid0IGNhbGwgdGhlIGFjdHVhbCBcImZuXCIgbGF0ZXIuXHJcbiAgICAgICAgLy8gSW4gdGhpcyBhcHByb2FjaCwgd2UgY2FuIHJldXNlIHRoZSBsb2dpYyBpbnNpZGUgXCJzdGFydFwiIHRvIGhhbmRsZSBwb3N0LWNhbmNlbGxhdGlvbi5cclxuICAgICAgICBmbiA9ICgpID0+ICh7IHJlc3VsdDogUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdjYW5jZWxsZWQgYmVmb3JlIHN0YXJ0JykpIH0pO1xyXG5cclxuICAgICAgICAvLyBBYm9ydCB0aGUgdGFzayBpZiBpdCBpcyBjdXJyZW50bHkgcnVubmluZy5cclxuICAgICAgICBhYm9ydCAmJiBhYm9ydCgpO1xyXG4gICAgICAgIGNhbmNlbERlZmVycmVkLnJlamVjdChuZXcgRXJyb3IoJ2NhbmNlbGxlZCBpbiB0aGUgbWlkd2F5JykpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHN0YXJ0ID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgYWJvcnQ6IGFib3J0Rm4sIHJlc3VsdCB9ID0gZm4oKTtcclxuXHJcbiAgICAgICAgYWJvcnQgPSBhYm9ydEZuO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gRWl0aGVyIHdhaXQgZm9yIHRoZSBhY3R1YWwgcmVzdWx0LCBvciB0aGUgdGFzayBpcyBiZWluZyBjYW5jZWxsZWQuXHJcbiAgICAgICAgICByZXN1bHREZWZlcnJlZC5yZXNvbHZlKGF3YWl0IFByb21pc2UucmFjZShbcmVzdWx0LCBjYW5jZWxEZWZlcnJlZC5wcm9taXNlXSkpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICByZXN1bHREZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcXVldWVXaXRoQ3VycmVudCA9IHF1ZXVlV2l0aEN1cnJlbnQuZmlsdGVyKGUgPT4gZSAhPT0gZW50cnkpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbGFzdEVudHJ5ID0gcXVldWVXaXRoQ3VycmVudFtxdWV1ZVdpdGhDdXJyZW50Lmxlbmd0aCAtIDFdO1xyXG4gICAgICBjb25zdCBsYXN0UHJvbWlzZSA9IChsYXN0RW50cnkgJiYgbGFzdEVudHJ5LnByb21pc2UpIHx8IFByb21pc2UucmVzb2x2ZSgpO1xyXG5cclxuICAgICAgcXVldWVXaXRoQ3VycmVudC5wdXNoKGVudHJ5KTtcclxuXHJcbiAgICAgIC8vIEFmdGVyIHRoZSBsYXN0IHByb21pc2UgcmVzb2x2ZWQvcmVqZWN0ZWQsIHdlIHdpbGwgc3RhcnQgdGhpcyB0YXNrLlxyXG4gICAgICAvLyBXZSB3aWxsIHN0YXJ0IGV2ZW4gaWYgdGhlIGxhc3QgcHJvbWlzZSByZWplY3RlZC5cclxuICAgICAgbGFzdFByb21pc2UudGhlbihzdGFydCwgc3RhcnQpO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjYW5jZWwsXHJcbiAgICAgICAgcmVzdWx0OiByZXN1bHREZWZlcnJlZC5wcm9taXNlXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHF1ZXVlLCAnbGVuZ3RoJywgeyBnZXQ6ICgpID0+IHF1ZXVlV2l0aEN1cnJlbnQubGVuZ3RoIH0pO1xyXG5cclxuICByZXR1cm4gcXVldWU7XHJcbn1cclxuIl19

/***/ }),

/***/ "./lib/createWebSpeechPonyfillFactory.js":
/*!***********************************************!*\
  !*** ./lib/createWebSpeechPonyfillFactory.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireWildcard = __webpack_require__(/*! @babel/runtime/helpers/interopRequireWildcard */ "./node_modules/@babel/runtime/helpers/interopRequireWildcard.js");

var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js"));

var _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));

var _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));

var _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));

var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));

var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));

var _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));

var _microsoftCognitiveservicesSpeechSdk = __webpack_require__(/*! microsoft-cognitiveservices-speech-sdk */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/microsoft.cognitiveservices.speech.sdk.js");

var _SpeechToText = __webpack_require__(/*! web-speech-cognitive-services/lib/SpeechServices/SpeechToText */ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText.js");

var _abortController = _interopRequireDefault(__webpack_require__(/*! abort-controller */ "./node_modules/abort-controller/browser.js"));

var _createErrorEvent = _interopRequireDefault(__webpack_require__(/*! ./createErrorEvent */ "./lib/createErrorEvent.js"));

var _createTaskQueue2 = _interopRequireDefault(__webpack_require__(/*! ./createTaskQueue */ "./lib/createTaskQueue.js"));

var _eventTargetShim = _interopRequireWildcard(__webpack_require__(/*! ./external/event-target-shim */ "./lib/external/event-target-shim.js"));

var _playCognitiveServicesStream = _interopRequireDefault(__webpack_require__(/*! ./playCognitiveServicesStream */ "./lib/playCognitiveServicesStream.js"));

var _playWhiteNoise = _interopRequireDefault(__webpack_require__(/*! ./playWhiteNoise */ "./lib/playWhiteNoise.js"));

var _SpeechSynthesisAudioStreamUtterance = _interopRequireDefault(__webpack_require__(/*! ./SpeechSynthesisAudioStreamUtterance */ "./lib/SpeechSynthesisAudioStreamUtterance.js"));

/* eslint class-methods-use-this: ["error", { "exceptMethods": ["cancel", "getVoices", "speak"] }] */
function _default(_ref) {
  var _ref$audioConfig = _ref.audioConfig,
      audioConfig = _ref$audioConfig === void 0 ? _microsoftCognitiveservicesSpeechSdk.AudioConfig.fromDefaultMicrophoneInput() : _ref$audioConfig,
      audioContext = _ref.audioContext,
      enableTelemetry = _ref.enableTelemetry,
      _ref$ponyfill = _ref.ponyfill,
      ponyfill = _ref$ponyfill === void 0 ? {
    AudioContext: window.AudioContext || window.webkitAudioContext
  } : _ref$ponyfill,
      recognizer = _ref.recognizer,
      textNormalization = _ref.textNormalization;
  return function () {
    var _createSpeechRecognit = (0, _SpeechToText.createSpeechRecognitionPonyfillFromRecognizer)({
      audioConfig: audioConfig,
      createRecognizer: function createRecognizer() {
        return recognizer;
      },
      enableTelemetry: enableTelemetry,
      looseEvents: true,
      textNormalization: textNormalization
    }),
        SpeechGrammarList = _createSpeechRecognit.SpeechGrammarList,
        SpeechRecognition = _createSpeechRecognit.SpeechRecognition;

    if (!audioContext) {
      audioContext = new ponyfill.AudioContext();
    }

    var _createTaskQueue = (0, _createTaskQueue2.default)(),
        cancelAll = _createTaskQueue.cancelAll,
        push = _createTaskQueue.push;

    var SpeechSynthesis =
    /*#__PURE__*/
    function (_EventTargetShim) {
      (0, _inherits2.default)(SpeechSynthesis, _EventTargetShim);

      function SpeechSynthesis() {
        (0, _classCallCheck2.default)(this, SpeechSynthesis);
        return (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(SpeechSynthesis).apply(this, arguments));
      }

      (0, _createClass2.default)(SpeechSynthesis, [{
        key: "cancel",
        value: function cancel() {
          cancelAll();
        } // Returns an empty array.
        // Synthesis is done on the bot side, the content of the voice list is not meaningful on the client side.

      }, {
        key: "getVoices",
        value: function getVoices() {
          return [];
        }
      }, {
        key: "speak",
        value: function speak(utterance) {
          var _push = push(function () {
            var controller = new _abortController.default();
            var signal = controller.signal;
            return {
              abort: controller.abort.bind(controller),
              result: (0, _asyncToGenerator2.default)(
              /*#__PURE__*/
              _regenerator.default.mark(function _callee() {
                var _utterance$audioStrea, format, streamReader;

                return _regenerator.default.wrap(function _callee$(_context) {
                  while (1) {
                    switch (_context.prev = _context.next) {
                      case 0:
                        utterance.dispatchEvent(new Event('start'));
                        _context.prev = 1;

                        if (!utterance.audioStream) {
                          _context.next = 8;
                          break;
                        }

                        _utterance$audioStrea = utterance.audioStream, format = _utterance$audioStrea.format, streamReader = _utterance$audioStrea.streamReader;
                        _context.next = 6;
                        return (0, _playCognitiveServicesStream.default)(audioContext, format, streamReader, {
                          signal: signal
                        });

                      case 6:
                        _context.next = 10;
                        break;

                      case 8:
                        _context.next = 10;
                        return (0, _playWhiteNoise.default)(audioContext);

                      case 10:
                        _context.next = 16;
                        break;

                      case 12:
                        _context.prev = 12;
                        _context.t0 = _context["catch"](1);

                        if (!(_context.t0.message !== 'aborted')) {
                          _context.next = 16;
                          break;
                        }

                        return _context.abrupt("return", utterance.dispatchEvent((0, _createErrorEvent.default)(_context.t0)));

                      case 16:
                        utterance.dispatchEvent(new Event('end'));

                      case 17:
                      case "end":
                        return _context.stop();
                    }
                  }
                }, _callee, null, [[1, 12]]);
              }))()
            };
          }),
              result = _push.result; // Catching the error to prevent uncaught promise error due to cancellation.


          result.catch(function (error) {
            if (!/^cancelled/i.test(error.message)) {
              throw error;
            }
          });
        }
      }]);
      return SpeechSynthesis;
    }(_eventTargetShim.default);

    (0, _eventTargetShim.defineEventAttribute)(SpeechSynthesis, 'voiceschanged');
    return {
      SpeechGrammarList: SpeechGrammarList,
      SpeechRecognition: SpeechRecognition,
      speechSynthesis: new SpeechSynthesis(),
      SpeechSynthesisUtterance: _SpeechSynthesisAudioStreamUtterance.default
    };
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVXZWJTcGVlY2hQb255ZmlsbEZhY3RvcnkuanMiXSwibmFtZXMiOlsiYXVkaW9Db25maWciLCJBdWRpb0NvbmZpZyIsImZyb21EZWZhdWx0TWljcm9waG9uZUlucHV0IiwiYXVkaW9Db250ZXh0IiwiZW5hYmxlVGVsZW1ldHJ5IiwicG9ueWZpbGwiLCJBdWRpb0NvbnRleHQiLCJ3aW5kb3ciLCJ3ZWJraXRBdWRpb0NvbnRleHQiLCJyZWNvZ25pemVyIiwidGV4dE5vcm1hbGl6YXRpb24iLCJjcmVhdGVSZWNvZ25pemVyIiwibG9vc2VFdmVudHMiLCJTcGVlY2hHcmFtbWFyTGlzdCIsIlNwZWVjaFJlY29nbml0aW9uIiwiY2FuY2VsQWxsIiwicHVzaCIsIlNwZWVjaFN5bnRoZXNpcyIsInV0dGVyYW5jZSIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJzaWduYWwiLCJhYm9ydCIsImJpbmQiLCJyZXN1bHQiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJhdWRpb1N0cmVhbSIsImZvcm1hdCIsInN0cmVhbVJlYWRlciIsIm1lc3NhZ2UiLCJjYXRjaCIsImVycm9yIiwidGVzdCIsIkV2ZW50VGFyZ2V0U2hpbSIsInNwZWVjaFN5bnRoZXNpcyIsIlNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSIsIlNwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBWEE7QUFhZSx3QkFTWjtBQUFBLDhCQVJEQSxXQVFDO0FBQUEsTUFSREEsV0FRQyxpQ0FSYUMsaURBQVlDLDBCQUFaLEVBUWI7QUFBQSxNQVBEQyxZQU9DLFFBUERBLFlBT0M7QUFBQSxNQU5EQyxlQU1DLFFBTkRBLGVBTUM7QUFBQSwyQkFMREMsUUFLQztBQUFBLE1BTERBLFFBS0MsOEJBTFU7QUFD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O0FBQ0Q7QUFDRixXQUpEO0FBS0Q7QUE5RFE7QUFBQTtBQUFBLE1BZW1CRSx3QkFmbkI7O0FBaUVYLCtDQUFxQmpCLGVBQXJCLEVBQXNDLGVBQXRDO0FBRUEsV0FBTztBQUNMSixNQUFBQSxpQkFBaUIsRUFBakJBLGlCQURLO0FBRUxDLE1BQUFBLGlCQUFpQixFQUFqQkEsaUJBRks7QUFHTHFCLE1BQUFBLGVBQWUsRUFBRSxJQUFJbEIsZUFBSixFQUhaO0FBSUxtQixNQUFBQSx3QkFBd0IsRUFBRUM7QUFKckIsS0FBUDtBQU1ELEdBekVEO0FBMEVEIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50IGNsYXNzLW1ldGhvZHMtdXNlLXRoaXM6IFtcImVycm9yXCIsIHsgXCJleGNlcHRNZXRob2RzXCI6IFtcImNhbmNlbFwiLCBcImdldFZvaWNlc1wiLCBcInNwZWFrXCJdIH1dICovXHJcblxyXG5pbXBvcnQgeyBBdWRpb0NvbmZpZyB9IGZyb20gJ21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrJztcclxuaW1wb3J0IHsgY3JlYXRlU3BlZWNoUmVjb2duaXRpb25Qb255ZmlsbEZyb21SZWNvZ25pemVyIH0gZnJvbSAnd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbGliL1NwZWVjaFNlcnZpY2VzL1NwZWVjaFRvVGV4dCc7XHJcbmltcG9ydCBBYm9ydENvbnRyb2xsZXIgZnJvbSAnYWJvcnQtY29udHJvbGxlcic7XHJcblxyXG5pbXBvcnQgY3JlYXRlRXJyb3JFdmVudCBmcm9tICcuL2NyZWF0ZUVycm9yRXZlbnQnO1xyXG5pbXBvcnQgY3JlYXRlVGFza1F1ZXVlIGZyb20gJy4vY3JlYXRlVGFza1F1ZXVlJztcclxuaW1wb3J0IEV2ZW50VGFyZ2V0U2hpbSwgeyBkZWZpbmVFdmVudEF0dHJpYnV0ZSB9IGZyb20gJy4vZXh0ZXJuYWwvZXZlbnQtdGFyZ2V0LXNoaW0nO1xyXG5pbXBvcnQgcGxheUNvZ25pdGl2ZVNlcnZpY2VzU3RyZWFtIGZyb20gJy4vcGxheUNvZ25pdGl2ZVNlcnZpY2VzU3RyZWFtJztcclxuaW1wb3J0IHBsYXlXaGl0ZU5vaXNlIGZyb20gJy4vcGxheVdoaXRlTm9pc2UnO1xyXG5pbXBvcnQgU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2UgZnJvbSAnLi9TcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih7XHJcbiAgYXVkaW9Db25maWcgPSBBdWRpb0NvbmZpZy5mcm9tRGVmYXVsdE1pY3JvcGhvbmVJbnB1dCgpLFxyXG4gIGF1ZGlvQ29udGV4dCxcclxuICBlbmFibGVUZWxlbWV0cnksXHJcbiAgcG9ueWZpbGwgPSB7XHJcbiAgICBBdWRpb0NvbnRleHQ6IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dFxyXG4gIH0sXHJcbiAgcmVjb2duaXplcixcclxuICB0ZXh0Tm9ybWFsaXphdGlvblxyXG59KSB7XHJcbiAgcmV0dXJuICgpID0+IHtcclxuICAgIGNvbnN0IHsgU3BlZWNoR3JhbW1hckxpc3QsIFNwZWVjaFJlY29nbml0aW9uIH0gPSBjcmVhdGVTcGVlY2hSZWNvZ25pdGlvblBvbnlmaWxsRnJvbVJlY29nbml6ZXIoe1xyXG4gICAgICBhdWRpb0NvbmZpZyxcclxuICAgICAgY3JlYXRlUmVjb2duaXplcjogKCkgPT4gcmVjb2duaXplcixcclxuICAgICAgZW5hYmxlVGVsZW1ldHJ5LFxyXG4gICAgICBsb29zZUV2ZW50czogdHJ1ZSxcclxuICAgICAgdGV4dE5vcm1hbGl6YXRpb25cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghYXVkaW9Db250ZXh0KSB7XHJcbiAgICAgIGF1ZGlvQ29udGV4dCA9IG5ldyBwb255ZmlsbC5BdWRpb0NvbnRleHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGNhbmNlbEFsbCwgcHVzaCB9ID0gY3JlYXRlVGFza1F1ZXVlKCk7XHJcblxyXG4gICAgY2xhc3MgU3BlZWNoU3ludGhlc2lzIGV4dGVuZHMgRXZlbnRUYXJnZXRTaGltIHtcclxuICAgICAgY2FuY2VsKCkge1xyXG4gICAgICAgIGNhbmNlbEFsbCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBSZXR1cm5zIGFuIGVtcHR5IGFycmF5LlxyXG4gICAgICAvLyBTeW50aGVzaXMgaXMgZG9uZSBvbiB0aGUgYm90IHNpZGUsIHRoZSBjb250ZW50IG9mIHRoZSB2b2ljZSBsaXN0IGlzIG5vdCBtZWFuaW5nZnVsIG9uIHRoZSBjbGllbnQgc2lkZS5cclxuICAgICAgZ2V0Vm9pY2VzKCkge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc3BlYWsodXR0ZXJhbmNlKSB7XHJcbiAgICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHB1c2goKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgICAgICAgIGNvbnN0IHsgc2lnbmFsIH0gPSBjb250cm9sbGVyO1xyXG5cclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFib3J0OiBjb250cm9sbGVyLmFib3J0LmJpbmQoY29udHJvbGxlciksXHJcbiAgICAgICAgICAgIHJlc3VsdDogKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICB1dHRlcmFuY2UuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3N0YXJ0JykpO1xyXG5cclxuICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHV0dGVyYW5jZS5hdWRpb1N0cmVhbSkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCB7IGZvcm1hdCwgc3RyZWFtUmVhZGVyIH0gPSB1dHRlcmFuY2UuYXVkaW9TdHJlYW07XHJcblxyXG4gICAgICAgICAgICAgICAgICBhd2FpdCBwbGF5Q29nbml0aXZlU2VydmljZXNTdHJlYW0oYXVkaW9Db250ZXh0LCBmb3JtYXQsIHN0cmVhbVJlYWRlciwgeyBzaWduYWwgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBhd2FpdCBwbGF5V2hpdGVOb2lzZShhdWRpb0NvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFaXRoZXIgZGlzcGF0Y2ggXCJlbmRcIiBvciBcImVycm9yXCIgZXZlbnQsIGJ1dCBub3QgYm90aFxyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgIT09ICdhYm9ydGVkJykge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gdXR0ZXJhbmNlLmRpc3BhdGNoRXZlbnQoY3JlYXRlRXJyb3JFdmVudChlcnJvcikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdXR0ZXJhbmNlLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdlbmQnKSk7XHJcbiAgICAgICAgICAgIH0pKClcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIENhdGNoaW5nIHRoZSBlcnJvciB0byBwcmV2ZW50IHVuY2F1Z2h0IHByb21pc2UgZXJyb3IgZHVlIHRvIGNhbmNlbGxhdGlvbi5cclxuICAgICAgICByZXN1bHQuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgaWYgKCEvXmNhbmNlbGxlZC9pdS50ZXN0KGVycm9yLm1lc3NhZ2UpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVmaW5lRXZlbnRBdHRyaWJ1dGUoU3BlZWNoU3ludGhlc2lzLCAndm9pY2VzY2hhbmdlZCcpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIFNwZWVjaEdyYW1tYXJMaXN0LFxyXG4gICAgICBTcGVlY2hSZWNvZ25pdGlvbixcclxuICAgICAgc3BlZWNoU3ludGhlc2lzOiBuZXcgU3BlZWNoU3ludGhlc2lzKCksXHJcbiAgICAgIFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZTogU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2VcclxuICAgIH07XHJcbiAgfTtcclxufVxyXG4iXX0=

/***/ }),

/***/ "./lib/external/event-target-shim.js":
/*!*******************************************!*\
  !*** ./lib/external/event-target-shim.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// This is adopted from event-target-shim@5.0.1 under MIT License.
// The source code is copied here because the original package do not support ES5 browsers.

/* eslint-disable */

/**
 * @author Toru Nagashima <https://github.com/mysticatea>
 * @copyright 2015 Toru Nagashima. All rights reserved.
 * See LICENSE file in root directory for full license.
 */


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

var _typeof2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/typeof */ "./node_modules/@babel/runtime/helpers/typeof.js"));

Object.defineProperty(exports, '__esModule', {
  value: true
});
/**
 * @typedef {object} PrivateData
 * @property {EventTarget} eventTarget The event target.
 * @property {{type:string}} event The original event object.
 * @property {number} eventPhase The current event phase.
 * @property {EventTarget|null} currentTarget The current event target.
 * @property {boolean} canceled The flag to prevent default.
 * @property {boolean} stopped The flag to stop propagation.
 * @property {boolean} immediateStopped The flag to stop propagation immediately.
 * @property {Function|null} passiveListener The listener if the current listener is passive. Otherwise this is null.
 * @property {number} timeStamp The unix time.
 * @private
 */

/**
 * Private data for event wrappers.
 * @type {WeakMap<Event, PrivateData>}
 * @private
 */

var privateData = new WeakMap();
/**
 * Cache for wrapper classes.
 * @type {WeakMap<Object, Function>}
 * @private
 */

var wrappers = new WeakMap();
/**
 * Get private data.
 * @param {Event} event The event object to get private data.
 * @returns {PrivateData} The private data of the event.
 * @private
 */

function pd(event) {
  var retv = privateData.get(event);
  console.assert(retv != null, "'this' is expected an Event object, but got", event);
  return retv;
}
/**
 * https://dom.spec.whatwg.org/#set-the-canceled-flag
 * @param data {PrivateData} private data.
 */


function setCancelFlag(data) {
  if (data.passiveListener != null) {
    if (typeof console !== 'undefined' && typeof console.error === 'function') {
      console.error('Unable to preventDefault inside passive event listener invocation.', data.passiveListener);
    }

    return;
  }

  if (!data.event.cancelable) {
    return;
  }

  data.canceled = true;

  if (typeof data.event.preventDefault === 'function') {
    data.event.preventDefault();
  }
}
/**
 * @see https://dom.spec.whatwg.org/#interface-event
 * @private
 */

/**
 * The event wrapper.
 * @constructor
 * @param {EventTarget} eventTarget The event target of this dispatching.
 * @param {Event|{type:string}} event The original event to wrap.
 */


function Event(eventTarget, event) {
  privateData.set(this, {
    eventTarget: eventTarget,
    event: event,
    eventPhase: 2,
    currentTarget: eventTarget,
    canceled: false,
    stopped: false,
    immediateStopped: false,
    passiveListener: null,
    timeStamp: event.timeStamp || Date.now()
  }); // https://heycam.github.io/webidl/#Unforgeable

  Object.defineProperty(this, 'isTrusted', {
    value: false,
    enumerable: true
  }); // Define accessors

  var keys = Object.keys(event);

  for (var i = 0; i < keys.length; ++i) {
    var key = keys[i];

    if (!(key in this)) {
      Object.defineProperty(this, key, defineRedirectDescriptor(key));
    }
  }
} // Should be enumerable, but class methods are not enumerable.


Event.prototype = {
  /**
   * The type of this event.
   * @type {string}
   */
  get type() {
    return pd(this).event.type;
  },

  /**
   * The target of this event.
   * @type {EventTarget}
   */
  get target() {
    return pd(this).eventTarget;
  },

  /**
   * The target of this event.
   * @type {EventTarget}
   */
  get currentTarget() {
    return pd(this).currentTarget;
  },

  /**
   * @returns {EventTarget[]} The composed path of this event.
   */
  composedPath: function composedPath() {
    var currentTarget = pd(this).currentTarget;

    if (currentTarget == null) {
      return [];
    }

    return [currentTarget];
  },

  /**
   * Constant of NONE.
   * @type {number}
   */
  get NONE() {
    return 0;
  },

  /**
   * Constant of CAPTURING_PHASE.
   * @type {number}
   */
  get CAPTURING_PHASE() {
    return 1;
  },

  /**
   * Constant of AT_TARGET.
   * @type {number}
   */
  get AT_TARGET() {
    return 2;
  },

  /**
   * Constant of BUBBLING_PHASE.
   * @type {number}
   */
  get BUBBLING_PHASE() {
    return 3;
  },

  /**
   * The target of this event.
   * @type {number}
   */
  get eventPhase() {
    return pd(this).eventPhase;
  },

  /**
   * Stop event bubbling.
   * @returns {void}
   */
  stopPropagation: function stopPropagation() {
    var data = pd(this);
    data.stopped = true;

    if (typeof data.event.stopPropagation === 'function') {
      data.event.stopPropagation();
    }
  },

  /**
   * Stop event bubbling.
   * @returns {void}
   */
  stopImmediatePropagation: function stopImmediatePropagation() {
    var data = pd(this);
    data.stopped = true;
    data.immediateStopped = true;

    if (typeof data.event.stopImmediatePropagation === 'function') {
      data.event.stopImmediatePropagation();
    }
  },

  /**
   * The flag to be bubbling.
   * @type {boolean}
   */
  get bubbles() {
    return Boolean(pd(this).event.bubbles);
  },

  /**
   * The flag to be cancelable.
   * @type {boolean}
   */
  get cancelable() {
    return Boolean(pd(this).event.cancelable);
  },

  /**
   * Cancel this event.
   * @returns {void}
   */
  preventDefault: function preventDefault() {
    setCancelFlag(pd(this));
  },

  /**
   * The flag to indicate cancellation state.
   * @type {boolean}
   */
  get defaultPrevented() {
    return pd(this).canceled;
  },

  /**
   * The flag to be composed.
   * @type {boolean}
   */
  get composed() {
    return Boolean(pd(this).event.composed);
  },

  /**
   * The unix time of this event.
   * @type {number}
   */
  get timeStamp() {
    return pd(this).timeStamp;
  },

  /**
   * The target of this event.
   * @type {EventTarget}
   * @deprecated
   */
  get srcElement() {
    return pd(this).eventTarget;
  },

  /**
   * The flag to stop event bubbling.
   * @type {boolean}
   * @deprecated
   */
  get cancelBubble() {
    return pd(this).stopped;
  },

  set cancelBubble(value) {
    if (!value) {
      return;
    }

    var data = pd(this);
    data.stopped = true;

    if (typeof data.event.cancelBubble === 'boolean') {
      data.event.cancelBubble = true;
    }
  },

  /**
   * The flag to indicate cancellation state.
   * @type {boolean}
   * @deprecated
   */
  get returnValue() {
    return !pd(this).canceled;
  },

  set returnValue(value) {
    if (!value) {
      setCancelFlag(pd(this));
    }
  },

  /**
   * Initialize this event object. But do nothing under event dispatching.
   * @param {string} type The event type.
   * @param {boolean} [bubbles=false] The flag to be possible to bubble up.
   * @param {boolean} [cancelable=false] The flag to be possible to cancel.
   * @deprecated
   */
  initEvent: function initEvent() {// Do nothing.
  }
}; // `constructor` is not enumerable.

Object.defineProperty(Event.prototype, 'constructor', {
  value: Event,
  configurable: true,
  writable: true
}); // Ensure `event instanceof window.Event` is `true`.

if (typeof window !== 'undefined' && typeof window.Event !== 'undefined') {
  Object.setPrototypeOf(Event.prototype, window.Event.prototype); // Make association for wrappers.

  wrappers.set(window.Event.prototype, Event);
}
/**
 * Get the property descriptor to redirect a given property.
 * @param {string} key Property name to define property descriptor.
 * @returns {PropertyDescriptor} The property descriptor to redirect the property.
 * @private
 */


function defineRedirectDescriptor(key) {
  return {
    get: function get() {
      return pd(this).event[key];
    },
    set: function set(value) {
      pd(this).event[key] = value;
    },
    configurable: true,
    enumerable: true
  };
}
/**
 * Get the property descriptor to call a given method property.
 * @param {string} key Property name to define property descriptor.
 * @returns {PropertyDescriptor} The property descriptor to call the method property.
 * @private
 */


function defineCallDescriptor(key) {
  return {
    value: function value() {
      var event = pd(this).event;
      return event[key].apply(event, arguments);
    },
    configurable: true,
    enumerable: true
  };
}
/**
 * Define new wrapper class.
 * @param {Function} BaseEvent The base wrapper class.
 * @param {Object} proto The prototype of the original event.
 * @returns {Function} The defined wrapper class.
 * @private
 */


function defineWrapper(BaseEvent, proto) {
  var keys = Object.keys(proto);

  if (keys.length === 0) {
    return BaseEvent;
  }
  /** CustomEvent */


  function CustomEvent(eventTarget, event) {
    BaseEvent.call(this, eventTarget, event);
  }

  CustomEvent.prototype = Object.create(BaseEvent.prototype, {
    constructor: {
      value: CustomEvent,
      configurable: true,
      writable: true
    }
  }); // Define accessors.

  for (var i = 0; i < keys.length; ++i) {
    var key = keys[i];

    if (!(key in BaseEvent.prototype)) {
      var descriptor = Object.getOwnPropertyDescriptor(proto, key);
      var isFunc = typeof descriptor.value === 'function';
      Object.defineProperty(CustomEvent.prototype, key, isFunc ? defineCallDescriptor(key) : defineRedirectDescriptor(key));
    }
  }

  return CustomEvent;
}
/**
 * Get the wrapper class of a given prototype.
 * @param {Object} proto The prototype of the original event to get its wrapper.
 * @returns {Function} The wrapper class.
 * @private
 */


function getWrapper(proto) {
  if (proto == null || proto === Object.prototype) {
    return Event;
  }

  var wrapper = wrappers.get(proto);

  if (wrapper == null) {
    wrapper = defineWrapper(getWrapper(Object.getPrototypeOf(proto)), proto);
    wrappers.set(proto, wrapper);
  }

  return wrapper;
}
/**
 * Wrap a given event to management a dispatching.
 * @param {EventTarget} eventTarget The event target of this dispatching.
 * @param {Object} event The event to wrap.
 * @returns {Event} The wrapper instance.
 * @private
 */


function wrapEvent(eventTarget, event) {
  var Wrapper = getWrapper(Object.getPrototypeOf(event));
  return new Wrapper(eventTarget, event);
}
/**
 * Get the immediateStopped flag of a given event.
 * @param {Event} event The event to get.
 * @returns {boolean} The flag to stop propagation immediately.
 * @private
 */


function isStopped(event) {
  return pd(event).immediateStopped;
}
/**
 * Set the current event phase of a given event.
 * @param {Event} event The event to set current target.
 * @param {number} eventPhase New event phase.
 * @returns {void}
 * @private
 */


function setEventPhase(event, eventPhase) {
  pd(event).eventPhase = eventPhase;
}
/**
 * Set the current target of a given event.
 * @param {Event} event The event to set current target.
 * @param {EventTarget|null} currentTarget New current target.
 * @returns {void}
 * @private
 */


function setCurrentTarget(event, currentTarget) {
  pd(event).currentTarget = currentTarget;
}
/**
 * Set a passive listener of a given event.
 * @param {Event} event The event to set current target.
 * @param {Function|null} passiveListener New passive listener.
 * @returns {void}
 * @private
 */


function setPassiveListener(event, passiveListener) {
  pd(event).passiveListener = passiveListener;
}
/**
 * @typedef {object} ListenerNode
 * @property {Function} listener
 * @property {1|2|3} listenerType
 * @property {boolean} passive
 * @property {boolean} once
 * @property {ListenerNode|null} next
 * @private
 */

/**
 * @type {WeakMap<object, Map<string, ListenerNode>>}
 * @private
 */


var listenersMap = new WeakMap(); // Listener types

var CAPTURE = 1;
var BUBBLE = 2;
var ATTRIBUTE = 3;
/**
 * Check whether a given value is an object or not.
 * @param {any} x The value to check.
 * @returns {boolean} `true` if the value is an object.
 */

function isObject(x) {
  return x !== null && (0, _typeof2.default)(x) === 'object'; //eslint-disable-line no-restricted-syntax
}
/**
 * Get listeners.
 * @param {EventTarget} eventTarget The event target to get.
 * @returns {Map<string, ListenerNode>} The listeners.
 * @private
 */


function getListeners(eventTarget) {
  var listeners = listenersMap.get(eventTarget);

  if (listeners == null) {
    throw new TypeError("'this' is expected an EventTarget object, but got another value.");
  }

  return listeners;
}
/**
 * Get the property descriptor for the event attribute of a given event.
 * @param {string} eventName The event name to get property descriptor.
 * @returns {PropertyDescriptor} The property descriptor.
 * @private
 */


function defineEventAttributeDescriptor(eventName) {
  return {
    get: function get() {
      var listeners = getListeners(this);
      var node = listeners.get(eventName);

      while (node != null) {
        if (node.listenerType === ATTRIBUTE) {
          return node.listener;
        }

        node = node.next;
      }

      return null;
    },
    set: function set(listener) {
      if (typeof listener !== 'function' && !isObject(listener)) {
        listener = null; // eslint-disable-line no-param-reassign
      }

      var listeners = getListeners(this); // Traverse to the tail while removing old value.

      var prev = null;
      var node = listeners.get(eventName);

      while (node != null) {
        if (node.listenerType === ATTRIBUTE) {
          // Remove old value.
          if (prev !== null) {
            prev.next = node.next;
          } else if (node.next !== null) {
            listeners.set(eventName, node.next);
          } else {
            listeners.delete(eventName);
          }
        } else {
          prev = node;
        }

        node = node.next;
      } // Add new value.


      if (listener !== null) {
        var newNode = {
          listener: listener,
          listenerType: ATTRIBUTE,
          passive: false,
          once: false,
          next: null
        };

        if (prev === null) {
          listeners.set(eventName, newNode);
        } else {
          prev.next = newNode;
        }
      }
    },
    configurable: true,
    enumerable: true
  };
}
/**
 * Define an event attribute (e.g. `eventTarget.onclick`).
 * @param {Object} eventTargetPrototype The event target prototype to define an event attrbite.
 * @param {string} eventName The event name to define.
 * @returns {void}
 */


function defineEventAttribute(eventTargetPrototype, eventName) {
  Object.defineProperty(eventTargetPrototype, "on".concat(eventName), defineEventAttributeDescriptor(eventName));
}
/**
 * Define a custom EventTarget with event attributes.
 * @param {string[]} eventNames Event names for event attributes.
 * @returns {EventTarget} The custom EventTarget.
 * @private
 */


function defineCustomEventTarget(eventNames) {
  /** CustomEventTarget */
  function CustomEventTarget() {
    EventTarget.call(this);
  }

  CustomEventTarget.prototype = Object.create(EventTarget.prototype, {
    constructor: {
      value: CustomEventTarget,
      configurable: true,
      writable: true
    }
  });

  for (var i = 0; i < eventNames.length; ++i) {
    defineEventAttribute(CustomEventTarget.prototype, eventNames[i]);
  }

  return CustomEventTarget;
}
/**
 * EventTarget.
 *
 * - This is constructor if no arguments.
 * - This is a function which returns a CustomEventTarget constructor if there are arguments.
 *
 * For example:
 *
 *     class A extends EventTarget {}
 *     class B extends EventTarget("message") {}
 *     class C extends EventTarget("message", "error") {}
 *     class D extends EventTarget(["message", "error"]) {}
 */


function EventTarget() {
  /*eslint-disable consistent-return */
  if (this instanceof EventTarget) {
    listenersMap.set(this, new Map());
    return;
  }

  if (arguments.length === 1 && Array.isArray(arguments[0])) {
    return defineCustomEventTarget(arguments[0]);
  }

  if (arguments.length > 0) {
    var types = new Array(arguments.length);

    for (var i = 0; i < arguments.length; ++i) {
      types[i] = arguments[i];
    }

    return defineCustomEventTarget(types);
  }

  throw new TypeError('Cannot call a class as a function');
  /*eslint-enable consistent-return */
} // Should be enumerable, but class methods are not enumerable.


EventTarget.prototype = {
  /**
   * Add a given listener to this event target.
   * @param {string} eventName The event name to add.
   * @param {Function} listener The listener to add.
   * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.
   * @returns {void}
   */
  addEventListener: function addEventListener(eventName, listener, options) {
    if (listener == null) {
      return;
    }

    if (typeof listener !== 'function' && !isObject(listener)) {
      throw new TypeError("'listener' should be a function or an object.");
    }

    var listeners = getListeners(this);
    var optionsIsObj = isObject(options);
    var capture = optionsIsObj ? Boolean(options.capture) : Boolean(options);
    var listenerType = capture ? CAPTURE : BUBBLE;
    var newNode = {
      listener: listener,
      listenerType: listenerType,
      passive: optionsIsObj && Boolean(options.passive),
      once: optionsIsObj && Boolean(options.once),
      next: null
    }; // Set it as the first node if the first node is null.

    var node = listeners.get(eventName);

    if (node === undefined) {
      listeners.set(eventName, newNode);
      return;
    } // Traverse to the tail while checking duplication..


    var prev = null;

    while (node != null) {
      if (node.listener === listener && node.listenerType === listenerType) {
        // Should ignore duplication.
        return;
      }

      prev = node;
      node = node.next;
    } // Add it.


    prev.next = newNode;
  },

  /**
   * Remove a given listener from this event target.
   * @param {string} eventName The event name to remove.
   * @param {Function} listener The listener to remove.
   * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.
   * @returns {void}
   */
  removeEventListener: function removeEventListener(eventName, listener, options) {
    if (listener == null) {
      return;
    }

    var listeners = getListeners(this);
    var capture = isObject(options) ? Boolean(options.capture) : Boolean(options);
    var listenerType = capture ? CAPTURE : BUBBLE;
    var prev = null;
    var node = listeners.get(eventName);

    while (node != null) {
      if (node.listener === listener && node.listenerType === listenerType) {
        if (prev !== null) {
          prev.next = node.next;
        } else if (node.next !== null) {
          listeners.set(eventName, node.next);
        } else {
          listeners.delete(eventName);
        }

        return;
      }

      prev = node;
      node = node.next;
    }
  },

  /**
   * Dispatch a given event.
   * @param {Event|{type:string}} event The event to dispatch.
   * @returns {boolean} `false` if canceled.
   */
  dispatchEvent: function dispatchEvent(event) {
    if (event == null || typeof event.type !== 'string') {
      throw new TypeError('"event.type" should be a string.');
    } // If listeners aren't registered, terminate.


    var listeners = getListeners(this);
    var eventName = event.type;
    var node = listeners.get(eventName);

    if (node == null) {
      return true;
    } // Since we cannot rewrite several properties, so wrap object.


    var wrappedEvent = wrapEvent(this, event); // This doesn't process capturing phase and bubbling phase.
    // This isn't participating in a tree.

    var prev = null;

    while (node != null) {
      // Remove this listener if it's once
      if (node.once) {
        if (prev !== null) {
          prev.next = node.next;
        } else if (node.next !== null) {
          listeners.set(eventName, node.next);
        } else {
          listeners.delete(eventName);
        }
      } else {
        prev = node;
      } // Call this listener


      setPassiveListener(wrappedEvent, node.passive ? node.listener : null);

      if (typeof node.listener === 'function') {
        try {
          node.listener.call(this, wrappedEvent);
        } catch (err) {
          if (typeof console !== 'undefined' && typeof console.error === 'function') {
            console.error(err);
          }
        }
      } else if (node.listenerType !== ATTRIBUTE && typeof node.listener.handleEvent === 'function') {
        node.listener.handleEvent(wrappedEvent);
      } // Break if `event.stopImmediatePropagation` was called.


      if (isStopped(wrappedEvent)) {
        break;
      }

      node = node.next;
    }

    setPassiveListener(wrappedEvent, null);
    setEventPhase(wrappedEvent, 0);
    setCurrentTarget(wrappedEvent, null);
    return !wrappedEvent.defaultPrevented;
  }
}; // `constructor` is not enumerable.

Object.defineProperty(EventTarget.prototype, 'constructor', {
  value: EventTarget,
  configurable: true,
  writable: true
}); // Ensure `eventTarget instanceof window.EventTarget` is `true`.

if (typeof window !== 'undefined' && typeof window.EventTarget !== 'undefined') {
  Object.setPrototypeOf(EventTarget.prototype, window.EventTarget.prototype);
}

exports.defineEventAttribute = defineEventAttribute;
exports.EventTarget = EventTarget;
exports.default = EventTarget;
module.exports = EventTarget;
module.exports.EventTarget = module.exports['default'] = EventTarget;
module.exports.defineEventAttribute = defineEventAttribute;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9leHRlcm5hbC9ldmVudC10YXJnZXQtc2hpbS5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInByaXZhdGVEYXRhIiwiV2Vha01hcCIsIndyYXBwZXJzIiwicGQiLCJldmVudCIsInJldHYiLCJnZXQiLCJjb25zb2xlIiwiYXNzZXJ0Iiwic2V0Q2FuY2VsRmxhZyIsImRhdGEiLCJwYXNzaXZlTGlzdGVuZXIiLCJlcnJvciIsImNhbmNlbGFibGUiLCJjYW5jZWxlZCIsInByZXZlbnREZWZhdWx0IiwiRXZlbnQiLCJldmVudFRhcmdldCIsInNldCIsImV2ZW50UGhhc2UiLCJjdXJyZW50VGFyZ2V0Iiwic3RvcHBlZCIsImltbWVkaWF0ZVN0b3BwZWQiLCJ0aW1lU3RhbXAiLCJEYXRlIiwibm93IiwiZW51bWVyYWJsZSIsImtleXMiLCJpIiwibGVuZ3RoIiwia2V5IiwiZGVmaW5lUmVkaXJlY3REZXNjcmlwdG9yIiwicHJvdG90eXBlIiwidHlwZSIsInRhcmdldCIsImNvbXBvc2VkUGF0aCIsIk5PTkUiLCJDQVBUVVJJTkdfUEhBU0UiLCJBVF9UQVJHRVQiLCJCVUJCTElOR19QSEFTRSIsInN0b3BQcm9wYWdhdGlvbiIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImJ1YmJsZXMiLCJCb29sZWFuIiwiZGVmYXVsdFByZXZlbnRlZCIsImNvbXBvc2VkIiwic3JjRWxlbWVudCIsImNhbmNlbEJ1YmJsZSIsInJldHVyblZhbHVlIiwiaW5pdEV2ZW50IiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ3aW5kb3ciLCJzZXRQcm90b3R5cGVPZiIsImRlZmluZUNhbGxEZXNjcmlwdG9yIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJkZWZpbmVXcmFwcGVyIiwiQmFzZUV2ZW50IiwicHJvdG8iLCJDdXN0b21FdmVudCIsImNhbGwiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsImRlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJpc0Z1bmMiLCJnZXRXcmFwcGVyIiwid3JhcHBlciIsImdldFByb3RvdHlwZU9mIiwid3JhcEV2ZW50IiwiV3JhcHBlciIsImlzU3RvcHBlZCIsInNldEV2ZW50UGhhc2UiLCJzZXRDdXJyZW50VGFyZ2V0Iiwic2V0UGFzc2l2ZUxpc3RlbmVyIiwibGlzdGVuZXJzTWFwIiwiQ0FQVFVSRSIsIkJVQkJMRSIsIkFUVFJJQlVURSIsImlzT2JqZWN0IiwieCIsImdldExpc3RlbmVycyIsImxpc3RlbmVycyIsIlR5cGVFcnJvciIsImRlZmluZUV2ZW50QXR0cmlidXRlRGVzY3JpcHRvciIsImV2ZW50TmFtZSIsIm5vZGUiLCJsaXN0ZW5lclR5cGUiLCJsaXN0ZW5lciIsIm5leHQiLCJwcmV2IiwiZGVsZXRlIiwibmV3Tm9kZSIsInBhc3NpdmUiLCJvbmNlIiwiZGVmaW5lRXZlbnRBdHRyaWJ1dGUiLCJldmVudFRhcmdldFByb3RvdHlwZSIsImRlZmluZUN1c3RvbUV2ZW50VGFyZ2V0IiwiZXZlbnROYW1lcyIsIkN1c3RvbUV2ZW50VGFyZ2V0IiwiRXZlbnRUYXJnZXQiLCJNYXAiLCJBcnJheSIsImlzQXJyYXkiLCJ0eXBlcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcHRpb25zIiwib3B0aW9uc0lzT2JqIiwiY2FwdHVyZSIsInVuZGVmaW5lZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Iiwid3JhcHBlZEV2ZW50IiwiZXJyIiwiaGFuZGxlRXZlbnQiLCJkZWZhdWx0IiwibW9kdWxlIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBOztBQUVBOzs7OztBQUtBOzs7Ozs7QUFFQUEsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztBQUFFQyxFQUFBQSxLQUFLLEVBQUU7QUFBVCxDQUE3QztBQUVBOzs7Ozs7Ozs7Ozs7OztBQWNBOzs7Ozs7QUFLQSxJQUFNQyxXQUFXLEdBQUcsSUFBSUMsT0FBSixF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Q0FBQ2tHLG9CQUFSLEdBQStCQSxvQkFBL0I7QUFDQWxHLE9BQU8sQ0FBQ3VHLFdBQVIsR0FBc0JBLFdBQXRCO0FBQ0F2RyxPQUFPLENBQUNzSCxPQUFSLEdBQWtCZixXQUFsQjtBQUVBZ0IsTUFBTSxDQUFDdkgsT0FBUCxHQUFpQnVHLFdBQWpCO0FBQ0FnQixNQUFNLENBQUN2SCxPQUFQLENBQWV1RyxXQUFmLEdBQTZCZ0IsTUFBTSxDQUFDdkgsT0FBUCxDQUFlLFNBQWYsSUFBNEJ1RyxXQUF6RDtBQUNBZ0IsTUFBTSxDQUFDdkgsT0FBUCxDQUFla0csb0JBQWYsR0FBc0NBLG9CQUF0QyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgaXMgYWRvcHRlZCBmcm9tIGV2ZW50LXRhcmdldC1zaGltQDUuMC4xIHVuZGVyIE1JVCBMaWNlbnNlLlxyXG4vLyBUaGUgc291cmNlIGNvZGUgaXMgY29waWVkIGhlcmUgYmVjYXVzZSB0aGUgb3JpZ2luYWwgcGFja2FnZSBkbyBub3Qgc3VwcG9ydCBFUzUgYnJvd3NlcnMuXHJcblxyXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xyXG5cclxuLyoqXHJcbiAqIEBhdXRob3IgVG9ydSBOYWdhc2hpbWEgPGh0dHBzOi8vZ2l0aHViLmNvbS9teXN0aWNhdGVhPlxyXG4gKiBAY29weXJpZ2h0IDIwMTUgVG9ydSBOYWdhc2hpbWEuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIFNlZSBMSUNFTlNFIGZpbGUgaW4gcm9vdCBkaXJlY3RvcnkgZm9yIGZ1bGwgbGljZW5zZS5cclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XHJcblxyXG4vKipcclxuICogQHR5cGVkZWYge29iamVjdH0gUHJpdmF0ZURhdGFcclxuICogQHByb3BlcnR5IHtFdmVudFRhcmdldH0gZXZlbnRUYXJnZXQgVGhlIGV2ZW50IHRhcmdldC5cclxuICogQHByb3BlcnR5IHt7dHlwZTpzdHJpbmd9fSBldmVudCBUaGUgb3JpZ2luYWwgZXZlbnQgb2JqZWN0LlxyXG4gKiBAcHJvcGVydHkge251bWJlcn0gZXZlbnRQaGFzZSBUaGUgY3VycmVudCBldmVudCBwaGFzZS5cclxuICogQHByb3BlcnR5IHtFdmVudFRhcmdldHxudWxsfSBjdXJyZW50VGFyZ2V0IFRoZSBjdXJyZW50IGV2ZW50IHRhcmdldC5cclxuICogQHByb3BlcnR5IHtib29sZWFufSBjYW5jZWxlZCBUaGUgZmxhZyB0byBwcmV2ZW50IGRlZmF1bHQuXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gc3RvcHBlZCBUaGUgZmxhZyB0byBzdG9wIHByb3BhZ2F0aW9uLlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGltbWVkaWF0ZVN0b3BwZWQgVGhlIGZsYWcgdG8gc3RvcCBwcm9wYWdhdGlvbiBpbW1lZGlhdGVseS5cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbnxudWxsfSBwYXNzaXZlTGlzdGVuZXIgVGhlIGxpc3RlbmVyIGlmIHRoZSBjdXJyZW50IGxpc3RlbmVyIGlzIHBhc3NpdmUuIE90aGVyd2lzZSB0aGlzIGlzIG51bGwuXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lU3RhbXAgVGhlIHVuaXggdGltZS5cclxuICogQHByaXZhdGVcclxuICovXHJcblxyXG4vKipcclxuICogUHJpdmF0ZSBkYXRhIGZvciBldmVudCB3cmFwcGVycy5cclxuICogQHR5cGUge1dlYWtNYXA8RXZlbnQsIFByaXZhdGVEYXRhPn1cclxuICogQHByaXZhdGVcclxuICovXHJcbmNvbnN0IHByaXZhdGVEYXRhID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbi8qKlxyXG4gKiBDYWNoZSBmb3Igd3JhcHBlciBjbGFzc2VzLlxyXG4gKiBAdHlwZSB7V2Vha01hcDxPYmplY3QsIEZ1bmN0aW9uPn1cclxuICogQHByaXZhdGVcclxuICovXHJcbmNvbnN0IHdyYXBwZXJzID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgcHJpdmF0ZSBkYXRhLlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQgb2JqZWN0IHRvIGdldCBwcml2YXRlIGRhdGEuXHJcbiAqIEByZXR1cm5zIHtQcml2YXRlRGF0YX0gVGhlIHByaXZhdGUgZGF0YSBvZiB0aGUgZXZlbnQuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBwZChldmVudCkge1xyXG4gIGNvbnN0IHJldHYgPSBwcml2YXRlRGF0YS5nZXQoZXZlbnQpO1xyXG4gIGNvbnNvbGUuYXNzZXJ0KHJldHYgIT0gbnVsbCwgXCIndGhpcycgaXMgZXhwZWN0ZWQgYW4gRXZlbnQgb2JqZWN0LCBidXQgZ290XCIsIGV2ZW50KTtcclxuICByZXR1cm4gcmV0djtcclxufVxyXG5cclxuLyoqXHJcbiAqIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jc2V0LXRoZS1jYW5jZWxlZC1mbGFnXHJcbiAqIEBwYXJhbSBkYXRhIHtQcml2YXRlRGF0YX0gcHJpdmF0ZSBkYXRhLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0Q2FuY2VsRmxhZyhkYXRhKSB7XHJcbiAgaWYgKGRhdGEucGFzc2l2ZUxpc3RlbmVyICE9IG51bGwpIHtcclxuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNvbnNvbGUuZXJyb3IgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIHByZXZlbnREZWZhdWx0IGluc2lkZSBwYXNzaXZlIGV2ZW50IGxpc3RlbmVyIGludm9jYXRpb24uJywgZGF0YS5wYXNzaXZlTGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAoIWRhdGEuZXZlbnQuY2FuY2VsYWJsZSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgZGF0YS5jYW5jZWxlZCA9IHRydWU7XHJcbiAgaWYgKHR5cGVvZiBkYXRhLmV2ZW50LnByZXZlbnREZWZhdWx0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICBkYXRhLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2ludGVyZmFjZS1ldmVudFxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBldmVudCB3cmFwcGVyLlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gZXZlbnRUYXJnZXQgVGhlIGV2ZW50IHRhcmdldCBvZiB0aGlzIGRpc3BhdGNoaW5nLlxyXG4gKiBAcGFyYW0ge0V2ZW50fHt0eXBlOnN0cmluZ319IGV2ZW50IFRoZSBvcmlnaW5hbCBldmVudCB0byB3cmFwLlxyXG4gKi9cclxuZnVuY3Rpb24gRXZlbnQoZXZlbnRUYXJnZXQsIGV2ZW50KSB7XHJcbiAgcHJpdmF0ZURhdGEuc2V0KHRoaXMsIHtcclxuICAgIGV2ZW50VGFyZ2V0LFxyXG4gICAgZXZlbnQsXHJcbiAgICBldmVudFBoYXNlOiAyLFxyXG4gICAgY3VycmVudFRhcmdldDogZXZlbnRUYXJnZXQsXHJcbiAgICBjYW5jZWxlZDogZmFsc2UsXHJcbiAgICBzdG9wcGVkOiBmYWxzZSxcclxuICAgIGltbWVkaWF0ZVN0b3BwZWQ6IGZhbHNlLFxyXG4gICAgcGFzc2l2ZUxpc3RlbmVyOiBudWxsLFxyXG4gICAgdGltZVN0YW1wOiBldmVudC50aW1lU3RhbXAgfHwgRGF0ZS5ub3coKVxyXG4gIH0pO1xyXG5cclxuICAvLyBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNVbmZvcmdlYWJsZVxyXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnaXNUcnVzdGVkJywgeyB2YWx1ZTogZmFsc2UsIGVudW1lcmFibGU6IHRydWUgfSk7XHJcblxyXG4gIC8vIERlZmluZSBhY2Nlc3NvcnNcclxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnQpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xyXG4gICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcclxuICAgIGlmICghKGtleSBpbiB0aGlzKSkge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWZpbmVSZWRpcmVjdERlc2NyaXB0b3Ioa2V5KSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBTaG91bGQgYmUgZW51bWVyYWJsZSwgYnV0IGNsYXNzIG1ldGhvZHMgYXJlIG5vdCBlbnVtZXJhYmxlLlxyXG5FdmVudC5wcm90b3R5cGUgPSB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdGhpcyBldmVudC5cclxuICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIGdldCB0eXBlKCkge1xyXG4gICAgcmV0dXJuIHBkKHRoaXMpLmV2ZW50LnR5cGU7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHRhcmdldCBvZiB0aGlzIGV2ZW50LlxyXG4gICAqIEB0eXBlIHtFdmVudFRhcmdldH1cclxuICAgKi9cclxuICBnZXQgdGFyZ2V0KCkge1xyXG4gICAgcmV0dXJuIHBkKHRoaXMpLmV2ZW50VGFyZ2V0O1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSB0YXJnZXQgb2YgdGhpcyBldmVudC5cclxuICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR9XHJcbiAgICovXHJcbiAgZ2V0IGN1cnJlbnRUYXJnZXQoKSB7XHJcbiAgICByZXR1cm4gcGQodGhpcykuY3VycmVudFRhcmdldDtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBAcmV0dXJucyB7RXZlbnRUYXJnZXRbXX0gVGhlIGNvbXBvc2VkIHBhdGggb2YgdGhpcyBldmVudC5cclxuICAgKi9cclxuICBjb21wb3NlZFBhdGgoKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VGFyZ2V0ID0gcGQodGhpcykuY3VycmVudFRhcmdldDtcclxuICAgIGlmIChjdXJyZW50VGFyZ2V0ID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtjdXJyZW50VGFyZ2V0XTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBDb25zdGFudCBvZiBOT05FLlxyXG4gICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICovXHJcbiAgZ2V0IE5PTkUoKSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBDb25zdGFudCBvZiBDQVBUVVJJTkdfUEhBU0UuXHJcbiAgICogQHR5cGUge251bWJlcn1cclxuICAgKi9cclxuICBnZXQgQ0FQVFVSSU5HX1BIQVNFKCkge1xyXG4gICAgcmV0dXJuIDE7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ29uc3RhbnQgb2YgQVRfVEFSR0VULlxyXG4gICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICovXHJcbiAgZ2V0IEFUX1RBUkdFVCgpIHtcclxuICAgIHJldHVybiAyO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnN0YW50IG9mIEJVQkJMSU5HX1BIQVNFLlxyXG4gICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICovXHJcbiAgZ2V0IEJVQkJMSU5HX1BIQVNFKCkge1xyXG4gICAgcmV0dXJuIDM7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHRhcmdldCBvZiB0aGlzIGV2ZW50LlxyXG4gICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICovXHJcbiAgZ2V0IGV2ZW50UGhhc2UoKSB7XHJcbiAgICByZXR1cm4gcGQodGhpcykuZXZlbnRQaGFzZTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBTdG9wIGV2ZW50IGJ1YmJsaW5nLlxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xyXG4gIHN0b3BQcm9wYWdhdGlvbigpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBwZCh0aGlzKTtcclxuXHJcbiAgICBkYXRhLnN0b3BwZWQgPSB0cnVlO1xyXG4gICAgaWYgKHR5cGVvZiBkYXRhLmV2ZW50LnN0b3BQcm9wYWdhdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBkYXRhLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFN0b3AgZXZlbnQgYnViYmxpbmcuXHJcbiAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICovXHJcbiAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHBkKHRoaXMpO1xyXG5cclxuICAgIGRhdGEuc3RvcHBlZCA9IHRydWU7XHJcbiAgICBkYXRhLmltbWVkaWF0ZVN0b3BwZWQgPSB0cnVlO1xyXG4gICAgaWYgKHR5cGVvZiBkYXRhLmV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBkYXRhLmV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBmbGFnIHRvIGJlIGJ1YmJsaW5nLlxyXG4gICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGdldCBidWJibGVzKCkge1xyXG4gICAgcmV0dXJuIEJvb2xlYW4ocGQodGhpcykuZXZlbnQuYnViYmxlcyk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGZsYWcgdG8gYmUgY2FuY2VsYWJsZS5cclxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgKi9cclxuICBnZXQgY2FuY2VsYWJsZSgpIHtcclxuICAgIHJldHVybiBCb29sZWFuKHBkKHRoaXMpLmV2ZW50LmNhbmNlbGFibGUpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENhbmNlbCB0aGlzIGV2ZW50LlxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xyXG4gIHByZXZlbnREZWZhdWx0KCkge1xyXG4gICAgc2V0Q2FuY2VsRmxhZyhwZCh0aGlzKSk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGZsYWcgdG8gaW5kaWNhdGUgY2FuY2VsbGF0aW9uIHN0YXRlLlxyXG4gICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGdldCBkZWZhdWx0UHJldmVudGVkKCkge1xyXG4gICAgcmV0dXJuIHBkKHRoaXMpLmNhbmNlbGVkO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBmbGFnIHRvIGJlIGNvbXBvc2VkLlxyXG4gICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGdldCBjb21wb3NlZCgpIHtcclxuICAgIHJldHVybiBCb29sZWFuKHBkKHRoaXMpLmV2ZW50LmNvbXBvc2VkKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgdW5peCB0aW1lIG9mIHRoaXMgZXZlbnQuXHJcbiAgICogQHR5cGUge251bWJlcn1cclxuICAgKi9cclxuICBnZXQgdGltZVN0YW1wKCkge1xyXG4gICAgcmV0dXJuIHBkKHRoaXMpLnRpbWVTdGFtcDtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0IG9mIHRoaXMgZXZlbnQuXHJcbiAgICogQHR5cGUge0V2ZW50VGFyZ2V0fVxyXG4gICAqIEBkZXByZWNhdGVkXHJcbiAgICovXHJcbiAgZ2V0IHNyY0VsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gcGQodGhpcykuZXZlbnRUYXJnZXQ7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGZsYWcgdG8gc3RvcCBldmVudCBidWJibGluZy5cclxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgKiBAZGVwcmVjYXRlZFxyXG4gICAqL1xyXG4gIGdldCBjYW5jZWxCdWJibGUoKSB7XHJcbiAgICByZXR1cm4gcGQodGhpcykuc3RvcHBlZDtcclxuICB9LFxyXG4gIHNldCBjYW5jZWxCdWJibGUodmFsdWUpIHtcclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGF0YSA9IHBkKHRoaXMpO1xyXG5cclxuICAgIGRhdGEuc3RvcHBlZCA9IHRydWU7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEuZXZlbnQuY2FuY2VsQnViYmxlID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgZGF0YS5ldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBmbGFnIHRvIGluZGljYXRlIGNhbmNlbGxhdGlvbiBzdGF0ZS5cclxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgKiBAZGVwcmVjYXRlZFxyXG4gICAqL1xyXG4gIGdldCByZXR1cm5WYWx1ZSgpIHtcclxuICAgIHJldHVybiAhcGQodGhpcykuY2FuY2VsZWQ7XHJcbiAgfSxcclxuICBzZXQgcmV0dXJuVmFsdWUodmFsdWUpIHtcclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgc2V0Q2FuY2VsRmxhZyhwZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZSB0aGlzIGV2ZW50IG9iamVjdC4gQnV0IGRvIG5vdGhpbmcgdW5kZXIgZXZlbnQgZGlzcGF0Y2hpbmcuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbYnViYmxlcz1mYWxzZV0gVGhlIGZsYWcgdG8gYmUgcG9zc2libGUgdG8gYnViYmxlIHVwLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NhbmNlbGFibGU9ZmFsc2VdIFRoZSBmbGFnIHRvIGJlIHBvc3NpYmxlIHRvIGNhbmNlbC5cclxuICAgKiBAZGVwcmVjYXRlZFxyXG4gICAqL1xyXG4gIGluaXRFdmVudCgpIHtcclxuICAgIC8vIERvIG5vdGhpbmcuXHJcbiAgfVxyXG59O1xyXG5cclxuLy8gYGNvbnN0cnVjdG9yYCBpcyBub3QgZW51bWVyYWJsZS5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50LnByb3RvdHlwZSwgJ2NvbnN0cnVjdG9yJywge1xyXG4gIHZhbHVlOiBFdmVudCxcclxuICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgd3JpdGFibGU6IHRydWVcclxufSk7XHJcblxyXG4vLyBFbnN1cmUgYGV2ZW50IGluc3RhbmNlb2Ygd2luZG93LkV2ZW50YCBpcyBgdHJ1ZWAuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LkV2ZW50ICE9PSAndW5kZWZpbmVkJykge1xyXG4gIE9iamVjdC5zZXRQcm90b3R5cGVPZihFdmVudC5wcm90b3R5cGUsIHdpbmRvdy5FdmVudC5wcm90b3R5cGUpO1xyXG5cclxuICAvLyBNYWtlIGFzc29jaWF0aW9uIGZvciB3cmFwcGVycy5cclxuICB3cmFwcGVycy5zZXQod2luZG93LkV2ZW50LnByb3RvdHlwZSwgRXZlbnQpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIHJlZGlyZWN0IGEgZ2l2ZW4gcHJvcGVydHkuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgUHJvcGVydHkgbmFtZSB0byBkZWZpbmUgcHJvcGVydHkgZGVzY3JpcHRvci5cclxuICogQHJldHVybnMge1Byb3BlcnR5RGVzY3JpcHRvcn0gVGhlIHByb3BlcnR5IGRlc2NyaXB0b3IgdG8gcmVkaXJlY3QgdGhlIHByb3BlcnR5LlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gZGVmaW5lUmVkaXJlY3REZXNjcmlwdG9yKGtleSkge1xyXG4gIHJldHVybiB7XHJcbiAgICBnZXQoKSB7XHJcbiAgICAgIHJldHVybiBwZCh0aGlzKS5ldmVudFtrZXldO1xyXG4gICAgfSxcclxuICAgIHNldCh2YWx1ZSkge1xyXG4gICAgICBwZCh0aGlzKS5ldmVudFtrZXldID0gdmFsdWU7XHJcbiAgICB9LFxyXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHByb3BlcnR5IGRlc2NyaXB0b3IgdG8gY2FsbCBhIGdpdmVuIG1ldGhvZCBwcm9wZXJ0eS5cclxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBQcm9wZXJ0eSBuYW1lIHRvIGRlZmluZSBwcm9wZXJ0eSBkZXNjcmlwdG9yLlxyXG4gKiBAcmV0dXJucyB7UHJvcGVydHlEZXNjcmlwdG9yfSBUaGUgcHJvcGVydHkgZGVzY3JpcHRvciB0byBjYWxsIHRoZSBtZXRob2QgcHJvcGVydHkuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWZpbmVDYWxsRGVzY3JpcHRvcihrZXkpIHtcclxuICByZXR1cm4ge1xyXG4gICAgdmFsdWUoKSB7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gcGQodGhpcykuZXZlbnQ7XHJcbiAgICAgIHJldHVybiBldmVudFtrZXldLmFwcGx5KGV2ZW50LCBhcmd1bWVudHMpO1xyXG4gICAgfSxcclxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgIGVudW1lcmFibGU6IHRydWVcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogRGVmaW5lIG5ldyB3cmFwcGVyIGNsYXNzLlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBCYXNlRXZlbnQgVGhlIGJhc2Ugd3JhcHBlciBjbGFzcy5cclxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvIFRoZSBwcm90b3R5cGUgb2YgdGhlIG9yaWdpbmFsIGV2ZW50LlxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFRoZSBkZWZpbmVkIHdyYXBwZXIgY2xhc3MuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWZpbmVXcmFwcGVyKEJhc2VFdmVudCwgcHJvdG8pIHtcclxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvdG8pO1xyXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIEJhc2VFdmVudDtcclxuICB9XHJcblxyXG4gIC8qKiBDdXN0b21FdmVudCAqL1xyXG4gIGZ1bmN0aW9uIEN1c3RvbUV2ZW50KGV2ZW50VGFyZ2V0LCBldmVudCkge1xyXG4gICAgQmFzZUV2ZW50LmNhbGwodGhpcywgZXZlbnRUYXJnZXQsIGV2ZW50KTtcclxuICB9XHJcblxyXG4gIEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQmFzZUV2ZW50LnByb3RvdHlwZSwge1xyXG4gICAgY29uc3RydWN0b3I6IHsgdmFsdWU6IEN1c3RvbUV2ZW50LCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH1cclxuICB9KTtcclxuXHJcbiAgLy8gRGVmaW5lIGFjY2Vzc29ycy5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGNvbnN0IGtleSA9IGtleXNbaV07XHJcbiAgICBpZiAoIShrZXkgaW4gQmFzZUV2ZW50LnByb3RvdHlwZSkpIHtcclxuICAgICAgY29uc3QgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvdG8sIGtleSk7XHJcbiAgICAgIGNvbnN0IGlzRnVuYyA9IHR5cGVvZiBkZXNjcmlwdG9yLnZhbHVlID09PSAnZnVuY3Rpb24nO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXHJcbiAgICAgICAgQ3VzdG9tRXZlbnQucHJvdG90eXBlLFxyXG4gICAgICAgIGtleSxcclxuICAgICAgICBpc0Z1bmMgPyBkZWZpbmVDYWxsRGVzY3JpcHRvcihrZXkpIDogZGVmaW5lUmVkaXJlY3REZXNjcmlwdG9yKGtleSlcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBDdXN0b21FdmVudDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgd3JhcHBlciBjbGFzcyBvZiBhIGdpdmVuIHByb3RvdHlwZS5cclxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvIFRoZSBwcm90b3R5cGUgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRvIGdldCBpdHMgd3JhcHBlci5cclxuICogQHJldHVybnMge0Z1bmN0aW9ufSBUaGUgd3JhcHBlciBjbGFzcy5cclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIGdldFdyYXBwZXIocHJvdG8pIHtcclxuICBpZiAocHJvdG8gPT0gbnVsbCB8fCBwcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSkge1xyXG4gICAgcmV0dXJuIEV2ZW50O1xyXG4gIH1cclxuXHJcbiAgbGV0IHdyYXBwZXIgPSB3cmFwcGVycy5nZXQocHJvdG8pO1xyXG4gIGlmICh3cmFwcGVyID09IG51bGwpIHtcclxuICAgIHdyYXBwZXIgPSBkZWZpbmVXcmFwcGVyKGdldFdyYXBwZXIoT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSksIHByb3RvKTtcclxuICAgIHdyYXBwZXJzLnNldChwcm90bywgd3JhcHBlcik7XHJcbiAgfVxyXG4gIHJldHVybiB3cmFwcGVyO1xyXG59XHJcblxyXG4vKipcclxuICogV3JhcCBhIGdpdmVuIGV2ZW50IHRvIG1hbmFnZW1lbnQgYSBkaXNwYXRjaGluZy5cclxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gZXZlbnRUYXJnZXQgVGhlIGV2ZW50IHRhcmdldCBvZiB0aGlzIGRpc3BhdGNoaW5nLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgVGhlIGV2ZW50IHRvIHdyYXAuXHJcbiAqIEByZXR1cm5zIHtFdmVudH0gVGhlIHdyYXBwZXIgaW5zdGFuY2UuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiB3cmFwRXZlbnQoZXZlbnRUYXJnZXQsIGV2ZW50KSB7XHJcbiAgY29uc3QgV3JhcHBlciA9IGdldFdyYXBwZXIoT2JqZWN0LmdldFByb3RvdHlwZU9mKGV2ZW50KSk7XHJcbiAgcmV0dXJuIG5ldyBXcmFwcGVyKGV2ZW50VGFyZ2V0LCBldmVudCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGltbWVkaWF0ZVN0b3BwZWQgZmxhZyBvZiBhIGdpdmVuIGV2ZW50LlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gZ2V0LlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVGhlIGZsYWcgdG8gc3RvcCBwcm9wYWdhdGlvbiBpbW1lZGlhdGVseS5cclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIGlzU3RvcHBlZChldmVudCkge1xyXG4gIHJldHVybiBwZChldmVudCkuaW1tZWRpYXRlU3RvcHBlZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgY3VycmVudCBldmVudCBwaGFzZSBvZiBhIGdpdmVuIGV2ZW50LlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gc2V0IGN1cnJlbnQgdGFyZ2V0LlxyXG4gKiBAcGFyYW0ge251bWJlcn0gZXZlbnRQaGFzZSBOZXcgZXZlbnQgcGhhc2UuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gc2V0RXZlbnRQaGFzZShldmVudCwgZXZlbnRQaGFzZSkge1xyXG4gIHBkKGV2ZW50KS5ldmVudFBoYXNlID0gZXZlbnRQaGFzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgY3VycmVudCB0YXJnZXQgb2YgYSBnaXZlbiBldmVudC5cclxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIHNldCBjdXJyZW50IHRhcmdldC5cclxuICogQHBhcmFtIHtFdmVudFRhcmdldHxudWxsfSBjdXJyZW50VGFyZ2V0IE5ldyBjdXJyZW50IHRhcmdldC5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRDdXJyZW50VGFyZ2V0KGV2ZW50LCBjdXJyZW50VGFyZ2V0KSB7XHJcbiAgcGQoZXZlbnQpLmN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0O1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGEgcGFzc2l2ZSBsaXN0ZW5lciBvZiBhIGdpdmVuIGV2ZW50LlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gc2V0IGN1cnJlbnQgdGFyZ2V0LlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufG51bGx9IHBhc3NpdmVMaXN0ZW5lciBOZXcgcGFzc2l2ZSBsaXN0ZW5lci5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRQYXNzaXZlTGlzdGVuZXIoZXZlbnQsIHBhc3NpdmVMaXN0ZW5lcikge1xyXG4gIHBkKGV2ZW50KS5wYXNzaXZlTGlzdGVuZXIgPSBwYXNzaXZlTGlzdGVuZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBMaXN0ZW5lck5vZGVcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gbGlzdGVuZXJcclxuICogQHByb3BlcnR5IHsxfDJ8M30gbGlzdGVuZXJUeXBlXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcGFzc2l2ZVxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IG9uY2VcclxuICogQHByb3BlcnR5IHtMaXN0ZW5lck5vZGV8bnVsbH0gbmV4dFxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAdHlwZSB7V2Vha01hcDxvYmplY3QsIE1hcDxzdHJpbmcsIExpc3RlbmVyTm9kZT4+fVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuY29uc3QgbGlzdGVuZXJzTWFwID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbi8vIExpc3RlbmVyIHR5cGVzXHJcbmNvbnN0IENBUFRVUkUgPSAxO1xyXG5jb25zdCBCVUJCTEUgPSAyO1xyXG5jb25zdCBBVFRSSUJVVEUgPSAzO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIHdoZXRoZXIgYSBnaXZlbiB2YWx1ZSBpcyBhbiBvYmplY3Qgb3Igbm90LlxyXG4gKiBAcGFyYW0ge2FueX0geCBUaGUgdmFsdWUgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZhbHVlIGlzIGFuIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIGlzT2JqZWN0KHgpIHtcclxuICByZXR1cm4geCAhPT0gbnVsbCAmJiB0eXBlb2YgeCA9PT0gJ29iamVjdCc7IC8vZXNsaW50LWRpc2FibGUtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxyXG59XHJcblxyXG4vKipcclxuICogR2V0IGxpc3RlbmVycy5cclxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gZXZlbnRUYXJnZXQgVGhlIGV2ZW50IHRhcmdldCB0byBnZXQuXHJcbiAqIEByZXR1cm5zIHtNYXA8c3RyaW5nLCBMaXN0ZW5lck5vZGU+fSBUaGUgbGlzdGVuZXJzLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TGlzdGVuZXJzKGV2ZW50VGFyZ2V0KSB7XHJcbiAgY29uc3QgbGlzdGVuZXJzID0gbGlzdGVuZXJzTWFwLmdldChldmVudFRhcmdldCk7XHJcbiAgaWYgKGxpc3RlbmVycyA9PSBudWxsKSB7XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiJ3RoaXMnIGlzIGV4cGVjdGVkIGFuIEV2ZW50VGFyZ2V0IG9iamVjdCwgYnV0IGdvdCBhbm90aGVyIHZhbHVlLlwiKTtcclxuICB9XHJcbiAgcmV0dXJuIGxpc3RlbmVycztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgdGhlIGV2ZW50IGF0dHJpYnV0ZSBvZiBhIGdpdmVuIGV2ZW50LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGdldCBwcm9wZXJ0eSBkZXNjcmlwdG9yLlxyXG4gKiBAcmV0dXJucyB7UHJvcGVydHlEZXNjcmlwdG9yfSBUaGUgcHJvcGVydHkgZGVzY3JpcHRvci5cclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIGRlZmluZUV2ZW50QXR0cmlidXRlRGVzY3JpcHRvcihldmVudE5hbWUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgZ2V0KCkge1xyXG4gICAgICBjb25zdCBsaXN0ZW5lcnMgPSBnZXRMaXN0ZW5lcnModGhpcyk7XHJcbiAgICAgIGxldCBub2RlID0gbGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xyXG4gICAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKG5vZGUubGlzdGVuZXJUeXBlID09PSBBVFRSSUJVVEUpIHtcclxuICAgICAgICAgIHJldHVybiBub2RlLmxpc3RlbmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXQobGlzdGVuZXIpIHtcclxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QobGlzdGVuZXIpKSB7XHJcbiAgICAgICAgbGlzdGVuZXIgPSBudWxsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKHRoaXMpO1xyXG5cclxuICAgICAgLy8gVHJhdmVyc2UgdG8gdGhlIHRhaWwgd2hpbGUgcmVtb3Zpbmcgb2xkIHZhbHVlLlxyXG4gICAgICBsZXQgcHJldiA9IG51bGw7XHJcbiAgICAgIGxldCBub2RlID0gbGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xyXG4gICAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKG5vZGUubGlzdGVuZXJUeXBlID09PSBBVFRSSUJVVEUpIHtcclxuICAgICAgICAgIC8vIFJlbW92ZSBvbGQgdmFsdWUuXHJcbiAgICAgICAgICBpZiAocHJldiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwcmV2Lm5leHQgPSBub2RlLm5leHQ7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUubmV4dCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcnMuc2V0KGV2ZW50TmFtZSwgbm9kZS5uZXh0KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUoZXZlbnROYW1lKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcHJldiA9IG5vZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBBZGQgbmV3IHZhbHVlLlxyXG4gICAgICBpZiAobGlzdGVuZXIgIT09IG51bGwpIHtcclxuICAgICAgICBjb25zdCBuZXdOb2RlID0ge1xyXG4gICAgICAgICAgbGlzdGVuZXIsXHJcbiAgICAgICAgICBsaXN0ZW5lclR5cGU6IEFUVFJJQlVURSxcclxuICAgICAgICAgIHBhc3NpdmU6IGZhbHNlLFxyXG4gICAgICAgICAgb25jZTogZmFsc2UsXHJcbiAgICAgICAgICBuZXh0OiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAocHJldiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgbGlzdGVuZXJzLnNldChldmVudE5hbWUsIG5ld05vZGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwcmV2Lm5leHQgPSBuZXdOb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgIGVudW1lcmFibGU6IHRydWVcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogRGVmaW5lIGFuIGV2ZW50IGF0dHJpYnV0ZSAoZS5nLiBgZXZlbnRUYXJnZXQub25jbGlja2ApLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnRUYXJnZXRQcm90b3R5cGUgVGhlIGV2ZW50IHRhcmdldCBwcm90b3R5cGUgdG8gZGVmaW5lIGFuIGV2ZW50IGF0dHJiaXRlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGRlZmluZS5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5mdW5jdGlvbiBkZWZpbmVFdmVudEF0dHJpYnV0ZShldmVudFRhcmdldFByb3RvdHlwZSwgZXZlbnROYW1lKSB7XHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV2ZW50VGFyZ2V0UHJvdG90eXBlLCBgb24ke2V2ZW50TmFtZX1gLCBkZWZpbmVFdmVudEF0dHJpYnV0ZURlc2NyaXB0b3IoZXZlbnROYW1lKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWZpbmUgYSBjdXN0b20gRXZlbnRUYXJnZXQgd2l0aCBldmVudCBhdHRyaWJ1dGVzLlxyXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBldmVudE5hbWVzIEV2ZW50IG5hbWVzIGZvciBldmVudCBhdHRyaWJ1dGVzLlxyXG4gKiBAcmV0dXJucyB7RXZlbnRUYXJnZXR9IFRoZSBjdXN0b20gRXZlbnRUYXJnZXQuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FdmVudFRhcmdldChldmVudE5hbWVzKSB7XHJcbiAgLyoqIEN1c3RvbUV2ZW50VGFyZ2V0ICovXHJcbiAgZnVuY3Rpb24gQ3VzdG9tRXZlbnRUYXJnZXQoKSB7XHJcbiAgICBFdmVudFRhcmdldC5jYWxsKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgQ3VzdG9tRXZlbnRUYXJnZXQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudFRhcmdldC5wcm90b3R5cGUsIHtcclxuICAgIGNvbnN0cnVjdG9yOiB7XHJcbiAgICAgIHZhbHVlOiBDdXN0b21FdmVudFRhcmdldCxcclxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICB3cml0YWJsZTogdHJ1ZVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50TmFtZXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGRlZmluZUV2ZW50QXR0cmlidXRlKEN1c3RvbUV2ZW50VGFyZ2V0LnByb3RvdHlwZSwgZXZlbnROYW1lc1tpXSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gQ3VzdG9tRXZlbnRUYXJnZXQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFdmVudFRhcmdldC5cclxuICpcclxuICogLSBUaGlzIGlzIGNvbnN0cnVjdG9yIGlmIG5vIGFyZ3VtZW50cy5cclxuICogLSBUaGlzIGlzIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIEN1c3RvbUV2ZW50VGFyZ2V0IGNvbnN0cnVjdG9yIGlmIHRoZXJlIGFyZSBhcmd1bWVudHMuXHJcbiAqXHJcbiAqIEZvciBleGFtcGxlOlxyXG4gKlxyXG4gKiAgICAgY2xhc3MgQSBleHRlbmRzIEV2ZW50VGFyZ2V0IHt9XHJcbiAqICAgICBjbGFzcyBCIGV4dGVuZHMgRXZlbnRUYXJnZXQoXCJtZXNzYWdlXCIpIHt9XHJcbiAqICAgICBjbGFzcyBDIGV4dGVuZHMgRXZlbnRUYXJnZXQoXCJtZXNzYWdlXCIsIFwiZXJyb3JcIikge31cclxuICogICAgIGNsYXNzIEQgZXh0ZW5kcyBFdmVudFRhcmdldChbXCJtZXNzYWdlXCIsIFwiZXJyb3JcIl0pIHt9XHJcbiAqL1xyXG5mdW5jdGlvbiBFdmVudFRhcmdldCgpIHtcclxuICAvKmVzbGludC1kaXNhYmxlIGNvbnNpc3RlbnQtcmV0dXJuICovXHJcbiAgaWYgKHRoaXMgaW5zdGFuY2VvZiBFdmVudFRhcmdldCkge1xyXG4gICAgbGlzdGVuZXJzTWFwLnNldCh0aGlzLCBuZXcgTWFwKCkpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcclxuICAgIHJldHVybiBkZWZpbmVDdXN0b21FdmVudFRhcmdldChhcmd1bWVudHNbMF0pO1xyXG4gIH1cclxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IHR5cGVzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgdHlwZXNbaV0gPSBhcmd1bWVudHNbaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVmaW5lQ3VzdG9tRXZlbnRUYXJnZXQodHlwZXMpO1xyXG4gIH1cclxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTtcclxuICAvKmVzbGludC1lbmFibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cclxufVxyXG5cclxuLy8gU2hvdWxkIGJlIGVudW1lcmFibGUsIGJ1dCBjbGFzcyBtZXRob2RzIGFyZSBub3QgZW51bWVyYWJsZS5cclxuRXZlbnRUYXJnZXQucHJvdG90eXBlID0ge1xyXG4gIC8qKlxyXG4gICAqIEFkZCBhIGdpdmVuIGxpc3RlbmVyIHRvIHRoaXMgZXZlbnQgdGFyZ2V0LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgVGhlIGV2ZW50IG5hbWUgdG8gYWRkLlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciB0byBhZGQuXHJcbiAgICogQHBhcmFtIHtib29sZWFufHtjYXB0dXJlPzpib29sZWFuLHBhc3NpdmU/OmJvb2xlYW4sb25jZT86Ym9vbGVhbn19IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBmb3IgdGhpcyBsaXN0ZW5lci5cclxuICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgKi9cclxuICBhZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcclxuICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KGxpc3RlbmVyKSkge1xyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiJ2xpc3RlbmVyJyBzaG91bGQgYmUgYSBmdW5jdGlvbiBvciBhbiBvYmplY3QuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGxpc3RlbmVycyA9IGdldExpc3RlbmVycyh0aGlzKTtcclxuICAgIGNvbnN0IG9wdGlvbnNJc09iaiA9IGlzT2JqZWN0KG9wdGlvbnMpO1xyXG4gICAgY29uc3QgY2FwdHVyZSA9IG9wdGlvbnNJc09iaiA/IEJvb2xlYW4ob3B0aW9ucy5jYXB0dXJlKSA6IEJvb2xlYW4ob3B0aW9ucyk7XHJcbiAgICBjb25zdCBsaXN0ZW5lclR5cGUgPSBjYXB0dXJlID8gQ0FQVFVSRSA6IEJVQkJMRTtcclxuICAgIGNvbnN0IG5ld05vZGUgPSB7XHJcbiAgICAgIGxpc3RlbmVyLFxyXG4gICAgICBsaXN0ZW5lclR5cGUsXHJcbiAgICAgIHBhc3NpdmU6IG9wdGlvbnNJc09iaiAmJiBCb29sZWFuKG9wdGlvbnMucGFzc2l2ZSksXHJcbiAgICAgIG9uY2U6IG9wdGlvbnNJc09iaiAmJiBCb29sZWFuKG9wdGlvbnMub25jZSksXHJcbiAgICAgIG5leHQ6IG51bGxcclxuICAgIH07XHJcblxyXG4gICAgLy8gU2V0IGl0IGFzIHRoZSBmaXJzdCBub2RlIGlmIHRoZSBmaXJzdCBub2RlIGlzIG51bGwuXHJcbiAgICBsZXQgbm9kZSA9IGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKTtcclxuICAgIGlmIChub2RlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgbGlzdGVuZXJzLnNldChldmVudE5hbWUsIG5ld05vZGUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVHJhdmVyc2UgdG8gdGhlIHRhaWwgd2hpbGUgY2hlY2tpbmcgZHVwbGljYXRpb24uLlxyXG4gICAgbGV0IHByZXYgPSBudWxsO1xyXG4gICAgd2hpbGUgKG5vZGUgIT0gbnVsbCkge1xyXG4gICAgICBpZiAobm9kZS5saXN0ZW5lciA9PT0gbGlzdGVuZXIgJiYgbm9kZS5saXN0ZW5lclR5cGUgPT09IGxpc3RlbmVyVHlwZSkge1xyXG4gICAgICAgIC8vIFNob3VsZCBpZ25vcmUgZHVwbGljYXRpb24uXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHByZXYgPSBub2RlO1xyXG4gICAgICBub2RlID0gbm9kZS5uZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBpdC5cclxuICAgIHByZXYubmV4dCA9IG5ld05vZGU7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlIGEgZ2l2ZW4gbGlzdGVuZXIgZnJvbSB0aGlzIGV2ZW50IHRhcmdldC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIHJlbW92ZS5cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gcmVtb3ZlLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnx7Y2FwdHVyZT86Ym9vbGVhbixwYXNzaXZlPzpib29sZWFuLG9uY2U/OmJvb2xlYW59fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgZm9yIHRoaXMgbGlzdGVuZXIuXHJcbiAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICovXHJcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyLCBvcHRpb25zKSB7XHJcbiAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKHRoaXMpO1xyXG4gICAgY29uc3QgY2FwdHVyZSA9IGlzT2JqZWN0KG9wdGlvbnMpID8gQm9vbGVhbihvcHRpb25zLmNhcHR1cmUpIDogQm9vbGVhbihvcHRpb25zKTtcclxuICAgIGNvbnN0IGxpc3RlbmVyVHlwZSA9IGNhcHR1cmUgPyBDQVBUVVJFIDogQlVCQkxFO1xyXG5cclxuICAgIGxldCBwcmV2ID0gbnVsbDtcclxuICAgIGxldCBub2RlID0gbGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xyXG4gICAgd2hpbGUgKG5vZGUgIT0gbnVsbCkge1xyXG4gICAgICBpZiAobm9kZS5saXN0ZW5lciA9PT0gbGlzdGVuZXIgJiYgbm9kZS5saXN0ZW5lclR5cGUgPT09IGxpc3RlbmVyVHlwZSkge1xyXG4gICAgICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBwcmV2Lm5leHQgPSBub2RlLm5leHQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChub2RlLm5leHQgIT09IG51bGwpIHtcclxuICAgICAgICAgIGxpc3RlbmVycy5zZXQoZXZlbnROYW1lLCBub2RlLm5leHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGV2ZW50TmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgcHJldiA9IG5vZGU7XHJcbiAgICAgIG5vZGUgPSBub2RlLm5leHQ7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogRGlzcGF0Y2ggYSBnaXZlbiBldmVudC5cclxuICAgKiBAcGFyYW0ge0V2ZW50fHt0eXBlOnN0cmluZ319IGV2ZW50IFRoZSBldmVudCB0byBkaXNwYXRjaC5cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gYGZhbHNlYCBpZiBjYW5jZWxlZC5cclxuICAgKi9cclxuICBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQgPT0gbnVsbCB8fCB0eXBlb2YgZXZlbnQudHlwZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJldmVudC50eXBlXCIgc2hvdWxkIGJlIGEgc3RyaW5nLicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGxpc3RlbmVycyBhcmVuJ3QgcmVnaXN0ZXJlZCwgdGVybWluYXRlLlxyXG4gICAgY29uc3QgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKHRoaXMpO1xyXG4gICAgY29uc3QgZXZlbnROYW1lID0gZXZlbnQudHlwZTtcclxuICAgIGxldCBub2RlID0gbGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xyXG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaW5jZSB3ZSBjYW5ub3QgcmV3cml0ZSBzZXZlcmFsIHByb3BlcnRpZXMsIHNvIHdyYXAgb2JqZWN0LlxyXG4gICAgY29uc3Qgd3JhcHBlZEV2ZW50ID0gd3JhcEV2ZW50KHRoaXMsIGV2ZW50KTtcclxuXHJcbiAgICAvLyBUaGlzIGRvZXNuJ3QgcHJvY2VzcyBjYXB0dXJpbmcgcGhhc2UgYW5kIGJ1YmJsaW5nIHBoYXNlLlxyXG4gICAgLy8gVGhpcyBpc24ndCBwYXJ0aWNpcGF0aW5nIGluIGEgdHJlZS5cclxuICAgIGxldCBwcmV2ID0gbnVsbDtcclxuICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcclxuICAgICAgLy8gUmVtb3ZlIHRoaXMgbGlzdGVuZXIgaWYgaXQncyBvbmNlXHJcbiAgICAgIGlmIChub2RlLm9uY2UpIHtcclxuICAgICAgICBpZiAocHJldiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgcHJldi5uZXh0ID0gbm9kZS5uZXh0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5uZXh0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBsaXN0ZW5lcnMuc2V0KGV2ZW50TmFtZSwgbm9kZS5uZXh0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbGlzdGVuZXJzLmRlbGV0ZShldmVudE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwcmV2ID0gbm9kZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2FsbCB0aGlzIGxpc3RlbmVyXHJcbiAgICAgIHNldFBhc3NpdmVMaXN0ZW5lcih3cmFwcGVkRXZlbnQsIG5vZGUucGFzc2l2ZSA/IG5vZGUubGlzdGVuZXIgOiBudWxsKTtcclxuICAgICAgaWYgKHR5cGVvZiBub2RlLmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIG5vZGUubGlzdGVuZXIuY2FsbCh0aGlzLCB3cmFwcGVkRXZlbnQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKG5vZGUubGlzdGVuZXJUeXBlICE9PSBBVFRSSUJVVEUgJiYgdHlwZW9mIG5vZGUubGlzdGVuZXIuaGFuZGxlRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBub2RlLmxpc3RlbmVyLmhhbmRsZUV2ZW50KHdyYXBwZWRFdmVudCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEJyZWFrIGlmIGBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb25gIHdhcyBjYWxsZWQuXHJcbiAgICAgIGlmIChpc1N0b3BwZWQod3JhcHBlZEV2ZW50KSkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBub2RlID0gbm9kZS5uZXh0O1xyXG4gICAgfVxyXG4gICAgc2V0UGFzc2l2ZUxpc3RlbmVyKHdyYXBwZWRFdmVudCwgbnVsbCk7XHJcbiAgICBzZXRFdmVudFBoYXNlKHdyYXBwZWRFdmVudCwgMCk7XHJcbiAgICBzZXRDdXJyZW50VGFyZ2V0KHdyYXBwZWRFdmVudCwgbnVsbCk7XHJcblxyXG4gICAgcmV0dXJuICF3cmFwcGVkRXZlbnQuZGVmYXVsdFByZXZlbnRlZDtcclxuICB9XHJcbn07XHJcblxyXG4vLyBgY29uc3RydWN0b3JgIGlzIG5vdCBlbnVtZXJhYmxlLlxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRUYXJnZXQucHJvdG90eXBlLCAnY29uc3RydWN0b3InLCB7XHJcbiAgdmFsdWU6IEV2ZW50VGFyZ2V0LFxyXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICB3cml0YWJsZTogdHJ1ZVxyXG59KTtcclxuXHJcbi8vIEVuc3VyZSBgZXZlbnRUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnRUYXJnZXRgIGlzIGB0cnVlYC5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuRXZlbnRUYXJnZXQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgT2JqZWN0LnNldFByb3RvdHlwZU9mKEV2ZW50VGFyZ2V0LnByb3RvdHlwZSwgd2luZG93LkV2ZW50VGFyZ2V0LnByb3RvdHlwZSk7XHJcbn1cclxuXHJcbmV4cG9ydHMuZGVmaW5lRXZlbnRBdHRyaWJ1dGUgPSBkZWZpbmVFdmVudEF0dHJpYnV0ZTtcclxuZXhwb3J0cy5FdmVudFRhcmdldCA9IEV2ZW50VGFyZ2V0O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBFdmVudFRhcmdldDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRXZlbnRUYXJnZXQ7XHJcbm1vZHVsZS5leHBvcnRzLkV2ZW50VGFyZ2V0ID0gbW9kdWxlLmV4cG9ydHNbJ2RlZmF1bHQnXSA9IEV2ZW50VGFyZ2V0O1xyXG5tb2R1bGUuZXhwb3J0cy5kZWZpbmVFdmVudEF0dHJpYnV0ZSA9IGRlZmluZUV2ZW50QXR0cmlidXRlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudC10YXJnZXQtc2hpbS5qcy5tYXBcclxuIl19

/***/ }),

/***/ "./lib/index.js":
/*!**********************!*\
  !*** ./lib/index.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {

var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "createAdapters", {
  enumerable: true,
  get: function get() {
    return _createAdapters.default;
  }
});

var _createAdapters = _interopRequireDefault(__webpack_require__(/*! ./createAdapters */ "./lib/createAdapters.js"));

/* global process */
if (typeof HTMLDocument !== 'undefined' && typeof document !== 'undefined' && document instanceof HTMLDocument) {
  var meta = document.createElement('meta');
  meta.setAttribute('name', 'botframework-directlinespeech:version');
  meta.setAttribute('content', process.env.npm_package_version);
  document.head.appendChild(meta);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJIVE1MRG9jdW1lbnQiLCJkb2N1bWVudCIsIm1ldGEiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicHJvY2VzcyIsImVudiIsIm5wbV9wYWNrYWdlX3ZlcnNpb24iLCJoZWFkIiwiYXBwZW5kQ2hpbGQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBRUE7O0FBRkE7QUFNQSxJQUFJLE9BQU9BLFlBQVAsS0FBd0IsV0FBeEIsSUFBdUMsT0FBT0MsUUFBUCxLQUFvQixXQUEzRCxJQUEwRUEsUUFBUSxZQUFZRCxZQUFsRyxFQUFnSDtBQUM5RyxNQUFNRSxJQUFJLEdBQUdELFFBQVEsQ0FBQ0UsYUFBVCxDQUF1QixNQUF2QixDQUFiO0FBRUFELEVBQUFBLElBQUksQ0FBQ0UsWUFBTCxDQUFrQixNQUFsQixFQUEwQix1Q0FBMUI7QUFDQUYsRUFBQUEsSUFBSSxDQUFDRSxZQUFMLENBQWtCLFNBQWxCLEVBQTZCQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsbUJBQXpDO0FBRUFOLEVBQUFBLFFBQVEsQ0FBQ08sSUFBVCxDQUFjQyxXQUFkLENBQTBCUCxJQUExQjtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIHByb2Nlc3MgKi9cclxuXHJcbmltcG9ydCBjcmVhdGVBZGFwdGVycyBmcm9tICcuL2NyZWF0ZUFkYXB0ZXJzJztcclxuXHJcbmV4cG9ydCB7IGNyZWF0ZUFkYXB0ZXJzIH07XHJcblxyXG5pZiAodHlwZW9mIEhUTUxEb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudCBpbnN0YW5jZW9mIEhUTUxEb2N1bWVudCkge1xyXG4gIGNvbnN0IG1ldGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtZXRhJyk7XHJcblxyXG4gIG1ldGEuc2V0QXR0cmlidXRlKCduYW1lJywgJ2JvdGZyYW1ld29yay1kaXJlY3RsaW5lc3BlZWNoOnZlcnNpb24nKTtcclxuICBtZXRhLnNldEF0dHJpYnV0ZSgnY29udGVudCcsIHByb2Nlc3MuZW52Lm5wbV9wYWNrYWdlX3ZlcnNpb24pO1xyXG5cclxuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKG1ldGEpO1xyXG59XHJcbiJdfQ==
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../node_modules/process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./lib/patchDialogServiceConnectorInline.js":
/*!**************************************************!*\
  !*** ./lib/patchDialogServiceConnectorInline.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = patchDialogServiceConnectorInline;

var _toConsumableArray2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "./node_modules/@babel/runtime/helpers/toConsumableArray.js"));

var _pDefer = _interopRequireDefault(__webpack_require__(/*! p-defer */ "./node_modules/p-defer/index.js"));

// Patching a function to add pre-processing of arguments and post-processing of result.
function patchFunction(fn, pre, post) {
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    args = pre ? pre.apply(void 0, (0, _toConsumableArray2.default)(args)) : args;
    var result = fn.apply(void 0, (0, _toConsumableArray2.default)(args));
    return post ? post(result) : result;
  };
}

function patchDialogServiceConnectorInline(dialogServiceConnector) {
  // This function will patch DialogServiceConnector by modifying the object.
  // The patches are intended to fill-in features to make DialogServiceConnector object works like the full-fledged Recognizer object.
  var lastRecognitionDeferred;
  dialogServiceConnector.listenOnceAsync = patchFunction(dialogServiceConnector.listenOnceAsync.bind(dialogServiceConnector), function (resolve, reject) {
    lastRecognitionDeferred = (0, _pDefer.default)();

    for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {
      args[_key2 - 2] = arguments[_key2];
    }

    return [patchFunction(resolve, null, function (result) {
      lastRecognitionDeferred.resolve(result);
      return result;
    }), patchFunction(reject, null, function (error) {
      lastRecognitionDeferred.reject(error);
      return error;
    })].concat(args);
  }); // TODO: startContinuousRecognitionAsync is not working yet, use listenOnceAsync instead.

  dialogServiceConnector.startContinuousRecognitionAsync = function (resolve, reject) {
    dialogServiceConnector.listenOnceAsync(function () {// We will resolve the Promise in a setTimeout.
    }, function (err) {
      resolve = null;
      reject && reject(err);
    });
    setTimeout(function () {
      reject = null;
      resolve && resolve();
    }, 0);
  }; // TODO: stopContinuousRecognitionAsync is not working yet.
  //       We will leave out the implementation as falsy, Web Chat will disable the microphone button after start dictate.
  //       This will prevent user from aborting speech recognition.
  // dialogServiceConnector.stopContinuousRecognitionAsync = resolve => {
  // };


  return dialogServiceConnector;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXRjaERpYWxvZ1NlcnZpY2VDb25uZWN0b3JJbmxpbmUuanMiXSwibmFtZXMiOlsicGF0Y2hGdW5jdGlvbiIsImZuIiwicHJlIiwicG9zdCIsImFyZ3MiLCJyZXN1bHQiLCJwYXRjaERpYWxvZ1NlcnZpY2VDb25uZWN0b3JJbmxpbmUiLCJkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yIiwibGFzdFJlY29nbml0aW9uRGVmZXJyZWQiLCJsaXN0ZW5PbmNlQXN5bmMiLCJiaW5kIiwicmVzb2x2ZSIsInJlamVjdCIsImVycm9yIiwic3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyIsImVyciIsInNldFRpbWVvdXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBRUE7QUFDQSxTQUFTQSxhQUFULENBQXVCQyxFQUF2QixFQUEyQkMsR0FBM0IsRUFBZ0NDLElBQWhDLEVBQXNDO0FBQ3BDLFNBQU8sWUFBYTtBQUFBLHNDQUFUQyxJQUFTO0FBQVRBLE1BQUFBLElBQVM7QUFBQTs7QUFDbEJBLElBQUFBLElBQUksR0FBR0YsR0FBRyxHQUFHQSxHQUFHLE1BQUgsMENBQU9FLElBQVAsRUFBSCxHQUFrQkEsSUFBNUI7QUFFQSxRQUFNQyxNQUFNLEdBQUdKLEVBQUUsTUFBRiwwQ0FBTUcsSUFBTixFQUFmO0FBRUEsV0FBT0QsSUFBSSxHQUFHQSxJQUFJLENBQUNFLE1BQUQsQ0FBUCxHQUFrQkEsTUFBN0I7QUFDRCxHQU5EO0FBT0Q7O0FBRWMsU0FBU0MsaUNBQVQsQ0FBMkNDLHNCQUEzQyxFQUFtRTtBQUNoRjtBQUNBO0FBRUEsTUFBSUMsdUJBQUo7QUFFQUQsRUFBQUEsc0JBQXNCLENBQUNFLGVBQXZCLEdBQXlDVCxhQUFhLENBQ3BETyxzQkFBc0IsQ0FBQ0UsZUFBdkIsQ0FBdUNDLElBQXZDLENBQTRDSCxzQkFBNUMsQ0FEb0QsRUFFcEQsVUFBQ0ksT0FBRCxFQUFVQyxNQUFWLEVBQThCO0FBQzVCSixJQUFBQSx1QkFBdUIsR0FBRyxzQkFBMUI7O0FBRDRCLHVDQUFUSixJQUFTO0FBQVRBLE1BQUFBLElBQVM7QUFBQTs7QUFHNUIsWUFDRUosYUFBYSxDQUFDVyxPQUFELEVBQVUsSUFBVixFQUFnQixVQUFBTixNQUFNLEVBQUk7QUFDckNHLE1BQUFBLHVCQUF1QixDQUFDRyxPQUF4QixDQUFnQ04sTUFBaEM7QUFFQSxhQUFPQSxNQUFQO0FBQ0QsS0FKWSxDQURmLEVBTUVMLGFBQWEsQ0FBQ1ksTUFBRCxFQUFTLElBQVQsRUFBZSxVQUFBQyxLQUFLLEVBQUk7QUFDbkNMLE1BQUFBLHVCQUF1QixDQUFDSSxNQUF4QixDQUErQkMsS0FBL0I7QUFFQSxhQUFPQSxLQUFQO0FBQ0QsS0FKWSxDQU5mLFNBV0tULElBWEw7QUFhRCxHQWxCbUQsQ0FBdEQsQ0FOZ0YsQ0EyQmhGOztBQUNBRyxFQUFBQSxzQkFBc0IsQ0FBQ08sK0JBQXZCLEdBQXlELFVBQUNILE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUM1RUwsSUFBQUEsc0JBQXNCLENBQUNFLGVBQXZCLENBQ0UsWUFBTSxDQUNKO0FBQ0QsS0FISCxFQUlFLFVBQUFNLEdBQUcsRUFBSTtBQUNMSixNQUFBQSxPQUFPLEdBQUcsSUFBVjtBQUNBQyxNQUFBQSxNQUFNLElBQUlBLE1BQU0sQ0FBQ0csR0FBRCxDQUFoQjtBQUNELEtBUEg7QUFVQUMsSUFBQUEsVUFBVSxDQUFDLFlBQU07QUFDZkosTUFBQUEsTUFBTSxHQUFHLElBQVQ7QUFDQUQsTUFBQUEsT0FBTyxJQUFJQSxPQUFPLEVBQWxCO0FBQ0QsS0FIUyxFQUdQLENBSE8sQ0FBVjtBQUlELEdBZkQsQ0E1QmdGLENBNkNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQSxTQUFPSixzQkFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZURlZmVycmVkIGZyb20gJ3AtZGVmZXInO1xyXG5cclxuLy8gUGF0Y2hpbmcgYSBmdW5jdGlvbiB0byBhZGQgcHJlLXByb2Nlc3Npbmcgb2YgYXJndW1lbnRzIGFuZCBwb3N0LXByb2Nlc3Npbmcgb2YgcmVzdWx0LlxyXG5mdW5jdGlvbiBwYXRjaEZ1bmN0aW9uKGZuLCBwcmUsIHBvc3QpIHtcclxuICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcclxuICAgIGFyZ3MgPSBwcmUgPyBwcmUoLi4uYXJncykgOiBhcmdzO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGZuKC4uLmFyZ3MpO1xyXG5cclxuICAgIHJldHVybiBwb3N0ID8gcG9zdChyZXN1bHQpIDogcmVzdWx0O1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhdGNoRGlhbG9nU2VydmljZUNvbm5lY3RvcklubGluZShkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yKSB7XHJcbiAgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIHBhdGNoIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IgYnkgbW9kaWZ5aW5nIHRoZSBvYmplY3QuXHJcbiAgLy8gVGhlIHBhdGNoZXMgYXJlIGludGVuZGVkIHRvIGZpbGwtaW4gZmVhdHVyZXMgdG8gbWFrZSBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yIG9iamVjdCB3b3JrcyBsaWtlIHRoZSBmdWxsLWZsZWRnZWQgUmVjb2duaXplciBvYmplY3QuXHJcblxyXG4gIGxldCBsYXN0UmVjb2duaXRpb25EZWZlcnJlZDtcclxuXHJcbiAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5saXN0ZW5PbmNlQXN5bmMgPSBwYXRjaEZ1bmN0aW9uKFxyXG4gICAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5saXN0ZW5PbmNlQXN5bmMuYmluZChkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yKSxcclxuICAgIChyZXNvbHZlLCByZWplY3QsIC4uLmFyZ3MpID0+IHtcclxuICAgICAgbGFzdFJlY29nbml0aW9uRGVmZXJyZWQgPSBjcmVhdGVEZWZlcnJlZCgpO1xyXG5cclxuICAgICAgcmV0dXJuIFtcclxuICAgICAgICBwYXRjaEZ1bmN0aW9uKHJlc29sdmUsIG51bGwsIHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICBsYXN0UmVjb2duaXRpb25EZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KSxcclxuICAgICAgICBwYXRjaEZ1bmN0aW9uKHJlamVjdCwgbnVsbCwgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgbGFzdFJlY29nbml0aW9uRGVmZXJyZWQucmVqZWN0KGVycm9yKTtcclxuXHJcbiAgICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgLi4uYXJnc1xyXG4gICAgICBdO1xyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIC8vIFRPRE86IHN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMgaXMgbm90IHdvcmtpbmcgeWV0LCB1c2UgbGlzdGVuT25jZUFzeW5jIGluc3RlYWQuXHJcbiAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5zdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jID0gKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5saXN0ZW5PbmNlQXN5bmMoXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICAvLyBXZSB3aWxsIHJlc29sdmUgdGhlIFByb21pc2UgaW4gYSBzZXRUaW1lb3V0LlxyXG4gICAgICB9LFxyXG4gICAgICBlcnIgPT4ge1xyXG4gICAgICAgIHJlc29sdmUgPSBudWxsO1xyXG4gICAgICAgIHJlamVjdCAmJiByZWplY3QoZXJyKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgcmVqZWN0ID0gbnVsbDtcclxuICAgICAgcmVzb2x2ZSAmJiByZXNvbHZlKCk7XHJcbiAgICB9LCAwKTtcclxuICB9O1xyXG5cclxuICAvLyBUT0RPOiBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMgaXMgbm90IHdvcmtpbmcgeWV0LlxyXG4gIC8vICAgICAgIFdlIHdpbGwgbGVhdmUgb3V0IHRoZSBpbXBsZW1lbnRhdGlvbiBhcyBmYWxzeSwgV2ViIENoYXQgd2lsbCBkaXNhYmxlIHRoZSBtaWNyb3Bob25lIGJ1dHRvbiBhZnRlciBzdGFydCBkaWN0YXRlLlxyXG4gIC8vICAgICAgIFRoaXMgd2lsbCBwcmV2ZW50IHVzZXIgZnJvbSBhYm9ydGluZyBzcGVlY2ggcmVjb2duaXRpb24uXHJcbiAgLy8gZGlhbG9nU2VydmljZUNvbm5lY3Rvci5zdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMgPSByZXNvbHZlID0+IHtcclxuICAvLyB9O1xyXG5cclxuICByZXR1cm4gZGlhbG9nU2VydmljZUNvbm5lY3RvcjtcclxufVxyXG4iXX0=

/***/ }),

/***/ "./lib/playCognitiveServicesStream.js":
/*!********************************************!*\
  !*** ./lib/playCognitiveServicesStream.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = playCognitiveServicesStream;

var _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js"));

var _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));

var _cognitiveServicesPromiseToESPromise = _interopRequireDefault(__webpack_require__(/*! ./cognitiveServicesPromiseToESPromise */ "./lib/cognitiveServicesPromiseToESPromise.js"));

var _pDefer = _interopRequireDefault(__webpack_require__(/*! p-defer */ "./node_modules/p-defer/index.js"));

/* eslint no-magic-numbers: ["error", { "ignore": [8, 16, 32, 128, 1000, 32768, 2147483648] }] */

/* eslint no-await-in-loop: "off" */

/* eslint prefer-destructuring: "off" */
function createBufferSource(audioContext, _ref, channelInterleavedAudioData) {
  var channels = _ref.channels,
      samplesPerSec = _ref.samplesPerSec;
  var bufferSource = audioContext.createBufferSource();
  var frames = channelInterleavedAudioData.length / channels;
  var audioBuffer = audioContext.createBuffer(channels, frames, samplesPerSec);

  for (var channel = 0; channel < channels; channel++) {
    var perChannelAudioData = audioBuffer.getChannelData(channel); // We are copying channel-interleaved audio data, into per-channel audio data

    for (var perChannelIndex = 0; perChannelIndex < channelInterleavedAudioData.length; perChannelIndex++) {
      perChannelAudioData[perChannelIndex] = channelInterleavedAudioData[perChannelIndex * channels + channel];
    }
  }

  bufferSource.buffer = audioBuffer;
  return bufferSource;
}

function formatTypedBitArrayToFloatArray(audioData, maxValue) {
  var float32Data = new Float32Array(audioData.length);

  for (var i = 0; i < audioData.length; i++) {
    float32Data[i] = audioData[i] / maxValue;
  }

  return float32Data;
}

function formatAudioDataArrayBufferToFloatArray(_ref2, arrayBuffer) {
  var bitsPerSample = _ref2.bitsPerSample;

  switch (bitsPerSample) {
    case 8:
      return formatTypedBitArrayToFloatArray(new Int8Array(arrayBuffer), 128);

    case 16:
      return formatTypedBitArrayToFloatArray(new Int16Array(arrayBuffer), 32768);

    case 32:
      return formatTypedBitArrayToFloatArray(new Int32Array(arrayBuffer), 2147483648);

    default:
      throw new Error('Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time');
  }
}

function abortToReject(signal) {
  return new Promise(function (_, reject) {
    signal.onabort = function () {
      return reject(new Error('aborted'));
    };
  });
}

function playCognitiveServicesStream(_x, _x2, _x3) {
  return _playCognitiveServicesStream.apply(this, arguments);
}

function _playCognitiveServicesStream() {
  _playCognitiveServicesStream = (0, _asyncToGenerator2.default)(
  /*#__PURE__*/
  _regenerator.default.mark(function _callee(audioContext, audioFormat, streamReader) {
    var _ref3,
        _ref3$signal,
        signal,
        queuedBufferSourceNodes,
        abortPromise,
        lastBufferSource,
        read,
        chunk,
        currentTime,
        maxChunks,
        audioData,
        bufferSource,
        duration,
        _createDeferred,
        promise,
        resolve,
        _args = arguments;

    return _regenerator.default.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _ref3 = _args.length > 3 && _args[3] !== undefined ? _args[3] : {}, _ref3$signal = _ref3.signal, signal = _ref3$signal === void 0 ? {} : _ref3$signal;
            queuedBufferSourceNodes = [];
            _context.prev = 2;
            abortPromise = abortToReject(signal);

            read = function read() {
              return Promise.race([// Abort will gracefully end the queue. We will check signal.aborted later to throw abort exception.
              abortPromise.catch(function () {
                return {
                  isEnd: true
                };
              }), (0, _cognitiveServicesPromiseToESPromise.default)(streamReader.read())]);
            };

            if (!signal.aborted) {
              _context.next = 7;
              break;
            }

            throw new Error('aborted');

          case 7:
            _context.next = 9;
            return read();

          case 9:
            chunk = _context.sent;
            maxChunks = 0;

          case 11:
            if (!(!chunk.isEnd && maxChunks < 1000 && !signal.aborted)) {
              _context.next = 29;
              break;
            }

            if (!signal.aborted) {
              _context.next = 14;
              break;
            }

            return _context.abrupt("break", 29);

          case 14:
            audioData = formatAudioDataArrayBufferToFloatArray(audioFormat, chunk.buffer);
            bufferSource = createBufferSource(audioContext, audioFormat, audioData);
            duration = bufferSource.buffer.duration;

            if (!currentTime) {
              currentTime = audioContext.currentTime;
            }

            bufferSource.connect(audioContext.destination);
            bufferSource.start(currentTime);
            queuedBufferSourceNodes.push(bufferSource);
            lastBufferSource = bufferSource;
            currentTime += duration;

          case 23:
            _context.next = 25;
            return read();

          case 25:
            chunk = _context.sent;
            maxChunks++;
            _context.next = 11;
            break;

          case 29:
            if (!signal.aborted) {
              _context.next = 31;
              break;
            }

            throw new Error('aborted');

          case 31:
            if (!lastBufferSource) {
              _context.next = 36;
              break;
            }

            _createDeferred = (0, _pDefer.default)(), promise = _createDeferred.promise, resolve = _createDeferred.resolve;
            lastBufferSource.onended = resolve;
            _context.next = 36;
            return Promise.race([abortPromise, promise]);

          case 36:
            _context.prev = 36;
            queuedBufferSourceNodes.forEach(function (node) {
              return node.stop();
            });
            return _context.finish(36);

          case 39:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, null, [[2,, 36, 39]]);
  }));
  return _playCognitiveServicesStream.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wbGF5Q29nbml0aXZlU2VydmljZXNTdHJlYW0uanMiXSwibmFtZXMiOlsiY3JlYXRlQnVmZmVyU291cmNlIiwiYXVkaW9Db250ZXh0IiwiY2hhbm5lbEludGVybGVhdmVkQXVkaW9EYXRhIiwiY2hhbm5lbHMiLCJzYW1wbGVzUGVyU2VjIiwiYnVmZmVyU291cmNlIiwiZnJhbWVzIiwibGVuZ3RoIiwiYXVkaW9CdWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJjaGFubmVsIiwicGVyQ2hhbm5lbEF1ZGlvRGF0YSIsImdldENoYW5uZWxEYXRhIiwicGVyQ2hhbm5lbEluZGV4IiwiYnVmZmVyIiwiZm9ybWF0VHlwZWRCaXRBcnJheVRvRmxvYXRBcnJheSIsImF1ZGlvRGF0YSIsIm1heFZhbHVlIiwiZmxvYXQzMkRhdGEiLCJGbG9hdDMyQXJyYXkiLCJpIiwiZm9ybWF0QXVkaW9EYXRhQXJyYXlCdWZmZXJUb0Zsb2F0QXJyYXkiLCJhcnJheUJ1ZmZlciIsImJpdHNQZXJTYW1wbGUiLCJJbnQ4QXJyYXkiLCJJbnQxNkFycmF5IiwiSW50MzJBcnJheSIsIkVycm9yIiwiYWJvcnRUb1JlamVjdCIsInNpZ25hbCIsIlByb21pc2UiLCJfIiwicmVqZWN0Iiwib25hYm9ydCIsInBsYXlDb2duaXRpdmVTZXJ2aWNlc1N0cmVhbSIsImF1ZGlvRm9ybWF0Iiwic3RyZWFtUmVhZGVyIiwicXVldWVkQnVmZmVyU291cmNlTm9kZXMiLCJhYm9ydFByb21pc2UiLCJyZWFkIiwicmFjZSIsImNhdGNoIiwiaXNFbmQiLCJhYm9ydGVkIiwiY2h1bmsiLCJtYXhDaHVua3MiLCJkdXJhdGlvbiIsImN1cnJlbnRUaW1lIiwiY29ubmVjdCIsImRlc3RpbmF0aW9uIiwic3RhcnQiLCJwdXNoIiwibGFzdEJ1ZmZlclNvdXJjZSIsInByb21pc2UiLCJyZXNvbHZlIiwib25lbmRlZCIsImZvckVhY2giLCJub2RlIiwic3RvcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUlBOztB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IGVzbGludCBuby1tYWdpYy1udW1iZXJzOiBbXCJlcnJvclwiLCB7IFwiaWdub3JlXCI6IFs4LCAxNiwgMzIsIDEyOCwgMTAwMCwgMzI3NjgsIDIxNDc0ODM2NDhdIH1dICovXHJcbi8qIGVzbGludCBuby1hd2FpdC1pbi1sb29wOiBcIm9mZlwiICovXHJcbi8qIGVzbGludCBwcmVmZXItZGVzdHJ1Y3R1cmluZzogXCJvZmZcIiAqL1xyXG5cclxuaW1wb3J0IGNvZ25pdGl2ZVNlcnZpY2VzUHJvbWlzZVRvRVNQcm9taXNlIGZyb20gJy4vY29nbml0aXZlU2VydmljZXNQcm9taXNlVG9FU1Byb21pc2UnO1xyXG5pbXBvcnQgY3JlYXRlRGVmZXJyZWQgZnJvbSAncC1kZWZlcic7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXJTb3VyY2UoYXVkaW9Db250ZXh0LCB7IGNoYW5uZWxzLCBzYW1wbGVzUGVyU2VjIH0sIGNoYW5uZWxJbnRlcmxlYXZlZEF1ZGlvRGF0YSkge1xyXG4gIGNvbnN0IGJ1ZmZlclNvdXJjZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcclxuICBjb25zdCBmcmFtZXMgPSBjaGFubmVsSW50ZXJsZWF2ZWRBdWRpb0RhdGEubGVuZ3RoIC8gY2hhbm5lbHM7XHJcbiAgY29uc3QgYXVkaW9CdWZmZXIgPSBhdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyKGNoYW5uZWxzLCBmcmFtZXMsIHNhbXBsZXNQZXJTZWMpO1xyXG5cclxuICBmb3IgKGxldCBjaGFubmVsID0gMDsgY2hhbm5lbCA8IGNoYW5uZWxzOyBjaGFubmVsKyspIHtcclxuICAgIGNvbnN0IHBlckNoYW5uZWxBdWRpb0RhdGEgPSBhdWRpb0J1ZmZlci5nZXRDaGFubmVsRGF0YShjaGFubmVsKTtcclxuXHJcbiAgICAvLyBXZSBhcmUgY29weWluZyBjaGFubmVsLWludGVybGVhdmVkIGF1ZGlvIGRhdGEsIGludG8gcGVyLWNoYW5uZWwgYXVkaW8gZGF0YVxyXG4gICAgZm9yIChsZXQgcGVyQ2hhbm5lbEluZGV4ID0gMDsgcGVyQ2hhbm5lbEluZGV4IDwgY2hhbm5lbEludGVybGVhdmVkQXVkaW9EYXRhLmxlbmd0aDsgcGVyQ2hhbm5lbEluZGV4KyspIHtcclxuICAgICAgcGVyQ2hhbm5lbEF1ZGlvRGF0YVtwZXJDaGFubmVsSW5kZXhdID0gY2hhbm5lbEludGVybGVhdmVkQXVkaW9EYXRhW3BlckNoYW5uZWxJbmRleCAqIGNoYW5uZWxzICsgY2hhbm5lbF07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBidWZmZXJTb3VyY2UuYnVmZmVyID0gYXVkaW9CdWZmZXI7XHJcblxyXG4gIHJldHVybiBidWZmZXJTb3VyY2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFR5cGVkQml0QXJyYXlUb0Zsb2F0QXJyYXkoYXVkaW9EYXRhLCBtYXhWYWx1ZSkge1xyXG4gIGNvbnN0IGZsb2F0MzJEYXRhID0gbmV3IEZsb2F0MzJBcnJheShhdWRpb0RhdGEubGVuZ3RoKTtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdWRpb0RhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgIGZsb2F0MzJEYXRhW2ldID0gYXVkaW9EYXRhW2ldIC8gbWF4VmFsdWU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZmxvYXQzMkRhdGE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdEF1ZGlvRGF0YUFycmF5QnVmZmVyVG9GbG9hdEFycmF5KHsgYml0c1BlclNhbXBsZSB9LCBhcnJheUJ1ZmZlcikge1xyXG4gIHN3aXRjaCAoYml0c1BlclNhbXBsZSkge1xyXG4gICAgY2FzZSA4OlxyXG4gICAgICByZXR1cm4gZm9ybWF0VHlwZWRCaXRBcnJheVRvRmxvYXRBcnJheShuZXcgSW50OEFycmF5KGFycmF5QnVmZmVyKSwgMTI4KTtcclxuXHJcbiAgICBjYXNlIDE2OlxyXG4gICAgICByZXR1cm4gZm9ybWF0VHlwZWRCaXRBcnJheVRvRmxvYXRBcnJheShuZXcgSW50MTZBcnJheShhcnJheUJ1ZmZlciksIDMyNzY4KTtcclxuXHJcbiAgICBjYXNlIDMyOlxyXG4gICAgICByZXR1cm4gZm9ybWF0VHlwZWRCaXRBcnJheVRvRmxvYXRBcnJheShuZXcgSW50MzJBcnJheShhcnJheUJ1ZmZlciksIDIxNDc0ODM2NDgpO1xyXG5cclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBXQVZFX0ZPUk1BVF9QQ00gKDgvMTYvMzIgYnBzKSBmb3JtYXQgc3VwcG9ydGVkIGF0IHRoaXMgdGltZScpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWJvcnRUb1JlamVjdChzaWduYWwpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xyXG4gICAgc2lnbmFsLm9uYWJvcnQgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKCdhYm9ydGVkJykpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBwbGF5Q29nbml0aXZlU2VydmljZXNTdHJlYW0oXHJcbiAgYXVkaW9Db250ZXh0LFxyXG4gIGF1ZGlvRm9ybWF0LFxyXG4gIHN0cmVhbVJlYWRlcixcclxuICB7IHNpZ25hbCA9IHt9IH0gPSB7fVxyXG4pIHtcclxuICBjb25zdCBxdWV1ZWRCdWZmZXJTb3VyY2VOb2RlcyA9IFtdO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgYWJvcnRQcm9taXNlID0gYWJvcnRUb1JlamVjdChzaWduYWwpO1xyXG4gICAgbGV0IGxhc3RCdWZmZXJTb3VyY2U7XHJcblxyXG4gICAgY29uc3QgcmVhZCA9ICgpID0+XHJcbiAgICAgIFByb21pc2UucmFjZShbXHJcbiAgICAgICAgLy8gQWJvcnQgd2lsbCBncmFjZWZ1bGx5IGVuZCB0aGUgcXVldWUuIFdlIHdpbGwgY2hlY2sgc2lnbmFsLmFib3J0ZWQgbGF0ZXIgdG8gdGhyb3cgYWJvcnQgZXhjZXB0aW9uLlxyXG4gICAgICAgIGFib3J0UHJvbWlzZS5jYXRjaCgoKSA9PiAoeyBpc0VuZDogdHJ1ZSB9KSksXHJcbiAgICAgICAgY29nbml0aXZlU2VydmljZXNQcm9taXNlVG9FU1Byb21pc2Uoc3RyZWFtUmVhZGVyLnJlYWQoKSlcclxuICAgICAgXSk7XHJcblxyXG4gICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignYWJvcnRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAoXHJcbiAgICAgIGxldCBjaHVuayA9IGF3YWl0IHJlYWQoKSwgY3VycmVudFRpbWUsIG1heENodW5rcyA9IDA7XHJcbiAgICAgICFjaHVuay5pc0VuZCAmJiBtYXhDaHVua3MgPCAxMDAwICYmICFzaWduYWwuYWJvcnRlZDtcclxuICAgICAgY2h1bmsgPSBhd2FpdCByZWFkKCksIG1heENodW5rcysrXHJcbiAgICApIHtcclxuICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGF1ZGlvRGF0YSA9IGZvcm1hdEF1ZGlvRGF0YUFycmF5QnVmZmVyVG9GbG9hdEFycmF5KGF1ZGlvRm9ybWF0LCBjaHVuay5idWZmZXIpO1xyXG4gICAgICBjb25zdCBidWZmZXJTb3VyY2UgPSBjcmVhdGVCdWZmZXJTb3VyY2UoYXVkaW9Db250ZXh0LCBhdWRpb0Zvcm1hdCwgYXVkaW9EYXRhKTtcclxuICAgICAgY29uc3QgeyBkdXJhdGlvbiB9ID0gYnVmZmVyU291cmNlLmJ1ZmZlcjtcclxuXHJcbiAgICAgIGlmICghY3VycmVudFRpbWUpIHtcclxuICAgICAgICBjdXJyZW50VGltZSA9IGF1ZGlvQ29udGV4dC5jdXJyZW50VGltZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYnVmZmVyU291cmNlLmNvbm5lY3QoYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTtcclxuICAgICAgYnVmZmVyU291cmNlLnN0YXJ0KGN1cnJlbnRUaW1lKTtcclxuXHJcbiAgICAgIHF1ZXVlZEJ1ZmZlclNvdXJjZU5vZGVzLnB1c2goYnVmZmVyU291cmNlKTtcclxuXHJcbiAgICAgIGxhc3RCdWZmZXJTb3VyY2UgPSBidWZmZXJTb3VyY2U7XHJcbiAgICAgIGN1cnJlbnRUaW1lICs9IGR1cmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzaWduYWwuYWJvcnRlZCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Fib3J0ZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobGFzdEJ1ZmZlclNvdXJjZSkge1xyXG4gICAgICBjb25zdCB7IHByb21pc2UsIHJlc29sdmUgfSA9IGNyZWF0ZURlZmVycmVkKCk7XHJcblxyXG4gICAgICBsYXN0QnVmZmVyU291cmNlLm9uZW5kZWQgPSByZXNvbHZlO1xyXG5cclxuICAgICAgYXdhaXQgUHJvbWlzZS5yYWNlKFthYm9ydFByb21pc2UsIHByb21pc2VdKTtcclxuICAgIH1cclxuICB9IGZpbmFsbHkge1xyXG4gICAgcXVldWVkQnVmZmVyU291cmNlTm9kZXMuZm9yRWFjaChub2RlID0+IG5vZGUuc3RvcCgpKTtcclxuICB9XHJcbn1cclxuIl19

/***/ }),

/***/ "./lib/playWhiteNoise.js":
/*!*******************************!*\
  !*** ./lib/playWhiteNoise.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = playWhiteNoise;

var _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js"));

var _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));

var _base64Arraybuffer = __webpack_require__(/*! base64-arraybuffer */ "./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js");

var _eventAsPromise = _interopRequireDefault(__webpack_require__(/*! event-as-promise */ "./node_modules/event-as-promise/lib/index.js"));

var EMPTY_MP3_BASE64 = 'SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU3LjU2LjEwMQAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAABhgC7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7//////////////////////////////////////////////////////////////////8AAAAATGF2YzU3LjY0AAAAAAAAAAAAAAAAJAUHAAAAAAAAAYYoRBqpAAAAAAD/+xDEAAPAAAGkAAAAIAAANIAAAARMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMQpg8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV';

function subscribeEvent(target, name, handler) {
  target.addEventListener(name, handler);
  return function () {
    return target.removeEventListener(name, handler);
  };
}

function asyncDecodeAudioData(audioContext, arrayBuffer) {
  return new Promise(function (resolve, reject) {
    var promise = audioContext.decodeAudioData(arrayBuffer, resolve, reject); // Newer implementation of "decodeAudioData" will return a Promise

    promise && typeof promise.then === 'function' && resolve(promise);
  });
}

function playDecoded(audioContext, audioBuffer, source) {
  return new Promise(function (resolve, reject) {
    var audioContextClosed = new _eventAsPromise.default();
    var sourceEnded = new _eventAsPromise.default();
    var unsubscribe = subscribeEvent(audioContext, 'statechange', function (_ref) {
      var state = _ref.target.state;
      return state === 'closed' && audioContextClosed.eventListener();
    });

    try {
      source.buffer = audioBuffer; // "ended" may not fire if the underlying AudioContext is closed prematurely

      source.onended = sourceEnded.eventListener;
      source.connect(audioContext.destination);
      source.start(0);
      Promise.race([audioContextClosed.upcoming(), sourceEnded.upcoming()]).then(resolve);
    } catch (err) {
      reject(err);
    } finally {
      unsubscribe();
    }
  });
}

function playWhiteNoise(_x) {
  return _playWhiteNoise.apply(this, arguments);
}

function _playWhiteNoise() {
  _playWhiteNoise = (0, _asyncToGenerator2.default)(
  /*#__PURE__*/
  _regenerator.default.mark(function _callee(audioContext) {
    var source, audioBuffer;
    return _regenerator.default.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            source = audioContext.createBufferSource();
            _context.next = 3;
            return asyncDecodeAudioData(audioContext, (0, _base64Arraybuffer.decode)(EMPTY_MP3_BASE64));

          case 3:
            audioBuffer = _context.sent;
            _context.next = 6;
            return playDecoded(audioContext, audioBuffer, source);

          case 6:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _playWhiteNoise.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wbGF5V2hpdGVOb2lzZS5qcyJdLCJuYW1lcyI6WyJFTVBUWV9NUDNfQkFTRTY0Iiwic3Vic2NyaWJlRXZlbnQiLCJ0YXJnZXQiLCJuYW1lIiwiaGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYXN5bmNEZWNvZGVBdWRpb0RhdGEiLCJhdWRpb0NvbnRleHQiLCJhcnJheUJ1ZmZlciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicHJvbWlzZSIsImRlY29kZUF1ZGlvRGF0YSIsInRoZW4iLCJwbGF5RGVjb2RlZCIsImF1ZGlvQnVmZmVyIiwic291cmNlIiwiYXVkaW9Db250ZXh0Q2xvc2VkIiwiRXZlbnRBc1Byb21pc2UiLCJzb3VyY2VFbmRlZCIsInVuc3Vic2NyaWJlIiwic3RhdGUiLCJldmVudExpc3RlbmVyIiwiYnVmZmVyIiwib25lbmRlZCIsImNvbm5lY3QiLCJkZXN0aW5hdGlvbiIsInN0YXJ0IiwicmFjZSIsInVwY29taW5nIiwiZXJyIiwicGxheVdoaXRlTm9pc2UiLCJjcmVhdGVCdWZmZXJTb3VyY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQSxJQUFNQSxnQkFBZ0IsR0FDcEIsc2tCQURGOztBQUdBLFNBQVNDLGNBQVQsQ0FBd0JDLE1BQXhCLEVBQWdDQyxJQUFoQyxFQUFzQ0MsT0FBdEMsRUFBK0M7QUFDN0NGLEVBQUFBLE1BQU0sQ0FBQ0csZ0JBQVAsQ0FBd0JGLElBQXhCLEVBQThCQyxPQUE5QjtBQUVBLFNBQU87QUFBQSxXQUFNRixNQUFNLENBQUNJLG1CQUFQLENBQTJCSCxJQUEzQixFQUFpQ0MsT0FBakMsQ0FBTjtBQUFBLEdBQVA7QUFDRDs7QUFFRCxTQUFTRyxvQkFBVCxDQUE4QkMsWUFBOUIsRUFBNENDLFdBQTVDLEVBQXlEO0FBQ3ZELFNBQU8sSUFBSUMsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUN0QyxRQUFNQyxPQUFPLEdBQUdMLFlBQVksQ0FBQ00sZUFBYixDQUE2QkwsV0FBN0IsRUFBMENFLE9BQTFDLEVBQW1EQyxNQUFuRCxDQUFoQixDQURzQyxDQUd0Qzs7QUFDQUMsSUFBQUEsT0FBTyxJQUFJLE9BQU9BLE9BQU8sQ0FBQ0UsSUFBZixLQUF3QixVQUFuQyxJQUFpREosT0FBTyxDQUFDRSxPQUFELENBQXhEO0FBQ0QsR0FMTSxDQUFQO0FBTUQ7O0FBRUQsU0FBU0csV0FBVCxDQUFxQlIsWUFBckIsRUFBbUNTLFdBQW5DLEVBQWdEQyxNQUFoRCxFQUF3RDtBQUN0RCxTQUFPLElBQUlSLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDdEMsUUFBTU8sa0JBQWtCLEdBQUcsSUFBSUMsdUJBQUosRUFBM0I7QUFDQSxRQUFNQyxXQUFXLEdBQUcsSUFBSUQsdUJBQUosRUFBcEI7QUFDQSxRQUFNRSxXQUFXLEdBQUdyQixjQUFjLENBQ2hDTyxZQURnQyxFQUVoQyxhQUZnQyxFQUdoQztBQUFBLFVBQWFlLEtBQWIsUUFBR3JCLE1BQUgsQ0FBYXFCLEtBQWI7QUFBQSxhQUEyQkEsS0FBSyxLQUFLLFFBQVYsSUFBc0JKLGtCQUFrQixDQUFDSyxhQUFuQixFQUFqRDtBQUFBLEtBSGdDLENBQWxDOztBQU1BLFFBQUk7QUFDRk4sTUFBQUEsTUFBTSxDQUFDTyxNQUFQLEdBQWdCUixXQUFoQixDQURFLENBRUY7O0FBQ0FDLE1BQUFBLE1BQU0sQ0FBQ1EsT0FBUCxHQUFpQkwsV0FBVyxDQUFDRyxhQUE3QjtBQUVBTixNQUFBQSxNQUFNLENBQUNTLE9BQVAsQ0FBZW5CLFlBQVksQ0FBQ29CLFdBQTVCO0FBQ0FWLE1BQUFBLE1BQU0sQ0FBQ1csS0FBUCxDQUFhLENBQWI7QUFFQW5CLE1BQUFBLE9BQU8sQ0FBQ29CLElBQVIsQ0FBYSxDQUFDWCxrQkFBa0IsQ0FBQ1ksUUFBbkIsRUFBRCxFQUFnQ1YsV0FBVyxDQUFDVSxRQUFaLEVBQWhDLENBQWIsRUFBc0VoQixJQUF0RSxDQUEyRUosT0FBM0U7QUFDRCxLQVRELENBU0UsT0FBT3FCLEdBQVAsRUFBWTtBQUNacEIsTUFBQUEsTUFBTSxDQUFDb0IsR0FBRCxDQUFOO0FBQ0QsS0FYRCxTQVdVO0FBQ1JWLE1BQUFBLFdBQVc7QUFDWjtBQUNGLEdBdkJNLENBQVA7QUF3QkQ7O1NBRTZCVyxjOzs7Ozs7OzRCQUFmLGlCQUE4QnpCLFlBQTlCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNQVSxZQUFBQSxNQURPLEdBQ0VWLFlBQVksQ0FBQzBCLGtCQUFiLEVBREY7QUFBQTtBQUFBLG1CQUVhM0Isb0JBQW9CLENBQUNDLFlBQUQsRUFBZSwrQkFBT1IsZ0JBQVAsQ0FBZixDQUZqQzs7QUFBQTtBQUVQaUIsWUFBQUEsV0FGTztBQUFBO0FBQUEsbUJBSVBELFdBQVcsQ0FBQ1IsWUFBRCxFQUFlUyxXQUFmLEVBQTRCQyxNQUE1QixDQUpKOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWNvZGUgfSBmcm9tICdiYXNlNjQtYXJyYXlidWZmZXInO1xyXG5pbXBvcnQgRXZlbnRBc1Byb21pc2UgZnJvbSAnZXZlbnQtYXMtcHJvbWlzZSc7XHJcblxyXG5jb25zdCBFTVBUWV9NUDNfQkFTRTY0ID1cclxuICAnU1VRekJBQUFBQUFBSTFSVFUwVUFBQUFQQUFBRFRHRjJaalUzTGpVMkxqRXdNUUFBQUFBQUFBQUFBQUFBLy90QXdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVNXNW1id0FBQUE4QUFBQUNBQUFCaGdDN3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTcvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy84QUFBQUFUR0YyWXpVM0xqWTBBQUFBQUFBQUFBQUFBQUFBSkFVSEFBQUFBQUFBQVlZb1JCcXBBQUFBQUFELyt4REVBQVBBQUFHa0FBQUFJQUFBTklBQUFBUk1RVTFGTXk0NU9TNDFWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWZi83RU1RcGc4QUFBYVFBQUFBZ0FBQTBnQUFBQkZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVic7XHJcblxyXG5mdW5jdGlvbiBzdWJzY3JpYmVFdmVudCh0YXJnZXQsIG5hbWUsIGhhbmRsZXIpIHtcclxuICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBoYW5kbGVyKTtcclxuXHJcbiAgcmV0dXJuICgpID0+IHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGhhbmRsZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhc3luY0RlY29kZUF1ZGlvRGF0YShhdWRpb0NvbnRleHQsIGFycmF5QnVmZmVyKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IHByb21pc2UgPSBhdWRpb0NvbnRleHQuZGVjb2RlQXVkaW9EYXRhKGFycmF5QnVmZmVyLCByZXNvbHZlLCByZWplY3QpO1xyXG5cclxuICAgIC8vIE5ld2VyIGltcGxlbWVudGF0aW9uIG9mIFwiZGVjb2RlQXVkaW9EYXRhXCIgd2lsbCByZXR1cm4gYSBQcm9taXNlXHJcbiAgICBwcm9taXNlICYmIHR5cGVvZiBwcm9taXNlLnRoZW4gPT09ICdmdW5jdGlvbicgJiYgcmVzb2x2ZShwcm9taXNlKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGxheURlY29kZWQoYXVkaW9Db250ZXh0LCBhdWRpb0J1ZmZlciwgc291cmNlKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IGF1ZGlvQ29udGV4dENsb3NlZCA9IG5ldyBFdmVudEFzUHJvbWlzZSgpO1xyXG4gICAgY29uc3Qgc291cmNlRW5kZWQgPSBuZXcgRXZlbnRBc1Byb21pc2UoKTtcclxuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gc3Vic2NyaWJlRXZlbnQoXHJcbiAgICAgIGF1ZGlvQ29udGV4dCxcclxuICAgICAgJ3N0YXRlY2hhbmdlJyxcclxuICAgICAgKHsgdGFyZ2V0OiB7IHN0YXRlIH0gfSkgPT4gc3RhdGUgPT09ICdjbG9zZWQnICYmIGF1ZGlvQ29udGV4dENsb3NlZC5ldmVudExpc3RlbmVyKClcclxuICAgICk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgc291cmNlLmJ1ZmZlciA9IGF1ZGlvQnVmZmVyO1xyXG4gICAgICAvLyBcImVuZGVkXCIgbWF5IG5vdCBmaXJlIGlmIHRoZSB1bmRlcmx5aW5nIEF1ZGlvQ29udGV4dCBpcyBjbG9zZWQgcHJlbWF0dXJlbHlcclxuICAgICAgc291cmNlLm9uZW5kZWQgPSBzb3VyY2VFbmRlZC5ldmVudExpc3RlbmVyO1xyXG5cclxuICAgICAgc291cmNlLmNvbm5lY3QoYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTtcclxuICAgICAgc291cmNlLnN0YXJ0KDApO1xyXG5cclxuICAgICAgUHJvbWlzZS5yYWNlKFthdWRpb0NvbnRleHRDbG9zZWQudXBjb21pbmcoKSwgc291cmNlRW5kZWQudXBjb21pbmcoKV0pLnRoZW4ocmVzb2x2ZSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgcmVqZWN0KGVycik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICB1bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBwbGF5V2hpdGVOb2lzZShhdWRpb0NvbnRleHQpIHtcclxuICBjb25zdCBzb3VyY2UgPSBhdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XHJcbiAgY29uc3QgYXVkaW9CdWZmZXIgPSBhd2FpdCBhc3luY0RlY29kZUF1ZGlvRGF0YShhdWRpb0NvbnRleHQsIGRlY29kZShFTVBUWV9NUDNfQkFTRTY0KSk7XHJcblxyXG4gIGF3YWl0IHBsYXlEZWNvZGVkKGF1ZGlvQ29udGV4dCwgYXVkaW9CdWZmZXIsIHNvdXJjZSk7XHJcbn1cclxuIl19

/***/ }),

/***/ "./lib/resolveFunctionOrReturnValue.js":
/*!*********************************************!*\
  !*** ./lib/resolveFunctionOrReturnValue.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = resolveFunctionOrReturnValue;

function resolveFunctionOrReturnValue(fnOrValue) {
  return typeof fnOrValue === 'function' ? fnOrValue() : fnOrValue;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlLmpzIl0sIm5hbWVzIjpbInJlc29sdmVGdW5jdGlvbk9yUmV0dXJuVmFsdWUiLCJmbk9yVmFsdWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZSxTQUFTQSw0QkFBVCxDQUFzQ0MsU0FBdEMsRUFBaUQ7QUFDOUQsU0FBTyxPQUFPQSxTQUFQLEtBQXFCLFVBQXJCLEdBQWtDQSxTQUFTLEVBQTNDLEdBQWdEQSxTQUF2RDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVzb2x2ZUZ1bmN0aW9uT3JSZXR1cm5WYWx1ZShmbk9yVmFsdWUpIHtcclxuICByZXR1cm4gdHlwZW9mIGZuT3JWYWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/IGZuT3JWYWx1ZSgpIDogZm5PclZhbHVlO1xyXG59XHJcbiJdfQ==

/***/ }),

/***/ "./lib/shareObservable.js":
/*!********************************!*\
  !*** ./lib/shareObservable.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = shareObservable;

/* global Observable */
function shareObservable(observable) {
  var observers = [];
  var subscription;
  return new Observable(function (observer) {
    if (!subscription) {
      subscription = observable.subscribe({
        complete: function complete() {
          observers.forEach(function (observer) {
            return observer.complete();
          });
        },
        error: function error(err) {
          observers.forEach(function (observer) {
            return observer.error(err);
          });
        },
        next: function next(value) {
          observers.forEach(function (observer) {
            return observer.next(value);
          });
        }
      });
    }

    observers.push(observer);
    return function () {
      observers = observers.filter(function (o) {
        return o !== observer;
      });

      if (!observers.length) {
        subscription.unsubscribe();
        subscription = null;
      }
    };
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zaGFyZU9ic2VydmFibGUuanMiXSwibmFtZXMiOlsic2hhcmVPYnNlcnZhYmxlIiwib2JzZXJ2YWJsZSIsIm9ic2VydmVycyIsInN1YnNjcmlwdGlvbiIsIk9ic2VydmFibGUiLCJvYnNlcnZlciIsInN1YnNjcmliZSIsImNvbXBsZXRlIiwiZm9yRWFjaCIsImVycm9yIiwiZXJyIiwibmV4dCIsInZhbHVlIiwicHVzaCIsImZpbHRlciIsIm8iLCJsZW5ndGgiLCJ1bnN1YnNjcmliZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBRWUsU0FBU0EsZUFBVCxDQUF5QkMsVUFBekIsRUFBcUM7QUFDbEQsTUFBSUMsU0FBUyxHQUFHLEVBQWhCO0FBQ0EsTUFBSUMsWUFBSjtBQUVBLFNBQU8sSUFBSUMsVUFBSixDQUFlLFVBQUFDLFFBQVEsRUFBSTtBQUNoQyxRQUFJLENBQUNGLFlBQUwsRUFBbUI7QUFDakJBLE1BQUFBLFlBQVksR0FBR0YsVUFBVSxDQUFDSyxTQUFYLENBQXFCO0FBQ2xDQyxRQUFBQSxRQURrQyxzQkFDdkI7QUFDVEwsVUFBQUEsU0FBUyxDQUFDTSxPQUFWLENBQWtCLFVBQUFILFFBQVE7QUFBQSxtQkFBSUEsUUFBUSxDQUFDRSxRQUFULEVBQUo7QUFBQSxXQUExQjtBQUNELFNBSGlDO0FBS2xDRSxRQUFBQSxLQUxrQyxpQkFLNUJDLEdBTDRCLEVBS3ZCO0FBQ1RSLFVBQUFBLFNBQVMsQ0FBQ00sT0FBVixDQUFrQixVQUFBSCxRQUFRO0FBQUEsbUJBQUlBLFFBQVEsQ0FBQ0ksS0FBVCxDQUFlQyxHQUFmLENBQUo7QUFBQSxXQUExQjtBQUNELFNBUGlDO0FBU2xDQyxRQUFBQSxJQVRrQyxnQkFTN0JDLEtBVDZCLEVBU3RCO0FBQ1ZWLFVBQUFBLFNBQVMsQ0FBQ00sT0FBVixDQUFrQixVQUFBSCxRQUFRO0FBQUEsbUJBQUlBLFFBQVEsQ0FBQ00sSUFBVCxDQUFjQyxLQUFkLENBQUo7QUFBQSxXQUExQjtBQUNEO0FBWGlDLE9BQXJCLENBQWY7QUFhRDs7QUFFRFYsSUFBQUEsU0FBUyxDQUFDVyxJQUFWLENBQWVSLFFBQWY7QUFFQSxXQUFPLFlBQU07QUFDWEgsTUFBQUEsU0FBUyxHQUFHQSxTQUFTLENBQUNZLE1BQVYsQ0FBaUIsVUFBQUMsQ0FBQztBQUFBLGVBQUlBLENBQUMsS0FBS1YsUUFBVjtBQUFBLE9BQWxCLENBQVo7O0FBRUEsVUFBSSxDQUFDSCxTQUFTLENBQUNjLE1BQWYsRUFBdUI7QUFDckJiLFFBQUFBLFlBQVksQ0FBQ2MsV0FBYjtBQUNBZCxRQUFBQSxZQUFZLEdBQUcsSUFBZjtBQUNEO0FBQ0YsS0FQRDtBQVFELEdBM0JNLENBQVA7QUE0QkQiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgT2JzZXJ2YWJsZSAqL1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2hhcmVPYnNlcnZhYmxlKG9ic2VydmFibGUpIHtcclxuICBsZXQgb2JzZXJ2ZXJzID0gW107XHJcbiAgbGV0IHN1YnNjcmlwdGlvbjtcclxuXHJcbiAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKG9ic2VydmVyID0+IHtcclxuICAgIGlmICghc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgIHN1YnNjcmlwdGlvbiA9IG9ic2VydmFibGUuc3Vic2NyaWJlKHtcclxuICAgICAgICBjb21wbGV0ZSgpIHtcclxuICAgICAgICAgIG9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IG9ic2VydmVyLmNvbXBsZXRlKCkpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGVycm9yKGVycikge1xyXG4gICAgICAgICAgb2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT4gb2JzZXJ2ZXIuZXJyb3IoZXJyKSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgICAgb2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT4gb2JzZXJ2ZXIubmV4dCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIG9ic2VydmVycyA9IG9ic2VydmVycy5maWx0ZXIobyA9PiBvICE9PSBvYnNlcnZlcik7XHJcblxyXG4gICAgICBpZiAoIW9ic2VydmVycy5sZW5ndGgpIHtcclxuICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICBzdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0pO1xyXG59XHJcbiJdfQ==

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

module.exports = _arrayWithoutHoles;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/assertThisInitialized.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/assertThisInitialized.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

module.exports = _assertThisInitialized;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/asyncToGenerator.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

module.exports = _asyncToGenerator;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

module.exports = _classCallCheck;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/createClass.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

module.exports = _createClass;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/defineProperty.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/defineProperty.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

module.exports = _defineProperty;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/getPrototypeOf.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _getPrototypeOf(o) {
  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

module.exports = _getPrototypeOf;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/inherits.js":
/*!*********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/inherits.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var setPrototypeOf = __webpack_require__(/*! ./setPrototypeOf */ "./node_modules/@babel/runtime/helpers/setPrototypeOf.js");

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) setPrototypeOf(subClass, superClass);
}

module.exports = _inherits;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/interopRequireDefault.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

module.exports = _interopRequireDefault;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/interopRequireWildcard.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/interopRequireWildcard.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};

  if (obj != null) {
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

        if (desc && (desc.get || desc.set)) {
          Object.defineProperty(newObj, key, desc);
        } else {
          newObj[key] = obj[key];
        }
      }
    }
  }

  newObj["default"] = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

module.exports = _interopRequireWildcard;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/iterableToArray.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/iterableToArray.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

module.exports = _iterableToArray;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/nonIterableSpread.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/nonIterableSpread.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

module.exports = _nonIterableSpread;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":
/*!************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/objectWithoutProperties.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var objectWithoutPropertiesLoose = __webpack_require__(/*! ./objectWithoutPropertiesLoose */ "./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};
  var target = objectWithoutPropertiesLoose(source, excluded);
  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

module.exports = _objectWithoutProperties;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

module.exports = _objectWithoutPropertiesLoose;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var _typeof = __webpack_require__(/*! ../helpers/typeof */ "./node_modules/@babel/runtime/helpers/typeof.js");

var assertThisInitialized = __webpack_require__(/*! ./assertThisInitialized */ "./node_modules/@babel/runtime/helpers/assertThisInitialized.js");

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return assertThisInitialized(self);
}

module.exports = _possibleConstructorReturn;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/setPrototypeOf.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/setPrototypeOf.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _setPrototypeOf(o, p) {
  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

module.exports = _setPrototypeOf;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/toConsumableArray.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/toConsumableArray.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var arrayWithoutHoles = __webpack_require__(/*! ./arrayWithoutHoles */ "./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js");

var iterableToArray = __webpack_require__(/*! ./iterableToArray */ "./node_modules/@babel/runtime/helpers/iterableToArray.js");

var nonIterableSpread = __webpack_require__(/*! ./nonIterableSpread */ "./node_modules/@babel/runtime/helpers/nonIterableSpread.js");

function _toConsumableArray(arr) {
  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();
}

module.exports = _toConsumableArray;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/typeof.js":
/*!*******************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    module.exports = _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    module.exports = _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

module.exports = _typeof;

/***/ }),

/***/ "./node_modules/@babel/runtime/regenerator/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! regenerator-runtime */ "./node_modules/regenerator-runtime/runtime.js");


/***/ }),

/***/ "./node_modules/abort-controller/browser.js":
/*!**************************************************!*\
  !*** ./node_modules/abort-controller/browser.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/*globals self, window */


/*eslint-disable @mysticatea/prettier */
const { AbortController, AbortSignal } =
    typeof self !== "undefined" ? self :
    typeof window !== "undefined" ? window :
    /* otherwise */ undefined
/*eslint-enable @mysticatea/prettier */

module.exports = AbortController
module.exports.AbortSignal = AbortSignal
module.exports.default = AbortController


/***/ }),

/***/ "./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js":
/*!*******************************************************************!*\
  !*** ./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
(function(){
  "use strict";

  var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

  // Use a lookup table to find the index.
  var lookup = new Uint8Array(256);
  for (var i = 0; i < chars.length; i++) {
    lookup[chars.charCodeAt(i)] = i;
  }

  exports.encode = function(arraybuffer) {
    var bytes = new Uint8Array(arraybuffer),
    i, len = bytes.length, base64 = "";

    for (i = 0; i < len; i+=3) {
      base64 += chars[bytes[i] >> 2];
      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];
      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];
      base64 += chars[bytes[i + 2] & 63];
    }

    if ((len % 3) === 2) {
      base64 = base64.substring(0, base64.length - 1) + "=";
    } else if (len % 3 === 1) {
      base64 = base64.substring(0, base64.length - 2) + "==";
    }

    return base64;
  };

  exports.decode =  function(base64) {
    var bufferLength = base64.length * 0.75,
    len = base64.length, i, p = 0,
    encoded1, encoded2, encoded3, encoded4;

    if (base64[base64.length - 1] === "=") {
      bufferLength--;
      if (base64[base64.length - 2] === "=") {
        bufferLength--;
      }
    }

    var arraybuffer = new ArrayBuffer(bufferLength),
    bytes = new Uint8Array(arraybuffer);

    for (i = 0; i < len; i+=4) {
      encoded1 = lookup[base64.charCodeAt(i)];
      encoded2 = lookup[base64.charCodeAt(i+1)];
      encoded3 = lookup[base64.charCodeAt(i+2)];
      encoded4 = lookup[base64.charCodeAt(i+3)];

      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);
      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);
      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);
    }

    return arraybuffer;
  };
})();


/***/ }),

/***/ "./node_modules/base64-js/index.js":
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function getLens (b64) {
  var len = b64.length

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen > 0
    ? validLen - 4
    : validLen

  var i
  for (i = 0; i < len; i += 4) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 18) |
      (revLookup[b64.charCodeAt(i + 1)] << 12) |
      (revLookup[b64.charCodeAt(i + 2)] << 6) |
      revLookup[b64.charCodeAt(i + 3)]
    arr[curByte++] = (tmp >> 16) & 0xFF
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 2) |
      (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 10) |
      (revLookup[b64.charCodeAt(i + 1)] << 4) |
      (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] +
    lookup[num >> 12 & 0x3F] +
    lookup[num >> 6 & 0x3F] +
    lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp =
      ((uint8[i] << 16) & 0xFF0000) +
      ((uint8[i + 1] << 8) & 0xFF00) +
      (uint8[i + 2] & 0xFF)
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(
      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)
    ))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp >> 2] +
      lookup[(tmp << 4) & 0x3F] +
      '=='
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1]
    parts.push(
      lookup[tmp >> 10] +
      lookup[(tmp >> 4) & 0x3F] +
      lookup[(tmp << 2) & 0x3F] +
      '='
    )
  }

  return parts.join('')
}


/***/ }),

/***/ "./node_modules/buffer/index.js":
/*!**************************************!*\
  !*** ./node_modules/buffer/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(/*! base64-js */ "./node_modules/base64-js/index.js")
var ieee754 = __webpack_require__(/*! ieee754 */ "./node_modules/ieee754/index.js")
var isArray = __webpack_require__(/*! isarray */ "./node_modules/isarray/index.js")

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/core-js/features/observable/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/features/observable/index.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! ../../modules/esnext.observable */ "./node_modules/core-js/modules/esnext.observable.js");
__webpack_require__(/*! ../../modules/esnext.symbol.observable */ "./node_modules/core-js/modules/esnext.symbol.observable.js");
__webpack_require__(/*! ../../modules/es.object.to-string */ "./node_modules/core-js/modules/es.object.to-string.js");
__webpack_require__(/*! ../../modules/es.string.iterator */ "./node_modules/core-js/modules/es.string.iterator.js");
__webpack_require__(/*! ../../modules/web.dom-collections.iterator */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
var path = __webpack_require__(/*! ../../internals/path */ "./node_modules/core-js/internals/path.js");

module.exports = path.Observable;


/***/ }),

/***/ "./node_modules/core-js/internals/a-function.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/a-function.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (it) {
  if (typeof it != 'function') {
    throw TypeError(String(it) + ' is not a function');
  } return it;
};


/***/ }),

/***/ "./node_modules/core-js/internals/a-possible-prototype.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/a-possible-prototype.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

module.exports = function (it) {
  if (!isObject(it) && it !== null) {
    throw TypeError("Can't set " + String(it) + ' as a prototype');
  } return it;
};


/***/ }),

/***/ "./node_modules/core-js/internals/add-to-unscopables.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/add-to-unscopables.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var hide = __webpack_require__(/*! ../internals/hide */ "./node_modules/core-js/internals/hide.js");

var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;

// Array.prototype[@@unscopables]
// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables
if (ArrayPrototype[UNSCOPABLES] == undefined) {
  hide(ArrayPrototype, UNSCOPABLES, create(null));
}

// add a key to Array.prototype[@@unscopables]
module.exports = function (key) {
  ArrayPrototype[UNSCOPABLES][key] = true;
};


/***/ }),

/***/ "./node_modules/core-js/internals/an-instance.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/an-instance.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (it, Constructor, name) {
  if (!(it instanceof Constructor)) {
    throw TypeError('Incorrect ' + (name ? name + ' ' : '') + 'invocation');
  } return it;
};


/***/ }),

/***/ "./node_modules/core-js/internals/an-object.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/an-object.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

module.exports = function (it) {
  if (!isObject(it)) {
    throw TypeError(String(it) + ' is not an object');
  } return it;
};


/***/ }),

/***/ "./node_modules/core-js/internals/array-includes.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/array-includes.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");

// `Array.prototype.{ indexOf, includes }` methods implementation
var createMethod = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIndexedObject($this);
    var length = toLength(O.length);
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare
    if (IS_INCLUDES && el != el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare
      if (value != value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) {
      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};

module.exports = {
  // `Array.prototype.includes` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.includes
  includes: createMethod(true),
  // `Array.prototype.indexOf` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof
  indexOf: createMethod(false)
};


/***/ }),

/***/ "./node_modules/core-js/internals/bind-context.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/bind-context.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var aFunction = __webpack_require__(/*! ../internals/a-function */ "./node_modules/core-js/internals/a-function.js");

// optional / simple context binding
module.exports = function (fn, that, length) {
  aFunction(fn);
  if (that === undefined) return fn;
  switch (length) {
    case 0: return function () {
      return fn.call(that);
    };
    case 1: return function (a) {
      return fn.call(that, a);
    };
    case 2: return function (a, b) {
      return fn.call(that, a, b);
    };
    case 3: return function (a, b, c) {
      return fn.call(that, a, b, c);
    };
  }
  return function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),

/***/ "./node_modules/core-js/internals/call-with-safe-iteration-closing.js":
/*!****************************************************************************!*\
  !*** ./node_modules/core-js/internals/call-with-safe-iteration-closing.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");

// call something on iterator step with safe closing on error
module.exports = function (iterator, fn, value, ENTRIES) {
  try {
    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);
  // 7.4.6 IteratorClose(iterator, completion)
  } catch (error) {
    var returnMethod = iterator['return'];
    if (returnMethod !== undefined) anObject(returnMethod.call(iterator));
    throw error;
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/classof-raw.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/classof-raw.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = function (it) {
  return toString.call(it).slice(8, -1);
};


/***/ }),

/***/ "./node_modules/core-js/internals/classof.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/classof.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var classofRaw = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
// ES3 wrong here
var CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (error) { /* empty */ }
};

// getting tag from ES6+ `Object.prototype.toString`
module.exports = function (it) {
  var O, tag, result;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag
    // builtinTag case
    : CORRECT_ARGUMENTS ? classofRaw(O)
    // ES3 arguments fallback
    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/copy-constructor-properties.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/internals/copy-constructor-properties.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var has = __webpack_require__(/*! ../internals/has */ "./node_modules/core-js/internals/has.js");
var ownKeys = __webpack_require__(/*! ../internals/own-keys */ "./node_modules/core-js/internals/own-keys.js");
var getOwnPropertyDescriptorModule = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");

module.exports = function (target, source) {
  var keys = ownKeys(source);
  var defineProperty = definePropertyModule.f;
  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
  for (var i = 0; i < keys.length; i++) {
    var key = keys[i];
    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/correct-prototype-getter.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/correct-prototype-getter.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

module.exports = !fails(function () {
  function F() { /* empty */ }
  F.prototype.constructor = null;
  return Object.getPrototypeOf(new F()) !== F.prototype;
});


/***/ }),

/***/ "./node_modules/core-js/internals/create-iterator-constructor.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/internals/create-iterator-constructor.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IteratorPrototype = __webpack_require__(/*! ../internals/iterators-core */ "./node_modules/core-js/internals/iterators-core.js").IteratorPrototype;
var create = __webpack_require__(/*! ../internals/object-create */ "./node_modules/core-js/internals/object-create.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var Iterators = __webpack_require__(/*! ../internals/iterators */ "./node_modules/core-js/internals/iterators.js");

var returnThis = function () { return this; };

module.exports = function (IteratorConstructor, NAME, next) {
  var TO_STRING_TAG = NAME + ' Iterator';
  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });
  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);
  Iterators[TO_STRING_TAG] = returnThis;
  return IteratorConstructor;
};


/***/ }),

/***/ "./node_modules/core-js/internals/create-property-descriptor.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/internals/create-property-descriptor.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};


/***/ }),

/***/ "./node_modules/core-js/internals/define-iterator.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/define-iterator.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var createIteratorConstructor = __webpack_require__(/*! ../internals/create-iterator-constructor */ "./node_modules/core-js/internals/create-iterator-constructor.js");
var getPrototypeOf = __webpack_require__(/*! ../internals/object-get-prototype-of */ "./node_modules/core-js/internals/object-get-prototype-of.js");
var setPrototypeOf = __webpack_require__(/*! ../internals/object-set-prototype-of */ "./node_modules/core-js/internals/object-set-prototype-of.js");
var setToStringTag = __webpack_require__(/*! ../internals/set-to-string-tag */ "./node_modules/core-js/internals/set-to-string-tag.js");
var hide = __webpack_require__(/*! ../internals/hide */ "./node_modules/core-js/internals/hide.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");
var Iterators = __webpack_require__(/*! ../internals/iterators */ "./node_modules/core-js/internals/iterators.js");
var IteratorsCore = __webpack_require__(/*! ../internals/iterators-core */ "./node_modules/core-js/internals/iterators-core.js");

var IteratorPrototype = IteratorsCore.IteratorPrototype;
var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
var ITERATOR = wellKnownSymbol('iterator');
var KEYS = 'keys';
var VALUES = 'values';
var ENTRIES = 'entries';

var returnThis = function () { return this; };

module.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
  createIteratorConstructor(IteratorConstructor, NAME, next);

  var getIterationMethod = function (KIND) {
    if (KIND === DEFAULT && defaultIterator) return defaultIterator;
    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];
    switch (KIND) {
      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };
      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };
      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };
    } return function () { return new IteratorConstructor(this); };
  };

  var TO_STRING_TAG = NAME + ' Iterator';
  var INCORRECT_VALUES_NAME = false;
  var IterablePrototype = Iterable.prototype;
  var nativeIterator = IterablePrototype[ITERATOR]
    || IterablePrototype['@@iterator']
    || DEFAULT && IterablePrototype[DEFAULT];
  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;
  var CurrentIteratorPrototype, methods, KEY;

  // fix native
  if (anyNativeIterator) {
    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));
    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {
      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {
        if (setPrototypeOf) {
          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);
        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {
          hide(CurrentIteratorPrototype, ITERATOR, returnThis);
        }
      }
      // Set @@toStringTag to native iterators
      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;
    }
  }

  // fix Array#{values, @@iterator}.name in V8 / FF
  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {
    INCORRECT_VALUES_NAME = true;
    defaultIterator = function values() { return nativeIterator.call(this); };
  }

  // define iterator
  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
    hide(IterablePrototype, ITERATOR, defaultIterator);
  }
  Iterators[NAME] = defaultIterator;

  // export additional methods
  if (DEFAULT) {
    methods = {
      values: getIterationMethod(VALUES),
      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
      entries: getIterationMethod(ENTRIES)
    };
    if (FORCED) for (KEY in methods) {
      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
        redefine(IterablePrototype, KEY, methods[KEY]);
      }
    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);
  }

  return methods;
};


/***/ }),

/***/ "./node_modules/core-js/internals/define-well-known-symbol.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/define-well-known-symbol.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var path = __webpack_require__(/*! ../internals/path */ "./node_modules/core-js/internals/path.js");
var has = __webpack_require__(/*! ../internals/has */ "./node_modules/core-js/internals/has.js");
var wrappedWellKnownSymbolModule = __webpack_require__(/*! ../internals/wrapped-well-known-symbol */ "./node_modules/core-js/internals/wrapped-well-known-symbol.js");
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;

module.exports = function (NAME) {
  var Symbol = path.Symbol || (path.Symbol = {});
  if (!has(Symbol, NAME)) defineProperty(Symbol, NAME, {
    value: wrappedWellKnownSymbolModule.f(NAME)
  });
};


/***/ }),

/***/ "./node_modules/core-js/internals/descriptors.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/descriptors.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

// Thank's IE8 for his funny defineProperty
module.exports = !fails(function () {
  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;
});


/***/ }),

/***/ "./node_modules/core-js/internals/document-create-element.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/document-create-element.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

var document = global.document;
// typeof document.createElement is 'object' in old IE
var EXISTS = isObject(document) && isObject(document.createElement);

module.exports = function (it) {
  return EXISTS ? document.createElement(it) : {};
};


/***/ }),

/***/ "./node_modules/core-js/internals/dom-iterables.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/dom-iterables.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// iterable DOM collections
// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods
module.exports = {
  CSSRuleList: 0,
  CSSStyleDeclaration: 0,
  CSSValueList: 0,
  ClientRectList: 0,
  DOMRectList: 0,
  DOMStringList: 0,
  DOMTokenList: 1,
  DataTransferItemList: 0,
  FileList: 0,
  HTMLAllCollection: 0,
  HTMLCollection: 0,
  HTMLFormElement: 0,
  HTMLSelectElement: 0,
  MediaList: 0,
  MimeTypeArray: 0,
  NamedNodeMap: 0,
  NodeList: 1,
  PaintRequestList: 0,
  Plugin: 0,
  PluginArray: 0,
  SVGLengthList: 0,
  SVGNumberList: 0,
  SVGPathSegList: 0,
  SVGPointList: 0,
  SVGStringList: 0,
  SVGTransformList: 0,
  SourceBufferList: 0,
  StyleSheetList: 0,
  TextTrackCueList: 0,
  TextTrackList: 0,
  TouchList: 0
};


/***/ }),

/***/ "./node_modules/core-js/internals/enum-bug-keys.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/enum-bug-keys.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// IE8- don't enum bug keys
module.exports = [
  'constructor',
  'hasOwnProperty',
  'isPrototypeOf',
  'propertyIsEnumerable',
  'toLocaleString',
  'toString',
  'valueOf'
];


/***/ }),

/***/ "./node_modules/core-js/internals/export.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/export.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var getOwnPropertyDescriptor = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js").f;
var hide = __webpack_require__(/*! ../internals/hide */ "./node_modules/core-js/internals/hide.js");
var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var setGlobal = __webpack_require__(/*! ../internals/set-global */ "./node_modules/core-js/internals/set-global.js");
var copyConstructorProperties = __webpack_require__(/*! ../internals/copy-constructor-properties */ "./node_modules/core-js/internals/copy-constructor-properties.js");
var isForced = __webpack_require__(/*! ../internals/is-forced */ "./node_modules/core-js/internals/is-forced.js");

/*
  options.target      - name of the target object
  options.global      - target is the global object
  options.stat        - export as static methods of target
  options.proto       - export as prototype methods of target
  options.real        - real prototype method for the `pure` version
  options.forced      - export even if the native feature is available
  options.bind        - bind methods to the target, required for the `pure` version
  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version
  options.unsafe      - use the simple assignment of property instead of delete + defineProperty
  options.sham        - add a flag to not completely full polyfills
  options.enumerable  - export as enumerable property
  options.noTargetGet - prevent calling a getter on target
*/
module.exports = function (options, source) {
  var TARGET = options.target;
  var GLOBAL = options.global;
  var STATIC = options.stat;
  var FORCED, target, key, targetProperty, sourceProperty, descriptor;
  if (GLOBAL) {
    target = global;
  } else if (STATIC) {
    target = global[TARGET] || setGlobal(TARGET, {});
  } else {
    target = (global[TARGET] || {}).prototype;
  }
  if (target) for (key in source) {
    sourceProperty = source[key];
    if (options.noTargetGet) {
      descriptor = getOwnPropertyDescriptor(target, key);
      targetProperty = descriptor && descriptor.value;
    } else targetProperty = target[key];
    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
    // contained in target
    if (!FORCED && targetProperty !== undefined) {
      if (typeof sourceProperty === typeof targetProperty) continue;
      copyConstructorProperties(sourceProperty, targetProperty);
    }
    // add a flag to not completely full polyfills
    if (options.sham || (targetProperty && targetProperty.sham)) {
      hide(sourceProperty, 'sham', true);
    }
    // extend global
    redefine(target, key, sourceProperty, options);
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/fails.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/internals/fails.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (exec) {
  try {
    return !!exec();
  } catch (error) {
    return true;
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/function-to-string.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/function-to-string.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");

module.exports = shared('native-function-to-string', Function.toString);


/***/ }),

/***/ "./node_modules/core-js/internals/get-built-in.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/get-built-in.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var path = __webpack_require__(/*! ../internals/path */ "./node_modules/core-js/internals/path.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

var aFunction = function (variable) {
  return typeof variable == 'function' ? variable : undefined;
};

module.exports = function (namespace, method) {
  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])
    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-iterator-method.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/internals/get-iterator-method.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var Iterators = __webpack_require__(/*! ../internals/iterators */ "./node_modules/core-js/internals/iterators.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var ITERATOR = wellKnownSymbol('iterator');

module.exports = function (it) {
  if (it != undefined) return it[ITERATOR]
    || it['@@iterator']
    || Iterators[classof(it)];
};


/***/ }),

/***/ "./node_modules/core-js/internals/get-iterator.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/get-iterator.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var getIteratorMethod = __webpack_require__(/*! ../internals/get-iterator-method */ "./node_modules/core-js/internals/get-iterator-method.js");

module.exports = function (it) {
  var iteratorMethod = getIteratorMethod(it);
  if (typeof iteratorMethod != 'function') {
    throw TypeError(String(it) + ' is not iterable');
  } return anObject(iteratorMethod.call(it));
};


/***/ }),

/***/ "./node_modules/core-js/internals/global.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/global.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var O = 'object';
var check = function (it) {
  return it && it.Math == Math && it;
};

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
module.exports =
  // eslint-disable-next-line no-undef
  check(typeof globalThis == O && globalThis) ||
  check(typeof window == O && window) ||
  check(typeof self == O && self) ||
  check(typeof global == O && global) ||
  // eslint-disable-next-line no-new-func
  Function('return this')();

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/core-js/internals/has.js":
/*!***********************************************!*\
  !*** ./node_modules/core-js/internals/has.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var hasOwnProperty = {}.hasOwnProperty;

module.exports = function (it, key) {
  return hasOwnProperty.call(it, key);
};


/***/ }),

/***/ "./node_modules/core-js/internals/hidden-keys.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/hidden-keys.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = {};


/***/ }),

/***/ "./node_modules/core-js/internals/hide.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/hide.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");

module.exports = DESCRIPTORS ? function (object, key, value) {
  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};


/***/ }),

/***/ "./node_modules/core-js/internals/host-report-errors.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/host-report-errors.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");

module.exports = function (a, b) {
  var console = global.console;
  if (console && console.error) {
    arguments.length === 1 ? console.error(a) : console.error(a, b);
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/html.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/html.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");

module.exports = getBuiltIn('document', 'documentElement');


/***/ }),

/***/ "./node_modules/core-js/internals/ie8-dom-define.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/ie8-dom-define.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var createElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");

// Thank's IE8 for his funny defineProperty
module.exports = !DESCRIPTORS && !fails(function () {
  return Object.defineProperty(createElement('div'), 'a', {
    get: function () { return 7; }
  }).a != 7;
});


/***/ }),

/***/ "./node_modules/core-js/internals/indexed-object.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/indexed-object.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");
var classof = __webpack_require__(/*! ../internals/classof-raw */ "./node_modules/core-js/internals/classof-raw.js");

var split = ''.split;

// fallback for non-array-like ES3 and non-enumerable old V8 strings
module.exports = fails(function () {
  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346
  // eslint-disable-next-line no-prototype-builtins
  return !Object('z').propertyIsEnumerable(0);
}) ? function (it) {
  return classof(it) == 'String' ? split.call(it, '') : Object(it);
} : Object;


/***/ }),

/***/ "./node_modules/core-js/internals/internal-state.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/internal-state.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var NATIVE_WEAK_MAP = __webpack_require__(/*! ../internals/native-weak-map */ "./node_modules/core-js/internals/native-weak-map.js");
var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var hide = __webpack_require__(/*! ../internals/hide */ "./node_modules/core-js/internals/hide.js");
var objectHas = __webpack_require__(/*! ../internals/has */ "./node_modules/core-js/internals/has.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");

var WeakMap = global.WeakMap;
var set, get, has;

var enforce = function (it) {
  return has(it) ? get(it) : set(it, {});
};

var getterFor = function (TYPE) {
  return function (it) {
    var state;
    if (!isObject(it) || (state = get(it)).type !== TYPE) {
      throw TypeError('Incompatible receiver, ' + TYPE + ' required');
    } return state;
  };
};

if (NATIVE_WEAK_MAP) {
  var store = new WeakMap();
  var wmget = store.get;
  var wmhas = store.has;
  var wmset = store.set;
  set = function (it, metadata) {
    wmset.call(store, it, metadata);
    return metadata;
  };
  get = function (it) {
    return wmget.call(store, it) || {};
  };
  has = function (it) {
    return wmhas.call(store, it);
  };
} else {
  var STATE = sharedKey('state');
  hiddenKeys[STATE] = true;
  set = function (it, metadata) {
    hide(it, STATE, metadata);
    return metadata;
  };
  get = function (it) {
    return objectHas(it, STATE) ? it[STATE] : {};
  };
  has = function (it) {
    return objectHas(it, STATE);
  };
}

module.exports = {
  set: set,
  get: get,
  has: has,
  enforce: enforce,
  getterFor: getterFor
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-array-iterator-method.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/is-array-iterator-method.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var Iterators = __webpack_require__(/*! ../internals/iterators */ "./node_modules/core-js/internals/iterators.js");

var ITERATOR = wellKnownSymbol('iterator');
var ArrayPrototype = Array.prototype;

// check on default Array iterator
module.exports = function (it) {
  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-forced.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-forced.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

var replacement = /#|\.prototype\./;

var isForced = function (feature, detection) {
  var value = data[normalize(feature)];
  return value == POLYFILL ? true
    : value == NATIVE ? false
    : typeof detection == 'function' ? fails(detection)
    : !!detection;
};

var normalize = isForced.normalize = function (string) {
  return String(string).replace(replacement, '.').toLowerCase();
};

var data = isForced.data = {};
var NATIVE = isForced.NATIVE = 'N';
var POLYFILL = isForced.POLYFILL = 'P';

module.exports = isForced;


/***/ }),

/***/ "./node_modules/core-js/internals/is-object.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-object.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (it) {
  return typeof it === 'object' ? it !== null : typeof it === 'function';
};


/***/ }),

/***/ "./node_modules/core-js/internals/is-pure.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/is-pure.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = false;


/***/ }),

/***/ "./node_modules/core-js/internals/iterate.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/iterate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isArrayIteratorMethod = __webpack_require__(/*! ../internals/is-array-iterator-method */ "./node_modules/core-js/internals/is-array-iterator-method.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");
var bind = __webpack_require__(/*! ../internals/bind-context */ "./node_modules/core-js/internals/bind-context.js");
var getIteratorMethod = __webpack_require__(/*! ../internals/get-iterator-method */ "./node_modules/core-js/internals/get-iterator-method.js");
var callWithSafeIterationClosing = __webpack_require__(/*! ../internals/call-with-safe-iteration-closing */ "./node_modules/core-js/internals/call-with-safe-iteration-closing.js");

var Result = function (stopped, result) {
  this.stopped = stopped;
  this.result = result;
};

var iterate = module.exports = function (iterable, fn, that, AS_ENTRIES, IS_ITERATOR) {
  var boundFunction = bind(fn, that, AS_ENTRIES ? 2 : 1);
  var iterator, iterFn, index, length, result, step;

  if (IS_ITERATOR) {
    iterator = iterable;
  } else {
    iterFn = getIteratorMethod(iterable);
    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');
    // optimisation for array iterators
    if (isArrayIteratorMethod(iterFn)) {
      for (index = 0, length = toLength(iterable.length); length > index; index++) {
        result = AS_ENTRIES
          ? boundFunction(anObject(step = iterable[index])[0], step[1])
          : boundFunction(iterable[index]);
        if (result && result instanceof Result) return result;
      } return new Result(false);
    }
    iterator = iterFn.call(iterable);
  }

  while (!(step = iterator.next()).done) {
    result = callWithSafeIterationClosing(iterator, boundFunction, step.value, AS_ENTRIES);
    if (result && result instanceof Result) return result;
  } return new Result(false);
};

iterate.stop = function (result) {
  return new Result(true, result);
};


/***/ }),

/***/ "./node_modules/core-js/internals/iterators-core.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/iterators-core.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getPrototypeOf = __webpack_require__(/*! ../internals/object-get-prototype-of */ "./node_modules/core-js/internals/object-get-prototype-of.js");
var hide = __webpack_require__(/*! ../internals/hide */ "./node_modules/core-js/internals/hide.js");
var has = __webpack_require__(/*! ../internals/has */ "./node_modules/core-js/internals/has.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");

var ITERATOR = wellKnownSymbol('iterator');
var BUGGY_SAFARI_ITERATORS = false;

var returnThis = function () { return this; };

// `%IteratorPrototype%` object
// https://tc39.github.io/ecma262/#sec-%iteratorprototype%-object
var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;

if ([].keys) {
  arrayIterator = [].keys();
  // Safari 8 has buggy iterators w/o `next`
  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;
  else {
    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));
    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;
  }
}

if (IteratorPrototype == undefined) IteratorPrototype = {};

// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()
if (!IS_PURE && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);

module.exports = {
  IteratorPrototype: IteratorPrototype,
  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS
};


/***/ }),

/***/ "./node_modules/core-js/internals/iterators.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/iterators.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = {};


/***/ }),

/***/ "./node_modules/core-js/internals/native-symbol.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/native-symbol.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");

module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
  // Chrome 38 Symbol has incorrect toString conversion
  // eslint-disable-next-line no-undef
  return !String(Symbol());
});


/***/ }),

/***/ "./node_modules/core-js/internals/native-weak-map.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/native-weak-map.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var nativeFunctionToString = __webpack_require__(/*! ../internals/function-to-string */ "./node_modules/core-js/internals/function-to-string.js");

var WeakMap = global.WeakMap;

module.exports = typeof WeakMap === 'function' && /native code/.test(nativeFunctionToString.call(WeakMap));


/***/ }),

/***/ "./node_modules/core-js/internals/object-create.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/object-create.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var defineProperties = __webpack_require__(/*! ../internals/object-define-properties */ "./node_modules/core-js/internals/object-define-properties.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");
var html = __webpack_require__(/*! ../internals/html */ "./node_modules/core-js/internals/html.js");
var documentCreateElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");
var IE_PROTO = sharedKey('IE_PROTO');

var PROTOTYPE = 'prototype';
var Empty = function () { /* empty */ };

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var createDict = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = documentCreateElement('iframe');
  var length = enumBugKeys.length;
  var lt = '<';
  var script = 'script';
  var gt = '>';
  var js = 'java' + script + ':';
  var iframeDocument;
  iframe.style.display = 'none';
  html.appendChild(iframe);
  iframe.src = String(js);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(lt + script + gt + 'document.F=Object' + lt + '/' + script + gt);
  iframeDocument.close();
  createDict = iframeDocument.F;
  while (length--) delete createDict[PROTOTYPE][enumBugKeys[length]];
  return createDict();
};

// `Object.create` method
// https://tc39.github.io/ecma262/#sec-object.create
module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    Empty[PROTOTYPE] = anObject(O);
    result = new Empty();
    Empty[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = createDict();
  return Properties === undefined ? result : defineProperties(result, Properties);
};

hiddenKeys[IE_PROTO] = true;


/***/ }),

/***/ "./node_modules/core-js/internals/object-define-properties.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/object-define-properties.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var objectKeys = __webpack_require__(/*! ../internals/object-keys */ "./node_modules/core-js/internals/object-keys.js");

// `Object.defineProperties` method
// https://tc39.github.io/ecma262/#sec-object.defineproperties
module.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var keys = objectKeys(Properties);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);
  return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-define-property.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-define-property.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var IE8_DOM_DEFINE = __webpack_require__(/*! ../internals/ie8-dom-define */ "./node_modules/core-js/internals/ie8-dom-define.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var toPrimitive = __webpack_require__(/*! ../internals/to-primitive */ "./node_modules/core-js/internals/to-primitive.js");

var nativeDefineProperty = Object.defineProperty;

// `Object.defineProperty` method
// https://tc39.github.io/ecma262/#sec-object.defineproperty
exports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPrimitive(P, true);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return nativeDefineProperty(O, P, Attributes);
  } catch (error) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-own-property-descriptor.js":
/*!******************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-descriptor.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var propertyIsEnumerableModule = __webpack_require__(/*! ../internals/object-property-is-enumerable */ "./node_modules/core-js/internals/object-property-is-enumerable.js");
var createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var toPrimitive = __webpack_require__(/*! ../internals/to-primitive */ "./node_modules/core-js/internals/to-primitive.js");
var has = __webpack_require__(/*! ../internals/has */ "./node_modules/core-js/internals/has.js");
var IE8_DOM_DEFINE = __webpack_require__(/*! ../internals/ie8-dom-define */ "./node_modules/core-js/internals/ie8-dom-define.js");

var nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// `Object.getOwnPropertyDescriptor` method
// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor
exports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
  O = toIndexedObject(O);
  P = toPrimitive(P, true);
  if (IE8_DOM_DEFINE) try {
    return nativeGetOwnPropertyDescriptor(O, P);
  } catch (error) { /* empty */ }
  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-own-property-names.js":
/*!*************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-names.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var internalObjectKeys = __webpack_require__(/*! ../internals/object-keys-internal */ "./node_modules/core-js/internals/object-keys-internal.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");

var hiddenKeys = enumBugKeys.concat('length', 'prototype');

// `Object.getOwnPropertyNames` method
// https://tc39.github.io/ecma262/#sec-object.getownpropertynames
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return internalObjectKeys(O, hiddenKeys);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-own-property-symbols.js":
/*!***************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-symbols.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

exports.f = Object.getOwnPropertySymbols;


/***/ }),

/***/ "./node_modules/core-js/internals/object-get-prototype-of.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-prototype-of.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var has = __webpack_require__(/*! ../internals/has */ "./node_modules/core-js/internals/has.js");
var toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");
var sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");
var CORRECT_PROTOTYPE_GETTER = __webpack_require__(/*! ../internals/correct-prototype-getter */ "./node_modules/core-js/internals/correct-prototype-getter.js");

var IE_PROTO = sharedKey('IE_PROTO');
var ObjectPrototype = Object.prototype;

// `Object.getPrototypeOf` method
// https://tc39.github.io/ecma262/#sec-object.getprototypeof
module.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {
  O = toObject(O);
  if (has(O, IE_PROTO)) return O[IE_PROTO];
  if (typeof O.constructor == 'function' && O instanceof O.constructor) {
    return O.constructor.prototype;
  } return O instanceof Object ? ObjectPrototype : null;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-keys-internal.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/object-keys-internal.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var has = __webpack_require__(/*! ../internals/has */ "./node_modules/core-js/internals/has.js");
var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var indexOf = __webpack_require__(/*! ../internals/array-includes */ "./node_modules/core-js/internals/array-includes.js").indexOf;
var hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");

module.exports = function (object, names) {
  var O = toIndexedObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (has(O, key = names[i++])) {
    ~indexOf(result, key) || result.push(key);
  }
  return result;
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-keys.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/object-keys.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var internalObjectKeys = __webpack_require__(/*! ../internals/object-keys-internal */ "./node_modules/core-js/internals/object-keys-internal.js");
var enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ "./node_modules/core-js/internals/enum-bug-keys.js");

// `Object.keys` method
// https://tc39.github.io/ecma262/#sec-object.keys
module.exports = Object.keys || function keys(O) {
  return internalObjectKeys(O, enumBugKeys);
};


/***/ }),

/***/ "./node_modules/core-js/internals/object-property-is-enumerable.js":
/*!*************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-property-is-enumerable.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var nativePropertyIsEnumerable = {}.propertyIsEnumerable;
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Nashorn ~ JDK8 bug
var NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);

// `Object.prototype.propertyIsEnumerable` method implementation
// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable
exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
  var descriptor = getOwnPropertyDescriptor(this, V);
  return !!descriptor && descriptor.enumerable;
} : nativePropertyIsEnumerable;


/***/ }),

/***/ "./node_modules/core-js/internals/object-set-prototype-of.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-set-prototype-of.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var aPossiblePrototype = __webpack_require__(/*! ../internals/a-possible-prototype */ "./node_modules/core-js/internals/a-possible-prototype.js");

// `Object.setPrototypeOf` method
// https://tc39.github.io/ecma262/#sec-object.setprototypeof
// Works with __proto__ only. Old v8 can't work with null proto objects.
/* eslint-disable no-proto */
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {
  var CORRECT_SETTER = false;
  var test = {};
  var setter;
  try {
    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;
    setter.call(test, []);
    CORRECT_SETTER = test instanceof Array;
  } catch (error) { /* empty */ }
  return function setPrototypeOf(O, proto) {
    anObject(O);
    aPossiblePrototype(proto);
    if (CORRECT_SETTER) setter.call(O, proto);
    else O.__proto__ = proto;
    return O;
  };
}() : undefined);


/***/ }),

/***/ "./node_modules/core-js/internals/object-to-string.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/object-to-string.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var classof = __webpack_require__(/*! ../internals/classof */ "./node_modules/core-js/internals/classof.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};

test[TO_STRING_TAG] = 'z';

// `Object.prototype.toString` method implementation
// https://tc39.github.io/ecma262/#sec-object.prototype.tostring
module.exports = String(test) !== '[object z]' ? function toString() {
  return '[object ' + classof(this) + ']';
} : test.toString;


/***/ }),

/***/ "./node_modules/core-js/internals/own-keys.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/own-keys.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var getOwnPropertyNamesModule = __webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js");
var getOwnPropertySymbolsModule = __webpack_require__(/*! ../internals/object-get-own-property-symbols */ "./node_modules/core-js/internals/object-get-own-property-symbols.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");

// all object keys, includes non-enumerable and symbols
module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
  var keys = getOwnPropertyNamesModule.f(anObject(it));
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;
};


/***/ }),

/***/ "./node_modules/core-js/internals/path.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/path.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");


/***/ }),

/***/ "./node_modules/core-js/internals/redefine-all.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/redefine-all.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");

module.exports = function (target, src, options) {
  for (var key in src) redefine(target, key, src[key], options);
  return target;
};


/***/ }),

/***/ "./node_modules/core-js/internals/redefine.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/redefine.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");
var hide = __webpack_require__(/*! ../internals/hide */ "./node_modules/core-js/internals/hide.js");
var has = __webpack_require__(/*! ../internals/has */ "./node_modules/core-js/internals/has.js");
var setGlobal = __webpack_require__(/*! ../internals/set-global */ "./node_modules/core-js/internals/set-global.js");
var nativeFunctionToString = __webpack_require__(/*! ../internals/function-to-string */ "./node_modules/core-js/internals/function-to-string.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");

var getInternalState = InternalStateModule.get;
var enforceInternalState = InternalStateModule.enforce;
var TEMPLATE = String(nativeFunctionToString).split('toString');

shared('inspectSource', function (it) {
  return nativeFunctionToString.call(it);
});

(module.exports = function (O, key, value, options) {
  var unsafe = options ? !!options.unsafe : false;
  var simple = options ? !!options.enumerable : false;
  var noTargetGet = options ? !!options.noTargetGet : false;
  if (typeof value == 'function') {
    if (typeof key == 'string' && !has(value, 'name')) hide(value, 'name', key);
    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');
  }
  if (O === global) {
    if (simple) O[key] = value;
    else setGlobal(key, value);
    return;
  } else if (!unsafe) {
    delete O[key];
  } else if (!noTargetGet && O[key]) {
    simple = true;
  }
  if (simple) O[key] = value;
  else hide(O, key, value);
// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
})(Function.prototype, 'toString', function toString() {
  return typeof this == 'function' && getInternalState(this).source || nativeFunctionToString.call(this);
});


/***/ }),

/***/ "./node_modules/core-js/internals/require-object-coercible.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/require-object-coercible.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// `RequireObjectCoercible` abstract operation
// https://tc39.github.io/ecma262/#sec-requireobjectcoercible
module.exports = function (it) {
  if (it == undefined) throw TypeError("Can't call method on " + it);
  return it;
};


/***/ }),

/***/ "./node_modules/core-js/internals/set-global.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/set-global.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var hide = __webpack_require__(/*! ../internals/hide */ "./node_modules/core-js/internals/hide.js");

module.exports = function (key, value) {
  try {
    hide(global, key, value);
  } catch (error) {
    global[key] = value;
  } return value;
};


/***/ }),

/***/ "./node_modules/core-js/internals/set-species.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/set-species.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");
var definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");

var SPECIES = wellKnownSymbol('species');

module.exports = function (CONSTRUCTOR_NAME) {
  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);
  var defineProperty = definePropertyModule.f;

  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
    defineProperty(Constructor, SPECIES, {
      configurable: true,
      get: function () { return this; }
    });
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/set-to-string-tag.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/set-to-string-tag.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;
var has = __webpack_require__(/*! ../internals/has */ "./node_modules/core-js/internals/has.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');

module.exports = function (it, TAG, STATIC) {
  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {
    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });
  }
};


/***/ }),

/***/ "./node_modules/core-js/internals/shared-key.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/shared-key.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");
var uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");

var keys = shared('keys');

module.exports = function (key) {
  return keys[key] || (keys[key] = uid(key));
};


/***/ }),

/***/ "./node_modules/core-js/internals/shared.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/shared.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var setGlobal = __webpack_require__(/*! ../internals/set-global */ "./node_modules/core-js/internals/set-global.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");

var SHARED = '__core-js_shared__';
var store = global[SHARED] || setGlobal(SHARED, {});

(module.exports = function (key, value) {
  return store[key] || (store[key] = value !== undefined ? value : {});
})('versions', []).push({
  version: '3.2.1',
  mode: IS_PURE ? 'pure' : 'global',
  copyright: ' 2019 Denis Pushkarev (zloirock.ru)'
});


/***/ }),

/***/ "./node_modules/core-js/internals/string-multibyte.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/internals/string-multibyte.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(/*! ../internals/to-integer */ "./node_modules/core-js/internals/to-integer.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

// `String.prototype.{ codePointAt, at }` methods implementation
var createMethod = function (CONVERT_TO_STRING) {
  return function ($this, pos) {
    var S = String(requireObjectCoercible($this));
    var position = toInteger(pos);
    var size = S.length;
    var first, second;
    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;
    first = S.charCodeAt(position);
    return first < 0xD800 || first > 0xDBFF || position + 1 === size
      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF
        ? CONVERT_TO_STRING ? S.charAt(position) : first
        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
  };
};

module.exports = {
  // `String.prototype.codePointAt` method
  // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat
  codeAt: createMethod(false),
  // `String.prototype.at` method
  // https://github.com/mathiasbynens/String.prototype.at
  charAt: createMethod(true)
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-absolute-index.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/to-absolute-index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(/*! ../internals/to-integer */ "./node_modules/core-js/internals/to-integer.js");

var max = Math.max;
var min = Math.min;

// Helper for a popular repeating case of the spec:
// Let integer be ? ToInteger(index).
// If integer < 0, let result be max((length + integer), 0); else let result be min(length, length).
module.exports = function (index, length) {
  var integer = toInteger(index);
  return integer < 0 ? max(integer + length, 0) : min(integer, length);
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-indexed-object.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/to-indexed-object.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// toObject with fallback for non-array-like ES3 strings
var IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

module.exports = function (it) {
  return IndexedObject(requireObjectCoercible(it));
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-integer.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/to-integer.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var ceil = Math.ceil;
var floor = Math.floor;

// `ToInteger` abstract operation
// https://tc39.github.io/ecma262/#sec-tointeger
module.exports = function (argument) {
  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-length.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-length.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(/*! ../internals/to-integer */ "./node_modules/core-js/internals/to-integer.js");

var min = Math.min;

// `ToLength` abstract operation
// https://tc39.github.io/ecma262/#sec-tolength
module.exports = function (argument) {
  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-object.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-object.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");

// `ToObject` abstract operation
// https://tc39.github.io/ecma262/#sec-toobject
module.exports = function (argument) {
  return Object(requireObjectCoercible(argument));
};


/***/ }),

/***/ "./node_modules/core-js/internals/to-primitive.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/to-primitive.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");

// `ToPrimitive` abstract operation
// https://tc39.github.io/ecma262/#sec-toprimitive
// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string
module.exports = function (input, PREFERRED_STRING) {
  if (!isObject(input)) return input;
  var fn, val;
  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;
  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;
  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;
  throw TypeError("Can't convert object to primitive value");
};


/***/ }),

/***/ "./node_modules/core-js/internals/uid.js":
/*!***********************************************!*\
  !*** ./node_modules/core-js/internals/uid.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var id = 0;
var postfix = Math.random();

module.exports = function (key) {
  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);
};


/***/ }),

/***/ "./node_modules/core-js/internals/well-known-symbol.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/well-known-symbol.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");
var uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");
var NATIVE_SYMBOL = __webpack_require__(/*! ../internals/native-symbol */ "./node_modules/core-js/internals/native-symbol.js");

var Symbol = global.Symbol;
var store = shared('wks');

module.exports = function (name) {
  return store[name] || (store[name] = NATIVE_SYMBOL && Symbol[name]
    || (NATIVE_SYMBOL ? Symbol : uid)('Symbol.' + name));
};


/***/ }),

/***/ "./node_modules/core-js/internals/wrapped-well-known-symbol.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/internals/wrapped-well-known-symbol.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports.f = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");


/***/ }),

/***/ "./node_modules/core-js/modules/es.array.iterator.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.iterator.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");
var addToUnscopables = __webpack_require__(/*! ../internals/add-to-unscopables */ "./node_modules/core-js/internals/add-to-unscopables.js");
var Iterators = __webpack_require__(/*! ../internals/iterators */ "./node_modules/core-js/internals/iterators.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");
var defineIterator = __webpack_require__(/*! ../internals/define-iterator */ "./node_modules/core-js/internals/define-iterator.js");

var ARRAY_ITERATOR = 'Array Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);

// `Array.prototype.entries` method
// https://tc39.github.io/ecma262/#sec-array.prototype.entries
// `Array.prototype.keys` method
// https://tc39.github.io/ecma262/#sec-array.prototype.keys
// `Array.prototype.values` method
// https://tc39.github.io/ecma262/#sec-array.prototype.values
// `Array.prototype[@@iterator]` method
// https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator
// `CreateArrayIterator` internal method
// https://tc39.github.io/ecma262/#sec-createarrayiterator
module.exports = defineIterator(Array, 'Array', function (iterated, kind) {
  setInternalState(this, {
    type: ARRAY_ITERATOR,
    target: toIndexedObject(iterated), // target
    index: 0,                          // next index
    kind: kind                         // kind
  });
// `%ArrayIteratorPrototype%.next` method
// https://tc39.github.io/ecma262/#sec-%arrayiteratorprototype%.next
}, function () {
  var state = getInternalState(this);
  var target = state.target;
  var kind = state.kind;
  var index = state.index++;
  if (!target || index >= target.length) {
    state.target = undefined;
    return { value: undefined, done: true };
  }
  if (kind == 'keys') return { value: index, done: false };
  if (kind == 'values') return { value: target[index], done: false };
  return { value: [index, target[index]], done: false };
}, 'values');

// argumentsList[@@iterator] is %ArrayProto_values%
// https://tc39.github.io/ecma262/#sec-createunmappedargumentsobject
// https://tc39.github.io/ecma262/#sec-createmappedargumentsobject
Iterators.Arguments = Iterators.Array;

// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');


/***/ }),

/***/ "./node_modules/core-js/modules/es.object.to-string.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/es.object.to-string.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var redefine = __webpack_require__(/*! ../internals/redefine */ "./node_modules/core-js/internals/redefine.js");
var toString = __webpack_require__(/*! ../internals/object-to-string */ "./node_modules/core-js/internals/object-to-string.js");

var ObjectPrototype = Object.prototype;

// `Object.prototype.toString` method
// https://tc39.github.io/ecma262/#sec-object.prototype.tostring
if (toString !== ObjectPrototype.toString) {
  redefine(ObjectPrototype, 'toString', toString, { unsafe: true });
}


/***/ }),

/***/ "./node_modules/core-js/modules/es.string.iterator.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/es.string.iterator.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var charAt = __webpack_require__(/*! ../internals/string-multibyte */ "./node_modules/core-js/internals/string-multibyte.js").charAt;
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");
var defineIterator = __webpack_require__(/*! ../internals/define-iterator */ "./node_modules/core-js/internals/define-iterator.js");

var STRING_ITERATOR = 'String Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);

// `String.prototype[@@iterator]` method
// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator
defineIterator(String, 'String', function (iterated) {
  setInternalState(this, {
    type: STRING_ITERATOR,
    string: String(iterated),
    index: 0
  });
// `%StringIteratorPrototype%.next` method
// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next
}, function next() {
  var state = getInternalState(this);
  var string = state.string;
  var index = state.index;
  var point;
  if (index >= string.length) return { value: undefined, done: true };
  point = charAt(string, index);
  state.index += point.length;
  return { value: point, done: false };
});


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.observable.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.observable.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/proposal-observable
var $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");
var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");
var setSpecies = __webpack_require__(/*! ../internals/set-species */ "./node_modules/core-js/internals/set-species.js");
var aFunction = __webpack_require__(/*! ../internals/a-function */ "./node_modules/core-js/internals/a-function.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");
var isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");
var anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");
var defineProperty = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f;
var hide = __webpack_require__(/*! ../internals/hide */ "./node_modules/core-js/internals/hide.js");
var redefineAll = __webpack_require__(/*! ../internals/redefine-all */ "./node_modules/core-js/internals/redefine-all.js");
var getIterator = __webpack_require__(/*! ../internals/get-iterator */ "./node_modules/core-js/internals/get-iterator.js");
var iterate = __webpack_require__(/*! ../internals/iterate */ "./node_modules/core-js/internals/iterate.js");
var hostReportErrors = __webpack_require__(/*! ../internals/host-report-errors */ "./node_modules/core-js/internals/host-report-errors.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "./node_modules/core-js/internals/internal-state.js");

var OBSERVABLE = wellKnownSymbol('observable');
var getInternalState = InternalStateModule.get;
var setInternalState = InternalStateModule.set;

var getMethod = function (fn) {
  return fn == null ? undefined : aFunction(fn);
};

var cleanupSubscription = function (subscriptionState) {
  var cleanup = subscriptionState.cleanup;
  if (cleanup) {
    subscriptionState.cleanup = undefined;
    try {
      cleanup();
    } catch (error) {
      hostReportErrors(error);
    }
  }
};

var subscriptionClosed = function (subscriptionState) {
  return subscriptionState.observer === undefined;
};

var close = function (subscription, subscriptionState) {
  if (!DESCRIPTORS) {
    subscription.closed = true;
    var subscriptionObserver = subscriptionState.subscriptionObserver;
    if (subscriptionObserver) subscriptionObserver.closed = true;
  } subscriptionState.observer = undefined;
};

var Subscription = function (observer, subscriber) {
  var subscriptionState = setInternalState(this, {
    cleanup: undefined,
    observer: anObject(observer),
    subscriptionObserver: undefined
  });
  var start;
  if (!DESCRIPTORS) this.closed = false;
  try {
    if (start = getMethod(observer.start)) start.call(observer, this);
  } catch (error) {
    hostReportErrors(error);
  }
  if (subscriptionClosed(subscriptionState)) return;
  var subscriptionObserver = subscriptionState.subscriptionObserver = new SubscriptionObserver(this);
  try {
    var cleanup = subscriber(subscriptionObserver);
    var subscription = cleanup;
    if (cleanup != null) subscriptionState.cleanup = typeof cleanup.unsubscribe === 'function'
      ? function () { subscription.unsubscribe(); }
      : aFunction(cleanup);
  } catch (error) {
    subscriptionObserver.error(error);
    return;
  } if (subscriptionClosed(subscriptionState)) cleanupSubscription(subscriptionState);
};

Subscription.prototype = redefineAll({}, {
  unsubscribe: function unsubscribe() {
    var subscriptionState = getInternalState(this);
    if (!subscriptionClosed(subscriptionState)) {
      close(this, subscriptionState);
      cleanupSubscription(subscriptionState);
    }
  }
});

if (DESCRIPTORS) defineProperty(Subscription.prototype, 'closed', {
  configurable: true,
  get: function () {
    return subscriptionClosed(getInternalState(this));
  }
});

var SubscriptionObserver = function (subscription) {
  setInternalState(this, { subscription: subscription });
  if (!DESCRIPTORS) this.closed = false;
};

SubscriptionObserver.prototype = redefineAll({}, {
  next: function next(value) {
    var subscriptionState = getInternalState(getInternalState(this).subscription);
    if (!subscriptionClosed(subscriptionState)) {
      var observer = subscriptionState.observer;
      try {
        var nextMethod = getMethod(observer.next);
        if (nextMethod) nextMethod.call(observer, value);
      } catch (error) {
        hostReportErrors(error);
      }
    }
  },
  error: function error(value) {
    var subscription = getInternalState(this).subscription;
    var subscriptionState = getInternalState(subscription);
    if (!subscriptionClosed(subscriptionState)) {
      var observer = subscriptionState.observer;
      close(subscription, subscriptionState);
      try {
        var errorMethod = getMethod(observer.error);
        if (errorMethod) errorMethod.call(observer, value);
        else hostReportErrors(value);
      } catch (err) {
        hostReportErrors(err);
      } cleanupSubscription(subscriptionState);
    }
  },
  complete: function complete() {
    var subscription = getInternalState(this).subscription;
    var subscriptionState = getInternalState(subscription);
    if (!subscriptionClosed(subscriptionState)) {
      var observer = subscriptionState.observer;
      close(subscription, subscriptionState);
      try {
        var completeMethod = getMethod(observer.complete);
        if (completeMethod) completeMethod.call(observer);
      } catch (error) {
        hostReportErrors(error);
      } cleanupSubscription(subscriptionState);
    }
  }
});

if (DESCRIPTORS) defineProperty(SubscriptionObserver.prototype, 'closed', {
  configurable: true,
  get: function () {
    return subscriptionClosed(getInternalState(getInternalState(this).subscription));
  }
});

var $Observable = function Observable(subscriber) {
  anInstance(this, $Observable, 'Observable');
  setInternalState(this, { subscriber: aFunction(subscriber) });
};

redefineAll($Observable.prototype, {
  subscribe: function subscribe(observer) {
    var length = arguments.length;
    return new Subscription(typeof observer === 'function' ? {
      next: observer,
      error: length > 1 ? arguments[1] : undefined,
      complete: length > 2 ? arguments[2] : undefined
    } : isObject(observer) ? observer : {}, getInternalState(this).subscriber);
  }
});

redefineAll($Observable, {
  from: function from(x) {
    var C = typeof this === 'function' ? this : $Observable;
    var observableMethod = getMethod(anObject(x)[OBSERVABLE]);
    if (observableMethod) {
      var observable = anObject(observableMethod.call(x));
      return observable.constructor === C ? observable : new C(function (observer) {
        return observable.subscribe(observer);
      });
    }
    var iterator = getIterator(x);
    return new C(function (observer) {
      iterate(iterator, function (it) {
        observer.next(it);
        if (observer.closed) return iterate.stop();
      }, undefined, false, true);
      observer.complete();
    });
  },
  of: function of() {
    var C = typeof this === 'function' ? this : $Observable;
    var length = arguments.length;
    var items = new Array(length);
    var index = 0;
    while (index < length) items[index] = arguments[index++];
    return new C(function (observer) {
      for (var i = 0; i < length; i++) {
        observer.next(items[i]);
        if (observer.closed) return;
      } observer.complete();
    });
  }
});

hide($Observable.prototype, OBSERVABLE, function () { return this; });

$({ global: true }, {
  Observable: $Observable
});

setSpecies('Observable');


/***/ }),

/***/ "./node_modules/core-js/modules/esnext.symbol.observable.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/modules/esnext.symbol.observable.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var defineWellKnownSymbol = __webpack_require__(/*! ../internals/define-well-known-symbol */ "./node_modules/core-js/internals/define-well-known-symbol.js");

// `Symbol.observable` well-known symbol
// https://github.com/tc39/proposal-observable
defineWellKnownSymbol('observable');


/***/ }),

/***/ "./node_modules/core-js/modules/web.dom-collections.iterator.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/modules/web.dom-collections.iterator.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");
var DOMIterables = __webpack_require__(/*! ../internals/dom-iterables */ "./node_modules/core-js/internals/dom-iterables.js");
var ArrayIteratorMethods = __webpack_require__(/*! ../modules/es.array.iterator */ "./node_modules/core-js/modules/es.array.iterator.js");
var hide = __webpack_require__(/*! ../internals/hide */ "./node_modules/core-js/internals/hide.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");

var ITERATOR = wellKnownSymbol('iterator');
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var ArrayValues = ArrayIteratorMethods.values;

for (var COLLECTION_NAME in DOMIterables) {
  var Collection = global[COLLECTION_NAME];
  var CollectionPrototype = Collection && Collection.prototype;
  if (CollectionPrototype) {
    // some Chrome versions have non-configurable methods on DOMTokenList
    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {
      hide(CollectionPrototype, ITERATOR, ArrayValues);
    } catch (error) {
      CollectionPrototype[ITERATOR] = ArrayValues;
    }
    if (!CollectionPrototype[TO_STRING_TAG]) hide(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);
    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {
      // some Chrome versions have non-configurable methods on DOMTokenList
      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {
        hide(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);
      } catch (error) {
        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];
      }
    }
  }
}


/***/ }),

/***/ "./node_modules/event-as-promise/lib/external/p-defer.js":
/*!***************************************************************!*\
  !*** ./node_modules/event-as-promise/lib/external/p-defer.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// The MIT License (MIT)
//
// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
// This piece of code is adopted from https://github.com/sindresorhus/p-defer
// The reason why we need to fork it is because:
// - The original package published to NPM is not ES5-compliant
//    - Due to the use of arrow functions
// - create-react-app@1 does not play nice with packages that are not ES5-compliant
//    - create-react-app@2 do play nice, but it was so new that most of the people are still on @1
// Criteria to remove this package:
// - When create-react-app@2 become mainstream, or,
// - When p-defer start publishing a ES5-compliant version on NPM


module.exports = function () {
  var ret = {};
  ret.promise = new Promise(function (resolve, reject) {
    ret.resolve = resolve;
    ret.reject = reject;
  });
  return ret;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9leHRlcm5hbC9wLWRlZmVyLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJyZXQiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUVBQSxNQUFNLENBQUNDLE9BQVAsR0FBaUIsWUFBWTtBQUMzQixNQUFNQyxHQUFHLEdBQUcsRUFBWjtBQUVBQSxFQUFBQSxHQUFHLENBQUNDLE9BQUosR0FBYyxJQUFJQyxPQUFKLENBQVksVUFBVUMsT0FBVixFQUFtQkMsTUFBbkIsRUFBMkI7QUFDbkRKLElBQUFBLEdBQUcsQ0FBQ0csT0FBSixHQUFjQSxPQUFkO0FBQ0FILElBQUFBLEdBQUcsQ0FBQ0ksTUFBSixHQUFhQSxNQUFiO0FBQ0QsR0FIYSxDQUFkO0FBS0EsU0FBT0osR0FBUDtBQUNELENBVEQiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgTUlUIExpY2Vuc2UgKE1JVClcbi8vXG4vLyBDb3B5cmlnaHQgKGMpIFNpbmRyZSBTb3JodXMgPHNpbmRyZXNvcmh1c0BnbWFpbC5jb20+IChzaW5kcmVzb3JodXMuY29tKVxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cbi8vIFRoaXMgcGllY2Ugb2YgY29kZSBpcyBhZG9wdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9wLWRlZmVyXG5cbi8vIFRoZSByZWFzb24gd2h5IHdlIG5lZWQgdG8gZm9yayBpdCBpcyBiZWNhdXNlOlxuLy8gLSBUaGUgb3JpZ2luYWwgcGFja2FnZSBwdWJsaXNoZWQgdG8gTlBNIGlzIG5vdCBFUzUtY29tcGxpYW50XG4vLyAgICAtIER1ZSB0byB0aGUgdXNlIG9mIGFycm93IGZ1bmN0aW9uc1xuLy8gLSBjcmVhdGUtcmVhY3QtYXBwQDEgZG9lcyBub3QgcGxheSBuaWNlIHdpdGggcGFja2FnZXMgdGhhdCBhcmUgbm90IEVTNS1jb21wbGlhbnRcbi8vICAgIC0gY3JlYXRlLXJlYWN0LWFwcEAyIGRvIHBsYXkgbmljZSwgYnV0IGl0IHdhcyBzbyBuZXcgdGhhdCBtb3N0IG9mIHRoZSBwZW9wbGUgYXJlIHN0aWxsIG9uIEAxXG5cbi8vIENyaXRlcmlhIHRvIHJlbW92ZSB0aGlzIHBhY2thZ2U6XG4vLyAtIFdoZW4gY3JlYXRlLXJlYWN0LWFwcEAyIGJlY29tZSBtYWluc3RyZWFtLCBvcixcbi8vIC0gV2hlbiBwLWRlZmVyIHN0YXJ0IHB1Ymxpc2hpbmcgYSBFUzUtY29tcGxpYW50IHZlcnNpb24gb24gTlBNXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHJldCA9IHt9O1xuXG4gIHJldC5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJldC5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICByZXQucmVqZWN0ID0gcmVqZWN0O1xuICB9KTtcblxuICByZXR1cm4gcmV0O1xufTtcbiJdfQ==

/***/ }),

/***/ "./node_modules/event-as-promise/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/event-as-promise/lib/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _pDefer = _interopRequireDefault(__webpack_require__(/*! ./external/p-defer */ "./node_modules/event-as-promise/lib/external/p-defer.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var EventAsPromise =
/*#__PURE__*/
function () {
  function EventAsPromise() {
    var _this = this;

    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, EventAsPromise);

    this.defers = [];
    this.upcomingDeferred = null;
    this.eventListener = this.eventListener.bind(this);
    this.options = options;
    this.one = this.one.bind(this);
    this.upcoming = this.upcoming.bind(this);

    this[Symbol.iterator] = function () {
      return {
        next: function next() {
          return {
            done: false,
            value: _this.upcoming()
          };
        }
      };
    };
  }

  _createClass(EventAsPromise, [{
    key: "eventListener",
    value: function eventListener(event) {
      var deferred = this.defers.shift();
      var args = this.options.array ? [].slice.call(arguments) : event;
      deferred && deferred.resolve(args);

      if (this.upcomingDeferred) {
        this.upcomingDeferred.resolve(args);
        this.upcomingDeferred = null;
      }
    }
  }, {
    key: "one",
    value: function one() {
      var deferred = (0, _pDefer.default)();
      this.defers.push(deferred);
      return deferred.promise;
    }
  }, {
    key: "upcoming",
    value: function upcoming() {
      if (!this.upcomingDeferred) {
        this.upcomingDeferred = (0, _pDefer.default)();
      }

      return this.upcomingDeferred.promise;
    }
  }]);

  return EventAsPromise;
}();

exports.default = EventAsPromise;
module.exports = exports.default;
module.exports.default = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJFdmVudEFzUHJvbWlzZSIsIm9wdGlvbnMiLCJkZWZlcnMiLCJ1cGNvbWluZ0RlZmVycmVkIiwiZXZlbnRMaXN0ZW5lciIsImJpbmQiLCJvbmUiLCJ1cGNvbWluZyIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJ2YWx1ZSIsImV2ZW50IiwiZGVmZXJyZWQiLCJzaGlmdCIsImFyZ3MiLCJhcnJheSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsInJlc29sdmUiLCJwdXNoIiwicHJvbWlzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7Ozs7O0lBRXFCQSxjOzs7QUFDbkIsNEJBQTBCO0FBQUE7O0FBQUEsUUFBZEMsT0FBYyx1RUFBSixFQUFJOztBQUFBOztBQUN4QixTQUFLQyxNQUFMLEdBQWMsRUFBZDtBQUNBLFNBQUtDLGdCQUFMLEdBQXdCLElBQXhCO0FBQ0EsU0FBS0MsYUFBTCxHQUFxQixLQUFLQSxhQUFMLENBQW1CQyxJQUFuQixDQUF3QixJQUF4QixDQUFyQjtBQUNBLFNBQUtKLE9BQUwsR0FBZUEsT0FBZjtBQUVBLFNBQUtLLEdBQUwsR0FBVyxLQUFLQSxHQUFMLENBQVNELElBQVQsQ0FBYyxJQUFkLENBQVg7QUFDQSxTQUFLRSxRQUFMLEdBQWdCLEtBQUtBLFFBQUwsQ0FBY0YsSUFBZCxDQUFtQixJQUFuQixDQUFoQjs7QUFFQSxTQUFLRyxNQUFNLENBQUNDLFFBQVosSUFBd0I7QUFBQSxhQUFPO0FBQzdCQyxRQUFBQSxJQUFJLEVBQUU7QUFBQSxpQkFBTztBQUNYQyxZQUFBQSxJQUFJLEVBQUUsS0FESztBQUVYQyxZQUFBQSxLQUFLLEVBQUUsS0FBSSxDQUFDTCxRQUFMO0FBRkksV0FBUDtBQUFBO0FBRHVCLE9BQVA7QUFBQSxLQUF4QjtBQU1EOzs7O2tDQUVhTSxLLEVBQU87QUFDbkIsVUFBTUMsUUFBUSxHQUFHLEtBQUtaLE1BQUwsQ0FBWWEsS0FBWixFQUFqQjtBQUNBLFVBQU1DLElBQUksR0FBRyxLQUFLZixPQUFMLENBQWFnQixLQUFiLEdBQXFCLEdBQUdDLEtBQUgsQ0FBU0MsSUFBVCxDQUFjQyxTQUFkLENBQXJCLEdBQWdEUCxLQUE3RDtBQUVBQyxNQUFBQSxRQUFRLElBQUlBLFFBQVEsQ0FBQ08sT0FBVCxDQUFpQkwsSUFBakIsQ0FBWjs7QUFFQSxVQUFJLEtBQUtiLGdCQUFULEVBQTJCO0FBQ3pCLGFBQUtBLGdCQUFMLENBQXNCa0IsT0FBdEIsQ0FBOEJMLElBQTlCO0FBQ0EsYUFBS2IsZ0JBQUwsR0FBd0IsSUFBeEI7QUFDRDtBQUNGOzs7MEJBRUs7QUFDSixVQUFNVyxRQUFRLEdBQUcsc0JBQWpCO0FBRUEsV0FBS1osTUFBTCxDQUFZb0IsSUFBWixDQUFpQlIsUUFBakI7QUFFQSxhQUFPQSxRQUFRLENBQUNTLE9BQWhCO0FBQ0Q7OzsrQkFFVTtBQUNULFVBQUksQ0FBQyxLQUFLcEIsZ0JBQVYsRUFBNEI7QUFDMUIsYUFBS0EsZ0JBQUwsR0FBd0Isc0JBQXhCO0FBQ0Q7O0FBRUQsYUFBTyxLQUFLQSxnQkFBTCxDQUFzQm9CLE9BQTdCO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlYXRlRGVmZXJyZWQgZnJvbSAnLi9leHRlcm5hbC9wLWRlZmVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnRBc1Byb21pc2Uge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRlZmVycyA9IFtdO1xuICAgIHRoaXMudXBjb21pbmdEZWZlcnJlZCA9IG51bGw7XG4gICAgdGhpcy5ldmVudExpc3RlbmVyID0gdGhpcy5ldmVudExpc3RlbmVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgIHRoaXMub25lID0gdGhpcy5vbmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwY29taW5nID0gdGhpcy51cGNvbWluZy5iaW5kKHRoaXMpO1xuXG4gICAgdGhpc1tTeW1ib2wuaXRlcmF0b3JdID0gKCkgPT4gKHtcbiAgICAgIG5leHQ6ICgpID0+ICh7XG4gICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogdGhpcy51cGNvbWluZygpXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG5cbiAgZXZlbnRMaXN0ZW5lcihldmVudCkge1xuICAgIGNvbnN0IGRlZmVycmVkID0gdGhpcy5kZWZlcnMuc2hpZnQoKTtcbiAgICBjb25zdCBhcmdzID0gdGhpcy5vcHRpb25zLmFycmF5ID8gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpIDogZXZlbnQ7XG5cbiAgICBkZWZlcnJlZCAmJiBkZWZlcnJlZC5yZXNvbHZlKGFyZ3MpO1xuXG4gICAgaWYgKHRoaXMudXBjb21pbmdEZWZlcnJlZCkge1xuICAgICAgdGhpcy51cGNvbWluZ0RlZmVycmVkLnJlc29sdmUoYXJncyk7XG4gICAgICB0aGlzLnVwY29taW5nRGVmZXJyZWQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIG9uZSgpIHtcbiAgICBjb25zdCBkZWZlcnJlZCA9IGNyZWF0ZURlZmVycmVkKCk7XG5cbiAgICB0aGlzLmRlZmVycy5wdXNoKGRlZmVycmVkKTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgdXBjb21pbmcoKSB7XG4gICAgaWYgKCF0aGlzLnVwY29taW5nRGVmZXJyZWQpIHtcbiAgICAgIHRoaXMudXBjb21pbmdEZWZlcnJlZCA9IGNyZWF0ZURlZmVycmVkKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudXBjb21pbmdEZWZlcnJlZC5wcm9taXNlO1xuICB9XG59XG4iXX0=

/***/ }),

/***/ "./node_modules/ieee754/index.js":
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}


/***/ }),

/***/ "./node_modules/isarray/index.js":
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),

/***/ "./node_modules/math-random/browser.js":
/*!*********************************************!*\
  !*** ./node_modules/math-random/browser.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = (function (global) {
  var uint32 = 'Uint32Array' in global
  var crypto = global.crypto || global.msCrypto
  var rando = crypto && typeof crypto.getRandomValues === 'function'
  var good = uint32 && rando
  if (!good) return Math.random

  var arr = new Uint32Array(1)
  var max = Math.pow(2, 32)
  function random () {
    crypto.getRandomValues(arr)
    return arr[0] / max
  }

  random.cryptographic = true
  return random
})(typeof self !== 'undefined' ? self : window)


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/microsoft.cognitiveservices.speech.sdk.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/microsoft.cognitiveservices.speech.sdk.js ***!
  \**********************************************************************************************************************/
/*! exports provided: AudioConfig, AudioStreamFormat, AudioInputStream, PullAudioInputStream, PushAudioInputStream, AudioOutputStream, PullAudioOutputStream, CancellationReason, PullAudioInputStreamCallback, KeywordRecognitionModel, SessionEventArgs, RecognitionEventArgs, OutputFormat, IntentRecognitionEventArgs, RecognitionResult, SpeechRecognitionResult, IntentRecognitionResult, LanguageUnderstandingModel, SpeechRecognitionEventArgs, SpeechRecognitionCanceledEventArgs, TranslationRecognitionEventArgs, TranslationSynthesisEventArgs, TranslationRecognitionResult, TranslationSynthesisResult, ResultReason, SpeechConfig, SpeechConfigImpl, SpeechTranslationConfig, PropertyCollection, PropertyId, Recognizer, SpeechRecognizer, IntentRecognizer, TranslationRecognizer, Translations, NoMatchReason, NoMatchDetails, TranslationRecognitionCanceledEventArgs, IntentRecognitionCanceledEventArgs, CancellationDetails, CancellationErrorCode, ConnectionEventArgs, Connection, PhraseListGrammar, DialogServiceConfig, BotFrameworkConfig, SpeechCommandsConfig, DialogServiceConnector, ActivityReceivedEventArgs, ServicePropertyChannel, ProfanityOption, BaseAudioPlayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _src_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _src_common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamFormat", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamFormat"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioInputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioInputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PullAudioInputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PushAudioInputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PushAudioInputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioOutputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioOutputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioOutputStream", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PullAudioOutputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationReason", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStreamCallback", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PullAudioInputStreamCallback"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KeywordRecognitionModel", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["KeywordRecognitionModel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SessionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SessionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OutputFormat", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["IntentRecognitionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["IntentRecognitionResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LanguageUnderstandingModel", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["LanguageUnderstandingModel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionCanceledEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionCanceledEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationRecognitionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationSynthesisEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationRecognitionResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisResult", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationSynthesisResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ResultReason", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechConfigImpl", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechConfigImpl"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechTranslationConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechTranslationConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyCollection", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyId", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Recognizer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["Recognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognizer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognizer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["IntentRecognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognizer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationRecognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Translations", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["Translations"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NoMatchReason", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["NoMatchReason"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NoMatchDetails", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["NoMatchDetails"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionCanceledEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationRecognitionCanceledEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionCanceledEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["IntentRecognitionCanceledEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationDetails", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationDetails"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationErrorCode", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ConnectionEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Connection", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["Connection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PhraseListGrammar", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PhraseListGrammar"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["DialogServiceConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BotFrameworkConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["BotFrameworkConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechCommandsConfig", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechCommandsConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConnector", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["DialogServiceConnector"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ActivityReceivedEventArgs", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ActivityReceivedEventArgs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ServicePropertyChannel", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ServicePropertyChannel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProfanityOption", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ProfanityOption"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseAudioPlayer", function() { return _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["BaseAudioPlayer"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


// Common.Storage.SetLocalStorage(new Common.Browser.LocalStorage());
// Common.Storage.SetSessionStorage(new Common.Browser.SessionStorage());
_src_common_Exports__WEBPACK_IMPORTED_MODULE_1__["Events"].instance.attachListener(new _src_common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ConsoleLoggingListener"]());
// Speech SDK API


//# sourceMappingURL=microsoft.cognitiveservices.speech.sdk.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ConsoleLoggingListener.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ConsoleLoggingListener.js ***!
  \*************************************************************************************************************************/
/*! exports provided: ConsoleLoggingListener */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConsoleLoggingListener", function() { return ConsoleLoggingListener; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ConsoleLoggingListener {
    constructor(logLevelFilter = _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Warning) {
        this.onEvent = (event) => {
            if (event.eventType >= this.privLogLevelFilter) {
                const log = this.toString(event);
                switch (event.eventType) {
                    case _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug:
                        // tslint:disable-next-line:no-console
                        console.debug(log);
                        break;
                    case _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info:
                        // tslint:disable-next-line:no-console
                        console.info(log);
                        break;
                    case _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Warning:
                        // tslint:disable-next-line:no-console
                        console.warn(log);
                        break;
                    case _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Error:
                        // tslint:disable-next-line:no-console
                        console.error(log);
                        break;
                    default:
                        // tslint:disable-next-line:no-console
                        console.log(log);
                        break;
                }
            }
        };
        this.toString = (event) => {
            const logFragments = [
                `${event.EventTime}`,
                `${event.Name}`,
            ];
            for (const prop in event) {
                if (prop && event.hasOwnProperty(prop) &&
                    prop !== "eventTime" && prop !== "eventType" &&
                    prop !== "eventId" && prop !== "name" &&
                    prop !== "constructor") {
                    const value = event[prop];
                    let valueToLog = "<NULL>";
                    if (value !== undefined && value !== null) {
                        if (typeof (value) === "number" || typeof (value) === "string") {
                            valueToLog = value.toString();
                        }
                        else {
                            valueToLog = JSON.stringify(value);
                        }
                    }
                    logFragments.push(`${prop}: ${valueToLog}`);
                }
            }
            return logFragments.join(" | ");
        };
        this.privLogLevelFilter = logLevelFilter;
    }
}

//# sourceMappingURL=ConsoleLoggingListener.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js ***!
  \**********************************************************************************************************/
/*! exports provided: ConsoleLoggingListener, AudioWorkletSourceURLPropertyName, MicAudioSource, FileAudioSource, PcmRecorder, WebsocketConnection, WebsocketMessageAdapter, ReplayableAudioNode, ProxyInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ConsoleLoggingListener__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConsoleLoggingListener */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ConsoleLoggingListener.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConsoleLoggingListener", function() { return _ConsoleLoggingListener__WEBPACK_IMPORTED_MODULE_0__["ConsoleLoggingListener"]; });

/* harmony import */ var _MicAudioSource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MicAudioSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/MicAudioSource.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioWorkletSourceURLPropertyName", function() { return _MicAudioSource__WEBPACK_IMPORTED_MODULE_1__["AudioWorkletSourceURLPropertyName"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MicAudioSource", function() { return _MicAudioSource__WEBPACK_IMPORTED_MODULE_1__["MicAudioSource"]; });

/* harmony import */ var _FileAudioSource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FileAudioSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/FileAudioSource.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FileAudioSource", function() { return _FileAudioSource__WEBPACK_IMPORTED_MODULE_2__["FileAudioSource"]; });

/* harmony import */ var _PCMRecorder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PCMRecorder */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/PCMRecorder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PcmRecorder", function() { return _PCMRecorder__WEBPACK_IMPORTED_MODULE_3__["PcmRecorder"]; });

/* harmony import */ var _WebsocketConnection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WebsocketConnection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebsocketConnection", function() { return _WebsocketConnection__WEBPACK_IMPORTED_MODULE_4__["WebsocketConnection"]; });

/* harmony import */ var _WebsocketMessageAdapter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./WebsocketMessageAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebsocketMessageAdapter", function() { return _WebsocketMessageAdapter__WEBPACK_IMPORTED_MODULE_5__["WebsocketMessageAdapter"]; });

/* harmony import */ var _ReplayableAudioNode__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ReplayableAudioNode */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReplayableAudioNode", function() { return _ReplayableAudioNode__WEBPACK_IMPORTED_MODULE_6__["ReplayableAudioNode"]; });

/* harmony import */ var _ProxyInfo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ProxyInfo */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProxyInfo", function() { return _ProxyInfo__WEBPACK_IMPORTED_MODULE_7__["ProxyInfo"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.









//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/FileAudioSource.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/FileAudioSource.js ***!
  \******************************************************************************************************************/
/*! exports provided: FileAudioSource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileAudioSource", function() { return FileAudioSource; });
/* harmony import */ var _src_sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/sdk/Audio/AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class FileAudioSource {
    constructor(file, audioSourceId) {
        this.privStreams = {};
        this.turnOn = () => {
            if (typeof FileReader === "undefined") {
                const errorMsg = "Browser does not support FileReader.";
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceErrorEvent"](errorMsg, "")); // initialization error - no streamid at this point
                return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromError(errorMsg);
            }
            else if (this.privFile.name.lastIndexOf(".wav") !== this.privFile.name.length - 4) {
                const errorMsg = this.privFile.name + " is not supported. Only WAVE files are allowed at the moment.";
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceErrorEvent"](errorMsg, ""));
                return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromError(errorMsg);
            }
            else if (this.privFile.size > FileAudioSource.MAX_SIZE) {
                const errorMsg = this.privFile.name + " exceeds the maximum allowed file size (" + FileAudioSource.MAX_SIZE + ").";
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceErrorEvent"](errorMsg, ""));
                return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromError(errorMsg);
            }
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceInitializingEvent"](this.privId)); // no stream id
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceReadyEvent"](this.privId));
            return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(true);
        };
        this.id = () => {
            return this.privId;
        };
        this.attach = (audioNodeId) => {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeAttachingEvent"](this.privId, audioNodeId));
            return this.upload(audioNodeId).onSuccessContinueWith((streamReader) => {
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeAttachedEvent"](this.privId, audioNodeId));
                return {
                    detach: () => {
                        streamReader.close();
                        delete this.privStreams[audioNodeId];
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
                        this.turnOff();
                    },
                    id: () => {
                        return audioNodeId;
                    },
                    read: () => {
                        return streamReader.read();
                    },
                };
            });
        };
        this.detach = (audioNodeId) => {
            if (audioNodeId && this.privStreams[audioNodeId]) {
                this.privStreams[audioNodeId].close();
                delete this.privStreams[audioNodeId];
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
            }
        };
        this.turnOff = () => {
            for (const streamId in this.privStreams) {
                if (streamId) {
                    const stream = this.privStreams[streamId];
                    if (stream && !stream.isClosed) {
                        stream.close();
                    }
                }
            }
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceOffEvent"](this.privId)); // no stream now
            return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(true);
        };
        this.upload = (audioNodeId) => {
            return this.turnOn()
                .onSuccessContinueWith((_) => {
                const stream = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Stream"](audioNodeId);
                this.privStreams[audioNodeId] = stream;
                const reader = new FileReader();
                let startOffset = 0;
                let endOffset = FileAudioSource.CHUNK_SIZE;
                const processNextChunk = (event) => {
                    if (stream.isClosed) {
                        return; // output stream was closed (somebody called TurnOff). We're done here.
                    }
                    stream.writeStreamChunk({
                        buffer: reader.result,
                        isEnd: false,
                        timeReceived: Date.now(),
                    });
                    if (endOffset < this.privFile.size) {
                        startOffset = endOffset;
                        endOffset = Math.min(endOffset + FileAudioSource.CHUNK_SIZE, this.privFile.size);
                        const chunk = this.privFile.slice(startOffset, endOffset);
                        reader.readAsArrayBuffer(chunk);
                    }
                    else {
                        // we've written the entire file to the output stream, can close it now.
                        stream.close();
                    }
                };
                reader.onload = processNextChunk;
                reader.onerror = (event) => {
                    const errorMsg = `Error occurred while processing '${this.privFile.name}'. ${event}`;
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeErrorEvent"](this.privId, audioNodeId, errorMsg));
                    throw new Error(errorMsg);
                };
                const chunk = this.privFile.slice(startOffset, endOffset);
                reader.readAsArrayBuffer(chunk);
                return stream.getReader();
            });
        };
        this.onEvent = (event) => {
            this.privEvents.onEvent(event);
            _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(event);
        };
        this.privId = audioSourceId ? audioSourceId : Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["createNoDashGuid"])();
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["EventSource"]();
        this.privFile = file;
    }
    get format() {
        return FileAudioSource.FILEFORMAT;
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult({
            bitspersample: FileAudioSource.FILEFORMAT.bitsPerSample,
            channelcount: FileAudioSource.FILEFORMAT.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["connectivity"].Unknown,
            manufacturer: "Speech SDK",
            model: "File",
            samplerate: FileAudioSource.FILEFORMAT.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["type"].File,
        });
    }
}
// Recommended sample rate (bytes/second).
FileAudioSource.SAMPLE_RATE = 16000 * 2; // 16 kHz * 16 bits
// We should stream audio at no faster than 2x real-time (i.e., send five chunks
// per second, with the chunk size == sample rate in bytes per second * 2 / 5).
FileAudioSource.CHUNK_SIZE = FileAudioSource.SAMPLE_RATE * 2 / 5;
// 10 seconds of audio in bytes =
// sample rate (bytes/second) * 600 (seconds) + 44 (size of the wave header).
FileAudioSource.MAX_SIZE = FileAudioSource.SAMPLE_RATE * 600 + 44;
FileAudioSource.FILEFORMAT = _src_sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__["AudioStreamFormat"].getWaveFormatPCM(16000, 16, 1);

//# sourceMappingURL=FileAudioSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/MicAudioSource.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/MicAudioSource.js ***!
  \*****************************************************************************************************************/
/*! exports provided: AudioWorkletSourceURLPropertyName, MicAudioSource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioWorkletSourceURLPropertyName", function() { return AudioWorkletSourceURLPropertyName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MicAudioSource", function() { return MicAudioSource; });
/* harmony import */ var _src_sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/sdk/Audio/AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



const AudioWorkletSourceURLPropertyName = "MICROPHONE-WorkletSourceUrl";
class MicAudioSource {
    constructor(privRecorder, outputChunkSize, audioSourceId, deviceId) {
        this.privRecorder = privRecorder;
        this.deviceId = deviceId;
        this.privStreams = {};
        this.turnOn = () => {
            if (this.privInitializeDeferral) {
                return this.privInitializeDeferral.promise();
            }
            this.privInitializeDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
            this.createAudioContext();
            const nav = window.navigator;
            let getUserMedia = (nav.getUserMedia ||
                nav.webkitGetUserMedia ||
                nav.mozGetUserMedia ||
                nav.msGetUserMedia);
            if (!!nav.mediaDevices) {
                getUserMedia = (constraints, successCallback, errorCallback) => {
                    nav.mediaDevices
                        .getUserMedia(constraints)
                        .then(successCallback)
                        .catch(errorCallback);
                };
            }
            if (!getUserMedia) {
                const errorMsg = "Browser does not support getUserMedia.";
                this.privInitializeDeferral.reject(errorMsg);
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceErrorEvent"](errorMsg, "")); // mic initialized error - no streamid at this point
            }
            else {
                const next = () => {
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceInitializingEvent"](this.privId)); // no stream id
                    getUserMedia({ audio: this.deviceId ? { deviceId: this.deviceId } : true, video: false }, (mediaStream) => {
                        this.privMediaStream = mediaStream;
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceReadyEvent"](this.privId));
                        this.privInitializeDeferral.resolve(true);
                    }, (error) => {
                        const errorMsg = `Error occurred during microphone initialization: ${error}`;
                        const tmp = this.privInitializeDeferral;
                        // HACK: this should be handled through onError callbacks of all promises up the stack.
                        // Unfortunately, the current implementation does not provide an easy way to reject promises
                        // without a lot of code replication.
                        // TODO: fix promise implementation, allow for a graceful reject chaining.
                        this.privInitializeDeferral = null;
                        tmp.reject(errorMsg); // this will bubble up through the whole chain of promises,
                        // with each new level adding extra "Unhandled callback error" prefix to the error message.
                        // The following line is not guaranteed to be executed.
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceErrorEvent"](this.privId, errorMsg));
                    });
                };
                if (this.privContext.state === "suspended") {
                    // NOTE: On iOS, the Web Audio API requires sounds to be triggered from an explicit user action.
                    // https://github.com/WebAudio/web-audio-api/issues/790
                    this.privContext.resume().then(next, (reason) => {
                        this.privInitializeDeferral.reject(`Failed to initialize audio context: ${reason}`);
                    });
                }
                else {
                    next();
                }
            }
            return this.privInitializeDeferral.promise();
        };
        this.id = () => {
            return this.privId;
        };
        this.attach = (audioNodeId) => {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeAttachingEvent"](this.privId, audioNodeId));
            return this.listen(audioNodeId).onSuccessContinueWith((streamReader) => {
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeAttachedEvent"](this.privId, audioNodeId));
                return {
                    detach: () => {
                        streamReader.close();
                        this.turnOff();
                        delete this.privStreams[audioNodeId];
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
                    },
                    id: () => {
                        return audioNodeId;
                    },
                    read: () => {
                        return streamReader.read();
                    },
                };
            });
        };
        this.detach = (audioNodeId) => {
            if (audioNodeId && this.privStreams[audioNodeId]) {
                this.privStreams[audioNodeId].close();
                delete this.privStreams[audioNodeId];
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
            }
        };
        this.turnOff = () => {
            for (const streamId in this.privStreams) {
                if (streamId) {
                    const stream = this.privStreams[streamId];
                    if (stream) {
                        stream.close();
                    }
                }
            }
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceOffEvent"](this.privId)); // no stream now
            this.privInitializeDeferral = null;
            this.destroyAudioContext();
            return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(true);
        };
        this.listen = (audioNodeId) => {
            return this.turnOn()
                .onSuccessContinueWith((_) => {
                const stream = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ChunkedArrayBufferStream"](this.privOutputChunkSize, audioNodeId);
                this.privStreams[audioNodeId] = stream;
                try {
                    this.privRecorder.record(this.privContext, this.privMediaStream, stream);
                }
                catch (error) {
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeErrorEvent"](this.privId, audioNodeId, error));
                    throw error;
                }
                return stream.getReader();
            });
        };
        this.onEvent = (event) => {
            this.privEvents.onEvent(event);
            _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(event);
        };
        this.createAudioContext = () => {
            if (!!this.privContext) {
                return;
            }
            // https://developer.mozilla.org/en-US/docs/Web/API/AudioContext
            const AudioContext = (window.AudioContext)
                || (window.webkitAudioContext)
                || false;
            if (!AudioContext) {
                throw new Error("Browser does not support Web Audio API (AudioContext is not available).");
            }
            this.privContext = new AudioContext();
        };
        this.destroyAudioContext = () => {
            if (!this.privContext) {
                return;
            }
            this.privRecorder.releaseMediaResources(this.privContext);
            // This pattern brought to you by a bug in the TypeScript compiler where it
            // confuses the ("close" in this.privContext) with this.privContext always being null as the alternate.
            // https://github.com/Microsoft/TypeScript/issues/11498
            let hasClose = false;
            if ("close" in this.privContext) {
                hasClose = true;
            }
            if (hasClose) {
                this.privContext.close();
                this.privContext = null;
            }
            else if (null !== this.privContext && this.privContext.state === "running") {
                // Suspend actually takes a callback, but analogous to the
                // resume method, it'll be only fired if suspend is called
                // in a direct response to a user action. The later is not always
                // the case, as TurnOff is also called, when we receive an
                // end-of-speech message from the service. So, doing a best effort
                // fire-and-forget here.
                this.privContext.suspend();
            }
        };
        this.privOutputChunkSize = outputChunkSize;
        this.privId = audioSourceId ? audioSourceId : Object(_common_Exports__WEBPACK_IMPORTED_MODULE_2__["createNoDashGuid"])();
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["EventSource"]();
    }
    get format() {
        return MicAudioSource.AUDIOFORMAT;
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return this.getMicrophoneLabel().onSuccessContinueWith((label) => {
            return {
                bitspersample: MicAudioSource.AUDIOFORMAT.bitsPerSample,
                channelcount: MicAudioSource.AUDIOFORMAT.channels,
                connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["connectivity"].Unknown,
                manufacturer: "Speech SDK",
                model: label,
                samplerate: MicAudioSource.AUDIOFORMAT.samplesPerSec,
                type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["type"].Microphones,
            };
        });
    }
    setProperty(name, value) {
        if (name === AudioWorkletSourceURLPropertyName) {
            this.privRecorder.setWorkletUrl(value);
        }
        else {
            throw new Error("Property '" + name + "' is not supported on Microphone.");
        }
    }
    getMicrophoneLabel() {
        const defaultMicrophoneName = "microphone";
        // If we did this already, return the value.
        if (this.privMicrophoneLabel !== undefined) {
            return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(this.privMicrophoneLabel);
        }
        // If the stream isn't currently running, we can't query devices because security.
        if (this.privMediaStream === undefined || !this.privMediaStream.active) {
            return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(defaultMicrophoneName);
        }
        // Setup a default
        this.privMicrophoneLabel = defaultMicrophoneName;
        // Get the id of the device running the audio track.
        const microphoneDeviceId = this.privMediaStream.getTracks()[0].getSettings().deviceId;
        // If the browser doesn't support getting the device ID, set a default and return.
        if (undefined === microphoneDeviceId) {
            return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(this.privMicrophoneLabel);
        }
        const deferred = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
        // Enumerate the media devices.
        navigator.mediaDevices.enumerateDevices().then((devices) => {
            for (const device of devices) {
                if (device.deviceId === microphoneDeviceId) {
                    // Found the device
                    this.privMicrophoneLabel = device.label;
                    break;
                }
            }
            deferred.resolve(this.privMicrophoneLabel);
        }, () => deferred.resolve(this.privMicrophoneLabel));
        return deferred.promise();
    }
}
MicAudioSource.AUDIOFORMAT = _src_sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__["AudioStreamFormat"].getDefaultInputFormat();

//# sourceMappingURL=MicAudioSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/PCMRecorder.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/PCMRecorder.js ***!
  \**************************************************************************************************************/
/*! exports provided: PcmRecorder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PcmRecorder", function() { return PcmRecorder; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class PcmRecorder {
    constructor() {
        this.record = (context, mediaStream, outputStream) => {
            const desiredSampleRate = 16000;
            const scriptNode = (() => {
                let bufferSize = 0;
                try {
                    return context.createScriptProcessor(bufferSize, 1, 1);
                }
                catch (error) {
                    // Webkit (<= version 31) requires a valid bufferSize.
                    bufferSize = 2048;
                    let audioSampleRate = context.sampleRate;
                    while (bufferSize < 16384 && audioSampleRate >= (2 * desiredSampleRate)) {
                        bufferSize <<= 1;
                        audioSampleRate >>= 1;
                    }
                    return context.createScriptProcessor(bufferSize, 1, 1);
                }
            })();
            const waveStreamEncoder = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["RiffPcmEncoder"](context.sampleRate, desiredSampleRate);
            let needHeader = true;
            const that = this;
            scriptNode.onaudioprocess = (event) => {
                const inputFrame = event.inputBuffer.getChannelData(0);
                if (outputStream && !outputStream.isClosed) {
                    const waveFrame = waveStreamEncoder.encode(needHeader, inputFrame);
                    if (!!waveFrame) {
                        outputStream.writeStreamChunk({
                            buffer: waveFrame,
                            isEnd: false,
                            timeReceived: Date.now(),
                        });
                        needHeader = false;
                    }
                }
            };
            const micInput = context.createMediaStreamSource(mediaStream);
            // https://webaudio.github.io/web-audio-api/#audioworklet
            // Using AudioWorklet to improve audio quality and avoid audio glitches due to blocking the UI thread
            if (!!this.privSpeechProcessorScript && !!context.audioWorklet) {
                context.audioWorklet
                    .addModule(this.privSpeechProcessorScript)
                    .then(() => {
                    const workletNode = new AudioWorkletNode(context, "speech-processor");
                    workletNode.port.onmessage = (ev) => {
                        const inputFrame = ev.data;
                        if (outputStream && !outputStream.isClosed) {
                            const waveFrame = waveStreamEncoder.encode(needHeader, inputFrame);
                            if (!!waveFrame) {
                                outputStream.writeStreamChunk({
                                    buffer: waveFrame,
                                    isEnd: false,
                                    timeReceived: Date.now(),
                                });
                                needHeader = false;
                            }
                        }
                    };
                    micInput.connect(workletNode);
                    workletNode.connect(context.destination);
                    this.privMediaResources = {
                        scriptProcessorNode: workletNode,
                        source: micInput,
                        stream: mediaStream,
                    };
                })
                    .catch(() => {
                    micInput.connect(scriptNode);
                    scriptNode.connect(context.destination);
                    this.privMediaResources = {
                        scriptProcessorNode: scriptNode,
                        source: micInput,
                        stream: mediaStream,
                    };
                });
            }
            else {
                micInput.connect(scriptNode);
                scriptNode.connect(context.destination);
                this.privMediaResources = {
                    scriptProcessorNode: scriptNode,
                    source: micInput,
                    stream: mediaStream,
                };
            }
        };
        this.releaseMediaResources = (context) => {
            if (this.privMediaResources) {
                if (this.privMediaResources.scriptProcessorNode) {
                    this.privMediaResources.scriptProcessorNode.disconnect(context.destination);
                    this.privMediaResources.scriptProcessorNode = null;
                }
                if (this.privMediaResources.source) {
                    this.privMediaResources.source.disconnect();
                    this.privMediaResources.stream.getTracks().forEach((track) => track.stop());
                    this.privMediaResources.source = null;
                }
            }
        };
    }
    setWorkletUrl(url) {
        this.privSpeechProcessorScript = url;
    }
}

//# sourceMappingURL=PCMRecorder.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js ***!
  \************************************************************************************************************/
/*! exports provided: ProxyInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProxyInfo", function() { return ProxyInfo; });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ProxyInfo {
    constructor(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.privProxyHostName = proxyHostName;
        this.privProxyPort = proxyPort;
        this.privProxyUserName = proxyUserName;
        this.privProxyPassword = proxyPassword;
    }
    static fromRecognizerConfig(config) {
        return new ProxyInfo(config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_ProxyHostName), parseInt(config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_ProxyPort), 10), config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_ProxyUserName), config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceConnection_ProxyPassword));
    }
    get HostName() {
        return this.privProxyHostName;
    }
    get Port() {
        return this.privProxyPort;
    }
    get UserName() {
        return this.privProxyUserName;
    }
    get Password() {
        return this.privProxyPassword;
    }
}

//# sourceMappingURL=ProxyInfo.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js ***!
  \**********************************************************************************************************************/
/*! exports provided: ReplayableAudioNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReplayableAudioNode", function() { return ReplayableAudioNode; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ReplayableAudioNode {
    constructor(audioSource, format) {
        this.privBuffers = [];
        this.privReplayOffset = 0;
        this.privLastShrinkOffset = 0;
        this.privBufferStartOffset = 0;
        this.privBufferSerial = 0;
        this.privBufferedBytes = 0;
        this.privReplay = false;
        this.privLastChunkAcquiredTime = 0;
        this.id = () => {
            return this.privAudioNode.id();
        };
        this.privAudioNode = audioSource;
        this.privFormat = format;
    }
    // Reads and returns the next chunk of audio buffer.
    // If replay of existing buffers are needed, read() will first seek and replay
    // existing content, and upoin completion it will read new content from the underlying
    // audio node, saving that content into the replayable buffers.
    read() {
        // if there is a replay request to honor.
        if (!!this.privReplay && this.privBuffers.length !== 0) {
            // Find the start point in the buffers.
            // Offsets are in 100ns increments.
            // So how many bytes do we need to seek to get the right offset?
            const offsetToSeek = this.privReplayOffset - this.privBufferStartOffset;
            let bytesToSeek = Math.round(offsetToSeek * this.privFormat.avgBytesPerSec * 1e-7);
            if (0 !== (bytesToSeek % 2)) {
                bytesToSeek++;
            }
            let i = 0;
            while (i < this.privBuffers.length && bytesToSeek >= this.privBuffers[i].chunk.buffer.byteLength) {
                bytesToSeek -= this.privBuffers[i++].chunk.buffer.byteLength;
            }
            const retVal = this.privBuffers[i].chunk.buffer.slice(bytesToSeek);
            this.privReplayOffset += (retVal.byteLength / this.privFormat.avgBytesPerSec) * 1e+7;
            // If we've reached the end of the buffers, stop replaying.
            if (i === this.privBuffers.length - 1) {
                this.privReplay = false;
            }
            return _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PromiseHelper"].fromResult({
                buffer: retVal,
                isEnd: false,
                timeReceived: this.privBuffers[i].chunk.timeReceived,
            });
        }
        return this.privAudioNode.read()
            .onSuccessContinueWith((result) => {
            if (result && result.buffer) {
                this.privBuffers.push(new BufferEntry(result, this.privBufferSerial++, this.privBufferedBytes));
                this.privBufferedBytes += result.buffer.byteLength;
            }
            return result;
        });
    }
    detach() {
        this.privAudioNode.detach();
        this.privBuffers = undefined;
    }
    replay() {
        if (this.privBuffers && 0 !== this.privBuffers.length) {
            this.privReplay = true;
            this.privReplayOffset = this.privLastShrinkOffset;
        }
    }
    // Shrinks the existing audio buffers to start at the new offset, or at the
    // beginning of the buffer closest to the requested offset.
    // A replay request will start from the last shrink point.
    shrinkBuffers(offset) {
        this.privLastShrinkOffset = offset;
        // Find the start point in the buffers.
        // Offsets are in 100ns increments.
        // So how many bytes do we need to seek to get the right offset?
        const offsetToSeek = offset - this.privBufferStartOffset;
        let bytesToSeek = Math.round(offsetToSeek * this.privFormat.avgBytesPerSec * 1e-7);
        let i = 0;
        while (i < this.privBuffers.length && bytesToSeek >= this.privBuffers[i].chunk.buffer.byteLength) {
            bytesToSeek -= this.privBuffers[i++].chunk.buffer.byteLength;
        }
        this.privBufferStartOffset = Math.round(offset - ((bytesToSeek / this.privFormat.avgBytesPerSec) * 1e+7));
        this.privBuffers = this.privBuffers.slice(i);
    }
    // Finds the time a buffer of audio was first seen by offset.
    findTimeAtOffset(offset) {
        if (offset < this.privBufferStartOffset) {
            return 0;
        }
        for (const value of this.privBuffers) {
            const startOffset = (value.byteOffset / this.privFormat.avgBytesPerSec) * 1e7;
            const endOffset = startOffset + ((value.chunk.buffer.byteLength / this.privFormat.avgBytesPerSec) * 1e7);
            if (offset >= startOffset && offset <= endOffset) {
                return value.chunk.timeReceived;
            }
        }
        return 0;
    }
}
// Primary use of this class is to help debugging problems with the replay
// code. If the memory cost of alloc / dealloc gets too much, drop it and just use
// the ArrayBuffer directly.
// tslint:disable-next-line:max-classes-per-file
class BufferEntry {
    constructor(chunk, serial, byteOffset) {
        this.chunk = chunk;
        this.serial = serial;
        this.byteOffset = byteOffset;
    }
}

//# sourceMappingURL=ReplayableAudioNode.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js ***!
  \**********************************************************************************************************************/
/*! exports provided: WebsocketConnection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebsocketConnection", function() { return WebsocketConnection; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _WebsocketMessageAdapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WebsocketMessageAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class WebsocketConnection {
    constructor(uri, queryParameters, headers, messageFormatter, proxyInfo, connectionId) {
        this.privIsDisposed = false;
        this.dispose = () => {
            this.privIsDisposed = true;
            if (this.privConnectionMessageAdapter) {
                this.privConnectionMessageAdapter.close();
            }
        };
        this.isDisposed = () => {
            return this.privIsDisposed;
        };
        this.state = () => {
            return this.privConnectionMessageAdapter.state;
        };
        this.open = () => {
            return this.privConnectionMessageAdapter.open();
        };
        this.send = (message) => {
            return this.privConnectionMessageAdapter.send(message);
        };
        this.read = () => {
            return this.privConnectionMessageAdapter.read();
        };
        if (!uri) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("uri");
        }
        if (!messageFormatter) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("messageFormatter");
        }
        this.privMessageFormatter = messageFormatter;
        let queryParams = "";
        let i = 0;
        if (queryParameters) {
            for (const paramName in queryParameters) {
                if (paramName) {
                    queryParams += ((i === 0) && (uri.indexOf("?") === -1)) ? "?" : "&";
                    const val = encodeURIComponent(queryParameters[paramName]);
                    queryParams += `${paramName}=${val}`;
                    i++;
                }
            }
        }
        if (headers) {
            for (const headerName in headers) {
                if (headerName) {
                    queryParams += i === 0 ? "?" : "&";
                    const val = encodeURIComponent(headers[headerName]);
                    queryParams += `${headerName}=${val}`;
                    i++;
                }
            }
        }
        this.privUri = uri + queryParams;
        this.privId = connectionId ? connectionId : Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privConnectionMessageAdapter = new _WebsocketMessageAdapter__WEBPACK_IMPORTED_MODULE_1__["WebsocketMessageAdapter"](this.privUri, this.id, this.privMessageFormatter, proxyInfo, headers);
    }
    get id() {
        return this.privId;
    }
    get events() {
        return this.privConnectionMessageAdapter.events;
    }
}

//# sourceMappingURL=WebsocketConnection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js ***!
  \**************************************************************************************************************************/
/*! exports provided: WebsocketMessageAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(Buffer) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebsocketMessageAdapter", function() { return WebsocketMessageAdapter; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var https_proxy_agent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! https-proxy-agent */ 0);
/* harmony import */ var https_proxy_agent__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(https_proxy_agent__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ws */ 1);
/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ws__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../external/ocsp/ocsp */ 2);
/* harmony import */ var _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_3__);
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.




class WebsocketMessageAdapter {
    constructor(uri, connectionId, messageFormatter, proxyInfo, headers) {
        this.open = () => {
            if (this.privConnectionState === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Disconnected) {
                return _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PromiseHelper"].fromError(`Cannot open a connection that is in ${this.privConnectionState} state`);
            }
            if (this.privConnectionEstablishDeferral) {
                return this.privConnectionEstablishDeferral.promise();
            }
            this.privConnectionEstablishDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
            this.privCertificateValidatedDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
            this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Connecting;
            try {
                if (typeof WebSocket !== "undefined" && !WebsocketMessageAdapter.forceNpmWebSocket) {
                    // Browser handles cert checks.
                    this.privCertificateValidatedDeferral.resolve(true);
                    this.privWebsocketClient = new WebSocket(this.privUri);
                }
                else {
                    if (this.proxyInfo !== undefined &&
                        this.proxyInfo.HostName !== undefined &&
                        this.proxyInfo.Port > 0) {
                        const httpProxyOptions = {
                            host: this.proxyInfo.HostName,
                            port: this.proxyInfo.Port,
                        };
                        if (undefined !== this.proxyInfo.UserName) {
                            httpProxyOptions.headers = {
                                "Proxy-Authentication": "Basic " + new Buffer(this.proxyInfo.UserName + ":" + (this.proxyInfo.Password === undefined) ? "" : this.proxyInfo.Password).toString("base64"),
                                "requestOCSP": "true",
                            };
                        }
                        const httpProxyAgent = new https_proxy_agent__WEBPACK_IMPORTED_MODULE_1__(httpProxyOptions);
                        const httpsOptions = { agent: httpProxyAgent, headers: this.privHeaders };
                        this.privWebsocketClient = new ws__WEBPACK_IMPORTED_MODULE_2__(this.privUri, httpsOptions);
                        // Register to be notified when WebSocket upgrade happens so we can check the validity of the
                        // Certificate.
                        this.privWebsocketClient.addListener("upgrade", (e) => {
                            const tlsSocket = e.socket;
                            const peer = tlsSocket.getPeerCertificate(true);
                            // Cork the socket until we know if the cert is good.
                            tlsSocket.cork();
                            _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_3__["check"]({
                                cert: peer.raw,
                                httpOptions: httpsOptions,
                                issuer: peer.issuerCertificate.raw,
                            }, (error, res) => {
                                if (error) {
                                    this.privCertificateValidatedDeferral.reject(error.message);
                                    tlsSocket.destroy(error);
                                }
                                else {
                                    this.privCertificateValidatedDeferral.resolve(true);
                                    tlsSocket.uncork();
                                }
                            });
                        });
                    }
                    else {
                        // The ocsp library will handle validation for us and fail the connection if needed.
                        this.privCertificateValidatedDeferral.resolve(true);
                        const ocspAgent = new _external_ocsp_ocsp__WEBPACK_IMPORTED_MODULE_3__["Agent"]({});
                        const options = { agent: ocspAgent, headers: this.privHeaders };
                        this.privWebsocketClient = new ws__WEBPACK_IMPORTED_MODULE_2__(this.privUri, options);
                    }
                }
                this.privWebsocketClient.binaryType = "arraybuffer";
                this.privReceivingMessageQueue = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Queue"]();
                this.privDisconnectDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
                this.privSendMessageQueue = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Queue"]();
                this.processSendQueue();
            }
            catch (error) {
                this.privConnectionEstablishDeferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionOpenResponse"](500, error));
                return this.privConnectionEstablishDeferral.promise();
            }
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionStartEvent"](this.privConnectionId, this.privUri));
            this.privWebsocketClient.onopen = (e) => {
                this.privCertificateValidatedDeferral.promise().on(() => {
                    this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Connected;
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionEstablishedEvent"](this.privConnectionId));
                    this.privConnectionEstablishDeferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionOpenResponse"](200, ""));
                }, (error) => {
                    this.privConnectionEstablishDeferral.reject(error);
                });
            };
            this.privWebsocketClient.onerror = (e) => {
                // TODO: Understand what this is error is. Will we still get onClose ?
                if (this.privConnectionState !== _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Connecting) {
                    // TODO: Is this required ?
                    // this.onEvent(new ConnectionErrorEvent(errorMsg, connectionId));
                }
            };
            this.privWebsocketClient.onclose = (e) => {
                if (this.privConnectionState === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Connecting) {
                    this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Disconnected;
                    // this.onEvent(new ConnectionEstablishErrorEvent(this.connectionId, e.code, e.reason));
                    this.privConnectionEstablishDeferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionOpenResponse"](e.code, e.reason));
                }
                else {
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionClosedEvent"](this.privConnectionId, e.code, e.reason));
                }
                this.onClose(e.code, e.reason);
            };
            this.privWebsocketClient.onmessage = (e) => {
                const networkReceivedTime = new Date().toISOString();
                if (this.privConnectionState === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Connected) {
                    const deferred = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
                    // let id = ++this.idCounter;
                    this.privReceivingMessageQueue.enqueueFromPromise(deferred.promise());
                    if (e.data instanceof ArrayBuffer) {
                        const rawMessage = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["RawWebsocketMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary, e.data);
                        this.privMessageFormatter
                            .toConnectionMessage(rawMessage)
                            .on((connectionMessage) => {
                            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessageReceivedEvent"](this.privConnectionId, networkReceivedTime, connectionMessage));
                            deferred.resolve(connectionMessage);
                        }, (error) => {
                            // TODO: Events for these ?
                            deferred.reject(`Invalid binary message format. Error: ${error}`);
                        });
                    }
                    else {
                        const rawMessage = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["RawWebsocketMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text, e.data);
                        this.privMessageFormatter
                            .toConnectionMessage(rawMessage)
                            .on((connectionMessage) => {
                            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessageReceivedEvent"](this.privConnectionId, networkReceivedTime, connectionMessage));
                            deferred.resolve(connectionMessage);
                        }, (error) => {
                            // TODO: Events for these ?
                            deferred.reject(`Invalid text message format. Error: ${error}`);
                        });
                    }
                }
            };
            return this.privConnectionEstablishDeferral.promise();
        };
        this.send = (message) => {
            if (this.privConnectionState !== _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Connected) {
                return _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PromiseHelper"].fromError(`Cannot send on connection that is in ${this.privConnectionState} state`);
            }
            const messageSendStatusDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
            const messageSendDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
            this.privSendMessageQueue.enqueueFromPromise(messageSendDeferral.promise());
            this.privMessageFormatter
                .fromConnectionMessage(message)
                .on((rawMessage) => {
                messageSendDeferral.resolve({
                    Message: message,
                    RawWebsocketMessage: rawMessage,
                    sendStatusDeferral: messageSendStatusDeferral,
                });
            }, (error) => {
                messageSendDeferral.reject(`Error formatting the message. ${error}`);
            });
            return messageSendStatusDeferral.promise();
        };
        this.read = () => {
            if (this.privConnectionState !== _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Connected) {
                return _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PromiseHelper"].fromError(`Cannot read on connection that is in ${this.privConnectionState} state`);
            }
            return this.privReceivingMessageQueue.dequeue();
        };
        this.close = (reason) => {
            if (this.privWebsocketClient) {
                if (this.privConnectionState !== _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Disconnected) {
                    this.privWebsocketClient.close(1000, reason ? reason : "Normal closure by client");
                }
            }
            else {
                const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
                deferral.resolve(true);
                return deferral.promise();
            }
            return this.privDisconnectDeferral.promise();
        };
        this.sendRawMessage = (sendItem) => {
            try {
                // indicates we are draining the queue and it came with no message;
                if (!sendItem) {
                    return _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PromiseHelper"].fromResult(true);
                }
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessageSentEvent"](this.privConnectionId, new Date().toISOString(), sendItem.Message));
                this.privWebsocketClient.send(sendItem.RawWebsocketMessage.payload);
                return _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PromiseHelper"].fromResult(true);
            }
            catch (e) {
                return _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PromiseHelper"].fromError(`websocket send error: ${e}`);
            }
        };
        this.onClose = (code, reason) => {
            const closeReason = `Connection closed. ${code}: ${reason}`;
            this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].Disconnected;
            this.privDisconnectDeferral.resolve(true);
            this.privReceivingMessageQueue.dispose(reason);
            this.privReceivingMessageQueue.drainAndDispose((pendingReceiveItem) => {
                // TODO: Events for these ?
                // Logger.instance.onEvent(new LoggingEvent(LogType.Warning, null, `Failed to process received message. Reason: ${closeReason}, Message: ${JSON.stringify(pendingReceiveItem)}`));
            }, closeReason);
            this.privSendMessageQueue.drainAndDispose((pendingSendItem) => {
                pendingSendItem.sendStatusDeferral.reject(closeReason);
            }, closeReason);
        };
        this.processSendQueue = () => {
            this.privSendMessageQueue
                .dequeue()
                .on((sendItem) => {
                // indicates we are draining the queue and it came with no message;
                if (!sendItem) {
                    return;
                }
                this.sendRawMessage(sendItem)
                    .on((result) => {
                    sendItem.sendStatusDeferral.resolve(result);
                    this.processSendQueue();
                }, (sendError) => {
                    sendItem.sendStatusDeferral.reject(sendError);
                    this.processSendQueue();
                });
            }, (error) => {
                // do nothing
            });
        };
        this.onEvent = (event) => {
            this.privConnectionEvents.onEvent(event);
            _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Events"].instance.onEvent(event);
        };
        if (!uri) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("uri");
        }
        if (!messageFormatter) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("messageFormatter");
        }
        this.proxyInfo = proxyInfo;
        this.privConnectionEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventSource"]();
        this.privConnectionId = connectionId;
        this.privMessageFormatter = messageFormatter;
        this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionState"].None;
        this.privUri = uri;
        this.privHeaders = headers;
    }
    get state() {
        return this.privConnectionState;
    }
    get events() {
        return this.privConnectionEvents;
    }
}
WebsocketMessageAdapter.forceNpmWebSocket = false;

//# sourceMappingURL=WebsocketMessageAdapter.js.map

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AddedLmIntent.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AddedLmIntent.js ***!
  \***************************************************************************************************************/
/*! exports provided: AddedLmIntent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddedLmIntent", function() { return AddedLmIntent; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * @class AddedLmIntent
 */
// tslint:disable-next-line:max-classes-per-file
class AddedLmIntent {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param modelImpl - The model.
     * @param intentName - The intent name.
     */
    constructor(modelImpl, intentName) {
        this.modelImpl = modelImpl;
        this.intentName = intentName;
    }
}

//# sourceMappingURL=AddedLmIntent.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js ***!
  \*************************************************************************************************************/
/*! exports provided: AgentConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AgentConfig", function() { return AgentConfig; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Represents the JSON used in the agent.config message sent to the speech service.
 */
class AgentConfig {
    toJsonString() {
        return JSON.stringify(this.iPrivConfig);
    }
    get() {
        return this.iPrivConfig;
    }
    /**
     * Setter for the agent.config object.
     * @param value a JSON serializable object.
     */
    set(value) {
        this.iPrivConfig = value;
    }
}

//# sourceMappingURL=AgentConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js ***!
  \****************************************************************************************************************************************/
/*! exports provided: CognitiveSubscriptionKeyAuthentication */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CognitiveSubscriptionKeyAuthentication", function() { return CognitiveSubscriptionKeyAuthentication; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _IAuthentication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


const AuthHeader = "Ocp-Apim-Subscription-Key";
/**
 * @class
 */
class CognitiveSubscriptionKeyAuthentication {
    /**
     * Creates and initializes an instance of the CognitiveSubscriptionKeyAuthentication class.
     * @constructor
     * @param {string} subscriptionKey - The subscription key
     */
    constructor(subscriptionKey) {
        /**
         * Fetches the subscription key.
         * @member
         * @function
         * @public
         * @param {string} authFetchEventId - The id to fetch.
         */
        this.fetch = (authFetchEventId) => {
            return _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PromiseHelper"].fromResult(this.privAuthInfo);
        };
        /**
         * Fetches the subscription key.
         * @member
         * @function
         * @public
         * @param {string} authFetchEventId - The id to fetch.
         */
        this.fetchOnExpiry = (authFetchEventId) => {
            return _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PromiseHelper"].fromResult(this.privAuthInfo);
        };
        if (!subscriptionKey) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("subscriptionKey");
        }
        this.privAuthInfo = new _IAuthentication__WEBPACK_IMPORTED_MODULE_1__["AuthInfo"](AuthHeader, subscriptionKey);
    }
}

//# sourceMappingURL=CognitiveSubscriptionKeyAuthentication.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js ***!
  \******************************************************************************************************************************/
/*! exports provided: CognitiveTokenAuthentication */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CognitiveTokenAuthentication", function() { return CognitiveTokenAuthentication; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _IAuthentication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


const AuthHeader = "Authorization";
class CognitiveTokenAuthentication {
    constructor(fetchCallback, fetchOnExpiryCallback) {
        this.fetch = (authFetchEventId) => {
            return this.privFetchCallback(authFetchEventId).onSuccessContinueWith((token) => new _IAuthentication__WEBPACK_IMPORTED_MODULE_1__["AuthInfo"](AuthHeader, token));
        };
        this.fetchOnExpiry = (authFetchEventId) => {
            return this.privFetchOnExpiryCallback(authFetchEventId).onSuccessContinueWith((token) => new _IAuthentication__WEBPACK_IMPORTED_MODULE_1__["AuthInfo"](AuthHeader, token));
        };
        if (!fetchCallback) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("fetchCallback");
        }
        if (!fetchOnExpiryCallback) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("fetchOnExpiryCallback");
        }
        this.privFetchCallback = fetchCallback;
        this.privFetchOnExpiryCallback = fetchOnExpiryCallback;
    }
}

//# sourceMappingURL=CognitiveTokenAuthentication.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js ***!
  \***********************************************************************************************************************/
/*! exports provided: ConnectionFactoryBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionFactoryBase", function() { return ConnectionFactoryBase; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class ConnectionFactoryBase {
    setCommonUrlParams(config, queryParams, endpoint) {
        this.setUrlParameter(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_EnableAudioLogging, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].EnableAudioLogging, config, queryParams, endpoint);
        this.setUrlParameter(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_RequestWordLevelTimestamps, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].EnableWordLevelTimestamps, config, queryParams, endpoint);
        this.setUrlParameter(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_ProfanityOption, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].Profanify, config, queryParams, endpoint);
        this.setUrlParameter(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_InitialSilenceTimeoutMs, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].InitialSilenceTimeoutMs, config, queryParams, endpoint);
        this.setUrlParameter(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_EndSilenceTimeoutMs, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].EndSilenceTimeoutMs, config, queryParams, endpoint);
        this.setUrlParameter(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_StablePartialResultThreshold, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__["QueryParameterNames"].StableIntermediateThreshold, config, queryParams, endpoint);
        const serviceProperties = JSON.parse(config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], "{}"));
        Object.keys(serviceProperties).forEach((value, num, array) => {
            queryParams[value] = serviceProperties[value];
        });
    }
    setUrlParameter(propId, parameterName, config, queryParams, endpoint) {
        const value = config.parameters.getProperty(propId, undefined);
        if (value && (!endpoint || endpoint.search(parameterName) === -1)) {
            queryParams[parameterName] = value.toLocaleLowerCase();
        }
    }
}

//# sourceMappingURL=ConnectionFactoryBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogConnectorFactory.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogConnectorFactory.js ***!
  \************************************************************************************************************************/
/*! exports provided: DialogConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogConnectionFactory", function() { return DialogConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.





const baseUrl = "convai.speech.microsoft.com";
const botFramework = {
    authHeader: "X-DLS-Secret",
    resourcePath: "",
    version: "v3"
};
const speechCommands = {
    authHeader: "X-CommandsAppId",
    resourcePath: "commands",
    version: "v1"
};
const pathSuffix = "api";
function getDialogSpecificValues(dialogType) {
    switch (dialogType) {
        case "speech_commands": {
            return speechCommands;
        }
        case "bot_framework": {
            return botFramework;
        }
    }
    throw new Error(`Invalid dialog type '${dialogType}'`);
}
class DialogConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__["ConnectionFactoryBase"] {
    constructor() {
        super(...arguments);
        this.create = (config, authInfo, connectionId) => {
            const applicationId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].Conversation_ApplicationId, "");
            const dialogType = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].Conversation_DialogType);
            const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Region);
            const language = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_RecoLanguage, "en-US");
            const queryParams = {};
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].LanguageParamName] = language;
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].FormatParamName] = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_OutputFormatOption, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormat"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormat"].Simple]).toLowerCase();
            const { resourcePath, version, authHeader } = getDialogSpecificValues(dialogType);
            const headers = {};
            headers[authInfo.headerName] = authInfo.token;
            headers[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].ConnectionIdHeader] = connectionId;
            let endpoint;
            // ApplicationId is only required for CustomCommands
            if (applicationId === "") {
                endpoint = `wss://${region}.${baseUrl}/${pathSuffix}/${version}`;
            }
            else {
                endpoint = `wss://${region}.${baseUrl}/${resourcePath}/${pathSuffix}/${version}`;
                headers[authHeader] = applicationId;
            }
            return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_3__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), connectionId);
        };
    }
}

//# sourceMappingURL=DialogConnectorFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceAdapter.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceAdapter.js ***!
  \**********************************************************************************************************************/
/*! exports provided: DialogServiceAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceAdapter", function() { return DialogServiceAdapter; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _DialogServiceTurnStateManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DialogServiceTurnStateManager */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnStateManager.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ServiceMessages/ActivityResponsePayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.







class DialogServiceAdapter extends _Exports__WEBPACK_IMPORTED_MODULE_4__["ServiceRecognizerBase"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, dialogServiceConnector) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, dialogServiceConnector);
        this.sendMessage = (message) => {
            const interactionGuid = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createGuid"])();
            const requestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
            const agentMessage = {
                context: {
                    interactionId: interactionGuid
                },
                messagePayload: message,
                version: 0.5
            };
            const agentMessageJson = JSON.stringify(agentMessage);
            this.fetchDialogConnection().onSuccessContinueWith((connection) => {
                connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_6__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text, "agent", requestId, "application/json", agentMessageJson));
            });
        };
        this.listenOnce = (recoMode, successCallback, errorCallback) => {
            if (this.isTurnComplete) {
                this.privRecognizerConfig.recognitionMode = recoMode;
                this.privDialogRequestSession.startNewRecognition();
                this.privDialogRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events);
                this.isTurnComplete = false;
                // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
                this.dialogConnectImpl();
                this.sendPreAudioMessages();
                this.privSuccessCallback = successCallback;
                return this.privDialogAudioSource
                    .attach(this.privDialogRequestSession.audioNodeId)
                    .continueWithPromise((result) => {
                    let audioNode;
                    if (result.isError) {
                        this.cancelRecognition(this.privDialogRequestSession.sessionId, this.privDialogRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].ConnectionFailure, result.error, successCallback);
                        return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromError(result.error);
                    }
                    else {
                        audioNode = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ReplayableAudioNode"](result.result, this.privDialogAudioSource.format);
                        this.privDialogRequestSession.onAudioSourceAttachCompleted(audioNode, false);
                    }
                    return this.privDialogAudioSource.deviceInfo.onSuccessContinueWithPromise((deviceInfo) => {
                        this.privRecognizerConfig.SpeechServiceConfig.Context.audio = { source: deviceInfo };
                        return this.configConnection()
                            .on((_) => {
                            const sessionStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SessionEventArgs"](this.privDialogRequestSession.sessionId);
                            if (!!this.privRecognizer.sessionStarted) {
                                this.privRecognizer.sessionStarted(this.privRecognizer, sessionStartEventArgs);
                            }
                            const audioSendPromise = this.sendAudio(audioNode);
                            // /* tslint:disable:no-empty */
                            audioSendPromise.on((_) => { }, (error) => {
                                this.cancelRecognition(this.privDialogRequestSession.sessionId, this.privDialogRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].RuntimeError, error, successCallback);
                            });
                        }, (error) => {
                            this.cancelRecognition(this.privDialogRequestSession.sessionId, this.privDialogRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].ConnectionFailure, error, successCallback);
                        }).continueWithPromise((result) => {
                            if (result.isError) {
                                return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromError(result.error);
                            }
                            else {
                                return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(true);
                            }
                        });
                    });
                });
            }
        };
        this.sendAudio = (audioStreamNode) => {
            // NOTE: Home-baked promises crash ios safari during the invocation
            // of the error callback chain (looks like the recursion is way too deep, and
            // it blows up the stack). The following construct is a stop-gap that does not
            // bubble the error up the callback chain and hence circumvents this problem.
            // TODO: rewrite with ES6 promises.
            const deferred = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Deferred"]();
            // The time we last sent data to the service.
            let nextSendTime = Date.now();
            const audioFormat = this.privDialogAudioSource.format;
            // Max amount to send before we start to throttle
            const fastLaneSizeMs = this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs", "5000");
            const maxSendUnthrottledBytes = audioFormat.avgBytesPerSec / 1000 * parseInt(fastLaneSizeMs, 10);
            const startRecogNumber = this.privDialogRequestSession.recogNumber;
            const readAndUploadCycle = () => {
                // If speech is done, stop sending audio.
                if (!this.privDialogIsDisposed &&
                    !this.privDialogRequestSession.isSpeechEnded &&
                    this.privDialogRequestSession.isRecognizing &&
                    this.privDialogRequestSession.recogNumber === startRecogNumber) {
                    this.fetchDialogConnection().on((connection) => {
                        audioStreamNode.read().on((audioStreamChunk) => {
                            // we have a new audio chunk to upload.
                            if (this.privDialogRequestSession.isSpeechEnded) {
                                // If service already recognized audio end then don't send any more audio
                                deferred.resolve(true);
                                return;
                            }
                            let payload;
                            let sendDelay;
                            if (!audioStreamChunk || audioStreamChunk.isEnd) {
                                payload = null;
                                sendDelay = 0;
                            }
                            else {
                                payload = audioStreamChunk.buffer;
                                this.privDialogRequestSession.onAudioSent(payload.byteLength);
                                if (maxSendUnthrottledBytes >= this.privDialogRequestSession.bytesSent) {
                                    sendDelay = 0;
                                }
                                else {
                                    sendDelay = Math.max(0, nextSendTime - Date.now());
                                }
                            }
                            // Are we ready to send, or need we delay more?
                            setTimeout(() => {
                                if (payload !== null) {
                                    nextSendTime = Date.now() + (payload.byteLength * 1000 / (audioFormat.avgBytesPerSec * 2));
                                }
                                const uploaded = connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_6__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Binary, "audio", this.privDialogRequestSession.requestId, null, payload));
                                if (audioStreamChunk && !audioStreamChunk.isEnd) {
                                    uploaded.continueWith((_) => {
                                        // Regardless of success or failure, schedule the next upload.
                                        // If the underlying connection was broken, the next cycle will
                                        // get a new connection and re-transmit missing audio automatically.
                                        readAndUploadCycle();
                                    });
                                }
                                else {
                                    // the audio stream has been closed, no need to schedule next
                                    // read-upload cycle.
                                    this.privDialogRequestSession.onSpeechEnded();
                                    deferred.resolve(true);
                                }
                            }, sendDelay);
                        }, (error) => {
                            if (this.privDialogRequestSession.isSpeechEnded) {
                                // For whatever reason, Reject is used to remove queue subscribers inside
                                // the Queue.DrainAndDispose invoked from DetachAudioNode down below, which
                                // means that sometimes things can be rejected in normal circumstances, without
                                // any errors.
                                deferred.resolve(true); // TODO: remove the argument, it's is completely meaningless.
                            }
                            else {
                                // Only reject, if there was a proper error.
                                deferred.reject(error);
                            }
                        });
                    }, (error) => {
                        deferred.reject(error);
                    });
                }
            };
            readAndUploadCycle();
            return deferred.promise();
        };
        this.receiveDialogMessageOverride = (successCallback, errorCallBack) => {
            // we won't rely on the cascading promises of the connection since we want to continually be available to receive messages
            const communicationCustodian = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Deferred"]();
            this.fetchDialogConnection().on((connection) => {
                return connection.read()
                    .onSuccessContinueWithPromise((message) => {
                    const isDisposed = this.isDisposed();
                    const terminateMessageLoop = (!this.isDisposed() && this.terminateMessageLoop);
                    if (isDisposed || terminateMessageLoop) {
                        // We're done.
                        communicationCustodian.resolve(undefined);
                        return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(undefined);
                    }
                    if (!message) {
                        return this.receiveDialogMessageOverride();
                    }
                    const connectionMessage = _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_6__["SpeechConnectionMessage"].fromConnectionMessage(message);
                    switch (connectionMessage.path.toLowerCase()) {
                        case "turn.start":
                            {
                                const turnRequestId = connectionMessage.requestId.toUpperCase();
                                const audioSessionReqId = this.privDialogRequestSession.requestId.toUpperCase();
                                // turn started by the service
                                if (turnRequestId !== audioSessionReqId) {
                                    this.privTurnStateManager.StartTurn(turnRequestId);
                                }
                            }
                            break;
                        case "speech.startdetected":
                            const speechStartDetected = _Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechDetected"].fromJSON(connectionMessage.textBody);
                            const speechStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionEventArgs"](speechStartDetected.Offset, this.privDialogRequestSession.sessionId);
                            if (!!this.privRecognizer.speechStartDetected) {
                                this.privRecognizer.speechStartDetected(this.privRecognizer, speechStartEventArgs);
                            }
                            break;
                        case "speech.enddetected":
                            let json;
                            if (connectionMessage.textBody.length > 0) {
                                json = connectionMessage.textBody;
                            }
                            else {
                                // If the request was empty, the JSON returned is empty.
                                json = "{ Offset: 0 }";
                            }
                            const speechStopDetected = _Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechDetected"].fromJSON(json);
                            this.privDialogRequestSession.onServiceRecognized(speechStopDetected.Offset + this.privDialogRequestSession.currentTurnAudioOffset);
                            const speechStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionEventArgs"](speechStopDetected.Offset + this.privDialogRequestSession.currentTurnAudioOffset, this.privDialogRequestSession.sessionId);
                            if (!!this.privRecognizer.speechEndDetected) {
                                this.privRecognizer.speechEndDetected(this.privRecognizer, speechStopEventArgs);
                            }
                            break;
                        case "turn.end":
                            {
                                const turnEndRequestId = connectionMessage.requestId.toUpperCase();
                                const audioSessionReqId = this.privDialogRequestSession.requestId.toUpperCase();
                                // turn started by the service
                                if (turnEndRequestId !== audioSessionReqId) {
                                    this.privTurnStateManager.CompleteTurn(turnEndRequestId);
                                }
                                else {
                                    // Audio session turn
                                    const sessionStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SessionEventArgs"](this.privDialogRequestSession.sessionId);
                                    this.privDialogRequestSession.onServiceTurnEndResponse(false);
                                    if (this.privDialogRequestSession.isSpeechEnded) {
                                        if (!!this.privRecognizer.sessionStopped) {
                                            this.privRecognizer.sessionStopped(this.privRecognizer, sessionStopEventArgs);
                                        }
                                    }
                                    // signal that it's OK to start a new turn
                                    this.isTurnComplete = true;
                                    // report result to promise.
                                    if (!!this.privSuccessCallback && this.privLastResult) {
                                        try {
                                            this.privSuccessCallback(this.privLastResult);
                                            this.privLastResult = null;
                                        }
                                        catch (e) {
                                            if (!!errorCallBack) {
                                                errorCallBack(e);
                                            }
                                        }
                                        // Only invoke the call back once.
                                        // and if it's successful don't invoke the
                                        // error after that.
                                        this.privSuccessCallback = undefined;
                                        errorCallBack = undefined;
                                    }
                                }
                            }
                            break;
                        default:
                            this.processTypeSpecificMessages(connectionMessage, successCallback, errorCallBack);
                    }
                    return this.receiveDialogMessageOverride();
                });
            }, (error) => {
                this.terminateMessageLoop = true;
            });
            return communicationCustodian.promise();
        };
        this.fetchDialogConnection = () => {
            return this.configConnection();
        };
        this.sendAgentConfig = (connection) => {
            if (this.agentConfig && !this.agentConfigSent) {
                const agentConfigJson = this.agentConfig.toJsonString();
                this.agentConfigSent = true;
                return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_6__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text, "agent.config", this.privDialogRequestSession.requestId, "application/json", agentConfigJson));
            }
            return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(true);
        };
        this.sendAgentContext = (connection) => {
            const guid = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createGuid"])();
            const agentContext = {
                channelData: "",
                context: {
                    interactionId: guid
                },
                version: 0.5
            };
            const agentContextJson = JSON.stringify(agentContext);
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_6__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text, "speech.agent.context", this.privDialogRequestSession.requestId, "application/json", agentContextJson));
        };
        this.privDialogServiceConnector = dialogServiceConnector;
        this.privDialogAuthentication = authentication;
        this.receiveMessageOverride = this.receiveDialogMessageOverride;
        this.privTurnStateManager = new _DialogServiceTurnStateManager__WEBPACK_IMPORTED_MODULE_3__["DialogServiceTurnStateManager"]();
        this.recognizeOverride = this.listenOnce;
        this.connectImplOverride = this.dialogConnectImpl;
        this.configConnectionOverride = this.configConnection;
        this.fetchConnectionOverride = this.fetchDialogConnection;
        this.disconnectOverride = this.privDisconnect;
        this.privDialogAudioSource = audioSource;
        this.privDialogRequestSession = new _Exports__WEBPACK_IMPORTED_MODULE_4__["RequestSession"](audioSource.id());
        this.privDialogConnectionFactory = connectionFactory;
        this.privDialogIsDisposed = false;
        this.agentConfigSent = false;
        this.privLastResult = null;
        this.isTurnComplete = true;
    }
    isDisposed() {
        return this.privDialogIsDisposed;
    }
    dispose(reason) {
        this.privDialogIsDisposed = true;
        if (this.privConnectionConfigPromise) {
            this.privConnectionConfigPromise.onSuccessContinueWith((connection) => {
                connection.dispose(reason);
            });
        }
    }
    privDisconnect() {
        this.cancelRecognition(this.privDialogRequestSession.sessionId, this.privDialogRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError, "Disconnecting", undefined);
        this.terminateMessageLoop = true;
        this.agentConfigSent = false;
        if (this.privDialogConnectionPromise.result().isCompleted) {
            if (!this.privDialogConnectionPromise.result().isError) {
                this.privDialogConnectionPromise.result().result.dispose();
                this.privDialogConnectionPromise = null;
            }
        }
        else {
            this.privDialogConnectionPromise.onSuccessContinueWith((connection) => {
                connection.dispose();
            });
        }
    }
    processTypeSpecificMessages(connectionMessage, successCallback, errorCallBack) {
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]();
        if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text) {
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        let result;
        switch (connectionMessage.path.toLowerCase()) {
            case "speech.phrase":
                const speechPhrase = _Exports__WEBPACK_IMPORTED_MODULE_4__["SimpleSpeechPhrase"].fromJSON(connectionMessage.textBody);
                this.privDialogRequestSession.onPhraseRecognized(this.privDialogRequestSession.currentTurnAudioOffset + speechPhrase.Offset + speechPhrase.Duration);
                if (speechPhrase.RecognitionStatus === _Exports__WEBPACK_IMPORTED_MODULE_4__["RecognitionStatus"].Success) {
                    const args = this.fireEventForResult(speechPhrase, resultProps);
                    this.privLastResult = args.result;
                    if (!!this.privDialogServiceConnector.recognized) {
                        try {
                            this.privDialogServiceConnector.recognized(this.privDialogServiceConnector, args);
                            /* tslint:disable:no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                }
                break;
            case "speech.hypothesis":
                const hypothesis = _Exports__WEBPACK_IMPORTED_MODULE_4__["SpeechHypothesis"].fromJSON(connectionMessage.textBody);
                const offset = hypothesis.Offset + this.privDialogRequestSession.currentTurnAudioOffset;
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionResult"](this.privDialogRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].RecognizingSpeech, hypothesis.Text, hypothesis.Duration, offset, undefined, connectionMessage.textBody, resultProps);
                this.privDialogRequestSession.onHypothesis(offset);
                const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionEventArgs"](result, hypothesis.Duration, this.privDialogRequestSession.sessionId);
                if (!!this.privDialogServiceConnector.recognizing) {
                    try {
                        this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector, ev);
                        /* tslint:disable:no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            case "audio":
                {
                    const audioRequestId = connectionMessage.requestId.toUpperCase();
                    const turn = this.privTurnStateManager.GetTurn(audioRequestId);
                    try {
                        // Empty binary message signals end of stream.
                        if (!connectionMessage.binaryBody) {
                            turn.endAudioStream();
                        }
                        else {
                            turn.audioStream.write(connectionMessage.binaryBody);
                        }
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            case "response":
                {
                    const responseRequestId = connectionMessage.requestId.toUpperCase();
                    const activityPayload = _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_5__["ActivityPayloadResponse"].fromJSON(connectionMessage.textBody);
                    const turn = this.privTurnStateManager.GetTurn(responseRequestId);
                    // update the conversation Id
                    if (activityPayload.conversationId) {
                        const updateAgentConfig = this.agentConfig.get();
                        updateAgentConfig.botInfo.conversationId = activityPayload.conversationId;
                        this.agentConfig.set(updateAgentConfig);
                    }
                    const pullAudioOutputStream = turn.processActivityPayload(activityPayload);
                    const activity = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ActivityReceivedEventArgs"](activityPayload.messagePayload, pullAudioOutputStream);
                    if (!!this.privDialogServiceConnector.activityReceived) {
                        try {
                            this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector, activity);
                            /* tslint:disable:no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                }
                break;
            default:
                break;
        }
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error, cancelRecoCallback) {
        this.terminateMessageLoop = true;
        if (!!this.privDialogRequestSession.isRecognizing) {
            this.privDialogRequestSession.onStopRecognizing();
        }
        if (!!this.privDialogServiceConnector.canceled) {
            const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]();
            properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__["CancellationErrorCodePropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"][errorCode]);
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionCanceledEventArgs"](cancellationReason, error, errorCode, undefined, sessionId);
            try {
                this.privDialogServiceConnector.canceled(this.privDialogServiceConnector, cancelEvent);
                /* tslint:disable:no-empty */
            }
            catch (_a) { }
            if (!!cancelRecoCallback) {
                const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionResult"](undefined, // ResultId
                _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["ResultReason"].Canceled, undefined, // Text
                undefined, // Druation
                undefined, // Offset
                error, undefined, // Json
                properties);
                try {
                    cancelRecoCallback(result);
                    /* tslint:disable:no-empty */
                }
                catch (_b) { }
            }
        }
    }
    // Establishes a websocket connection to the end point.
    dialogConnectImpl(isUnAuthorized = false) {
        if (this.privDialogConnectionPromise) {
            if (this.privDialogConnectionPromise.result().isCompleted &&
                (this.privDialogConnectionPromise.result().isError
                    || this.privDialogConnectionPromise.result().result.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ConnectionState"].Disconnected)) {
                this.agentConfigSent = false;
                this.privDialogConnectionPromise = null;
            }
            else {
                return this.privDialogConnectionPromise;
            }
        }
        this.privDialogAuthFetchEventId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        // keep the connectionId for reconnect events
        if (this.privConnectionId === undefined) {
            this.privConnectionId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        }
        this.privDialogRequestSession.onPreConnectionStart(this.privDialogAuthFetchEventId, this.privConnectionId);
        const authPromise = isUnAuthorized ? this.privDialogAuthentication.fetchOnExpiry(this.privDialogAuthFetchEventId) : this.privDialogAuthentication.fetch(this.privDialogAuthFetchEventId);
        this.privDialogConnectionPromise = authPromise
            .continueWithPromise((result) => {
            if (result.isError) {
                this.privDialogRequestSession.onAuthCompleted(true, result.error);
                throw new Error(result.error);
            }
            else {
                this.privDialogRequestSession.onAuthCompleted(false);
            }
            const connection = this.privDialogConnectionFactory.create(this.privRecognizerConfig, result.result, this.privConnectionId);
            this.privDialogRequestSession.listenForServiceTelemetry(connection.events);
            // Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
            // it'll stop sending events.
            connection.events.attach((event) => {
                this.connectionEvents.onEvent(event);
            });
            return connection.open().onSuccessContinueWithPromise((response) => {
                if (response.statusCode === 200) {
                    this.privDialogRequestSession.onPreConnectionStart(this.privDialogAuthFetchEventId, this.privConnectionId);
                    this.privDialogRequestSession.onConnectionEstablishCompleted(response.statusCode);
                    return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(connection);
                }
                else if (response.statusCode === 403 && !isUnAuthorized) {
                    return this.dialogConnectImpl(true);
                }
                else {
                    this.privDialogRequestSession.onConnectionEstablishCompleted(response.statusCode, response.reason);
                    return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromError(`Unable to contact server. StatusCode: ${response.statusCode}, ${this.privRecognizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint)} Reason: ${response.reason}`);
                }
            });
        });
        this.privConnectionLoop = this.startMessageLoop();
        return this.privDialogConnectionPromise;
    }
    startMessageLoop() {
        this.terminateMessageLoop = false;
        const messageRetrievalPromise = this.receiveDialogMessageOverride();
        return messageRetrievalPromise.on((r) => {
            return true;
        }, (error) => {
            this.cancelRecognition(this.privDialogRequestSession.sessionId, this.privDialogRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].RuntimeError, error, this.privSuccessCallback);
        });
    }
    // Takes an established websocket connection to the endpoint and sends speech configuration information.
    configConnection() {
        if (this.privConnectionConfigPromise) {
            if (this.privConnectionConfigPromise.result().isCompleted &&
                (this.privConnectionConfigPromise.result().isError
                    || this.privConnectionConfigPromise.result().result.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ConnectionState"].Disconnected)) {
                this.privConnectionConfigPromise = null;
                return this.configConnection();
            }
            else {
                return this.privConnectionConfigPromise;
            }
        }
        this.privConnectionConfigPromise = this.dialogConnectImpl().onSuccessContinueWithPromise((connection) => {
            return this.sendSpeechServiceConfig(connection, this.privDialogRequestSession, this.privRecognizerConfig.SpeechServiceConfig.serialize())
                .onSuccessContinueWithPromise((_) => {
                return this.sendAgentConfig(connection).onSuccessContinueWith((_) => {
                    return connection;
                });
            });
        });
        return this.privConnectionConfigPromise;
    }
    sendPreAudioMessages() {
        this.fetchDialogConnection().onSuccessContinueWith((connection) => {
            this.sendAgentContext(connection);
        });
    }
    fireEventForResult(serviceResult, properties) {
        const resultReason = _Exports__WEBPACK_IMPORTED_MODULE_4__["EnumTranslation"].implTranslateRecognitionResult(serviceResult.RecognitionStatus);
        const offset = serviceResult.Offset + this.privDialogRequestSession.currentTurnAudioOffset;
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionResult"](this.privDialogRequestSession.requestId, resultReason, serviceResult.DisplayText, serviceResult.Duration, offset, undefined, JSON.stringify(serviceResult), properties);
        const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechRecognitionEventArgs"](result, offset, this.privDialogRequestSession.sessionId);
        return ev;
    }
}

//# sourceMappingURL=DialogServiceAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnState.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnState.js ***!
  \************************************************************************************************************************/
/*! exports provided: DialogServiceTurnState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceTurnState", function() { return DialogServiceTurnState; });
/* harmony import */ var _sdk_Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Audio/AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ServiceMessages/ActivityResponsePayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class DialogServiceTurnState {
    constructor(manager, requestId) {
        this.privRequestId = requestId;
        this.privIsCompleted = false;
        this.privAudioStream = null;
        this.privTurnManager = manager;
        this.resetTurnEndTimeout();
        // tslint:disable-next-line:no-console
        // console.info("DialogServiceTurnState debugturn start:" + this.privRequestId);
    }
    get audioStream() {
        // Called when is needed to stream.
        this.resetTurnEndTimeout();
        return this.privAudioStream;
    }
    processActivityPayload(payload) {
        if (payload.messageDataStreamType === _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_1__["MessageDataStreamType"].TextToSpeechAudio) {
            this.privAudioStream = _sdk_Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_0__["AudioOutputStream"].createPullStream();
            // tslint:disable-next-line:no-console
            // console.info("Audio start debugturn:" + this.privRequestId);
        }
        return this.privAudioStream;
    }
    endAudioStream() {
        if (this.privAudioStream !== null && !this.privAudioStream.isClosed) {
            this.privAudioStream.close();
        }
    }
    complete() {
        if (this.privTimeoutToken !== undefined) {
            clearTimeout(this.privTimeoutToken);
        }
        this.endAudioStream();
    }
    resetTurnEndTimeout() {
        if (this.privTimeoutToken !== undefined) {
            clearTimeout(this.privTimeoutToken);
        }
        // tslint:disable-next-line:no-console
        // console.info("Timeout reset debugturn:" + this.privRequestId);
        this.privTimeoutToken = setTimeout(() => {
            // tslint:disable-next-line:no-console
            // console.info("Timeout complete debugturn:" + this.privRequestId);
            this.privTurnManager.CompleteTurn(this.privRequestId);
            return;
        }, 2000);
    }
}

//# sourceMappingURL=DialogServiceTurnState.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnStateManager.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnStateManager.js ***!
  \*******************************************************************************************************************************/
/*! exports provided: DialogServiceTurnStateManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceTurnStateManager", function() { return DialogServiceTurnStateManager; });
/* harmony import */ var _common_Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _DialogServiceTurnState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DialogServiceTurnState */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnState.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class DialogServiceTurnStateManager {
    constructor() {
        this.privTurnMap = new Map();
        return;
    }
    StartTurn(id) {
        if (this.privTurnMap.has(id)) {
            throw new _common_Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Service error: There is already a turn with id:" + id);
        }
        const turnState = new _DialogServiceTurnState__WEBPACK_IMPORTED_MODULE_1__["DialogServiceTurnState"](this, id);
        this.privTurnMap.set(id, turnState);
        return this.privTurnMap.get(id);
    }
    GetTurn(id) {
        return this.privTurnMap.get(id);
    }
    CompleteTurn(id) {
        if (!this.privTurnMap.has(id)) {
            throw new _common_Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Service error: Received turn end for an unknown turn id:" + id);
        }
        const turnState = this.privTurnMap.get(id);
        turnState.complete();
        this.privTurnMap.delete(id);
        return turnState;
    }
}

//# sourceMappingURL=DialogServiceTurnStateManager.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarBuilder.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarBuilder.js ***!
  \***********************************************************************************************************************/
/*! exports provided: DynamicGrammarBuilder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DynamicGrammarBuilder", function() { return DynamicGrammarBuilder; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Responsible for building the object to be sent to the speech service to support dynamic grammars.
 * @class DynamicGrammarBuilder
 */
class DynamicGrammarBuilder {
    // Adds one more reference phrases to the dynamic grammar to send.
    // All added phrases are generic phrases.
    addPhrase(phrase) {
        if (!this.privPhrases) {
            this.privPhrases = [];
        }
        if (phrase instanceof Array) {
            this.privPhrases = this.privPhrases.concat(phrase);
        }
        else {
            this.privPhrases.push(phrase);
        }
    }
    // Clears all phrases stored in the current object.
    clearPhrases() {
        this.privPhrases = undefined;
    }
    // Adds one or more reference grammars to the current grammar.
    addReferenceGrammar(grammar) {
        if (!this.privGrammars) {
            this.privGrammars = [];
        }
        if (grammar instanceof Array) {
            this.privGrammars = this.privGrammars.concat(grammar);
        }
        else {
            this.privGrammars.push(grammar);
        }
    }
    // clears all grammars stored on the recognizer.
    clearGrammars() {
        this.privGrammars = undefined;
    }
    // Generates an object that represents the dynamic grammar used by the Speech Service.
    // This is done by building an object with the correct layout based on the phrases and reference grammars added to this instance
    // of a DynamicGrammarBuilder
    generateGrammarObject() {
        if (this.privGrammars === undefined && this.privPhrases === undefined) {
            return undefined;
        }
        const retObj = {};
        retObj.ReferenceGrammars = this.privGrammars;
        if (undefined !== this.privPhrases && 0 !== this.privPhrases.length) {
            const retPhrases = [];
            this.privPhrases.forEach((value, index, array) => {
                retPhrases.push({
                    Text: value,
                });
            });
            retObj.Groups = [{ Type: "Generic", Items: retPhrases }];
        }
        return retObj;
    }
}

//# sourceMappingURL=DynamicGrammarBuilder.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js ***!
  \*****************************************************************************************************************/
/*! exports provided: EnumTranslation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EnumTranslation", function() { return EnumTranslation; });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class EnumTranslation {
    static implTranslateRecognitionResult(recognitionStatus) {
        let reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].Canceled;
        switch (recognitionStatus) {
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Success:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].RecognizedSpeech;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].NoMatch:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].InitialSilenceTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].BabbleTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].EndOfDictation:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].NoMatch;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Error:
            default:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].Canceled;
                break;
        }
        return reason;
    }
    static implTranslateCancelResult(recognitionStatus) {
        let reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationReason"].EndOfStream;
        switch (recognitionStatus) {
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Success:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].EndOfDictation:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].NoMatch:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationReason"].EndOfStream;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].InitialSilenceTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].BabbleTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Error:
            default:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationReason"].Error;
                break;
        }
        return reason;
    }
    static implTranslateCancelErrorCode(recognitionStatus) {
        let reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].NoError;
        switch (recognitionStatus) {
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Error:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].ServiceError;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].TooManyRequests:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].TooManyRequests;
                break;
            default:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"].NoError;
                break;
        }
        return reason;
    }
}

//# sourceMappingURL=EnumTranslation.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js ***!
  \*********************************************************************************************************/
/*! exports provided: OutputFormatPropertyName, CancellationErrorCodePropertyName, ServicePropertiesPropertyName, ForceDictationPropertyName, CognitiveSubscriptionKeyAuthentication, CognitiveTokenAuthentication, AuthInfo, IntentConnectionFactory, SpeechRecognitionEvent, RecognitionTriggeredEvent, ListeningStartedEvent, ConnectingToServiceEvent, RecognitionStartedEvent, RecognitionCompletionStatus, RecognitionEndedEvent, ServiceRecognizerBase, RecognitionMode, SpeechResultFormat, RecognizerConfig, SpeechServiceConfig, Context, System, OS, Device, connectivity, type, WebsocketMessageFormatter, SpeechConnectionFactory, TranslationConnectionFactory, EnumTranslation, SynthesisStatus, RecognitionStatus, TranslationSynthesisEnd, TranslationHypothesis, TranslationPhrase, TranslationServiceRecognizer, SpeechDetected, SpeechHypothesis, SpeechServiceRecognizer, DetailedSpeechPhrase, SimpleSpeechPhrase, AddedLmIntent, IntentServiceRecognizer, IntentResponse, RequestSession, SpeechContext, DynamicGrammarBuilder, DialogServiceAdapter, AgentConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OutputFormatPropertyName", function() { return OutputFormatPropertyName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CancellationErrorCodePropertyName", function() { return CancellationErrorCodePropertyName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServicePropertiesPropertyName", function() { return ServicePropertiesPropertyName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ForceDictationPropertyName", function() { return ForceDictationPropertyName; });
/* harmony import */ var _CognitiveSubscriptionKeyAuthentication__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CognitiveSubscriptionKeyAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CognitiveSubscriptionKeyAuthentication", function() { return _CognitiveSubscriptionKeyAuthentication__WEBPACK_IMPORTED_MODULE_0__["CognitiveSubscriptionKeyAuthentication"]; });

/* harmony import */ var _CognitiveTokenAuthentication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CognitiveTokenAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CognitiveTokenAuthentication", function() { return _CognitiveTokenAuthentication__WEBPACK_IMPORTED_MODULE_1__["CognitiveTokenAuthentication"]; });

/* harmony import */ var _IAuthentication__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AuthInfo", function() { return _IAuthentication__WEBPACK_IMPORTED_MODULE_2__["AuthInfo"]; });

/* harmony import */ var _IntentConnectionFactory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IntentConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentConnectionFactory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentConnectionFactory", function() { return _IntentConnectionFactory__WEBPACK_IMPORTED_MODULE_3__["IntentConnectionFactory"]; });

/* harmony import */ var _RecognitionEvents__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_4__["SpeechRecognitionEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionTriggeredEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_4__["RecognitionTriggeredEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ListeningStartedEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_4__["ListeningStartedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectingToServiceEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_4__["ConnectingToServiceEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionStartedEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_4__["RecognitionStartedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionCompletionStatus", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_4__["RecognitionCompletionStatus"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionEndedEvent", function() { return _RecognitionEvents__WEBPACK_IMPORTED_MODULE_4__["RecognitionEndedEvent"]; });

/* harmony import */ var _ServiceRecognizerBase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ServiceRecognizerBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ServiceRecognizerBase", function() { return _ServiceRecognizerBase__WEBPACK_IMPORTED_MODULE_5__["ServiceRecognizerBase"]; });

/* harmony import */ var _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RecognizerConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionMode", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__["RecognitionMode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechResultFormat", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__["SpeechResultFormat"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognizerConfig", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__["RecognizerConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechServiceConfig", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__["SpeechServiceConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Context", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__["Context"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "System", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__["System"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OS", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__["OS"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Device", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__["Device"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "connectivity", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__["connectivity"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "type", function() { return _RecognizerConfig__WEBPACK_IMPORTED_MODULE_6__["type"]; });

/* harmony import */ var _WebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./WebsocketMessageFormatter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebsocketMessageFormatter", function() { return _WebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_7__["WebsocketMessageFormatter"]; });

/* harmony import */ var _SpeechConnectionFactory__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SpeechConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechConnectionFactory", function() { return _SpeechConnectionFactory__WEBPACK_IMPORTED_MODULE_8__["SpeechConnectionFactory"]; });

/* harmony import */ var _TranslationConnectionFactory__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./TranslationConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationConnectionFactory", function() { return _TranslationConnectionFactory__WEBPACK_IMPORTED_MODULE_9__["TranslationConnectionFactory"]; });

/* harmony import */ var _EnumTranslation__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./EnumTranslation */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EnumTranslation", function() { return _EnumTranslation__WEBPACK_IMPORTED_MODULE_10__["EnumTranslation"]; });

/* harmony import */ var _ServiceMessages_Enums__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ServiceMessages/Enums */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SynthesisStatus", function() { return _ServiceMessages_Enums__WEBPACK_IMPORTED_MODULE_11__["SynthesisStatus"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionStatus", function() { return _ServiceMessages_Enums__WEBPACK_IMPORTED_MODULE_11__["RecognitionStatus"]; });

/* harmony import */ var _ServiceMessages_TranslationSynthesisEnd__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ServiceMessages/TranslationSynthesisEnd */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisEnd", function() { return _ServiceMessages_TranslationSynthesisEnd__WEBPACK_IMPORTED_MODULE_12__["TranslationSynthesisEnd"]; });

/* harmony import */ var _ServiceMessages_TranslationHypothesis__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ServiceMessages/TranslationHypothesis */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationHypothesis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationHypothesis", function() { return _ServiceMessages_TranslationHypothesis__WEBPACK_IMPORTED_MODULE_13__["TranslationHypothesis"]; });

/* harmony import */ var _ServiceMessages_TranslationPhrase__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./ServiceMessages/TranslationPhrase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationPhrase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationPhrase", function() { return _ServiceMessages_TranslationPhrase__WEBPACK_IMPORTED_MODULE_14__["TranslationPhrase"]; });

/* harmony import */ var _TranslationServiceRecognizer__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./TranslationServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationServiceRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationServiceRecognizer", function() { return _TranslationServiceRecognizer__WEBPACK_IMPORTED_MODULE_15__["TranslationServiceRecognizer"]; });

/* harmony import */ var _ServiceMessages_SpeechDetected__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./ServiceMessages/SpeechDetected */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechDetected", function() { return _ServiceMessages_SpeechDetected__WEBPACK_IMPORTED_MODULE_16__["SpeechDetected"]; });

/* harmony import */ var _ServiceMessages_SpeechHypothesis__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./ServiceMessages/SpeechHypothesis */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechHypothesis", function() { return _ServiceMessages_SpeechHypothesis__WEBPACK_IMPORTED_MODULE_17__["SpeechHypothesis"]; });

/* harmony import */ var _SpeechServiceRecognizer__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./SpeechServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechServiceRecognizer", function() { return _SpeechServiceRecognizer__WEBPACK_IMPORTED_MODULE_18__["SpeechServiceRecognizer"]; });

/* harmony import */ var _ServiceMessages_DetailedSpeechPhrase__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./ServiceMessages/DetailedSpeechPhrase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DetailedSpeechPhrase", function() { return _ServiceMessages_DetailedSpeechPhrase__WEBPACK_IMPORTED_MODULE_19__["DetailedSpeechPhrase"]; });

/* harmony import */ var _ServiceMessages_SimpleSpeechPhrase__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./ServiceMessages/SimpleSpeechPhrase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleSpeechPhrase", function() { return _ServiceMessages_SimpleSpeechPhrase__WEBPACK_IMPORTED_MODULE_20__["SimpleSpeechPhrase"]; });

/* harmony import */ var _AddedLmIntent__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./AddedLmIntent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AddedLmIntent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AddedLmIntent", function() { return _AddedLmIntent__WEBPACK_IMPORTED_MODULE_21__["AddedLmIntent"]; });

/* harmony import */ var _IntentServiceRecognizer__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./IntentServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentServiceRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentServiceRecognizer", function() { return _IntentServiceRecognizer__WEBPACK_IMPORTED_MODULE_22__["IntentServiceRecognizer"]; });

/* harmony import */ var _ServiceMessages_IntentResponse__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./ServiceMessages/IntentResponse */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/IntentResponse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentResponse", function() { return _ServiceMessages_IntentResponse__WEBPACK_IMPORTED_MODULE_23__["IntentResponse"]; });

/* harmony import */ var _RequestSession__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./RequestSession */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RequestSession.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RequestSession", function() { return _RequestSession__WEBPACK_IMPORTED_MODULE_24__["RequestSession"]; });

/* harmony import */ var _SpeechContext__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./SpeechContext */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechContext.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechContext", function() { return _SpeechContext__WEBPACK_IMPORTED_MODULE_25__["SpeechContext"]; });

/* harmony import */ var _DynamicGrammarBuilder__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./DynamicGrammarBuilder */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarBuilder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DynamicGrammarBuilder", function() { return _DynamicGrammarBuilder__WEBPACK_IMPORTED_MODULE_26__["DynamicGrammarBuilder"]; });

/* harmony import */ var _DialogServiceAdapter__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./DialogServiceAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceAdapter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogServiceAdapter", function() { return _DialogServiceAdapter__WEBPACK_IMPORTED_MODULE_27__["DialogServiceAdapter"]; });

/* harmony import */ var _AgentConfig__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./AgentConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AgentConfig", function() { return _AgentConfig__WEBPACK_IMPORTED_MODULE_28__["AgentConfig"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Make sure not to export internal modules.
//





























const OutputFormatPropertyName = "OutputFormat";
const CancellationErrorCodePropertyName = "CancellationErrorCode";
const ServicePropertiesPropertyName = "ServiceProperties";
const ForceDictationPropertyName = "ForceDication";

//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js ***!
  \*****************************************************************************************************************/
/*! exports provided: AuthInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthInfo", function() { return AuthInfo; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class AuthInfo {
    constructor(headerName, token) {
        this.privHeaderName = headerName;
        this.privToken = token;
    }
    get headerName() {
        return this.privHeaderName;
    }
    get token() {
        return this.privToken;
    }
}

//# sourceMappingURL=IAuthentication.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentConnectionFactory.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentConnectionFactory.js ***!
  \*************************************************************************************************************************/
/*! exports provided: IntentConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentConnectionFactory", function() { return IntentConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.




const TestHooksParamName = "testhooks";
const ConnectionIdHeader = "X-ConnectionId";
class IntentConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__["ConnectionFactoryBase"] {
    constructor() {
        super(...arguments);
        this.create = (config, authInfo, connectionId) => {
            let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Endpoint);
            if (!endpoint) {
                const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_IntentRegion);
                endpoint = "wss://speech.platform.bing.com/speech/" + this.getSpeechRegionFromIntentRegion(region) + "/recognition/interactive/cognitiveservices/v1";
            }
            const queryParams = {
                format: "simple",
                language: config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_RecoLanguage),
            };
            this.setCommonUrlParams(config, queryParams, endpoint);
            const headers = {};
            headers[authInfo.headerName] = authInfo.token;
            headers[ConnectionIdHeader] = connectionId;
            return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_3__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), connectionId);
        };
    }
    getSpeechRegionFromIntentRegion(intentRegion) {
        switch (intentRegion) {
            case "West US":
            case "US West":
            case "westus":
                return "uswest";
            case "West US 2":
            case "US West 2":
            case "westus2":
                return "uswest2";
            case "South Central US":
            case "US South Central":
            case "southcentralus":
                return "ussouthcentral";
            case "West Central US":
            case "US West Central":
            case "westcentralus":
                return "uswestcentral";
            case "East US":
            case "US East":
            case "eastus":
                return "useast";
            case "East US 2":
            case "US East 2":
            case "eastus2":
                return "useast2";
            case "West Europe":
            case "Europe West":
            case "westeurope":
                return "europewest";
            case "North Europe":
            case "Europe North":
            case "northeurope":
                return "europenorth";
            case "Brazil South":
            case "South Brazil":
            case "southbrazil":
                return "brazilsouth";
            case "Australia East":
            case "East Australia":
            case "eastaustralia":
                return "australiaeast";
            case "Southeast Asia":
            case "Asia Southeast":
            case "southeastasia":
                return "asiasoutheast";
            case "East Asia":
            case "Asia East":
            case "eastasia":
                return "asiaeast";
            default:
                return intentRegion;
        }
    }
}

//# sourceMappingURL=IntentConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentServiceRecognizer.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentServiceRecognizer.js ***!
  \*************************************************************************************************************************/
/*! exports provided: IntentServiceRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentServiceRecognizer", function() { return IntentServiceRecognizer; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



// tslint:disable-next-line:max-classes-per-file
class IntentServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_2__["ServiceRecognizerBase"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, recognizer);
        this.privIntentRecognizer = recognizer;
        this.privIntentDataSent = false;
    }
    setIntents(addedIntents, umbrellaIntent) {
        this.privAddedLmIntents = addedIntents;
        this.privUmbrellaIntent = umbrellaIntent;
        this.privIntentDataSent = true;
    }
    processTypeSpecificMessages(connectionMessage, successCallback, errorCallBack) {
        let result;
        let ev;
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        switch (connectionMessage.path.toLowerCase()) {
            case "speech.hypothesis":
                const speechHypothesis = _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechHypothesis"].fromJSON(connectionMessage.textBody);
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionResult"](undefined, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].RecognizingIntent, speechHypothesis.Text, speechHypothesis.Duration, speechHypothesis.Offset + this.privRequestSession.currentTurnAudioOffset, undefined, connectionMessage.textBody, resultProps);
                this.privRequestSession.onHypothesis(result.offset);
                ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionEventArgs"](result, speechHypothesis.Offset + this.privRequestSession.currentTurnAudioOffset, this.privRequestSession.sessionId);
                if (!!this.privIntentRecognizer.recognizing) {
                    try {
                        this.privIntentRecognizer.recognizing(this.privIntentRecognizer, ev);
                        /* tslint:disable:no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            case "speech.phrase":
                const simple = _Exports__WEBPACK_IMPORTED_MODULE_2__["SimpleSpeechPhrase"].fromJSON(connectionMessage.textBody);
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionResult"](undefined, this.privRequestSession.requestId, _Exports__WEBPACK_IMPORTED_MODULE_2__["EnumTranslation"].implTranslateRecognitionResult(simple.RecognitionStatus), simple.DisplayText, simple.Duration, simple.Offset + this.privRequestSession.currentTurnAudioOffset, undefined, connectionMessage.textBody, resultProps);
                ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionEventArgs"](result, result.offset, this.privRequestSession.sessionId);
                const sendEvent = () => {
                    if (!!this.privIntentRecognizer.recognized) {
                        try {
                            this.privIntentRecognizer.recognized(this.privIntentRecognizer, ev);
                            /* tslint:disable:no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    // report result to promise.
                    if (!!successCallback) {
                        try {
                            successCallback(result);
                        }
                        catch (e) {
                            if (!!errorCallBack) {
                                errorCallBack(e);
                            }
                        }
                        // Only invoke the call back once.
                        // and if it's successful don't invoke the
                        // error after that.
                        successCallback = undefined;
                        errorCallBack = undefined;
                    }
                };
                // If intent data was sent, the terminal result for this recognizer is an intent being found.
                // If no intent data was sent, the terminal event is speech recognition being successful.
                if (false === this.privIntentDataSent || _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].NoMatch === ev.result.reason) {
                    // Advance the buffers.
                    this.privRequestSession.onPhraseRecognized(ev.offset + ev.result.duration);
                    sendEvent();
                }
                else {
                    // Squirrel away the args, when the response event arrives it will build upon them
                    // and then return
                    this.privPendingIntentArgs = ev;
                }
                break;
            case "response":
                // Response from LUIS
                ev = this.privPendingIntentArgs;
                this.privPendingIntentArgs = undefined;
                if (undefined === ev) {
                    if ("" === connectionMessage.textBody) {
                        // This condition happens if there is nothing but silence in the
                        // audio sent to the service.
                        return;
                    }
                    // Odd... Not sure this can happen
                    ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionEventArgs"](new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionResult"](), 0 /*TODO*/, this.privRequestSession.sessionId);
                }
                const intentResponse = _Exports__WEBPACK_IMPORTED_MODULE_2__["IntentResponse"].fromJSON(connectionMessage.textBody);
                // If LUIS didn't return anything, send the existing event, else
                // modify it to show the match.
                // See if the intent found is in the list of intents asked for.
                let addedIntent = this.privAddedLmIntents[intentResponse.topScoringIntent.intent];
                if (this.privUmbrellaIntent !== undefined) {
                    addedIntent = this.privUmbrellaIntent;
                }
                if (null !== intentResponse && addedIntent !== undefined) {
                    const intentId = addedIntent.intentName === undefined ? intentResponse.topScoringIntent.intent : addedIntent.intentName;
                    let reason = ev.result.reason;
                    if (undefined !== intentId) {
                        reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].RecognizedIntent;
                    }
                    // make sure, properties is set.
                    const properties = (undefined !== ev.result.properties) ?
                        ev.result.properties : new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
                    properties.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].LanguageUnderstandingServiceResponse_JsonResult, connectionMessage.textBody);
                    ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionEventArgs"](new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionResult"](intentId, ev.result.resultId, reason, ev.result.text, ev.result.duration, ev.result.offset, ev.result.errorDetails, ev.result.json, properties), ev.offset, ev.sessionId);
                }
                this.privRequestSession.onPhraseRecognized(ev.offset + ev.result.duration);
                if (!!this.privIntentRecognizer.recognized) {
                    try {
                        this.privIntentRecognizer.recognized(this.privIntentRecognizer, ev);
                        /* tslint:disable:no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                // report result to promise.
                if (!!successCallback) {
                    try {
                        successCallback(ev.result);
                    }
                    catch (e) {
                        if (!!errorCallBack) {
                            errorCallBack(e);
                        }
                    }
                    // Only invoke the call back once.
                    // and if it's successful don't invoke the
                    // error after that.
                    successCallback = undefined;
                    errorCallBack = undefined;
                }
                break;
            default:
                break;
        }
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error, cancelRecoCallback) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCodePropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][errorCode]);
        if (!!this.privIntentRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionCanceledEventArgs"](cancellationReason, error, errorCode, undefined, undefined, sessionId);
            try {
                this.privIntentRecognizer.canceled(this.privIntentRecognizer, cancelEvent);
                /* tslint:disable:no-empty */
            }
            catch (_a) { }
        }
        if (!!cancelRecoCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["IntentRecognitionResult"](undefined, // Intent Id
            requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled, undefined, // Text
            undefined, // Druation
            undefined, // Offset
            error, undefined, // Json
            properties);
            try {
                cancelRecoCallback(result);
                /* tslint:disable:no-empty */
            }
            catch (_b) { }
        }
    }
}

//# sourceMappingURL=IntentServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js ***!
  \*********************************************************************************************************************/
/*! exports provided: QueryParameterNames */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryParameterNames", function() { return QueryParameterNames; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class QueryParameterNames {
    static get TestHooksParamName() {
        return "testhooks";
    }
    static get ConnectionIdHeader() {
        return "X-ConnectionId";
    }
    static get DeploymentIdParamName() {
        return "cid";
    }
    static get FormatParamName() {
        return "format";
    }
    static get LanguageParamName() {
        return "language";
    }
    static get TranslationFromParamName() {
        return "from";
    }
    static get TranslationToParamName() {
        return "to";
    }
    static get Profanify() {
        return "profanity";
    }
    static get EnableAudioLogging() {
        return "storeAudio";
    }
    static get EnableWordLevelTimestamps() {
        return "wordLevelTimestamps";
    }
    static get InitialSilenceTimeoutMs() {
        return "initialSilenceTimeoutMs";
    }
    static get EndSilenceTimeoutMs() {
        return "endSilenceTimeoutMs";
    }
    static get StableIntermediateThreshold() {
        return "stableIntermediateThreshold";
    }
    static get StableTranslation() {
        return "stableTranslation";
    }
}

//# sourceMappingURL=QueryParameterNames.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js ***!
  \*******************************************************************************************************************/
/*! exports provided: SpeechRecognitionEvent, RecognitionTriggeredEvent, ListeningStartedEvent, ConnectingToServiceEvent, RecognitionStartedEvent, RecognitionCompletionStatus, RecognitionEndedEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionEvent", function() { return SpeechRecognitionEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionTriggeredEvent", function() { return RecognitionTriggeredEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListeningStartedEvent", function() { return ListeningStartedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectingToServiceEvent", function() { return ConnectingToServiceEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionStartedEvent", function() { return RecognitionStartedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionCompletionStatus", function() { return RecognitionCompletionStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionEndedEvent", function() { return RecognitionEndedEvent; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class SpeechRecognitionEvent extends _common_Exports__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(eventName, requestId, sessionId, eventType = _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info) {
        super(eventName, eventType);
        this.privRequestId = requestId;
        this.privSessionId = sessionId;
    }
    get requestId() {
        return this.privRequestId;
    }
    get sessionId() {
        return this.privSessionId;
    }
}
// tslint:disable-next-line:max-classes-per-file
class RecognitionTriggeredEvent extends SpeechRecognitionEvent {
    constructor(requestId, sessionId, audioSourceId, audioNodeId) {
        super("RecognitionTriggeredEvent", requestId, sessionId);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
}
// tslint:disable-next-line:max-classes-per-file
class ListeningStartedEvent extends SpeechRecognitionEvent {
    constructor(requestId, sessionId, audioSourceId, audioNodeId) {
        super("ListeningStartedEvent", requestId, sessionId);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
}
// tslint:disable-next-line:max-classes-per-file
class ConnectingToServiceEvent extends SpeechRecognitionEvent {
    constructor(requestId, authFetchEventid, sessionId) {
        super("ConnectingToServiceEvent", requestId, sessionId);
        this.privAuthFetchEventid = authFetchEventid;
    }
    get authFetchEventid() {
        return this.privAuthFetchEventid;
    }
}
// tslint:disable-next-line:max-classes-per-file
class RecognitionStartedEvent extends SpeechRecognitionEvent {
    constructor(requestId, audioSourceId, audioNodeId, authFetchEventId, sessionId) {
        super("RecognitionStartedEvent", requestId, sessionId);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
        this.privAuthFetchEventId = authFetchEventId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
    get authFetchEventId() {
        return this.privAuthFetchEventId;
    }
}
var RecognitionCompletionStatus;
(function (RecognitionCompletionStatus) {
    RecognitionCompletionStatus[RecognitionCompletionStatus["Success"] = 0] = "Success";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AudioSourceError"] = 1] = "AudioSourceError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AudioSourceTimeout"] = 2] = "AudioSourceTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AuthTokenFetchError"] = 3] = "AuthTokenFetchError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AuthTokenFetchTimeout"] = 4] = "AuthTokenFetchTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["UnAuthorized"] = 5] = "UnAuthorized";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ConnectTimeout"] = 6] = "ConnectTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ConnectError"] = 7] = "ConnectError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ClientRecognitionActivityTimeout"] = 8] = "ClientRecognitionActivityTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["UnknownError"] = 9] = "UnknownError";
})(RecognitionCompletionStatus || (RecognitionCompletionStatus = {}));
// tslint:disable-next-line:max-classes-per-file
class RecognitionEndedEvent extends SpeechRecognitionEvent {
    constructor(requestId, audioSourceId, audioNodeId, authFetchEventId, sessionId, serviceTag, status, error) {
        super("RecognitionEndedEvent", requestId, sessionId, status === RecognitionCompletionStatus.Success ? _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info : _common_Exports__WEBPACK_IMPORTED_MODULE_0__["EventType"].Error);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
        this.privAuthFetchEventId = authFetchEventId;
        this.privStatus = status;
        this.privError = error;
        this.privServiceTag = serviceTag;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
    get authFetchEventId() {
        return this.privAuthFetchEventId;
    }
    get serviceTag() {
        return this.privServiceTag;
    }
    get status() {
        return this.privStatus;
    }
    get error() {
        return this.privError;
    }
}

//# sourceMappingURL=RecognitionEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js ***!
  \******************************************************************************************************************/
/*! exports provided: RecognitionMode, SpeechResultFormat, RecognizerConfig, SpeechServiceConfig, Context, System, OS, Device, connectivity, type */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionMode", function() { return RecognitionMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechResultFormat", function() { return SpeechResultFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognizerConfig", function() { return RecognizerConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechServiceConfig", function() { return SpeechServiceConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Context", function() { return Context; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "System", function() { return System; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OS", function() { return OS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Device", function() { return Device; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "connectivity", function() { return connectivity; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "type", function() { return type; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var RecognitionMode;
(function (RecognitionMode) {
    RecognitionMode[RecognitionMode["Interactive"] = 0] = "Interactive";
    RecognitionMode[RecognitionMode["Conversation"] = 1] = "Conversation";
    RecognitionMode[RecognitionMode["Dictation"] = 2] = "Dictation";
})(RecognitionMode || (RecognitionMode = {}));
var SpeechResultFormat;
(function (SpeechResultFormat) {
    SpeechResultFormat[SpeechResultFormat["Simple"] = 0] = "Simple";
    SpeechResultFormat[SpeechResultFormat["Detailed"] = 1] = "Detailed";
})(SpeechResultFormat || (SpeechResultFormat = {}));
class RecognizerConfig {
    constructor(speechServiceConfig, parameters) {
        this.privRecognitionMode = RecognitionMode.Interactive;
        this.privSpeechServiceConfig = speechServiceConfig ? speechServiceConfig : new SpeechServiceConfig(new Context(null));
        this.privParameters = parameters;
    }
    get parameters() {
        return this.privParameters;
    }
    get recognitionMode() {
        return this.privRecognitionMode;
    }
    set recognitionMode(value) {
        this.privRecognitionMode = value;
        this.privRecognitionActivityTimeout = value === RecognitionMode.Interactive ? 8000 : 25000;
        this.privSpeechServiceConfig.Recognition = RecognitionMode[value];
    }
    get SpeechServiceConfig() {
        return this.privSpeechServiceConfig;
    }
    get recognitionActivityTimeout() {
        return this.privRecognitionActivityTimeout;
    }
    get isContinuousRecognition() {
        return this.privRecognitionMode !== RecognitionMode.Interactive;
    }
}
// The config is serialized and sent as the Speech.Config
// tslint:disable-next-line:max-classes-per-file
class SpeechServiceConfig {
    constructor(context) {
        this.serialize = () => {
            return JSON.stringify(this, (key, value) => {
                if (value && typeof value === "object") {
                    const replacement = {};
                    for (const k in value) {
                        if (Object.hasOwnProperty.call(value, k)) {
                            replacement[k && k.charAt(0).toLowerCase() + k.substring(1)] = value[k];
                        }
                    }
                    return replacement;
                }
                return value;
            });
        };
        this.context = context;
    }
    get Context() {
        return this.context;
    }
    get Recognition() {
        return this.recognition;
    }
    set Recognition(value) {
        this.recognition = value.toLowerCase();
    }
}
// tslint:disable-next-line:max-classes-per-file
class Context {
    constructor(os) {
        this.system = new System();
        this.os = os;
    }
}
// tslint:disable-next-line:max-classes-per-file
class System {
    constructor() {
        // Note: below will be patched for official builds.
        const SPEECHSDK_CLIENTSDK_VERSION = "1.6.0-alpha.0.1";
        this.name = "SpeechSDK";
        this.version = SPEECHSDK_CLIENTSDK_VERSION;
        this.build = "JavaScript";
        this.lang = "JavaScript";
    }
}
// tslint:disable-next-line:max-classes-per-file
class OS {
    constructor(platform, name, version) {
        this.platform = platform;
        this.name = name;
        this.version = version;
    }
}
// tslint:disable-next-line:max-classes-per-file
class Device {
    constructor(manufacturer, model, version) {
        this.manufacturer = manufacturer;
        this.model = model;
        this.version = version;
    }
}
var connectivity;
(function (connectivity) {
    connectivity["Bluetooth"] = "Bluetooth";
    connectivity["Wired"] = "Wired";
    connectivity["WiFi"] = "WiFi";
    connectivity["Cellular"] = "Cellular";
    connectivity["InBuilt"] = "InBuilt";
    connectivity["Unknown"] = "Unknown";
})(connectivity || (connectivity = {}));
var type;
(function (type) {
    type["Phone"] = "Phone";
    type["Speaker"] = "Speaker";
    type["Car"] = "Car";
    type["Headset"] = "Headset";
    type["Thermostat"] = "Thermostat";
    type["Microphones"] = "Microphones";
    type["Deskphone"] = "Deskphone";
    type["RemoteControl"] = "RemoteControl";
    type["Unknown"] = "Unknown";
    type["File"] = "File";
    type["Stream"] = "Stream";
})(type || (type = {}));

//# sourceMappingURL=RecognizerConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RequestSession.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RequestSession.js ***!
  \****************************************************************************************************************/
/*! exports provided: RequestSession */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RequestSession", function() { return RequestSession; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js");
/* harmony import */ var _ServiceTelemetryListener_Internal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ServiceTelemetryListener.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceTelemetryListener.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class RequestSession {
    constructor(audioSourceId) {
        this.privIsDisposed = false;
        this.privDetachables = new Array();
        this.privIsAudioNodeDetached = false;
        this.privIsRecognizing = false;
        this.privIsSpeechEnded = false;
        this.privTurnStartAudioOffset = 0;
        this.privLastRecoOffset = 0;
        this.privHypothesisReceived = false;
        this.privBytesSent = 0;
        this.privRecogNumber = 0;
        this.onAudioSourceAttachCompleted = (audioNode, isError, error) => {
            this.privAudioNode = audioNode;
            this.privIsAudioNodeDetached = false;
            if (isError) {
                this.onComplete();
            }
            else {
                this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["ListeningStartedEvent"](this.privRequestId, this.privSessionId, this.privAudioSourceId, this.privAudioNodeId));
            }
        };
        this.onPreConnectionStart = (authFetchEventId, connectionId) => {
            this.privAuthFetchEventId = authFetchEventId;
            this.privSessionId = connectionId;
            this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectingToServiceEvent"](this.privRequestId, this.privAuthFetchEventId, this.privSessionId));
        };
        this.onAuthCompleted = (isError, error) => {
            if (isError) {
                this.onComplete();
            }
        };
        this.onConnectionEstablishCompleted = (statusCode, reason) => {
            if (statusCode === 200) {
                this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["RecognitionStartedEvent"](this.requestId, this.privAudioSourceId, this.privAudioNodeId, this.privAuthFetchEventId, this.privSessionId));
                if (!!this.privAudioNode) {
                    this.privAudioNode.replay();
                }
                this.privTurnStartAudioOffset = this.privLastRecoOffset;
                this.privBytesSent = 0;
                return;
            }
            else if (statusCode === 403) {
                this.onComplete();
            }
        };
        this.onServiceTurnEndResponse = (continuousRecognition) => {
            if (!continuousRecognition || this.isSpeechEnded) {
                this.onComplete();
            }
            else {
                // Start a new request set.
                this.privTurnStartAudioOffset = this.privLastRecoOffset;
                this.privRequestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
                this.privAudioNode.replay();
            }
        };
        this.dispose = (error) => {
            if (!this.privIsDisposed) {
                // we should have completed by now. If we did not its an unknown error.
                this.privIsDisposed = true;
                for (const detachable of this.privDetachables) {
                    detachable.detach();
                }
                this.privServiceTelemetryListener.dispose();
            }
        };
        this.getTelemetry = () => {
            if (this.privServiceTelemetryListener.hasTelemetry) {
                return this.privServiceTelemetryListener.getTelemetry();
            }
            else {
                return null;
            }
        };
        this.onEvent = (event) => {
            if (!!this.privServiceTelemetryListener) {
                this.privServiceTelemetryListener.onEvent(event);
            }
            _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Events"].instance.onEvent(event);
        };
        this.onComplete = () => {
            if (!!this.privIsRecognizing) {
                this.privIsRecognizing = false;
                this.detachAudioNode();
            }
        };
        this.detachAudioNode = () => {
            if (!this.privIsAudioNodeDetached) {
                this.privIsAudioNodeDetached = true;
                if (this.privAudioNode) {
                    this.privAudioNode.detach();
                }
            }
        };
        this.privAudioSourceId = audioSourceId;
        this.privRequestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privAudioNodeId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privRequestCompletionDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
    }
    get sessionId() {
        return this.privSessionId;
    }
    get requestId() {
        return this.privRequestId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
    get completionPromise() {
        return this.privRequestCompletionDeferral.promise();
    }
    get isSpeechEnded() {
        return this.privIsSpeechEnded;
    }
    get isRecognizing() {
        return this.privIsRecognizing;
    }
    get currentTurnAudioOffset() {
        return this.privTurnStartAudioOffset;
    }
    get recogNumber() {
        return this.privRecogNumber;
    }
    // The number of bytes sent for the current connection.
    // Counter is reset to 0 each time a connection is established.
    get bytesSent() {
        return this.privBytesSent;
    }
    listenForServiceTelemetry(eventSource) {
        if (!!this.privServiceTelemetryListener) {
            this.privDetachables.push(eventSource.attachListener(this.privServiceTelemetryListener));
        }
    }
    startNewRecognition() {
        this.privIsSpeechEnded = false;
        this.privIsRecognizing = true;
        this.privTurnStartAudioOffset = 0;
        this.privLastRecoOffset = 0;
        this.privRequestId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privRecogNumber++;
        this.privServiceTelemetryListener = new _ServiceTelemetryListener_Internal__WEBPACK_IMPORTED_MODULE_2__["ServiceTelemetryListener"](this.privRequestId, this.privAudioSourceId, this.privAudioNodeId);
        this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["RecognitionTriggeredEvent"](this.requestId, this.privSessionId, this.privAudioSourceId, this.privAudioNodeId));
    }
    onHypothesis(offset) {
        if (!this.privHypothesisReceived) {
            this.privHypothesisReceived = true;
            this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(offset));
        }
    }
    onPhraseRecognized(offset) {
        this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(offset));
        this.onServiceRecognized(offset);
    }
    onServiceRecognized(offset) {
        this.privLastRecoOffset = offset;
        this.privHypothesisReceived = false;
        this.privAudioNode.shrinkBuffers(offset);
    }
    onAudioSent(bytesSent) {
        this.privBytesSent += bytesSent;
    }
    onStopRecognizing() {
        this.onComplete();
    }
    // Should be called with the audioNode for this session has indicated that it is out of speech.
    onSpeechEnded() {
        this.privIsSpeechEnded = true;
    }
}

//# sourceMappingURL=RequestSession.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js ***!
  \*****************************************************************************************************************************************/
/*! exports provided: ActivityPayloadResponse, MessageDataStreamType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActivityPayloadResponse", function() { return ActivityPayloadResponse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageDataStreamType", function() { return MessageDataStreamType; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
class ActivityPayloadResponse {
    constructor(json) {
        this.privActivityResponse = JSON.parse(json);
    }
    static fromJSON(json) {
        return new ActivityPayloadResponse(json);
    }
    get conversationId() {
        return this.privActivityResponse.conversationId;
    }
    get messageDataStreamType() {
        return this.privActivityResponse.messageDataStreamType;
    }
    get messagePayload() {
        return this.privActivityResponse.messagePayload;
    }
    get version() {
        return this.privActivityResponse.version;
    }
}
var MessageDataStreamType;
(function (MessageDataStreamType) {
    MessageDataStreamType[MessageDataStreamType["None"] = 0] = "None";
    MessageDataStreamType[MessageDataStreamType["TextToSpeechAudio"] = 1] = "TextToSpeechAudio";
})(MessageDataStreamType || (MessageDataStreamType = {}));

//# sourceMappingURL=ActivityResponsePayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js ***!
  \**************************************************************************************************************************************/
/*! exports provided: DetailedSpeechPhrase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetailedSpeechPhrase", function() { return DetailedSpeechPhrase; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class DetailedSpeechPhrase {
    constructor(json) {
        this.privDetailedSpeechPhrase = JSON.parse(json);
        this.privDetailedSpeechPhrase.RecognitionStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionStatus"][this.privDetailedSpeechPhrase.RecognitionStatus];
    }
    static fromJSON(json) {
        return new DetailedSpeechPhrase(json);
    }
    get RecognitionStatus() {
        return this.privDetailedSpeechPhrase.RecognitionStatus;
    }
    get NBest() {
        return this.privDetailedSpeechPhrase.NBest;
    }
    get Duration() {
        return this.privDetailedSpeechPhrase.Duration;
    }
    get Offset() {
        return this.privDetailedSpeechPhrase.Offset;
    }
}

//# sourceMappingURL=DetailedSpeechPhrase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js ***!
  \***********************************************************************************************************************/
/*! exports provided: SynthesisStatus, RecognitionStatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynthesisStatus", function() { return SynthesisStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionStatus", function() { return RecognitionStatus; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * @class SynthesisStatus
 * @private
 */
var SynthesisStatus;
(function (SynthesisStatus) {
    /**
     * The response contains valid audio data.
     * @member SynthesisStatus.Success
     */
    SynthesisStatus[SynthesisStatus["Success"] = 0] = "Success";
    /**
     * Indicates the end of audio data. No valid audio data is included in the message.
     * @member SynthesisStatus.SynthesisEnd
     */
    SynthesisStatus[SynthesisStatus["SynthesisEnd"] = 1] = "SynthesisEnd";
    /**
     * Indicates an error occurred during synthesis data processing.
     * @member SynthesisStatus.Error
     */
    SynthesisStatus[SynthesisStatus["Error"] = 2] = "Error";
})(SynthesisStatus || (SynthesisStatus = {}));
var RecognitionStatus;
(function (RecognitionStatus) {
    RecognitionStatus[RecognitionStatus["Success"] = 0] = "Success";
    RecognitionStatus[RecognitionStatus["NoMatch"] = 1] = "NoMatch";
    RecognitionStatus[RecognitionStatus["InitialSilenceTimeout"] = 2] = "InitialSilenceTimeout";
    RecognitionStatus[RecognitionStatus["BabbleTimeout"] = 3] = "BabbleTimeout";
    RecognitionStatus[RecognitionStatus["Error"] = 4] = "Error";
    RecognitionStatus[RecognitionStatus["EndOfDictation"] = 5] = "EndOfDictation";
    RecognitionStatus[RecognitionStatus["TooManyRequests"] = 6] = "TooManyRequests";
})(RecognitionStatus || (RecognitionStatus = {}));

//# sourceMappingURL=Enums.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/IntentResponse.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/IntentResponse.js ***!
  \********************************************************************************************************************************/
/*! exports provided: IntentResponse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentResponse", function() { return IntentResponse; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
class IntentResponse {
    constructor(json) {
        this.privIntentResponse = JSON.parse(json);
    }
    static fromJSON(json) {
        return new IntentResponse(json);
    }
    get query() {
        return this.privIntentResponse.query;
    }
    get topScoringIntent() {
        return this.privIntentResponse.topScoringIntent;
    }
    get entities() {
        return this.privIntentResponse.entities;
    }
}

//# sourceMappingURL=IntentResponse.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js ***!
  \************************************************************************************************************************************/
/*! exports provided: SimpleSpeechPhrase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SimpleSpeechPhrase", function() { return SimpleSpeechPhrase; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class SimpleSpeechPhrase {
    constructor(json) {
        this.privSimpleSpeechPhrase = JSON.parse(json);
        this.privSimpleSpeechPhrase.RecognitionStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionStatus"][this.privSimpleSpeechPhrase.RecognitionStatus];
    }
    static fromJSON(json) {
        return new SimpleSpeechPhrase(json);
    }
    get RecognitionStatus() {
        return this.privSimpleSpeechPhrase.RecognitionStatus;
    }
    get DisplayText() {
        return this.privSimpleSpeechPhrase.DisplayText;
    }
    get Offset() {
        return this.privSimpleSpeechPhrase.Offset;
    }
    get Duration() {
        return this.privSimpleSpeechPhrase.Duration;
    }
}

//# sourceMappingURL=SimpleSpeechPhrase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js ***!
  \********************************************************************************************************************************/
/*! exports provided: SpeechDetected */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechDetected", function() { return SpeechDetected; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class SpeechDetected {
    constructor(json) {
        this.privSpeechStartDetected = JSON.parse(json);
    }
    static fromJSON(json) {
        return new SpeechDetected(json);
    }
    get Offset() {
        return this.privSpeechStartDetected.Offset;
    }
}

//# sourceMappingURL=SpeechDetected.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js ***!
  \**********************************************************************************************************************************/
/*! exports provided: SpeechHypothesis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechHypothesis", function() { return SpeechHypothesis; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class SpeechHypothesis {
    constructor(json) {
        this.privSpeechHypothesis = JSON.parse(json);
    }
    static fromJSON(json) {
        return new SpeechHypothesis(json);
    }
    get Text() {
        return this.privSpeechHypothesis.Text;
    }
    get Offset() {
        return this.privSpeechHypothesis.Offset;
    }
    get Duration() {
        return this.privSpeechHypothesis.Duration;
    }
}

//# sourceMappingURL=SpeechHypothesis.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationHypothesis.js":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationHypothesis.js ***!
  \***************************************************************************************************************************************/
/*! exports provided: TranslationHypothesis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationHypothesis", function() { return TranslationHypothesis; });
/* harmony import */ var _TranslationStatus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../TranslationStatus */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class TranslationHypothesis {
    constructor(json) {
        this.privTranslationHypothesis = JSON.parse(json);
        this.privTranslationHypothesis.Translation.TranslationStatus = _TranslationStatus__WEBPACK_IMPORTED_MODULE_0__["TranslationStatus"][this.privTranslationHypothesis.Translation.TranslationStatus];
    }
    static fromJSON(json) {
        return new TranslationHypothesis(json);
    }
    get Duration() {
        return this.privTranslationHypothesis.Duration;
    }
    get Offset() {
        return this.privTranslationHypothesis.Offset;
    }
    get Text() {
        return this.privTranslationHypothesis.Text;
    }
    get Translation() {
        return this.privTranslationHypothesis.Translation;
    }
}

//# sourceMappingURL=TranslationHypothesis.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationPhrase.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationPhrase.js ***!
  \***********************************************************************************************************************************/
/*! exports provided: TranslationPhrase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationPhrase", function() { return TranslationPhrase; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _TranslationStatus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../TranslationStatus */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class TranslationPhrase {
    constructor(json) {
        this.privTranslationPhrase = JSON.parse(json);
        this.privTranslationPhrase.RecognitionStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionStatus"][this.privTranslationPhrase.RecognitionStatus];
        if (this.privTranslationPhrase.Translation !== undefined) {
            this.privTranslationPhrase.Translation.TranslationStatus = _TranslationStatus__WEBPACK_IMPORTED_MODULE_1__["TranslationStatus"][this.privTranslationPhrase.Translation.TranslationStatus];
        }
    }
    static fromJSON(json) {
        return new TranslationPhrase(json);
    }
    get RecognitionStatus() {
        return this.privTranslationPhrase.RecognitionStatus;
    }
    get Offset() {
        return this.privTranslationPhrase.Offset;
    }
    get Duration() {
        return this.privTranslationPhrase.Duration;
    }
    get Text() {
        return this.privTranslationPhrase.Text;
    }
    get Translation() {
        return this.privTranslationPhrase.Translation;
    }
}

//# sourceMappingURL=TranslationPhrase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js ***!
  \*****************************************************************************************************************************************/
/*! exports provided: TranslationSynthesisEnd */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisEnd", function() { return TranslationSynthesisEnd; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class TranslationSynthesisEnd {
    constructor(json) {
        this.privSynthesisEnd = JSON.parse(json);
        this.privSynthesisEnd.SynthesisStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__["SynthesisStatus"][this.privSynthesisEnd.SynthesisStatus];
    }
    static fromJSON(json) {
        return new TranslationSynthesisEnd(json);
    }
    get SynthesisStatus() {
        return this.privSynthesisEnd.SynthesisStatus;
    }
    get FailureReason() {
        return this.privSynthesisEnd.FailureReason;
    }
}

//# sourceMappingURL=TranslationSynthesisEnd.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js ***!
  \***********************************************************************************************************************/
/*! exports provided: ServiceRecognizerBase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServiceRecognizerBase", function() { return ServiceRecognizerBase; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.





class ServiceRecognizerBase {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        this.recognizeOverride = undefined;
        this.disconnectOverride = undefined;
        this.sendTelemetryData = () => {
            const telemetryData = this.privRequestSession.getTelemetry();
            // console.warn("Telem: " + telemetryData);
            if (ServiceRecognizerBase.telemetryDataEnabled !== true ||
                this.privIsDisposed ||
                null === telemetryData) {
                return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(true);
            }
            if (!!ServiceRecognizerBase.telemetryData) {
                try {
                    ServiceRecognizerBase.telemetryData(telemetryData);
                    /* tslint:disable:no-empty */
                }
                catch (_a) { }
            }
            return this.fetchConnection().onSuccessContinueWith((connection) => {
                return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text, "telemetry", this.privRequestSession.requestId, "application/json", telemetryData));
            });
        };
        this.receiveMessageOverride = undefined;
        this.receiveMessage = (successCallback, errorCallBack) => {
            return this.fetchConnection().on((connection) => {
                return connection.read()
                    .onSuccessContinueWithPromise((message) => {
                    if (this.receiveMessageOverride !== undefined) {
                        return this.receiveMessageOverride();
                    }
                    if (this.privIsDisposed || !this.privRequestSession.isRecognizing) {
                        // We're done.
                        return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(undefined);
                    }
                    // indicates we are draining the queue and it came with no message;
                    if (!message) {
                        if (!this.privRequestSession.isRecognizing) {
                            return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(true);
                        }
                        else {
                            return this.receiveMessage(successCallback, errorCallBack);
                        }
                    }
                    const connectionMessage = _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"].fromConnectionMessage(message);
                    if (connectionMessage.requestId.toLowerCase() === this.privRequestSession.requestId.toLowerCase()) {
                        switch (connectionMessage.path.toLowerCase()) {
                            case "turn.start":
                                this.privMustReportEndOfStream = true;
                                break;
                            case "speech.startdetected":
                                const speechStartDetected = _Exports__WEBPACK_IMPORTED_MODULE_3__["SpeechDetected"].fromJSON(connectionMessage.textBody);
                                const speechStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionEventArgs"](speechStartDetected.Offset, this.privRequestSession.sessionId);
                                if (!!this.privRecognizer.speechStartDetected) {
                                    this.privRecognizer.speechStartDetected(this.privRecognizer, speechStartEventArgs);
                                }
                                break;
                            case "speech.enddetected":
                                let json;
                                if (connectionMessage.textBody.length > 0) {
                                    json = connectionMessage.textBody;
                                }
                                else {
                                    // If the request was empty, the JSON returned is empty.
                                    json = "{ Offset: 0 }";
                                }
                                const speechStopDetected = _Exports__WEBPACK_IMPORTED_MODULE_3__["SpeechDetected"].fromJSON(json);
                                // Only shrink the buffers for continuous recognition.
                                // For single shot, the speech.phrase message will come after the speech.end and it should own buffer shrink.
                                if (this.privRecognizerConfig.isContinuousRecognition) {
                                    this.privRequestSession.onServiceRecognized(speechStopDetected.Offset + this.privRequestSession.currentTurnAudioOffset);
                                }
                                const speechStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionEventArgs"](speechStopDetected.Offset + this.privRequestSession.currentTurnAudioOffset, this.privRequestSession.sessionId);
                                if (!!this.privRecognizer.speechEndDetected) {
                                    this.privRecognizer.speechEndDetected(this.privRecognizer, speechStopEventArgs);
                                }
                                break;
                            case "turn.end":
                                this.sendTelemetryData();
                                if (this.privRequestSession.isSpeechEnded && this.privMustReportEndOfStream) {
                                    this.privMustReportEndOfStream = false;
                                    this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].EndOfStream, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError, undefined, successCallback);
                                }
                                const sessionStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SessionEventArgs"](this.privRequestSession.sessionId);
                                this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition);
                                if (!this.privRecognizerConfig.isContinuousRecognition || this.privRequestSession.isSpeechEnded) {
                                    if (!!this.privRecognizer.sessionStopped) {
                                        this.privRecognizer.sessionStopped(this.privRecognizer, sessionStopEventArgs);
                                    }
                                    return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(true);
                                }
                                else {
                                    this.fetchConnection().onSuccessContinueWith((connection) => {
                                        this.sendSpeechContext(connection);
                                    });
                                }
                            default:
                                this.processTypeSpecificMessages(connectionMessage, successCallback, errorCallBack);
                        }
                    }
                    return this.receiveMessage(successCallback, errorCallBack);
                });
            }, (error) => {
            });
        };
        this.sendSpeechContext = (connection) => {
            const speechContextJson = this.speechContext.toJSON();
            if (speechContextJson) {
                return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text, "speech.context", this.privRequestSession.requestId, "application/json", speechContextJson));
            }
            return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(true);
        };
        this.connectImplOverride = undefined;
        this.configConnectionOverride = undefined;
        this.fetchConnectionOverride = undefined;
        this.sendSpeechServiceConfig = (connection, requestSession, SpeechServiceConfigJson) => {
            // filter out anything that is not required for the service to work.
            if (ServiceRecognizerBase.telemetryDataEnabled !== true) {
                const withTelemetry = JSON.parse(SpeechServiceConfigJson);
                const replacement = {
                    context: {
                        system: withTelemetry.context.system,
                    },
                };
                SpeechServiceConfigJson = JSON.stringify(replacement);
            }
            if (SpeechServiceConfigJson) { // && this.privConnectionId !== this.privSpeechServiceConfigConnectionId) {
                this.privSpeechServiceConfigConnectionId = this.privConnectionId;
                return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Text, "speech.config", requestSession.requestId, "application/json", SpeechServiceConfigJson));
            }
            return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(true);
        };
        this.sendAudio = (audioStreamNode) => {
            // NOTE: Home-baked promises crash ios safari during the invocation
            // of the error callback chain (looks like the recursion is way too deep, and
            // it blows up the stack). The following construct is a stop-gap that does not
            // bubble the error up the callback chain and hence circumvents this problem.
            // TODO: rewrite with ES6 promises.
            const deferred = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Deferred"]();
            // The time we last sent data to the service.
            let nextSendTime = Date.now();
            const audioFormat = this.privAudioSource.format;
            // Max amount to send before we start to throttle
            const fastLaneSizeMs = this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs", "5000");
            const maxSendUnthrottledBytes = audioFormat.avgBytesPerSec / 1000 * parseInt(fastLaneSizeMs, 10);
            const startRecogNumber = this.privRequestSession.recogNumber;
            const readAndUploadCycle = () => {
                // If speech is done, stop sending audio.
                if (!this.privIsDisposed &&
                    !this.privRequestSession.isSpeechEnded &&
                    this.privRequestSession.isRecognizing &&
                    this.privRequestSession.recogNumber === startRecogNumber) {
                    this.fetchConnection().on((connection) => {
                        audioStreamNode.read().on((audioStreamChunk) => {
                            // we have a new audio chunk to upload.
                            if (this.privRequestSession.isSpeechEnded) {
                                // If service already recognized audio end then don't send any more audio
                                deferred.resolve(true);
                                return;
                            }
                            let payload;
                            let sendDelay;
                            if (audioStreamChunk.isEnd) {
                                payload = null;
                                sendDelay = 0;
                            }
                            else {
                                payload = audioStreamChunk.buffer;
                                this.privRequestSession.onAudioSent(payload.byteLength);
                                if (maxSendUnthrottledBytes >= this.privRequestSession.bytesSent) {
                                    sendDelay = 0;
                                }
                                else {
                                    sendDelay = Math.max(0, nextSendTime - Date.now());
                                }
                            }
                            // Are we ready to send, or need we delay more?
                            setTimeout(() => {
                                if (payload !== null) {
                                    nextSendTime = Date.now() + (payload.byteLength * 1000 / (audioFormat.avgBytesPerSec * 2));
                                }
                                const uploaded = connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Binary, "audio", this.privRequestSession.requestId, null, payload));
                                if (!audioStreamChunk.isEnd) {
                                    uploaded.continueWith((_) => {
                                        // Regardless of success or failure, schedule the next upload.
                                        // If the underlying connection was broken, the next cycle will
                                        // get a new connection and re-transmit missing audio automatically.
                                        readAndUploadCycle();
                                    });
                                }
                                else {
                                    // the audio stream has been closed, no need to schedule next
                                    // read-upload cycle.
                                    this.privRequestSession.onSpeechEnded();
                                    deferred.resolve(true);
                                }
                            }, sendDelay);
                        }, (error) => {
                            if (this.privRequestSession.isSpeechEnded) {
                                // For whatever reason, Reject is used to remove queue subscribers inside
                                // the Queue.DrainAndDispose invoked from DetachAudioNode down below, which
                                // means that sometimes things can be rejected in normal circumstances, without
                                // any errors.
                                deferred.resolve(true); // TODO: remove the argument, it's is completely meaningless.
                            }
                            else {
                                // Only reject, if there was a proper error.
                                deferred.reject(error);
                            }
                        });
                    }, (error) => {
                        deferred.reject(error);
                    });
                }
            };
            readAndUploadCycle();
            return deferred.promise();
        };
        this.fetchConnection = () => {
            if (this.fetchConnectionOverride !== undefined) {
                return this.fetchConnectionOverride();
            }
            return this.configureConnection();
        };
        if (!authentication) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("authentication");
        }
        if (!connectionFactory) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("connectionFactory");
        }
        if (!audioSource) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("audioSource");
        }
        if (!recognizerConfig) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("recognizerConfig");
        }
        this.privMustReportEndOfStream = false;
        this.privAuthentication = authentication;
        this.privConnectionFactory = connectionFactory;
        this.privAudioSource = audioSource;
        this.privRecognizerConfig = recognizerConfig;
        this.privIsDisposed = false;
        this.privRecognizer = recognizer;
        this.privRequestSession = new _Exports__WEBPACK_IMPORTED_MODULE_3__["RequestSession"](this.privAudioSource.id());
        this.privConnectionEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["EventSource"]();
        this.privDynamicGrammar = new _Exports__WEBPACK_IMPORTED_MODULE_3__["DynamicGrammarBuilder"]();
        this.privSpeechContext = new _Exports__WEBPACK_IMPORTED_MODULE_3__["SpeechContext"](this.privDynamicGrammar);
        this.privAgentConfig = new _Exports__WEBPACK_IMPORTED_MODULE_3__["AgentConfig"]();
    }
    get audioSource() {
        return this.privAudioSource;
    }
    get speechContext() {
        return this.privSpeechContext;
    }
    get dynamicGrammar() {
        return this.privDynamicGrammar;
    }
    get agentConfig() {
        return this.privAgentConfig;
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose(reason) {
        this.privIsDisposed = true;
        if (this.privConnectionConfigurationPromise) {
            this.privConnectionConfigurationPromise.onSuccessContinueWith((connection) => {
                connection.dispose(reason);
            });
        }
    }
    get connectionEvents() {
        return this.privConnectionEvents;
    }
    get recognitionMode() {
        return this.privRecognizerConfig.recognitionMode;
    }
    recognize(recoMode, successCallback, errorCallBack) {
        if (this.recognizeOverride !== undefined) {
            return this.recognizeOverride(recoMode, successCallback, errorCallBack);
        }
        // Clear the existing configuration promise to force a re-transmission of config and context.
        this.privConnectionConfigurationPromise = null;
        this.privRecognizerConfig.recognitionMode = recoMode;
        this.privRequestSession.startNewRecognition();
        this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);
        // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
        this.connectImpl();
        return this.audioSource
            .attach(this.privRequestSession.audioNodeId)
            .continueWithPromise((result) => {
            let audioNode;
            if (result.isError) {
                this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].ConnectionFailure, result.error, successCallback);
                return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromError(result.error);
            }
            else {
                audioNode = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ReplayableAudioNode"](result.result, this.audioSource.format);
                this.privRequestSession.onAudioSourceAttachCompleted(audioNode, false);
            }
            return this.audioSource.deviceInfo.onSuccessContinueWithPromise((deviceInfo) => {
                this.privRecognizerConfig.SpeechServiceConfig.Context.audio = { source: deviceInfo };
                return this.configureConnection()
                    .on((_) => {
                    const sessionStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["SessionEventArgs"](this.privRequestSession.sessionId);
                    if (!!this.privRecognizer.sessionStarted) {
                        this.privRecognizer.sessionStarted(this.privRecognizer, sessionStartEventArgs);
                    }
                    const messageRetrievalPromise = this.receiveMessage(successCallback, errorCallBack);
                    const audioSendPromise = this.sendAudio(audioNode);
                    /* tslint:disable:no-empty */
                    audioSendPromise.on((_) => { }, (error) => {
                        this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].RuntimeError, error, successCallback);
                    });
                    const completionPromise = _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].whenAll([messageRetrievalPromise, audioSendPromise]);
                    return completionPromise.on((r) => {
                        return true;
                    }, (error) => {
                        this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].RuntimeError, error, successCallback);
                    });
                }, (error) => {
                    this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].ConnectionFailure, error, successCallback);
                }).continueWithPromise((result) => {
                    if (result.isError) {
                        return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromError(result.error);
                    }
                    else {
                        return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(true);
                    }
                });
            });
        });
    }
    stopRecognizing() {
        if (this.privRequestSession.isRecognizing) {
            this.privRequestSession.onStopRecognizing();
            this.sendTelemetryData();
            this.audioSource.turnOff();
            this.sendFinalAudio();
            this.privRequestSession.dispose();
        }
    }
    connect() {
        this.connectImpl().result();
    }
    disconnect() {
        if (this.disconnectOverride !== undefined) {
            this.disconnectOverride();
            return;
        }
        this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationReason"].Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCode"].NoError, "Disconnecting", undefined);
        if (this.privConnectionPromise.result().isCompleted) {
            if (!this.privConnectionPromise.result().isError) {
                this.privConnectionPromise.result().result.dispose();
                this.privConnectionPromise = null;
            }
        }
        else {
            this.privConnectionPromise.onSuccessContinueWith((connection) => {
                connection.dispose();
            });
        }
    }
    sendMessage(message) { }
    // Cancels recognition.
    cancelRecognitionLocal(cancellationReason, errorCode, error, cancelRecoCallback) {
        if (!!this.privRequestSession.isRecognizing) {
            this.privRequestSession.onStopRecognizing();
            this.sendTelemetryData();
            this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, cancellationReason, errorCode, error, cancelRecoCallback);
        }
    }
    // Establishes a websocket connection to the end point.
    connectImpl(isUnAuthorized = false) {
        if (this.connectImplOverride !== undefined) {
            return this.connectImplOverride(isUnAuthorized);
        }
        if (this.privConnectionPromise) {
            if (this.privConnectionPromise.result().isCompleted &&
                (this.privConnectionPromise.result().isError
                    || this.privConnectionPromise.result().result.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ConnectionState"].Disconnected)) {
                this.privConnectionId = null;
                this.privConnectionPromise = null;
                return this.connectImpl();
            }
            else {
                return this.privConnectionPromise;
            }
        }
        this.privAuthFetchEventId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        this.privConnectionId = Object(_common_Exports__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId, this.privConnectionId);
        const authPromise = isUnAuthorized ? this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId) : this.privAuthentication.fetch(this.privAuthFetchEventId);
        this.privConnectionPromise = authPromise
            .continueWithPromise((result) => {
            if (result.isError) {
                this.privRequestSession.onAuthCompleted(true, result.error);
                throw new Error(result.error);
            }
            else {
                this.privRequestSession.onAuthCompleted(false);
            }
            const connection = this.privConnectionFactory.create(this.privRecognizerConfig, result.result, this.privConnectionId);
            this.privRequestSession.listenForServiceTelemetry(connection.events);
            // Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
            // it'll stop sending events.
            connection.events.attach((event) => {
                this.connectionEvents.onEvent(event);
            });
            return connection.open().onSuccessContinueWithPromise((response) => {
                if (response.statusCode === 200) {
                    this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId, this.privConnectionId);
                    this.privRequestSession.onConnectionEstablishCompleted(response.statusCode);
                    return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(connection);
                }
                else if (response.statusCode === 403 && !isUnAuthorized) {
                    return this.connectImpl(true);
                }
                else {
                    this.privRequestSession.onConnectionEstablishCompleted(response.statusCode, response.reason);
                    return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromError(`Unable to contact server. StatusCode: ${response.statusCode}, ${this.privRecognizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint)} Reason: ${response.reason}`);
                }
            });
        });
        return this.privConnectionPromise;
    }
    sendFinalAudio() {
        const deferred = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["Deferred"]();
        this.fetchConnection().on((connection) => {
            connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__["SpeechConnectionMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_1__["MessageType"].Binary, "audio", this.privRequestSession.requestId, null, null)).on((_) => {
                deferred.resolve(true);
            }, (error) => {
                deferred.reject(error);
            });
        }, (error) => {
            deferred.reject(error);
        });
        return deferred.promise();
    }
    // Takes an established websocket connection to the endpoint and sends speech configuration information.
    configureConnection() {
        if (this.configConnectionOverride !== undefined) {
            return this.configConnectionOverride();
        }
        if (this.privConnectionConfigurationPromise) {
            if (this.privConnectionConfigurationPromise.result().isCompleted &&
                (this.privConnectionConfigurationPromise.result().isError
                    || this.privConnectionConfigurationPromise.result().result.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ConnectionState"].Disconnected)) {
                this.privConnectionConfigurationPromise = null;
                return this.configureConnection();
            }
            else {
                return this.privConnectionConfigurationPromise;
            }
        }
        this.privConnectionConfigurationPromise = this.connectImpl().onSuccessContinueWithPromise((connection) => {
            return this.sendSpeechServiceConfig(connection, this.privRequestSession, this.privRecognizerConfig.SpeechServiceConfig.serialize())
                .onSuccessContinueWithPromise((_) => {
                return this.sendSpeechContext(connection).onSuccessContinueWith((_) => {
                    return connection;
                });
            });
        });
        return this.privConnectionConfigurationPromise;
    }
}
ServiceRecognizerBase.telemetryDataEnabled = true;

//# sourceMappingURL=ServiceRecognizerBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceTelemetryListener.Internal.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceTelemetryListener.Internal.js ***!
  \***********************************************************************************************************************************/
/*! exports provided: ServiceTelemetryListener */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServiceTelemetryListener", function() { return ServiceTelemetryListener; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


// tslint:disable-next-line:max-classes-per-file
class ServiceTelemetryListener {
    constructor(requestId, audioSourceId, audioNodeId) {
        this.privIsDisposed = false;
        this.privListeningTriggerMetric = null;
        this.privMicMetric = null;
        this.privConnectionEstablishMetric = null;
        this.onEvent = (e) => {
            if (this.privIsDisposed) {
                return;
            }
            if (e instanceof _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["RecognitionTriggeredEvent"] && e.requestId === this.privRequestId) {
                this.privListeningTriggerMetric = {
                    End: e.eventTime,
                    Name: "ListeningTrigger",
                    Start: e.eventTime,
                };
            }
            if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeAttachingEvent"] && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
                this.privMicStartTime = e.eventTime;
            }
            if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeAttachedEvent"] && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
                this.privMicStartTime = e.eventTime;
            }
            if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["AudioSourceErrorEvent"] && e.audioSourceId === this.privAudioSourceId) {
                if (!this.privMicMetric) {
                    this.privMicMetric = {
                        End: e.eventTime,
                        Error: e.error,
                        Name: "Microphone",
                        Start: this.privMicStartTime,
                    };
                }
            }
            if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeErrorEvent"] && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
                if (!this.privMicMetric) {
                    this.privMicMetric = {
                        End: e.eventTime,
                        Error: e.error,
                        Name: "Microphone",
                        Start: this.privMicStartTime,
                    };
                }
            }
            if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeDetachedEvent"] && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
                if (!this.privMicMetric) {
                    this.privMicMetric = {
                        End: e.eventTime,
                        Name: "Microphone",
                        Start: this.privMicStartTime,
                    };
                }
            }
            if (e instanceof _RecognitionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectingToServiceEvent"] && e.requestId === this.privRequestId) {
                this.privConnectionId = e.sessionId;
            }
            if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionStartEvent"] && e.connectionId === this.privConnectionId) {
                this.privConnectionStartTime = e.eventTime;
            }
            if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionEstablishedEvent"] && e.connectionId === this.privConnectionId) {
                if (!this.privConnectionEstablishMetric) {
                    this.privConnectionEstablishMetric = {
                        End: e.eventTime,
                        Id: this.privConnectionId,
                        Name: "Connection",
                        Start: this.privConnectionStartTime,
                    };
                }
            }
            if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionEstablishErrorEvent"] && e.connectionId === this.privConnectionId) {
                if (!this.privConnectionEstablishMetric) {
                    this.privConnectionEstablishMetric = {
                        End: e.eventTime,
                        Error: this.getConnectionError(e.statusCode),
                        Id: this.privConnectionId,
                        Name: "Connection",
                        Start: this.privConnectionStartTime,
                    };
                }
            }
            if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessageReceivedEvent"] && e.connectionId === this.privConnectionId) {
                if (e.message && e.message.headers && e.message.headers.path) {
                    if (!this.privReceivedMessages[e.message.headers.path]) {
                        this.privReceivedMessages[e.message.headers.path] = new Array();
                    }
                    this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime);
                }
            }
        };
        this.getTelemetry = () => {
            const metrics = new Array();
            if (this.privListeningTriggerMetric) {
                metrics.push(this.privListeningTriggerMetric);
            }
            if (this.privMicMetric) {
                metrics.push(this.privMicMetric);
            }
            if (this.privConnectionEstablishMetric) {
                metrics.push(this.privConnectionEstablishMetric);
            }
            if (this.privPhraseLatencies.length > 0) {
                metrics.push({
                    PhraseLatencyMs: this.privPhraseLatencies,
                });
            }
            if (this.privHypothesisLatencies.length > 0) {
                metrics.push({
                    FirstHypothesisLatencyMs: this.privHypothesisLatencies,
                });
            }
            const telemetry = {
                Metrics: metrics,
                ReceivedMessages: this.privReceivedMessages,
            };
            const json = JSON.stringify(telemetry);
            // We dont want to send the same telemetry again. So clean those out.
            this.privReceivedMessages = {};
            this.privListeningTriggerMetric = null;
            this.privMicMetric = null;
            this.privConnectionEstablishMetric = null;
            this.privPhraseLatencies = [];
            this.privHypothesisLatencies = [];
            return json;
        };
        this.dispose = () => {
            this.privIsDisposed = true;
        };
        this.getConnectionError = (statusCode) => {
            /*
            -- Websocket status codes --
            NormalClosure = 1000,
            EndpointUnavailable = 1001,
            ProtocolError = 1002,
            InvalidMessageType = 1003,
            Empty = 1005,
            InvalidPayloadData = 1007,
            PolicyViolation = 1008,
            MessageTooBig = 1009,
            MandatoryExtension = 1010,
            InternalServerError = 1011
            */
            switch (statusCode) {
                case 400:
                case 1002:
                case 1003:
                case 1005:
                case 1007:
                case 1008:
                case 1009: return "BadRequest";
                case 401: return "Unauthorized";
                case 403: return "Forbidden";
                case 503:
                case 1001: return "ServerUnavailable";
                case 500:
                case 1011: return "ServerError";
                case 408:
                case 504: return "Timeout";
                default: return "statuscode:" + statusCode.toString();
            }
        };
        this.privRequestId = requestId;
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
        this.privReceivedMessages = {};
        this.privPhraseLatencies = [];
        this.privHypothesisLatencies = [];
    }
    phraseReceived(audioReceivedTime) {
        if (audioReceivedTime > 0) { // 0 indicates the time is unknown. Drop it.
            this.privPhraseLatencies.push(Date.now() - audioReceivedTime);
        }
    }
    hypothesisReceived(audioReceivedTime) {
        if (audioReceivedTime > 0) { // 0 indicates the time is unknown. Drop it.
            this.privHypothesisLatencies.push(Date.now() - audioReceivedTime);
        }
    }
    // Determines if there are any telemetry events to send to the service.
    get hasTelemetry() {
        return (Object.keys(this.privReceivedMessages).length !== 0 ||
            this.privListeningTriggerMetric !== null ||
            this.privMicMetric !== null ||
            this.privConnectionEstablishMetric !== null ||
            this.privPhraseLatencies.length !== 0 ||
            this.privHypothesisLatencies.length !== 0);
    }
}

//# sourceMappingURL=ServiceTelemetryListener.Internal.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js ***!
  \*************************************************************************************************************************/
/*! exports provided: SpeechConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechConnectionFactory", function() { return SpeechConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.






class SpeechConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_3__["ConnectionFactoryBase"] {
    constructor() {
        super(...arguments);
        this.interactiveRelativeUri = "/speech/recognition/interactive/cognitiveservices/v1";
        this.conversationRelativeUri = "/speech/recognition/conversation/cognitiveservices/v1";
        this.dictationRelativeUri = "/speech/recognition/dictation/cognitiveservices/v1";
        this.create = (config, authInfo, connectionId) => {
            let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint, undefined);
            const queryParams = {};
            const endpointId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EndpointId, undefined);
            const language = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage, undefined);
            if (endpointId) {
                if (!endpoint || endpoint.search(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].DeploymentIdParamName) === -1) {
                    queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].DeploymentIdParamName] = endpointId;
                }
            }
            else if (language) {
                if (!endpoint || endpoint.search(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].LanguageParamName) === -1) {
                    queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].LanguageParamName] = language;
                }
            }
            if (!endpoint || endpoint.search(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].FormatParamName) === -1) {
                queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].FormatParamName] = config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormatPropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"].Simple]).toLowerCase();
            }
            this.setCommonUrlParams(config, queryParams, endpoint);
            if (!endpoint) {
                const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, undefined);
                const host = "wss://" + region + ".stt.speech.microsoft.com";
                switch (config.recognitionMode) {
                    case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionMode"].Conversation:
                        if (config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["ForceDictationPropertyName"], "false") === "true") {
                            endpoint = host + this.dictationRelativeUri;
                        }
                        else {
                            endpoint = host + this.conversationRelativeUri;
                        }
                        break;
                    case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionMode"].Dictation:
                        endpoint = host + this.dictationRelativeUri;
                        break;
                    default:
                        endpoint = host + this.interactiveRelativeUri; // default is interactive
                        break;
                }
            }
            const headers = {};
            headers[authInfo.headerName] = authInfo.token;
            headers[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].ConnectionIdHeader] = connectionId;
            return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, headers, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), connectionId);
        };
    }
}

//# sourceMappingURL=SpeechConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js ***!
  \**********************************************************************************************************************************/
/*! exports provided: SpeechConnectionMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechConnectionMessage", function() { return SpeechConnectionMessage; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

const PathHeaderName = "path";
const ContentTypeHeaderName = "content-type";
const RequestIdHeaderName = "x-requestid";
const RequestTimestampHeaderName = "x-timestamp";
class SpeechConnectionMessage extends _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessage"] {
    constructor(messageType, path, requestId, contentType, body, additionalHeaders, id) {
        if (!path) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("path");
        }
        if (!requestId) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("requestId");
        }
        const headers = {};
        headers[PathHeaderName] = path;
        headers[RequestIdHeaderName] = requestId;
        headers[RequestTimestampHeaderName] = new Date().toISOString();
        if (contentType) {
            headers[ContentTypeHeaderName] = contentType;
        }
        if (additionalHeaders) {
            for (const headerName in additionalHeaders) {
                if (headerName) {
                    headers[headerName] = additionalHeaders[headerName];
                }
            }
        }
        if (id) {
            super(messageType, body, headers, id);
        }
        else {
            super(messageType, body, headers);
        }
        this.privPath = path;
        this.privRequestId = requestId;
        this.privContentType = contentType;
        this.privAdditionalHeaders = additionalHeaders;
    }
    get path() {
        return this.privPath;
    }
    get requestId() {
        return this.privRequestId;
    }
    get contentType() {
        return this.privContentType;
    }
    get additionalHeaders() {
        return this.privAdditionalHeaders;
    }
}
SpeechConnectionMessage.fromConnectionMessage = (message) => {
    let path = null;
    let requestId = null;
    let contentType = null;
    let requestTimestamp = null;
    const additionalHeaders = {};
    if (message.headers) {
        for (const headerName in message.headers) {
            if (headerName) {
                if (headerName.toLowerCase() === PathHeaderName.toLowerCase()) {
                    path = message.headers[headerName];
                }
                else if (headerName.toLowerCase() === RequestIdHeaderName.toLowerCase()) {
                    requestId = message.headers[headerName];
                }
                else if (headerName.toLowerCase() === RequestTimestampHeaderName.toLowerCase()) {
                    requestTimestamp = message.headers[headerName];
                }
                else if (headerName.toLowerCase() === ContentTypeHeaderName.toLowerCase()) {
                    contentType = message.headers[headerName];
                }
                else {
                    additionalHeaders[headerName] = message.headers[headerName];
                }
            }
        }
    }
    return new SpeechConnectionMessage(message.messageType, path, requestId, contentType, message.body, additionalHeaders, message.id);
};

//# sourceMappingURL=SpeechConnectionMessage.Internal.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechContext.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechContext.js ***!
  \***************************************************************************************************************/
/*! exports provided: SpeechContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechContext", function() { return SpeechContext; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Represents the JSON used in the speech.context message sent to the speech service.
 * The dynamic grammar is always refreshed from the encapsulated dynamic grammar object.
 */
class SpeechContext {
    constructor(dynamicGrammar) {
        this.privContext = {};
        this.privDynamicGrammar = dynamicGrammar;
    }
    /**
     * Adds a section to the speech.context object.
     * @param sectionName Name of the section to add.
     * @param value JSON serializeable object that represents the value.
     */
    setSection(sectionName, value) {
        this.privContext[sectionName] = value;
    }
    toJSON() {
        const dgi = this.privDynamicGrammar.generateGrammarObject();
        this.setSection("dgi", dgi);
        const ret = JSON.stringify(this.privContext);
        return ret;
    }
}

//# sourceMappingURL=SpeechContext.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceRecognizer.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceRecognizer.js ***!
  \*************************************************************************************************************************/
/*! exports provided: SpeechServiceRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechServiceRecognizer", function() { return SpeechServiceRecognizer; });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


// tslint:disable-next-line:max-classes-per-file
class SpeechServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_1__["ServiceRecognizerBase"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, speechRecognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, speechRecognizer);
        this.privSpeechRecognizer = speechRecognizer;
    }
    processTypeSpecificMessages(connectionMessage, successCallback, errorCallBack) {
        let result;
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]();
        resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"].SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        switch (connectionMessage.path.toLowerCase()) {
            case "speech.hypothesis":
            case "speech.fragment":
                const hypothesis = _Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechHypothesis"].fromJSON(connectionMessage.textBody);
                const offset = hypothesis.Offset + this.privRequestSession.currentTurnAudioOffset;
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].RecognizingSpeech, hypothesis.Text, hypothesis.Duration, offset, undefined, connectionMessage.textBody, resultProps);
                this.privRequestSession.onHypothesis(offset);
                const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionEventArgs"](result, hypothesis.Duration, this.privRequestSession.sessionId);
                if (!!this.privSpeechRecognizer.recognizing) {
                    try {
                        this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer, ev);
                        /* tslint:disable:no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            case "speech.phrase":
                const simple = _Exports__WEBPACK_IMPORTED_MODULE_1__["SimpleSpeechPhrase"].fromJSON(connectionMessage.textBody);
                const resultReason = _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateRecognitionResult(simple.RecognitionStatus);
                this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + simple.Offset + simple.Duration);
                if (_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].Canceled === resultReason) {
                    const cancelReason = _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateCancelResult(simple.RecognitionStatus);
                    this.cancelRecognitionLocal(cancelReason, _Exports__WEBPACK_IMPORTED_MODULE_1__["EnumTranslation"].implTranslateCancelErrorCode(simple.RecognitionStatus), undefined, successCallback);
                }
                else {
                    if (!(this.privRequestSession.isSpeechEnded && resultReason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].NoMatch && simple.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].InitialSilenceTimeout)) {
                        if (this.privRecognizerConfig.parameters.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["OutputFormatPropertyName"]) === _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormat"][_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormat"].Simple]) {
                            result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](this.privRequestSession.requestId, resultReason, simple.DisplayText, simple.Duration, simple.Offset + this.privRequestSession.currentTurnAudioOffset, undefined, connectionMessage.textBody, resultProps);
                        }
                        else {
                            const detailed = _Exports__WEBPACK_IMPORTED_MODULE_1__["DetailedSpeechPhrase"].fromJSON(connectionMessage.textBody);
                            result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](this.privRequestSession.requestId, resultReason, detailed.RecognitionStatus === _Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionStatus"].Success ? detailed.NBest[0].Display : undefined, detailed.Duration, detailed.Offset + this.privRequestSession.currentTurnAudioOffset, undefined, connectionMessage.textBody, resultProps);
                        }
                        const event = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionEventArgs"](result, result.offset, this.privRequestSession.sessionId);
                        if (!!this.privSpeechRecognizer.recognized) {
                            try {
                                this.privSpeechRecognizer.recognized(this.privSpeechRecognizer, event);
                                /* tslint:disable:no-empty */
                            }
                            catch (error) {
                                // Not going to let errors in the event handler
                                // trip things up.
                            }
                        }
                    }
                    // report result to promise.
                    if (!!successCallback) {
                        try {
                            successCallback(result);
                        }
                        catch (e) {
                            if (!!errorCallBack) {
                                errorCallBack(e);
                            }
                        }
                        // Only invoke the call back once.
                        // and if it's successful don't invoke the
                        // error after that.
                        successCallback = undefined;
                        errorCallBack = undefined;
                    }
                }
                break;
            default:
                break;
        }
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error, cancelRecoCallback) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCodePropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCode"][errorCode]);
        if (!!this.privSpeechRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionCanceledEventArgs"](cancellationReason, error, errorCode, undefined, sessionId);
            try {
                this.privSpeechRecognizer.canceled(this.privSpeechRecognizer, cancelEvent);
                /* tslint:disable:no-empty */
            }
            catch (_a) { }
        }
        if (!!cancelRecoCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"](requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__["ResultReason"].Canceled, undefined, // Text
            undefined, // Druation
            undefined, // Offset
            error, undefined, // Json
            properties);
            try {
                cancelRecoCallback(result);
                /* tslint:disable:no-empty */
            }
            catch (_b) { }
        }
    }
}

//# sourceMappingURL=SpeechServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js ***!
  \******************************************************************************************************************************/
/*! exports provided: TranslationConnectionFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationConnectionFactory", function() { return TranslationConnectionFactory; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.





const TestHooksParamName = "testhooks";
const ConnectionIdHeader = "X-ConnectionId";
class TranslationConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_2__["ConnectionFactoryBase"] {
    constructor() {
        super(...arguments);
        this.create = (config, authInfo, connectionId) => {
            let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Endpoint, undefined);
            if (!endpoint) {
                const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_Region, undefined);
                endpoint = "wss://" + region + ".s2s.speech.microsoft.com/speech/translation/cognitiveservices/v1";
            }
            const queryParams = {
                from: config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_RecoLanguage),
                to: config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_TranslationToLanguages),
            };
            this.setCommonUrlParams(config, queryParams, endpoint);
            this.setUrlParameter(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_TranslationRequestStablePartialResult, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_4__["QueryParameterNames"].StableTranslation, config, queryParams, endpoint);
            const voiceName = "voice";
            const featureName = "features";
            if (config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_TranslationVoice, undefined) !== undefined) {
                queryParams[voiceName] = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_TranslationVoice);
                queryParams[featureName] = "texttospeech";
            }
            const headers = {};
            headers[authInfo.headerName] = authInfo.token;
            headers[ConnectionIdHeader] = connectionId;
            return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["WebsocketConnection"](endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_3__["WebsocketMessageFormatter"](), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["ProxyInfo"].fromRecognizerConfig(config), connectionId);
        };
    }
}

//# sourceMappingURL=TranslationConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationServiceRecognizer.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationServiceRecognizer.js ***!
  \******************************************************************************************************************************/
/*! exports provided: TranslationServiceRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationServiceRecognizer", function() { return TranslationServiceRecognizer; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



// tslint:disable-next-line:max-classes-per-file
class TranslationServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_2__["ServiceRecognizerBase"] {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, translationRecognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, translationRecognizer);
        this.privTranslationRecognizer = translationRecognizer;
    }
    processTypeSpecificMessages(connectionMessage, successCallback, errorCallBack) {
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        switch (connectionMessage.path.toLowerCase()) {
            case "translation.hypothesis":
                const result = this.fireEventForResult(_Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationHypothesis"].fromJSON(connectionMessage.textBody), resultProps);
                this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset + result.offset);
                if (!!this.privTranslationRecognizer.recognizing) {
                    try {
                        this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer, result);
                        /* tslint:disable:no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            case "translation.phrase":
                const translatedPhrase = _Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationPhrase"].fromJSON(connectionMessage.textBody);
                this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + translatedPhrase.Offset + translatedPhrase.Duration);
                if (translatedPhrase.RecognitionStatus === _Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionStatus"].Success) {
                    // OK, the recognition was successful. How'd the translation do?
                    const result = this.fireEventForResult(translatedPhrase, resultProps);
                    if (!!this.privTranslationRecognizer.recognized) {
                        try {
                            this.privTranslationRecognizer.recognized(this.privTranslationRecognizer, result);
                            /* tslint:disable:no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    // report result to promise.
                    if (!!successCallback) {
                        try {
                            successCallback(result.result);
                        }
                        catch (e) {
                            if (!!errorCallBack) {
                                errorCallBack(e);
                            }
                        }
                        // Only invoke the call back once.
                        // and if it's successful don't invoke the
                        // error after that.
                        successCallback = undefined;
                        errorCallBack = undefined;
                    }
                    break;
                }
                else {
                    const reason = _Exports__WEBPACK_IMPORTED_MODULE_2__["EnumTranslation"].implTranslateRecognitionResult(translatedPhrase.RecognitionStatus);
                    const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionResult"](undefined, this.privRequestSession.requestId, reason, translatedPhrase.Text, translatedPhrase.Duration, this.privRequestSession.currentTurnAudioOffset + translatedPhrase.Offset, undefined, connectionMessage.textBody, resultProps);
                    if (reason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled) {
                        const cancelReason = _Exports__WEBPACK_IMPORTED_MODULE_2__["EnumTranslation"].implTranslateCancelResult(translatedPhrase.RecognitionStatus);
                        this.cancelRecognitionLocal(cancelReason, _Exports__WEBPACK_IMPORTED_MODULE_2__["EnumTranslation"].implTranslateCancelErrorCode(translatedPhrase.RecognitionStatus), undefined, successCallback);
                    }
                    else {
                        if (!(this.privRequestSession.isSpeechEnded && reason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].NoMatch && translatedPhrase.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_2__["RecognitionStatus"].InitialSilenceTimeout)) {
                            const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionEventArgs"](result, result.offset, this.privRequestSession.sessionId);
                            if (!!this.privTranslationRecognizer.recognized) {
                                try {
                                    this.privTranslationRecognizer.recognized(this.privTranslationRecognizer, ev);
                                    /* tslint:disable:no-empty */
                                }
                                catch (error) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                        }
                        // report result to promise.
                        if (!!successCallback) {
                            try {
                                successCallback(result);
                            }
                            catch (e) {
                                if (!!errorCallBack) {
                                    errorCallBack(e);
                                }
                            }
                            // Only invoke the call back once.
                            // and if it's successful don't invoke the
                            // error after that.
                            successCallback = undefined;
                            errorCallBack = undefined;
                        }
                    }
                }
                break;
            case "translation.synthesis":
                this.sendSynthesisAudio(connectionMessage.binaryBody, this.privRequestSession.sessionId);
                break;
            case "translation.synthesis.end":
                const synthEnd = _Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationSynthesisEnd"].fromJSON(connectionMessage.textBody);
                switch (synthEnd.SynthesisStatus) {
                    case _Exports__WEBPACK_IMPORTED_MODULE_2__["SynthesisStatus"].Error:
                        if (!!this.privTranslationRecognizer.synthesizing) {
                            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationSynthesisResult"](_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled, undefined);
                            const retEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationSynthesisEventArgs"](result, this.privRequestSession.sessionId);
                            try {
                                this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer, retEvent);
                                /* tslint:disable:no-empty */
                            }
                            catch (error) {
                                // Not going to let errors in the event handler
                                // trip things up.
                            }
                        }
                        if (!!this.privTranslationRecognizer.canceled) {
                            // And raise a canceled event to send the rich(er) error message back.
                            const canceledResult = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionCanceledEventArgs"](this.privRequestSession.sessionId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationReason"].Error, synthEnd.FailureReason, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].ServiceError, null);
                            try {
                                this.privTranslationRecognizer.canceled(this.privTranslationRecognizer, canceledResult);
                                /* tslint:disable:no-empty */
                            }
                            catch (error) {
                                // Not going to let errors in the event handler
                                // trip things up.
                            }
                        }
                        break;
                    case _Exports__WEBPACK_IMPORTED_MODULE_2__["SynthesisStatus"].Success:
                        this.sendSynthesisAudio(undefined, this.privRequestSession.sessionId);
                        break;
                    default:
                        break;
                }
                break;
            default:
                break;
        }
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error, cancelRecoCallback) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyCollection"]();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["CancellationErrorCodePropertyName"], _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][errorCode]);
        if (!!this.privTranslationRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionCanceledEventArgs"](sessionId, cancellationReason, error, errorCode, undefined);
            try {
                this.privTranslationRecognizer.canceled(this.privTranslationRecognizer, cancelEvent);
                /* tslint:disable:no-empty */
            }
            catch (_a) { }
        }
        if (!!cancelRecoCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionResult"](undefined, // Translations
            requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].Canceled, undefined, // Text
            undefined, // Druation
            undefined, // Offset
            error, undefined, // Json
            properties);
            try {
                cancelRecoCallback(result);
                /* tslint:disable:no-empty */
            }
            catch (_b) { }
        }
    }
    fireEventForResult(serviceResult, properties) {
        let translations;
        if (undefined !== serviceResult.Translation.Translations) {
            translations = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["Translations"]();
            for (const translation of serviceResult.Translation.Translations) {
                translations.set(translation.Language, translation.Text);
            }
        }
        let resultReason;
        if (serviceResult instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["TranslationPhrase"]) {
            if (serviceResult.Translation.TranslationStatus === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["TranslationStatus"].Success) {
                resultReason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].TranslatedSpeech;
            }
            else {
                resultReason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].RecognizedSpeech;
            }
        }
        else {
            resultReason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].TranslatingSpeech;
        }
        const offset = serviceResult.Offset + this.privRequestSession.currentTurnAudioOffset;
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionResult"](translations, this.privRequestSession.requestId, resultReason, serviceResult.Text, serviceResult.Duration, offset, serviceResult.Translation.FailureReason, JSON.stringify(serviceResult), properties);
        const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationRecognitionEventArgs"](result, offset, this.privRequestSession.sessionId);
        return ev;
    }
    sendSynthesisAudio(audio, sessionId) {
        const reason = (undefined === audio) ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].SynthesizingAudioCompleted : _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["ResultReason"].SynthesizingAudio;
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationSynthesisResult"](reason, audio);
        const retEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__["TranslationSynthesisEventArgs"](result, sessionId);
        if (!!this.privTranslationRecognizer.synthesizing) {
            try {
                this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer, retEvent);
                /* tslint:disable:no-empty */
            }
            catch (error) {
                // Not going to let errors in the event handler
                // trip things up.
            }
        }
    }
}

//# sourceMappingURL=TranslationServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js ***!
  \*******************************************************************************************************************/
/*! exports provided: TranslationStatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationStatus", function() { return TranslationStatus; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines translation status.
 * @class TranslationStatus
 */
var TranslationStatus;
(function (TranslationStatus) {
    /**
     * @member TranslationStatus.Success
     */
    TranslationStatus[TranslationStatus["Success"] = 0] = "Success";
    /**
     * @member TranslationStatus.Error
     */
    TranslationStatus[TranslationStatus["Error"] = 1] = "Error";
})(TranslationStatus || (TranslationStatus = {}));

//# sourceMappingURL=TranslationStatus.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js ***!
  \***************************************************************************************************************************/
/*! exports provided: WebsocketMessageFormatter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebsocketMessageFormatter", function() { return WebsocketMessageFormatter; });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

const CRLF = "\r\n";
class WebsocketMessageFormatter {
    constructor() {
        this.toConnectionMessage = (message) => {
            const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
            try {
                if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
                    const textMessage = message.textContent;
                    let headers = {};
                    let body = null;
                    if (textMessage) {
                        const headerBodySplit = textMessage.split("\r\n\r\n");
                        if (headerBodySplit && headerBodySplit.length > 0) {
                            headers = this.parseHeaders(headerBodySplit[0]);
                            if (headerBodySplit.length > 1) {
                                body = headerBodySplit[1];
                            }
                        }
                    }
                    deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessage"](message.messageType, body, headers, message.id));
                }
                else if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary) {
                    const binaryMessage = message.binaryContent;
                    let headers = {};
                    let body = null;
                    if (!binaryMessage || binaryMessage.byteLength < 2) {
                        throw new Error("Invalid binary message format. Header length missing.");
                    }
                    const dataView = new DataView(binaryMessage);
                    const headerLength = dataView.getInt16(0);
                    if (binaryMessage.byteLength < headerLength + 2) {
                        throw new Error("Invalid binary message format. Header content missing.");
                    }
                    let headersString = "";
                    for (let i = 0; i < headerLength; i++) {
                        headersString += String.fromCharCode((dataView).getInt8(i + 2));
                    }
                    headers = this.parseHeaders(headersString);
                    if (binaryMessage.byteLength > headerLength + 2) {
                        body = binaryMessage.slice(2 + headerLength);
                    }
                    deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionMessage"](message.messageType, body, headers, message.id));
                }
            }
            catch (e) {
                deferral.reject(`Error formatting the message. Error: ${e}`);
            }
            return deferral.promise();
        };
        this.fromConnectionMessage = (message) => {
            const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["Deferred"]();
            try {
                if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
                    const payload = `${this.makeHeaders(message)}${CRLF}${message.textBody ? message.textBody : ""}`;
                    deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["RawWebsocketMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text, payload, message.id));
                }
                else if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary) {
                    const headersString = this.makeHeaders(message);
                    const content = message.binaryBody;
                    const headerInt8Array = new Int8Array(this.stringToArrayBuffer(headersString));
                    const payload = new ArrayBuffer(2 + headerInt8Array.byteLength + (content ? content.byteLength : 0));
                    const dataView = new DataView(payload);
                    dataView.setInt16(0, headerInt8Array.length);
                    for (let i = 0; i < headerInt8Array.byteLength; i++) {
                        dataView.setInt8(2 + i, headerInt8Array[i]);
                    }
                    if (content) {
                        const bodyInt8Array = new Int8Array(content);
                        for (let i = 0; i < bodyInt8Array.byteLength; i++) {
                            dataView.setInt8(2 + headerInt8Array.byteLength + i, bodyInt8Array[i]);
                        }
                    }
                    deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_0__["RawWebsocketMessage"](_common_Exports__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary, payload, message.id));
                }
            }
            catch (e) {
                deferral.reject(`Error formatting the message. ${e}`);
            }
            return deferral.promise();
        };
        this.makeHeaders = (message) => {
            let headersString = "";
            if (message.headers) {
                for (const header in message.headers) {
                    if (header) {
                        headersString += `${header}: ${message.headers[header]}${CRLF}`;
                    }
                }
            }
            return headersString;
        };
        this.parseHeaders = (headersString) => {
            const headers = {};
            if (headersString) {
                const headerMatches = headersString.match(/[^\r\n]+/g);
                if (headers) {
                    for (const header of headerMatches) {
                        if (header) {
                            const separatorIndex = header.indexOf(":");
                            const headerName = separatorIndex > 0 ? header.substr(0, separatorIndex).trim().toLowerCase() : header;
                            const headerValue = separatorIndex > 0 && header.length > (separatorIndex + 1) ?
                                header.substr(separatorIndex + 1).trim() :
                                "";
                            headers[headerName] = headerValue;
                        }
                    }
                }
            }
            return headers;
        };
        this.stringToArrayBuffer = (str) => {
            const buffer = new ArrayBuffer(str.length);
            const view = new DataView(buffer);
            for (let i = 0; i < str.length; i++) {
                view.setUint8(i, str.charCodeAt(i));
            }
            return buffer;
        };
    }
}

//# sourceMappingURL=WebsocketMessageFormatter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js ***!
  \************************************************************************************************************/
/*! exports provided: AudioSourceEvent, AudioSourceInitializingEvent, AudioSourceReadyEvent, AudioSourceOffEvent, AudioSourceErrorEvent, AudioStreamNodeEvent, AudioStreamNodeAttachingEvent, AudioStreamNodeAttachedEvent, AudioStreamNodeDetachedEvent, AudioStreamNodeErrorEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSourceEvent", function() { return AudioSourceEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSourceInitializingEvent", function() { return AudioSourceInitializingEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSourceReadyEvent", function() { return AudioSourceReadyEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSourceOffEvent", function() { return AudioSourceOffEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSourceErrorEvent", function() { return AudioSourceErrorEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeEvent", function() { return AudioStreamNodeEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeAttachingEvent", function() { return AudioStreamNodeAttachingEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeAttachedEvent", function() { return AudioStreamNodeAttachedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeDetachedEvent", function() { return AudioStreamNodeDetachedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeErrorEvent", function() { return AudioStreamNodeErrorEvent; });
/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class AudioSourceEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(eventName, audioSourceId, eventType = _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info) {
        super(eventName, eventType);
        this.privAudioSourceId = audioSourceId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
}
// tslint:disable-next-line:max-classes-per-file
class AudioSourceInitializingEvent extends AudioSourceEvent {
    constructor(audioSourceId) {
        super("AudioSourceInitializingEvent", audioSourceId);
    }
}
// tslint:disable-next-line:max-classes-per-file
class AudioSourceReadyEvent extends AudioSourceEvent {
    constructor(audioSourceId) {
        super("AudioSourceReadyEvent", audioSourceId);
    }
}
// tslint:disable-next-line:max-classes-per-file
class AudioSourceOffEvent extends AudioSourceEvent {
    constructor(audioSourceId) {
        super("AudioSourceOffEvent", audioSourceId);
    }
}
// tslint:disable-next-line:max-classes-per-file
class AudioSourceErrorEvent extends AudioSourceEvent {
    constructor(audioSourceId, error) {
        super("AudioSourceErrorEvent", audioSourceId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Error);
        this.privError = error;
    }
    get error() {
        return this.privError;
    }
}
// tslint:disable-next-line:max-classes-per-file
class AudioStreamNodeEvent extends AudioSourceEvent {
    constructor(eventName, audioSourceId, audioNodeId) {
        super(eventName, audioSourceId);
        this.privAudioNodeId = audioNodeId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
}
// tslint:disable-next-line:max-classes-per-file
class AudioStreamNodeAttachingEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId) {
        super("AudioStreamNodeAttachingEvent", audioSourceId, audioNodeId);
    }
}
// tslint:disable-next-line:max-classes-per-file
class AudioStreamNodeAttachedEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId) {
        super("AudioStreamNodeAttachedEvent", audioSourceId, audioNodeId);
    }
}
// tslint:disable-next-line:max-classes-per-file
class AudioStreamNodeDetachedEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId) {
        super("AudioStreamNodeDetachedEvent", audioSourceId, audioNodeId);
    }
}
// tslint:disable-next-line:max-classes-per-file
class AudioStreamNodeErrorEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId, error) {
        super("AudioStreamNodeErrorEvent", audioSourceId, audioNodeId);
        this.privError = error;
    }
    get error() {
        return this.privError;
    }
}

//# sourceMappingURL=AudioSourceEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js ***!
  \*******************************************************************************************************************/
/*! exports provided: ChunkedArrayBufferStream */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChunkedArrayBufferStream", function() { return ChunkedArrayBufferStream; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ChunkedArrayBufferStream extends _Exports__WEBPACK_IMPORTED_MODULE_0__["Stream"] {
    constructor(targetChunkSize, streamId) {
        super(streamId);
        this.privTargetChunkSize = targetChunkSize;
        this.privNextBufferReadyBytes = 0;
    }
    writeStreamChunk(chunk) {
        // No pending write, and the buffer is the right size so write it.
        if (chunk.isEnd ||
            (0 === this.privNextBufferReadyBytes && chunk.buffer.byteLength === this.privTargetChunkSize)) {
            super.writeStreamChunk(chunk);
            return;
        }
        let bytesCopiedFromBuffer = 0;
        while (bytesCopiedFromBuffer < chunk.buffer.byteLength) {
            // Fill the next buffer.
            if (undefined === this.privNextBufferToWrite) {
                this.privNextBufferToWrite = new ArrayBuffer(this.privTargetChunkSize);
                this.privNextBufferStartTime = chunk.timeReceived;
            }
            // Find out how many bytes we can copy into the read buffer.
            const bytesToCopy = Math.min(chunk.buffer.byteLength - bytesCopiedFromBuffer, this.privTargetChunkSize - this.privNextBufferReadyBytes);
            const targetView = new Uint8Array(this.privNextBufferToWrite);
            const sourceView = new Uint8Array(chunk.buffer.slice(bytesCopiedFromBuffer, bytesToCopy + bytesCopiedFromBuffer));
            targetView.set(sourceView, this.privNextBufferReadyBytes);
            this.privNextBufferReadyBytes += bytesToCopy;
            bytesCopiedFromBuffer += bytesToCopy;
            // Are we ready to write?
            if (this.privNextBufferReadyBytes === this.privTargetChunkSize) {
                super.writeStreamChunk({
                    buffer: this.privNextBufferToWrite,
                    isEnd: false,
                    timeReceived: this.privNextBufferStartTime,
                });
                this.privNextBufferReadyBytes = 0;
                this.privNextBufferToWrite = undefined;
            }
        }
    }
    close() {
        // Send whatever is pending, then close the base class.
        if (0 !== this.privNextBufferReadyBytes && !this.isClosed) {
            super.writeStreamChunk({
                buffer: this.privNextBufferToWrite.slice(0, this.privNextBufferReadyBytes),
                isEnd: false,
                timeReceived: this.privNextBufferStartTime,
            });
        }
        super.close();
    }
}

//# sourceMappingURL=ChunkedArrayBufferStream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js ***!
  \***********************************************************************************************************/
/*! exports provided: ConnectionEvent, ConnectionStartEvent, ConnectionEstablishedEvent, ConnectionClosedEvent, ConnectionEstablishErrorEvent, ConnectionMessageReceivedEvent, ConnectionMessageSentEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionEvent", function() { return ConnectionEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionStartEvent", function() { return ConnectionStartEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionEstablishedEvent", function() { return ConnectionEstablishedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionClosedEvent", function() { return ConnectionClosedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionEstablishErrorEvent", function() { return ConnectionEstablishErrorEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageReceivedEvent", function() { return ConnectionMessageReceivedEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageSentEvent", function() { return ConnectionMessageSentEvent; });
/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ConnectionEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["PlatformEvent"] {
    constructor(eventName, connectionId, eventType = _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Info) {
        super(eventName, eventType);
        this.privConnectionId = connectionId;
    }
    get connectionId() {
        return this.privConnectionId;
    }
}
// tslint:disable-next-line:max-classes-per-file
class ConnectionStartEvent extends ConnectionEvent {
    constructor(connectionId, uri, headers) {
        super("ConnectionStartEvent", connectionId);
        this.privUri = uri;
        this.privHeaders = headers;
    }
    get uri() {
        return this.privUri;
    }
    get headers() {
        return this.privHeaders;
    }
}
// tslint:disable-next-line:max-classes-per-file
class ConnectionEstablishedEvent extends ConnectionEvent {
    constructor(connectionId, metadata) {
        super("ConnectionEstablishedEvent", connectionId);
    }
}
// tslint:disable-next-line:max-classes-per-file
class ConnectionClosedEvent extends ConnectionEvent {
    constructor(connectionId, statusCode, reason) {
        super("ConnectionClosedEvent", connectionId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Debug);
        this.privRreason = reason;
        this.privStatusCode = statusCode;
    }
    get reason() {
        return this.privRreason;
    }
    get statusCode() {
        return this.privStatusCode;
    }
}
// tslint:disable-next-line:max-classes-per-file
class ConnectionEstablishErrorEvent extends ConnectionEvent {
    constructor(connectionId, statuscode, reason) {
        super("ConnectionEstablishErrorEvent", connectionId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__["EventType"].Error);
        this.privStatusCode = statuscode;
        this.privReason = reason;
    }
    get reason() {
        return this.privReason;
    }
    get statusCode() {
        return this.privStatusCode;
    }
}
// tslint:disable-next-line:max-classes-per-file
class ConnectionMessageReceivedEvent extends ConnectionEvent {
    constructor(connectionId, networkReceivedTimeISO, message) {
        super("ConnectionMessageReceivedEvent", connectionId);
        this.privNetworkReceivedTime = networkReceivedTimeISO;
        this.privMessage = message;
    }
    get networkReceivedTime() {
        return this.privNetworkReceivedTime;
    }
    get message() {
        return this.privMessage;
    }
}
// tslint:disable-next-line:max-classes-per-file
class ConnectionMessageSentEvent extends ConnectionEvent {
    constructor(connectionId, networkSentTimeISO, message) {
        super("ConnectionMessageSentEvent", connectionId);
        this.privNetworkSentTime = networkSentTimeISO;
        this.privMessage = message;
    }
    get networkSentTime() {
        return this.privNetworkSentTime;
    }
    get message() {
        return this.privMessage;
    }
}

//# sourceMappingURL=ConnectionEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js ***!
  \************************************************************************************************************/
/*! exports provided: MessageType, ConnectionMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageType", function() { return MessageType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessage", function() { return ConnectionMessage; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


var MessageType;
(function (MessageType) {
    MessageType[MessageType["Text"] = 0] = "Text";
    MessageType[MessageType["Binary"] = 1] = "Binary";
})(MessageType || (MessageType = {}));
class ConnectionMessage {
    constructor(messageType, body, headers, id) {
        this.privBody = null;
        if (messageType === MessageType.Text && body && !(typeof (body) === "string")) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Payload must be a string");
        }
        if (messageType === MessageType.Binary && body && !(body instanceof ArrayBuffer)) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Payload must be ArrayBuffer");
        }
        this.privMessageType = messageType;
        this.privBody = body;
        this.privHeaders = headers ? headers : {};
        this.privId = id ? id : Object(_Guid__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
    }
    get messageType() {
        return this.privMessageType;
    }
    get headers() {
        return this.privHeaders;
    }
    get body() {
        return this.privBody;
    }
    get textBody() {
        if (this.privMessageType === MessageType.Binary) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Not supported for binary message");
        }
        return this.privBody;
    }
    get binaryBody() {
        if (this.privMessageType === MessageType.Text) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Not supported for text message");
        }
        return this.privBody;
    }
    get id() {
        return this.privId;
    }
}

//# sourceMappingURL=ConnectionMessage.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionOpenResponse.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionOpenResponse.js ***!
  \*****************************************************************************************************************/
/*! exports provided: ConnectionOpenResponse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionOpenResponse", function() { return ConnectionOpenResponse; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class ConnectionOpenResponse {
    constructor(statusCode, reason) {
        this.privStatusCode = statusCode;
        this.privReason = reason;
    }
    get statusCode() {
        return this.privStatusCode;
    }
    get reason() {
        return this.privReason;
    }
}

//# sourceMappingURL=ConnectionOpenResponse.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js ***!
  \************************************************************************************************/
/*! exports provided: ArgumentNullError, InvalidOperationError, ObjectDisposedError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArgumentNullError", function() { return ArgumentNullError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvalidOperationError", function() { return InvalidOperationError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectDisposedError", function() { return ObjectDisposedError; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * The error that is thrown when an argument passed in is null.
 *
 * @export
 * @class ArgumentNullError
 * @extends {Error}
 */
class ArgumentNullError extends Error {
    /**
     * Creates an instance of ArgumentNullError.
     *
     * @param {string} argumentName - Name of the argument that is null
     *
     * @memberOf ArgumentNullError
     */
    constructor(argumentName) {
        super(argumentName);
        this.name = "ArgumentNull";
        this.message = argumentName;
    }
}
/**
 * The error that is thrown when an invalid operation is performed in the code.
 *
 * @export
 * @class InvalidOperationError
 * @extends {Error}
 */
// tslint:disable-next-line:max-classes-per-file
class InvalidOperationError extends Error {
    /**
     * Creates an instance of InvalidOperationError.
     *
     * @param {string} error - The error
     *
     * @memberOf InvalidOperationError
     */
    constructor(error) {
        super(error);
        this.name = "InvalidOperation";
        this.message = error;
    }
}
/**
 * The error that is thrown when an object is disposed.
 *
 * @export
 * @class ObjectDisposedError
 * @extends {Error}
 */
// tslint:disable-next-line:max-classes-per-file
class ObjectDisposedError extends Error {
    /**
     * Creates an instance of ObjectDisposedError.
     *
     * @param {string} objectName - The object that is disposed
     * @param {string} error - The error
     *
     * @memberOf ObjectDisposedError
     */
    constructor(objectName, error) {
        super(error);
        this.name = objectName + "ObjectDisposed";
        this.message = error;
    }
}

//# sourceMappingURL=Error.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js ***!
  \******************************************************************************************************/
/*! exports provided: EventSource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventSource", function() { return EventSource; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class EventSource {
    constructor(metadata) {
        this.privEventListeners = {};
        this.privIsDisposed = false;
        this.onEvent = (event) => {
            if (this.isDisposed()) {
                throw (new _Error__WEBPACK_IMPORTED_MODULE_0__["ObjectDisposedError"]("EventSource"));
            }
            if (this.metadata) {
                for (const paramName in this.metadata) {
                    if (paramName) {
                        if (event.metadata) {
                            if (!event.metadata[paramName]) {
                                event.metadata[paramName] = this.metadata[paramName];
                            }
                        }
                    }
                }
            }
            for (const eventId in this.privEventListeners) {
                if (eventId && this.privEventListeners[eventId]) {
                    this.privEventListeners[eventId](event);
                }
            }
        };
        this.attach = (onEventCallback) => {
            const id = Object(_Guid__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
            this.privEventListeners[id] = onEventCallback;
            return {
                detach: () => {
                    delete this.privEventListeners[id];
                },
            };
        };
        this.attachListener = (listener) => {
            return this.attach(listener.onEvent);
        };
        this.isDisposed = () => {
            return this.privIsDisposed;
        };
        this.dispose = () => {
            this.privEventListeners = null;
            this.privIsDisposed = true;
        };
        this.privMetadata = metadata;
    }
    get metadata() {
        return this.privMetadata;
    }
}

//# sourceMappingURL=EventSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js ***!
  \*************************************************************************************************/
/*! exports provided: Events */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Events", function() { return Events; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _EventSource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class Events {
    static get instance() {
        return Events.privInstance;
    }
}
Events.privInstance = new _EventSource__WEBPACK_IMPORTED_MODULE_1__["EventSource"]();
Events.setEventSource = (eventSource) => {
    if (!eventSource) {
        throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("eventSource");
    }
    Events.privInstance = eventSource;
};

//# sourceMappingURL=Events.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js ***!
  \**************************************************************************************************/
/*! exports provided: TranslationStatus, AudioSourceEvent, AudioSourceInitializingEvent, AudioSourceReadyEvent, AudioSourceOffEvent, AudioSourceErrorEvent, AudioStreamNodeEvent, AudioStreamNodeAttachingEvent, AudioStreamNodeAttachedEvent, AudioStreamNodeDetachedEvent, AudioStreamNodeErrorEvent, ConnectionEvent, ConnectionStartEvent, ConnectionEstablishedEvent, ConnectionClosedEvent, ConnectionEstablishErrorEvent, ConnectionMessageReceivedEvent, ConnectionMessageSentEvent, MessageType, ConnectionMessage, ConnectionOpenResponse, ArgumentNullError, InvalidOperationError, ObjectDisposedError, Events, EventSource, createGuid, createNoDashGuid, ConnectionState, List, EventType, PlatformEvent, PromiseState, PromiseResult, PromiseResultEventSource, PromiseHelper, Promise, Deferred, Sink, Queue, RawWebsocketMessage, RiffPcmEncoder, Stream, StreamReader, ChunkedArrayBufferStream */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AudioSourceEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioSourceEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioSourceEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioSourceInitializingEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioSourceInitializingEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioSourceReadyEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioSourceReadyEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioSourceOffEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioSourceOffEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioSourceErrorEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioSourceErrorEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeAttachingEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeAttachingEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeAttachedEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeAttachedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeDetachedEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeDetachedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamNodeErrorEvent", function() { return _AudioSourceEvents__WEBPACK_IMPORTED_MODULE_0__["AudioStreamNodeErrorEvent"]; });

/* harmony import */ var _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConnectionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionStartEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionStartEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEstablishedEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionEstablishedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionClosedEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionClosedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEstablishErrorEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionEstablishErrorEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageReceivedEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionMessageReceivedEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessageSentEvent", function() { return _ConnectionEvents__WEBPACK_IMPORTED_MODULE_1__["ConnectionMessageSentEvent"]; });

/* harmony import */ var _ConnectionMessage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MessageType", function() { return _ConnectionMessage__WEBPACK_IMPORTED_MODULE_2__["MessageType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionMessage", function() { return _ConnectionMessage__WEBPACK_IMPORTED_MODULE_2__["ConnectionMessage"]; });

/* harmony import */ var _ConnectionOpenResponse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConnectionOpenResponse */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionOpenResponse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionOpenResponse", function() { return _ConnectionOpenResponse__WEBPACK_IMPORTED_MODULE_3__["ConnectionOpenResponse"]; });

/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ArgumentNullError", function() { return _Error__WEBPACK_IMPORTED_MODULE_4__["ArgumentNullError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InvalidOperationError", function() { return _Error__WEBPACK_IMPORTED_MODULE_4__["InvalidOperationError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ObjectDisposedError", function() { return _Error__WEBPACK_IMPORTED_MODULE_4__["ObjectDisposedError"]; });

/* harmony import */ var _Events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Events */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Events", function() { return _Events__WEBPACK_IMPORTED_MODULE_5__["Events"]; });

/* harmony import */ var _EventSource__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./EventSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventSource", function() { return _EventSource__WEBPACK_IMPORTED_MODULE_6__["EventSource"]; });

/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createGuid", function() { return _Guid__WEBPACK_IMPORTED_MODULE_7__["createGuid"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createNoDashGuid", function() { return _Guid__WEBPACK_IMPORTED_MODULE_7__["createNoDashGuid"]; });

/* harmony import */ var _IConnection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./IConnection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionState", function() { return _IConnection__WEBPACK_IMPORTED_MODULE_8__["ConnectionState"]; });

/* harmony import */ var _List__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./List */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "List", function() { return _List__WEBPACK_IMPORTED_MODULE_9__["List"]; });

/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventType", function() { return _PlatformEvent__WEBPACK_IMPORTED_MODULE_10__["EventType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlatformEvent", function() { return _PlatformEvent__WEBPACK_IMPORTED_MODULE_10__["PlatformEvent"]; });

/* harmony import */ var _Promise__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Promise */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PromiseState", function() { return _Promise__WEBPACK_IMPORTED_MODULE_11__["PromiseState"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PromiseResult", function() { return _Promise__WEBPACK_IMPORTED_MODULE_11__["PromiseResult"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PromiseResultEventSource", function() { return _Promise__WEBPACK_IMPORTED_MODULE_11__["PromiseResultEventSource"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PromiseHelper", function() { return _Promise__WEBPACK_IMPORTED_MODULE_11__["PromiseHelper"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Promise", function() { return _Promise__WEBPACK_IMPORTED_MODULE_11__["Promise"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Deferred", function() { return _Promise__WEBPACK_IMPORTED_MODULE_11__["Deferred"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Sink", function() { return _Promise__WEBPACK_IMPORTED_MODULE_11__["Sink"]; });

/* harmony import */ var _Queue__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Queue */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Queue", function() { return _Queue__WEBPACK_IMPORTED_MODULE_12__["Queue"]; });

/* harmony import */ var _RawWebsocketMessage__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./RawWebsocketMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RawWebsocketMessage", function() { return _RawWebsocketMessage__WEBPACK_IMPORTED_MODULE_13__["RawWebsocketMessage"]; });

/* harmony import */ var _RiffPcmEncoder__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./RiffPcmEncoder */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RiffPcmEncoder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RiffPcmEncoder", function() { return _RiffPcmEncoder__WEBPACK_IMPORTED_MODULE_14__["RiffPcmEncoder"]; });

/* harmony import */ var _Stream__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./Stream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Stream.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Stream", function() { return _Stream__WEBPACK_IMPORTED_MODULE_15__["Stream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StreamReader", function() { return _Stream__WEBPACK_IMPORTED_MODULE_15__["StreamReader"]; });

/* harmony import */ var _common_speech_TranslationStatus__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../common.speech/TranslationStatus */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationStatus", function() { return _common_speech_TranslationStatus__WEBPACK_IMPORTED_MODULE_16__["TranslationStatus"]; });

/* harmony import */ var _ChunkedArrayBufferStream__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./ChunkedArrayBufferStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ChunkedArrayBufferStream", function() { return _ChunkedArrayBufferStream__WEBPACK_IMPORTED_MODULE_17__["ChunkedArrayBufferStream"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



















//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js ***!
  \***********************************************************************************************/
/*! exports provided: createGuid, createNoDashGuid */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGuid", function() { return createGuid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createNoDashGuid", function() { return createNoDashGuid; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
const createGuid = () => {
    let d = new Date().getTime();
    const guid = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
        const r = (d + Math.random() * 16) % 16 | 0;
        d = Math.floor(d / 16);
        return (c === "x" ? r : (r & 0x3 | 0x8)).toString(16);
    });
    return guid;
};
const createNoDashGuid = () => {
    return createGuid().replace(new RegExp("-", "g"), "").toUpperCase();
};


//# sourceMappingURL=Guid.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js ***!
  \******************************************************************************************************/
/*! exports provided: ConnectionState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionState", function() { return ConnectionState; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var ConnectionState;
(function (ConnectionState) {
    ConnectionState[ConnectionState["None"] = 0] = "None";
    ConnectionState[ConnectionState["Connected"] = 1] = "Connected";
    ConnectionState[ConnectionState["Connecting"] = 2] = "Connecting";
    ConnectionState[ConnectionState["Disconnected"] = 3] = "Disconnected";
})(ConnectionState || (ConnectionState = {}));

//# sourceMappingURL=IConnection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js ***!
  \***********************************************************************************************/
/*! exports provided: List */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "List", function() { return List; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class List {
    constructor(list) {
        this.privSubscriptionIdCounter = 0;
        this.privAddSubscriptions = {};
        this.privRemoveSubscriptions = {};
        this.privDisposedSubscriptions = {};
        this.privDisposeReason = null;
        this.get = (itemIndex) => {
            this.throwIfDisposed();
            return this.privList[itemIndex];
        };
        this.first = () => {
            return this.get(0);
        };
        this.last = () => {
            return this.get(this.length() - 1);
        };
        this.add = (item) => {
            this.throwIfDisposed();
            this.insertAt(this.privList.length, item);
        };
        this.insertAt = (index, item) => {
            this.throwIfDisposed();
            if (index === 0) {
                this.privList.unshift(item);
            }
            else if (index === this.privList.length) {
                this.privList.push(item);
            }
            else {
                this.privList.splice(index, 0, item);
            }
            this.triggerSubscriptions(this.privAddSubscriptions);
        };
        this.removeFirst = () => {
            this.throwIfDisposed();
            return this.removeAt(0);
        };
        this.removeLast = () => {
            this.throwIfDisposed();
            return this.removeAt(this.length() - 1);
        };
        this.removeAt = (index) => {
            this.throwIfDisposed();
            return this.remove(index, 1)[0];
        };
        this.remove = (index, count) => {
            this.throwIfDisposed();
            const removedElements = this.privList.splice(index, count);
            this.triggerSubscriptions(this.privRemoveSubscriptions);
            return removedElements;
        };
        this.clear = () => {
            this.throwIfDisposed();
            this.remove(0, this.length());
        };
        this.length = () => {
            this.throwIfDisposed();
            return this.privList.length;
        };
        this.onAdded = (addedCallback) => {
            this.throwIfDisposed();
            const subscriptionId = this.privSubscriptionIdCounter++;
            this.privAddSubscriptions[subscriptionId] = addedCallback;
            return {
                detach: () => {
                    delete this.privAddSubscriptions[subscriptionId];
                },
            };
        };
        this.onRemoved = (removedCallback) => {
            this.throwIfDisposed();
            const subscriptionId = this.privSubscriptionIdCounter++;
            this.privRemoveSubscriptions[subscriptionId] = removedCallback;
            return {
                detach: () => {
                    delete this.privRemoveSubscriptions[subscriptionId];
                },
            };
        };
        this.onDisposed = (disposedCallback) => {
            this.throwIfDisposed();
            const subscriptionId = this.privSubscriptionIdCounter++;
            this.privDisposedSubscriptions[subscriptionId] = disposedCallback;
            return {
                detach: () => {
                    delete this.privDisposedSubscriptions[subscriptionId];
                },
            };
        };
        this.join = (seperator) => {
            this.throwIfDisposed();
            return this.privList.join(seperator);
        };
        this.toArray = () => {
            const cloneCopy = Array();
            this.privList.forEach((val) => {
                cloneCopy.push(val);
            });
            return cloneCopy;
        };
        this.any = (callback) => {
            this.throwIfDisposed();
            if (callback) {
                return this.where(callback).length() > 0;
            }
            else {
                return this.length() > 0;
            }
        };
        this.all = (callback) => {
            this.throwIfDisposed();
            return this.where(callback).length() === this.length();
        };
        this.forEach = (callback) => {
            this.throwIfDisposed();
            for (let i = 0; i < this.length(); i++) {
                callback(this.privList[i], i);
            }
        };
        this.select = (callback) => {
            this.throwIfDisposed();
            const selectList = [];
            for (let i = 0; i < this.privList.length; i++) {
                selectList.push(callback(this.privList[i], i));
            }
            return new List(selectList);
        };
        this.where = (callback) => {
            this.throwIfDisposed();
            const filteredList = new List();
            for (let i = 0; i < this.privList.length; i++) {
                if (callback(this.privList[i], i)) {
                    filteredList.add(this.privList[i]);
                }
            }
            return filteredList;
        };
        this.orderBy = (compareFn) => {
            this.throwIfDisposed();
            const clonedArray = this.toArray();
            const orderedArray = clonedArray.sort(compareFn);
            return new List(orderedArray);
        };
        this.orderByDesc = (compareFn) => {
            this.throwIfDisposed();
            return this.orderBy((a, b) => compareFn(b, a));
        };
        this.clone = () => {
            this.throwIfDisposed();
            return new List(this.toArray());
        };
        this.concat = (list) => {
            this.throwIfDisposed();
            return new List(this.privList.concat(list.toArray()));
        };
        this.concatArray = (array) => {
            this.throwIfDisposed();
            return new List(this.privList.concat(array));
        };
        this.isDisposed = () => {
            return this.privList == null;
        };
        this.dispose = (reason) => {
            if (!this.isDisposed()) {
                this.privDisposeReason = reason;
                this.privList = null;
                this.privAddSubscriptions = null;
                this.privRemoveSubscriptions = null;
                this.triggerSubscriptions(this.privDisposedSubscriptions);
            }
        };
        this.throwIfDisposed = () => {
            if (this.isDisposed()) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ObjectDisposedError"]("List", this.privDisposeReason);
            }
        };
        this.triggerSubscriptions = (subscriptions) => {
            if (subscriptions) {
                for (const subscriptionId in subscriptions) {
                    if (subscriptionId) {
                        subscriptions[subscriptionId]();
                    }
                }
            }
        };
        this.privList = [];
        // copy the list rather than taking as is.
        if (list) {
            for (const item of list) {
                this.privList.push(item);
            }
        }
    }
}

//# sourceMappingURL=List.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js ***!
  \********************************************************************************************************/
/*! exports provided: EventType, PlatformEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventType", function() { return EventType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlatformEvent", function() { return PlatformEvent; });
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

var EventType;
(function (EventType) {
    EventType[EventType["Debug"] = 0] = "Debug";
    EventType[EventType["Info"] = 1] = "Info";
    EventType[EventType["Warning"] = 2] = "Warning";
    EventType[EventType["Error"] = 3] = "Error";
})(EventType || (EventType = {}));
class PlatformEvent {
    constructor(eventName, eventType) {
        this.privName = eventName;
        this.privEventId = Object(_Guid__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privEventTime = new Date().toISOString();
        this.privEventType = eventType;
        this.privMetadata = {};
    }
    get name() {
        return this.privName;
    }
    get eventId() {
        return this.privEventId;
    }
    get eventTime() {
        return this.privEventTime;
    }
    get eventType() {
        return this.privEventType;
    }
    get metadata() {
        return this.privMetadata;
    }
}

//# sourceMappingURL=PlatformEvent.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js ***!
  \**************************************************************************************************/
/*! exports provided: PromiseState, PromiseResult, PromiseResultEventSource, PromiseHelper, Promise, Deferred, Sink */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseState", function() { return PromiseState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseResult", function() { return PromiseResult; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseResultEventSource", function() { return PromiseResultEventSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseHelper", function() { return PromiseHelper; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Promise", function() { return Promise; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Deferred", function() { return Deferred; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sink", function() { return Sink; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

var PromiseState;
(function (PromiseState) {
    PromiseState[PromiseState["None"] = 0] = "None";
    PromiseState[PromiseState["Resolved"] = 1] = "Resolved";
    PromiseState[PromiseState["Rejected"] = 2] = "Rejected";
})(PromiseState || (PromiseState = {}));
class PromiseResult {
    constructor(promiseResultEventSource) {
        this.throwIfError = () => {
            if (this.isError) {
                throw this.error;
            }
        };
        promiseResultEventSource.on((result) => {
            if (!this.privIsCompleted) {
                this.privIsCompleted = true;
                this.privIsError = false;
                this.privResult = result;
            }
        }, (error) => {
            if (!this.privIsCompleted) {
                this.privIsCompleted = true;
                this.privIsError = true;
                this.privError = error;
            }
        });
    }
    get isCompleted() {
        return this.privIsCompleted;
    }
    get isError() {
        return this.privIsError;
    }
    get error() {
        return this.privError;
    }
    get result() {
        return this.privResult;
    }
}
// tslint:disable-next-line:max-classes-per-file
class PromiseResultEventSource {
    constructor() {
        this.setResult = (result) => {
            this.privOnSetResult(result);
        };
        this.setError = (error) => {
            this.privOnSetError(error);
        };
        this.on = (onSetResult, onSetError) => {
            this.privOnSetResult = onSetResult;
            this.privOnSetError = onSetError;
        };
    }
}
// tslint:disable-next-line:max-classes-per-file
class PromiseHelper {
}
PromiseHelper.whenAll = (promises) => {
    if (!promises || promises.length === 0) {
        throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("promises");
    }
    const deferred = new Deferred();
    const errors = [];
    let completedPromises = 0;
    const checkForCompletion = () => {
        completedPromises++;
        if (completedPromises === promises.length) {
            if (errors.length === 0) {
                deferred.resolve(true);
            }
            else {
                deferred.reject(errors.join(", "));
            }
        }
    };
    for (const promise of promises) {
        promise.on((r) => {
            checkForCompletion();
        }, (e) => {
            errors.push(e);
            checkForCompletion();
        });
    }
    return deferred.promise();
};
PromiseHelper.fromResult = (result) => {
    const deferred = new Deferred();
    deferred.resolve(result);
    return deferred.promise();
};
PromiseHelper.fromError = (error) => {
    const deferred = new Deferred();
    deferred.reject(error);
    return deferred.promise();
};
// TODO: replace with ES6 promises
// tslint:disable-next-line:max-classes-per-file
class Promise {
    constructor(sink) {
        this.result = () => {
            return this.privSink.result;
        };
        this.continueWith = (continuationCallback) => {
            if (!continuationCallback) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("continuationCallback");
            }
            const continuationDeferral = new Deferred();
            this.privSink.on((r) => {
                try {
                    const continuationResult = continuationCallback(this.privSink.result);
                    continuationDeferral.resolve(continuationResult);
                }
                catch (e) {
                    continuationDeferral.reject(e);
                }
            }, (error) => {
                try {
                    const continuationResult = continuationCallback(this.privSink.result);
                    continuationDeferral.resolve(continuationResult);
                }
                catch (e) {
                    continuationDeferral.reject(`'Error handler for error ${error} threw error ${e}'`);
                }
            });
            return continuationDeferral.promise();
        };
        this.onSuccessContinueWith = (continuationCallback) => {
            if (!continuationCallback) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("continuationCallback");
            }
            const continuationDeferral = new Deferred();
            this.privSink.on((r) => {
                try {
                    const continuationResult = continuationCallback(r);
                    continuationDeferral.resolve(continuationResult);
                }
                catch (e) {
                    continuationDeferral.reject(e);
                }
            }, (error) => {
                continuationDeferral.reject(error);
            });
            return continuationDeferral.promise();
        };
        this.continueWithPromise = (continuationCallback) => {
            if (!continuationCallback) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("continuationCallback");
            }
            const continuationDeferral = new Deferred();
            this.privSink.on((r) => {
                try {
                    const continuationPromise = continuationCallback(this.privSink.result);
                    if (!continuationPromise) {
                        throw new Error("'Continuation callback did not return promise'");
                    }
                    continuationPromise.on((continuationResult) => {
                        continuationDeferral.resolve(continuationResult);
                    }, (e) => {
                        continuationDeferral.reject(e);
                    });
                }
                catch (e) {
                    continuationDeferral.reject(e);
                }
            }, (error) => {
                try {
                    const continuationPromise = continuationCallback(this.privSink.result);
                    if (!continuationPromise) {
                        throw new Error("Continuation callback did not return promise");
                    }
                    continuationPromise.on((continuationResult) => {
                        continuationDeferral.resolve(continuationResult);
                    }, (e) => {
                        continuationDeferral.reject(e);
                    });
                }
                catch (e) {
                    continuationDeferral.reject(`'Error handler for error ${error} threw error ${e}'`);
                }
            });
            return continuationDeferral.promise();
        };
        this.onSuccessContinueWithPromise = (continuationCallback) => {
            if (!continuationCallback) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("continuationCallback");
            }
            const continuationDeferral = new Deferred();
            this.privSink.on((r) => {
                try {
                    const continuationPromise = continuationCallback(r);
                    if (!continuationPromise) {
                        throw new Error("Continuation callback did not return promise");
                    }
                    continuationPromise.on((continuationResult) => {
                        continuationDeferral.resolve(continuationResult);
                    }, (e) => {
                        continuationDeferral.reject(e);
                    });
                }
                catch (e) {
                    continuationDeferral.reject(e);
                }
            }, (error) => {
                continuationDeferral.reject(error);
            });
            return continuationDeferral.promise();
        };
        this.on = (successCallback, errorCallback) => {
            if (!successCallback) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("successCallback");
            }
            if (!errorCallback) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("errorCallback");
            }
            this.privSink.on(successCallback, errorCallback);
            return this;
        };
        this.finally = (callback) => {
            if (!callback) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ArgumentNullError"]("callback");
            }
            const callbackWrapper = (_) => {
                callback();
            };
            return this.on(callbackWrapper, callbackWrapper);
        };
        this.privSink = sink;
    }
}
// tslint:disable-next-line:max-classes-per-file
class Deferred {
    constructor() {
        this.state = () => {
            return this.privSink.state;
        };
        this.promise = () => {
            return this.privPromise;
        };
        this.resolve = (result) => {
            this.privSink.resolve(result);
            return this;
        };
        this.reject = (error) => {
            this.privSink.reject(error);
            return this;
        };
        this.privSink = new Sink();
        this.privPromise = new Promise(this.privSink);
    }
}
// tslint:disable-next-line:max-classes-per-file
class Sink {
    constructor() {
        this.privState = PromiseState.None;
        this.privPromiseResult = null;
        this.privPromiseResultEvents = null;
        this.privSuccessHandlers = [];
        this.privErrorHandlers = [];
        this.resolve = (result) => {
            if (this.privState !== PromiseState.None) {
                throw new Error("'Cannot resolve a completed promise'");
            }
            this.privState = PromiseState.Resolved;
            this.privPromiseResultEvents.setResult(result);
            for (let i = 0; i < this.privSuccessHandlers.length; i++) {
                this.executeSuccessCallback(result, this.privSuccessHandlers[i], this.privErrorHandlers[i]);
            }
            this.detachHandlers();
        };
        this.reject = (error) => {
            if (this.privState !== PromiseState.None) {
                throw new Error("'Cannot reject a completed promise'");
            }
            this.privState = PromiseState.Rejected;
            this.privPromiseResultEvents.setError(error);
            for (const errorHandler of this.privErrorHandlers) {
                this.executeErrorCallback(error, errorHandler);
            }
            this.detachHandlers();
        };
        this.on = (successCallback, errorCallback) => {
            if (successCallback == null) {
                successCallback = (r) => { return; };
            }
            if (this.privState === PromiseState.None) {
                this.privSuccessHandlers.push(successCallback);
                this.privErrorHandlers.push(errorCallback);
            }
            else {
                if (this.privState === PromiseState.Resolved) {
                    this.executeSuccessCallback(this.privPromiseResult.result, successCallback, errorCallback);
                }
                else if (this.privState === PromiseState.Rejected) {
                    this.executeErrorCallback(this.privPromiseResult.error, errorCallback);
                }
                this.detachHandlers();
            }
        };
        this.executeSuccessCallback = (result, successCallback, errorCallback) => {
            try {
                successCallback(result);
            }
            catch (e) {
                this.executeErrorCallback(`'Unhandled callback error: ${e}'`, errorCallback);
            }
        };
        this.executeErrorCallback = (error, errorCallback) => {
            if (errorCallback) {
                try {
                    errorCallback(error);
                }
                catch (e) {
                    throw new Error(`'Unhandled callback error: ${e}. InnerError: ${error}'`);
                }
            }
            else {
                throw new Error(`'Unhandled error: ${error}'`);
            }
        };
        this.detachHandlers = () => {
            this.privErrorHandlers = [];
            this.privSuccessHandlers = [];
        };
        this.privPromiseResultEvents = new PromiseResultEventSource();
        this.privPromiseResult = new PromiseResult(this.privPromiseResultEvents);
    }
    get state() {
        return this.privState;
    }
    get result() {
        return this.privPromiseResult;
    }
}

//# sourceMappingURL=Promise.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js ***!
  \************************************************************************************************/
/*! exports provided: Queue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Queue", function() { return Queue; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _List__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./List */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js");
/* harmony import */ var _Promise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Promise */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



var SubscriberType;
(function (SubscriberType) {
    SubscriberType[SubscriberType["Dequeue"] = 0] = "Dequeue";
    SubscriberType[SubscriberType["Peek"] = 1] = "Peek";
})(SubscriberType || (SubscriberType = {}));
class Queue {
    constructor(list) {
        this.privPromiseStore = new _List__WEBPACK_IMPORTED_MODULE_1__["List"]();
        this.privIsDrainInProgress = false;
        this.privIsDisposing = false;
        this.privDisposeReason = null;
        this.enqueue = (item) => {
            this.throwIfDispose();
            this.enqueueFromPromise(_Promise__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(item));
        };
        this.enqueueFromPromise = (promise) => {
            this.throwIfDispose();
            this.privPromiseStore.add(promise);
            promise.finally(() => {
                while (this.privPromiseStore.length() > 0) {
                    if (!this.privPromiseStore.first().result().isCompleted) {
                        break;
                    }
                    else {
                        const p = this.privPromiseStore.removeFirst();
                        if (!p.result().isError) {
                            this.privList.add(p.result().result);
                        }
                        else {
                            // TODO: Log as warning.
                        }
                    }
                }
            });
        };
        this.dequeue = () => {
            this.throwIfDispose();
            const deferredSubscriber = new _Promise__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
            if (this.privSubscribers) {
                this.privSubscribers.add({ deferral: deferredSubscriber, type: SubscriberType.Dequeue });
                this.drain();
            }
            return deferredSubscriber.promise();
        };
        this.peek = () => {
            this.throwIfDispose();
            const deferredSubscriber = new _Promise__WEBPACK_IMPORTED_MODULE_2__["Deferred"]();
            const subs = this.privSubscribers;
            if (subs) {
                this.privSubscribers.add({ deferral: deferredSubscriber, type: SubscriberType.Peek });
                this.drain();
            }
            return deferredSubscriber.promise();
        };
        this.length = () => {
            this.throwIfDispose();
            return this.privList.length();
        };
        this.isDisposed = () => {
            return this.privSubscribers == null;
        };
        this.drainAndDispose = (pendingItemProcessor, reason) => {
            if (!this.isDisposed() && !this.privIsDisposing) {
                this.privDisposeReason = reason;
                this.privIsDisposing = true;
                const subs = this.privSubscribers;
                if (subs) {
                    while (subs.length() > 0) {
                        const subscriber = subs.removeFirst();
                        // TODO: this needs work (Resolve(null) instead?).
                        subscriber.deferral.resolve(undefined);
                        // subscriber.deferral.reject("Disposed");
                    }
                    // note: this block assumes cooperative multitasking, i.e.,
                    // between the if-statement and the assignment there are no
                    // thread switches.
                    // Reason is that between the initial const = this.; and this
                    // point there is the derral.resolve() operation that might have
                    // caused recursive calls to the Queue, especially, calling
                    // Dispose() on the queue alredy (which would reset the var
                    // here to null!).
                    // That should generally hold true for javascript...
                    if (this.privSubscribers === subs) {
                        this.privSubscribers = subs;
                    }
                }
                for (const detachable of this.privDetachables) {
                    detachable.detach();
                }
                if (this.privPromiseStore.length() > 0 && pendingItemProcessor) {
                    return _Promise__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"]
                        .whenAll(this.privPromiseStore.toArray())
                        .continueWith(() => {
                        this.privSubscribers = null;
                        this.privList.forEach((item, index) => {
                            pendingItemProcessor(item);
                        });
                        this.privList = null;
                        return true;
                    });
                }
                else {
                    this.privSubscribers = null;
                    this.privList = null;
                }
            }
            return _Promise__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(true);
        };
        this.dispose = (reason) => {
            this.drainAndDispose(null, reason);
        };
        this.drain = () => {
            if (!this.privIsDrainInProgress && !this.privIsDisposing) {
                this.privIsDrainInProgress = true;
                const subs = this.privSubscribers;
                const lists = this.privList;
                if (subs && lists) {
                    while (lists.length() > 0 && subs.length() > 0 && !this.privIsDisposing) {
                        const subscriber = subs.removeFirst();
                        if (subscriber.type === SubscriberType.Peek) {
                            subscriber.deferral.resolve(lists.first());
                        }
                        else {
                            const dequeuedItem = lists.removeFirst();
                            subscriber.deferral.resolve(dequeuedItem);
                        }
                    }
                    // note: this block assumes cooperative multitasking, i.e.,
                    // between the if-statement and the assignment there are no
                    // thread switches.
                    // Reason is that between the initial const = this.; and this
                    // point there is the derral.resolve() operation that might have
                    // caused recursive calls to the Queue, especially, calling
                    // Dispose() on the queue alredy (which would reset the var
                    // here to null!).
                    // That should generally hold true for javascript...
                    if (this.privSubscribers === subs) {
                        this.privSubscribers = subs;
                    }
                    // note: this block assumes cooperative multitasking, i.e.,
                    // between the if-statement and the assignment there are no
                    // thread switches.
                    // Reason is that between the initial const = this.; and this
                    // point there is the derral.resolve() operation that might have
                    // caused recursive calls to the Queue, especially, calling
                    // Dispose() on the queue alredy (which would reset the var
                    // here to null!).
                    // That should generally hold true for javascript...
                    if (this.privList === lists) {
                        this.privList = lists;
                    }
                }
                this.privIsDrainInProgress = false;
            }
        };
        this.throwIfDispose = () => {
            if (this.isDisposed()) {
                if (this.privDisposeReason) {
                    throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"](this.privDisposeReason);
                }
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["ObjectDisposedError"]("Queue");
            }
            else if (this.privIsDisposing) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Queue disposing");
            }
        };
        this.privList = list ? list : new _List__WEBPACK_IMPORTED_MODULE_1__["List"]();
        this.privDetachables = [];
        this.privSubscribers = new _List__WEBPACK_IMPORTED_MODULE_1__["List"]();
        this.privDetachables.push(this.privList.onAdded(this.drain));
    }
}

//# sourceMappingURL=Queue.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js ***!
  \**************************************************************************************************************/
/*! exports provided: RawWebsocketMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RawWebsocketMessage", function() { return RawWebsocketMessage; });
/* harmony import */ var _ConnectionMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class RawWebsocketMessage {
    constructor(messageType, payload, id) {
        this.privPayload = null;
        if (!payload) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_1__["ArgumentNullError"]("payload");
        }
        if (messageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary && !(payload instanceof ArrayBuffer)) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_1__["InvalidOperationError"]("Payload must be ArrayBuffer");
        }
        if (messageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text && !(typeof (payload) === "string")) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_1__["InvalidOperationError"]("Payload must be a string");
        }
        this.privMessageType = messageType;
        this.privPayload = payload;
        this.privId = id ? id : Object(_Guid__WEBPACK_IMPORTED_MODULE_2__["createNoDashGuid"])();
    }
    get messageType() {
        return this.privMessageType;
    }
    get payload() {
        return this.privPayload;
    }
    get textContent() {
        if (this.privMessageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Binary) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_1__["InvalidOperationError"]("Not supported for binary message");
        }
        return this.privPayload;
    }
    get binaryContent() {
        if (this.privMessageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_0__["MessageType"].Text) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_1__["InvalidOperationError"]("Not supported for text message");
        }
        return this.privPayload;
    }
    get id() {
        return this.privId;
    }
}

//# sourceMappingURL=RawWebsocketMessage.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RiffPcmEncoder.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RiffPcmEncoder.js ***!
  \*********************************************************************************************************/
/*! exports provided: RiffPcmEncoder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RiffPcmEncoder", function() { return RiffPcmEncoder; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class RiffPcmEncoder {
    constructor(actualSampleRate, desiredSampleRate) {
        this.privChannelCount = 1;
        this.encode = (needHeader, actualAudioFrame) => {
            const audioFrame = this.downSampleAudioFrame(actualAudioFrame, this.privActualSampleRate, this.privDesiredSampleRate);
            if (!audioFrame) {
                return null;
            }
            const audioLength = audioFrame.length * 2;
            if (!needHeader) {
                const buffer = new ArrayBuffer(audioLength);
                const view = new DataView(buffer);
                this.floatTo16BitPCM(view, 0, audioFrame);
                return buffer;
            }
            const buffer = new ArrayBuffer(44 + audioLength);
            const bitsPerSample = 16;
            const bytesPerSample = bitsPerSample / 8;
            // We dont know ahead of time about the length of audio to stream. So set to 0.
            const fileLength = 0;
            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView
            const view = new DataView(buffer);
            /* RIFF identifier */
            this.setString(view, 0, "RIFF");
            /* file length */
            view.setUint32(4, fileLength, true);
            /* RIFF type & Format */
            this.setString(view, 8, "WAVEfmt ");
            /* format chunk length */
            view.setUint32(16, 16, true);
            /* sample format (raw) */
            view.setUint16(20, 1, true);
            /* channel count */
            view.setUint16(22, this.privChannelCount, true);
            /* sample rate */
            view.setUint32(24, this.privDesiredSampleRate, true);
            /* byte rate (sample rate * block align) */
            view.setUint32(28, this.privDesiredSampleRate * this.privChannelCount * bytesPerSample, true);
            /* block align (channel count * bytes per sample) */
            view.setUint16(32, this.privChannelCount * bytesPerSample, true);
            /* bits per sample */
            view.setUint16(34, bitsPerSample, true);
            /* data chunk identifier */
            this.setString(view, 36, "data");
            /* data chunk length */
            view.setUint32(40, fileLength, true);
            this.floatTo16BitPCM(view, 44, audioFrame);
            return buffer;
        };
        this.setString = (view, offset, str) => {
            for (let i = 0; i < str.length; i++) {
                view.setUint8(offset + i, str.charCodeAt(i));
            }
        };
        this.floatTo16BitPCM = (view, offset, input) => {
            for (let i = 0; i < input.length; i++, offset += 2) {
                const s = Math.max(-1, Math.min(1, input[i]));
                view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);
            }
        };
        this.downSampleAudioFrame = (srcFrame, srcRate, dstRate) => {
            if (dstRate === srcRate || dstRate > srcRate) {
                return srcFrame;
            }
            const ratio = srcRate / dstRate;
            const dstLength = Math.round(srcFrame.length / ratio);
            const dstFrame = new Float32Array(dstLength);
            let srcOffset = 0;
            let dstOffset = 0;
            while (dstOffset < dstLength) {
                const nextSrcOffset = Math.round((dstOffset + 1) * ratio);
                let accum = 0;
                let count = 0;
                while (srcOffset < nextSrcOffset && srcOffset < srcFrame.length) {
                    accum += srcFrame[srcOffset++];
                    count++;
                }
                dstFrame[dstOffset++] = accum / count;
            }
            return dstFrame;
        };
        this.privActualSampleRate = actualSampleRate;
        this.privDesiredSampleRate = desiredSampleRate;
    }
}

//# sourceMappingURL=RiffPcmEncoder.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Stream.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Stream.js ***!
  \*************************************************************************************************/
/*! exports provided: Stream, StreamReader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Stream", function() { return Stream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StreamReader", function() { return StreamReader; });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _Queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Queue */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class Stream {
    constructor(streamId) {
        this.privReaderIdCounter = 1;
        this.privIsEnded = false;
        this.getReader = () => {
            const readerId = this.privReaderIdCounter;
            this.privReaderIdCounter++;
            const readerQueue = new _Queue__WEBPACK_IMPORTED_MODULE_2__["Queue"]();
            const currentLength = this.privStreambuffer.length;
            this.privReaderQueues[readerId] = readerQueue;
            for (let i = 0; i < currentLength; i++) {
                readerQueue.enqueue(this.privStreambuffer[i]);
            }
            return new StreamReader(this.privId, readerQueue, () => {
                delete this.privReaderQueues[readerId];
            });
        };
        this.throwIfClosed = () => {
            if (this.privIsEnded) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Stream closed");
            }
        };
        this.privId = streamId ? streamId : Object(_Guid__WEBPACK_IMPORTED_MODULE_1__["createNoDashGuid"])();
        this.privStreambuffer = [];
        this.privReaderQueues = {};
    }
    get isClosed() {
        return this.privIsEnded;
    }
    get id() {
        return this.privId;
    }
    close() {
        if (!this.privIsEnded) {
            this.writeStreamChunk({
                buffer: null,
                isEnd: true,
                timeReceived: Date.now(),
            });
            this.privIsEnded = true;
        }
    }
    writeStreamChunk(streamChunk) {
        this.throwIfClosed();
        this.privStreambuffer.push(streamChunk);
        for (const readerId in this.privReaderQueues) {
            if (!this.privReaderQueues[readerId].isDisposed()) {
                try {
                    this.privReaderQueues[readerId].enqueue(streamChunk);
                }
                catch (e) {
                    // Do nothing
                }
            }
        }
    }
}
// tslint:disable-next-line:max-classes-per-file
class StreamReader {
    constructor(streamId, readerQueue, onClose) {
        this.privIsClosed = false;
        this.read = () => {
            if (this.isClosed) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("StreamReader closed");
            }
            return this.privReaderQueue
                .dequeue()
                .onSuccessContinueWith((streamChunk) => {
                if (streamChunk === undefined || streamChunk.isEnd) {
                    this.privReaderQueue.dispose("End of stream reached");
                }
                return streamChunk;
            });
        };
        this.close = () => {
            if (!this.privIsClosed) {
                this.privIsClosed = true;
                this.privReaderQueue.dispose("StreamReader closed");
                this.privOnClose();
            }
        };
        this.privReaderQueue = readerQueue;
        this.privOnClose = onClose;
        this.privStreamId = streamId;
    }
    get isClosed() {
        return this.privIsClosed;
    }
    get streamId() {
        return this.privStreamId;
    }
}

//# sourceMappingURL=Stream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ActivityReceivedEventArgs.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ActivityReceivedEventArgs.js ***!
  \*****************************************************************************************************************/
/*! exports provided: ActivityReceivedEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActivityReceivedEventArgs", function() { return ActivityReceivedEventArgs; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of received message/events.
 * @class ActivityReceivedEventArgs
 */
class ActivityReceivedEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {any} activity - The activity..
     */
    constructor(activity, audioStream) {
        this.privActivity = activity;
        this.privAudioStream = audioStream;
    }
    /**
     * Gets the received activity
     * @member ActivityReceivedEventArgs.prototype.activity
     * @function
     * @public
     * @returns {any} the received activity.
     */
    get activity() {
        return this.privActivity;
    }
    get audioStream() {
        return this.privAudioStream;
    }
}

//# sourceMappingURL=ActivityReceivedEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js ***!
  \*********************************************************************************************************/
/*! exports provided: AudioConfig, AudioConfigImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioConfig", function() { return AudioConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioConfigImpl", function() { return AudioConfigImpl; });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _AudioInputStream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AudioInputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.




/**
 * Represents audio input configuration used for specifying what type of input to use (microphone, file, stream).
 * @class AudioConfig
 */
class AudioConfig {
    /**
     * Creates an AudioConfig object representing the default microphone on the system.
     * @member AudioConfig.fromDefaultMicrophoneInput
     * @function
     * @public
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromDefaultMicrophoneInput() {
        const pcmRecorder = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["PcmRecorder"]();
        return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["MicAudioSource"](pcmRecorder, _AudioInputStream__WEBPACK_IMPORTED_MODULE_3__["bufferSize"]));
    }
    /**
     * Creates an AudioConfig object representing a microphone with the specified device ID.
     * @member AudioConfig.fromMicrophoneInput
     * @function
     * @public
     * @param {string | undefined} deviceId - Specifies the device ID of the microphone to be used.
     *        Default microphone is used the value is omitted.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromMicrophoneInput(deviceId) {
        const pcmRecorder = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["PcmRecorder"]();
        return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["MicAudioSource"](pcmRecorder, _AudioInputStream__WEBPACK_IMPORTED_MODULE_3__["bufferSize"], deviceId));
    }
    /**
     * Creates an AudioConfig object representing the specified file.
     * @member AudioConfig.fromWavFileInput
     * @function
     * @public
     * @param {File} fileName - Specifies the audio input file. Currently, only WAV / PCM with 16-bit
     *        samples, 16 kHz sample rate, and a single channel (Mono) is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromWavFileInput(file) {
        return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__["FileAudioSource"](file));
    }
    /**
     * Creates an AudioConfig object representing the specified stream.
     * @member AudioConfig.fromStreamInput
     * @function
     * @public
     * @param {AudioInputStream | PullAudioInputStreamCallback} audioStream - Specifies the custom audio input
     *        stream. Currently, only WAV / PCM with 16-bit samples, 16 kHz sample rate, and a single channel
     *        (Mono) is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromStreamInput(audioStream) {
        if (audioStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["PullAudioInputStreamCallback"]) {
            return new AudioConfigImpl(new _AudioInputStream__WEBPACK_IMPORTED_MODULE_3__["PullAudioInputStreamImpl"](audioStream));
        }
        if (audioStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_2__["AudioInputStream"]) {
            return new AudioConfigImpl(audioStream);
        }
        throw new Error("Not Supported Type");
    }
}
/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class AudioConfigImpl
 */
// tslint:disable-next-line:max-classes-per-file
class AudioConfigImpl extends AudioConfig {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {IAudioSource} source - An audio source.
     */
    constructor(source) {
        super();
        this.privSource = source;
    }
    /**
     * Format information for the audio
     */
    get format() {
        return this.privSource.format;
    }
    /**
     * @member AudioConfigImpl.prototype.close
     * @function
     * @public
     */
    close() {
        this.privSource.turnOff();
    }
    /**
     * @member AudioConfigImpl.prototype.id
     * @function
     * @public
     */
    id() {
        return this.privSource.id();
    }
    /**
     * @member AudioConfigImpl.prototype.turnOn
     * @function
     * @public
     * @returns {Promise<boolean>} A promise.
     */
    turnOn() {
        return this.privSource.turnOn();
    }
    /**
     * @member AudioConfigImpl.prototype.attach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     * @returns {Promise<IAudioStreamNode>} A promise.
     */
    attach(audioNodeId) {
        return this.privSource.attach(audioNodeId);
    }
    /**
     * @member AudioConfigImpl.prototype.detach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     */
    detach(audioNodeId) {
        return this.detach(audioNodeId);
    }
    /**
     * @member AudioConfigImpl.prototype.turnOff
     * @function
     * @public
     * @returns {Promise<boolean>} A promise.
     */
    turnOff() {
        return this.privSource.turnOff();
    }
    /**
     * @member AudioConfigImpl.prototype.events
     * @function
     * @public
     * @returns {EventSource<AudioSourceEvent>} An event source for audio events.
     */
    get events() {
        return this.privSource.events;
    }
    setProperty(name, value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(value, "value");
        if (undefined !== this.privSource.setProperty) {
            this.privSource.setProperty(name, value);
        }
        else {
            throw new Error("This AudioConfig instance does not support setting properties.");
        }
    }
    getProperty(name, def) {
        if (undefined !== this.privSource.getProperty) {
            return this.privSource.getProperty(name, def);
        }
        else {
            throw new Error("This AudioConfig instance does not support getting properties.");
        }
        return def;
    }
    get deviceInfo() {
        return this.privSource.deviceInfo;
    }
}

//# sourceMappingURL=AudioConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js ***!
  \**************************************************************************************************************/
/*! exports provided: bufferSize, AudioInputStream, PushAudioInputStream, PushAudioInputStreamImpl, PullAudioInputStream, PullAudioInputStreamImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bufferSize", function() { return bufferSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioInputStream", function() { return AudioInputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PushAudioInputStream", function() { return PushAudioInputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PushAudioInputStreamImpl", function() { return PushAudioInputStreamImpl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStream", function() { return PullAudioInputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStreamImpl", function() { return PullAudioInputStreamImpl; });
/* harmony import */ var _src_common_Guid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/common/Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.





const bufferSize = 4096;
/**
 * Represents audio input stream used for custom audio input configurations.
 * @class AudioInputStream
 */
class AudioInputStream {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    constructor() { }
    /**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member AudioInputStream.createPushStream
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     *        written to the push audio stream's write() method (currently only support 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The audio input stream being created.
     */
    static createPushStream(format) {
        return PushAudioInputStream.create(format);
    }
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for read()
     * and close() methods.
     * @member AudioInputStream.createPullStream
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object, derived from
     *        PullAudioInputStreamCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be returned from
     *        the callback's read() method (currently only support 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The audio input stream being created.
     */
    static createPullStream(callback, format) {
        return PullAudioInputStream.create(callback, format);
        // throw new Error("Oops");
    }
}
/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @class PushAudioInputStream
 */
// tslint:disable-next-line:max-classes-per-file
class PushAudioInputStream extends AudioInputStream {
    /**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member PushAudioInputStream.create
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be written to the
     *        push audio stream's write() method (currently only support 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The push audio input stream being created.
     */
    static create(format) {
        return new PushAudioInputStreamImpl(bufferSize, format);
    }
}
/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @private
 * @class PushAudioInputStreamImpl
 */
// tslint:disable-next-line:max-classes-per-file
class PushAudioInputStreamImpl extends PushAudioInputStream {
    /**
     * Creates and initalizes an instance with the given values.
     * @constructor
     * @param {AudioStreamFormat} format - The audio stream format.
     */
    constructor(chunkSize, format) {
        super();
        this.onEvent = (event) => {
            this.privEvents.onEvent(event);
            _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(event);
        };
        if (format === undefined) {
            this.privFormat = _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_4__["AudioStreamFormatImpl"].getDefaultInputFormat();
        }
        else {
            this.privFormat = format;
        }
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["EventSource"]();
        this.privId = Object(_src_common_Guid__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privStream = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["ChunkedArrayBufferStream"](chunkSize);
    }
    /**
     * Format information for the audio
     */
    get format() {
        return this.privFormat;
    }
    /**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PushAudioInputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */
    write(dataBuffer) {
        this.privStream.writeStreamChunk({
            buffer: dataBuffer,
            isEnd: false,
            timeReceived: Date.now()
        });
    }
    /**
     * Closes the stream.
     * @member PushAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */
    close() {
        this.privStream.close();
    }
    id() {
        return this.privId;
    }
    turnOn() {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceInitializingEvent"](this.privId)); // no stream id
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceReadyEvent"](this.privId));
        return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(true);
    }
    attach(audioNodeId) {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeAttachingEvent"](this.privId, audioNodeId));
        return this.turnOn()
            .onSuccessContinueWith((_) => {
            // For now we support a single parallel reader of the pushed stream.
            // So we can simiply hand the stream to the recognizer and let it recognize.
            return this.privStream.getReader();
        })
            .onSuccessContinueWith((streamReader) => {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeAttachedEvent"](this.privId, audioNodeId));
            return {
                detach: () => {
                    streamReader.close();
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
                    this.turnOff();
                },
                id: () => {
                    return audioNodeId;
                },
                read: () => {
                    return streamReader.read();
                },
            };
        });
    }
    detach(audioNodeId) {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
    }
    turnOff() {
        return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(false);
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult({
            bitspersample: this.privFormat.bitsPerSample,
            channelcount: this.privFormat.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["connectivity"].Unknown,
            manufacturer: "Speech SDK",
            model: "PushStream",
            samplerate: this.privFormat.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["type"].Stream,
        });
    }
}
/*
 * Represents audio input stream used for custom audio input configurations.
 * @class PullAudioInputStream
 */
// tslint:disable-next-line:max-classes-per-file
class PullAudioInputStream extends AudioInputStream {
    /**
     * Creates and initializes and instance.
     * @constructor
     */
    constructor() { super(); }
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @member PullAudioInputStream.create
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     *        derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     *        returned from the callback's read() method (currently only support 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The push audio input stream being created.
     */
    static create(callback, format) {
        return new PullAudioInputStreamImpl(callback, format);
    }
}
/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class PullAudioInputStreamImpl
 */
// tslint:disable-next-line:max-classes-per-file
class PullAudioInputStreamImpl extends PullAudioInputStream {
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @constructor
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     *        derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     *        returned from the callback's read() method (currently only support 16 kHz 16bit mono PCM).
     */
    constructor(callback, format) {
        super();
        this.onEvent = (event) => {
            this.privEvents.onEvent(event);
            _common_Exports__WEBPACK_IMPORTED_MODULE_2__["Events"].instance.onEvent(event);
        };
        if (undefined === format) {
            this.privFormat = _Exports__WEBPACK_IMPORTED_MODULE_3__["AudioStreamFormat"].getDefaultInputFormat();
        }
        else {
            this.privFormat = format;
        }
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["EventSource"]();
        this.privId = Object(_src_common_Guid__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privCallback = callback;
        this.privIsClosed = false;
    }
    /**
     * Format information for the audio
     */
    get format() {
        return this.privFormat;
    }
    /**
     * Closes the stream.
     * @member PullAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */
    close() {
        this.privIsClosed = true;
        this.privCallback.close();
    }
    id() {
        return this.privId;
    }
    turnOn() {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceInitializingEvent"](this.privId)); // no stream id
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioSourceReadyEvent"](this.privId));
        return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(true);
    }
    attach(audioNodeId) {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeAttachingEvent"](this.privId, audioNodeId));
        return this.turnOn()
            .onSuccessContinueWith((result) => {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeAttachedEvent"](this.privId, audioNodeId));
            return {
                detach: () => {
                    this.privCallback.close();
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
                    this.turnOff();
                },
                id: () => {
                    return audioNodeId;
                },
                read: () => {
                    let totalBytes = 0;
                    let transmitBuff;
                    // Until we have the minimum number of bytes to send in a transmission, keep asking for more.
                    while (totalBytes < bufferSize) {
                        // Sizing the read buffer to the delta between the perfect size and what's left means we won't ever get too much
                        // data back.
                        const readBuff = new ArrayBuffer(bufferSize - totalBytes);
                        const pulledBytes = this.privCallback.read(readBuff);
                        // If there is no return buffer yet defined, set the return buffer to the that was just populated.
                        // This was, if we have enough data there's no copy penalty, but if we don't we have a buffer that's the
                        // preferred size allocated.
                        if (undefined === transmitBuff) {
                            transmitBuff = readBuff;
                        }
                        else {
                            // Not the first bite at the apple, so fill the return buffer with the data we got back.
                            const intView = new Int8Array(transmitBuff);
                            intView.set(new Int8Array(readBuff), totalBytes);
                        }
                        // If there are no bytes to read, just break out and be done.
                        if (0 === pulledBytes) {
                            break;
                        }
                        totalBytes += pulledBytes;
                    }
                    return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult({
                        buffer: transmitBuff.slice(0, totalBytes),
                        isEnd: this.privIsClosed || totalBytes === 0,
                        timeReceived: Date.now(),
                    });
                },
            };
        });
    }
    detach(audioNodeId) {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__["AudioStreamNodeDetachedEvent"](this.privId, audioNodeId));
    }
    turnOff() {
        return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult(false);
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return _common_Exports__WEBPACK_IMPORTED_MODULE_2__["PromiseHelper"].fromResult({
            bitspersample: this.privFormat.bitsPerSample,
            channelcount: this.privFormat.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["connectivity"].Unknown,
            manufacturer: "Speech SDK",
            model: "PullStream",
            samplerate: this.privFormat.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["type"].Stream,
        });
    }
}

//# sourceMappingURL=AudioInputStream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js ***!
  \***************************************************************************************************************/
/*! exports provided: bufferSize, AudioOutputStream, PullAudioOutputStream, PullAudioOutputStreamImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bufferSize", function() { return bufferSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioOutputStream", function() { return AudioOutputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PullAudioOutputStream", function() { return PullAudioOutputStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PullAudioOutputStreamImpl", function() { return PullAudioOutputStreamImpl; });
/* harmony import */ var _src_common_Guid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/common/Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



const bufferSize = 4096;
/**
 * Represents audio input stream used for custom audio input configurations.
 * @class AudioInputStream
 */
class AudioOutputStream {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    constructor() { }
    /**
     * Creates a memory backed PullAudioOutputStream with the specified audio format.
     * @member AudioInputStream.createPullStream
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     *        written to the push audio stream's write() method (currently only support 16 kHz 16bit mono PCM).
     * @returns {PullAudioOutputStream} The audio input stream being created.
     */
    static createPullStream(format) {
        return PullAudioOutputStream.create(format);
    }
}
/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @class PullAudioOutputStream
 */
// tslint:disable-next-line:max-classes-per-file
class PullAudioOutputStream extends AudioOutputStream {
    /**
     * Creates a memory backed PullAudioOutputStream with the specified audio format.
     * @member PullAudioOutputStream.create
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be written to the
     *        push audio stream's write() method (currently only support 16 kHz 16bit mono PCM).
     * @returns {PullAudioOutputStream} The push audio input stream being created.
     */
    static create(format) {
        return new PullAudioOutputStreamImpl(bufferSize, format);
    }
}
/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @private
 * @class PullAudioOutputStreamImpl
 */
// tslint:disable-next-line:max-classes-per-file
class PullAudioOutputStreamImpl extends PullAudioOutputStream {
    /**
     * Creates and initalizes an instance with the given values.
     * @constructor
     * @param {AudioStreamFormat} format - The audio stream format.
     */
    constructor(chunkSize, format) {
        super();
        if (format === undefined) {
            this.privFormat = _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_2__["AudioStreamFormatImpl"].getDefaultInputFormat();
        }
        else {
            this.privFormat = format;
        }
        this.privId = Object(_src_common_Guid__WEBPACK_IMPORTED_MODULE_0__["createNoDashGuid"])();
        this.privStream = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__["ChunkedArrayBufferStream"](chunkSize);
        this.streamReader = this.privStream.getReader();
    }
    /**
     * Format information for the audio
     */
    get format() {
        return this.privFormat;
    }
    /**
     * Checks if the stream is closed
     * @member PullAudioOutputStreamImpl.prototype.isClosed
     * @property
     * @public
     */
    get isClosed() {
        return this.privStream.isClosed;
    }
    /**
     * Gets the id of the stream
     * @member PullAudioOutputStreamImpl.prototype.id
     * @property
     * @public
     */
    get id() {
        return this.privId;
    }
    /**
     * Reads data from the buffer
     * @member PullAudioOutputStreamImpl.prototype.read
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */
    read() {
        return this.streamReader.read()
            .onSuccessContinueWithPromise((chunk) => {
            return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(chunk.buffer);
        });
    }
    /**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PullAudioOutputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */
    write(dataBuffer) {
        this.privStream.writeStreamChunk({
            buffer: dataBuffer,
            isEnd: false,
            timeReceived: Date.now()
        });
    }
    /**
     * Closes the stream.
     * @member PullAudioOutputStreamImpl.prototype.close
     * @function
     * @public
     */
    close() {
        this.privStream.close();
    }
}

//# sourceMappingURL=AudioOutputStream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js ***!
  \***************************************************************************************************************/
/*! exports provided: AudioStreamFormat, AudioStreamFormatImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamFormat", function() { return AudioStreamFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStreamFormatImpl", function() { return AudioStreamFormatImpl; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Represents audio stream format used for custom audio input configurations.
 * @class AudioStreamFormat
 */
class AudioStreamFormat {
    /**
     * Creates an audio stream format object representing the default audio stream
     * format (16KHz 16bit mono PCM).
     * @member AudioStreamFormat.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormat} The audio stream format being created.
     */
    static getDefaultInputFormat() {
        return AudioStreamFormatImpl.getDefaultInputFormat();
    }
    /**
     * Creates an audio stream format object with the specified pcm waveformat characteristics.
     * @member AudioStreamFormat.getWaveFormatPCM
     * @function
     * @public
     * @param {number} samplesPerSecond - Sample rate, in samples per second (Hertz).
     * @param {number} bitsPerSample - Bits per sample, typically 16.
     * @param {number} channels - Number of channels in the waveform-audio data. Monaural data
     *        uses one channel and stereo data uses two channels.
     * @returns {AudioStreamFormat} The audio stream format being created.
     */
    static getWaveFormatPCM(samplesPerSecond, bitsPerSample, channels) {
        return new AudioStreamFormatImpl(samplesPerSecond, bitsPerSample, channels);
    }
}
/**
 * @private
 * @class AudioStreamFormatImpl
 */
// tslint:disable-next-line:max-classes-per-file
class AudioStreamFormatImpl extends AudioStreamFormat {
    /**
     * Creates an instance with the given values.
     * @constructor
     * @param {number} samplesPerSec - Samples per second.
     * @param {number} bitsPerSample - Bits per sample.
     * @param {number} channels - Number of channels.
     */
    constructor(samplesPerSec = 16000, bitsPerSample = 16, channels = 1) {
        super();
        this.formatTag = 1;
        this.bitsPerSample = bitsPerSample;
        this.samplesPerSec = samplesPerSec;
        this.channels = channels;
        this.avgBytesPerSec = this.samplesPerSec * this.channels * (this.bitsPerSample / 8);
        this.blockAlign = this.channels * Math.max(this.bitsPerSample, 8);
    }
    /**
     * Retrieves the default input format.
     * @member AudioStreamFormatImpl.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormatImpl} The default input format.
     */
    static getDefaultInputFormat() {
        return new AudioStreamFormatImpl();
    }
    /**
     * Closes the configuration object.
     * @member AudioStreamFormatImpl.prototype.close
     * @function
     * @public
     */
    close() { return; }
}

//# sourceMappingURL=AudioStreamFormat.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/BaseAudioPlayer.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/BaseAudioPlayer.js ***!
  \*************************************************************************************************************/
/*! exports provided: BaseAudioPlayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BaseAudioPlayer", function() { return BaseAudioPlayer; });
/* harmony import */ var _common_Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Base audio player class
 * TODO: Plays only PCM for now.
 * @class
 */
class BaseAudioPlayer {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     */
    constructor(audioFormat) {
        this.audioContext = null;
        this.gainNode = null;
        this.autoUpdateBufferTimer = 0;
        this.init(audioFormat);
    }
    /**
     * play Audio sample
     * @param newAudioData audio data to be played.
     */
    playAudioSample(newAudioData) {
        this.ensureInitializedContext();
        const audioData = this.formatAudioData(newAudioData);
        const newSamplesData = new Float32Array(this.samples.length + audioData.length);
        newSamplesData.set(this.samples, 0);
        newSamplesData.set(audioData, this.samples.length);
        this.samples = newSamplesData;
    }
    /**
     * stops audio and clears the buffers
     */
    stopAudio() {
        if (this.audioContext !== null) {
            this.samples = new Float32Array();
            clearInterval(this.autoUpdateBufferTimer);
            this.audioContext.close();
            this.audioContext = null;
        }
    }
    init(audioFormat) {
        this.audioFormat = audioFormat;
        this.samples = new Float32Array();
    }
    ensureInitializedContext() {
        if (this.audioContext === null) {
            this.createAudioContext();
            const timerPeriod = 200;
            this.autoUpdateBufferTimer = setInterval(() => {
                this.updateAudioBuffer();
            }, timerPeriod);
        }
    }
    createAudioContext() {
        // new ((window as any).AudioContext || (window as any).webkitAudioContext)();
        this.audioContext = new AudioContext();
        // TODO: Various examples shows this gain node, it does not seem to be needed unless we plan
        // to control the volume, not likely
        this.gainNode = this.audioContext.createGain();
        this.gainNode.gain.value = 1;
        this.gainNode.connect(this.audioContext.destination);
        this.startTime = this.audioContext.currentTime;
    }
    formatAudioData(audioData) {
        switch (this.audioFormat.bitsPerSample) {
            case 8:
                return this.formatArrayBuffer(new Int8Array(audioData), 128);
            case 16:
                return this.formatArrayBuffer(new Int16Array(audioData), 32768);
            case 32:
                return this.formatArrayBuffer(new Int32Array(audioData), 2147483648);
            default:
                throw new _common_Error__WEBPACK_IMPORTED_MODULE_0__["InvalidOperationError"]("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time");
        }
    }
    formatArrayBuffer(audioData, maxValue) {
        const float32Data = new Float32Array(audioData.length);
        for (let i = 0; i < audioData.length; i++) {
            float32Data[i] = audioData[i] / maxValue;
        }
        return float32Data;
    }
    updateAudioBuffer() {
        if (this.samples.length === 0) {
            return;
        }
        const channelCount = this.audioFormat.channels;
        const bufferSource = this.audioContext.createBufferSource();
        const frameCount = this.samples.length / channelCount;
        const audioBuffer = this.audioContext.createBuffer(channelCount, frameCount, this.audioFormat.samplesPerSec);
        // TODO: Should we do the conversion in the pushAudioSample instead?
        for (let channel = 0; channel < channelCount; channel++) {
            // Fill in individual channel data
            let channelOffset = channel;
            const audioData = audioBuffer.getChannelData(channel);
            for (let i = 0; i < this.samples.length; i++, channelOffset += channelCount) {
                audioData[i] = this.samples[channelOffset];
            }
        }
        if (this.startTime < this.audioContext.currentTime) {
            this.startTime = this.audioContext.currentTime;
        }
        bufferSource.buffer = audioBuffer;
        bufferSource.connect(this.gainNode);
        bufferSource.start(this.startTime);
        // Make sure we play the next sample after the current one.
        this.startTime += audioBuffer.duration;
        // Clear the samples for the next pushed data.
        this.samples = new Float32Array();
    }
}

//# sourceMappingURL=BaseAudioPlayer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PullAudioInputStreamCallback.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PullAudioInputStreamCallback.js ***!
  \**************************************************************************************************************************/
/*! exports provided: PullAudioInputStreamCallback */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStreamCallback", function() { return PullAudioInputStreamCallback; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * An abstract base class that defines callback methods (read() and close()) for
 * custom audio input streams).
 * @class PullAudioInputStreamCallback
 */
class PullAudioInputStreamCallback {
}

//# sourceMappingURL=PullAudioInputStreamCallback.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/BotFrameworkConfig.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/BotFrameworkConfig.js ***!
  \**********************************************************************************************************/
/*! exports provided: BotFrameworkConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BotFrameworkConfig", function() { return BotFrameworkConfig; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DialogServiceConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Class that defines configurations for the dialog service connector object for using a Bot Framework backend.
 * @class BotFrameworkConfig
 */
class BotFrameworkConfig extends _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"] {
    /**
     * Creates an instance of BotFrameworkConfig.
     */
    constructor() {
        super();
    }
    /**
     * Creates an instance of the bot framework config with the specified subscription and region.
     * @member BotFrameworkConfig.fromSubscription
     * @function
     * @public
     * @param subscription Subscription key associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {BotFrameworkConfig} A new bot framework config.
     */
    static fromSubscription(subscription, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(subscription, "subscription");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const botFrameworkConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"]();
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType, "bot_framework");
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscription);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        return botFrameworkConfig;
    }
    /**
     * Creates an instance of the bot framework config with the specified authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by calling this setter with a new valid token.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member BotFrameworkConfig.fromAuthorizationToken
     * @function
     * @public
     * @param authorizationToken The authorization token associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {BotFrameworkConfig} A new bot framework config.
     */
    static fromAuthorizationToken(authorizationToken, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const botFrameworkConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"]();
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType, "bot_framework");
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, authorizationToken);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        return botFrameworkConfig;
    }
}

//# sourceMappingURL=BotFrameworkConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetails.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetails.js ***!
  \***********************************************************************************************************/
/*! exports provided: CancellationDetails */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CancellationDetails", function() { return CancellationDetails; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Contains detailed information about why a result was canceled.
 * @class CancellationDetails
 */
class CancellationDetails {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - The error details, if provided.
     */
    constructor(reason, errorDetails, errorCode) {
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privErrorCode = errorCode;
    }
    /**
     * Creates an instance of CancellationDetails object for the canceled RecognitionResult.
     * @member CancellationDetails.fromResult
     * @function
     * @public
     * @param {RecognitionResult} result - The result that was canceled.
     * @returns {CancellationDetails} The cancellation details object being created.
     */
    static fromResult(result) {
        let reason = _Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationReason"].Error;
        let errorCode = _Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].NoError;
        if (!!result.json) {
            const simpleSpeech = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SimpleSpeechPhrase"].fromJSON(result.json);
            reason = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["EnumTranslation"].implTranslateCancelResult(simpleSpeech.RecognitionStatus);
        }
        if (!!result.properties) {
            errorCode = _Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][result.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CancellationErrorCodePropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"][_Exports__WEBPACK_IMPORTED_MODULE_1__["CancellationErrorCode"].NoError])];
        }
        return new CancellationDetails(reason, result.errorDetails, errorCode);
    }
    /**
     * The reason the recognition was canceled.
     * @member CancellationDetails.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member CancellationDetails.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
    /**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */
    get ErrorCode() {
        return this.privErrorCode;
    }
}

//# sourceMappingURL=CancellationDetails.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js ***!
  \**************************************************************************************************************/
/*! exports provided: CancellationErrorCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CancellationErrorCode", function() { return CancellationErrorCode; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 *  Defines error code in case that CancellationReason is Error.
 *  Added in version 1.1.0.
 */
var CancellationErrorCode;
(function (CancellationErrorCode) {
    /**
     * Indicates that no error occurred during speech recognition.
     */
    CancellationErrorCode[CancellationErrorCode["NoError"] = 0] = "NoError";
    /**
     * Indicates an authentication error.
     */
    CancellationErrorCode[CancellationErrorCode["AuthenticationFailure"] = 1] = "AuthenticationFailure";
    /**
     * Indicates that one or more recognition parameters are invalid.
     */
    CancellationErrorCode[CancellationErrorCode["BadRequestParameters"] = 2] = "BadRequestParameters";
    /**
     * Indicates that the number of parallel requests exceeded the number of allowed
     * concurrent transcriptions for the subscription.
     */
    CancellationErrorCode[CancellationErrorCode["TooManyRequests"] = 3] = "TooManyRequests";
    /**
     * Indicates a connection error.
     */
    CancellationErrorCode[CancellationErrorCode["ConnectionFailure"] = 4] = "ConnectionFailure";
    /**
     * Indicates a time-out error when waiting for response from service.
     */
    CancellationErrorCode[CancellationErrorCode["ServiceTimeout"] = 5] = "ServiceTimeout";
    /**
     * Indicates that an error is returned by the service.
     */
    CancellationErrorCode[CancellationErrorCode["ServiceError"] = 6] = "ServiceError";
    /**
     * Indicates an unexpected runtime error.
     */
    CancellationErrorCode[CancellationErrorCode["RuntimeError"] = 7] = "RuntimeError";
})(CancellationErrorCode || (CancellationErrorCode = {}));

//# sourceMappingURL=CancellationErrorCodes.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js ***!
  \**********************************************************************************************************/
/*! exports provided: CancellationReason */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CancellationReason", function() { return CancellationReason; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the possible reasons a recognition result might be canceled.
 * @class CancellationReason
 */
var CancellationReason;
(function (CancellationReason) {
    /**
     * Indicates that an error occurred during speech recognition.
     * @member CancellationReason.Error
     */
    CancellationReason[CancellationReason["Error"] = 0] = "Error";
    /**
     * Indicates that the end of the audio stream was reached.
     * @member CancellationReason.EndOfStream
     */
    CancellationReason[CancellationReason["EndOfStream"] = 1] = "EndOfStream";
})(CancellationReason || (CancellationReason = {}));

//# sourceMappingURL=CancellationReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js ***!
  \**************************************************************************************************/
/*! exports provided: Connection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Connection", function() { return Connection; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//

/**
 * Connection is a proxy class for managing connection to the speech service of the specified Recognizer.
 * By default, a Recognizer autonomously manages connection to service when needed.
 * The Connection class provides additional methods for users to explicitly open or close a connection and
 * to subscribe to connection status changes.
 * The use of Connection is optional, and mainly for scenarios where fine tuning of application
 * behavior based on connection status is needed. Users can optionally call Open() to manually set up a connection
 * in advance before starting recognition on the Recognizer associated with this Connection.
 * If the Recognizer needs to connect or disconnect to service, it will
 * setup or shutdown the connection independently. In this case the Connection will be notified by change of connection
 * status via Connected/Disconnected events.
 * Added in version 1.2.0.
 */
class Connection {
    /**
     * Gets the Connection instance from the specified recognizer.
     * @param recognizer The recognizer associated with the connection.
     * @return The Connection instance of the recognizer.
     */
    static fromRecognizer(recognizer) {
        const recoBase = recognizer.internalData;
        const ret = new Connection();
        ret.privServiceRecognizer = recoBase;
        ret.privEventListener = ret.privServiceRecognizer.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionEstablishedEvent") {
                if (!!ret.connected) {
                    ret.connected(new _Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionEventArgs"](connectionEvent.connectionId));
                }
            }
            else if (connectionEvent.name === "ConnectionClosedEvent") {
                if (!!ret.disconnected) {
                    ret.disconnected(new _Exports__WEBPACK_IMPORTED_MODULE_0__["ConnectionEventArgs"](connectionEvent.connectionId));
                }
            }
        });
        return ret;
    }
    /**
     * Starts to set up connection to the service.
     * Users can optionally call openConnection() to manually set up a connection in advance before starting recognition on the
     * Recognizer associated with this Connection. After starting recognition, calling Open() will have no effect
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notfied when the connection is established.
     */
    openConnection() {
        this.privServiceRecognizer.connect();
    }
    /**
     * Closes the connection the service.
     * Users can optionally call closeConnection() to manually shutdown the connection of the associated Recognizer.
     *
     * If closeConnection() is called during recognition, recognition will fail and cancel wtih an error.
     */
    closeConnection() {
        this.privServiceRecognizer.disconnect();
    }
    /**
     * Dispose of associated resources.
     */
    close() {
        /* tslint:disable:no-empty */
    }
}

//# sourceMappingURL=Connection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionEventArgs.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionEventArgs.js ***!
  \***********************************************************************************************************/
/*! exports provided: ConnectionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionEventArgs", function() { return ConnectionEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//

/**
 * Defines payload for connection events like Connected/Disconnected.
 * Added in version 1.2.0
 */
class ConnectionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
}

//# sourceMappingURL=ConnectionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js ***!
  \*************************************************************************************************/
/*! exports provided: Contracts */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Contracts", function() { return Contracts; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * @class Contracts
 * @private
 */
class Contracts {
    static throwIfNullOrUndefined(param, name) {
        if (param === undefined || param === null) {
            throw new Error("throwIfNullOrUndefined:" + name);
        }
    }
    static throwIfNull(param, name) {
        if (param === null) {
            throw new Error("throwIfNull:" + name);
        }
    }
    static throwIfNullOrWhitespace(param, name) {
        Contracts.throwIfNullOrUndefined(param, name);
        if (("" + param).trim().length < 1) {
            throw new Error("throwIfNullOrWhitespace:" + name);
        }
    }
    static throwIfDisposed(isDisposed) {
        if (isDisposed) {
            throw new Error("the object is already disposed");
        }
    }
    static throwIfArrayEmptyOrWhitespace(array, name) {
        Contracts.throwIfNullOrUndefined(array, name);
        if (array.length === 0) {
            throw new Error("throwIfArrayEmptyOrWhitespace:" + name);
        }
        for (const item of array) {
            Contracts.throwIfNullOrWhitespace(item, name);
        }
    }
    static throwIfFileDoesNotExist(param, name) {
        Contracts.throwIfNullOrWhitespace(param, name);
        // TODO check for file existence.
    }
}

//# sourceMappingURL=Contracts.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js ***!
  \***********************************************************************************************************/
/*! exports provided: DialogServiceConfig, DialogServiceConfigImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConfig", function() { return DialogServiceConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConfigImpl", function() { return DialogServiceConfigImpl; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Class that defines base configurations for dialog service connector
 * @class DialogServiceConfig
 */
class DialogServiceConfig {
    /**
     * Creates an instance of DialogService config.
     * @constructor
     */
    constructor() { }
}
/**
 * Dialog Service configuration.
 * @class DialogServiceConfigImpl
 */
// tslint:disable-next-line:max-classes-per-file
class DialogServiceConfigImpl extends DialogServiceConfig {
    /**
     * Creates an instance of dialogService config.
     */
    constructor() {
        super();
        this.privSpeechConfig = new _Exports__WEBPACK_IMPORTED_MODULE_1__["SpeechConfigImpl"]();
    }
    /**
     * Provides access to custom properties.
     * @member DialogServiceConfigImpl.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The properties.
     */
    get properties() {
        return this.privSpeechConfig.properties;
    }
    /**
     * Gets the speech recognition language.
     * @member DialogServiceConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     */
    get speechRecognitionLanguage() {
        return this.privSpeechConfig.speechRecognitionLanguage;
    }
    /**
     * Sets the speech recognition language.
     * @member DialogServiceConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @param {string} value - The language to set.
     */
    set speechRecognitionLanguage(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(value, "value");
        this.privSpeechConfig.speechRecognitionLanguage = value;
    }
    /**
     * Sets a named property as value
     * @member DialogServiceConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {PropertyId | string} name - The property to set.
     * @param {string} value - The value.
     */
    setProperty(name, value) {
        this.privSpeechConfig.setProperty(name, value);
    }
    /**
     * Sets a named property as value
     * @member DialogServiceConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {PropertyId | string} name - The property to get.
     * @param {string} def - The default value to return in case the property is not known.
     * @returns {string} The current value, or provided default, of the given property.
     */
    getProperty(name, def) {
        return this.privSpeechConfig.getProperty(name);
    }
    /**
     * Sets the proxy configuration.
     * Only relevant in Node.js environments.
     * Added in version 1.4.0.
     * @param proxyHostName The host name of the proxy server, without the protocol scheme (http://)
     * @param proxyPort The port number of the proxy server.
     * @param proxyUserName The user name of the proxy server.
     * @param proxyPassword The password of the proxy server.
     */
    setProxy(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_ProxyHostName, proxyHostName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_ProxyPort, `${proxyPort}`);
        if (proxyUserName) {
            this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_ProxyUserName, proxyUserName);
        }
        if (proxyPassword) {
            this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__["PropertyId"].SpeechServiceConnection_ProxyPassword, proxyPassword);
        }
    }
    setServiceProperty(name, value, channel) {
        this.privSpeechConfig.setServiceProperty(name, value, channel);
    }
    /**
     * Dispose of associated resources.
     * @member DialogServiceConfigImpl.prototype.close
     * @function
     * @public
     */
    close() {
        return;
    }
}

//# sourceMappingURL=DialogServiceConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConnector.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConnector.js ***!
  \**************************************************************************************************************/
/*! exports provided: DialogServiceConnector */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConnector", function() { return DialogServiceConnector; });
/* harmony import */ var _common_speech_DialogConnectorFactory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/DialogConnectorFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogConnectorFactory.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
/* harmony import */ var _PropertyId__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PropertyId */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.





/**
 * Dialog Service Connector
 * @class DialogServiceConnector
 */
class DialogServiceConnector extends _Exports__WEBPACK_IMPORTED_MODULE_3__["Recognizer"] {
    /**
     * Initializes an instance of the DialogServiceConnector.
     * @constructor
     * @param {DialogServiceConfig} dialogConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     */
    constructor(dialogConfig, audioConfig) {
        const dialogServiceConfigImpl = dialogConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(dialogConfig, "dialogConfig");
        super(audioConfig, dialogServiceConfigImpl.properties, new _common_speech_DialogConnectorFactory__WEBPACK_IMPORTED_MODULE_0__["DialogConnectionFactory"]());
        this.isTurnComplete = true;
        this.privIsDisposed = false;
        this.privProperties = dialogServiceConfigImpl.properties.clone();
        const agentConfig = this.buildAgentConfig();
        this.privReco.agentConfig.set(agentConfig);
    }
    /**
     * Starts a connection to the service.
     * Users can optionally call connect() to manually set up a connection in advance, before starting interactions.
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notified when the connection is established.
     * @member DialogServiceConnector.prototype.connect
     * @function
     * @public
     */
    connect() {
        this.privReco.connect();
    }
    /**
     * Closes the connection the service.
     * Users can optionally call disconnect() to manually shutdown the connection of the associated DialogServiceConnector.
     *
     * If disconnect() is called during a recognition, recognition will fail and cancel with an error.
     */
    disconnect() {
        this.privReco.disconnect();
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member DialogServiceConnector.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Sets the authorization token used to communicate with the service.
     * @member DialogServiceConnector.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].SpeechServiceAuthorization_Token, token);
    }
    /**
     * The collection of properties and their values defined for this DialogServiceConnector.
     * @member DialogServiceConnector.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this DialogServiceConnector.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Starts recognition and stops after the first utterance is recognized.
     * @member DialogServiceConnector.prototype.listenOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the reco has completed.
     * @param err - Callback invoked in case of an error.
     */
    listenOnceAsync(cb, err) {
        if (this.isTurnComplete) {
            try {
                _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
                this.connect();
                this.implRecognizerStop();
                this.isTurnComplete = false;
                this.implRecognizerStart(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["RecognitionMode"].Conversation, (e) => {
                    this.implRecognizerStop();
                    this.isTurnComplete = true;
                    if (!!cb) {
                        cb(e);
                    }
                }, (e) => {
                    this.implRecognizerStop();
                    this.isTurnComplete = true;
                    if (!!err) {
                        err(e);
                    }
                });
            }
            catch (error) {
                if (!!err) {
                    if (error instanceof Error) {
                        const typedError = error;
                        err(typedError.name + ": " + typedError.message);
                    }
                    else {
                        err(error);
                    }
                }
                // Destroy the recognizer.
                this.dispose(true);
            }
        }
    }
    sendActivityAsync(activity) {
        this.privReco.sendMessage(activity);
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member DialogServiceConnector.prototype.close
     * @function
     * @public
     */
    close() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privIsDisposed);
        this.dispose(true);
    }
    dispose(disposing) {
        if (this.privIsDisposed) {
            return;
        }
        if (disposing) {
            this.implRecognizerStop();
            this.privIsDisposed = true;
            super.dispose(disposing);
        }
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["RecognizerConfig"](speechConfig, this.privProperties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const audioSource = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__["DialogServiceAdapter"](authentication, connectionFactory, audioSource, recognizerConfig, this);
    }
    buildAgentConfig() {
        const communicationType = this.properties.getProperty("Conversation_Communication_Type", "Default");
        return {
            botInfo: {
                commType: communicationType,
                connectionId: this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].Conversation_ApplicationId),
                conversationId: undefined,
                fromId: this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__["PropertyId"].Conversation_From_Id, undefined)
            },
            version: 0.2
        };
    }
}

//# sourceMappingURL=DialogServiceConnector.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js ***!
  \***********************************************************************************************/
/*! exports provided: AudioConfig, AudioStreamFormat, AudioInputStream, PullAudioInputStream, PushAudioInputStream, AudioOutputStream, PullAudioOutputStream, CancellationReason, PullAudioInputStreamCallback, KeywordRecognitionModel, SessionEventArgs, RecognitionEventArgs, OutputFormat, IntentRecognitionEventArgs, RecognitionResult, SpeechRecognitionResult, IntentRecognitionResult, LanguageUnderstandingModel, SpeechRecognitionEventArgs, SpeechRecognitionCanceledEventArgs, TranslationRecognitionEventArgs, TranslationSynthesisEventArgs, TranslationRecognitionResult, TranslationSynthesisResult, ResultReason, SpeechConfig, SpeechConfigImpl, SpeechTranslationConfig, PropertyCollection, PropertyId, Recognizer, SpeechRecognizer, IntentRecognizer, TranslationRecognizer, Translations, NoMatchReason, NoMatchDetails, TranslationRecognitionCanceledEventArgs, IntentRecognitionCanceledEventArgs, CancellationDetails, CancellationErrorCode, ConnectionEventArgs, Connection, PhraseListGrammar, DialogServiceConfig, BotFrameworkConfig, SpeechCommandsConfig, DialogServiceConnector, ActivityReceivedEventArgs, ServicePropertyChannel, ProfanityOption, BaseAudioPlayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Audio_AudioConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Audio/AudioConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioConfig", function() { return _Audio_AudioConfig__WEBPACK_IMPORTED_MODULE_0__["AudioConfig"]; });

/* harmony import */ var _Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Audio/AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioStreamFormat", function() { return _Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__["AudioStreamFormat"]; });

/* harmony import */ var _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Audio/AudioInputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioInputStream", function() { return _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__["AudioInputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStream", function() { return _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__["PullAudioInputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PushAudioInputStream", function() { return _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__["PushAudioInputStream"]; });

/* harmony import */ var _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Audio/AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AudioOutputStream", function() { return _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__["AudioOutputStream"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioOutputStream", function() { return _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__["PullAudioOutputStream"]; });

/* harmony import */ var _CancellationReason__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CancellationReason */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationReason", function() { return _CancellationReason__WEBPACK_IMPORTED_MODULE_4__["CancellationReason"]; });

/* harmony import */ var _Audio_PullAudioInputStreamCallback__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Audio/PullAudioInputStreamCallback */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PullAudioInputStreamCallback.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PullAudioInputStreamCallback", function() { return _Audio_PullAudioInputStreamCallback__WEBPACK_IMPORTED_MODULE_5__["PullAudioInputStreamCallback"]; });

/* harmony import */ var _KeywordRecognitionModel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./KeywordRecognitionModel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/KeywordRecognitionModel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KeywordRecognitionModel", function() { return _KeywordRecognitionModel__WEBPACK_IMPORTED_MODULE_6__["KeywordRecognitionModel"]; });

/* harmony import */ var _SessionEventArgs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./SessionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SessionEventArgs", function() { return _SessionEventArgs__WEBPACK_IMPORTED_MODULE_7__["SessionEventArgs"]; });

/* harmony import */ var _RecognitionEventArgs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./RecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionEventArgs", function() { return _RecognitionEventArgs__WEBPACK_IMPORTED_MODULE_8__["RecognitionEventArgs"]; });

/* harmony import */ var _OutputFormat__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./OutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OutputFormat", function() { return _OutputFormat__WEBPACK_IMPORTED_MODULE_9__["OutputFormat"]; });

/* harmony import */ var _IntentRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./IntentRecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionEventArgs", function() { return _IntentRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_10__["IntentRecognitionEventArgs"]; });

/* harmony import */ var _RecognitionResult__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./RecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognitionResult", function() { return _RecognitionResult__WEBPACK_IMPORTED_MODULE_11__["RecognitionResult"]; });

/* harmony import */ var _SpeechRecognitionResult__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./SpeechRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionResult", function() { return _SpeechRecognitionResult__WEBPACK_IMPORTED_MODULE_12__["SpeechRecognitionResult"]; });

/* harmony import */ var _IntentRecognitionResult__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./IntentRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionResult", function() { return _IntentRecognitionResult__WEBPACK_IMPORTED_MODULE_13__["IntentRecognitionResult"]; });

/* harmony import */ var _LanguageUnderstandingModel__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./LanguageUnderstandingModel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageUnderstandingModel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LanguageUnderstandingModel", function() { return _LanguageUnderstandingModel__WEBPACK_IMPORTED_MODULE_14__["LanguageUnderstandingModel"]; });

/* harmony import */ var _SpeechRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./SpeechRecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionEventArgs", function() { return _SpeechRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_15__["SpeechRecognitionEventArgs"]; });

/* harmony import */ var _SpeechRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./SpeechRecognitionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionCanceledEventArgs", function() { return _SpeechRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_16__["SpeechRecognitionCanceledEventArgs"]; });

/* harmony import */ var _TranslationRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./TranslationRecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionEventArgs", function() { return _TranslationRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_17__["TranslationRecognitionEventArgs"]; });

/* harmony import */ var _TranslationSynthesisEventArgs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./TranslationSynthesisEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisEventArgs", function() { return _TranslationSynthesisEventArgs__WEBPACK_IMPORTED_MODULE_18__["TranslationSynthesisEventArgs"]; });

/* harmony import */ var _TranslationRecognitionResult__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./TranslationRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionResult", function() { return _TranslationRecognitionResult__WEBPACK_IMPORTED_MODULE_19__["TranslationRecognitionResult"]; });

/* harmony import */ var _TranslationSynthesisResult__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./TranslationSynthesisResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisResult.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisResult", function() { return _TranslationSynthesisResult__WEBPACK_IMPORTED_MODULE_20__["TranslationSynthesisResult"]; });

/* harmony import */ var _ResultReason__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./ResultReason */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ResultReason", function() { return _ResultReason__WEBPACK_IMPORTED_MODULE_21__["ResultReason"]; });

/* harmony import */ var _SpeechConfig__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./SpeechConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechConfig", function() { return _SpeechConfig__WEBPACK_IMPORTED_MODULE_22__["SpeechConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechConfigImpl", function() { return _SpeechConfig__WEBPACK_IMPORTED_MODULE_22__["SpeechConfigImpl"]; });

/* harmony import */ var _SpeechTranslationConfig__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./SpeechTranslationConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechTranslationConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechTranslationConfig", function() { return _SpeechTranslationConfig__WEBPACK_IMPORTED_MODULE_23__["SpeechTranslationConfig"]; });

/* harmony import */ var _PropertyCollection__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./PropertyCollection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyCollection", function() { return _PropertyCollection__WEBPACK_IMPORTED_MODULE_24__["PropertyCollection"]; });

/* harmony import */ var _PropertyId__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./PropertyId */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyId", function() { return _PropertyId__WEBPACK_IMPORTED_MODULE_25__["PropertyId"]; });

/* harmony import */ var _Recognizer__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./Recognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Recognizer", function() { return _Recognizer__WEBPACK_IMPORTED_MODULE_26__["Recognizer"]; });

/* harmony import */ var _SpeechRecognizer__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./SpeechRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognizer", function() { return _SpeechRecognizer__WEBPACK_IMPORTED_MODULE_27__["SpeechRecognizer"]; });

/* harmony import */ var _IntentRecognizer__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./IntentRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognizer", function() { return _IntentRecognizer__WEBPACK_IMPORTED_MODULE_28__["IntentRecognizer"]; });

/* harmony import */ var _TranslationRecognizer__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./TranslationRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognizer", function() { return _TranslationRecognizer__WEBPACK_IMPORTED_MODULE_29__["TranslationRecognizer"]; });

/* harmony import */ var _Translations__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./Translations */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Translations", function() { return _Translations__WEBPACK_IMPORTED_MODULE_30__["Translations"]; });

/* harmony import */ var _NoMatchReason__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./NoMatchReason */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchReason.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NoMatchReason", function() { return _NoMatchReason__WEBPACK_IMPORTED_MODULE_31__["NoMatchReason"]; });

/* harmony import */ var _NoMatchDetails__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./NoMatchDetails */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchDetails.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NoMatchDetails", function() { return _NoMatchDetails__WEBPACK_IMPORTED_MODULE_32__["NoMatchDetails"]; });

/* harmony import */ var _TranslationRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./TranslationRecognitionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionCanceledEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionCanceledEventArgs", function() { return _TranslationRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_33__["TranslationRecognitionCanceledEventArgs"]; });

/* harmony import */ var _IntentRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./IntentRecognitionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionCanceledEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionCanceledEventArgs", function() { return _IntentRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_34__["IntentRecognitionCanceledEventArgs"]; });

/* harmony import */ var _CancellationDetails__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./CancellationDetails */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetails.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationDetails", function() { return _CancellationDetails__WEBPACK_IMPORTED_MODULE_35__["CancellationDetails"]; });

/* harmony import */ var _CancellationErrorCodes__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./CancellationErrorCodes */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CancellationErrorCode", function() { return _CancellationErrorCodes__WEBPACK_IMPORTED_MODULE_36__["CancellationErrorCode"]; });

/* harmony import */ var _ConnectionEventArgs__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./ConnectionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEventArgs", function() { return _ConnectionEventArgs__WEBPACK_IMPORTED_MODULE_37__["ConnectionEventArgs"]; });

/* harmony import */ var _Connection__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./Connection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Connection", function() { return _Connection__WEBPACK_IMPORTED_MODULE_38__["Connection"]; });

/* harmony import */ var _PhraseListGrammar__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./PhraseListGrammar */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PhraseListGrammar.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PhraseListGrammar", function() { return _PhraseListGrammar__WEBPACK_IMPORTED_MODULE_39__["PhraseListGrammar"]; });

/* harmony import */ var _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./DialogServiceConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConfig", function() { return _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_40__["DialogServiceConfig"]; });

/* harmony import */ var _BotFrameworkConfig__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./BotFrameworkConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/BotFrameworkConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BotFrameworkConfig", function() { return _BotFrameworkConfig__WEBPACK_IMPORTED_MODULE_41__["BotFrameworkConfig"]; });

/* harmony import */ var _SpeechCommandsConfig__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./SpeechCommandsConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechCommandsConfig.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpeechCommandsConfig", function() { return _SpeechCommandsConfig__WEBPACK_IMPORTED_MODULE_42__["SpeechCommandsConfig"]; });

/* harmony import */ var _DialogServiceConnector__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./DialogServiceConnector */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConnector.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogServiceConnector", function() { return _DialogServiceConnector__WEBPACK_IMPORTED_MODULE_43__["DialogServiceConnector"]; });

/* harmony import */ var _ActivityReceivedEventArgs__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./ActivityReceivedEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ActivityReceivedEventArgs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ActivityReceivedEventArgs", function() { return _ActivityReceivedEventArgs__WEBPACK_IMPORTED_MODULE_44__["ActivityReceivedEventArgs"]; });

/* harmony import */ var _ServicePropertyChannel__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./ServicePropertyChannel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServicePropertyChannel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ServicePropertyChannel", function() { return _ServicePropertyChannel__WEBPACK_IMPORTED_MODULE_45__["ServicePropertyChannel"]; });

/* harmony import */ var _ProfanityOption__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./ProfanityOption */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProfanityOption", function() { return _ProfanityOption__WEBPACK_IMPORTED_MODULE_46__["ProfanityOption"]; });

/* harmony import */ var _Audio_BaseAudioPlayer__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./Audio/BaseAudioPlayer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/BaseAudioPlayer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseAudioPlayer", function() { return _Audio_BaseAudioPlayer__WEBPACK_IMPORTED_MODULE_47__["BaseAudioPlayer"]; });

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

















































//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionCanceledEventArgs.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionCanceledEventArgs.js ***!
  \**************************************************************************************************************************/
/*! exports provided: IntentRecognitionCanceledEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionCanceledEventArgs", function() { return IntentRecognitionCanceledEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Define payload of intent recognition canceled result events.
 * @class IntentRecognitionCanceledEventArgs
 */
class IntentRecognitionCanceledEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["IntentRecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} result - The result of the intent recognition.
     * @param {string} offset - The offset.
     * @param {IntentRecognitionResult} sessionId - The session id.
     */
    constructor(reason, errorDetails, errorCode, result, offset, sessionId) {
        super(result, offset, sessionId);
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privErrorCode = errorCode;
    }
    /**
     * The reason the recognition was canceled.
     * @member IntentRecognitionCanceledEventArgs.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */
    get errorCode() {
        return this.privErrorCode;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member IntentRecognitionCanceledEventArgs.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
}

//# sourceMappingURL=IntentRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js ***!
  \******************************************************************************************************************/
/*! exports provided: IntentRecognitionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionEventArgs", function() { return IntentRecognitionEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Intent recognition result event arguments.
 * @class
 */
class IntentRecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param result - The result of the intent recognition.
     * @param offset - The offset.
     * @param sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Represents the intent recognition result.
     * @member IntentRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {IntentRecognitionResult} Represents the intent recognition result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=IntentRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionResult.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionResult.js ***!
  \***************************************************************************************************************/
/*! exports provided: IntentRecognitionResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentRecognitionResult", function() { return IntentRecognitionResult; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Intent recognition result.
 * @class
 */
class IntentRecognitionResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param intentId - The intent id.
     * @param resultId - The result id.
     * @param reason - The reason.
     * @param text - The recognized text.
     * @param duration - The duration.
     * @param offset - The offset into the stream.
     * @param errorDetails - Error details, if provided.
     * @param json - Additional Json, if provided.
     * @param properties - Additional properties, if provided.
     */
    constructor(intentId, resultId, reason, text, duration, offset, errorDetails, json, properties) {
        super(resultId, reason, text, duration, offset, errorDetails, json, properties);
        this.privIntentId = intentId;
    }
    /**
     * A String that represents the intent identifier being recognized.
     * @member IntentRecognitionResult.prototype.intentId
     * @function
     * @public
     * @returns {string} A String that represents the intent identifier being recognized.
     */
    get intentId() {
        return this.privIntentId;
    }
}

//# sourceMappingURL=IntentRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognizer.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognizer.js ***!
  \********************************************************************************************************/
/*! exports provided: IntentRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntentRecognizer", function() { return IntentRecognizer; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Intent recognizer.
 * @class
 */
class IntentRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_2__["Recognizer"] {
    /**
     * Initializes an instance of the IntentRecognizer.
     * @constructor
     * @param {SpeechConfig} speechConfig - The set of configuration properties.
     * @param {AudioConfig} audioConfig - An optional audio input config associated with the recognizer
     */
    constructor(speechConfig, audioConfig) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(speechConfig, "speechConfig");
        const configImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrUndefined(configImpl, "speechConfig");
        super(audioConfig, configImpl.properties, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["IntentConnectionFactory"]());
        this.privAddedIntents = [];
        this.privAddedLmIntents = {};
        this.privDisposedIntentRecognizer = false;
        this.privProperties = configImpl.properties;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage), _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage]);
    }
    /**
     * Gets the spoken language of recognition.
     * @member IntentRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} the spoken language of recognition.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage);
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member IntentRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * Note: Please use a token derived from your LanguageUnderstanding subscription key for the Intent recognizer.
     * @member IntentRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - Authorization token.
     */
    set authorizationToken(value) {
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, value);
    }
    /**
     * The collection of properties and their values defined for this IntentRecognizer.
     * @member IntentRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their
     *          values defined for this IntentRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Starts intent recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text and intent as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     *       so it is suitable only for single shot recognition like command or query.
     *       For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member IntentRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the recognition has finished with an IntentRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
            this.implRecognizerStop();
            if (Object.keys(this.privAddedLmIntents).length !== 0 || undefined !== this.privUmbrellaIntent) {
                const context = this.buildSpeechContext();
                this.privReco.speechContext.setSection("intent", context.Intent);
                this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);
                const intentReco = this.privReco;
                intentReco.setIntents(this.privAddedLmIntents, this.privUmbrellaIntent);
            }
            this.implRecognizerStart(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Interactive, (e) => {
                this.implRecognizerStop();
                if (!!cb) {
                    cb(e);
                }
            }, (e) => {
                this.implRecognizerStop();
                if (!!err) {
                    err(e);
                }
            });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    }
    /**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member IntentRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startContinuousRecognitionAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
            this.implRecognizerStop();
            if (Object.keys(this.privAddedLmIntents).length !== 0) {
                const context = this.buildSpeechContext();
                this.privReco.speechContext.setSection("intent", context.Intent);
                this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);
                const intentReco = this.privReco;
                intentReco.setIntents(this.privAddedLmIntents, this.privUmbrellaIntent);
            }
            this.implRecognizerStart(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Conversation, undefined, undefined);
            // report result to promise.
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
                cb = undefined;
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    }
    /**
     * Stops continuous intent recognition.
     * @member IntentRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopContinuousRecognitionAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
            this.implRecognizerStop();
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    }
    /**
     * Starts speech recognition with keyword spotting, until stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     *       This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model - The keyword recognition model that specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startKeywordRecognitionAsync(model, cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(model, "model");
        if (!!err) {
            err("Not yet implemented.");
        }
    }
    /**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     *       This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopKeywordRecognitionAsync(cb, err) {
        if (!!cb) {
            cb();
        }
    }
    /**
     * Adds a phrase that should be recognized as intent.
     * @member IntentRecognizer.prototype.addIntent
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent to be recognized.
     * @param {string} phrase - A String that specifies the phrase representing the intent.
     */
    addIntent(simplePhrase, intentId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(intentId, "intentId");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(simplePhrase, "simplePhrase");
        this.privAddedIntents.push([intentId, simplePhrase]);
    }
    /**
     * Adds an intent from Language Understanding service for recognition.
     * @member IntentRecognizer.prototype.addIntentWithLanguageModel
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent
     *        to be recognized. Ignored if intentName is empty.
     * @param {string} model - The intent model from Language Understanding service.
     * @param {string} intentName - The intent name defined in the intent model. If it
     *        is empty, all intent names defined in the model will be added.
     */
    addIntentWithLanguageModel(intentId, model, intentName) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(intentId, "intentId");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(model, "model");
        const modelImpl = model;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(modelImpl.appId, "model.appId");
        this.privAddedLmIntents[intentId] = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["AddedLmIntent"](modelImpl, intentName);
    }
    /**
     * @summary Adds all intents from the specified Language Understanding Model.
     * @member IntentRecognizer.prototype.addAllIntents
     * @function
     * @public
     * @function
     * @public
     * @param {LanguageUnderstandingModel} model - The language understanding model containing the intents.
     * @param {string} intentId - A custom id String to be returned in the IntentRecognitionResult's getIntentId() method.
     */
    addAllIntents(model, intentId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(model, "model");
        const modelImpl = model;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(modelImpl.appId, "model.appId");
        this.privUmbrellaIntent = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["AddedLmIntent"](modelImpl, intentId);
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member IntentRecognizer.prototype.close
     * @function
     * @public
     */
    close() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedIntentRecognizer);
        this.dispose(true);
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognizerConfig"](speechConfig, this.properties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const audioImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["IntentServiceRecognizer"](authentication, connectionFactory, audioImpl, recognizerConfig, this);
    }
    dispose(disposing) {
        if (this.privDisposedIntentRecognizer) {
            return;
        }
        if (disposing) {
            this.privDisposedIntentRecognizer = true;
            super.dispose(disposing);
        }
    }
    buildSpeechContext() {
        let appId;
        let region;
        let subscriptionKey;
        const refGrammers = [];
        if (undefined !== this.privUmbrellaIntent) {
            appId = this.privUmbrellaIntent.modelImpl.appId;
            region = this.privUmbrellaIntent.modelImpl.region;
            subscriptionKey = this.privUmbrellaIntent.modelImpl.subscriptionKey;
        }
        // Build the reference grammer array.
        for (const intentId of Object.keys(this.privAddedLmIntents)) {
            const addedLmIntent = this.privAddedLmIntents[intentId];
            // validate all the same model, region, and key...
            if (appId === undefined) {
                appId = addedLmIntent.modelImpl.appId;
            }
            else {
                if (appId !== addedLmIntent.modelImpl.appId) {
                    throw new Error("Intents must all be from the same LUIS model");
                }
            }
            if (region === undefined) {
                region = addedLmIntent.modelImpl.region;
            }
            else {
                if (region !== addedLmIntent.modelImpl.region) {
                    throw new Error("Intents must all be from the same LUIS model in a single region");
                }
            }
            if (subscriptionKey === undefined) {
                subscriptionKey = addedLmIntent.modelImpl.subscriptionKey;
            }
            else {
                if (subscriptionKey !== addedLmIntent.modelImpl.subscriptionKey) {
                    throw new Error("Intents must all use the same subscription key");
                }
            }
            const grammer = "luis/" + appId + "-PRODUCTION#" + intentId;
            refGrammers.push(grammer);
        }
        return {
            Intent: {
                id: appId,
                key: (subscriptionKey === undefined) ? this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key]) : subscriptionKey,
                provider: "LUIS",
            },
            ReferenceGrammars: (undefined === this.privUmbrellaIntent) ? refGrammers : ["luis/" + appId + "-PRODUCTION"],
        };
    }
}

//# sourceMappingURL=IntentRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/KeywordRecognitionModel.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/KeywordRecognitionModel.js ***!
  \***************************************************************************************************************/
/*! exports provided: KeywordRecognitionModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KeywordRecognitionModel", function() { return KeywordRecognitionModel; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents a keyword recognition model for recognizing when
 * the user says a keyword to initiate further speech recognition.
 * @class KeywordRecognitionModel
 */
class KeywordRecognitionModel {
    /**
     * Create and initializes a new instance.
     * @constructor
     */
    constructor() {
        this.privDisposed = false;
    }
    /**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromFile
     * @function
     * @public
     * @param {string} fileName - A string that represents file name for the keyword recognition model.
     *        Note, the file can point to a zip file in which case the model
     *        will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */
    static fromFile(fileName) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfFileDoesNotExist(fileName, "fileName");
        throw new Error("Not yet implemented.");
    }
    /**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromStream
     * @function
     * @public
     * @param {string} file - A File that represents file for the keyword recognition model.
     *        Note, the file can point to a zip file in which case the model will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */
    static fromStream(file) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNull(file, "file");
        throw new Error("Not yet implemented.");
    }
    /**
     * Dispose of associated resources.
     * @member KeywordRecognitionModel.prototype.close
     * @function
     * @public
     */
    close() {
        if (this.privDisposed) {
            return;
        }
        this.privDisposed = true;
    }
}

//# sourceMappingURL=KeywordRecognitionModel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageUnderstandingModel.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageUnderstandingModel.js ***!
  \******************************************************************************************************************/
/*! exports provided: LanguageUnderstandingModel, LanguageUnderstandingModelImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageUnderstandingModel", function() { return LanguageUnderstandingModel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageUnderstandingModelImpl", function() { return LanguageUnderstandingModelImpl; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Language understanding model
 * @class LanguageUnderstandingModel
 */
class LanguageUnderstandingModel {
    /**
     * Creates and initializes a new instance
     * @constructor
     */
    constructor() {
    }
    /**
     * Creates an language understanding model using the specified endpoint.
     * @member LanguageUnderstandingModel.fromEndpoint
     * @function
     * @public
     * @param {URL} uri - A String that represents the endpoint of the language understanding model.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    static fromEndpoint(uri) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNull(uri, "uri");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(uri.hostname, "uri");
        const langModelImp = new LanguageUnderstandingModelImpl();
        // Need to extract the app ID from the URL.
        // URL is in the format: https://<region>.api.cognitive.microsoft.com/luis/v2.0/apps/<Guid>?subscription-key=<key>&timezoneOffset=-360
        // Start tearing the string apart.
        // region can be extracted from the host name.
        const firstDot = uri.host.indexOf(".");
        if (-1 === firstDot) {
            throw new Error("Could not determine region from endpoint");
        }
        langModelImp.region = uri.host.substr(0, firstDot);
        // Now the app ID.
        const lastSegment = uri.pathname.lastIndexOf("/") + 1;
        if (-1 === lastSegment) {
            throw new Error("Could not determine appId from endpoint");
        }
        langModelImp.appId = uri.pathname.substr(lastSegment);
        // And finally the key.
        langModelImp.subscriptionKey = uri.searchParams.get("subscription-key");
        if (undefined === langModelImp.subscriptionKey) {
            throw new Error("Could not determine subscription key from endpoint");
        }
        return langModelImp;
    }
    /**
     * Creates an language understanding model using the application id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromAppId
     * @function
     * @public
     * @param {string} appId - A String that represents the application id of Language Understanding service.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    static fromAppId(appId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(appId, "appId");
        const langModelImp = new LanguageUnderstandingModelImpl();
        langModelImp.appId = appId;
        return langModelImp;
    }
    /**
     * Creates a language understanding model using hostname, subscription key and application
     * id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - A String that represents the subscription key of
     *        Language Understanding service.
     * @param {string} appId - A String that represents the application id of Language
     *        Understanding service.
     * @param {LanguageUnderstandingModel} region - A String that represents the region
     *        of the Language Understanding service (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    static fromSubscription(subscriptionKey, appId, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(appId, "appId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const langModelImp = new LanguageUnderstandingModelImpl();
        langModelImp.appId = appId;
        langModelImp.region = region;
        langModelImp.subscriptionKey = subscriptionKey;
        return langModelImp;
    }
}
/**
 * @private
 * @class LanguageUnderstandingModelImpl
 */
// tslint:disable-next-line:max-classes-per-file
class LanguageUnderstandingModelImpl extends LanguageUnderstandingModel {
}

//# sourceMappingURL=LanguageUnderstandingModel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchDetails.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchDetails.js ***!
  \******************************************************************************************************/
/*! exports provided: NoMatchDetails */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NoMatchDetails", function() { return NoMatchDetails; });
/* harmony import */ var _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Contains detailed information for NoMatch recognition results.
 * @class NoMatchDetails
 */
class NoMatchDetails {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {NoMatchReason} reason - The no-match reason.
     */
    constructor(reason) {
        this.privReason = reason;
    }
    /**
     * Creates an instance of NoMatchDetails object for the NoMatch SpeechRecognitionResults.
     * @member NoMatchDetails.fromResult
     * @function
     * @public
     * @param {SpeechRecognitionResult | IntentRecognitionResult | TranslationRecognitionResult}
     *        result - The recognition result that was not recognized.
     * @returns {NoMatchDetails} The no match details object being created.
     */
    static fromResult(result) {
        const simpleSpeech = _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SimpleSpeechPhrase"].fromJSON(result.json);
        let reason = _Exports__WEBPACK_IMPORTED_MODULE_1__["NoMatchReason"].NotRecognized;
        switch (simpleSpeech.RecognitionStatus) {
            case _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionStatus"].BabbleTimeout:
                reason = _Exports__WEBPACK_IMPORTED_MODULE_1__["NoMatchReason"].InitialBabbleTimeout;
                break;
            case _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionStatus"].InitialSilenceTimeout:
                reason = _Exports__WEBPACK_IMPORTED_MODULE_1__["NoMatchReason"].InitialSilenceTimeout;
                break;
            default:
                reason = _Exports__WEBPACK_IMPORTED_MODULE_1__["NoMatchReason"].NotRecognized;
                break;
        }
        return new NoMatchDetails(reason);
    }
    /**
     * The reason the recognition was canceled.
     * @member NoMatchDetails.prototype.reason
     * @function
     * @public
     * @returns {NoMatchReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
}

//# sourceMappingURL=NoMatchDetails.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchReason.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchReason.js ***!
  \*****************************************************************************************************/
/*! exports provided: NoMatchReason */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NoMatchReason", function() { return NoMatchReason; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the possible reasons a recognition result might not be recognized.
 * @class NoMatchReason
 */
var NoMatchReason;
(function (NoMatchReason) {
    /**
     * Indicates that speech was detected, but not recognized.
     * @member NoMatchReason.NotRecognized
     */
    NoMatchReason[NoMatchReason["NotRecognized"] = 0] = "NotRecognized";
    /**
     * Indicates that the start of the audio stream contained only silence,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialSilenceTimeout
     */
    NoMatchReason[NoMatchReason["InitialSilenceTimeout"] = 1] = "InitialSilenceTimeout";
    /**
     * Indicates that the start of the audio stream contained only noise,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialBabbleTimeout
     */
    NoMatchReason[NoMatchReason["InitialBabbleTimeout"] = 2] = "InitialBabbleTimeout";
})(NoMatchReason || (NoMatchReason = {}));

//# sourceMappingURL=NoMatchReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js ***!
  \****************************************************************************************************/
/*! exports provided: OutputFormat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OutputFormat", function() { return OutputFormat; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Define Speech Recognizer output formats.
 * @class OutputFormat
 */
var OutputFormat;
(function (OutputFormat) {
    /**
     * @member OutputFormat.Simple
     */
    OutputFormat[OutputFormat["Simple"] = 0] = "Simple";
    /**
     * @member OutputFormat.Detailed
     */
    OutputFormat[OutputFormat["Detailed"] = 1] = "Detailed";
})(OutputFormat || (OutputFormat = {}));

//# sourceMappingURL=OutputFormat.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PhraseListGrammar.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PhraseListGrammar.js ***!
  \*********************************************************************************************************/
/*! exports provided: PhraseListGrammar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PhraseListGrammar", function() { return PhraseListGrammar; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Allows additions of new phrases to improve speech recognition.
 *
 * Phrases added to the recognizer are effective at the start of the next recognition, or the next time the SpeechSDK must reconnect
 * to the speech service.
 */
class PhraseListGrammar {
    constructor(recogBase) {
        this.privGrammerBuilder = recogBase.dynamicGrammar;
    }
    /**
     * Creates a PhraseListGrammar from a given speech recognizer. Will accept any recognizer that derives from @class Recognizer.
     * @param recognizer The recognizer to add phrase lists to.
     */
    static fromRecognizer(recognizer) {
        const recoBase = recognizer.internalData;
        return new PhraseListGrammar(recoBase);
    }
    /**
     * Adds a single phrase to the current recognizer.
     * @param phrase Phrase to add.
     */
    addPhrase(phrase) {
        this.privGrammerBuilder.addPhrase(phrase);
    }
    /**
     * Adds multiple phrases to the current recognizer.
     * @param phrases Array of phrases to add.
     */
    addPhrases(phrases) {
        this.privGrammerBuilder.addPhrase(phrases);
    }
    /**
     * Clears all phrases added to the current recognizer.
     */
    clear() {
        this.privGrammerBuilder.clearPhrases();
    }
}

//# sourceMappingURL=PhraseListGrammar.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js ***!
  \*******************************************************************************************************/
/*! exports provided: ProfanityOption */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProfanityOption", function() { return ProfanityOption; });
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
/**
 * Profanity option.
 * Added in version 1.7.0.
 */
var ProfanityOption;
(function (ProfanityOption) {
    ProfanityOption[ProfanityOption["Masked"] = 0] = "Masked";
    ProfanityOption[ProfanityOption["Removed"] = 1] = "Removed";
    ProfanityOption[ProfanityOption["Raw"] = 2] = "Raw";
})(ProfanityOption || (ProfanityOption = {}));

//# sourceMappingURL=ProfanityOption.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js ***!
  \**********************************************************************************************************/
/*! exports provided: PropertyCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyCollection", function() { return PropertyCollection; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents collection of properties and their values.
 * @class PropertyCollection
 */
class PropertyCollection {
    constructor() {
        this.privKeys = [];
        this.privValues = [];
    }
    /**
     * Returns the property value in type String. The parameter must have the same type as String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member PropertyCollection.prototype.getProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} def - The default value which is returned if the parameter
     *        is not available in the collection.
     * @returns {string} value of the parameter.
     */
    getProperty(key, def) {
        let keyToUse;
        if (typeof key === "string") {
            keyToUse = key;
        }
        else {
            keyToUse = _Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"][key];
        }
        for (let n = 0; n < this.privKeys.length; n++) {
            if (this.privKeys[n] === keyToUse) {
                return this.privValues[n];
            }
        }
        return def;
    }
    /**
     * Sets the String value of the parameter specified by name.
     * @member PropertyCollection.prototype.setProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */
    setProperty(key, value) {
        let keyToUse;
        if (typeof key === "string") {
            keyToUse = key;
        }
        else {
            keyToUse = _Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyId"][key];
        }
        for (let n = 0; n < this.privKeys.length; n++) {
            if (this.privKeys[n] === keyToUse) {
                this.privValues[n] = value;
                return;
            }
        }
        this.privKeys.push(keyToUse);
        this.privValues.push(value);
    }
    /**
     * Clones the collection.
     * @member PropertyCollection.prototype.clone
     * @function
     * @public
     * @returns {PropertyCollection} A copy of the collection.
     */
    clone() {
        const clonedMap = new PropertyCollection();
        for (let n = 0; n < this.privKeys.length; n++) {
            clonedMap.privKeys.push(this.privKeys[n]);
            clonedMap.privValues.push(this.privValues[n]);
        }
        return clonedMap;
    }
}

//# sourceMappingURL=PropertyCollection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js ***!
  \**************************************************************************************************/
/*! exports provided: PropertyId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyId", function() { return PropertyId; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines speech property ids.
 * @class PropertyId
 */
var PropertyId;
(function (PropertyId) {
    /**
     * The Cognitive Services Speech Service subscription Key. If you are using an intent recognizer, you need to specify
     * to specify the LUIS endpoint key for your particular LUIS app. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]].
     * @member PropertyId.SpeechServiceConnection_Key
     */
    PropertyId[PropertyId["SpeechServiceConnection_Key"] = 0] = "SpeechServiceConnection_Key";
    /**
     * The Cognitive Services Speech Service endpoint (url). Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromEndpoint]].
     * NOTE: This endpoint is not the same as the endpoint used to obtain an access token.
     * @member PropertyId.SpeechServiceConnection_Endpoint
     */
    PropertyId[PropertyId["SpeechServiceConnection_Endpoint"] = 1] = "SpeechServiceConnection_Endpoint";
    /**
     * The Cognitive Services Speech Service region. Under normal circumstances, you shouldn't have to
     * use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]], [[SpeechConfig.fromEndpoint]], [[SpeechConfig.fromAuthorizationToken]].
     * @member PropertyId.SpeechServiceConnection_Region
     */
    PropertyId[PropertyId["SpeechServiceConnection_Region"] = 2] = "SpeechServiceConnection_Region";
    /**
     * The Cognitive Services Speech Service authorization token (aka access token). Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead, use [[SpeechConfig.fromAuthorizationToken]],
     * [[SpeechRecognizer.authorizationToken]], [[IntentRecognizer.authorizationToken]], [[TranslationRecognizer.authorizationToken]].
     * @member PropertyId.SpeechServiceAuthorization_Token
     */
    PropertyId[PropertyId["SpeechServiceAuthorization_Token"] = 3] = "SpeechServiceAuthorization_Token";
    /**
     * The Cognitive Services Speech Service authorization type. Currently unused.
     * @member PropertyId.SpeechServiceAuthorization_Type
     */
    PropertyId[PropertyId["SpeechServiceAuthorization_Type"] = 4] = "SpeechServiceAuthorization_Type";
    /**
     * The Cognitive Services Speech Service endpoint id. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.endpointId]].
     * NOTE: The endpoint id is available in the Speech Portal, listed under Endpoint Details.
     * @member PropertyId.SpeechServiceConnection_EndpointId
     */
    PropertyId[PropertyId["SpeechServiceConnection_EndpointId"] = 5] = "SpeechServiceConnection_EndpointId";
    /**
     * The list of comma separated languages (BCP-47 format) used as target translation languages. Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead use [[SpeechTranslationConfig.addTargetLanguage]],
     * [[SpeechTranslationConfig.targetLanguages]], [[TranslationRecognizer.targetLanguages]].
     * @member PropertyId.SpeechServiceConnection_TranslationToLanguages
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationToLanguages"] = 6] = "SpeechServiceConnection_TranslationToLanguages";
    /**
     * The name of the Cognitive Service Text to Speech Service Voice. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead, use [[SpeechTranslationConfig.voiceName]].
     * NOTE: Valid voice names can be found <a href="https://aka.ms/csspeech/voicenames">here</a>.
     * @member PropertyId.SpeechServiceConnection_TranslationVoice
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationVoice"] = 7] = "SpeechServiceConnection_TranslationVoice";
    /**
     * Translation features.
     * @member PropertyId.SpeechServiceConnection_TranslationFeatures
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationFeatures"] = 8] = "SpeechServiceConnection_TranslationFeatures";
    /**
     * The Language Understanding Service Region. Under normal circumstances, you shouldn't have to use this property directly.
     * Instead, use [[LanguageUnderstandingModel]].
     * @member PropertyId.SpeechServiceConnection_IntentRegion
     */
    PropertyId[PropertyId["SpeechServiceConnection_IntentRegion"] = 9] = "SpeechServiceConnection_IntentRegion";
    /**
     * The host name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyHostName"] = 10] = "SpeechServiceConnection_ProxyHostName";
    /**
     * The port of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyPort"] = 11] = "SpeechServiceConnection_ProxyPort";
    /**
     * The user name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyUserName"] = 12] = "SpeechServiceConnection_ProxyUserName";
    /**
     * The password of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyPassword"] = 13] = "SpeechServiceConnection_ProxyPassword";
    /**
     * The Cognitive Services Speech Service recognition Mode. Can be "INTERACTIVE", "CONVERSATION", "DICTATION".
     * This property is intended to be read-only. The SDK is using it internally.
     * @member PropertyId.SpeechServiceConnection_RecoMode
     */
    PropertyId[PropertyId["SpeechServiceConnection_RecoMode"] = 14] = "SpeechServiceConnection_RecoMode";
    /**
     * The spoken language to be recognized (in BCP-47 format). Under normal circumstances, you shouldn't have to use this property
     * directly.
     * Instead, use [[SpeechConfig.speechRecognitionLanguage]].
     * @member PropertyId.SpeechServiceConnection_RecoLanguage
     */
    PropertyId[PropertyId["SpeechServiceConnection_RecoLanguage"] = 15] = "SpeechServiceConnection_RecoLanguage";
    /**
     * The session id. This id is a universally unique identifier (aka UUID) representing a specific binding of an audio input stream
     * and the underlying speech recognition instance to which it is bound. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead use [[SessionEventArgs.sessionId]].
     * @member PropertyId.Speech_SessionId
     */
    PropertyId[PropertyId["Speech_SessionId"] = 16] = "Speech_SessionId";
    /**
     * The requested Cognitive Services Speech Service response output format (simple or detailed). Under normal circumstances, you shouldn't have
     * to use this property directly.
     * Instead use [[SpeechConfig.outputFormat]].
     * @member PropertyId.SpeechServiceResponse_RequestDetailedResultTrueFalse
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestDetailedResultTrueFalse"] = 17] = "SpeechServiceResponse_RequestDetailedResultTrueFalse";
    /**
     * The requested Cognitive Services Speech Service response output profanity level. Currently unused.
     * @member PropertyId.SpeechServiceResponse_RequestProfanityFilterTrueFalse
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestProfanityFilterTrueFalse"] = 18] = "SpeechServiceResponse_RequestProfanityFilterTrueFalse";
    /**
     * The Cognitive Services Speech Service response output (in JSON format). This property is available on recognition result objects only.
     * @member PropertyId.SpeechServiceResponse_JsonResult
     */
    PropertyId[PropertyId["SpeechServiceResponse_JsonResult"] = 19] = "SpeechServiceResponse_JsonResult";
    /**
     * The Cognitive Services Speech Service error details (in JSON format). Under normal circumstances, you shouldn't have to
     * use this property directly. Instead use [[CancellationDetails.errorDetails]].
     * @member PropertyId.SpeechServiceResponse_JsonErrorDetails
     */
    PropertyId[PropertyId["SpeechServiceResponse_JsonErrorDetails"] = 20] = "SpeechServiceResponse_JsonErrorDetails";
    /**
     * The cancellation reason. Currently unused.
     * @member PropertyId.CancellationDetails_Reason
     */
    PropertyId[PropertyId["CancellationDetails_Reason"] = 21] = "CancellationDetails_Reason";
    /**
     * The cancellation text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonText
     */
    PropertyId[PropertyId["CancellationDetails_ReasonText"] = 22] = "CancellationDetails_ReasonText";
    /**
     * The Cancellation detailed text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonDetailedText
     */
    PropertyId[PropertyId["CancellationDetails_ReasonDetailedText"] = 23] = "CancellationDetails_ReasonDetailedText";
    /**
     * The Language Understanding Service response output (in JSON format). Available via [[IntentRecognitionResult]]
     * @member PropertyId.LanguageUnderstandingServiceResponse_JsonResult
     */
    PropertyId[PropertyId["LanguageUnderstandingServiceResponse_JsonResult"] = 24] = "LanguageUnderstandingServiceResponse_JsonResult";
    /**
     * The URL string built from speech configuration.
     * This property is intended to be read-only. The SDK is using it internally.
     * NOTE: Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_Url"] = 25] = "SpeechServiceConnection_Url";
    /**
     * The initial silence timeout value (in milliseconds) used by the service.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_InitialSilenceTimeoutMs"] = 26] = "SpeechServiceConnection_InitialSilenceTimeoutMs";
    /**
     * The end silence timeout value (in milliseconds) used by the service.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_EndSilenceTimeoutMs"] = 27] = "SpeechServiceConnection_EndSilenceTimeoutMs";
    /**
     * A boolean value specifying whether audio logging is enabled in the service or not.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_EnableAudioLogging"] = 28] = "SpeechServiceConnection_EnableAudioLogging";
    /**
     * The requested Cognitive Services Speech Service response output profanity setting.
     * Allowed values are "masked", "removed", and "raw".
     * Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_ProfanityOption"] = 29] = "SpeechServiceResponse_ProfanityOption";
    /**
     * A string value specifying which post processing option should be used by service.
     * Allowed values are "TrueText".
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceResponse_PostProcessingOption"] = 30] = "SpeechServiceResponse_PostProcessingOption";
    /**
     *  A boolean value specifying whether to include word-level timestamps in the response result.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestWordLevelTimestamps"] = 31] = "SpeechServiceResponse_RequestWordLevelTimestamps";
    /**
     * The number of times a word has to be in partial results to be returned.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceResponse_StablePartialResultThreshold"] = 32] = "SpeechServiceResponse_StablePartialResultThreshold";
    /**
     * A string value specifying the output format option in the response result. Internal use only.
     * Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_OutputFormatOption"] = 33] = "SpeechServiceResponse_OutputFormatOption";
    /**
     * A boolean value to request for stabilizing translation partial results by omitting words in the end.
     * Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_TranslationRequestStablePartialResult"] = 34] = "SpeechServiceResponse_TranslationRequestStablePartialResult";
    /**
     * Identifier used to connect to the backend service.
     * @member PropertyId.Conversation_ApplicationId
     */
    PropertyId[PropertyId["Conversation_ApplicationId"] = 35] = "Conversation_ApplicationId";
    /**
     * Type of dialog backend to connect to.
     * @member PropertyId.Conversation_DialogType
     */
    PropertyId[PropertyId["Conversation_DialogType"] = 36] = "Conversation_DialogType";
    /**
     * Silence timeout for listening
     * @member PropertyId.Conversation_Initial_Silence_Timeout
     */
    PropertyId[PropertyId["Conversation_Initial_Silence_Timeout"] = 37] = "Conversation_Initial_Silence_Timeout";
    /**
     * From Id to add to speech recognition activities.
     * @member PropertyId.Conversation_From_Id
     */
    PropertyId[PropertyId["Conversation_From_Id"] = 38] = "Conversation_From_Id";
})(PropertyId || (PropertyId = {}));

//# sourceMappingURL=PropertyId.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js ***!
  \************************************************************************************************************/
/*! exports provided: RecognitionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionEventArgs", function() { return RecognitionEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines payload for session events like Speech Start/End Detected
 * @class
 */
class RecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(offset, sessionId) {
        super(sessionId);
        this.privOffset = offset;
    }
    /**
     * Represents the message offset
     * @member RecognitionEventArgs.prototype.offset
     * @function
     * @public
     */
    get offset() {
        return this.privOffset;
    }
}

//# sourceMappingURL=RecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js ***!
  \*********************************************************************************************************/
/*! exports provided: RecognitionResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognitionResult", function() { return RecognitionResult; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines result of speech recognition.
 * @class RecognitionResult
 */
class RecognitionResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(resultId, reason, text, duration, offset, errorDetails, json, properties) {
        this.privResultId = resultId;
        this.privReason = reason;
        this.privText = text;
        this.privDuration = duration;
        this.privOffset = offset;
        this.privErrorDetails = errorDetails;
        this.privJson = json;
        this.privProperties = properties;
    }
    /**
     * Specifies the result identifier.
     * @member RecognitionResult.prototype.resultId
     * @function
     * @public
     * @returns {string} Specifies the result identifier.
     */
    get resultId() {
        return this.privResultId;
    }
    /**
     * Specifies status of the result.
     * @member RecognitionResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} Specifies status of the result.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * Presents the recognized text in the result.
     * @member RecognitionResult.prototype.text
     * @function
     * @public
     * @returns {string} Presents the recognized text in the result.
     */
    get text() {
        return this.privText;
    }
    /**
     * Duration of recognized speech in 100 nano second incements.
     * @member RecognitionResult.prototype.duration
     * @function
     * @public
     * @returns {number} Duration of recognized speech in 100 nano second incements.
     */
    get duration() {
        return this.privDuration;
    }
    /**
     * Offset of recognized speech in 100 nano second incements.
     * @member RecognitionResult.prototype.offset
     * @function
     * @public
     * @returns {number} Offset of recognized speech in 100 nano second incements.
     */
    get offset() {
        return this.privOffset;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member RecognitionResult.prototype.errorDetails
     * @function
     * @public
     * @returns {string} a brief description of an error.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
    /**
     * A string containing Json serialized recognition result as it was received from the service.
     * @member RecognitionResult.prototype.json
     * @function
     * @private
     * @returns {string} Json serialized representation of the result.
     */
    get json() {
        return this.privJson;
    }
    /**
     *  The set of properties exposed in the result.
     * @member RecognitionResult.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The set of properties exposed in the result.
     */
    get properties() {
        return this.privProperties;
    }
}

//# sourceMappingURL=RecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js ***!
  \**************************************************************************************************/
/*! exports provided: Recognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Recognizer", function() { return Recognizer; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.




/**
 * Defines the base class Recognizer which mainly contains common event handlers.
 * @class Recognizer
 */
class Recognizer {
    /**
     * Creates and initializes an instance of a Recognizer
     * @constructor
     * @param {AudioConfig} audioInput - An optional audio input stream associated with the recognizer
     */
    constructor(audioConfig, properties, connectionFactory) {
        this.audioConfig = (audioConfig !== undefined) ? audioConfig : _Exports__WEBPACK_IMPORTED_MODULE_3__["AudioConfig"].fromDefaultMicrophoneInput();
        this.privDisposed = false;
        this.privProperties = properties.clone();
        this.privConnectionFactory = connectionFactory;
        this.implCommonRecognizerSetup();
    }
    /**
     * Dispose of associated resources.
     * @member Recognizer.prototype.close
     * @function
     * @public
     */
    close() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposed);
        this.dispose(true);
    }
    /**
     * @Internal
     * Internal data member to support fromRecognizer* pattern methods on other classes.
     * Do not use externally, object returned will change without warning or notice.
     */
    get internalData() {
        return this.privReco;
    }
    /**
     * This method performs cleanup of resources.
     * The Boolean parameter disposing indicates whether the method is called
     * from Dispose (if disposing is true) or from the finalizer (if disposing is false).
     * Derived classes should override this method to dispose resource if needed.
     * @member Recognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - Flag to request disposal.
     */
    dispose(disposing) {
        if (this.privDisposed) {
            return;
        }
        if (disposing) {
            if (this.privReco) {
                this.privReco.audioSource.turnOff();
                this.privReco.dispose();
            }
        }
        this.privDisposed = true;
    }
    /**
     * This method returns the current state of the telemetry setting.
     * @member Recognizer.prototype.telemetryEnabled
     * @function
     * @public
     * @returns true if the telemetry is enabled, false otherwise.
     */
    static get telemetryEnabled() {
        return _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServiceRecognizerBase"].telemetryDataEnabled;
    }
    /**
     * This method globally enables or disables telemetry.
     * @member Recognizer.prototype.enableTelemetry
     * @function
     * @public
     * @param enabled - Global setting for telemetry collection.
     * If set to true, telemetry information like microphone errors,
     * recognition errors are collected and sent to Microsoft.
     * If set to false, no telemetry is sent to Microsoft.
     */
    /* tslint:disable:member-ordering */
    static enableTelemetry(enabled) {
        _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServiceRecognizerBase"].telemetryDataEnabled = enabled;
    }
    // Does the generic recognizer setup that is common across all recognizer types.
    implCommonRecognizerSetup() {
        let osPlatform = (typeof window !== "undefined") ? "Browser" : "Node";
        let osName = "unknown";
        let osVersion = "unknown";
        if (typeof navigator !== "undefined") {
            osPlatform = osPlatform + "/" + navigator.platform;
            osName = navigator.userAgent;
            osVersion = navigator.appVersion;
        }
        const recognizerConfig = this.createRecognizerConfig(new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechServiceConfig"](new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["Context"](new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OS"](osPlatform, osName, osVersion))));
        const subscriptionKey = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_Key, undefined);
        const authentication = (subscriptionKey && subscriptionKey !== "") ?
            new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CognitiveSubscriptionKeyAuthentication"](subscriptionKey) :
            new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["CognitiveTokenAuthentication"]((authFetchEventId) => {
                const authorizationToken = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token, undefined);
                return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(authorizationToken);
            }, (authFetchEventId) => {
                const authorizationToken = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token, undefined);
                return _common_Exports__WEBPACK_IMPORTED_MODULE_1__["PromiseHelper"].fromResult(authorizationToken);
            });
        this.privReco = this.createServiceRecognizer(authentication, this.privConnectionFactory, this.audioConfig, recognizerConfig);
    }
    // Start the recognition
    implRecognizerStart(recognitionMode, successCallback, errorCallback) {
        this.privReco.recognize(recognitionMode, successCallback, errorCallback).on(
        /* tslint:disable:no-empty */
        (result) => { }, (error) => {
            if (!!errorCallback) {
                // Internal error with service communication.
                errorCallback("Runtime error: " + error);
            }
        });
    }
    implRecognizerStop() {
        if (this.privReco) {
            this.privReco.stopRecognizing();
        }
    }
}

//# sourceMappingURL=Recognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js ***!
  \****************************************************************************************************/
/*! exports provided: ResultReason */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResultReason", function() { return ResultReason; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the possible reasons a recognition result might be generated.
 * @class ResultReason
 */
var ResultReason;
(function (ResultReason) {
    /**
     * Indicates speech could not be recognized. More details
     * can be found in the NoMatchDetails object.
     * @member ResultReason.NoMatch
     */
    ResultReason[ResultReason["NoMatch"] = 0] = "NoMatch";
    /**
     * Indicates that the recognition was canceled. More details
     * can be found using the CancellationDetails object.
     * @member ResultReason.Canceled
     */
    ResultReason[ResultReason["Canceled"] = 1] = "Canceled";
    /**
     * Indicates the speech result contains hypothesis text.
     * @member ResultReason.RecognizedSpeech
     */
    ResultReason[ResultReason["RecognizingSpeech"] = 2] = "RecognizingSpeech";
    /**
     * Indicates the speech result contains final text that has been recognized.
     * Speech Recognition is now complete for this phrase.
     * @member ResultReason.RecognizedSpeech
     */
    ResultReason[ResultReason["RecognizedSpeech"] = 3] = "RecognizedSpeech";
    /**
     * Indicates the intent result contains hypothesis text and intent.
     * @member ResultReason.RecognizingIntent
     */
    ResultReason[ResultReason["RecognizingIntent"] = 4] = "RecognizingIntent";
    /**
     * Indicates the intent result contains final text and intent.
     * Speech Recognition and Intent determination are now complete for this phrase.
     * @member ResultReason.RecognizedIntent
     */
    ResultReason[ResultReason["RecognizedIntent"] = 5] = "RecognizedIntent";
    /**
     * Indicates the translation result contains hypothesis text and its translation(s).
     * @member ResultReason.TranslatingSpeech
     */
    ResultReason[ResultReason["TranslatingSpeech"] = 6] = "TranslatingSpeech";
    /**
     * Indicates the translation result contains final text and corresponding translation(s).
     * Speech Recognition and Translation are now complete for this phrase.
     * @member ResultReason.TranslatedSpeech
     */
    ResultReason[ResultReason["TranslatedSpeech"] = 7] = "TranslatedSpeech";
    /**
     * Indicates the synthesized audio result contains a non-zero amount of audio data
     * @member ResultReason.SynthesizingAudio
     */
    ResultReason[ResultReason["SynthesizingAudio"] = 8] = "SynthesizingAudio";
    /**
     * Indicates the synthesized audio is now complete for this phrase.
     * @member ResultReason.SynthesizingAudioCompleted
     */
    ResultReason[ResultReason["SynthesizingAudioCompleted"] = 9] = "SynthesizingAudioCompleted";
})(ResultReason || (ResultReason = {}));

//# sourceMappingURL=ResultReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServicePropertyChannel.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServicePropertyChannel.js ***!
  \**************************************************************************************************************/
/*! exports provided: ServicePropertyChannel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServicePropertyChannel", function() { return ServicePropertyChannel; });
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
/**
 * Defines channels used to pass property settings to service.
 * Added in version 1.7.0.
 */
var ServicePropertyChannel;
(function (ServicePropertyChannel) {
    /**
     * Uses URI query parameter to pass property settings to service.
     */
    ServicePropertyChannel[ServicePropertyChannel["UriQueryParameter"] = 0] = "UriQueryParameter";
})(ServicePropertyChannel || (ServicePropertyChannel = {}));

//# sourceMappingURL=ServicePropertyChannel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js ***!
  \********************************************************************************************************/
/*! exports provided: SessionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SessionEventArgs", function() { return SessionEventArgs; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines content for session events like SessionStarted/Stopped, SoundStarted/Stopped.
 * @class SessionEventArgs
 */
class SessionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionId - The session id.
     */
    constructor(sessionId) {
        this.privSessionId = sessionId;
    }
    /**
     * Represents the session identifier.
     * @member SessionEventArgs.prototype.sessionId
     * @function
     * @public
     * @returns {string} Represents the session identifier.
     */
    get sessionId() {
        return this.privSessionId;
    }
}

//# sourceMappingURL=SessionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechCommandsConfig.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechCommandsConfig.js ***!
  \************************************************************************************************************/
/*! exports provided: SpeechCommandsConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechCommandsConfig", function() { return SpeechCommandsConfig; });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DialogServiceConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Class that defines configurations for the dialog service connector object for using a SpeechCommands backend.
 * @class SpeechCommandsConfig
 */
class SpeechCommandsConfig extends _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"] {
    /**
     * Creates an instance of SpeechCommandsConfig.
     */
    constructor() {
        super();
    }
    /**
     * Creates an instance of the bot framework config with the specified subscription and region.
     * @member SpeechCommandsConfig.fromSubscription
     * @function
     * @public
     * @param applicationId Speech Commands application id.
     * @param subscription Subscription key associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechCommandsConfig} A new bot framework config.
     */
    static fromSubscription(applicationId, subscription, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(applicationId, "applicationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(subscription, "subscription");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const speechCommandsConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"]();
        speechCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType, "custom_commands");
        speechCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId, applicationId);
        speechCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscription);
        speechCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        return speechCommandsConfig;
    }
    /**
     * Creates an instance of the bot framework config with the specified Speech Commands application id, authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by calling this setter with a new valid token.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechCommandsConfig.fromAuthorizationToken
     * @function
     * @public
     * @param applicationId Speech Commands application id.
     * @param authorizationToken The authorization token associated with the application.
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechCommandsConfig} A new speech commands config.
     */
    static fromAuthorizationToken(applicationId, authorizationToken, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(applicationId, "applicationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const speechCommandsConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_1__["DialogServiceConfigImpl"]();
        speechCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_DialogType, "custom_commands");
        speechCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId, applicationId);
        speechCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, authorizationToken);
        speechCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        return speechCommandsConfig;
    }
    /**
     * Sets the corresponding backend application identifier.
     * @member SpeechCommandsConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to set.
     */
    set applicationId(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__["Contracts"].throwIfNullOrWhitespace(value, "value");
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId, value);
    }
    /**
     * Gets the corresponding backend application identifier.
     * @member SpeechCommandsConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to get.
     */
    get applicationId() {
        return this.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].Conversation_ApplicationId);
    }
}

//# sourceMappingURL=SpeechCommandsConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js ***!
  \****************************************************************************************************/
/*! exports provided: SpeechConfig, SpeechConfigImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechConfig", function() { return SpeechConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechConfigImpl", function() { return SpeechConfigImpl; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Speech configuration.
 * @class SpeechConfig
 */
class SpeechConfig {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    constructor() { }
    /**
     * Static instance of SpeechConfig returned by passing subscriptionKey and service region.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * @member SpeechConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} The speech factory
     */
    static fromSubscription(subscriptionKey, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_IntentRegion, region);
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        return speechImpl;
    }
    /**
     * Creates an instance of the speech config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or parameters.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * Note: The query parameters specified in the endpoint URL are not changed, even if they are set by any other APIs.
     * For example, if language is defined in the uri as query parameter "language=de-DE", and also set by
     *              SpeechConfig.speechRecognitionLanguage = "en-US", the language setting in uri takes precedence,
     *              and the effective language is "de-DE". Only the parameters that are not specified in the
     *              endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     *       fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     *       use the authorization token.
     * @member SpeechConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */
    static fromEndpoint(endpoint, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(endpoint, "endpoint");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint, endpoint.href);
        if (undefined !== subscriptionKey) {
            speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        }
        return speechImpl;
    }
    /**
     * Creates an instance of the speech factory with specified initial authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     *       expires, the caller needs to refresh it by calling this setter with a new valid token.
     * Note: Please use a token derived from your LanguageUnderstanding subscription key in case you want
     *       to use the Intent recognizer. As configuration values are copied when creating a new recognizer,
     *       the new token value will not apply to recognizers that have already been created. For recognizers
     *       that have been created before, you need to set authorization token of the corresponding recognizer
     *       to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The initial authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} A speech factory instance.
     */
    static fromAuthorizationToken(authorizationToken, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_IntentRegion, region);
        speechImpl.authorizationToken = authorizationToken;
        return speechImpl;
    }
    /**
     * Closes the configuration.
     * @member SpeechConfig.prototype.close
     * @function
     * @public
     */
    /* tslint:disable:no-empty */
    close() { }
}
/**
 * @public
 * @class SpeechConfigImpl
 */
// tslint:disable-next-line:max-classes-per-file
class SpeechConfigImpl extends SpeechConfig {
    constructor() {
        super();
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]();
        this.speechRecognitionLanguage = "en-US"; // Should we have a default?
        this.outputFormat = _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"].Simple;
    }
    get properties() {
        return this.privProperties;
    }
    get endPoint() {
        return new URL(this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint));
    }
    get subscriptionKey() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key);
    }
    get region() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region);
    }
    get authorizationToken() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    set authorizationToken(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, value);
    }
    get speechRecognitionLanguage() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage);
    }
    set speechRecognitionLanguage(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage, value);
    }
    get outputFormat() {
        return _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][this.privProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormatPropertyName"], undefined)];
    }
    set outputFormat(value) {
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormatPropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][value]);
    }
    get endpointId() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EndpointId);
    }
    set endpointId(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EndpointId, value);
    }
    setProperty(name, value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(value, "value");
        this.privProperties.setProperty(name, value);
    }
    getProperty(name, def) {
        return this.privProperties.getProperty(name, def);
    }
    setProxy(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyHostName], proxyHostName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyPort], proxyPort);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyUserName], proxyUserName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyPassword], proxyPassword);
    }
    setServiceProperty(name, value, channel) {
        const currentProperties = JSON.parse(this.privProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], "{}"));
        currentProperties[name] = value;
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], JSON.stringify(currentProperties));
    }
    setProfanity(profanity) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_ProfanityOption, _Exports__WEBPACK_IMPORTED_MODULE_2__["ProfanityOption"][profanity]);
    }
    enableAudioLogging() {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EnableAudioLogging, "true");
    }
    requestWordLevelTimestamps() {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_RequestWordLevelTimestamps, "true");
    }
    enableDictation() {
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ForceDictationPropertyName"], "true");
    }
    clone() {
        const ret = new SpeechConfigImpl();
        ret.privProperties = this.privProperties.clone();
        return ret;
    }
}

//# sourceMappingURL=SpeechConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js ***!
  \**************************************************************************************************************************/
/*! exports provided: SpeechRecognitionCanceledEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionCanceledEventArgs", function() { return SpeechRecognitionCanceledEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines content of a RecognitionErrorEvent.
 * @class SpeechRecognitionCanceledEventArgs
 */
class SpeechRecognitionCanceledEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(reason, errorDetails, errorCode, offset, sessionId) {
        super(offset, sessionId);
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privErrorCode = errorCode;
    }
    /**
     * The reason the recognition was canceled.
     * @member SpeechRecognitionCanceledEventArgs.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */
    get errorCode() {
        return this.privErrorCode;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member SpeechRecognitionCanceledEventArgs.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
}

//# sourceMappingURL=SpeechRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js ***!
  \******************************************************************************************************************/
/*! exports provided: SpeechRecognitionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionEventArgs", function() { return SpeechRecognitionEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines contents of speech recognizing/recognized event.
 * @class SpeechRecognitionEventArgs
 */
class SpeechRecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechRecognitionResult} result - The speech recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the recognition result.
     * @member SpeechRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {SpeechRecognitionResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=SpeechRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js ***!
  \***************************************************************************************************************/
/*! exports provided: SpeechRecognitionResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognitionResult", function() { return SpeechRecognitionResult; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines result of speech recognition.
 * @class SpeechRecognitionResult
 */
class SpeechRecognitionResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionResult"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @public
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(resultId, reason, text, duration, offset, errorDetails, json, properties) {
        super(resultId, reason, text, duration, offset, errorDetails, json, properties);
    }
}

//# sourceMappingURL=SpeechRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognizer.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognizer.js ***!
  \********************************************************************************************************/
/*! exports provided: SpeechRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechRecognizer", function() { return SpeechRecognizer; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_speech_SpeechConnectionFactory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/SpeechConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.




/**
 * Performs speech recognition from microphone, file, or other audio input streams, and gets transcribed text as result.
 * @class SpeechRecognizer
 */
class SpeechRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_3__["Recognizer"] {
    /**
     * SpeechRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */
    constructor(speechConfig, audioConfig) {
        const speechConfigImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(speechConfigImpl, "speechConfig");
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(speechConfigImpl.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage), _Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage]);
        super(audioConfig, speechConfigImpl.properties, new _common_speech_SpeechConnectionFactory__WEBPACK_IMPORTED_MODULE_1__["SpeechConnectionFactory"]());
        this.privDisposedSpeechRecognizer = false;
    }
    /**
     * Gets the endpoint id of a customized speech model that is used for speech recognition.
     * @member SpeechRecognizer.prototype.endpointId
     * @function
     * @public
     * @returns {string} the endpoint id of a customized speech model that is used for speech recognition.
     */
    get endpointId() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedSpeechRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_EndpointId, "00000000-0000-0000-0000-000000000000");
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member SpeechRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member SpeechRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceAuthorization_Token, token);
    }
    /**
     * Gets the spoken language of recognition.
     * @member SpeechRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} The spoken language of recognition.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedSpeechRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__["PropertyId"].SpeechServiceConnection_RecoLanguage);
    }
    /**
     * Gets the output format of recognition.
     * @member SpeechRecognizer.prototype.outputFormat
     * @function
     * @public
     * @returns {OutputFormat} The output format of recognition.
     */
    get outputFormat() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedSpeechRecognizer);
        if (this.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormatPropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"][_Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"].Simple]) === _Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"][_Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"].Simple]) {
            return _Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"].Simple;
        }
        else {
            return _Exports__WEBPACK_IMPORTED_MODULE_3__["OutputFormat"].Detailed;
        }
    }
    /**
     * The collection of properties and their values defined for this SpeechRecognizer.
     * @member SpeechRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Starts speech recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     *       so it is suitable only for single shot recognition
     *       like command or query. For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member SpeechRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the SpeechRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedSpeechRecognizer);
            this.implRecognizerStop();
            this.implRecognizerStart(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Interactive, (e) => {
                this.implRecognizerStop();
                if (!!cb) {
                    cb(e);
                }
            }, (e) => {
                this.implRecognizerStop();
                if (!!err) {
                    err(e);
                }
            });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    }
    /**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member SpeechRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startContinuousRecognitionAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedSpeechRecognizer);
            this.implRecognizerStop();
            this.implRecognizerStart(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Conversation, undefined, undefined);
            // report result to promise.
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
                cb = undefined;
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    }
    /**
     * Stops continuous speech recognition.
     * @member SpeechRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopContinuousRecognitionAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedSpeechRecognizer);
            this.implRecognizerStop();
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    }
    /**
     * Starts speech recognition with keyword spotting, until
     * stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the
     *      Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model The keyword recognition model that
     *        specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startKeywordRecognitionAsync(model, cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfNull(model, "model");
        if (!!err) {
            err("Not yet implemented.");
        }
    }
    /**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the
     *       Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopKeywordRecognitionAsync(cb, err) {
        if (!!cb) {
            cb();
        }
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member SpeechRecognizer.prototype.close
     * @function
     * @public
     */
    close() {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__["Contracts"].throwIfDisposed(this.privDisposedSpeechRecognizer);
        this.dispose(true);
    }
    /**
     * Disposes any resources held by the object.
     * @member SpeechRecognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */
    dispose(disposing) {
        if (this.privDisposedSpeechRecognizer) {
            return;
        }
        if (disposing) {
            this.implRecognizerStop();
            this.privDisposedSpeechRecognizer = true;
        }
        super.dispose(disposing);
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognizerConfig"](speechConfig, this.properties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const configImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechServiceRecognizer"](authentication, connectionFactory, configImpl, recognizerConfig, this);
    }
}

//# sourceMappingURL=SpeechRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechTranslationConfig.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechTranslationConfig.js ***!
  \***************************************************************************************************************/
/*! exports provided: SpeechTranslationConfig, SpeechTranslationConfigImpl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechTranslationConfig", function() { return SpeechTranslationConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpeechTranslationConfigImpl", function() { return SpeechTranslationConfigImpl; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Speech translation configuration.
 * @class SpeechTranslationConfig
 */
class SpeechTranslationConfig extends _Exports__WEBPACK_IMPORTED_MODULE_2__["SpeechConfig"] {
    /**
     * Creates an instance of recognizer config.
     */
    constructor() {
        super();
    }
    /**
     * Static instance of SpeechTranslationConfig returned by passing a subscription key and service region.
     * @member SpeechTranslationConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */
    static fromSubscription(subscriptionKey, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        return ret;
    }
    /**
     * Static instance of SpeechTranslationConfig returned by passing authorization token and service region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     *       expires, the caller needs to refresh it by setting the property authorizationToken with a new
     *       valid token. Otherwise, all the recognizers created by this SpeechTranslationConfig instance
     *       will encounter errors during recognition.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply
     * to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechTranslationConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */
    static fromAuthorizationToken(authorizationToken, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(region, "region");
        const ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, authorizationToken);
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region, region);
        return ret;
    }
    /**
     * Creates an instance of the speech translation config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or paramters.
     * Note: The query properties specified in the endpoint URL are not changed, even if they are
     *       set by any other APIs. For example, if language is defined in the uri as query parameter
     *       "language=de-DE", and also set by the speechRecognitionLanguage property, the language
     *       setting in uri takes precedence, and the effective language is "de-DE".
     * Only the properties that are not specified in the endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     *       fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     *       use the authorization token.
     * @member SpeechTranslationConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key.
     * @returns {SpeechTranslationConfig} A speech config instance.
     */
    static fromEndpoint(endpoint, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(endpoint, "endpoint");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(subscriptionKey, "subscriptionKey");
        const ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint, endpoint.href);
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key, subscriptionKey);
        return ret;
    }
}
/**
 * @private
 * @class SpeechTranslationConfigImpl
 */
// tslint:disable-next-line:max-classes-per-file
class SpeechTranslationConfigImpl extends SpeechTranslationConfig {
    constructor() {
        super();
        this.privSpeechProperties = new _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyCollection"]();
        this.outputFormat = _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"].Simple;
    }
    /**
     * Gets/Sets the authorization token.
     * If this is set, subscription key is ignored.
     * User needs to make sure the provided authorization token is valid and not expired.
     * @member SpeechTranslationConfigImpl.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - The authorization token.
     */
    set authorizationToken(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(value, "value");
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, value);
    }
    /**
     * Gets/Sets the speech recognition language.
     * @member SpeechTranslationConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @param {string} value - The authorization token.
     */
    set speechRecognitionLanguage(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(value, "value");
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage, value);
    }
    /**
     * @member SpeechTranslationConfigImpl.prototype.subscriptionKey
     * @function
     * @public
     */
    get subscriptionKey() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Key]);
    }
    /**
     * Gets the output format
     * @member SpeechTranslationConfigImpl.prototype.outputFormat
     * @function
     * @public
     */
    get outputFormat() {
        return _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][this.privSpeechProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormatPropertyName"], undefined)];
    }
    /**
     * Gets/Sets the output format
     * @member SpeechTranslationConfigImpl.prototype.outputFormat
     * @function
     * @public
     */
    set outputFormat(value) {
        this.privSpeechProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["OutputFormatPropertyName"], _Exports__WEBPACK_IMPORTED_MODULE_2__["OutputFormat"][value]);
    }
    /**
     * Gets the endpoint id.
     * @member SpeechTranslationConfigImpl.prototype.endpointId
     * @function
     * @public
     */
    get endpointId() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EndpointId);
    }
    /**
     * Gets/Sets the endpoint id.
     * @member SpeechTranslationConfigImpl.prototype.endpointId
     * @function
     * @public
     */
    set endpointId(value) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Endpoint, value);
    }
    /**
     * Add a (text) target language to translate into.
     * @member SpeechTranslationConfigImpl.prototype.addTargetLanguage
     * @function
     * @public
     * @param {string} value - The language such as de-DE
     */
    addTargetLanguage(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(value, "value");
        const languages = this.targetLanguages;
        languages.push(value);
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationToLanguages, languages.join(","));
    }
    /**
     * Gets the (text) target language to translate into.
     * @member SpeechTranslationConfigImpl.prototype.targetLanguages
     * @function
     * @public
     * @param {string} value - The language such as de-DE
     */
    get targetLanguages() {
        if (this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationToLanguages, undefined) !== undefined) {
            return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationToLanguages).split(",");
        }
        else {
            return [];
        }
    }
    /**
     * Gets the voice name.
     * @member SpeechTranslationConfigImpl.prototype.voiceName
     * @function
     * @public
     */
    get voiceName() {
        return this.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationVoice]);
    }
    /**
     * Gets/Sets the voice of the translated language, enable voice synthesis output.
     * @member SpeechTranslationConfigImpl.prototype.voiceName
     * @function
     * @public
     * @param {string} value - The name of the voice.
     */
    set voiceName(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(value, "value");
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationVoice, value);
    }
    /**
     * Provides the region.
     * @member SpeechTranslationConfigImpl.prototype.region
     * @function
     * @public
     * @returns {string} The region.
     */
    get region() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_Region);
    }
    setProxy(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyHostName], proxyHostName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyPort], proxyPort);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyUserName], proxyUserName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_ProxyPassword], proxyPassword);
    }
    /**
     * Gets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {string} name - The name of the property.
     * @param {string} def - The default value of the property in case it is not set.
     * @returns {string} The value of the property.
     */
    getProperty(name, def) {
        return this.privSpeechProperties.getProperty(name, def);
    }
    /**
     * Gets/Sets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {string} name - The name of the property.
     * @param {string} value - The value of the property.
     */
    setProperty(name, value) {
        this.privSpeechProperties.setProperty(name, value);
    }
    /**
     * Provides access to custom properties.
     * @member SpeechTranslationConfigImpl.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The properties.
     */
    get properties() {
        return this.privSpeechProperties;
    }
    /**
     * Dispose of associated resources.
     * @member SpeechTranslationConfigImpl.prototype.close
     * @function
     * @public
     */
    close() {
        return;
    }
    setServiceProperty(name, value, channel) {
        const currentProperties = JSON.parse(this.privSpeechProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], "{}"));
        currentProperties[name] = value;
        this.privSpeechProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ServicePropertiesPropertyName"], JSON.stringify(currentProperties));
    }
    setProfanity(profanity) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_ProfanityOption, _Exports__WEBPACK_IMPORTED_MODULE_2__["ProfanityOption"][profanity]);
    }
    enableAudioLogging() {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_EnableAudioLogging, "true");
    }
    requestWordLevelTimestamps() {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceResponse_RequestWordLevelTimestamps, "true");
    }
    enableDictation() {
        this.privSpeechProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["ForceDictationPropertyName"], "true");
    }
}

//# sourceMappingURL=SpeechTranslationConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionCanceledEventArgs.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionCanceledEventArgs.js ***!
  \*******************************************************************************************************************************/
/*! exports provided: TranslationRecognitionCanceledEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionCanceledEventArgs", function() { return TranslationRecognitionCanceledEventArgs; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Define payload of speech recognition canceled result events.
 * @class TranslationRecognitionCanceledEventArgs
 */
class TranslationRecognitionCanceledEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionid - The session id.
     * @param {CancellationReason} cancellationReason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {TranslationRecognitionResult} result - The result.
     */
    constructor(sessionid, cancellationReason, errorDetails, errorCode, result) {
        this.privCancelReason = cancellationReason;
        this.privErrorDetails = errorDetails;
        this.privResult = result;
        this.privSessionId = sessionid;
        this.privErrorCode = errorCode;
    }
    /**
     * Specifies the recognition result.
     * @member TranslationRecognitionCanceledEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationRecognitionResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
    /**
     * Specifies the session identifier.
     * @member TranslationRecognitionCanceledEventArgs.prototype.sessionId
     * @function
     * @public
     * @returns {string} the session identifier.
     */
    get sessionId() {
        return this.privSessionId;
    }
    /**
     * The reason the recognition was canceled.
     * @member TranslationRecognitionCanceledEventArgs.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privCancelReason;
    }
    /**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */
    get errorCode() {
        return this.privErrorCode;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member TranslationRecognitionCanceledEventArgs.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
}

//# sourceMappingURL=TranslationRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionEventArgs.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionEventArgs.js ***!
  \***********************************************************************************************************************/
/*! exports provided: TranslationRecognitionEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionEventArgs", function() { return TranslationRecognitionEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Translation text result event arguments.
 * @class TranslationRecognitionEventArgs
 */
class TranslationRecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationRecognitionResult} result - The translation recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the recognition result.
     * @member TranslationRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationRecognitionResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=TranslationRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js ***!
  \********************************************************************************************************************/
/*! exports provided: TranslationRecognitionResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognitionResult", function() { return TranslationRecognitionResult; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Translation text result.
 * @class TranslationRecognitionResult
 */
class TranslationRecognitionResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SpeechRecognitionResult"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {Translations} translations - The translations.
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(translations, resultId, reason, text, duration, offset, errorDetails, json, properties) {
        super(resultId, reason, text, duration, offset, errorDetails, json, properties);
        this.privTranslations = translations;
    }
    /**
     * Presents the translation results. Each item in the dictionary represents
     * a translation result in one of target languages, where the key is the name
     * of the target language, in BCP-47 format, and the value is the translation
     * text in the specified language.
     * @member TranslationRecognitionResult.prototype.translations
     * @function
     * @public
     * @returns {Translations} the current translation map that holds all translations requested.
     */
    get translations() {
        return this.privTranslations;
    }
}

//# sourceMappingURL=TranslationRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognizer.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognizer.js ***!
  \*************************************************************************************************************/
/*! exports provided: TranslationRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationRecognizer", function() { return TranslationRecognizer; });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Translation recognizer
 * @class TranslationRecognizer
 */
class TranslationRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_2__["Recognizer"] {
    /**
     * Initializes an instance of the TranslationRecognizer.
     * @constructor
     * @param {SpeechTranslationConfig} speechConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     */
    constructor(speechConfig, audioConfig) {
        const configImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNull(configImpl, "speechConfig");
        super(audioConfig, configImpl.properties, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["TranslationConnectionFactory"]());
        this.privDisposedTranslationRecognizer = false;
        this.privProperties = configImpl.properties.clone();
        if (this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationVoice, undefined) !== undefined) {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationVoice), _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationVoice]);
        }
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationToLanguages), _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationToLanguages]);
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage), _Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"][_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage]);
    }
    /**
     * Gets the language name that was set when the recognizer was created.
     * @member TranslationRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} Gets the language name that was set when the recognizer was created.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_RecoLanguage);
    }
    /**
     * Gets target languages for translation that were set when the recognizer was created.
     * The language is specified in BCP-47 format. The translation will provide translated text for each of language.
     * @member TranslationRecognizer.prototype.targetLanguages
     * @function
     * @public
     * @returns {string[]} Gets target languages for translation that were set when the recognizer was created.
     */
    get targetLanguages() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationToLanguages).split(",");
    }
    /**
     * Gets the name of output voice.
     * @member TranslationRecognizer.prototype.voiceName
     * @function
     * @public
     * @returns {string} the name of output voice.
     */
    get voiceName() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceConnection_TranslationVoice, undefined);
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member TranslationRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member TranslationRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - Authorization token.
     */
    set authorizationToken(value) {
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__["PropertyId"].SpeechServiceAuthorization_Token, value);
    }
    /**
     * The collection of properties and their values defined for this TranslationRecognizer.
     * @member TranslationRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this TranslationRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Starts recognition and translation, and stops after the first utterance is recognized.
     * The task returns the translation text as result.
     * Note: recognizeOnceAsync returns when the first utterance has been recognized, so it is suitableonly
     *       for single shot recognition like command or query. For long-running recognition,
     *       use startContinuousRecognitionAsync() instead.
     * @member TranslationRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the translation has completed.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
            this.implRecognizerStop();
            this.implRecognizerStart(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Conversation, (e) => {
                this.implRecognizerStop();
                if (!!cb) {
                    cb(e);
                }
            }, (e) => {
                this.implRecognizerStop();
                if (!!err) {
                    err(e);
                }
            });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    }
    /**
     * Starts recognition and translation, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive translation results.
     * @member TranslationRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has started.
     * @param err - Callback invoked in case of an error.
     */
    startContinuousRecognitionAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
            this.implRecognizerStop();
            this.implRecognizerStart(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognitionMode"].Conversation, undefined, undefined);
            // report result to promise.
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
                cb = undefined;
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    }
    /**
     * Stops continuous recognition and translation.
     * @member TranslationRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopContinuousRecognitionAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
            this.implRecognizerStop();
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member TranslationRecognizer.prototype.close
     * @function
     * @public
     */
    close() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__["Contracts"].throwIfDisposed(this.privDisposedTranslationRecognizer);
        this.dispose(true);
    }
    dispose(disposing) {
        if (this.privDisposedTranslationRecognizer) {
            return;
        }
        if (disposing) {
            this.implRecognizerStop();
            this.privDisposedTranslationRecognizer = true;
            super.dispose(disposing);
        }
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["RecognizerConfig"](speechConfig, this.properties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const configImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__["TranslationServiceRecognizer"](authentication, connectionFactory, configImpl, recognizerConfig, this);
    }
}

//# sourceMappingURL=TranslationRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisEventArgs.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisEventArgs.js ***!
  \*********************************************************************************************************************/
/*! exports provided: TranslationSynthesisEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisEventArgs", function() { return TranslationSynthesisEventArgs; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Translation Synthesis event arguments
 * @class TranslationSynthesisEventArgs
 */
class TranslationSynthesisEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__["SessionEventArgs"] {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationSynthesisResult} result - The translation synthesis result.
     * @param {string} sessionId - The session id.
     */
    constructor(result, sessionId) {
        super(sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the translation synthesis result.
     * @member TranslationSynthesisEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationSynthesisResult} Specifies the translation synthesis result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=TranslationSynthesisEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisResult.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisResult.js ***!
  \******************************************************************************************************************/
/*! exports provided: TranslationSynthesisResult */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslationSynthesisResult", function() { return TranslationSynthesisResult; });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines translation synthesis result, i.e. the voice output of the translated
 * text in the target language.
 * @class TranslationSynthesisResult
 */
class TranslationSynthesisResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ResultReason} reason - The synthesis reason.
     * @param {ArrayBuffer} audio - The audio data.
     */
    constructor(reason, audio) {
        this.privReason = reason;
        this.privAudio = audio;
    }
    /**
     * Translated text in the target language.
     * @member TranslationSynthesisResult.prototype.audio
     * @function
     * @public
     * @returns {ArrayBuffer} Translated audio in the target language.
     */
    get audio() {
        return this.privAudio;
    }
    /**
     * The synthesis status.
     * @member TranslationSynthesisResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} The synthesis status.
     */
    get reason() {
        return this.privReason;
    }
}

//# sourceMappingURL=TranslationSynthesisResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js ***!
  \****************************************************************************************************/
/*! exports provided: Translations */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Translations", function() { return Translations; });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents collection of parameters and their values.
 * @class Translation
 */
class Translations {
    constructor() {
        // Use an PropertyCollection internally, just wrapping it to hide the | enum syntax it has.
        this.privMap = new _Exports__WEBPACK_IMPORTED_MODULE_0__["PropertyCollection"]();
    }
    /**
     * Returns the parameter value in type String. The parameter must have the same type as String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member Translation.prototype.get
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} def - The default value which is returned if the parameter is not available in the collection.
     * @returns {string} value of the parameter.
     */
    get(key, def) {
        return this.privMap.getProperty(key, def);
    }
    /**
     * Sets the String value of the parameter specified by name.
     * @member Translation.prototype.set
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */
    set(key, value) {
        this.privMap.setProperty(key, value);
    }
}

//# sourceMappingURL=Translations.js.map


/***/ }),

/***/ "./node_modules/p-defer/index.js":
/*!***************************************!*\
  !*** ./node_modules/p-defer/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


const pDefer = () => {
	const deferred = {};

	deferred.promise = new Promise((resolve, reject) => {
		deferred.resolve = resolve;
		deferred.reject = reject;
	});

	return deferred;
};

module.exports = pDefer;


/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/regenerator-runtime/runtime.js":
/*!*****************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunctionPrototype[toStringTagSymbol] =
    GeneratorFunction.displayName = "GeneratorFunction";

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      prototype[method] = function(arg) {
        return this._invoke(method, arg);
      };
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      if (!(toStringTagSymbol in genFun)) {
        genFun[toStringTagSymbol] = "GeneratorFunction";
      }
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return Promise.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return Promise.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new Promise(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList) {
    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList)
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  Gp[toStringTagSymbol] = "Generator";

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
   true ? module.exports : undefined
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  Function("r", "regeneratorRuntime = r")(runtime);
}


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechSDK.js":
/*!************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechSDK.js ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _microsoftCognitiveservicesSpeech = __webpack_require__(/*! microsoft-cognitiveservices-speech-sdk/distrib/lib/microsoft.cognitiveservices.speech.sdk */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/microsoft.cognitiveservices.speech.sdk.js");

// We are only importing what we need.
var _default = {
  AudioConfig: _microsoftCognitiveservicesSpeech.AudioConfig,
  OutputFormat: _microsoftCognitiveservicesSpeech.OutputFormat,
  ResultReason: _microsoftCognitiveservicesSpeech.ResultReason,
  SpeechConfig: _microsoftCognitiveservicesSpeech.SpeechConfig,
  SpeechRecognizer: _microsoftCognitiveservicesSpeech.SpeechRecognizer
};
exports.default = _default;
//# sourceMappingURL=SpeechSDK.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText.js ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireWildcard = __webpack_require__(/*! @babel/runtime/helpers/interopRequireWildcard */ "./node_modules/@babel/runtime/helpers/interopRequireWildcard.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "createSpeechRecognitionPonyfillFromRecognizer", {
  enumerable: true,
  get: function get() {
    return _createSpeechRecognitionPonyfill.createSpeechRecognitionPonyfillFromRecognizer;
  }
});
exports.default = void 0;

var _createSpeechRecognitionPonyfill = _interopRequireWildcard(__webpack_require__(/*! ./SpeechToText/createSpeechRecognitionPonyfill */ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText/createSpeechRecognitionPonyfill.js"));

var _default = _createSpeechRecognitionPonyfill.default;
exports.default = _default;
//# sourceMappingURL=SpeechToText.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText/SpeechGrammarList.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText/SpeechGrammarList.js ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));

var _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));

/* eslint class-methods-use-this: "off" */
var _default =
/*#__PURE__*/
function () {
  function _default() {
    (0, _classCallCheck2.default)(this, _default);
    this._phrases = [];
  }

  (0, _createClass2.default)(_default, [{
    key: "addFromString",
    value: function addFromString() {
      throw new Error('JSGF is not supported');
    }
  }, {
    key: "phrases",
    get: function get() {
      return this._phrases;
    },
    set: function set(value) {
      if (Array.isArray(value)) {
        this._phrases = value;
      } else if (typeof value === 'string') {
        this._phrases = [value];
      } else {
        throw new Error("The provided value is not an array or of type 'string'");
      }
    }
  }]);
  return _default;
}();

exports.default = _default;
//# sourceMappingURL=SpeechGrammarList.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText/cognitiveServiceEventResultToWebSpeechRecognitionResultList.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText/cognitiveServiceEventResultToWebSpeechRecognitionResultList.js ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _arrayToMap = _interopRequireDefault(__webpack_require__(/*! ../../Util/arrayToMap */ "./node_modules/web-speech-cognitive-services/lib/Util/arrayToMap.js"));

var _SpeechSDK = _interopRequireDefault(__webpack_require__(/*! ../SpeechSDK */ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechSDK.js"));

var _SpeechSDK$ResultReas = _SpeechSDK.default.ResultReason,
    RecognizingSpeech = _SpeechSDK$ResultReas.RecognizingSpeech,
    RecognizedSpeech = _SpeechSDK$ResultReas.RecognizedSpeech;

function _default(result) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
      _ref$maxAlternatives = _ref.maxAlternatives,
      maxAlternatives = _ref$maxAlternatives === void 0 ? Infinity : _ref$maxAlternatives,
      _ref$textNormalizatio = _ref.textNormalization,
      textNormalization = _ref$textNormalizatio === void 0 ? 'display' : _ref$textNormalizatio;

  if (result.reason === RecognizingSpeech || result.reason === RecognizedSpeech && !result.json.NBest) {
    var resultList = [{
      confidence: .5,
      transcript: result.text
    }];

    if (result.reason === RecognizedSpeech) {
      resultList.isFinal = true;
    }

    return resultList;
  } else if (result.reason === RecognizedSpeech) {
    var _resultList = (0, _arrayToMap.default)((result.json.NBest || []).slice(0, maxAlternatives).map(function (_ref2) {
      var confidence = _ref2.Confidence,
          display = _ref2.Display,
          itn = _ref2.ITN,
          lexical = _ref2.Lexical,
          maskedITN = _ref2.MaskedITN;
      return {
        confidence: confidence,
        transcript: textNormalization === 'itn' ? itn : textNormalization === 'lexical' ? lexical : textNormalization === 'maskeditn' ? maskedITN : display
      };
    }), {
      isFinal: true
    });

    return _resultList;
  }

  return [];
}
//# sourceMappingURL=cognitiveServiceEventResultToWebSpeechRecognitionResultList.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText/createSpeechRecognitionPonyfill.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText/createSpeechRecognitionPonyfill.js ***!
  \***********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createSpeechRecognitionPonyfillFromRecognizer = createSpeechRecognitionPonyfillFromRecognizer;
exports.default = void 0;

var _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js"));

var _toConsumableArray2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "./node_modules/@babel/runtime/helpers/toConsumableArray.js"));

var _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));

var _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));

var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));

var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));

var _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));

var _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js"));

var _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));

var _eventTargetShim = __webpack_require__(/*! ../../external/event-target-shim */ "./node_modules/web-speech-cognitive-services/lib/external/event-target-shim.js");

var _cognitiveServiceEventResultToWebSpeechRecognitionResultList = _interopRequireDefault(__webpack_require__(/*! ./cognitiveServiceEventResultToWebSpeechRecognitionResultList */ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText/cognitiveServiceEventResultToWebSpeechRecognitionResultList.js"));

var _createPromiseQueue = _interopRequireDefault(__webpack_require__(/*! ../../Util/createPromiseQueue */ "./node_modules/web-speech-cognitive-services/lib/Util/createPromiseQueue.js"));

var _patchOptions2 = _interopRequireDefault(__webpack_require__(/*! ../patchOptions */ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/patchOptions.js"));

var _SpeechGrammarList = _interopRequireDefault(__webpack_require__(/*! ./SpeechGrammarList */ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechToText/SpeechGrammarList.js"));

var _SpeechSDK = _interopRequireDefault(__webpack_require__(/*! ../SpeechSDK */ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/SpeechSDK.js"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

// https://docs.microsoft.com/en-us/javascript/api/microsoft-cognitiveservices-speech-sdk/speechconfig?view=azure-node-latest#outputformat
// {
//   "RecognitionStatus": "Success",
//   "Offset": 900000,
//   "Duration": 49000000,
//   "NBest": [
//     {
//       "Confidence": 0.738919,
//       "Lexical": "second",
//       "ITN": "second",
//       "MaskedITN": "second",
//       "Display": "Second."
//     }
//   ]
// }
// {
//   "RecognitionStatus": "InitialSilenceTimeout",
//   "Offset": 50000000,
//   "Duration": 0
// }
var AudioConfig = _SpeechSDK.default.AudioConfig,
    OutputFormat = _SpeechSDK.default.OutputFormat,
    ResultReason = _SpeechSDK.default.ResultReason,
    SpeechConfig = _SpeechSDK.default.SpeechConfig,
    SpeechRecognizer = _SpeechSDK.default.SpeechRecognizer;

function serializeRecognitionResult(_ref) {
  var duration = _ref.duration,
      errorDetails = _ref.errorDetails,
      json = _ref.json,
      offset = _ref.offset,
      properties = _ref.properties,
      reason = _ref.reason,
      resultId = _ref.resultId,
      text = _ref.text;
  return {
    duration: duration,
    errorDetails: errorDetails,
    json: JSON.parse(json),
    offset: offset,
    properties: properties,
    reason: reason,
    resultId: resultId,
    text: text
  };
}

function improviseAsync(fn, improviser) {
  return function () {
    return fn.apply(void 0, arguments).onSuccessContinueWith(function (result) {
      return improviser(result);
    });
  };
}

function averageAmplitude(arrayBuffer) {
  var array = new Int16Array(arrayBuffer);
  return [].reduce.call(array, function (averageAmplitude, amplitude) {
    return averageAmplitude + Math.abs(amplitude);
  }, 0) / array.length;
}

function cognitiveServicesAsyncToPromise(fn) {
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return new Promise(function (resolve, reject) {
      return fn.apply(void 0, args.concat([resolve, reject]));
    });
  };
}

var SpeechRecognitionEvent = function SpeechRecognitionEvent(type) {
  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
      data = _ref2.data,
      emma = _ref2.emma,
      interpretation = _ref2.interpretation,
      resultIndex = _ref2.resultIndex,
      results = _ref2.results;

  (0, _classCallCheck2.default)(this, SpeechRecognitionEvent);
  this.data = data;
  this.emma = emma;
  this.interpretation = interpretation;
  this.resultIndex = resultIndex;
  this.results = results;
  this.type = type;
};

function prepareAudioConfig(audioConfig) {
  var originalAttach = audioConfig.attach;
  var firstChunk;
  var muted; // We modify "attach" function and detect when audible chunk is read.
  // We will only modify "attach" function once.

  audioConfig.attach = improviseAsync(originalAttach.bind(audioConfig), function (reader) {
    return _objectSpread({}, reader, {
      read: improviseAsync(reader.read.bind(reader), function (chunk) {
        // The magic number 150 is measured by:
        // 1. Set microphone volume to 0
        // 2. Observe the amplitude (100-110) for the first few chunks
        //    (There is a short static caught when turning on the microphone)
        // 3. Set the number a bit higher than the observation
        if (!firstChunk && averageAmplitude(chunk.buffer) > 150) {
          audioConfig.events.onEvent({
            name: 'FirstAudibleChunk'
          });
          firstChunk = true;
        }

        if (muted) {
          return {
            buffer: new ArrayBuffer(0),
            isEnd: true,
            timeReceived: Date.now()
          };
        }

        return chunk;
      })
    });
  });
  return {
    audioConfig: audioConfig,
    pause: function pause() {
      muted = true;
    },
    unprepare: function unprepare() {
      audioConfig.attach = originalAttach;
    }
  };
}

function createSpeechRecognitionPonyfillFromRecognizer(_ref3) {
  var createRecognizer = _ref3.createRecognizer,
      enableTelemetry = _ref3.enableTelemetry,
      looseEvents = _ref3.looseEvents,
      referenceGrammars = _ref3.referenceGrammars,
      textNormalization = _ref3.textNormalization;
  // If enableTelemetry is set to null or non-boolean, we will default to true.
  SpeechRecognizer.enableTelemetry(enableTelemetry !== false);

  var SpeechRecognition =
  /*#__PURE__*/
  function (_EventTarget) {
    (0, _inherits2.default)(SpeechRecognition, _EventTarget);

    function SpeechRecognition() {
      var _this;

      (0, _classCallCheck2.default)(this, SpeechRecognition);
      _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(SpeechRecognition).call(this));
      _this._continuous = false;
      _this._interimResults = false;
      _this._lang = typeof window !== 'undefined' ? window.document.documentElement.getAttribute('lang') || window.navigator.language : 'en-US';
      _this._grammars = new _SpeechGrammarList.default();
      _this._maxAlternatives = 1;
      return _this;
    }

    (0, _createClass2.default)(SpeechRecognition, [{
      key: "emitCognitiveServices",
      value: function emitCognitiveServices(type, event) {
        this.dispatchEvent(new SpeechRecognitionEvent('cognitiveservices', {
          data: _objectSpread({}, event, {
            type: type
          })
        }));
      }
    }, {
      key: "start",
      value: function start() {
        var _this2 = this;

        this._startOnce().catch(function (err) {
          _this2.dispatchEvent(new ErrorEvent('error', {
            error: err,
            message: err && err.message
          }));
        });
      }
    }, {
      key: "_startOnce",
      value: function () {
        var _startOnce2 = (0, _asyncToGenerator2.default)(
        /*#__PURE__*/
        _regenerator.default.mark(function _callee() {
          var _this3 = this;

          var recognizer, _prepareAudioConfig, pause, unprepare, queue, soundStarted, speechStarted, stopping, _recognizer$audioConf, detachAudioConfigEvent, phrases, dynamicGrammar, audioStarted, finalEvent, finalizedResults, _loop, loop, _ret;

          return _regenerator.default.wrap(function _callee$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _context2.next = 2;
                  return createRecognizer(this.lang);

                case 2:
                  recognizer = _context2.sent;
                  _prepareAudioConfig = prepareAudioConfig(recognizer.audioConfig), pause = _prepareAudioConfig.pause, unprepare = _prepareAudioConfig.unprepare;
                  _context2.prev = 4;
                  queue = (0, _createPromiseQueue.default)();
                  _recognizer$audioConf = recognizer.audioConfig.events.attach(function (event) {
                    var name = event.name;

                    if (name === 'AudioSourceReadyEvent') {
                      queue.push({
                        audioSourceReady: {}
                      });
                    } else if (name === 'AudioSourceOffEvent') {
                      queue.push({
                        audioSourceOff: {}
                      });
                    } else if (name === 'FirstAudibleChunk') {
                      queue.push({
                        firstAudibleChunk: {}
                      });
                    }
                  }), detachAudioConfigEvent = _recognizer$audioConf.detach;

                  recognizer.canceled = function (_, _ref4) {
                    var errorDetails = _ref4.errorDetails,
                        offset = _ref4.offset,
                        reason = _ref4.reason,
                        sessionId = _ref4.sessionId;
                    queue.push({
                      canceled: {
                        errorDetails: errorDetails,
                        offset: offset,
                        reason: reason,
                        sessionId: sessionId
                      }
                    });
                  };

                  recognizer.recognized = function (_, _ref5) {
                    var offset = _ref5.offset,
                        result = _ref5.result,
                        sessionId = _ref5.sessionId;
                    queue.push({
                      recognized: {
                        offset: offset,
                        result: serializeRecognitionResult(result),
                        sessionId: sessionId
                      }
                    });
                  };

                  recognizer.recognizing = function (_, _ref6) {
                    var offset = _ref6.offset,
                        result = _ref6.result,
                        sessionId = _ref6.sessionId;
                    queue.push({
                      recognizing: {
                        offset: offset,
                        result: serializeRecognitionResult(result),
                        sessionId: sessionId
                      }
                    });
                  };

                  recognizer.sessionStarted = function (_, _ref7) {
                    var sessionId = _ref7.sessionId;
                    queue.push({
                      sessionStarted: {
                        sessionId: sessionId
                      }
                    });
                  };

                  recognizer.sessionStopped = function (_, _ref8) {
                    var sessionId = _ref8.sessionId;
                    // "sessionStopped" is never fired, probably because we are using startContinuousRecognitionAsync instead of recognizeOnceAsync.
                    queue.push({
                      sessionStopped: {
                        sessionId: sessionId
                      }
                    });
                  };

                  recognizer.speechStartDetected = function (_, _ref9) {
                    var offset = _ref9.offset,
                        sessionId = _ref9.sessionId;
                    queue.push({
                      speechStartDetected: {
                        offset: offset,
                        sessionId: sessionId
                      }
                    });
                  };

                  recognizer.speechEndDetected = function (_, _ref10) {
                    var sessionId = _ref10.sessionId;
                    // "speechEndDetected" is never fired, probably because we are using startContinuousRecognitionAsync instead of recognizeOnceAsync.
                    // Update: "speechEndDetected" is fired for DLSpeech.listenOnceAsync()
                    queue.push({
                      speechEndDetected: {
                        sessionId: sessionId
                      }
                    });
                  };

                  phrases = this.grammars.phrases; // HACK: We are using the internal of SpeechRecognizer because they did not expose it

                  dynamicGrammar = recognizer.privReco.dynamicGrammar;
                  referenceGrammars && referenceGrammars.length && dynamicGrammar.addReferenceGrammar(referenceGrammars);
                  phrases && phrases.length && dynamicGrammar.addPhrase(phrases);
                  _context2.next = 20;
                  return cognitiveServicesAsyncToPromise(recognizer.startContinuousRecognitionAsync.bind(recognizer))();

                case 20:
                  if (recognizer.stopContinuousRecognitionAsync) {
                    this.abort = function () {
                      return queue.push({
                        abort: {}
                      });
                    };

                    this.stop = function () {
                      return queue.push({
                        stop: {}
                      });
                    };
                  } else {
                    this.abort = this.stop = undefined;
                  }

                  finalizedResults = [];
                  _loop =
                  /*#__PURE__*/
                  _regenerator.default.mark(function _loop(loop) {
                    var event, abort, audioSourceOff, audioSourceReady, canceled, firstAudibleChunk, recognized, recognizing, stop, errorMessage, result, recognizable;
                    return _regenerator.default.wrap(function _loop$(_context) {
                      while (1) {
                        switch (_context.prev = _context.next) {
                          case 0:
                            _context.next = 2;
                            return queue.shift();

                          case 2:
                            event = _context.sent;
                            abort = event.abort, audioSourceOff = event.audioSourceOff, audioSourceReady = event.audioSourceReady, canceled = event.canceled, firstAudibleChunk = event.firstAudibleChunk, recognized = event.recognized, recognizing = event.recognizing, stop = event.stop; // We are emitting event "cognitiveservices" for debugging purpose.

                            Object.keys(event).forEach(function (name) {
                              return _this3.emitCognitiveServices(name, event[name]);
                            });
                            errorMessage = canceled && canceled.errorDetails;

                            if (!/Permission[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]denied/.test(errorMessage || '')) {
                              _context.next = 9;
                              break;
                            }

                            // If microphone is not allowed, we should not emit "start" event.
                            finalEvent = {
                              error: 'not-allowed',
                              type: 'error'
                            };
                            return _context.abrupt("return", "break");

                          case 9:
                            if (!loop) {
                              _this3.dispatchEvent(new SpeechRecognitionEvent('start'));
                            }

                            if (!errorMessage) {
                              _context.next = 15;
                              break;
                            }

                            if (/1006/.test(errorMessage)) {
                              if (!audioStarted) {
                                _this3.dispatchEvent(new SpeechRecognitionEvent('audiostart'));

                                _this3.dispatchEvent(new SpeechRecognitionEvent('audioend'));
                              }

                              finalEvent = {
                                error: 'network',
                                type: 'error'
                              };
                            } else {
                              finalEvent = {
                                error: 'unknown',
                                type: 'error'
                              };
                            }

                            return _context.abrupt("return", "break");

                          case 15:
                            if (!(abort || stop)) {
                              _context.next = 22;
                              break;
                            }

                            if (abort) {
                              finalEvent = {
                                error: 'aborted',
                                type: 'error'
                              }; // If we are aborting, we will ignore lingering recognizing/recognized events. But if we are stopping, we need them.

                              stopping = 'abort';
                            } else {
                              // When we pause, we will send { isEnd: true }, Speech Services will send us "recognized" event.
                              pause();
                              stopping = 'stop';
                            } // Abort should not be dispatched without support of "stopContinuousRecognitionAsync".
                            // But for defensive purpose, we make sure "stopContinuousRecognitionAsync" is available before we can call.


                            if (!(abort && recognizer.stopContinuousRecognitionAsync)) {
                              _context.next = 20;
                              break;
                            }

                            _context.next = 20;
                            return cognitiveServicesAsyncToPromise(recognizer.stopContinuousRecognitionAsync.bind(recognizer))();

                          case 20:
                            _context.next = 61;
                            break;

                          case 22:
                            if (!audioSourceReady) {
                              _context.next = 27;
                              break;
                            }

                            _this3.dispatchEvent(new SpeechRecognitionEvent('audiostart'));

                            audioStarted = true;
                            _context.next = 61;
                            break;

                          case 27:
                            if (!firstAudibleChunk) {
                              _context.next = 32;
                              break;
                            }

                            _this3.dispatchEvent(new SpeechRecognitionEvent('soundstart'));

                            soundStarted = true;
                            _context.next = 61;
                            break;

                          case 32:
                            if (!audioSourceOff) {
                              _context.next = 40;
                              break;
                            }

                            // Looks like we don't need this line and all the tests are still working.
                            // Guessing probably stopping is already truthy.
                            // stopping = true;
                            speechStarted && _this3.dispatchEvent(new SpeechRecognitionEvent('speechend'));
                            soundStarted && _this3.dispatchEvent(new SpeechRecognitionEvent('soundend'));
                            audioStarted && _this3.dispatchEvent(new SpeechRecognitionEvent('audioend'));
                            audioStarted = soundStarted = speechStarted = false;
                            return _context.abrupt("return", "break");

                          case 40:
                            if (!(stopping !== 'abort')) {
                              _context.next = 61;
                              break;
                            }

                            if (!(recognized && recognized.result && recognized.result.reason === ResultReason.NoMatch)) {
                              _context.next = 45;
                              break;
                            }

                            finalEvent = {
                              error: 'no-speech',
                              type: 'error'
                            };
                            _context.next = 61;
                            break;

                          case 45:
                            if (!(recognized || recognizing)) {
                              _context.next = 61;
                              break;
                            }

                            if (!audioStarted) {
                              // Unconfirmed prevention of quirks
                              _this3.dispatchEvent(new SpeechRecognitionEvent('audiostart'));

                              audioStarted = true;
                            }

                            if (!soundStarted) {
                              _this3.dispatchEvent(new SpeechRecognitionEvent('soundstart'));

                              soundStarted = true;
                            }

                            if (!speechStarted) {
                              _this3.dispatchEvent(new SpeechRecognitionEvent('speechstart'));

                              speechStarted = true;
                            }

                            if (!recognized) {
                              _context.next = 60;
                              break;
                            }

                            result = (0, _cognitiveServiceEventResultToWebSpeechRecognitionResultList.default)(recognized.result, {
                              maxAlternatives: _this3.maxAlternatives,
                              textNormalization: textNormalization
                            });
                            recognizable = !!result[0].transcript;

                            if (recognizable) {
                              finalizedResults = [].concat((0, _toConsumableArray2.default)(finalizedResults), [result]);
                              _this3.continuous && _this3.dispatchEvent(new SpeechRecognitionEvent('result', {
                                results: finalizedResults
                              }));
                            } // If it is continuous, we just sent the finalized results. So we don't need to send it again after "audioend" event.


                            if (_this3.continuous && recognizable) {
                              finalEvent = null;
                            } else {
                              finalEvent = {
                                results: finalizedResults,
                                type: 'result'
                              };
                            }

                            if (!(!_this3.continuous && recognizer.stopContinuousRecognitionAsync)) {
                              _context.next = 57;
                              break;
                            }

                            _context.next = 57;
                            return cognitiveServicesAsyncToPromise(recognizer.stopContinuousRecognitionAsync.bind(recognizer))();

                          case 57:
                            // If event order can be loosened, we can send the recognized event as soon as we receive it.
                            // 1. If it is not recognizable (no-speech), we should send an "error" event just before "end" event. We will not loosen "error" events.
                            if (looseEvents && finalEvent && recognizable) {
                              _this3.dispatchEvent(new SpeechRecognitionEvent(finalEvent.type, finalEvent));

                              finalEvent = null;
                            }

                            _context.next = 61;
                            break;

                          case 60:
                            if (recognizing) {
                              _this3.interimResults && _this3.dispatchEvent(new SpeechRecognitionEvent('result', {
                                results: [].concat((0, _toConsumableArray2.default)(finalizedResults), [(0, _cognitiveServiceEventResultToWebSpeechRecognitionResultList.default)(recognizing.result, {
                                  maxAlternatives: _this3.maxAlternatives,
                                  textNormalization: textNormalization
                                })])
                              }));
                            }

                          case 61:
                          case "end":
                            return _context.stop();
                        }
                      }
                    }, _loop);
                  });
                  loop = 0;

                case 24:
                  if (!(!stopping || audioStarted)) {
                    _context2.next = 32;
                    break;
                  }

                  return _context2.delegateYield(_loop(loop), "t0", 26);

                case 26:
                  _ret = _context2.t0;

                  if (!(_ret === "break")) {
                    _context2.next = 29;
                    break;
                  }

                  return _context2.abrupt("break", 32);

                case 29:
                  loop++;
                  _context2.next = 24;
                  break;

                case 32:
                  if (speechStarted) {
                    this.dispatchEvent(new SpeechRecognitionEvent('speechend'));
                  }

                  if (soundStarted) {
                    this.dispatchEvent(new SpeechRecognitionEvent('soundend'));
                  }

                  if (audioStarted) {
                    this.dispatchEvent(new SpeechRecognitionEvent('audioend'));
                  }

                  if (finalEvent) {
                    if (finalEvent.type === 'result' && !finalEvent.results.length) {
                      finalEvent = {
                        error: 'no-speech',
                        type: 'error'
                      };
                    }

                    if (finalEvent.type === 'error') {
                      this.dispatchEvent(new ErrorEvent('error', finalEvent));
                    } else {
                      this.dispatchEvent(new SpeechRecognitionEvent(finalEvent.type, finalEvent));
                    }
                  } // Even though there is no "start" event emitted, we will still emit "end" event
                  // This is mainly for "microphone blocked" story.


                  this.dispatchEvent(new SpeechRecognitionEvent('end'));
                  detachAudioConfigEvent();
                  _context2.next = 44;
                  break;

                case 40:
                  _context2.prev = 40;
                  _context2.t1 = _context2["catch"](4);
                  // Logging out the erorr because Speech SDK would fail silently.
                  console.error(_context2.t1);
                  throw _context2.t1;

                case 44:
                  _context2.prev = 44;
                  unprepare();
                  recognizer.dispose();
                  return _context2.finish(44);

                case 48:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee, this, [[4, 40, 44, 48]]);
        }));

        function _startOnce() {
          return _startOnce2.apply(this, arguments);
        }

        return _startOnce;
      }()
    }, {
      key: "continuous",
      get: function get() {
        return this._continuous;
      },
      set: function set(value) {
        this._continuous = value;
      }
    }, {
      key: "grammars",
      get: function get() {
        return this._grammars;
      },
      set: function set(value) {
        if (value instanceof _SpeechGrammarList.default) {
          this._grammars = value;
        } else {
          throw new Error("The provided value is not of type 'SpeechGrammarList'");
        }
      }
    }, {
      key: "interimResults",
      get: function get() {
        return this._interimResults;
      },
      set: function set(value) {
        this._interimResults = value;
      }
    }, {
      key: "maxAlternatives",
      get: function get() {
        return this._maxAlternatives;
      },
      set: function set(value) {
        this._maxAlternatives = value;
      }
    }, {
      key: "lang",
      get: function get() {
        return this._lang;
      },
      set: function set(value) {
        this._lang = value;
      }
    }]);
    return SpeechRecognition;
  }(_eventTargetShim.EventTarget);

  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'audioend');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'audiostart');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'cognitiveservices');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'end');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'error');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'nomatch');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'result');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'soundend');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'soundstart');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'speechend');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'speechstart');
  (0, _eventTargetShim.defineEventAttribute)(SpeechRecognition.prototype, 'start');
  return {
    SpeechGrammarList: _SpeechGrammarList.default,
    SpeechRecognition: SpeechRecognition,
    SpeechRecognitionEvent: SpeechRecognitionEvent
  };
}

var _default = function _default(options) {
  var _patchOptions = (0, _patchOptions2.default)(options),
      _patchOptions$audioCo = _patchOptions.audioConfig,
      audioConfig = _patchOptions$audioCo === void 0 ? AudioConfig.fromDefaultMicrophoneInput() : _patchOptions$audioCo,
      _patchOptions$enableT = _patchOptions.enableTelemetry,
      enableTelemetry = _patchOptions$enableT === void 0 ? true : _patchOptions$enableT,
      fetchCredentials = _patchOptions.fetchCredentials,
      looseEvents = _patchOptions.looseEvents,
      referenceGrammars = _patchOptions.referenceGrammars,
      speechRecognitionEndpointId = _patchOptions.speechRecognitionEndpointId,
      _patchOptions$textNor = _patchOptions.textNormalization,
      textNormalization = _patchOptions$textNor === void 0 ? 'display' : _patchOptions$textNor;

  if (!window.navigator.mediaDevices || !window.navigator.mediaDevices.getUserMedia) {
    console.warn('web-speech-cognitive-services: This browser does not support WebRTC and it will not work with Cognitive Services Speech Services.');
    return {};
  }

  var createRecognizer =
  /*#__PURE__*/
  function () {
    var _ref11 = (0, _asyncToGenerator2.default)(
    /*#__PURE__*/
    _regenerator.default.mark(function _callee2(lang) {
      var _ref12, authorizationToken, region, subscriptionKey, speechConfig;

      return _regenerator.default.wrap(function _callee2$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return fetchCredentials();

            case 2:
              _ref12 = _context3.sent;
              authorizationToken = _ref12.authorizationToken;
              region = _ref12.region;
              subscriptionKey = _ref12.subscriptionKey;
              speechConfig = authorizationToken ? SpeechConfig.fromAuthorizationToken(authorizationToken, region) : SpeechConfig.fromSubscription(subscriptionKey, region);

              if (speechRecognitionEndpointId) {
                speechConfig.endpointId = speechRecognitionEndpointId;
              }

              speechConfig.outputFormat = OutputFormat.Detailed;
              speechConfig.speechRecognitionLanguage = lang || 'en-US';
              return _context3.abrupt("return", new SpeechRecognizer(speechConfig, audioConfig));

            case 11:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee2);
    }));

    return function createRecognizer(_x) {
      return _ref11.apply(this, arguments);
    };
  }();

  return createSpeechRecognitionPonyfillFromRecognizer({
    audioConfig: audioConfig,
    createRecognizer: createRecognizer,
    enableTelemetry: enableTelemetry,
    looseEvents: looseEvents,
    referenceGrammars: referenceGrammars,
    textNormalization: textNormalization
  });
};

exports.default = _default;
//# sourceMappingURL=createSpeechRecognitionPonyfill.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/patchOptions.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/SpeechServices/patchOptions.js ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = patchOptions;

var _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js"));

var _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js"));

var _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));

var _objectWithoutProperties2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ "./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));

var _resolveFunctionOrReturnValue = _interopRequireDefault(__webpack_require__(/*! ./resolveFunctionOrReturnValue */ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/resolveFunctionOrReturnValue.js"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var shouldWarnOnSubscriptionKey = true;

function patchOptions() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var authorizationToken = _ref.authorizationToken,
      credentials = _ref.credentials,
      looseEvent = _ref.looseEvent,
      looseEvents = _ref.looseEvents,
      _ref$region = _ref.region,
      region = _ref$region === void 0 ? 'westus' : _ref$region,
      subscriptionKey = _ref.subscriptionKey,
      otherOptions = (0, _objectWithoutProperties2.default)(_ref, ["authorizationToken", "credentials", "looseEvent", "looseEvents", "region", "subscriptionKey"]);

  if (typeof looseEvent !== 'undefined') {
    console.warn('web-speech-cognitive-services: The option "looseEvent" should be named as "looseEvents".');
    looseEvents = looseEvent;
  }

  if (!credentials) {
    if (!authorizationToken && !subscriptionKey) {
      throw new Error('web-speech-cognitive-services: Credentials must be specified.');
    } else {
      console.warn('web-speech-cognitive-services: We are deprecating authorizationToken, region, and subscriptionKey. Please use credentials instead. The deprecated option will be removed on or after 2020-11-14.');

      credentials =
      /*#__PURE__*/
      function () {
        var _ref2 = (0, _asyncToGenerator2.default)(
        /*#__PURE__*/
        _regenerator.default.mark(function _callee() {
          return _regenerator.default.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  if (!authorizationToken) {
                    _context.next = 8;
                    break;
                  }

                  _context.next = 3;
                  return (0, _resolveFunctionOrReturnValue.default)(authorizationToken);

                case 3:
                  _context.t1 = _context.sent;
                  _context.t2 = region;
                  _context.t0 = {
                    authorizationToken: _context.t1,
                    region: _context.t2
                  };
                  _context.next = 13;
                  break;

                case 8:
                  _context.t3 = region;
                  _context.next = 11;
                  return (0, _resolveFunctionOrReturnValue.default)(subscriptionKey);

                case 11:
                  _context.t4 = _context.sent;
                  _context.t0 = {
                    region: _context.t3,
                    subscriptionKey: _context.t4
                  };

                case 13:
                  return _context.abrupt("return", _context.t0);

                case 14:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee);
        }));

        return function credentials() {
          return _ref2.apply(this, arguments);
        };
      }();
    }
  }

  return _objectSpread({}, otherOptions, {
    fetchCredentials: function () {
      var _fetchCredentials = (0, _asyncToGenerator2.default)(
      /*#__PURE__*/
      _regenerator.default.mark(function _callee2() {
        var _ref3, authorizationToken, region, subscriptionKey;

        return _regenerator.default.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return (0, _resolveFunctionOrReturnValue.default)(credentials);

              case 2:
                _ref3 = _context2.sent;
                authorizationToken = _ref3.authorizationToken;
                region = _ref3.region;
                subscriptionKey = _ref3.subscriptionKey;

                if (!(!authorizationToken && !subscriptionKey)) {
                  _context2.next = 8;
                  break;
                }

                throw new Error('web-speech-cognitive-services: Either authorization token and subscription key must be provided.');

              case 8:
                if (!authorizationToken) {
                  _context2.next = 13;
                  break;
                }

                if (!(typeof authorizationToken !== 'string')) {
                  _context2.next = 11;
                  break;
                }

                throw new Error('web-speech-cognitive-services: Authorization token must be a string.');

              case 11:
                _context2.next = 15;
                break;

              case 13:
                if (!(typeof subscriptionKey !== 'string')) {
                  _context2.next = 15;
                  break;
                }

                throw new Error('web-speech-cognitive-services: Subscription key must be a string.');

              case 15:
                if (shouldWarnOnSubscriptionKey && subscriptionKey) {
                  console.warn('web-speech-cognitive-services: In production environment, subscription key should not be used, authorization token should be used instead.');
                  shouldWarnOnSubscriptionKey = false;
                }

                return _context2.abrupt("return", authorizationToken ? {
                  authorizationToken: authorizationToken,
                  region: region
                } : {
                  region: region,
                  subscriptionKey: subscriptionKey
                });

              case 17:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }));

      function fetchCredentials() {
        return _fetchCredentials.apply(this, arguments);
      }

      return fetchCredentials;
    }(),
    looseEvents: looseEvents
  });
}
//# sourceMappingURL=patchOptions.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/SpeechServices/resolveFunctionOrReturnValue.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/SpeechServices/resolveFunctionOrReturnValue.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = resolveFunctionOrReturnValue;

function resolveFunctionOrReturnValue(fnOrValue) {
  return typeof fnOrValue === 'function' ? fnOrValue() : fnOrValue;
}
//# sourceMappingURL=resolveFunctionOrReturnValue.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/Util/arrayToMap.js":
/*!***************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/Util/arrayToMap.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _default(array, extras) {
  var map = _objectSpread({}, [].reduce.call(array, function (map, value, index) {
    map[index] = value;
    return map;
  }, {}), {}, extras, (0, _defineProperty2.default)({
    length: array.length
  }, Symbol.iterator, function () {
    return [].slice.call(map)[Symbol.iterator]();
  }));

  return map;
}
//# sourceMappingURL=arrayToMap.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/Util/createDeferred.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/Util/createDeferred.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// The MIT License (MIT)
//
// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
// This piece of code is adopted from https://github.com/sindresorhus/p-defer
// The reason why we need to fork it is because:
// - The original package published to NPM is not ES5-compliant
//    - Due to the use of arrow functions
// - create-react-app@1 does not play nice with packages that are not ES5-compliant
//    - create-react-app@2 do play nice, but it was so new that most of the people are still on @1
// Criteria to remove this package:
// - When create-react-app@2 become mainstream


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createDeferred;

function createDeferred() {
  var ret = {};
  ret.promise = new Promise(function (resolve, reject) {
    ret.resolve = resolve;
    ret.reject = reject;
  });
  return ret;
}
//# sourceMappingURL=createDeferred.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/Util/createPromiseQueue.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/Util/createPromiseQueue.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _createDeferred = _interopRequireDefault(__webpack_require__(/*! ./createDeferred */ "./node_modules/web-speech-cognitive-services/lib/Util/createDeferred.js"));

function _default() {
  var shiftDeferred;
  var queue = [];

  var push = function push(value) {
    if (shiftDeferred) {
      var _shiftDeferred = shiftDeferred,
          resolve = _shiftDeferred.resolve;
      shiftDeferred = null;
      resolve(value);
    } else {
      queue.push(value);
    }
  };

  var shift = function shift() {
    if (queue.length) {
      return Promise.resolve(queue.shift());
    }

    return (shiftDeferred || (shiftDeferred = (0, _createDeferred.default)())).promise;
  };

  return {
    push: push,
    shift: shift
  };
}
//# sourceMappingURL=createPromiseQueue.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/lib/external/event-target-shim.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/lib/external/event-target-shim.js ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// This is adopted from event-target-shim@5.0.1 under MIT License.
// The source code is copied here because the original package do not support ES5 browsers.

/**
 * @author Toru Nagashima <https://github.com/mysticatea>
 * @copyright 2015 Toru Nagashima. All rights reserved.
 * See LICENSE file in root directory for full license.
 */


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

var _typeof2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/typeof */ "./node_modules/@babel/runtime/helpers/typeof.js"));

Object.defineProperty(exports, '__esModule', {
  value: true
});
/**
 * @typedef {object} PrivateData
 * @property {EventTarget} eventTarget The event target.
 * @property {{type:string}} event The original event object.
 * @property {number} eventPhase The current event phase.
 * @property {EventTarget|null} currentTarget The current event target.
 * @property {boolean} canceled The flag to prevent default.
 * @property {boolean} stopped The flag to stop propagation.
 * @property {boolean} immediateStopped The flag to stop propagation immediately.
 * @property {Function|null} passiveListener The listener if the current listener is passive. Otherwise this is null.
 * @property {number} timeStamp The unix time.
 * @private
 */

/**
 * Private data for event wrappers.
 * @type {WeakMap<Event, PrivateData>}
 * @private
 */

var privateData = new WeakMap();
/**
 * Cache for wrapper classes.
 * @type {WeakMap<Object, Function>}
 * @private
 */

var wrappers = new WeakMap();
/**
 * Get private data.
 * @param {Event} event The event object to get private data.
 * @returns {PrivateData} The private data of the event.
 * @private
 */

function pd(event) {
  var retv = privateData.get(event);
  console.assert(retv != null, "'this' is expected an Event object, but got", event);
  return retv;
}
/**
 * https://dom.spec.whatwg.org/#set-the-canceled-flag
 * @param data {PrivateData} private data.
 */


function setCancelFlag(data) {
  if (data.passiveListener != null) {
    if (typeof console !== "undefined" && typeof console.error === "function") {
      console.error("Unable to preventDefault inside passive event listener invocation.", data.passiveListener);
    }

    return;
  }

  if (!data.event.cancelable) {
    return;
  }

  data.canceled = true;

  if (typeof data.event.preventDefault === "function") {
    data.event.preventDefault();
  }
}
/**
 * @see https://dom.spec.whatwg.org/#interface-event
 * @private
 */

/**
 * The event wrapper.
 * @constructor
 * @param {EventTarget} eventTarget The event target of this dispatching.
 * @param {Event|{type:string}} event The original event to wrap.
 */


function Event(eventTarget, event) {
  privateData.set(this, {
    eventTarget: eventTarget,
    event: event,
    eventPhase: 2,
    currentTarget: eventTarget,
    canceled: false,
    stopped: false,
    immediateStopped: false,
    passiveListener: null,
    timeStamp: event.timeStamp || Date.now()
  }); // https://heycam.github.io/webidl/#Unforgeable

  Object.defineProperty(this, "isTrusted", {
    value: false,
    enumerable: true
  }); // Define accessors

  var keys = Object.keys(event);

  for (var i = 0; i < keys.length; ++i) {
    var key = keys[i];

    if (!(key in this)) {
      Object.defineProperty(this, key, defineRedirectDescriptor(key));
    }
  }
} // Should be enumerable, but class methods are not enumerable.


Event.prototype = {
  /**
   * The type of this event.
   * @type {string}
   */
  get type() {
    return pd(this).event.type;
  },

  /**
   * The target of this event.
   * @type {EventTarget}
   */
  get target() {
    return pd(this).eventTarget;
  },

  /**
   * The target of this event.
   * @type {EventTarget}
   */
  get currentTarget() {
    return pd(this).currentTarget;
  },

  /**
   * @returns {EventTarget[]} The composed path of this event.
   */
  composedPath: function composedPath() {
    var currentTarget = pd(this).currentTarget;

    if (currentTarget == null) {
      return [];
    }

    return [currentTarget];
  },

  /**
   * Constant of NONE.
   * @type {number}
   */
  get NONE() {
    return 0;
  },

  /**
   * Constant of CAPTURING_PHASE.
   * @type {number}
   */
  get CAPTURING_PHASE() {
    return 1;
  },

  /**
   * Constant of AT_TARGET.
   * @type {number}
   */
  get AT_TARGET() {
    return 2;
  },

  /**
   * Constant of BUBBLING_PHASE.
   * @type {number}
   */
  get BUBBLING_PHASE() {
    return 3;
  },

  /**
   * The target of this event.
   * @type {number}
   */
  get eventPhase() {
    return pd(this).eventPhase;
  },

  /**
   * Stop event bubbling.
   * @returns {void}
   */
  stopPropagation: function stopPropagation() {
    var data = pd(this);
    data.stopped = true;

    if (typeof data.event.stopPropagation === "function") {
      data.event.stopPropagation();
    }
  },

  /**
   * Stop event bubbling.
   * @returns {void}
   */
  stopImmediatePropagation: function stopImmediatePropagation() {
    var data = pd(this);
    data.stopped = true;
    data.immediateStopped = true;

    if (typeof data.event.stopImmediatePropagation === "function") {
      data.event.stopImmediatePropagation();
    }
  },

  /**
   * The flag to be bubbling.
   * @type {boolean}
   */
  get bubbles() {
    return Boolean(pd(this).event.bubbles);
  },

  /**
   * The flag to be cancelable.
   * @type {boolean}
   */
  get cancelable() {
    return Boolean(pd(this).event.cancelable);
  },

  /**
   * Cancel this event.
   * @returns {void}
   */
  preventDefault: function preventDefault() {
    setCancelFlag(pd(this));
  },

  /**
   * The flag to indicate cancellation state.
   * @type {boolean}
   */
  get defaultPrevented() {
    return pd(this).canceled;
  },

  /**
   * The flag to be composed.
   * @type {boolean}
   */
  get composed() {
    return Boolean(pd(this).event.composed);
  },

  /**
   * The unix time of this event.
   * @type {number}
   */
  get timeStamp() {
    return pd(this).timeStamp;
  },

  /**
   * The target of this event.
   * @type {EventTarget}
   * @deprecated
   */
  get srcElement() {
    return pd(this).eventTarget;
  },

  /**
   * The flag to stop event bubbling.
   * @type {boolean}
   * @deprecated
   */
  get cancelBubble() {
    return pd(this).stopped;
  },

  set cancelBubble(value) {
    if (!value) {
      return;
    }

    var data = pd(this);
    data.stopped = true;

    if (typeof data.event.cancelBubble === "boolean") {
      data.event.cancelBubble = true;
    }
  },

  /**
   * The flag to indicate cancellation state.
   * @type {boolean}
   * @deprecated
   */
  get returnValue() {
    return !pd(this).canceled;
  },

  set returnValue(value) {
    if (!value) {
      setCancelFlag(pd(this));
    }
  },

  /**
   * Initialize this event object. But do nothing under event dispatching.
   * @param {string} type The event type.
   * @param {boolean} [bubbles=false] The flag to be possible to bubble up.
   * @param {boolean} [cancelable=false] The flag to be possible to cancel.
   * @deprecated
   */
  initEvent: function initEvent() {// Do nothing.
  }
}; // `constructor` is not enumerable.

Object.defineProperty(Event.prototype, "constructor", {
  value: Event,
  configurable: true,
  writable: true
}); // Ensure `event instanceof window.Event` is `true`.

if (typeof window !== "undefined" && typeof window.Event !== "undefined") {
  Object.setPrototypeOf(Event.prototype, window.Event.prototype); // Make association for wrappers.

  wrappers.set(window.Event.prototype, Event);
}
/**
 * Get the property descriptor to redirect a given property.
 * @param {string} key Property name to define property descriptor.
 * @returns {PropertyDescriptor} The property descriptor to redirect the property.
 * @private
 */


function defineRedirectDescriptor(key) {
  return {
    get: function get() {
      return pd(this).event[key];
    },
    set: function set(value) {
      pd(this).event[key] = value;
    },
    configurable: true,
    enumerable: true
  };
}
/**
 * Get the property descriptor to call a given method property.
 * @param {string} key Property name to define property descriptor.
 * @returns {PropertyDescriptor} The property descriptor to call the method property.
 * @private
 */


function defineCallDescriptor(key) {
  return {
    value: function value() {
      var event = pd(this).event;
      return event[key].apply(event, arguments);
    },
    configurable: true,
    enumerable: true
  };
}
/**
 * Define new wrapper class.
 * @param {Function} BaseEvent The base wrapper class.
 * @param {Object} proto The prototype of the original event.
 * @returns {Function} The defined wrapper class.
 * @private
 */


function defineWrapper(BaseEvent, proto) {
  var keys = Object.keys(proto);

  if (keys.length === 0) {
    return BaseEvent;
  }
  /** CustomEvent */


  function CustomEvent(eventTarget, event) {
    BaseEvent.call(this, eventTarget, event);
  }

  CustomEvent.prototype = Object.create(BaseEvent.prototype, {
    constructor: {
      value: CustomEvent,
      configurable: true,
      writable: true
    }
  }); // Define accessors.

  for (var i = 0; i < keys.length; ++i) {
    var key = keys[i];

    if (!(key in BaseEvent.prototype)) {
      var descriptor = Object.getOwnPropertyDescriptor(proto, key);
      var isFunc = typeof descriptor.value === "function";
      Object.defineProperty(CustomEvent.prototype, key, isFunc ? defineCallDescriptor(key) : defineRedirectDescriptor(key));
    }
  }

  return CustomEvent;
}
/**
 * Get the wrapper class of a given prototype.
 * @param {Object} proto The prototype of the original event to get its wrapper.
 * @returns {Function} The wrapper class.
 * @private
 */


function getWrapper(proto) {
  if (proto == null || proto === Object.prototype) {
    return Event;
  }

  var wrapper = wrappers.get(proto);

  if (wrapper == null) {
    wrapper = defineWrapper(getWrapper(Object.getPrototypeOf(proto)), proto);
    wrappers.set(proto, wrapper);
  }

  return wrapper;
}
/**
 * Wrap a given event to management a dispatching.
 * @param {EventTarget} eventTarget The event target of this dispatching.
 * @param {Object} event The event to wrap.
 * @returns {Event} The wrapper instance.
 * @private
 */


function wrapEvent(eventTarget, event) {
  var Wrapper = getWrapper(Object.getPrototypeOf(event));
  return new Wrapper(eventTarget, event);
}
/**
 * Get the immediateStopped flag of a given event.
 * @param {Event} event The event to get.
 * @returns {boolean} The flag to stop propagation immediately.
 * @private
 */


function isStopped(event) {
  return pd(event).immediateStopped;
}
/**
 * Set the current event phase of a given event.
 * @param {Event} event The event to set current target.
 * @param {number} eventPhase New event phase.
 * @returns {void}
 * @private
 */


function setEventPhase(event, eventPhase) {
  pd(event).eventPhase = eventPhase;
}
/**
 * Set the current target of a given event.
 * @param {Event} event The event to set current target.
 * @param {EventTarget|null} currentTarget New current target.
 * @returns {void}
 * @private
 */


function setCurrentTarget(event, currentTarget) {
  pd(event).currentTarget = currentTarget;
}
/**
 * Set a passive listener of a given event.
 * @param {Event} event The event to set current target.
 * @param {Function|null} passiveListener New passive listener.
 * @returns {void}
 * @private
 */


function setPassiveListener(event, passiveListener) {
  pd(event).passiveListener = passiveListener;
}
/**
 * @typedef {object} ListenerNode
 * @property {Function} listener
 * @property {1|2|3} listenerType
 * @property {boolean} passive
 * @property {boolean} once
 * @property {ListenerNode|null} next
 * @private
 */

/**
 * @type {WeakMap<object, Map<string, ListenerNode>>}
 * @private
 */


var listenersMap = new WeakMap(); // Listener types

var CAPTURE = 1;
var BUBBLE = 2;
var ATTRIBUTE = 3;
/**
 * Check whether a given value is an object or not.
 * @param {any} x The value to check.
 * @returns {boolean} `true` if the value is an object.
 */

function isObject(x) {
  return x !== null && (0, _typeof2.default)(x) === "object"; //eslint-disable-line no-restricted-syntax
}
/**
 * Get listeners.
 * @param {EventTarget} eventTarget The event target to get.
 * @returns {Map<string, ListenerNode>} The listeners.
 * @private
 */


function getListeners(eventTarget) {
  var listeners = listenersMap.get(eventTarget);

  if (listeners == null) {
    throw new TypeError("'this' is expected an EventTarget object, but got another value.");
  }

  return listeners;
}
/**
 * Get the property descriptor for the event attribute of a given event.
 * @param {string} eventName The event name to get property descriptor.
 * @returns {PropertyDescriptor} The property descriptor.
 * @private
 */


function defineEventAttributeDescriptor(eventName) {
  return {
    get: function get() {
      var listeners = getListeners(this);
      var node = listeners.get(eventName);

      while (node != null) {
        if (node.listenerType === ATTRIBUTE) {
          return node.listener;
        }

        node = node.next;
      }

      return null;
    },
    set: function set(listener) {
      if (typeof listener !== "function" && !isObject(listener)) {
        listener = null; // eslint-disable-line no-param-reassign
      }

      var listeners = getListeners(this); // Traverse to the tail while removing old value.

      var prev = null;
      var node = listeners.get(eventName);

      while (node != null) {
        if (node.listenerType === ATTRIBUTE) {
          // Remove old value.
          if (prev !== null) {
            prev.next = node.next;
          } else if (node.next !== null) {
            listeners.set(eventName, node.next);
          } else {
            listeners.delete(eventName);
          }
        } else {
          prev = node;
        }

        node = node.next;
      } // Add new value.


      if (listener !== null) {
        var newNode = {
          listener: listener,
          listenerType: ATTRIBUTE,
          passive: false,
          once: false,
          next: null
        };

        if (prev === null) {
          listeners.set(eventName, newNode);
        } else {
          prev.next = newNode;
        }
      }
    },
    configurable: true,
    enumerable: true
  };
}
/**
 * Define an event attribute (e.g. `eventTarget.onclick`).
 * @param {Object} eventTargetPrototype The event target prototype to define an event attrbite.
 * @param {string} eventName The event name to define.
 * @returns {void}
 */


function defineEventAttribute(eventTargetPrototype, eventName) {
  Object.defineProperty(eventTargetPrototype, "on".concat(eventName), defineEventAttributeDescriptor(eventName));
}
/**
 * Define a custom EventTarget with event attributes.
 * @param {string[]} eventNames Event names for event attributes.
 * @returns {EventTarget} The custom EventTarget.
 * @private
 */


function defineCustomEventTarget(eventNames) {
  /** CustomEventTarget */
  function CustomEventTarget() {
    EventTarget.call(this);
  }

  CustomEventTarget.prototype = Object.create(EventTarget.prototype, {
    constructor: {
      value: CustomEventTarget,
      configurable: true,
      writable: true
    }
  });

  for (var i = 0; i < eventNames.length; ++i) {
    defineEventAttribute(CustomEventTarget.prototype, eventNames[i]);
  }

  return CustomEventTarget;
}
/**
 * EventTarget.
 *
 * - This is constructor if no arguments.
 * - This is a function which returns a CustomEventTarget constructor if there are arguments.
 *
 * For example:
 *
 *     class A extends EventTarget {}
 *     class B extends EventTarget("message") {}
 *     class C extends EventTarget("message", "error") {}
 *     class D extends EventTarget(["message", "error"]) {}
 */


function EventTarget() {
  /*eslint-disable consistent-return */
  if (this instanceof EventTarget) {
    listenersMap.set(this, new Map());
    return;
  }

  if (arguments.length === 1 && Array.isArray(arguments[0])) {
    return defineCustomEventTarget(arguments[0]);
  }

  if (arguments.length > 0) {
    var types = new Array(arguments.length);

    for (var i = 0; i < arguments.length; ++i) {
      types[i] = arguments[i];
    }

    return defineCustomEventTarget(types);
  }

  throw new TypeError("Cannot call a class as a function");
  /*eslint-enable consistent-return */
} // Should be enumerable, but class methods are not enumerable.


EventTarget.prototype = {
  /**
   * Add a given listener to this event target.
   * @param {string} eventName The event name to add.
   * @param {Function} listener The listener to add.
   * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.
   * @returns {void}
   */
  addEventListener: function addEventListener(eventName, listener, options) {
    if (listener == null) {
      return;
    }

    if (typeof listener !== "function" && !isObject(listener)) {
      throw new TypeError("'listener' should be a function or an object.");
    }

    var listeners = getListeners(this);
    var optionsIsObj = isObject(options);
    var capture = optionsIsObj ? Boolean(options.capture) : Boolean(options);
    var listenerType = capture ? CAPTURE : BUBBLE;
    var newNode = {
      listener: listener,
      listenerType: listenerType,
      passive: optionsIsObj && Boolean(options.passive),
      once: optionsIsObj && Boolean(options.once),
      next: null
    }; // Set it as the first node if the first node is null.

    var node = listeners.get(eventName);

    if (node === undefined) {
      listeners.set(eventName, newNode);
      return;
    } // Traverse to the tail while checking duplication..


    var prev = null;

    while (node != null) {
      if (node.listener === listener && node.listenerType === listenerType) {
        // Should ignore duplication.
        return;
      }

      prev = node;
      node = node.next;
    } // Add it.


    prev.next = newNode;
  },

  /**
   * Remove a given listener from this event target.
   * @param {string} eventName The event name to remove.
   * @param {Function} listener The listener to remove.
   * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.
   * @returns {void}
   */
  removeEventListener: function removeEventListener(eventName, listener, options) {
    if (listener == null) {
      return;
    }

    var listeners = getListeners(this);
    var capture = isObject(options) ? Boolean(options.capture) : Boolean(options);
    var listenerType = capture ? CAPTURE : BUBBLE;
    var prev = null;
    var node = listeners.get(eventName);

    while (node != null) {
      if (node.listener === listener && node.listenerType === listenerType) {
        if (prev !== null) {
          prev.next = node.next;
        } else if (node.next !== null) {
          listeners.set(eventName, node.next);
        } else {
          listeners.delete(eventName);
        }

        return;
      }

      prev = node;
      node = node.next;
    }
  },

  /**
   * Dispatch a given event.
   * @param {Event|{type:string}} event The event to dispatch.
   * @returns {boolean} `false` if canceled.
   */
  dispatchEvent: function dispatchEvent(event) {
    if (event == null || typeof event.type !== "string") {
      throw new TypeError('"event.type" should be a string.');
    } // If listeners aren't registered, terminate.


    var listeners = getListeners(this);
    var eventName = event.type;
    var node = listeners.get(eventName);

    if (node == null) {
      return true;
    } // Since we cannot rewrite several properties, so wrap object.


    var wrappedEvent = wrapEvent(this, event); // This doesn't process capturing phase and bubbling phase.
    // This isn't participating in a tree.

    var prev = null;

    while (node != null) {
      // Remove this listener if it's once
      if (node.once) {
        if (prev !== null) {
          prev.next = node.next;
        } else if (node.next !== null) {
          listeners.set(eventName, node.next);
        } else {
          listeners.delete(eventName);
        }
      } else {
        prev = node;
      } // Call this listener


      setPassiveListener(wrappedEvent, node.passive ? node.listener : null);

      if (typeof node.listener === "function") {
        try {
          node.listener.call(this, wrappedEvent);
        } catch (err) {
          if (typeof console !== "undefined" && typeof console.error === "function") {
            console.error(err);
          }
        }
      } else if (node.listenerType !== ATTRIBUTE && typeof node.listener.handleEvent === "function") {
        node.listener.handleEvent(wrappedEvent);
      } // Break if `event.stopImmediatePropagation` was called.


      if (isStopped(wrappedEvent)) {
        break;
      }

      node = node.next;
    }

    setPassiveListener(wrappedEvent, null);
    setEventPhase(wrappedEvent, 0);
    setCurrentTarget(wrappedEvent, null);
    return !wrappedEvent.defaultPrevented;
  }
}; // `constructor` is not enumerable.

Object.defineProperty(EventTarget.prototype, "constructor", {
  value: EventTarget,
  configurable: true,
  writable: true
}); // Ensure `eventTarget instanceof window.EventTarget` is `true`.

if (typeof window !== "undefined" && typeof window.EventTarget !== "undefined") {
  Object.setPrototypeOf(EventTarget.prototype, window.EventTarget.prototype);
}

exports.defineEventAttribute = defineEventAttribute;
exports.EventTarget = EventTarget;
exports.default = EventTarget;
module.exports = EventTarget;
module.exports.EventTarget = module.exports["default"] = EventTarget;
module.exports.defineEventAttribute = defineEventAttribute;
//# sourceMappingURL=event-target-shim.js.map

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/microsoft.cognitiveservices.speech.sdk.js":
/*!**************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/microsoft.cognitiveservices.speech.sdk.js ***!
  \**************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var Exports_1 = __webpack_require__(/*! ./src/common.browser/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js");
var Exports_2 = __webpack_require__(/*! ./src/common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
// Common.Storage.SetLocalStorage(new Common.Browser.LocalStorage());
// Common.Storage.SetSessionStorage(new Common.Browser.SessionStorage());
Exports_2.Events.instance.attachListener(new Exports_1.ConsoleLoggingListener());
// Speech SDK API
__export(__webpack_require__(/*! ./src/sdk/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"));

//# sourceMappingURL=microsoft.cognitiveservices.speech.sdk.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ConsoleLoggingListener.js":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ConsoleLoggingListener.js ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var ConsoleLoggingListener = /** @class */ (function () {
    function ConsoleLoggingListener(logLevelFilter) {
        var _this = this;
        if (logLevelFilter === void 0) { logLevelFilter = Exports_1.EventType.Warning; }
        this.onEvent = function (event) {
            if (event.eventType >= _this.privLogLevelFilter) {
                var log = _this.toString(event);
                switch (event.eventType) {
                    case Exports_1.EventType.Debug:
                        // tslint:disable-next-line:no-console
                        console.debug(log);
                        break;
                    case Exports_1.EventType.Info:
                        // tslint:disable-next-line:no-console
                        console.info(log);
                        break;
                    case Exports_1.EventType.Warning:
                        // tslint:disable-next-line:no-console
                        console.warn(log);
                        break;
                    case Exports_1.EventType.Error:
                        // tslint:disable-next-line:no-console
                        console.error(log);
                        break;
                    default:
                        // tslint:disable-next-line:no-console
                        console.log(log);
                        break;
                }
            }
        };
        this.toString = function (event) {
            var logFragments = [
                "" + event.EventTime,
                "" + event.Name,
            ];
            for (var prop in event) {
                if (prop && event.hasOwnProperty(prop) &&
                    prop !== "eventTime" && prop !== "eventType" &&
                    prop !== "eventId" && prop !== "name" &&
                    prop !== "constructor") {
                    var value = event[prop];
                    var valueToLog = "<NULL>";
                    if (value !== undefined && value !== null) {
                        if (typeof (value) === "number" || typeof (value) === "string") {
                            valueToLog = value.toString();
                        }
                        else {
                            valueToLog = JSON.stringify(value);
                        }
                    }
                    logFragments.push(prop + ": " + valueToLog);
                }
            }
            return logFragments.join(" | ");
        };
        this.privLogLevelFilter = logLevelFilter;
    }
    return ConsoleLoggingListener;
}());
exports.ConsoleLoggingListener = ConsoleLoggingListener;

//# sourceMappingURL=ConsoleLoggingListener.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(__webpack_require__(/*! ./ConsoleLoggingListener */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ConsoleLoggingListener.js"));
__export(__webpack_require__(/*! ./MicAudioSource */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/MicAudioSource.js"));
__export(__webpack_require__(/*! ./FileAudioSource */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/FileAudioSource.js"));
__export(__webpack_require__(/*! ./PCMRecorder */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/PCMRecorder.js"));
__export(__webpack_require__(/*! ./WebsocketConnection */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketConnection.js"));
__export(__webpack_require__(/*! ./WebsocketMessageAdapter */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketMessageAdapter.js"));
__export(__webpack_require__(/*! ./ReplayableAudioNode */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ReplayableAudioNode.js"));
__export(__webpack_require__(/*! ./ProxyInfo */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ProxyInfo.js"));

//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/FileAudioSource.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/FileAudioSource.js ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var AudioStreamFormat_1 = __webpack_require__(/*! ../../src/sdk/Audio/AudioStreamFormat */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js");
var Exports_1 = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Exports_2 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var FileAudioSource = /** @class */ (function () {
    function FileAudioSource(file, audioSourceId) {
        var _this = this;
        this.privStreams = {};
        this.turnOn = function () {
            if (typeof FileReader === "undefined") {
                var errorMsg = "Browser does not support FileReader.";
                _this.onEvent(new Exports_2.AudioSourceErrorEvent(errorMsg, "")); // initialization error - no streamid at this point
                return Exports_2.PromiseHelper.fromError(errorMsg);
            }
            else if (_this.privFile.name.lastIndexOf(".wav") !== _this.privFile.name.length - 4) {
                var errorMsg = _this.privFile.name + " is not supported. Only WAVE files are allowed at the moment.";
                _this.onEvent(new Exports_2.AudioSourceErrorEvent(errorMsg, ""));
                return Exports_2.PromiseHelper.fromError(errorMsg);
            }
            else if (_this.privFile.size > FileAudioSource.MAX_SIZE) {
                var errorMsg = _this.privFile.name + " exceeds the maximum allowed file size (" + FileAudioSource.MAX_SIZE + ").";
                _this.onEvent(new Exports_2.AudioSourceErrorEvent(errorMsg, ""));
                return Exports_2.PromiseHelper.fromError(errorMsg);
            }
            _this.onEvent(new Exports_2.AudioSourceInitializingEvent(_this.privId)); // no stream id
            _this.onEvent(new Exports_2.AudioSourceReadyEvent(_this.privId));
            return Exports_2.PromiseHelper.fromResult(true);
        };
        this.id = function () {
            return _this.privId;
        };
        this.attach = function (audioNodeId) {
            _this.onEvent(new Exports_2.AudioStreamNodeAttachingEvent(_this.privId, audioNodeId));
            return _this.upload(audioNodeId).onSuccessContinueWith(function (streamReader) {
                _this.onEvent(new Exports_2.AudioStreamNodeAttachedEvent(_this.privId, audioNodeId));
                return {
                    detach: function () {
                        streamReader.close();
                        delete _this.privStreams[audioNodeId];
                        _this.onEvent(new Exports_2.AudioStreamNodeDetachedEvent(_this.privId, audioNodeId));
                        _this.turnOff();
                    },
                    id: function () {
                        return audioNodeId;
                    },
                    read: function () {
                        return streamReader.read();
                    },
                };
            });
        };
        this.detach = function (audioNodeId) {
            if (audioNodeId && _this.privStreams[audioNodeId]) {
                _this.privStreams[audioNodeId].close();
                delete _this.privStreams[audioNodeId];
                _this.onEvent(new Exports_2.AudioStreamNodeDetachedEvent(_this.privId, audioNodeId));
            }
        };
        this.turnOff = function () {
            for (var streamId in _this.privStreams) {
                if (streamId) {
                    var stream = _this.privStreams[streamId];
                    if (stream && !stream.isClosed) {
                        stream.close();
                    }
                }
            }
            _this.onEvent(new Exports_2.AudioSourceOffEvent(_this.privId)); // no stream now
            return Exports_2.PromiseHelper.fromResult(true);
        };
        this.upload = function (audioNodeId) {
            return _this.turnOn()
                .onSuccessContinueWith(function (_) {
                var stream = new Exports_2.Stream(audioNodeId);
                _this.privStreams[audioNodeId] = stream;
                var reader = new FileReader();
                var startOffset = 0;
                var endOffset = FileAudioSource.CHUNK_SIZE;
                var processNextChunk = function (event) {
                    if (stream.isClosed) {
                        return; // output stream was closed (somebody called TurnOff). We're done here.
                    }
                    stream.writeStreamChunk({
                        buffer: reader.result,
                        isEnd: false,
                        timeReceived: Date.now(),
                    });
                    if (endOffset < _this.privFile.size) {
                        startOffset = endOffset;
                        endOffset = Math.min(endOffset + FileAudioSource.CHUNK_SIZE, _this.privFile.size);
                        var chunk_1 = _this.privFile.slice(startOffset, endOffset);
                        reader.readAsArrayBuffer(chunk_1);
                    }
                    else {
                        // we've written the entire file to the output stream, can close it now.
                        stream.close();
                    }
                };
                reader.onload = processNextChunk;
                reader.onerror = function (event) {
                    var errorMsg = "Error occurred while processing '" + _this.privFile.name + "'. " + event;
                    _this.onEvent(new Exports_2.AudioStreamNodeErrorEvent(_this.privId, audioNodeId, errorMsg));
                    throw new Error(errorMsg);
                };
                var chunk = _this.privFile.slice(startOffset, endOffset);
                reader.readAsArrayBuffer(chunk);
                return stream.getReader();
            });
        };
        this.onEvent = function (event) {
            _this.privEvents.onEvent(event);
            Exports_2.Events.instance.onEvent(event);
        };
        this.privId = audioSourceId ? audioSourceId : Exports_2.createNoDashGuid();
        this.privEvents = new Exports_2.EventSource();
        this.privFile = file;
    }
    Object.defineProperty(FileAudioSource.prototype, "format", {
        get: function () {
            return FileAudioSource.FILEFORMAT;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FileAudioSource.prototype, "events", {
        get: function () {
            return this.privEvents;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FileAudioSource.prototype, "deviceInfo", {
        get: function () {
            return Exports_2.PromiseHelper.fromResult({
                bitspersample: FileAudioSource.FILEFORMAT.bitsPerSample,
                channelcount: FileAudioSource.FILEFORMAT.channels,
                connectivity: Exports_1.connectivity.Unknown,
                manufacturer: "Speech SDK",
                model: "File",
                samplerate: FileAudioSource.FILEFORMAT.samplesPerSec,
                type: Exports_1.type.File,
            });
        },
        enumerable: true,
        configurable: true
    });
    // Recommended sample rate (bytes/second).
    FileAudioSource.SAMPLE_RATE = 16000 * 2; // 16 kHz * 16 bits
    // We should stream audio at no faster than 2x real-time (i.e., send five chunks
    // per second, with the chunk size == sample rate in bytes per second * 2 / 5).
    FileAudioSource.CHUNK_SIZE = FileAudioSource.SAMPLE_RATE * 2 / 5;
    // 10 seconds of audio in bytes =
    // sample rate (bytes/second) * 600 (seconds) + 44 (size of the wave header).
    FileAudioSource.MAX_SIZE = FileAudioSource.SAMPLE_RATE * 600 + 44;
    FileAudioSource.FILEFORMAT = AudioStreamFormat_1.AudioStreamFormat.getWaveFormatPCM(16000, 16, 1);
    return FileAudioSource;
}());
exports.FileAudioSource = FileAudioSource;

//# sourceMappingURL=FileAudioSource.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/MicAudioSource.js":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/MicAudioSource.js ***!
  \*********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var AudioStreamFormat_1 = __webpack_require__(/*! ../../src/sdk/Audio/AudioStreamFormat */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js");
var Exports_1 = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Exports_2 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
exports.AudioWorkletSourceURLPropertyName = "MICROPHONE-WorkletSourceUrl";
var MicAudioSource = /** @class */ (function () {
    function MicAudioSource(privRecorder, outputChunkSize, audioSourceId, deviceId) {
        var _this = this;
        this.privRecorder = privRecorder;
        this.deviceId = deviceId;
        this.privStreams = {};
        this.turnOn = function () {
            if (_this.privInitializeDeferral) {
                return _this.privInitializeDeferral.promise();
            }
            _this.privInitializeDeferral = new Exports_2.Deferred();
            _this.createAudioContext();
            var nav = window.navigator;
            var getUserMedia = (nav.getUserMedia ||
                nav.webkitGetUserMedia ||
                nav.mozGetUserMedia ||
                nav.msGetUserMedia);
            if (!!nav.mediaDevices) {
                getUserMedia = function (constraints, successCallback, errorCallback) {
                    nav.mediaDevices
                        .getUserMedia(constraints)
                        .then(successCallback)
                        .catch(errorCallback);
                };
            }
            if (!getUserMedia) {
                var errorMsg = "Browser does not support getUserMedia.";
                _this.privInitializeDeferral.reject(errorMsg);
                _this.onEvent(new Exports_2.AudioSourceErrorEvent(errorMsg, "")); // mic initialized error - no streamid at this point
            }
            else {
                var next = function () {
                    _this.onEvent(new Exports_2.AudioSourceInitializingEvent(_this.privId)); // no stream id
                    getUserMedia({ audio: _this.deviceId ? { deviceId: _this.deviceId } : true, video: false }, function (mediaStream) {
                        _this.privMediaStream = mediaStream;
                        _this.onEvent(new Exports_2.AudioSourceReadyEvent(_this.privId));
                        _this.privInitializeDeferral.resolve(true);
                    }, function (error) {
                        var errorMsg = "Error occurred during microphone initialization: " + error;
                        var tmp = _this.privInitializeDeferral;
                        // HACK: this should be handled through onError callbacks of all promises up the stack.
                        // Unfortunately, the current implementation does not provide an easy way to reject promises
                        // without a lot of code replication.
                        // TODO: fix promise implementation, allow for a graceful reject chaining.
                        _this.privInitializeDeferral = null;
                        tmp.reject(errorMsg); // this will bubble up through the whole chain of promises,
                        // with each new level adding extra "Unhandled callback error" prefix to the error message.
                        // The following line is not guaranteed to be executed.
                        _this.onEvent(new Exports_2.AudioSourceErrorEvent(_this.privId, errorMsg));
                    });
                };
                if (_this.privContext.state === "suspended") {
                    // NOTE: On iOS, the Web Audio API requires sounds to be triggered from an explicit user action.
                    // https://github.com/WebAudio/web-audio-api/issues/790
                    _this.privContext.resume().then(next, function (reason) {
                        _this.privInitializeDeferral.reject("Failed to initialize audio context: " + reason);
                    });
                }
                else {
                    next();
                }
            }
            return _this.privInitializeDeferral.promise();
        };
        this.id = function () {
            return _this.privId;
        };
        this.attach = function (audioNodeId) {
            _this.onEvent(new Exports_2.AudioStreamNodeAttachingEvent(_this.privId, audioNodeId));
            return _this.listen(audioNodeId).onSuccessContinueWith(function (streamReader) {
                _this.onEvent(new Exports_2.AudioStreamNodeAttachedEvent(_this.privId, audioNodeId));
                return {
                    detach: function () {
                        streamReader.close();
                        delete _this.privStreams[audioNodeId];
                        _this.onEvent(new Exports_2.AudioStreamNodeDetachedEvent(_this.privId, audioNodeId));
                        _this.turnOff();
                    },
                    id: function () {
                        return audioNodeId;
                    },
                    read: function () {
                        return streamReader.read();
                    },
                };
            });
        };
        this.detach = function (audioNodeId) {
            if (audioNodeId && _this.privStreams[audioNodeId]) {
                _this.privStreams[audioNodeId].close();
                delete _this.privStreams[audioNodeId];
                _this.onEvent(new Exports_2.AudioStreamNodeDetachedEvent(_this.privId, audioNodeId));
            }
        };
        this.turnOff = function () {
            for (var streamId in _this.privStreams) {
                if (streamId) {
                    var stream = _this.privStreams[streamId];
                    if (stream) {
                        stream.close();
                    }
                }
            }
            _this.onEvent(new Exports_2.AudioSourceOffEvent(_this.privId)); // no stream now
            _this.privInitializeDeferral = null;
            _this.destroyAudioContext();
            return Exports_2.PromiseHelper.fromResult(true);
        };
        this.listen = function (audioNodeId) {
            return _this.turnOn()
                .onSuccessContinueWith(function (_) {
                var stream = new Exports_2.ChunkedArrayBufferStream(_this.privOutputChunkSize, audioNodeId);
                _this.privStreams[audioNodeId] = stream;
                try {
                    _this.privRecorder.record(_this.privContext, _this.privMediaStream, stream);
                }
                catch (error) {
                    _this.onEvent(new Exports_2.AudioStreamNodeErrorEvent(_this.privId, audioNodeId, error));
                    throw error;
                }
                return stream.getReader();
            });
        };
        this.onEvent = function (event) {
            _this.privEvents.onEvent(event);
            Exports_2.Events.instance.onEvent(event);
        };
        this.createAudioContext = function () {
            if (!!_this.privContext) {
                return;
            }
            // https://developer.mozilla.org/en-US/docs/Web/API/AudioContext
            var AudioContext = (window.AudioContext)
                || (window.webkitAudioContext)
                || false;
            if (!AudioContext) {
                throw new Error("Browser does not support Web Audio API (AudioContext is not available).");
            }
            _this.privContext = new AudioContext();
        };
        this.destroyAudioContext = function () {
            if (!_this.privContext) {
                return;
            }
            _this.privRecorder.releaseMediaResources(_this.privContext);
            // This pattern brought to you by a bug in the TypeScript compiler where it
            // confuses the ("close" in this.privContext) with this.privContext always being null as the alternate.
            // https://github.com/Microsoft/TypeScript/issues/11498
            var hasClose = false;
            if ("close" in _this.privContext) {
                hasClose = true;
            }
            if (hasClose) {
                _this.privContext.close();
                _this.privContext = null;
            }
            else if (null !== _this.privContext && _this.privContext.state === "running") {
                // Suspend actually takes a callback, but analogous to the
                // resume method, it'll be only fired if suspend is called
                // in a direct response to a user action. The later is not always
                // the case, as TurnOff is also called, when we receive an
                // end-of-speech message from the service. So, doing a best effort
                // fire-and-forget here.
                _this.privContext.suspend();
            }
        };
        this.privOutputChunkSize = outputChunkSize;
        this.privId = audioSourceId ? audioSourceId : Exports_2.createNoDashGuid();
        this.privEvents = new Exports_2.EventSource();
    }
    Object.defineProperty(MicAudioSource.prototype, "format", {
        get: function () {
            return MicAudioSource.AUDIOFORMAT;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MicAudioSource.prototype, "events", {
        get: function () {
            return this.privEvents;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MicAudioSource.prototype, "deviceInfo", {
        get: function () {
            return this.getMicrophoneLabel().onSuccessContinueWith(function (label) {
                return {
                    bitspersample: MicAudioSource.AUDIOFORMAT.bitsPerSample,
                    channelcount: MicAudioSource.AUDIOFORMAT.channels,
                    connectivity: Exports_1.connectivity.Unknown,
                    manufacturer: "Speech SDK",
                    model: label,
                    samplerate: MicAudioSource.AUDIOFORMAT.samplesPerSec,
                    type: Exports_1.type.Microphones,
                };
            });
        },
        enumerable: true,
        configurable: true
    });
    MicAudioSource.prototype.setProperty = function (name, value) {
        if (name === exports.AudioWorkletSourceURLPropertyName) {
            this.privRecorder.setWorkletUrl(value);
        }
        else {
            throw new Error("Property '" + name + "' is not supported on Microphone.");
        }
    };
    MicAudioSource.prototype.getMicrophoneLabel = function () {
        var _this = this;
        var defaultMicrophoneName = "microphone";
        // If we did this already, return the value.
        if (this.privMicrophoneLabel !== undefined) {
            return Exports_2.PromiseHelper.fromResult(this.privMicrophoneLabel);
        }
        // If the stream isn't currently running, we can't query devices because security.
        if (this.privMediaStream === undefined || !this.privMediaStream.active) {
            return Exports_2.PromiseHelper.fromResult(defaultMicrophoneName);
        }
        // Setup a default
        this.privMicrophoneLabel = defaultMicrophoneName;
        // Get the id of the device running the audio track.
        var microphoneDeviceId = this.privMediaStream.getTracks()[0].getSettings().deviceId;
        // If the browser doesn't support getting the device ID, set a default and return.
        if (undefined === microphoneDeviceId) {
            return Exports_2.PromiseHelper.fromResult(this.privMicrophoneLabel);
        }
        var deferred = new Exports_2.Deferred();
        // Enumerate the media devices.
        navigator.mediaDevices.enumerateDevices().then(function (devices) {
            for (var _i = 0, devices_1 = devices; _i < devices_1.length; _i++) {
                var device = devices_1[_i];
                if (device.deviceId === microphoneDeviceId) {
                    // Found the device
                    _this.privMicrophoneLabel = device.label;
                    break;
                }
            }
            deferred.resolve(_this.privMicrophoneLabel);
        }, function () { return deferred.resolve(_this.privMicrophoneLabel); });
        return deferred.promise();
    };
    MicAudioSource.AUDIOFORMAT = AudioStreamFormat_1.AudioStreamFormat.getDefaultInputFormat();
    return MicAudioSource;
}());
exports.MicAudioSource = MicAudioSource;

//# sourceMappingURL=MicAudioSource.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/PCMRecorder.js":
/*!******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/PCMRecorder.js ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var PcmRecorder = /** @class */ (function () {
    function PcmRecorder() {
        var _this = this;
        this.record = function (context, mediaStream, outputStream) {
            var desiredSampleRate = 16000;
            var scriptNode = (function () {
                var bufferSize = 0;
                try {
                    return context.createScriptProcessor(bufferSize, 1, 1);
                }
                catch (error) {
                    // Webkit (<= version 31) requires a valid bufferSize.
                    bufferSize = 2048;
                    var audioSampleRate = context.sampleRate;
                    while (bufferSize < 16384 && audioSampleRate >= (2 * desiredSampleRate)) {
                        bufferSize <<= 1;
                        audioSampleRate >>= 1;
                    }
                    return context.createScriptProcessor(bufferSize, 1, 1);
                }
            })();
            var waveStreamEncoder = new Exports_1.RiffPcmEncoder(context.sampleRate, desiredSampleRate);
            var needHeader = true;
            var that = _this;
            scriptNode.onaudioprocess = function (event) {
                var inputFrame = event.inputBuffer.getChannelData(0);
                if (outputStream && !outputStream.isClosed) {
                    var waveFrame = waveStreamEncoder.encode(needHeader, inputFrame);
                    if (!!waveFrame) {
                        outputStream.writeStreamChunk({
                            buffer: waveFrame,
                            isEnd: false,
                            timeReceived: Date.now(),
                        });
                        needHeader = false;
                    }
                }
            };
            var micInput = context.createMediaStreamSource(mediaStream);
            // https://webaudio.github.io/web-audio-api/#audioworklet
            // Using AudioWorklet to improve audio quality and avoid audio glitches due to blocking the UI thread
            if (!!_this.privSpeechProcessorScript && !!context.audioWorklet) {
                context.audioWorklet
                    .addModule(_this.privSpeechProcessorScript)
                    .then(function () {
                    var workletNode = new AudioWorkletNode(context, "speech-processor");
                    workletNode.port.onmessage = function (ev) {
                        var inputFrame = ev.data;
                        if (outputStream && !outputStream.isClosed) {
                            var waveFrame = waveStreamEncoder.encode(needHeader, inputFrame);
                            if (!!waveFrame) {
                                outputStream.writeStreamChunk({
                                    buffer: waveFrame,
                                    isEnd: false,
                                    timeReceived: Date.now(),
                                });
                                needHeader = false;
                            }
                        }
                    };
                    micInput.connect(workletNode);
                    workletNode.connect(context.destination);
                    _this.privMediaResources = {
                        scriptProcessorNode: workletNode,
                        source: micInput,
                        stream: mediaStream,
                    };
                })
                    .catch(function () {
                    micInput.connect(scriptNode);
                    scriptNode.connect(context.destination);
                    _this.privMediaResources = {
                        scriptProcessorNode: scriptNode,
                        source: micInput,
                        stream: mediaStream,
                    };
                });
            }
            else {
                micInput.connect(scriptNode);
                scriptNode.connect(context.destination);
                _this.privMediaResources = {
                    scriptProcessorNode: scriptNode,
                    source: micInput,
                    stream: mediaStream,
                };
            }
        };
        this.releaseMediaResources = function (context) {
            if (_this.privMediaResources) {
                if (_this.privMediaResources.scriptProcessorNode) {
                    _this.privMediaResources.scriptProcessorNode.disconnect(context.destination);
                    _this.privMediaResources.scriptProcessorNode = null;
                }
                if (_this.privMediaResources.source) {
                    _this.privMediaResources.source.disconnect();
                    _this.privMediaResources.stream.getTracks().forEach(function (track) { return track.stop(); });
                    _this.privMediaResources.source = null;
                }
            }
        };
    }
    PcmRecorder.prototype.setWorkletUrl = function (url) {
        this.privSpeechProcessorScript = url;
    };
    return PcmRecorder;
}());
exports.PcmRecorder = PcmRecorder;

//# sourceMappingURL=PCMRecorder.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ProxyInfo.js":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ProxyInfo.js ***!
  \****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var ProxyInfo = /** @class */ (function () {
    function ProxyInfo(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.privProxyHostName = proxyHostName;
        this.privProxyPort = proxyPort;
        this.privProxyUserName = proxyUserName;
        this.privProxyPassword = proxyPassword;
    }
    ProxyInfo.fromRecognizerConfig = function (config) {
        return new ProxyInfo(config.parameters.getProperty(Exports_1.PropertyId.SpeechServiceConnection_ProxyHostName), parseInt(config.parameters.getProperty(Exports_1.PropertyId.SpeechServiceConnection_ProxyPort), 10), config.parameters.getProperty(Exports_1.PropertyId.SpeechServiceConnection_ProxyUserName), config.parameters.getProperty(Exports_1.PropertyId.SpeechServiceConnection_ProxyPassword));
    };
    Object.defineProperty(ProxyInfo.prototype, "HostName", {
        get: function () {
            return this.privProxyHostName;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ProxyInfo.prototype, "Port", {
        get: function () {
            return this.privProxyPort;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ProxyInfo.prototype, "UserName", {
        get: function () {
            return this.privProxyUserName;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ProxyInfo.prototype, "Password", {
        get: function () {
            return this.privProxyPassword;
        },
        enumerable: true,
        configurable: true
    });
    return ProxyInfo;
}());
exports.ProxyInfo = ProxyInfo;

//# sourceMappingURL=ProxyInfo.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ReplayableAudioNode.js":
/*!**************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ReplayableAudioNode.js ***!
  \**************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var ReplayableAudioNode = /** @class */ (function () {
    function ReplayableAudioNode(audioSource, format) {
        var _this = this;
        this.privBuffers = [];
        this.privReplayOffset = 0;
        this.privLastShrinkOffset = 0;
        this.privBufferStartOffset = 0;
        this.privBufferSerial = 0;
        this.privBufferedBytes = 0;
        this.privReplay = false;
        this.privLastChunkAcquiredTime = 0;
        this.id = function () {
            return _this.privAudioNode.id();
        };
        this.privAudioNode = audioSource;
        this.privFormat = format;
    }
    // Reads and returns the next chunk of audio buffer.
    // If replay of existing buffers are needed, read() will first seek and replay
    // existing content, and upoin completion it will read new content from the underlying
    // audio node, saving that content into the replayable buffers.
    ReplayableAudioNode.prototype.read = function () {
        var _this = this;
        // if there is a replay request to honor.
        if (!!this.privReplay && this.privBuffers.length !== 0) {
            // Find the start point in the buffers.
            // Offsets are in 100ns increments.
            // So how many bytes do we need to seek to get the right offset?
            var offsetToSeek = this.privReplayOffset - this.privBufferStartOffset;
            var bytesToSeek = Math.round(offsetToSeek * this.privFormat.avgBytesPerSec * 1e-7);
            if (0 !== (bytesToSeek % 2)) {
                bytesToSeek++;
            }
            var i = 0;
            while (i < this.privBuffers.length && bytesToSeek >= this.privBuffers[i].chunk.buffer.byteLength) {
                bytesToSeek -= this.privBuffers[i++].chunk.buffer.byteLength;
            }
            var retVal = this.privBuffers[i].chunk.buffer.slice(bytesToSeek);
            this.privReplayOffset += (retVal.byteLength / this.privFormat.avgBytesPerSec) * 1e+7;
            // If we've reached the end of the buffers, stop replaying.
            if (i === this.privBuffers.length - 1) {
                this.privReplay = false;
            }
            return Exports_1.PromiseHelper.fromResult({
                buffer: retVal,
                isEnd: false,
                timeReceived: this.privBuffers[i].chunk.timeReceived,
            });
        }
        return this.privAudioNode.read()
            .onSuccessContinueWith(function (result) {
            if (result.buffer) {
                _this.privBuffers.push(new BufferEntry(result, _this.privBufferSerial++, _this.privBufferedBytes));
                _this.privBufferedBytes += result.buffer.byteLength;
            }
            return result;
        });
    };
    ReplayableAudioNode.prototype.detach = function () {
        this.privAudioNode.detach();
        this.privBuffers = undefined;
    };
    ReplayableAudioNode.prototype.replay = function () {
        if (0 !== this.privBuffers.length) {
            this.privReplay = true;
            this.privReplayOffset = this.privLastShrinkOffset;
        }
    };
    // Shrinks the existing audio buffers to start at the new offset, or at the
    // beginning of the buffer closest to the requested offset.
    // A replay request will start from the last shrink point.
    ReplayableAudioNode.prototype.shrinkBuffers = function (offset) {
        this.privLastShrinkOffset = offset;
        // Find the start point in the buffers.
        // Offsets are in 100ns increments.
        // So how many bytes do we need to seek to get the right offset?
        var offsetToSeek = offset - this.privBufferStartOffset;
        var bytesToSeek = Math.round(offsetToSeek * this.privFormat.avgBytesPerSec * 1e-7);
        var i = 0;
        while (i < this.privBuffers.length && bytesToSeek >= this.privBuffers[i].chunk.buffer.byteLength) {
            bytesToSeek -= this.privBuffers[i++].chunk.buffer.byteLength;
        }
        this.privBufferStartOffset = Math.round(offset - ((bytesToSeek / this.privFormat.avgBytesPerSec) * 1e+7));
        this.privBuffers = this.privBuffers.slice(i);
    };
    // Finds the time a buffer of audio was first seen by offset.
    ReplayableAudioNode.prototype.findTimeAtOffset = function (offset) {
        if (offset < this.privBufferStartOffset) {
            return 0;
        }
        for (var _i = 0, _a = this.privBuffers; _i < _a.length; _i++) {
            var value = _a[_i];
            var startOffset = (value.byteOffset / this.privFormat.avgBytesPerSec) * 1e7;
            var endOffset = startOffset + ((value.chunk.buffer.byteLength / this.privFormat.avgBytesPerSec) * 1e7);
            if (offset >= startOffset && offset <= endOffset) {
                return value.chunk.timeReceived;
            }
        }
        return 0;
    };
    return ReplayableAudioNode;
}());
exports.ReplayableAudioNode = ReplayableAudioNode;
// Primary use of this class is to help debugging problems with the replay
// code. If the memory cost of alloc / dealloc gets too much, drop it and just use
// the ArrayBuffer directly.
// tslint:disable-next-line:max-classes-per-file
var BufferEntry = /** @class */ (function () {
    function BufferEntry(chunk, serial, byteOffset) {
        this.chunk = chunk;
        this.serial = serial;
        this.byteOffset = byteOffset;
    }
    return BufferEntry;
}());

//# sourceMappingURL=ReplayableAudioNode.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketConnection.js":
/*!**************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketConnection.js ***!
  \**************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var WebsocketMessageAdapter_1 = __webpack_require__(/*! ./WebsocketMessageAdapter */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketMessageAdapter.js");
var WebsocketConnection = /** @class */ (function () {
    function WebsocketConnection(uri, queryParameters, headers, messageFormatter, proxyInfo, connectionId) {
        var _this = this;
        this.privIsDisposed = false;
        this.dispose = function () {
            _this.privIsDisposed = true;
            if (_this.privConnectionMessageAdapter) {
                _this.privConnectionMessageAdapter.close();
            }
        };
        this.isDisposed = function () {
            return _this.privIsDisposed;
        };
        this.state = function () {
            return _this.privConnectionMessageAdapter.state;
        };
        this.open = function () {
            return _this.privConnectionMessageAdapter.open();
        };
        this.send = function (message) {
            return _this.privConnectionMessageAdapter.send(message);
        };
        this.read = function () {
            return _this.privConnectionMessageAdapter.read();
        };
        if (!uri) {
            throw new Exports_1.ArgumentNullError("uri");
        }
        if (!messageFormatter) {
            throw new Exports_1.ArgumentNullError("messageFormatter");
        }
        this.privMessageFormatter = messageFormatter;
        var queryParams = "";
        var i = 0;
        if (queryParameters) {
            for (var paramName in queryParameters) {
                if (paramName) {
                    queryParams += ((i === 0) && (uri.indexOf("?") === -1)) ? "?" : "&";
                    var val = encodeURIComponent(queryParameters[paramName]);
                    queryParams += paramName + "=" + val;
                    i++;
                }
            }
        }
        if (headers) {
            for (var headerName in headers) {
                if (headerName) {
                    queryParams += i === 0 ? "?" : "&";
                    var val = encodeURIComponent(headers[headerName]);
                    queryParams += headerName + "=" + val;
                    i++;
                }
            }
        }
        this.privUri = uri + queryParams;
        this.privId = connectionId ? connectionId : Exports_1.createNoDashGuid();
        this.privConnectionMessageAdapter = new WebsocketMessageAdapter_1.WebsocketMessageAdapter(this.privUri, this.id, this.privMessageFormatter, proxyInfo);
    }
    Object.defineProperty(WebsocketConnection.prototype, "id", {
        get: function () {
            return this.privId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WebsocketConnection.prototype, "events", {
        get: function () {
            return this.privConnectionMessageAdapter.events;
        },
        enumerable: true,
        configurable: true
    });
    return WebsocketConnection;
}());
exports.WebsocketConnection = WebsocketConnection;

//# sourceMappingURL=WebsocketConnection.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketMessageAdapter.js":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketMessageAdapter.js ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(Buffer) {
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var HttpsProxyAgent = __webpack_require__(/*! https-proxy-agent */ 3);
var ws = __webpack_require__(/*! ws */ 4);
var ocsp = __webpack_require__(/*! ../../external/ocsp/ocsp */ 5);
var WebsocketMessageAdapter = /** @class */ (function () {
    function WebsocketMessageAdapter(uri, connectionId, messageFormatter, proxyInfo) {
        var _this = this;
        this.open = function () {
            if (_this.privConnectionState === Exports_1.ConnectionState.Disconnected) {
                return Exports_1.PromiseHelper.fromError("Cannot open a connection that is in " + _this.privConnectionState + " state");
            }
            if (_this.privConnectionEstablishDeferral) {
                return _this.privConnectionEstablishDeferral.promise();
            }
            _this.privConnectionEstablishDeferral = new Exports_1.Deferred();
            _this.privCertificateValidatedDeferral = new Exports_1.Deferred();
            _this.privConnectionState = Exports_1.ConnectionState.Connecting;
            try {
                if (typeof WebSocket !== "undefined" && !WebsocketMessageAdapter.forceNpmWebSocket) {
                    // Browser handles cert checks.
                    _this.privCertificateValidatedDeferral.resolve(true);
                    _this.privWebsocketClient = new WebSocket(_this.privUri);
                }
                else {
                    if (_this.proxyInfo !== undefined &&
                        _this.proxyInfo.HostName !== undefined &&
                        _this.proxyInfo.Port > 0) {
                        var httpProxyOptions = {
                            host: _this.proxyInfo.HostName,
                            port: _this.proxyInfo.Port,
                        };
                        if (undefined !== _this.proxyInfo.UserName) {
                            httpProxyOptions.headers = {
                                "Proxy-Authentication": "Basic " + new Buffer(_this.proxyInfo.UserName + ":" + (_this.proxyInfo.Password === undefined) ? "" : _this.proxyInfo.Password).toString("base64"),
                                "requestOCSP": "true",
                            };
                        }
                        var httpProxyAgent = new HttpsProxyAgent(httpProxyOptions);
                        var httpsOptions_1 = { agent: httpProxyAgent };
                        _this.privWebsocketClient = new ws(_this.privUri, httpsOptions_1);
                        // Register to be notified when WebSocket upgrade happens so we can check the validity of the
                        // Certificate.
                        _this.privWebsocketClient.addListener("upgrade", function (e) {
                            var tlsSocket = e.socket;
                            var peer = tlsSocket.getPeerCertificate(true);
                            // Cork the socket until we know if the cert is good.
                            tlsSocket.cork();
                            ocsp.check({
                                cert: peer.raw,
                                httpOptions: httpsOptions_1,
                                issuer: peer.issuerCertificate.raw,
                            }, function (error, res) {
                                if (error) {
                                    _this.privCertificateValidatedDeferral.reject(error.message);
                                    tlsSocket.destroy(error);
                                }
                                else {
                                    _this.privCertificateValidatedDeferral.resolve(true);
                                    tlsSocket.uncork();
                                }
                            });
                        });
                    }
                    else {
                        // The ocsp library will handle validation for us and fail the connection if needed.
                        _this.privCertificateValidatedDeferral.resolve(true);
                        var ocspAgent = new ocsp.Agent({});
                        var options = { agent: ocspAgent };
                        _this.privWebsocketClient = new ws(_this.privUri, options);
                    }
                }
                _this.privWebsocketClient.binaryType = "arraybuffer";
                _this.privReceivingMessageQueue = new Exports_1.Queue();
                _this.privDisconnectDeferral = new Exports_1.Deferred();
                _this.privSendMessageQueue = new Exports_1.Queue();
                _this.processSendQueue();
            }
            catch (error) {
                _this.privConnectionEstablishDeferral.resolve(new Exports_1.ConnectionOpenResponse(500, error));
                return _this.privConnectionEstablishDeferral.promise();
            }
            _this.onEvent(new Exports_1.ConnectionStartEvent(_this.privConnectionId, _this.privUri));
            _this.privWebsocketClient.onopen = function (e) {
                _this.privCertificateValidatedDeferral.promise().on(function () {
                    _this.privConnectionState = Exports_1.ConnectionState.Connected;
                    _this.onEvent(new Exports_1.ConnectionEstablishedEvent(_this.privConnectionId));
                    _this.privConnectionEstablishDeferral.resolve(new Exports_1.ConnectionOpenResponse(200, ""));
                }, function (error) {
                    _this.privConnectionEstablishDeferral.reject(error);
                });
            };
            _this.privWebsocketClient.onerror = function (e) {
                // TODO: Understand what this is error is. Will we still get onClose ?
                if (_this.privConnectionState !== Exports_1.ConnectionState.Connecting) {
                    // TODO: Is this required ?
                    // this.onEvent(new ConnectionErrorEvent(errorMsg, connectionId));
                }
            };
            _this.privWebsocketClient.onclose = function (e) {
                if (_this.privConnectionState === Exports_1.ConnectionState.Connecting) {
                    _this.privConnectionState = Exports_1.ConnectionState.Disconnected;
                    // this.onEvent(new ConnectionEstablishErrorEvent(this.connectionId, e.code, e.reason));
                    _this.privConnectionEstablishDeferral.resolve(new Exports_1.ConnectionOpenResponse(e.code, e.reason));
                }
                else {
                    _this.onEvent(new Exports_1.ConnectionClosedEvent(_this.privConnectionId, e.code, e.reason));
                }
                _this.onClose(e.code, e.reason);
            };
            _this.privWebsocketClient.onmessage = function (e) {
                var networkReceivedTime = new Date().toISOString();
                if (_this.privConnectionState === Exports_1.ConnectionState.Connected) {
                    var deferred_1 = new Exports_1.Deferred();
                    // let id = ++this.idCounter;
                    _this.privReceivingMessageQueue.enqueueFromPromise(deferred_1.promise());
                    if (e.data instanceof ArrayBuffer) {
                        var rawMessage = new Exports_1.RawWebsocketMessage(Exports_1.MessageType.Binary, e.data);
                        _this.privMessageFormatter
                            .toConnectionMessage(rawMessage)
                            .on(function (connectionMessage) {
                            _this.onEvent(new Exports_1.ConnectionMessageReceivedEvent(_this.privConnectionId, networkReceivedTime, connectionMessage));
                            deferred_1.resolve(connectionMessage);
                        }, function (error) {
                            // TODO: Events for these ?
                            deferred_1.reject("Invalid binary message format. Error: " + error);
                        });
                    }
                    else {
                        var rawMessage = new Exports_1.RawWebsocketMessage(Exports_1.MessageType.Text, e.data);
                        _this.privMessageFormatter
                            .toConnectionMessage(rawMessage)
                            .on(function (connectionMessage) {
                            _this.onEvent(new Exports_1.ConnectionMessageReceivedEvent(_this.privConnectionId, networkReceivedTime, connectionMessage));
                            deferred_1.resolve(connectionMessage);
                        }, function (error) {
                            // TODO: Events for these ?
                            deferred_1.reject("Invalid text message format. Error: " + error);
                        });
                    }
                }
            };
            return _this.privConnectionEstablishDeferral.promise();
        };
        this.send = function (message) {
            if (_this.privConnectionState !== Exports_1.ConnectionState.Connected) {
                return Exports_1.PromiseHelper.fromError("Cannot send on connection that is in " + _this.privConnectionState + " state");
            }
            var messageSendStatusDeferral = new Exports_1.Deferred();
            var messageSendDeferral = new Exports_1.Deferred();
            _this.privSendMessageQueue.enqueueFromPromise(messageSendDeferral.promise());
            _this.privMessageFormatter
                .fromConnectionMessage(message)
                .on(function (rawMessage) {
                messageSendDeferral.resolve({
                    Message: message,
                    RawWebsocketMessage: rawMessage,
                    sendStatusDeferral: messageSendStatusDeferral,
                });
            }, function (error) {
                messageSendDeferral.reject("Error formatting the message. " + error);
            });
            return messageSendStatusDeferral.promise();
        };
        this.read = function () {
            if (_this.privConnectionState !== Exports_1.ConnectionState.Connected) {
                return Exports_1.PromiseHelper.fromError("Cannot read on connection that is in " + _this.privConnectionState + " state");
            }
            return _this.privReceivingMessageQueue.dequeue();
        };
        this.close = function (reason) {
            if (_this.privWebsocketClient) {
                if (_this.privConnectionState !== Exports_1.ConnectionState.Disconnected) {
                    _this.privWebsocketClient.close(1000, reason ? reason : "Normal closure by client");
                }
            }
            else {
                var deferral = new Exports_1.Deferred();
                deferral.resolve(true);
                return deferral.promise();
            }
            return _this.privDisconnectDeferral.promise();
        };
        this.sendRawMessage = function (sendItem) {
            try {
                // indicates we are draining the queue and it came with no message;
                if (!sendItem) {
                    return Exports_1.PromiseHelper.fromResult(true);
                }
                _this.onEvent(new Exports_1.ConnectionMessageSentEvent(_this.privConnectionId, new Date().toISOString(), sendItem.Message));
                _this.privWebsocketClient.send(sendItem.RawWebsocketMessage.payload);
                return Exports_1.PromiseHelper.fromResult(true);
            }
            catch (e) {
                return Exports_1.PromiseHelper.fromError("websocket send error: " + e);
            }
        };
        this.onClose = function (code, reason) {
            var closeReason = "Connection closed. " + code + ": " + reason;
            _this.privConnectionState = Exports_1.ConnectionState.Disconnected;
            _this.privDisconnectDeferral.resolve(true);
            _this.privReceivingMessageQueue.dispose(reason);
            _this.privReceivingMessageQueue.drainAndDispose(function (pendingReceiveItem) {
                // TODO: Events for these ?
                // Logger.instance.onEvent(new LoggingEvent(LogType.Warning, null, `Failed to process received message. Reason: ${closeReason}, Message: ${JSON.stringify(pendingReceiveItem)}`));
            }, closeReason);
            _this.privSendMessageQueue.drainAndDispose(function (pendingSendItem) {
                pendingSendItem.sendStatusDeferral.reject(closeReason);
            }, closeReason);
        };
        this.processSendQueue = function () {
            _this.privSendMessageQueue
                .dequeue()
                .on(function (sendItem) {
                // indicates we are draining the queue and it came with no message;
                if (!sendItem) {
                    return;
                }
                _this.sendRawMessage(sendItem)
                    .on(function (result) {
                    sendItem.sendStatusDeferral.resolve(result);
                    _this.processSendQueue();
                }, function (sendError) {
                    sendItem.sendStatusDeferral.reject(sendError);
                    _this.processSendQueue();
                });
            }, function (error) {
                // do nothing
            });
        };
        this.onEvent = function (event) {
            _this.privConnectionEvents.onEvent(event);
            Exports_1.Events.instance.onEvent(event);
        };
        if (!uri) {
            throw new Exports_1.ArgumentNullError("uri");
        }
        if (!messageFormatter) {
            throw new Exports_1.ArgumentNullError("messageFormatter");
        }
        this.proxyInfo = proxyInfo;
        this.privConnectionEvents = new Exports_1.EventSource();
        this.privConnectionId = connectionId;
        this.privMessageFormatter = messageFormatter;
        this.privConnectionState = Exports_1.ConnectionState.None;
        this.privUri = uri;
    }
    Object.defineProperty(WebsocketMessageAdapter.prototype, "state", {
        get: function () {
            return this.privConnectionState;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WebsocketMessageAdapter.prototype, "events", {
        get: function () {
            return this.privConnectionEvents;
        },
        enumerable: true,
        configurable: true
    });
    WebsocketMessageAdapter.forceNpmWebSocket = false;
    return WebsocketMessageAdapter;
}());
exports.WebsocketMessageAdapter = WebsocketMessageAdapter;

//# sourceMappingURL=WebsocketMessageAdapter.js.map

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../../../buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/AddedLmIntent.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/AddedLmIntent.js ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @class AddedLmIntent
 */
// tslint:disable-next-line:max-classes-per-file
var AddedLmIntent = /** @class */ (function () {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param modelImpl - The model.
     * @param intentName - The intent name.
     */
    function AddedLmIntent(modelImpl, intentName) {
        this.modelImpl = modelImpl;
        this.intentName = intentName;
    }
    return AddedLmIntent;
}());
exports.AddedLmIntent = AddedLmIntent;

//# sourceMappingURL=AddedLmIntent.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/CognitiveSubscriptionKeyAuthentication.js":
/*!********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/CognitiveSubscriptionKeyAuthentication.js ***!
  \********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var IAuthentication_1 = __webpack_require__(/*! ./IAuthentication */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IAuthentication.js");
var AuthHeader = "Ocp-Apim-Subscription-Key";
/**
 * @class
 */
var CognitiveSubscriptionKeyAuthentication = /** @class */ (function () {
    /**
     * Creates and initializes an instance of the CognitiveSubscriptionKeyAuthentication class.
     * @constructor
     * @param {string} subscriptionKey - The subscription key
     */
    function CognitiveSubscriptionKeyAuthentication(subscriptionKey) {
        var _this = this;
        /**
         * Fetches the subscription key.
         * @member
         * @function
         * @public
         * @param {string} authFetchEventId - The id to fetch.
         */
        this.fetch = function (authFetchEventId) {
            return Exports_1.PromiseHelper.fromResult(_this.privAuthInfo);
        };
        /**
         * Fetches the subscription key.
         * @member
         * @function
         * @public
         * @param {string} authFetchEventId - The id to fetch.
         */
        this.fetchOnExpiry = function (authFetchEventId) {
            return Exports_1.PromiseHelper.fromResult(_this.privAuthInfo);
        };
        if (!subscriptionKey) {
            throw new Exports_1.ArgumentNullError("subscriptionKey");
        }
        this.privAuthInfo = new IAuthentication_1.AuthInfo(AuthHeader, subscriptionKey);
    }
    return CognitiveSubscriptionKeyAuthentication;
}());
exports.CognitiveSubscriptionKeyAuthentication = CognitiveSubscriptionKeyAuthentication;

//# sourceMappingURL=CognitiveSubscriptionKeyAuthentication.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/CognitiveTokenAuthentication.js":
/*!**********************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/CognitiveTokenAuthentication.js ***!
  \**********************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var IAuthentication_1 = __webpack_require__(/*! ./IAuthentication */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IAuthentication.js");
var AuthHeader = "Authorization";
var CognitiveTokenAuthentication = /** @class */ (function () {
    function CognitiveTokenAuthentication(fetchCallback, fetchOnExpiryCallback) {
        var _this = this;
        this.fetch = function (authFetchEventId) {
            return _this.privFetchCallback(authFetchEventId).onSuccessContinueWith(function (token) { return new IAuthentication_1.AuthInfo(AuthHeader, token); });
        };
        this.fetchOnExpiry = function (authFetchEventId) {
            return _this.privFetchOnExpiryCallback(authFetchEventId).onSuccessContinueWith(function (token) { return new IAuthentication_1.AuthInfo(AuthHeader, token); });
        };
        if (!fetchCallback) {
            throw new Exports_1.ArgumentNullError("fetchCallback");
        }
        if (!fetchOnExpiryCallback) {
            throw new Exports_1.ArgumentNullError("fetchOnExpiryCallback");
        }
        this.privFetchCallback = fetchCallback;
        this.privFetchOnExpiryCallback = fetchOnExpiryCallback;
    }
    return CognitiveTokenAuthentication;
}());
exports.CognitiveTokenAuthentication = CognitiveTokenAuthentication;

//# sourceMappingURL=CognitiveTokenAuthentication.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DynamicGrammarBuilder.js":
/*!***************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DynamicGrammarBuilder.js ***!
  \***************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Responsible for building the object to be sent to the speech service to support dynamic grammars.
 * @class DynamicGrammarBuilder
 */
var DynamicGrammarBuilder = /** @class */ (function () {
    function DynamicGrammarBuilder() {
    }
    // Adds one more reference phrases to the dynamic grammar to send.
    // All added phrases are generic phrases.
    DynamicGrammarBuilder.prototype.addPhrase = function (phrase) {
        if (!this.privPhrases) {
            this.privPhrases = [];
        }
        if (phrase instanceof Array) {
            this.privPhrases = this.privPhrases.concat(phrase);
        }
        else {
            this.privPhrases.push(phrase);
        }
    };
    // Clears all phrases stored in the current object.
    DynamicGrammarBuilder.prototype.clearPhrases = function () {
        this.privPhrases = undefined;
    };
    // Adds one or more reference grammars to the current grammar.
    DynamicGrammarBuilder.prototype.addReferenceGrammar = function (grammar) {
        if (!this.privGrammars) {
            this.privGrammars = [];
        }
        if (grammar instanceof Array) {
            this.privGrammars = this.privGrammars.concat(grammar);
        }
        else {
            this.privGrammars.push(grammar);
        }
    };
    // clears all grammars stored on the recognizer.
    DynamicGrammarBuilder.prototype.clearGrammars = function () {
        this.privGrammars = undefined;
    };
    // Generates an object that represents the dynamic grammar used by the Speech Service.
    // This is done by building an object with the correct layout based on the phrases and reference grammars added to this instance
    // of a DynamicGrammarBuilder
    DynamicGrammarBuilder.prototype.generateGrammarObject = function () {
        if (this.privGrammars === undefined && this.privPhrases === undefined) {
            return undefined;
        }
        var retObj = {};
        retObj.ReferenceGrammars = this.privGrammars;
        if (undefined !== this.privPhrases && 0 !== this.privPhrases.length) {
            var retPhrases_1 = [];
            this.privPhrases.forEach(function (value, index, array) {
                retPhrases_1.push({
                    Text: value,
                });
            });
            retObj.Groups = [{ Type: "Generic", Items: retPhrases_1 }];
        }
        return retObj;
    };
    return DynamicGrammarBuilder;
}());
exports.DynamicGrammarBuilder = DynamicGrammarBuilder;

//# sourceMappingURL=DynamicGrammarBuilder.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/EnumTranslation.js":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/EnumTranslation.js ***!
  \*********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var Exports_2 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var EnumTranslation = /** @class */ (function () {
    function EnumTranslation() {
    }
    EnumTranslation.implTranslateRecognitionResult = function (recognitionStatus) {
        var reason = Exports_1.ResultReason.Canceled;
        switch (recognitionStatus) {
            case Exports_2.RecognitionStatus.Success:
                reason = Exports_1.ResultReason.RecognizedSpeech;
                break;
            case Exports_2.RecognitionStatus.NoMatch:
            case Exports_2.RecognitionStatus.InitialSilenceTimeout:
            case Exports_2.RecognitionStatus.BabbleTimeout:
            case Exports_2.RecognitionStatus.EndOfDictation:
                reason = Exports_1.ResultReason.NoMatch;
                break;
            case Exports_2.RecognitionStatus.Error:
            default:
                reason = Exports_1.ResultReason.Canceled;
                break;
        }
        return reason;
    };
    EnumTranslation.implTranslateCancelResult = function (recognitionStatus) {
        var reason = Exports_1.CancellationReason.EndOfStream;
        switch (recognitionStatus) {
            case Exports_2.RecognitionStatus.Success:
            case Exports_2.RecognitionStatus.EndOfDictation:
            case Exports_2.RecognitionStatus.NoMatch:
                reason = Exports_1.CancellationReason.EndOfStream;
                break;
            case Exports_2.RecognitionStatus.InitialSilenceTimeout:
            case Exports_2.RecognitionStatus.BabbleTimeout:
            case Exports_2.RecognitionStatus.Error:
            default:
                reason = Exports_1.CancellationReason.Error;
                break;
        }
        return reason;
    };
    return EnumTranslation;
}());
exports.EnumTranslation = EnumTranslation;

//# sourceMappingURL=EnumTranslation.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
// Make sure not to export internal modules.
//
__export(__webpack_require__(/*! ./CognitiveSubscriptionKeyAuthentication */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/CognitiveSubscriptionKeyAuthentication.js"));
__export(__webpack_require__(/*! ./CognitiveTokenAuthentication */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/CognitiveTokenAuthentication.js"));
__export(__webpack_require__(/*! ./IAuthentication */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IAuthentication.js"));
__export(__webpack_require__(/*! ./IntentConnectionFactory */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IntentConnectionFactory.js"));
__export(__webpack_require__(/*! ./RecognitionEvents */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognitionEvents.js"));
__export(__webpack_require__(/*! ./ServiceRecognizerBase */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceRecognizerBase.js"));
__export(__webpack_require__(/*! ./RecognizerConfig */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognizerConfig.js"));
__export(__webpack_require__(/*! ./WebsocketMessageFormatter */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/WebsocketMessageFormatter.js"));
__export(__webpack_require__(/*! ./SpeechConnectionFactory */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionFactory.js"));
__export(__webpack_require__(/*! ./TranslationConnectionFactory */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationConnectionFactory.js"));
__export(__webpack_require__(/*! ./EnumTranslation */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/EnumTranslation.js"));
__export(__webpack_require__(/*! ./ServiceMessages/Enums */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/Enums.js"));
__export(__webpack_require__(/*! ./ServiceMessages/TranslationSynthesisEnd */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js"));
__export(__webpack_require__(/*! ./ServiceMessages/TranslationHypothesis */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationHypothesis.js"));
__export(__webpack_require__(/*! ./ServiceMessages/TranslationPhrase */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationPhrase.js"));
__export(__webpack_require__(/*! ./TranslationServiceRecognizer */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationServiceRecognizer.js"));
__export(__webpack_require__(/*! ./ServiceMessages/SpeechDetected */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechDetected.js"));
__export(__webpack_require__(/*! ./ServiceMessages/SpeechHypothesis */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechHypothesis.js"));
__export(__webpack_require__(/*! ./SpeechServiceRecognizer */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechServiceRecognizer.js"));
__export(__webpack_require__(/*! ./ServiceMessages/DetailedSpeechPhrase */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js"));
__export(__webpack_require__(/*! ./ServiceMessages/SimpleSpeechPhrase */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js"));
__export(__webpack_require__(/*! ./AddedLmIntent */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/AddedLmIntent.js"));
__export(__webpack_require__(/*! ./IntentServiceRecognizer */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IntentServiceRecognizer.js"));
__export(__webpack_require__(/*! ./ServiceMessages/IntentResponse */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/IntentResponse.js"));
__export(__webpack_require__(/*! ./RequestSession */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RequestSession.js"));
__export(__webpack_require__(/*! ./SpeechContext */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechContext.js"));
__export(__webpack_require__(/*! ./DynamicGrammarBuilder */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DynamicGrammarBuilder.js"));
exports.OutputFormatPropertyName = "OutputFormat";
exports.CancellationErrorCodePropertyName = "CancellationErrorCode";

//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IAuthentication.js":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IAuthentication.js ***!
  \*********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var AuthInfo = /** @class */ (function () {
    function AuthInfo(headerName, token) {
        this.privHeaderName = headerName;
        this.privToken = token;
    }
    Object.defineProperty(AuthInfo.prototype, "headerName", {
        get: function () {
            return this.privHeaderName;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AuthInfo.prototype, "token", {
        get: function () {
            return this.privToken;
        },
        enumerable: true,
        configurable: true
    });
    return AuthInfo;
}());
exports.AuthInfo = AuthInfo;

//# sourceMappingURL=IAuthentication.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IntentConnectionFactory.js":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IntentConnectionFactory.js ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js");
var Exports_2 = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var Exports_3 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var TestHooksParamName = "testhooks";
var ConnectionIdHeader = "X-ConnectionId";
var IntentConnectionFactory = /** @class */ (function () {
    function IntentConnectionFactory() {
        var _this = this;
        this.create = function (config, authInfo, connectionId) {
            var endpoint = config.parameters.getProperty(Exports_2.PropertyId.SpeechServiceConnection_Endpoint);
            if (!endpoint) {
                var region = config.parameters.getProperty(Exports_2.PropertyId.SpeechServiceConnection_IntentRegion);
                endpoint = "wss://speech.platform.bing.com/speech/" + _this.getSpeechRegionFromIntentRegion(region) + "/recognition/interactive/cognitiveservices/v1";
            }
            var queryParams = {
                format: "simple",
                language: config.parameters.getProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage),
            };
            var headers = {};
            headers[authInfo.headerName] = authInfo.token;
            headers[ConnectionIdHeader] = connectionId;
            return new Exports_1.WebsocketConnection(endpoint, queryParams, headers, new Exports_3.WebsocketMessageFormatter(), Exports_1.ProxyInfo.fromRecognizerConfig(config), connectionId);
        };
    }
    IntentConnectionFactory.prototype.getSpeechRegionFromIntentRegion = function (intentRegion) {
        switch (intentRegion) {
            case "West US":
            case "US West":
            case "westus":
                return "uswest";
            case "West US 2":
            case "US West 2":
            case "westus2":
                return "uswest2";
            case "South Central US":
            case "US South Central":
            case "southcentralus":
                return "ussouthcentral";
            case "West Central US":
            case "US West Central":
            case "westcentralus":
                return "uswestcentral";
            case "East US":
            case "US East":
            case "eastus":
                return "useast";
            case "East US 2":
            case "US East 2":
            case "eastus2":
                return "useast2";
            case "West Europe":
            case "Europe West":
            case "westeurope":
                return "europewest";
            case "North Europe":
            case "Europe North":
            case "northeurope":
                return "europenorth";
            case "Brazil South":
            case "South Brazil":
            case "southbrazil":
                return "brazilsouth";
            case "Australia East":
            case "East Australia":
            case "eastaustralia":
                return "australiaeast";
            case "Southeast Asia":
            case "Asia Southeast":
            case "southeastasia":
                return "asiasoutheast";
            case "East Asia":
            case "Asia East":
            case "eastasia":
                return "asiaeast";
            default:
                return intentRegion;
        }
    };
    return IntentConnectionFactory;
}());
exports.IntentConnectionFactory = IntentConnectionFactory;

//# sourceMappingURL=IntentConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IntentServiceRecognizer.js":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IntentServiceRecognizer.js ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var Exports_2 = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var Exports_3 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
// tslint:disable-next-line:max-classes-per-file
var IntentServiceRecognizer = /** @class */ (function (_super) {
    __extends(IntentServiceRecognizer, _super);
    function IntentServiceRecognizer(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        var _this = _super.call(this, authentication, connectionFactory, audioSource, recognizerConfig, recognizer) || this;
        _this.privIntentRecognizer = recognizer;
        _this.privIntentDataSent = false;
        return _this;
    }
    IntentServiceRecognizer.prototype.setIntents = function (addedIntents, umbrellaIntent) {
        this.privAddedLmIntents = addedIntents;
        this.privUmbrellaIntent = umbrellaIntent;
        this.privIntentDataSent = true;
    };
    IntentServiceRecognizer.prototype.processTypeSpecificMessages = function (connectionMessage, successCallback, errorCallBack) {
        var _this = this;
        var result;
        var ev;
        var resultProps = new Exports_2.PropertyCollection();
        if (connectionMessage.messageType === Exports_1.MessageType.Text) {
            resultProps.setProperty(Exports_2.PropertyId.SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        switch (connectionMessage.path.toLowerCase()) {
            case "speech.hypothesis":
                var speechHypothesis = Exports_3.SpeechHypothesis.fromJSON(connectionMessage.textBody);
                result = new Exports_2.IntentRecognitionResult(undefined, this.privRequestSession.requestId, Exports_2.ResultReason.RecognizingIntent, speechHypothesis.Text, speechHypothesis.Duration, speechHypothesis.Offset + this.privRequestSession.currentTurnAudioOffset, undefined, connectionMessage.textBody, resultProps);
                this.privRequestSession.onHypothesis(result.offset);
                ev = new Exports_2.IntentRecognitionEventArgs(result, speechHypothesis.Offset + this.privRequestSession.currentTurnAudioOffset, this.privRequestSession.sessionId);
                if (!!this.privIntentRecognizer.recognizing) {
                    try {
                        this.privIntentRecognizer.recognizing(this.privIntentRecognizer, ev);
                        /* tslint:disable:no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            case "speech.phrase":
                var simple = Exports_3.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody);
                result = new Exports_2.IntentRecognitionResult(undefined, this.privRequestSession.requestId, Exports_3.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus), simple.DisplayText, simple.Duration, simple.Offset + this.privRequestSession.currentTurnAudioOffset, undefined, connectionMessage.textBody, resultProps);
                ev = new Exports_2.IntentRecognitionEventArgs(result, result.offset, this.privRequestSession.sessionId);
                var sendEvent = function () {
                    if (!!_this.privIntentRecognizer.recognized) {
                        try {
                            _this.privIntentRecognizer.recognized(_this.privIntentRecognizer, ev);
                            /* tslint:disable:no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    // report result to promise.
                    if (!!successCallback) {
                        try {
                            successCallback(result);
                        }
                        catch (e) {
                            if (!!errorCallBack) {
                                errorCallBack(e);
                            }
                        }
                        // Only invoke the call back once.
                        // and if it's successful don't invoke the
                        // error after that.
                        successCallback = undefined;
                        errorCallBack = undefined;
                    }
                };
                // If intent data was sent, the terminal result for this recognizer is an intent being found.
                // If no intent data was sent, the terminal event is speech recognition being successful.
                if (false === this.privIntentDataSent || Exports_2.ResultReason.NoMatch === ev.result.reason) {
                    // Advance the buffers.
                    this.privRequestSession.onPhraseRecognized(ev.offset + ev.result.duration);
                    sendEvent();
                }
                else {
                    // Squirrel away the args, when the response event arrives it will build upon them
                    // and then return
                    this.privPendingIntentArgs = ev;
                }
                break;
            case "response":
                // Response from LUIS
                ev = this.privPendingIntentArgs;
                this.privPendingIntentArgs = undefined;
                if (undefined === ev) {
                    if ("" === connectionMessage.textBody) {
                        // This condition happens if there is nothing but silence in the
                        // audio sent to the service.
                        return;
                    }
                    // Odd... Not sure this can happen
                    ev = new Exports_2.IntentRecognitionEventArgs(new Exports_2.IntentRecognitionResult(), 0 /*TODO*/, this.privRequestSession.sessionId);
                }
                var intentResponse = Exports_3.IntentResponse.fromJSON(connectionMessage.textBody);
                // If LUIS didn't return anything, send the existing event, else
                // modify it to show the match.
                // See if the intent found is in the list of intents asked for.
                var addedIntent = this.privAddedLmIntents[intentResponse.topScoringIntent.intent];
                if (this.privUmbrellaIntent !== undefined) {
                    addedIntent = this.privUmbrellaIntent;
                }
                if (null !== intentResponse && addedIntent !== undefined) {
                    var intentId = addedIntent.intentName === undefined ? intentResponse.topScoringIntent.intent : addedIntent.intentName;
                    var reason = ev.result.reason;
                    if (undefined !== intentId) {
                        reason = Exports_2.ResultReason.RecognizedIntent;
                    }
                    // make sure, properties is set.
                    var properties = (undefined !== ev.result.properties) ?
                        ev.result.properties : new Exports_2.PropertyCollection();
                    properties.setProperty(Exports_2.PropertyId.LanguageUnderstandingServiceResponse_JsonResult, connectionMessage.textBody);
                    ev = new Exports_2.IntentRecognitionEventArgs(new Exports_2.IntentRecognitionResult(intentId, ev.result.resultId, reason, ev.result.text, ev.result.duration, ev.result.offset, ev.result.errorDetails, ev.result.json, properties), ev.offset, ev.sessionId);
                }
                this.privRequestSession.onPhraseRecognized(ev.offset + ev.result.duration);
                if (!!this.privIntentRecognizer.recognized) {
                    try {
                        this.privIntentRecognizer.recognized(this.privIntentRecognizer, ev);
                        /* tslint:disable:no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                // report result to promise.
                if (!!successCallback) {
                    try {
                        successCallback(ev.result);
                    }
                    catch (e) {
                        if (!!errorCallBack) {
                            errorCallBack(e);
                        }
                    }
                    // Only invoke the call back once.
                    // and if it's successful don't invoke the
                    // error after that.
                    successCallback = undefined;
                    errorCallBack = undefined;
                }
                break;
            default:
                break;
        }
    };
    // Cancels recognition.
    IntentServiceRecognizer.prototype.cancelRecognition = function (sessionId, requestId, cancellationReason, errorCode, error, cancelRecoCallback) {
        if (!!this.privIntentRecognizer.canceled) {
            var properties = new Exports_2.PropertyCollection();
            properties.setProperty(Exports_3.CancellationErrorCodePropertyName, Exports_2.CancellationErrorCode[errorCode]);
            var cancelEvent = new Exports_2.IntentRecognitionCanceledEventArgs(cancellationReason, error, errorCode, undefined, undefined, sessionId);
            try {
                this.privIntentRecognizer.canceled(this.privIntentRecognizer, cancelEvent);
                /* tslint:disable:no-empty */
            }
            catch (_a) { }
            if (!!cancelRecoCallback) {
                var result = new Exports_2.IntentRecognitionResult(undefined, // Intent Id
                requestId, Exports_2.ResultReason.Canceled, undefined, // Text
                undefined, // Druation
                undefined, // Offset
                error, undefined, // Json
                properties);
                try {
                    cancelRecoCallback(result);
                    /* tslint:disable:no-empty */
                }
                catch (_b) { }
            }
        }
    };
    return IntentServiceRecognizer;
}(Exports_3.ServiceRecognizerBase));
exports.IntentServiceRecognizer = IntentServiceRecognizer;

//# sourceMappingURL=IntentServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js":
/*!*************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js ***!
  \*************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var QueryParameterNames = /** @class */ (function () {
    function QueryParameterNames() {
    }
    Object.defineProperty(QueryParameterNames, "TestHooksParamName", {
        get: function () {
            return "testhooks";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryParameterNames, "ConnectionIdHeader", {
        get: function () {
            return "X-ConnectionId";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryParameterNames, "DeploymentIdParamName", {
        get: function () {
            return "cid";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryParameterNames, "FormatParamName", {
        get: function () {
            return "format";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryParameterNames, "LanguageParamName", {
        get: function () {
            return "language";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryParameterNames, "TranslationFromParamName", {
        get: function () {
            return "from";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryParameterNames, "TranslationToParamName", {
        get: function () {
            return "to";
        },
        enumerable: true,
        configurable: true
    });
    return QueryParameterNames;
}());
exports.QueryParameterNames = QueryParameterNames;

//# sourceMappingURL=QueryParameterNames.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognitionEvents.js":
/*!***********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognitionEvents.js ***!
  \***********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var SpeechRecognitionEvent = /** @class */ (function (_super) {
    __extends(SpeechRecognitionEvent, _super);
    function SpeechRecognitionEvent(eventName, requestId, sessionId, eventType) {
        if (eventType === void 0) { eventType = Exports_1.EventType.Info; }
        var _this = _super.call(this, eventName, eventType) || this;
        _this.privRequestId = requestId;
        _this.privSessionId = sessionId;
        return _this;
    }
    Object.defineProperty(SpeechRecognitionEvent.prototype, "requestId", {
        get: function () {
            return this.privRequestId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechRecognitionEvent.prototype, "sessionId", {
        get: function () {
            return this.privSessionId;
        },
        enumerable: true,
        configurable: true
    });
    return SpeechRecognitionEvent;
}(Exports_1.PlatformEvent));
exports.SpeechRecognitionEvent = SpeechRecognitionEvent;
// tslint:disable-next-line:max-classes-per-file
var RecognitionTriggeredEvent = /** @class */ (function (_super) {
    __extends(RecognitionTriggeredEvent, _super);
    function RecognitionTriggeredEvent(requestId, sessionId, audioSourceId, audioNodeId) {
        var _this = _super.call(this, "RecognitionTriggeredEvent", requestId, sessionId) || this;
        _this.privAudioSourceId = audioSourceId;
        _this.privAudioNodeId = audioNodeId;
        return _this;
    }
    Object.defineProperty(RecognitionTriggeredEvent.prototype, "audioSourceId", {
        get: function () {
            return this.privAudioSourceId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionTriggeredEvent.prototype, "audioNodeId", {
        get: function () {
            return this.privAudioNodeId;
        },
        enumerable: true,
        configurable: true
    });
    return RecognitionTriggeredEvent;
}(SpeechRecognitionEvent));
exports.RecognitionTriggeredEvent = RecognitionTriggeredEvent;
// tslint:disable-next-line:max-classes-per-file
var ListeningStartedEvent = /** @class */ (function (_super) {
    __extends(ListeningStartedEvent, _super);
    function ListeningStartedEvent(requestId, sessionId, audioSourceId, audioNodeId) {
        var _this = _super.call(this, "ListeningStartedEvent", requestId, sessionId) || this;
        _this.privAudioSourceId = audioSourceId;
        _this.privAudioNodeId = audioNodeId;
        return _this;
    }
    Object.defineProperty(ListeningStartedEvent.prototype, "audioSourceId", {
        get: function () {
            return this.privAudioSourceId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListeningStartedEvent.prototype, "audioNodeId", {
        get: function () {
            return this.privAudioNodeId;
        },
        enumerable: true,
        configurable: true
    });
    return ListeningStartedEvent;
}(SpeechRecognitionEvent));
exports.ListeningStartedEvent = ListeningStartedEvent;
// tslint:disable-next-line:max-classes-per-file
var ConnectingToServiceEvent = /** @class */ (function (_super) {
    __extends(ConnectingToServiceEvent, _super);
    function ConnectingToServiceEvent(requestId, authFetchEventid, sessionId) {
        var _this = _super.call(this, "ConnectingToServiceEvent", requestId, sessionId) || this;
        _this.privAuthFetchEventid = authFetchEventid;
        return _this;
    }
    Object.defineProperty(ConnectingToServiceEvent.prototype, "authFetchEventid", {
        get: function () {
            return this.privAuthFetchEventid;
        },
        enumerable: true,
        configurable: true
    });
    return ConnectingToServiceEvent;
}(SpeechRecognitionEvent));
exports.ConnectingToServiceEvent = ConnectingToServiceEvent;
// tslint:disable-next-line:max-classes-per-file
var RecognitionStartedEvent = /** @class */ (function (_super) {
    __extends(RecognitionStartedEvent, _super);
    function RecognitionStartedEvent(requestId, audioSourceId, audioNodeId, authFetchEventId, sessionId) {
        var _this = _super.call(this, "RecognitionStartedEvent", requestId, sessionId) || this;
        _this.privAudioSourceId = audioSourceId;
        _this.privAudioNodeId = audioNodeId;
        _this.privAuthFetchEventId = authFetchEventId;
        return _this;
    }
    Object.defineProperty(RecognitionStartedEvent.prototype, "audioSourceId", {
        get: function () {
            return this.privAudioSourceId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionStartedEvent.prototype, "audioNodeId", {
        get: function () {
            return this.privAudioNodeId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionStartedEvent.prototype, "authFetchEventId", {
        get: function () {
            return this.privAuthFetchEventId;
        },
        enumerable: true,
        configurable: true
    });
    return RecognitionStartedEvent;
}(SpeechRecognitionEvent));
exports.RecognitionStartedEvent = RecognitionStartedEvent;
var RecognitionCompletionStatus;
(function (RecognitionCompletionStatus) {
    RecognitionCompletionStatus[RecognitionCompletionStatus["Success"] = 0] = "Success";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AudioSourceError"] = 1] = "AudioSourceError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AudioSourceTimeout"] = 2] = "AudioSourceTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AuthTokenFetchError"] = 3] = "AuthTokenFetchError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AuthTokenFetchTimeout"] = 4] = "AuthTokenFetchTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["UnAuthorized"] = 5] = "UnAuthorized";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ConnectTimeout"] = 6] = "ConnectTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ConnectError"] = 7] = "ConnectError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ClientRecognitionActivityTimeout"] = 8] = "ClientRecognitionActivityTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["UnknownError"] = 9] = "UnknownError";
})(RecognitionCompletionStatus = exports.RecognitionCompletionStatus || (exports.RecognitionCompletionStatus = {}));
// tslint:disable-next-line:max-classes-per-file
var RecognitionEndedEvent = /** @class */ (function (_super) {
    __extends(RecognitionEndedEvent, _super);
    function RecognitionEndedEvent(requestId, audioSourceId, audioNodeId, authFetchEventId, sessionId, serviceTag, status, error) {
        var _this = _super.call(this, "RecognitionEndedEvent", requestId, sessionId, status === RecognitionCompletionStatus.Success ? Exports_1.EventType.Info : Exports_1.EventType.Error) || this;
        _this.privAudioSourceId = audioSourceId;
        _this.privAudioNodeId = audioNodeId;
        _this.privAuthFetchEventId = authFetchEventId;
        _this.privStatus = status;
        _this.privError = error;
        _this.privServiceTag = serviceTag;
        return _this;
    }
    Object.defineProperty(RecognitionEndedEvent.prototype, "audioSourceId", {
        get: function () {
            return this.privAudioSourceId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionEndedEvent.prototype, "audioNodeId", {
        get: function () {
            return this.privAudioNodeId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionEndedEvent.prototype, "authFetchEventId", {
        get: function () {
            return this.privAuthFetchEventId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionEndedEvent.prototype, "serviceTag", {
        get: function () {
            return this.privServiceTag;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionEndedEvent.prototype, "status", {
        get: function () {
            return this.privStatus;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionEndedEvent.prototype, "error", {
        get: function () {
            return this.privError;
        },
        enumerable: true,
        configurable: true
    });
    return RecognitionEndedEvent;
}(SpeechRecognitionEvent));
exports.RecognitionEndedEvent = RecognitionEndedEvent;

//# sourceMappingURL=RecognitionEvents.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognizerConfig.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognizerConfig.js ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var RecognitionMode;
(function (RecognitionMode) {
    RecognitionMode[RecognitionMode["Interactive"] = 0] = "Interactive";
    RecognitionMode[RecognitionMode["Conversation"] = 1] = "Conversation";
    RecognitionMode[RecognitionMode["Dictation"] = 2] = "Dictation";
})(RecognitionMode = exports.RecognitionMode || (exports.RecognitionMode = {}));
var SpeechResultFormat;
(function (SpeechResultFormat) {
    SpeechResultFormat[SpeechResultFormat["Simple"] = 0] = "Simple";
    SpeechResultFormat[SpeechResultFormat["Detailed"] = 1] = "Detailed";
})(SpeechResultFormat = exports.SpeechResultFormat || (exports.SpeechResultFormat = {}));
var RecognizerConfig = /** @class */ (function () {
    function RecognizerConfig(speechServiceConfig, parameters) {
        this.privRecognitionMode = RecognitionMode.Interactive;
        this.privSpeechServiceConfig = speechServiceConfig ? speechServiceConfig : new SpeechServiceConfig(new Context(null));
        this.privParameters = parameters;
    }
    Object.defineProperty(RecognizerConfig.prototype, "parameters", {
        get: function () {
            return this.privParameters;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognizerConfig.prototype, "recognitionMode", {
        get: function () {
            return this.privRecognitionMode;
        },
        set: function (value) {
            this.privRecognitionMode = value;
            this.privRecognitionActivityTimeout = value === RecognitionMode.Interactive ? 8000 : 25000;
            this.privSpeechServiceConfig.Recognition = RecognitionMode[value];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognizerConfig.prototype, "SpeechServiceConfig", {
        get: function () {
            return this.privSpeechServiceConfig;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognizerConfig.prototype, "recognitionActivityTimeout", {
        get: function () {
            return this.privRecognitionActivityTimeout;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognizerConfig.prototype, "isContinuousRecognition", {
        get: function () {
            return this.privRecognitionMode !== RecognitionMode.Interactive;
        },
        enumerable: true,
        configurable: true
    });
    return RecognizerConfig;
}());
exports.RecognizerConfig = RecognizerConfig;
// The config is serialized and sent as the Speech.Config
// tslint:disable-next-line:max-classes-per-file
var SpeechServiceConfig = /** @class */ (function () {
    function SpeechServiceConfig(context) {
        var _this = this;
        this.serialize = function () {
            return JSON.stringify(_this, function (key, value) {
                if (value && typeof value === "object") {
                    var replacement = {};
                    for (var k in value) {
                        if (Object.hasOwnProperty.call(value, k)) {
                            replacement[k && k.charAt(0).toLowerCase() + k.substring(1)] = value[k];
                        }
                    }
                    return replacement;
                }
                return value;
            });
        };
        this.context = context;
    }
    Object.defineProperty(SpeechServiceConfig.prototype, "Context", {
        get: function () {
            return this.context;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechServiceConfig.prototype, "Recognition", {
        get: function () {
            return this.recognition;
        },
        set: function (value) {
            this.recognition = value.toLowerCase();
        },
        enumerable: true,
        configurable: true
    });
    return SpeechServiceConfig;
}());
exports.SpeechServiceConfig = SpeechServiceConfig;
// tslint:disable-next-line:max-classes-per-file
var Context = /** @class */ (function () {
    function Context(os) {
        this.system = new System();
        this.os = os;
    }
    return Context;
}());
exports.Context = Context;
// tslint:disable-next-line:max-classes-per-file
var System = /** @class */ (function () {
    function System() {
        // Note: below will be patched for official builds.
        var SPEECHSDK_CLIENTSDK_VERSION = "1.6.0";
        this.name = "SpeechSDK";
        this.version = SPEECHSDK_CLIENTSDK_VERSION;
        this.build = "JavaScript";
        this.lang = "JavaScript";
    }
    return System;
}());
exports.System = System;
// tslint:disable-next-line:max-classes-per-file
var OS = /** @class */ (function () {
    function OS(platform, name, version) {
        this.platform = platform;
        this.name = name;
        this.version = version;
    }
    return OS;
}());
exports.OS = OS;
// tslint:disable-next-line:max-classes-per-file
var Device = /** @class */ (function () {
    function Device(manufacturer, model, version) {
        this.manufacturer = manufacturer;
        this.model = model;
        this.version = version;
    }
    return Device;
}());
exports.Device = Device;
var connectivity;
(function (connectivity) {
    connectivity["Bluetooth"] = "Bluetooth";
    connectivity["Wired"] = "Wired";
    connectivity["WiFi"] = "WiFi";
    connectivity["Cellular"] = "Cellular";
    connectivity["InBuilt"] = "InBuilt";
    connectivity["Unknown"] = "Unknown";
})(connectivity = exports.connectivity || (exports.connectivity = {}));
var type;
(function (type) {
    type["Phone"] = "Phone";
    type["Speaker"] = "Speaker";
    type["Car"] = "Car";
    type["Headset"] = "Headset";
    type["Thermostat"] = "Thermostat";
    type["Microphones"] = "Microphones";
    type["Deskphone"] = "Deskphone";
    type["RemoteControl"] = "RemoteControl";
    type["Unknown"] = "Unknown";
    type["File"] = "File";
    type["Stream"] = "Stream";
})(type = exports.type || (exports.type = {}));

//# sourceMappingURL=RecognizerConfig.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RequestSession.js":
/*!********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RequestSession.js ***!
  \********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var RecognitionEvents_1 = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognitionEvents.js");
var ServiceTelemetryListener_Internal_1 = __webpack_require__(/*! ./ServiceTelemetryListener.Internal */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceTelemetryListener.Internal.js");
var RequestSession = /** @class */ (function () {
    function RequestSession(audioSourceId) {
        var _this = this;
        this.privIsDisposed = false;
        this.privDetachables = new Array();
        this.privIsAudioNodeDetached = false;
        this.privIsRecognizing = false;
        this.privIsSpeechEnded = false;
        this.privTurnStartAudioOffset = 0;
        this.privLastRecoOffset = 0;
        this.privHypothesisReceived = false;
        this.privBytesSent = 0;
        this.onAudioSourceAttachCompleted = function (audioNode, isError, error) {
            _this.privAudioNode = audioNode;
            if (isError) {
                _this.onComplete();
            }
            else {
                _this.onEvent(new RecognitionEvents_1.ListeningStartedEvent(_this.privRequestId, _this.privSessionId, _this.privAudioSourceId, _this.privAudioNodeId));
            }
        };
        this.onPreConnectionStart = function (authFetchEventId, connectionId) {
            _this.privAuthFetchEventId = authFetchEventId;
            _this.privSessionId = connectionId;
            _this.onEvent(new RecognitionEvents_1.ConnectingToServiceEvent(_this.privRequestId, _this.privAuthFetchEventId, _this.privSessionId));
        };
        this.onAuthCompleted = function (isError, error) {
            if (isError) {
                _this.onComplete();
            }
        };
        this.onConnectionEstablishCompleted = function (statusCode, reason) {
            if (statusCode === 200) {
                _this.onEvent(new RecognitionEvents_1.RecognitionStartedEvent(_this.requestId, _this.privAudioSourceId, _this.privAudioNodeId, _this.privAuthFetchEventId, _this.privSessionId));
                if (!!_this.privAudioNode) {
                    _this.privAudioNode.replay();
                }
                _this.privTurnStartAudioOffset = _this.privLastRecoOffset;
                _this.privBytesSent = 0;
                return;
            }
            else if (statusCode === 403) {
                _this.onComplete();
            }
        };
        this.onServiceTurnEndResponse = function (continuousRecognition) {
            if (!continuousRecognition || _this.isSpeechEnded) {
                _this.onComplete();
            }
            else {
                // Start a new request set.
                _this.privTurnStartAudioOffset = _this.privLastRecoOffset;
                _this.privRequestId = Exports_1.createNoDashGuid();
                _this.privAudioNode.replay();
            }
        };
        this.dispose = function (error) {
            if (!_this.privIsDisposed) {
                // we should have completed by now. If we did not its an unknown error.
                _this.privIsDisposed = true;
                for (var _i = 0, _a = _this.privDetachables; _i < _a.length; _i++) {
                    var detachable = _a[_i];
                    detachable.detach();
                }
                _this.privServiceTelemetryListener.dispose();
            }
        };
        this.getTelemetry = function () {
            if (_this.privServiceTelemetryListener.hasTelemetry) {
                return _this.privServiceTelemetryListener.getTelemetry();
            }
            else {
                return null;
            }
        };
        this.onEvent = function (event) {
            if (!!_this.privServiceTelemetryListener) {
                _this.privServiceTelemetryListener.onEvent(event);
            }
            Exports_1.Events.instance.onEvent(event);
        };
        this.onComplete = function () {
            if (!!_this.privIsRecognizing) {
                _this.privIsRecognizing = false;
                _this.detachAudioNode();
            }
        };
        this.detachAudioNode = function () {
            if (!_this.privIsAudioNodeDetached) {
                _this.privIsAudioNodeDetached = true;
                if (_this.privAudioNode) {
                    _this.privAudioNode.detach();
                }
            }
        };
        this.privAudioSourceId = audioSourceId;
        this.privRequestId = Exports_1.createNoDashGuid();
        this.privAudioNodeId = Exports_1.createNoDashGuid();
        this.privRequestCompletionDeferral = new Exports_1.Deferred();
    }
    Object.defineProperty(RequestSession.prototype, "sessionId", {
        get: function () {
            return this.privSessionId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RequestSession.prototype, "requestId", {
        get: function () {
            return this.privRequestId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RequestSession.prototype, "audioNodeId", {
        get: function () {
            return this.privAudioNodeId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RequestSession.prototype, "completionPromise", {
        get: function () {
            return this.privRequestCompletionDeferral.promise();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RequestSession.prototype, "isSpeechEnded", {
        get: function () {
            return this.privIsSpeechEnded;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RequestSession.prototype, "isRecognizing", {
        get: function () {
            return this.privIsRecognizing;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RequestSession.prototype, "currentTurnAudioOffset", {
        get: function () {
            return this.privTurnStartAudioOffset;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RequestSession.prototype, "bytesSent", {
        // The number of bytes sent for the current connection.
        // Counter is reset to 0 each time a connection is established.
        get: function () {
            return this.privBytesSent;
        },
        enumerable: true,
        configurable: true
    });
    RequestSession.prototype.listenForServiceTelemetry = function (eventSource) {
        if (!!this.privServiceTelemetryListener) {
            this.privDetachables.push(eventSource.attachListener(this.privServiceTelemetryListener));
        }
    };
    RequestSession.prototype.startNewRecognition = function () {
        this.privIsSpeechEnded = false;
        this.privIsRecognizing = true;
        this.privTurnStartAudioOffset = 0;
        this.privLastRecoOffset = 0;
        this.privRequestId = Exports_1.createNoDashGuid();
        this.privServiceTelemetryListener = new ServiceTelemetryListener_Internal_1.ServiceTelemetryListener(this.privRequestId, this.privAudioSourceId, this.privAudioNodeId);
        this.onEvent(new RecognitionEvents_1.RecognitionTriggeredEvent(this.requestId, this.privSessionId, this.privAudioSourceId, this.privAudioNodeId));
    };
    RequestSession.prototype.onHypothesis = function (offset) {
        if (!this.privHypothesisReceived) {
            this.privHypothesisReceived = true;
            this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(offset));
        }
    };
    RequestSession.prototype.onPhraseRecognized = function (offset) {
        this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(offset));
        this.onServiceRecognized(offset);
    };
    RequestSession.prototype.onServiceRecognized = function (offset) {
        this.privLastRecoOffset = offset;
        this.privHypothesisReceived = false;
        this.privAudioNode.shrinkBuffers(offset);
    };
    RequestSession.prototype.onAudioSent = function (bytesSent) {
        this.privBytesSent += bytesSent;
    };
    RequestSession.prototype.onStopRecognizing = function () {
        this.privIsRecognizing = false;
    };
    // Should be called with the audioNode for this session has indicated that it is out of speech.
    RequestSession.prototype.onSpeechEnded = function () {
        this.privIsSpeechEnded = true;
    };
    return RequestSession;
}());
exports.RequestSession = RequestSession;

//# sourceMappingURL=RequestSession.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js":
/*!******************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js ***!
  \******************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var DetailedSpeechPhrase = /** @class */ (function () {
    function DetailedSpeechPhrase(json) {
        this.privDetailedSpeechPhrase = JSON.parse(json);
        this.privDetailedSpeechPhrase.RecognitionStatus = Exports_1.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus];
    }
    DetailedSpeechPhrase.fromJSON = function (json) {
        return new DetailedSpeechPhrase(json);
    };
    Object.defineProperty(DetailedSpeechPhrase.prototype, "RecognitionStatus", {
        get: function () {
            return this.privDetailedSpeechPhrase.RecognitionStatus;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetailedSpeechPhrase.prototype, "NBest", {
        get: function () {
            return this.privDetailedSpeechPhrase.NBest;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetailedSpeechPhrase.prototype, "Duration", {
        get: function () {
            return this.privDetailedSpeechPhrase.Duration;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetailedSpeechPhrase.prototype, "Offset", {
        get: function () {
            return this.privDetailedSpeechPhrase.Offset;
        },
        enumerable: true,
        configurable: true
    });
    return DetailedSpeechPhrase;
}());
exports.DetailedSpeechPhrase = DetailedSpeechPhrase;

//# sourceMappingURL=DetailedSpeechPhrase.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/Enums.js":
/*!***************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/Enums.js ***!
  \***************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @class SynthesisStatus
 * @private
 */
var SynthesisStatus;
(function (SynthesisStatus) {
    /**
     * The response contains valid audio data.
     * @member SynthesisStatus.Success
     */
    SynthesisStatus[SynthesisStatus["Success"] = 0] = "Success";
    /**
     * Indicates the end of audio data. No valid audio data is included in the message.
     * @member SynthesisStatus.SynthesisEnd
     */
    SynthesisStatus[SynthesisStatus["SynthesisEnd"] = 1] = "SynthesisEnd";
    /**
     * Indicates an error occurred during synthesis data processing.
     * @member SynthesisStatus.Error
     */
    SynthesisStatus[SynthesisStatus["Error"] = 2] = "Error";
})(SynthesisStatus = exports.SynthesisStatus || (exports.SynthesisStatus = {}));
var RecognitionStatus;
(function (RecognitionStatus) {
    RecognitionStatus[RecognitionStatus["Success"] = 0] = "Success";
    RecognitionStatus[RecognitionStatus["NoMatch"] = 1] = "NoMatch";
    RecognitionStatus[RecognitionStatus["InitialSilenceTimeout"] = 2] = "InitialSilenceTimeout";
    RecognitionStatus[RecognitionStatus["BabbleTimeout"] = 3] = "BabbleTimeout";
    RecognitionStatus[RecognitionStatus["Error"] = 4] = "Error";
    RecognitionStatus[RecognitionStatus["EndOfDictation"] = 5] = "EndOfDictation";
})(RecognitionStatus = exports.RecognitionStatus || (exports.RecognitionStatus = {}));

//# sourceMappingURL=Enums.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/IntentResponse.js":
/*!************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/IntentResponse.js ***!
  \************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
Object.defineProperty(exports, "__esModule", { value: true });
var IntentResponse = /** @class */ (function () {
    function IntentResponse(json) {
        this.privIntentResponse = JSON.parse(json);
    }
    IntentResponse.fromJSON = function (json) {
        return new IntentResponse(json);
    };
    Object.defineProperty(IntentResponse.prototype, "query", {
        get: function () {
            return this.privIntentResponse.query;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IntentResponse.prototype, "topScoringIntent", {
        get: function () {
            return this.privIntentResponse.topScoringIntent;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IntentResponse.prototype, "entities", {
        get: function () {
            return this.privIntentResponse.entities;
        },
        enumerable: true,
        configurable: true
    });
    return IntentResponse;
}());
exports.IntentResponse = IntentResponse;

//# sourceMappingURL=IntentResponse.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js":
/*!****************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js ***!
  \****************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var SimpleSpeechPhrase = /** @class */ (function () {
    function SimpleSpeechPhrase(json) {
        this.privSimpleSpeechPhrase = JSON.parse(json);
        this.privSimpleSpeechPhrase.RecognitionStatus = Exports_1.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus];
    }
    SimpleSpeechPhrase.fromJSON = function (json) {
        return new SimpleSpeechPhrase(json);
    };
    Object.defineProperty(SimpleSpeechPhrase.prototype, "RecognitionStatus", {
        get: function () {
            return this.privSimpleSpeechPhrase.RecognitionStatus;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SimpleSpeechPhrase.prototype, "DisplayText", {
        get: function () {
            return this.privSimpleSpeechPhrase.DisplayText;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SimpleSpeechPhrase.prototype, "Offset", {
        get: function () {
            return this.privSimpleSpeechPhrase.Offset;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SimpleSpeechPhrase.prototype, "Duration", {
        get: function () {
            return this.privSimpleSpeechPhrase.Duration;
        },
        enumerable: true,
        configurable: true
    });
    return SimpleSpeechPhrase;
}());
exports.SimpleSpeechPhrase = SimpleSpeechPhrase;

//# sourceMappingURL=SimpleSpeechPhrase.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechDetected.js":
/*!************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechDetected.js ***!
  \************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var SpeechDetected = /** @class */ (function () {
    function SpeechDetected(json) {
        this.privSpeechStartDetected = JSON.parse(json);
    }
    SpeechDetected.fromJSON = function (json) {
        return new SpeechDetected(json);
    };
    Object.defineProperty(SpeechDetected.prototype, "Offset", {
        get: function () {
            return this.privSpeechStartDetected.Offset;
        },
        enumerable: true,
        configurable: true
    });
    return SpeechDetected;
}());
exports.SpeechDetected = SpeechDetected;

//# sourceMappingURL=SpeechDetected.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechHypothesis.js":
/*!**************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechHypothesis.js ***!
  \**************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var SpeechHypothesis = /** @class */ (function () {
    function SpeechHypothesis(json) {
        this.privSpeechHypothesis = JSON.parse(json);
    }
    SpeechHypothesis.fromJSON = function (json) {
        return new SpeechHypothesis(json);
    };
    Object.defineProperty(SpeechHypothesis.prototype, "Text", {
        get: function () {
            return this.privSpeechHypothesis.Text;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechHypothesis.prototype, "Offset", {
        get: function () {
            return this.privSpeechHypothesis.Offset;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechHypothesis.prototype, "Duration", {
        get: function () {
            return this.privSpeechHypothesis.Duration;
        },
        enumerable: true,
        configurable: true
    });
    return SpeechHypothesis;
}());
exports.SpeechHypothesis = SpeechHypothesis;

//# sourceMappingURL=SpeechHypothesis.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationHypothesis.js":
/*!*******************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationHypothesis.js ***!
  \*******************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var TranslationStatus_1 = __webpack_require__(/*! ../TranslationStatus */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationStatus.js");
var TranslationHypothesis = /** @class */ (function () {
    function TranslationHypothesis(json) {
        this.privTranslationHypothesis = JSON.parse(json);
        this.privTranslationHypothesis.Translation.TranslationStatus = TranslationStatus_1.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus];
    }
    TranslationHypothesis.fromJSON = function (json) {
        return new TranslationHypothesis(json);
    };
    Object.defineProperty(TranslationHypothesis.prototype, "Duration", {
        get: function () {
            return this.privTranslationHypothesis.Duration;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationHypothesis.prototype, "Offset", {
        get: function () {
            return this.privTranslationHypothesis.Offset;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationHypothesis.prototype, "Text", {
        get: function () {
            return this.privTranslationHypothesis.Text;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationHypothesis.prototype, "Translation", {
        get: function () {
            return this.privTranslationHypothesis.Translation;
        },
        enumerable: true,
        configurable: true
    });
    return TranslationHypothesis;
}());
exports.TranslationHypothesis = TranslationHypothesis;

//# sourceMappingURL=TranslationHypothesis.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationPhrase.js":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationPhrase.js ***!
  \***************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var TranslationStatus_1 = __webpack_require__(/*! ../TranslationStatus */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationStatus.js");
var TranslationPhrase = /** @class */ (function () {
    function TranslationPhrase(json) {
        this.privTranslationPhrase = JSON.parse(json);
        this.privTranslationPhrase.RecognitionStatus = Exports_1.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus];
        if (this.privTranslationPhrase.Translation !== undefined) {
            this.privTranslationPhrase.Translation.TranslationStatus = TranslationStatus_1.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus];
        }
    }
    TranslationPhrase.fromJSON = function (json) {
        return new TranslationPhrase(json);
    };
    Object.defineProperty(TranslationPhrase.prototype, "RecognitionStatus", {
        get: function () {
            return this.privTranslationPhrase.RecognitionStatus;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationPhrase.prototype, "Offset", {
        get: function () {
            return this.privTranslationPhrase.Offset;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationPhrase.prototype, "Duration", {
        get: function () {
            return this.privTranslationPhrase.Duration;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationPhrase.prototype, "Text", {
        get: function () {
            return this.privTranslationPhrase.Text;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationPhrase.prototype, "Translation", {
        get: function () {
            return this.privTranslationPhrase.Translation;
        },
        enumerable: true,
        configurable: true
    });
    return TranslationPhrase;
}());
exports.TranslationPhrase = TranslationPhrase;

//# sourceMappingURL=TranslationPhrase.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js ***!
  \*********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var TranslationSynthesisEnd = /** @class */ (function () {
    function TranslationSynthesisEnd(json) {
        this.privSynthesisEnd = JSON.parse(json);
        this.privSynthesisEnd.SynthesisStatus = Exports_1.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus];
    }
    TranslationSynthesisEnd.fromJSON = function (json) {
        return new TranslationSynthesisEnd(json);
    };
    Object.defineProperty(TranslationSynthesisEnd.prototype, "SynthesisStatus", {
        get: function () {
            return this.privSynthesisEnd.SynthesisStatus;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationSynthesisEnd.prototype, "FailureReason", {
        get: function () {
            return this.privSynthesisEnd.FailureReason;
        },
        enumerable: true,
        configurable: true
    });
    return TranslationSynthesisEnd;
}());
exports.TranslationSynthesisEnd = TranslationSynthesisEnd;

//# sourceMappingURL=TranslationSynthesisEnd.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceRecognizerBase.js":
/*!***************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceRecognizerBase.js ***!
  \***************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js");
var Exports_2 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var Exports_3 = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var Exports_4 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var SpeechConnectionMessage_Internal_1 = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionMessage.Internal.js");
var ServiceRecognizerBase = /** @class */ (function () {
    function ServiceRecognizerBase(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        var _this = this;
        this.sendTelemetryData = function () {
            var telemetryData = _this.privRequestSession.getTelemetry();
            // console.warn("Telem: " + telemetryData);
            if (ServiceRecognizerBase.telemetryDataEnabled !== true ||
                _this.privIsDisposed ||
                null === telemetryData) {
                return Exports_2.PromiseHelper.fromResult(true);
            }
            if (!!ServiceRecognizerBase.telemetryData) {
                try {
                    ServiceRecognizerBase.telemetryData(telemetryData);
                    /* tslint:disable:no-empty */
                }
                catch (_a) { }
            }
            return _this.fetchConnection().onSuccessContinueWith(function (connection) {
                return connection.send(new SpeechConnectionMessage_Internal_1.SpeechConnectionMessage(Exports_2.MessageType.Text, "telemetry", _this.privRequestSession.requestId, "application/json", telemetryData));
            });
        };
        this.fetchConnection = function () {
            return _this.configureConnection();
        };
        this.receiveMessage = function (successCallback, errorCallBack) {
            return _this.fetchConnection().on(function (connection) {
                return connection.read()
                    .onSuccessContinueWithPromise(function (message) {
                    if (_this.privIsDisposed || !_this.privRequestSession.isRecognizing) {
                        // We're done.
                        return Exports_2.PromiseHelper.fromResult(undefined);
                    }
                    // indicates we are draining the queue and it came with no message;
                    if (!message) {
                        if (!_this.privRequestSession.isRecognizing) {
                            return Exports_2.PromiseHelper.fromResult(true);
                        }
                        else {
                            return _this.receiveMessage(successCallback, errorCallBack);
                        }
                    }
                    var connectionMessage = SpeechConnectionMessage_Internal_1.SpeechConnectionMessage.fromConnectionMessage(message);
                    if (connectionMessage.requestId.toLowerCase() === _this.privRequestSession.requestId.toLowerCase()) {
                        switch (connectionMessage.path.toLowerCase()) {
                            case "turn.start":
                                _this.privMustReportEndOfStream = true;
                                break;
                            case "speech.startdetected":
                                var speechStartDetected = Exports_4.SpeechDetected.fromJSON(connectionMessage.textBody);
                                var speechStartEventArgs = new Exports_3.RecognitionEventArgs(speechStartDetected.Offset, _this.privRequestSession.sessionId);
                                if (!!_this.privRecognizer.speechStartDetected) {
                                    _this.privRecognizer.speechStartDetected(_this.privRecognizer, speechStartEventArgs);
                                }
                                break;
                            case "speech.enddetected":
                                var json = void 0;
                                if (connectionMessage.textBody.length > 0) {
                                    json = connectionMessage.textBody;
                                }
                                else {
                                    // If the request was empty, the JSON returned is empty.
                                    json = "{ Offset: 0 }";
                                }
                                var speechStopDetected = Exports_4.SpeechDetected.fromJSON(json);
                                _this.privRequestSession.onServiceRecognized(speechStopDetected.Offset + _this.privRequestSession.currentTurnAudioOffset);
                                var speechStopEventArgs = new Exports_3.RecognitionEventArgs(speechStopDetected.Offset + _this.privRequestSession.currentTurnAudioOffset, _this.privRequestSession.sessionId);
                                if (!!_this.privRecognizer.speechEndDetected) {
                                    _this.privRecognizer.speechEndDetected(_this.privRecognizer, speechStopEventArgs);
                                }
                                break;
                            case "turn.end":
                                _this.sendTelemetryData();
                                if (_this.privRequestSession.isSpeechEnded && _this.privMustReportEndOfStream) {
                                    _this.privMustReportEndOfStream = false;
                                    _this.cancelRecognitionLocal(Exports_3.CancellationReason.EndOfStream, Exports_3.CancellationErrorCode.NoError, undefined, successCallback);
                                }
                                var sessionStopEventArgs = new Exports_3.SessionEventArgs(_this.privRequestSession.sessionId);
                                _this.privRequestSession.onServiceTurnEndResponse(_this.privRecognizerConfig.isContinuousRecognition);
                                if (!_this.privRecognizerConfig.isContinuousRecognition || _this.privRequestSession.isSpeechEnded) {
                                    if (!!_this.privRecognizer.sessionStopped) {
                                        _this.privRecognizer.sessionStopped(_this.privRecognizer, sessionStopEventArgs);
                                    }
                                    return Exports_2.PromiseHelper.fromResult(true);
                                }
                                else {
                                    _this.fetchConnection().onSuccessContinueWith(function (connection) {
                                        _this.sendSpeechContext(connection);
                                    });
                                }
                            default:
                                _this.processTypeSpecificMessages(connectionMessage, successCallback, errorCallBack);
                        }
                    }
                    return _this.receiveMessage(successCallback, errorCallBack);
                });
            }, function (error) {
            });
        };
        this.sendSpeechServiceConfig = function (connection, requestSession, SpeechServiceConfigJson) {
            // filter out anything that is not required for the service to work.
            if (ServiceRecognizerBase.telemetryDataEnabled !== true) {
                var withTelemetry = JSON.parse(SpeechServiceConfigJson);
                var replacement = {
                    context: {
                        system: withTelemetry.context.system,
                    },
                };
                SpeechServiceConfigJson = JSON.stringify(replacement);
            }
            if (SpeechServiceConfigJson) { // && this.privConnectionId !== this.privSpeechServiceConfigConnectionId) {
                _this.privSpeechServiceConfigConnectionId = _this.privConnectionId;
                return connection.send(new SpeechConnectionMessage_Internal_1.SpeechConnectionMessage(Exports_2.MessageType.Text, "speech.config", requestSession.requestId, "application/json", SpeechServiceConfigJson));
            }
            return Exports_2.PromiseHelper.fromResult(true);
        };
        this.sendSpeechContext = function (connection) {
            var speechContextJson = _this.speechContext.toJSON();
            if (speechContextJson) {
                return connection.send(new SpeechConnectionMessage_Internal_1.SpeechConnectionMessage(Exports_2.MessageType.Text, "speech.context", _this.privRequestSession.requestId, "application/json", speechContextJson));
            }
            return Exports_2.PromiseHelper.fromResult(true);
        };
        this.sendAudio = function (audioStreamNode) {
            // NOTE: Home-baked promises crash ios safari during the invocation
            // of the error callback chain (looks like the recursion is way too deep, and
            // it blows up the stack). The following construct is a stop-gap that does not
            // bubble the error up the callback chain and hence circumvents this problem.
            // TODO: rewrite with ES6 promises.
            var deferred = new Exports_2.Deferred();
            // The time we last sent data to the service.
            var nextSendTime = Date.now();
            var audioFormat = _this.privAudioSource.format;
            // Max amount to send before we start to throttle
            var fastLaneSizeMs = _this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs", "5000");
            var maxSendUnthrottledBytes = audioFormat.avgBytesPerSec / 1000 * parseInt(fastLaneSizeMs, 10);
            var readAndUploadCycle = function () {
                // If speech is done, stop sending audio.
                if (!_this.privIsDisposed && !_this.privRequestSession.isSpeechEnded && _this.privRequestSession.isRecognizing) {
                    _this.fetchConnection().on(function (connection) {
                        audioStreamNode.read().on(function (audioStreamChunk) {
                            // we have a new audio chunk to upload.
                            if (_this.privRequestSession.isSpeechEnded) {
                                // If service already recognized audio end then don't send any more audio
                                deferred.resolve(true);
                                return;
                            }
                            var payload;
                            var sendDelay;
                            if (audioStreamChunk.isEnd) {
                                payload = null;
                                sendDelay = 0;
                            }
                            else {
                                payload = audioStreamChunk.buffer;
                                _this.privRequestSession.onAudioSent(payload.byteLength);
                                if (maxSendUnthrottledBytes >= _this.privRequestSession.bytesSent) {
                                    sendDelay = 0;
                                }
                                else {
                                    sendDelay = Math.max(0, nextSendTime - Date.now());
                                }
                            }
                            // Are we ready to send, or need we delay more?
                            setTimeout(function () {
                                if (payload !== null) {
                                    nextSendTime = Date.now() + (payload.byteLength * 1000 / (audioFormat.avgBytesPerSec * 2));
                                }
                                var uploaded = connection.send(new SpeechConnectionMessage_Internal_1.SpeechConnectionMessage(Exports_2.MessageType.Binary, "audio", _this.privRequestSession.requestId, null, payload));
                                if (!audioStreamChunk.isEnd) {
                                    uploaded.continueWith(function (_) {
                                        // Regardless of success or failure, schedule the next upload.
                                        // If the underlying connection was broken, the next cycle will
                                        // get a new connection and re-transmit missing audio automatically.
                                        readAndUploadCycle();
                                    });
                                }
                                else {
                                    // the audio stream has been closed, no need to schedule next
                                    // read-upload cycle.
                                    _this.privRequestSession.onSpeechEnded();
                                    deferred.resolve(true);
                                }
                            }, sendDelay);
                        }, function (error) {
                            if (_this.privRequestSession.isSpeechEnded) {
                                // For whatever reason, Reject is used to remove queue subscribers inside
                                // the Queue.DrainAndDispose invoked from DetachAudioNode down below, which
                                // means that sometimes things can be rejected in normal circumstances, without
                                // any errors.
                                deferred.resolve(true); // TODO: remove the argument, it's is completely meaningless.
                            }
                            else {
                                // Only reject, if there was a proper error.
                                deferred.reject(error);
                            }
                        });
                    }, function (error) {
                        deferred.reject(error);
                    });
                }
            };
            readAndUploadCycle();
            return deferred.promise();
        };
        if (!authentication) {
            throw new Exports_2.ArgumentNullError("authentication");
        }
        if (!connectionFactory) {
            throw new Exports_2.ArgumentNullError("connectionFactory");
        }
        if (!audioSource) {
            throw new Exports_2.ArgumentNullError("audioSource");
        }
        if (!recognizerConfig) {
            throw new Exports_2.ArgumentNullError("recognizerConfig");
        }
        this.privMustReportEndOfStream = false;
        this.privAuthentication = authentication;
        this.privConnectionFactory = connectionFactory;
        this.privAudioSource = audioSource;
        this.privRecognizerConfig = recognizerConfig;
        this.privIsDisposed = false;
        this.privRecognizer = recognizer;
        this.privRequestSession = new Exports_4.RequestSession(this.privAudioSource.id());
        this.privConnectionEvents = new Exports_2.EventSource();
        this.privDynamicGrammar = new Exports_4.DynamicGrammarBuilder();
        this.privSpeechContext = new Exports_4.SpeechContext(this.privDynamicGrammar);
    }
    Object.defineProperty(ServiceRecognizerBase.prototype, "audioSource", {
        get: function () {
            return this.privAudioSource;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ServiceRecognizerBase.prototype, "speechContext", {
        get: function () {
            return this.privSpeechContext;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ServiceRecognizerBase.prototype, "dynamicGrammar", {
        get: function () {
            return this.privDynamicGrammar;
        },
        enumerable: true,
        configurable: true
    });
    ServiceRecognizerBase.prototype.isDisposed = function () {
        return this.privIsDisposed;
    };
    ServiceRecognizerBase.prototype.dispose = function (reason) {
        this.privIsDisposed = true;
        if (this.privConnectionConfigurationPromise) {
            this.privConnectionConfigurationPromise.onSuccessContinueWith(function (connection) {
                connection.dispose(reason);
            });
        }
    };
    Object.defineProperty(ServiceRecognizerBase.prototype, "connectionEvents", {
        get: function () {
            return this.privConnectionEvents;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ServiceRecognizerBase.prototype, "recognitionMode", {
        get: function () {
            return this.privRecognizerConfig.recognitionMode;
        },
        enumerable: true,
        configurable: true
    });
    ServiceRecognizerBase.prototype.recognize = function (recoMode, successCallback, errorCallBack) {
        var _this = this;
        // Clear the existing configuration promise to force a re-transmission of config and context.
        this.privConnectionConfigurationPromise = null;
        this.privRecognizerConfig.recognitionMode = recoMode;
        this.privRequestSession.startNewRecognition();
        this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);
        // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
        this.connectImpl();
        return this.audioSource
            .attach(this.privRequestSession.audioNodeId)
            .continueWithPromise(function (result) {
            var audioNode;
            if (result.isError) {
                _this.cancelRecognitionLocal(Exports_3.CancellationReason.Error, Exports_3.CancellationErrorCode.ConnectionFailure, result.error, successCallback);
                return Exports_2.PromiseHelper.fromError(result.error);
            }
            else {
                audioNode = new Exports_1.ReplayableAudioNode(result.result, _this.audioSource.format);
                _this.privRequestSession.onAudioSourceAttachCompleted(audioNode, false);
            }
            return _this.audioSource.deviceInfo.onSuccessContinueWithPromise(function (deviceInfo) {
                _this.privRecognizerConfig.SpeechServiceConfig.Context.audio = { source: deviceInfo };
                return _this.configureConnection()
                    .on(function (_) {
                    var sessionStartEventArgs = new Exports_3.SessionEventArgs(_this.privRequestSession.sessionId);
                    if (!!_this.privRecognizer.sessionStarted) {
                        _this.privRecognizer.sessionStarted(_this.privRecognizer, sessionStartEventArgs);
                    }
                    var messageRetrievalPromise = _this.receiveMessage(successCallback, errorCallBack);
                    var audioSendPromise = _this.sendAudio(audioNode);
                    /* tslint:disable:no-empty */
                    audioSendPromise.on(function (_) { }, function (error) {
                        _this.cancelRecognitionLocal(Exports_3.CancellationReason.Error, Exports_3.CancellationErrorCode.RuntimeError, error, successCallback);
                    });
                    var completionPromise = Exports_2.PromiseHelper.whenAll([messageRetrievalPromise, audioSendPromise]);
                    return completionPromise.on(function (r) {
                        return true;
                    }, function (error) {
                        _this.cancelRecognitionLocal(Exports_3.CancellationReason.Error, Exports_3.CancellationErrorCode.RuntimeError, error, successCallback);
                    });
                }, function (error) {
                    _this.cancelRecognitionLocal(Exports_3.CancellationReason.Error, Exports_3.CancellationErrorCode.ConnectionFailure, error, successCallback);
                }).continueWithPromise(function (result) {
                    if (result.isError) {
                        return Exports_2.PromiseHelper.fromError(result.error);
                    }
                    else {
                        return Exports_2.PromiseHelper.fromResult(true);
                    }
                });
            });
        });
    };
    ServiceRecognizerBase.prototype.stopRecognizing = function () {
        if (this.privRequestSession.isRecognizing) {
            this.privRequestSession.onStopRecognizing();
            this.sendTelemetryData();
            this.audioSource.turnOff();
            this.sendFinalAudio();
            this.privRequestSession.dispose();
        }
    };
    ServiceRecognizerBase.prototype.connect = function () {
        this.connectImpl().result();
    };
    ServiceRecognizerBase.prototype.disconnect = function () {
        this.cancelRecognitionLocal(Exports_3.CancellationReason.Error, Exports_3.CancellationErrorCode.NoError, "Disconnecting", undefined);
        if (this.privConnectionPromise.result().isCompleted) {
            if (!this.privConnectionPromise.result().isError) {
                this.privConnectionPromise.result().result.dispose();
                this.privConnectionPromise = null;
            }
        }
        else {
            this.privConnectionPromise.onSuccessContinueWith(function (connection) {
                connection.dispose();
            });
        }
    };
    // Cancels recognition.
    ServiceRecognizerBase.prototype.cancelRecognitionLocal = function (cancellationReason, errorCode, error, cancelRecoCallback) {
        if (!!this.privRequestSession.isRecognizing) {
            this.privRequestSession.onStopRecognizing();
            this.sendTelemetryData();
            this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, cancellationReason, errorCode, error, cancelRecoCallback);
        }
    };
    // Establishes a websocket connection to the end point.
    ServiceRecognizerBase.prototype.connectImpl = function (isUnAuthorized) {
        var _this = this;
        if (isUnAuthorized === void 0) { isUnAuthorized = false; }
        if (this.privConnectionPromise) {
            if (this.privConnectionPromise.result().isCompleted &&
                (this.privConnectionPromise.result().isError
                    || this.privConnectionPromise.result().result.state() === Exports_2.ConnectionState.Disconnected)) {
                this.privConnectionId = null;
                this.privConnectionPromise = null;
                return this.connectImpl();
            }
            else {
                return this.privConnectionPromise;
            }
        }
        this.privAuthFetchEventId = Exports_2.createNoDashGuid();
        this.privConnectionId = Exports_2.createNoDashGuid();
        this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId, this.privConnectionId);
        var authPromise = isUnAuthorized ? this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId) : this.privAuthentication.fetch(this.privAuthFetchEventId);
        this.privConnectionPromise = authPromise
            .continueWithPromise(function (result) {
            if (result.isError) {
                _this.privRequestSession.onAuthCompleted(true, result.error);
                throw new Error(result.error);
            }
            else {
                _this.privRequestSession.onAuthCompleted(false);
            }
            var connection = _this.privConnectionFactory.create(_this.privRecognizerConfig, result.result, _this.privConnectionId);
            _this.privRequestSession.listenForServiceTelemetry(connection.events);
            // Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
            // it'll stop sending events.
            connection.events.attach(function (event) {
                _this.connectionEvents.onEvent(event);
            });
            return connection.open().onSuccessContinueWithPromise(function (response) {
                if (response.statusCode === 200) {
                    _this.privRequestSession.onPreConnectionStart(_this.privAuthFetchEventId, _this.privConnectionId);
                    _this.privRequestSession.onConnectionEstablishCompleted(response.statusCode);
                    return Exports_2.PromiseHelper.fromResult(connection);
                }
                else if (response.statusCode === 403 && !isUnAuthorized) {
                    return _this.connectImpl(true);
                }
                else {
                    _this.privRequestSession.onConnectionEstablishCompleted(response.statusCode, response.reason);
                    return Exports_2.PromiseHelper.fromError("Unable to contact server. StatusCode: " + response.statusCode + ", " + _this.privRecognizerConfig.parameters.getProperty(Exports_3.PropertyId.SpeechServiceConnection_Endpoint) + " Reason: " + response.reason);
                }
            });
        });
        return this.privConnectionPromise;
    };
    // Takes an established websocket connection to the endpoint and sends speech configuration information.
    ServiceRecognizerBase.prototype.configureConnection = function () {
        var _this = this;
        if (this.privConnectionConfigurationPromise) {
            if (this.privConnectionConfigurationPromise.result().isCompleted &&
                (this.privConnectionConfigurationPromise.result().isError
                    || this.privConnectionConfigurationPromise.result().result.state() === Exports_2.ConnectionState.Disconnected)) {
                this.privConnectionConfigurationPromise = null;
                return this.configureConnection();
            }
            else {
                return this.privConnectionConfigurationPromise;
            }
        }
        this.privConnectionConfigurationPromise = this.connectImpl().onSuccessContinueWithPromise(function (connection) {
            return _this.sendSpeechServiceConfig(connection, _this.privRequestSession, _this.privRecognizerConfig.SpeechServiceConfig.serialize())
                .onSuccessContinueWithPromise(function (_) {
                return _this.sendSpeechContext(connection).onSuccessContinueWith(function (_) {
                    return connection;
                });
            });
        });
        return this.privConnectionConfigurationPromise;
    };
    ServiceRecognizerBase.prototype.sendFinalAudio = function () {
        var _this = this;
        var deferred = new Exports_2.Deferred();
        this.fetchConnection().on(function (connection) {
            connection.send(new SpeechConnectionMessage_Internal_1.SpeechConnectionMessage(Exports_2.MessageType.Binary, "audio", _this.privRequestSession.requestId, null, null)).on(function (_) {
                deferred.resolve(true);
            }, function (error) {
                deferred.reject(error);
            });
        }, function (error) {
            deferred.reject(error);
        });
        return deferred.promise();
    };
    ServiceRecognizerBase.telemetryDataEnabled = true;
    return ServiceRecognizerBase;
}());
exports.ServiceRecognizerBase = ServiceRecognizerBase;

//# sourceMappingURL=ServiceRecognizerBase.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceTelemetryListener.Internal.js":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceTelemetryListener.Internal.js ***!
  \***************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var RecognitionEvents_1 = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognitionEvents.js");
// tslint:disable-next-line:max-classes-per-file
var ServiceTelemetryListener = /** @class */ (function () {
    function ServiceTelemetryListener(requestId, audioSourceId, audioNodeId) {
        var _this = this;
        this.privIsDisposed = false;
        this.privListeningTriggerMetric = null;
        this.privMicMetric = null;
        this.privConnectionEstablishMetric = null;
        this.onEvent = function (e) {
            if (_this.privIsDisposed) {
                return;
            }
            if (e instanceof RecognitionEvents_1.RecognitionTriggeredEvent && e.requestId === _this.privRequestId) {
                _this.privListeningTriggerMetric = {
                    End: e.eventTime,
                    Name: "ListeningTrigger",
                    Start: e.eventTime,
                };
            }
            if (e instanceof Exports_1.AudioStreamNodeAttachingEvent && e.audioSourceId === _this.privAudioSourceId && e.audioNodeId === _this.privAudioNodeId) {
                _this.privMicStartTime = e.eventTime;
            }
            if (e instanceof Exports_1.AudioStreamNodeAttachedEvent && e.audioSourceId === _this.privAudioSourceId && e.audioNodeId === _this.privAudioNodeId) {
                _this.privMicStartTime = e.eventTime;
            }
            if (e instanceof Exports_1.AudioSourceErrorEvent && e.audioSourceId === _this.privAudioSourceId) {
                if (!_this.privMicMetric) {
                    _this.privMicMetric = {
                        End: e.eventTime,
                        Error: e.error,
                        Name: "Microphone",
                        Start: _this.privMicStartTime,
                    };
                }
            }
            if (e instanceof Exports_1.AudioStreamNodeErrorEvent && e.audioSourceId === _this.privAudioSourceId && e.audioNodeId === _this.privAudioNodeId) {
                if (!_this.privMicMetric) {
                    _this.privMicMetric = {
                        End: e.eventTime,
                        Error: e.error,
                        Name: "Microphone",
                        Start: _this.privMicStartTime,
                    };
                }
            }
            if (e instanceof Exports_1.AudioStreamNodeDetachedEvent && e.audioSourceId === _this.privAudioSourceId && e.audioNodeId === _this.privAudioNodeId) {
                if (!_this.privMicMetric) {
                    _this.privMicMetric = {
                        End: e.eventTime,
                        Name: "Microphone",
                        Start: _this.privMicStartTime,
                    };
                }
            }
            if (e instanceof RecognitionEvents_1.ConnectingToServiceEvent && e.requestId === _this.privRequestId) {
                _this.privConnectionId = e.sessionId;
            }
            if (e instanceof Exports_1.ConnectionStartEvent && e.connectionId === _this.privConnectionId) {
                _this.privConnectionStartTime = e.eventTime;
            }
            if (e instanceof Exports_1.ConnectionEstablishedEvent && e.connectionId === _this.privConnectionId) {
                if (!_this.privConnectionEstablishMetric) {
                    _this.privConnectionEstablishMetric = {
                        End: e.eventTime,
                        Id: _this.privConnectionId,
                        Name: "Connection",
                        Start: _this.privConnectionStartTime,
                    };
                }
            }
            if (e instanceof Exports_1.ConnectionEstablishErrorEvent && e.connectionId === _this.privConnectionId) {
                if (!_this.privConnectionEstablishMetric) {
                    _this.privConnectionEstablishMetric = {
                        End: e.eventTime,
                        Error: _this.getConnectionError(e.statusCode),
                        Id: _this.privConnectionId,
                        Name: "Connection",
                        Start: _this.privConnectionStartTime,
                    };
                }
            }
            if (e instanceof Exports_1.ConnectionMessageReceivedEvent && e.connectionId === _this.privConnectionId) {
                if (e.message && e.message.headers && e.message.headers.path) {
                    if (!_this.privReceivedMessages[e.message.headers.path]) {
                        _this.privReceivedMessages[e.message.headers.path] = new Array();
                    }
                    _this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime);
                }
            }
        };
        this.getTelemetry = function () {
            var metrics = new Array();
            if (_this.privListeningTriggerMetric) {
                metrics.push(_this.privListeningTriggerMetric);
            }
            if (_this.privMicMetric) {
                metrics.push(_this.privMicMetric);
            }
            if (_this.privConnectionEstablishMetric) {
                metrics.push(_this.privConnectionEstablishMetric);
            }
            if (_this.privPhraseLatencies.length > 0) {
                metrics.push({
                    PhraseLatencyMs: _this.privPhraseLatencies,
                });
            }
            if (_this.privHypothesisLatencies.length > 0) {
                metrics.push({
                    FirstHypothesisLatencyMs: _this.privHypothesisLatencies,
                });
            }
            var telemetry = {
                Metrics: metrics,
                ReceivedMessages: _this.privReceivedMessages,
            };
            var json = JSON.stringify(telemetry);
            // We dont want to send the same telemetry again. So clean those out.
            _this.privReceivedMessages = {};
            _this.privListeningTriggerMetric = null;
            _this.privMicMetric = null;
            _this.privConnectionEstablishMetric = null;
            _this.privPhraseLatencies = [];
            _this.privHypothesisLatencies = [];
            return json;
        };
        this.dispose = function () {
            _this.privIsDisposed = true;
        };
        this.getConnectionError = function (statusCode) {
            /*
            -- Websocket status codes --
            NormalClosure = 1000,
            EndpointUnavailable = 1001,
            ProtocolError = 1002,
            InvalidMessageType = 1003,
            Empty = 1005,
            InvalidPayloadData = 1007,
            PolicyViolation = 1008,
            MessageTooBig = 1009,
            MandatoryExtension = 1010,
            InternalServerError = 1011
            */
            switch (statusCode) {
                case 400:
                case 1002:
                case 1003:
                case 1005:
                case 1007:
                case 1008:
                case 1009: return "BadRequest";
                case 401: return "Unauthorized";
                case 403: return "Forbidden";
                case 503:
                case 1001: return "ServerUnavailable";
                case 500:
                case 1011: return "ServerError";
                case 408:
                case 504: return "Timeout";
                default: return "statuscode:" + statusCode.toString();
            }
        };
        this.privRequestId = requestId;
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
        this.privReceivedMessages = {};
        this.privPhraseLatencies = [];
        this.privHypothesisLatencies = [];
    }
    ServiceTelemetryListener.prototype.phraseReceived = function (audioReceivedTime) {
        if (audioReceivedTime > 0) { // 0 indicates the time is unknown. Drop it.
            this.privPhraseLatencies.push(Date.now() - audioReceivedTime);
        }
    };
    ServiceTelemetryListener.prototype.hypothesisReceived = function (audioReceivedTime) {
        if (audioReceivedTime > 0) { // 0 indicates the time is unknown. Drop it.
            this.privHypothesisLatencies.push(Date.now() - audioReceivedTime);
        }
    };
    Object.defineProperty(ServiceTelemetryListener.prototype, "hasTelemetry", {
        // Determines if there are any telemetry events to send to the service.
        get: function () {
            return (Object.keys(this.privReceivedMessages).length !== 0 ||
                this.privListeningTriggerMetric !== null ||
                this.privMicMetric !== null ||
                this.privConnectionEstablishMetric !== null ||
                this.privPhraseLatencies.length !== 0 ||
                this.privHypothesisLatencies.length !== 0);
        },
        enumerable: true,
        configurable: true
    });
    return ServiceTelemetryListener;
}());
exports.ServiceTelemetryListener = ServiceTelemetryListener;

//# sourceMappingURL=ServiceTelemetryListener.Internal.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionFactory.js":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionFactory.js ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js");
var Exports_2 = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Exports_3 = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var Exports_4 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var QueryParameterNames_1 = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js");
var SpeechConnectionFactory = /** @class */ (function () {
    function SpeechConnectionFactory() {
        var _this = this;
        this.interactiveRelativeUri = "/speech/recognition/interactive/cognitiveservices/v1";
        this.conversationRelativeUri = "/speech/recognition/conversation/cognitiveservices/v1";
        this.dictationRelativeUri = "/speech/recognition/dictation/cognitiveservices/v1";
        this.create = function (config, authInfo, connectionId) {
            var endpoint = config.parameters.getProperty(Exports_3.PropertyId.SpeechServiceConnection_Endpoint, undefined);
            var queryParams = {};
            var endpointId = config.parameters.getProperty(Exports_3.PropertyId.SpeechServiceConnection_EndpointId, undefined);
            var language = config.parameters.getProperty(Exports_3.PropertyId.SpeechServiceConnection_RecoLanguage, undefined);
            if (endpointId) {
                if (!endpoint || endpoint.search(QueryParameterNames_1.QueryParameterNames.DeploymentIdParamName) === -1) {
                    queryParams[QueryParameterNames_1.QueryParameterNames.DeploymentIdParamName] = endpointId;
                }
            }
            else if (language) {
                if (!endpoint || endpoint.search(QueryParameterNames_1.QueryParameterNames.LanguageParamName) === -1) {
                    queryParams[QueryParameterNames_1.QueryParameterNames.LanguageParamName] = language;
                }
            }
            if (!endpoint || endpoint.search(QueryParameterNames_1.QueryParameterNames.FormatParamName) === -1) {
                queryParams[QueryParameterNames_1.QueryParameterNames.FormatParamName] = config.parameters.getProperty(Exports_2.OutputFormatPropertyName, Exports_3.OutputFormat[Exports_3.OutputFormat.Simple]).toLowerCase();
            }
            if (!endpoint) {
                var region = config.parameters.getProperty(Exports_3.PropertyId.SpeechServiceConnection_Region, undefined);
                var host = "wss://" + region + ".stt.speech.microsoft.com";
                switch (config.recognitionMode) {
                    case Exports_4.RecognitionMode.Conversation:
                        endpoint = host + _this.conversationRelativeUri;
                        break;
                    case Exports_4.RecognitionMode.Dictation:
                        endpoint = host + _this.dictationRelativeUri;
                        break;
                    default:
                        endpoint = host + _this.interactiveRelativeUri; // default is interactive
                        break;
                }
            }
            var headers = {};
            headers[authInfo.headerName] = authInfo.token;
            headers[QueryParameterNames_1.QueryParameterNames.ConnectionIdHeader] = connectionId;
            return new Exports_1.WebsocketConnection(endpoint, queryParams, headers, new Exports_4.WebsocketMessageFormatter(), Exports_1.ProxyInfo.fromRecognizerConfig(config), connectionId);
        };
    }
    return SpeechConnectionFactory;
}());
exports.SpeechConnectionFactory = SpeechConnectionFactory;

//# sourceMappingURL=SpeechConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionMessage.Internal.js":
/*!**************************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionMessage.Internal.js ***!
  \**************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var PathHeaderName = "path";
var ContentTypeHeaderName = "content-type";
var RequestIdHeaderName = "x-requestid";
var RequestTimestampHeaderName = "x-timestamp";
var SpeechConnectionMessage = /** @class */ (function (_super) {
    __extends(SpeechConnectionMessage, _super);
    function SpeechConnectionMessage(messageType, path, requestId, contentType, body, additionalHeaders, id) {
        var _this = this;
        if (!path) {
            throw new Exports_1.ArgumentNullError("path");
        }
        if (!requestId) {
            throw new Exports_1.ArgumentNullError("requestId");
        }
        var headers = {};
        headers[PathHeaderName] = path;
        headers[RequestIdHeaderName] = requestId;
        headers[RequestTimestampHeaderName] = new Date().toISOString();
        if (contentType) {
            headers[ContentTypeHeaderName] = contentType;
        }
        if (additionalHeaders) {
            for (var headerName in additionalHeaders) {
                if (headerName) {
                    headers[headerName] = additionalHeaders[headerName];
                }
            }
        }
        if (id) {
            _this = _super.call(this, messageType, body, headers, id) || this;
        }
        else {
            _this = _super.call(this, messageType, body, headers) || this;
        }
        _this.privPath = path;
        _this.privRequestId = requestId;
        _this.privContentType = contentType;
        _this.privAdditionalHeaders = additionalHeaders;
        return _this;
    }
    Object.defineProperty(SpeechConnectionMessage.prototype, "path", {
        get: function () {
            return this.privPath;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechConnectionMessage.prototype, "requestId", {
        get: function () {
            return this.privRequestId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechConnectionMessage.prototype, "contentType", {
        get: function () {
            return this.privContentType;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechConnectionMessage.prototype, "additionalHeaders", {
        get: function () {
            return this.privAdditionalHeaders;
        },
        enumerable: true,
        configurable: true
    });
    SpeechConnectionMessage.fromConnectionMessage = function (message) {
        var path = null;
        var requestId = null;
        var contentType = null;
        var requestTimestamp = null;
        var additionalHeaders = {};
        if (message.headers) {
            for (var headerName in message.headers) {
                if (headerName) {
                    if (headerName.toLowerCase() === PathHeaderName.toLowerCase()) {
                        path = message.headers[headerName];
                    }
                    else if (headerName.toLowerCase() === RequestIdHeaderName.toLowerCase()) {
                        requestId = message.headers[headerName];
                    }
                    else if (headerName.toLowerCase() === RequestTimestampHeaderName.toLowerCase()) {
                        requestTimestamp = message.headers[headerName];
                    }
                    else if (headerName.toLowerCase() === ContentTypeHeaderName.toLowerCase()) {
                        contentType = message.headers[headerName];
                    }
                    else {
                        additionalHeaders[headerName] = message.headers[headerName];
                    }
                }
            }
        }
        return new SpeechConnectionMessage(message.messageType, path, requestId, contentType, message.body, additionalHeaders, message.id);
    };
    return SpeechConnectionMessage;
}(Exports_1.ConnectionMessage));
exports.SpeechConnectionMessage = SpeechConnectionMessage;

//# sourceMappingURL=SpeechConnectionMessage.Internal.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechContext.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechContext.js ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Represents the JSON used in the speech.context message sent to the speech service.
 * The dynamic grammar is always refreshed from the encapsulated dynamic grammar object.
 */
var SpeechContext = /** @class */ (function () {
    function SpeechContext(dynamicGrammar) {
        this.privContext = {};
        this.privDynamicGrammar = dynamicGrammar;
    }
    /**
     * Adds a section to the speech.context object.
     * @param sectionName Name of the section to add.
     * @param value JSON serializeable object that represents the value.
     */
    SpeechContext.prototype.setSection = function (sectionName, value) {
        this.privContext[sectionName] = value;
    };
    SpeechContext.prototype.toJSON = function () {
        var dgi = this.privDynamicGrammar.generateGrammarObject();
        this.setSection("dgi", dgi);
        var ret = JSON.stringify(this.privContext);
        return ret;
    };
    return SpeechContext;
}());
exports.SpeechContext = SpeechContext;

//# sourceMappingURL=SpeechContext.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechServiceRecognizer.js":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechServiceRecognizer.js ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var Exports_2 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
// tslint:disable-next-line:max-classes-per-file
var SpeechServiceRecognizer = /** @class */ (function (_super) {
    __extends(SpeechServiceRecognizer, _super);
    function SpeechServiceRecognizer(authentication, connectionFactory, audioSource, recognizerConfig, speechRecognizer) {
        var _this = _super.call(this, authentication, connectionFactory, audioSource, recognizerConfig, speechRecognizer) || this;
        _this.privSpeechRecognizer = speechRecognizer;
        return _this;
    }
    SpeechServiceRecognizer.prototype.processTypeSpecificMessages = function (connectionMessage, successCallback, errorCallBack) {
        var result;
        var resultProps = new Exports_1.PropertyCollection();
        resultProps.setProperty(Exports_1.PropertyId.SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        switch (connectionMessage.path.toLowerCase()) {
            case "speech.hypothesis":
                var hypothesis = Exports_2.SpeechHypothesis.fromJSON(connectionMessage.textBody);
                var offset = hypothesis.Offset + this.privRequestSession.currentTurnAudioOffset;
                result = new Exports_1.SpeechRecognitionResult(this.privRequestSession.requestId, Exports_1.ResultReason.RecognizingSpeech, hypothesis.Text, hypothesis.Duration, offset, undefined, connectionMessage.textBody, resultProps);
                this.privRequestSession.onHypothesis(offset);
                var ev = new Exports_1.SpeechRecognitionEventArgs(result, hypothesis.Duration, this.privRequestSession.sessionId);
                if (!!this.privSpeechRecognizer.recognizing) {
                    try {
                        this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer, ev);
                        /* tslint:disable:no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            case "speech.phrase":
                var simple = Exports_2.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody);
                var resultReason = Exports_2.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus);
                this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + simple.Offset + simple.Duration);
                if (Exports_1.ResultReason.Canceled === resultReason) {
                    var cancelReason = Exports_2.EnumTranslation.implTranslateCancelResult(simple.RecognitionStatus);
                    result = new Exports_1.SpeechRecognitionResult(this.privRequestSession.requestId, resultReason, undefined, undefined, undefined, undefined, connectionMessage.textBody, resultProps);
                    if (!!this.privSpeechRecognizer.canceled) {
                        var cancelEvent = new Exports_1.SpeechRecognitionCanceledEventArgs(cancelReason, undefined, cancelReason === Exports_1.CancellationReason.Error ? Exports_1.CancellationErrorCode.ServiceError : Exports_1.CancellationErrorCode.NoError, undefined, this.privRequestSession.sessionId);
                        try {
                            this.privSpeechRecognizer.canceled(this.privSpeechRecognizer, cancelEvent);
                            /* tslint:disable:no-empty */
                        }
                        catch (_a) { }
                    }
                }
                else {
                    if (!(this.privRequestSession.isSpeechEnded && resultReason === Exports_1.ResultReason.NoMatch && simple.RecognitionStatus !== Exports_2.RecognitionStatus.InitialSilenceTimeout)) {
                        if (this.privRecognizerConfig.parameters.getProperty(Exports_2.OutputFormatPropertyName) === Exports_1.OutputFormat[Exports_1.OutputFormat.Simple]) {
                            result = new Exports_1.SpeechRecognitionResult(this.privRequestSession.requestId, resultReason, simple.DisplayText, simple.Duration, simple.Offset + this.privRequestSession.currentTurnAudioOffset, undefined, connectionMessage.textBody, resultProps);
                        }
                        else {
                            var detailed = Exports_2.DetailedSpeechPhrase.fromJSON(connectionMessage.textBody);
                            result = new Exports_1.SpeechRecognitionResult(this.privRequestSession.requestId, resultReason, detailed.RecognitionStatus === Exports_2.RecognitionStatus.Success ? detailed.NBest[0].Display : undefined, detailed.Duration, detailed.Offset + this.privRequestSession.currentTurnAudioOffset, undefined, connectionMessage.textBody, resultProps);
                        }
                        var event_1 = new Exports_1.SpeechRecognitionEventArgs(result, result.offset, this.privRequestSession.sessionId);
                        if (!!this.privSpeechRecognizer.recognized) {
                            try {
                                this.privSpeechRecognizer.recognized(this.privSpeechRecognizer, event_1);
                                /* tslint:disable:no-empty */
                            }
                            catch (error) {
                                // Not going to let errors in the event handler
                                // trip things up.
                            }
                        }
                    }
                }
                // report result to promise.
                if (!!successCallback) {
                    try {
                        successCallback(result);
                    }
                    catch (e) {
                        if (!!errorCallBack) {
                            errorCallBack(e);
                        }
                    }
                    // Only invoke the call back once.
                    // and if it's successful don't invoke the
                    // error after that.
                    successCallback = undefined;
                    errorCallBack = undefined;
                }
                break;
            default:
                break;
        }
    };
    // Cancels recognition.
    SpeechServiceRecognizer.prototype.cancelRecognition = function (sessionId, requestId, cancellationReason, errorCode, error, cancelRecoCallback) {
        var properties = new Exports_1.PropertyCollection();
        properties.setProperty(Exports_2.CancellationErrorCodePropertyName, Exports_1.CancellationErrorCode[errorCode]);
        if (!!this.privSpeechRecognizer.canceled) {
            var cancelEvent = new Exports_1.SpeechRecognitionCanceledEventArgs(cancellationReason, error, errorCode, undefined, sessionId);
            try {
                this.privSpeechRecognizer.canceled(this.privSpeechRecognizer, cancelEvent);
                /* tslint:disable:no-empty */
            }
            catch (_a) { }
        }
        if (!!cancelRecoCallback) {
            var result = new Exports_1.SpeechRecognitionResult(requestId, Exports_1.ResultReason.Canceled, undefined, // Text
            undefined, // Druation
            undefined, // Offset
            error, undefined, // Json
            properties);
            try {
                cancelRecoCallback(result);
                /* tslint:disable:no-empty */
            }
            catch (_b) { }
        }
    };
    return SpeechServiceRecognizer;
}(Exports_2.ServiceRecognizerBase));
exports.SpeechServiceRecognizer = SpeechServiceRecognizer;

//# sourceMappingURL=SpeechServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationConnectionFactory.js":
/*!**********************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationConnectionFactory.js ***!
  \**********************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js");
var Exports_2 = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var Exports_3 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var TestHooksParamName = "testhooks";
var ConnectionIdHeader = "X-ConnectionId";
var TranslationConnectionFactory = /** @class */ (function () {
    function TranslationConnectionFactory() {
        this.create = function (config, authInfo, connectionId) {
            var endpoint = config.parameters.getProperty(Exports_2.PropertyId.SpeechServiceConnection_Endpoint, undefined);
            if (!endpoint) {
                var region = config.parameters.getProperty(Exports_2.PropertyId.SpeechServiceConnection_Region, undefined);
                endpoint = "wss://" + region + ".s2s.speech.microsoft.com/speech/translation/cognitiveservices/v1";
            }
            var queryParams = {
                from: config.parameters.getProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage),
                to: config.parameters.getProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationToLanguages),
            };
            var voiceName = "voice";
            var featureName = "features";
            if (config.parameters.getProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationVoice, undefined) !== undefined) {
                queryParams[voiceName] = config.parameters.getProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationVoice);
                queryParams[featureName] = "texttospeech";
            }
            var headers = {};
            headers[authInfo.headerName] = authInfo.token;
            headers[ConnectionIdHeader] = connectionId;
            return new Exports_1.WebsocketConnection(endpoint, queryParams, headers, new Exports_3.WebsocketMessageFormatter(), Exports_1.ProxyInfo.fromRecognizerConfig(config), connectionId);
        };
    }
    return TranslationConnectionFactory;
}());
exports.TranslationConnectionFactory = TranslationConnectionFactory;

//# sourceMappingURL=TranslationConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationServiceRecognizer.js":
/*!**********************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationServiceRecognizer.js ***!
  \**********************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var Exports_2 = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var Exports_3 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
// tslint:disable-next-line:max-classes-per-file
var TranslationServiceRecognizer = /** @class */ (function (_super) {
    __extends(TranslationServiceRecognizer, _super);
    function TranslationServiceRecognizer(authentication, connectionFactory, audioSource, recognizerConfig, translationRecognizer) {
        var _this = _super.call(this, authentication, connectionFactory, audioSource, recognizerConfig, translationRecognizer) || this;
        _this.privTranslationRecognizer = translationRecognizer;
        return _this;
    }
    TranslationServiceRecognizer.prototype.processTypeSpecificMessages = function (connectionMessage, successCallback, errorCallBack) {
        var resultProps = new Exports_2.PropertyCollection();
        if (connectionMessage.messageType === Exports_1.MessageType.Text) {
            resultProps.setProperty(Exports_2.PropertyId.SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        switch (connectionMessage.path.toLowerCase()) {
            case "translation.hypothesis":
                var result = this.fireEventForResult(Exports_3.TranslationHypothesis.fromJSON(connectionMessage.textBody), resultProps);
                this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset + result.offset);
                if (!!this.privTranslationRecognizer.recognizing) {
                    try {
                        this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer, result);
                        /* tslint:disable:no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            case "translation.phrase":
                var translatedPhrase = Exports_3.TranslationPhrase.fromJSON(connectionMessage.textBody);
                this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + translatedPhrase.Offset + translatedPhrase.Duration);
                if (translatedPhrase.RecognitionStatus === Exports_3.RecognitionStatus.Success) {
                    // OK, the recognition was successful. How'd the translation do?
                    var result_1 = this.fireEventForResult(translatedPhrase, resultProps);
                    if (!!this.privTranslationRecognizer.recognized) {
                        try {
                            this.privTranslationRecognizer.recognized(this.privTranslationRecognizer, result_1);
                            /* tslint:disable:no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    // report result to promise.
                    if (!!successCallback) {
                        try {
                            successCallback(result_1.result);
                        }
                        catch (e) {
                            if (!!errorCallBack) {
                                errorCallBack(e);
                            }
                        }
                        // Only invoke the call back once.
                        // and if it's successful don't invoke the
                        // error after that.
                        successCallback = undefined;
                        errorCallBack = undefined;
                    }
                    break;
                }
                else {
                    var reason = Exports_3.EnumTranslation.implTranslateRecognitionResult(translatedPhrase.RecognitionStatus);
                    var result_2 = new Exports_2.TranslationRecognitionResult(undefined, this.privRequestSession.requestId, reason, translatedPhrase.Text, translatedPhrase.Duration, this.privRequestSession.currentTurnAudioOffset + translatedPhrase.Offset, undefined, connectionMessage.textBody, resultProps);
                    if (reason === Exports_2.ResultReason.Canceled) {
                        var cancelReason = Exports_3.EnumTranslation.implTranslateCancelResult(translatedPhrase.RecognitionStatus);
                        var ev = new Exports_2.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId, cancelReason, null, cancelReason === Exports_2.CancellationReason.Error ? Exports_2.CancellationErrorCode.ServiceError : Exports_2.CancellationErrorCode.NoError, result_2);
                        if (!!this.privTranslationRecognizer.canceled) {
                            try {
                                this.privTranslationRecognizer.canceled(this.privTranslationRecognizer, ev);
                                /* tslint:disable:no-empty */
                            }
                            catch (error) {
                                // Not going to let errors in the event handler
                                // trip things up.
                            }
                        }
                    }
                    else {
                        if (!(this.privRequestSession.isSpeechEnded && reason === Exports_2.ResultReason.NoMatch && translatedPhrase.RecognitionStatus !== Exports_3.RecognitionStatus.InitialSilenceTimeout)) {
                            var ev = new Exports_2.TranslationRecognitionEventArgs(result_2, result_2.offset, this.privRequestSession.sessionId);
                            if (!!this.privTranslationRecognizer.recognized) {
                                try {
                                    this.privTranslationRecognizer.recognized(this.privTranslationRecognizer, ev);
                                    /* tslint:disable:no-empty */
                                }
                                catch (error) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                        }
                    }
                    // report result to promise.
                    if (!!successCallback) {
                        try {
                            successCallback(result_2);
                        }
                        catch (e) {
                            if (!!errorCallBack) {
                                errorCallBack(e);
                            }
                        }
                        // Only invoke the call back once.
                        // and if it's successful don't invoke the
                        // error after that.
                        successCallback = undefined;
                        errorCallBack = undefined;
                    }
                }
                break;
            case "translation.synthesis":
                this.sendSynthesisAudio(connectionMessage.binaryBody, this.privRequestSession.sessionId);
                break;
            case "translation.synthesis.end":
                var synthEnd = Exports_3.TranslationSynthesisEnd.fromJSON(connectionMessage.textBody);
                switch (synthEnd.SynthesisStatus) {
                    case Exports_3.SynthesisStatus.Error:
                        if (!!this.privTranslationRecognizer.synthesizing) {
                            var result_3 = new Exports_2.TranslationSynthesisResult(Exports_2.ResultReason.Canceled, undefined);
                            var retEvent = new Exports_2.TranslationSynthesisEventArgs(result_3, this.privRequestSession.sessionId);
                            try {
                                this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer, retEvent);
                                /* tslint:disable:no-empty */
                            }
                            catch (error) {
                                // Not going to let errors in the event handler
                                // trip things up.
                            }
                        }
                        if (!!this.privTranslationRecognizer.canceled) {
                            // And raise a canceled event to send the rich(er) error message back.
                            var canceledResult = new Exports_2.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId, Exports_2.CancellationReason.Error, synthEnd.FailureReason, Exports_2.CancellationErrorCode.ServiceError, null);
                            try {
                                this.privTranslationRecognizer.canceled(this.privTranslationRecognizer, canceledResult);
                                /* tslint:disable:no-empty */
                            }
                            catch (error) {
                                // Not going to let errors in the event handler
                                // trip things up.
                            }
                        }
                        break;
                    case Exports_3.SynthesisStatus.Success:
                        this.sendSynthesisAudio(undefined, this.privRequestSession.sessionId);
                        break;
                    default:
                        break;
                }
                break;
            default:
                break;
        }
    };
    // Cancels recognition.
    TranslationServiceRecognizer.prototype.cancelRecognition = function (sessionId, requestId, cancellationReason, errorCode, error, cancelRecoCallback) {
        if (!!this.privTranslationRecognizer.canceled) {
            var properties = new Exports_2.PropertyCollection();
            properties.setProperty(Exports_3.CancellationErrorCodePropertyName, Exports_2.CancellationErrorCode[errorCode]);
            var cancelEvent = new Exports_2.TranslationRecognitionCanceledEventArgs(sessionId, cancellationReason, error, errorCode, undefined);
            try {
                this.privTranslationRecognizer.canceled(this.privTranslationRecognizer, cancelEvent);
                /* tslint:disable:no-empty */
            }
            catch (_a) { }
            if (!!cancelRecoCallback) {
                var result = new Exports_2.TranslationRecognitionResult(undefined, // Translations
                requestId, Exports_2.ResultReason.Canceled, undefined, // Text
                undefined, // Druation
                undefined, // Offset
                error, undefined, // Json
                properties);
                try {
                    cancelRecoCallback(result);
                    /* tslint:disable:no-empty */
                }
                catch (_b) { }
            }
        }
    };
    TranslationServiceRecognizer.prototype.fireEventForResult = function (serviceResult, properties) {
        var translations;
        if (undefined !== serviceResult.Translation.Translations) {
            translations = new Exports_2.Translations();
            for (var _i = 0, _a = serviceResult.Translation.Translations; _i < _a.length; _i++) {
                var translation = _a[_i];
                translations.set(translation.Language, translation.Text);
            }
        }
        var resultReason;
        if (serviceResult instanceof Exports_3.TranslationPhrase) {
            if (serviceResult.Translation.TranslationStatus === Exports_1.TranslationStatus.Success) {
                resultReason = Exports_2.ResultReason.TranslatedSpeech;
            }
            else {
                resultReason = Exports_2.ResultReason.RecognizedSpeech;
            }
        }
        else {
            resultReason = Exports_2.ResultReason.TranslatingSpeech;
        }
        var offset = serviceResult.Offset + this.privRequestSession.currentTurnAudioOffset;
        var result = new Exports_2.TranslationRecognitionResult(translations, this.privRequestSession.requestId, resultReason, serviceResult.Text, serviceResult.Duration, offset, serviceResult.Translation.FailureReason, JSON.stringify(serviceResult), properties);
        var ev = new Exports_2.TranslationRecognitionEventArgs(result, offset, this.privRequestSession.sessionId);
        return ev;
    };
    TranslationServiceRecognizer.prototype.sendSynthesisAudio = function (audio, sessionId) {
        var reason = (undefined === audio) ? Exports_2.ResultReason.SynthesizingAudioCompleted : Exports_2.ResultReason.SynthesizingAudio;
        var result = new Exports_2.TranslationSynthesisResult(reason, audio);
        var retEvent = new Exports_2.TranslationSynthesisEventArgs(result, sessionId);
        if (!!this.privTranslationRecognizer.synthesizing) {
            try {
                this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer, retEvent);
                /* tslint:disable:no-empty */
            }
            catch (error) {
                // Not going to let errors in the event handler
                // trip things up.
            }
        }
    };
    return TranslationServiceRecognizer;
}(Exports_3.ServiceRecognizerBase));
exports.TranslationServiceRecognizer = TranslationServiceRecognizer;

//# sourceMappingURL=TranslationServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationStatus.js":
/*!***********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationStatus.js ***!
  \***********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Defines translation status.
 * @class TranslationStatus
 */
var TranslationStatus;
(function (TranslationStatus) {
    /**
     * @member TranslationStatus.Success
     */
    TranslationStatus[TranslationStatus["Success"] = 0] = "Success";
    /**
     * @member TranslationStatus.Error
     */
    TranslationStatus[TranslationStatus["Error"] = 1] = "Error";
})(TranslationStatus = exports.TranslationStatus || (exports.TranslationStatus = {}));

//# sourceMappingURL=TranslationStatus.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/WebsocketMessageFormatter.js":
/*!*******************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/WebsocketMessageFormatter.js ***!
  \*******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var CRLF = "\r\n";
var WebsocketMessageFormatter = /** @class */ (function () {
    function WebsocketMessageFormatter() {
        var _this = this;
        this.toConnectionMessage = function (message) {
            var deferral = new Exports_1.Deferred();
            try {
                if (message.messageType === Exports_1.MessageType.Text) {
                    var textMessage = message.textContent;
                    var headers = {};
                    var body = null;
                    if (textMessage) {
                        var headerBodySplit = textMessage.split("\r\n\r\n");
                        if (headerBodySplit && headerBodySplit.length > 0) {
                            headers = _this.parseHeaders(headerBodySplit[0]);
                            if (headerBodySplit.length > 1) {
                                body = headerBodySplit[1];
                            }
                        }
                    }
                    deferral.resolve(new Exports_1.ConnectionMessage(message.messageType, body, headers, message.id));
                }
                else if (message.messageType === Exports_1.MessageType.Binary) {
                    var binaryMessage = message.binaryContent;
                    var headers = {};
                    var body = null;
                    if (!binaryMessage || binaryMessage.byteLength < 2) {
                        throw new Error("Invalid binary message format. Header length missing.");
                    }
                    var dataView = new DataView(binaryMessage);
                    var headerLength = dataView.getInt16(0);
                    if (binaryMessage.byteLength < headerLength + 2) {
                        throw new Error("Invalid binary message format. Header content missing.");
                    }
                    var headersString = "";
                    for (var i = 0; i < headerLength; i++) {
                        headersString += String.fromCharCode((dataView).getInt8(i + 2));
                    }
                    headers = _this.parseHeaders(headersString);
                    if (binaryMessage.byteLength > headerLength + 2) {
                        body = binaryMessage.slice(2 + headerLength);
                    }
                    deferral.resolve(new Exports_1.ConnectionMessage(message.messageType, body, headers, message.id));
                }
            }
            catch (e) {
                deferral.reject("Error formatting the message. Error: " + e);
            }
            return deferral.promise();
        };
        this.fromConnectionMessage = function (message) {
            var deferral = new Exports_1.Deferred();
            try {
                if (message.messageType === Exports_1.MessageType.Text) {
                    var payload = "" + _this.makeHeaders(message) + CRLF + (message.textBody ? message.textBody : "");
                    deferral.resolve(new Exports_1.RawWebsocketMessage(Exports_1.MessageType.Text, payload, message.id));
                }
                else if (message.messageType === Exports_1.MessageType.Binary) {
                    var headersString = _this.makeHeaders(message);
                    var content = message.binaryBody;
                    var headerInt8Array = new Int8Array(_this.stringToArrayBuffer(headersString));
                    var payload = new ArrayBuffer(2 + headerInt8Array.byteLength + (content ? content.byteLength : 0));
                    var dataView = new DataView(payload);
                    dataView.setInt16(0, headerInt8Array.length);
                    for (var i = 0; i < headerInt8Array.byteLength; i++) {
                        dataView.setInt8(2 + i, headerInt8Array[i]);
                    }
                    if (content) {
                        var bodyInt8Array = new Int8Array(content);
                        for (var i = 0; i < bodyInt8Array.byteLength; i++) {
                            dataView.setInt8(2 + headerInt8Array.byteLength + i, bodyInt8Array[i]);
                        }
                    }
                    deferral.resolve(new Exports_1.RawWebsocketMessage(Exports_1.MessageType.Binary, payload, message.id));
                }
            }
            catch (e) {
                deferral.reject("Error formatting the message. " + e);
            }
            return deferral.promise();
        };
        this.makeHeaders = function (message) {
            var headersString = "";
            if (message.headers) {
                for (var header in message.headers) {
                    if (header) {
                        headersString += header + ": " + message.headers[header] + CRLF;
                    }
                }
            }
            return headersString;
        };
        this.parseHeaders = function (headersString) {
            var headers = {};
            if (headersString) {
                var headerMatches = headersString.match(/[^\r\n]+/g);
                if (headers) {
                    for (var _i = 0, headerMatches_1 = headerMatches; _i < headerMatches_1.length; _i++) {
                        var header = headerMatches_1[_i];
                        if (header) {
                            var separatorIndex = header.indexOf(":");
                            var headerName = separatorIndex > 0 ? header.substr(0, separatorIndex).trim().toLowerCase() : header;
                            var headerValue = separatorIndex > 0 && header.length > (separatorIndex + 1) ?
                                header.substr(separatorIndex + 1).trim() :
                                "";
                            headers[headerName] = headerValue;
                        }
                    }
                }
            }
            return headers;
        };
        this.stringToArrayBuffer = function (str) {
            var buffer = new ArrayBuffer(str.length);
            var view = new DataView(buffer);
            for (var i = 0; i < str.length; i++) {
                view.setUint8(i, str.charCodeAt(i));
            }
            return buffer;
        };
    }
    return WebsocketMessageFormatter;
}());
exports.WebsocketMessageFormatter = WebsocketMessageFormatter;

//# sourceMappingURL=WebsocketMessageFormatter.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/AudioSourceEvents.js":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/AudioSourceEvents.js ***!
  \****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var PlatformEvent_1 = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js");
var AudioSourceEvent = /** @class */ (function (_super) {
    __extends(AudioSourceEvent, _super);
    function AudioSourceEvent(eventName, audioSourceId, eventType) {
        if (eventType === void 0) { eventType = PlatformEvent_1.EventType.Info; }
        var _this = _super.call(this, eventName, eventType) || this;
        _this.privAudioSourceId = audioSourceId;
        return _this;
    }
    Object.defineProperty(AudioSourceEvent.prototype, "audioSourceId", {
        get: function () {
            return this.privAudioSourceId;
        },
        enumerable: true,
        configurable: true
    });
    return AudioSourceEvent;
}(PlatformEvent_1.PlatformEvent));
exports.AudioSourceEvent = AudioSourceEvent;
// tslint:disable-next-line:max-classes-per-file
var AudioSourceInitializingEvent = /** @class */ (function (_super) {
    __extends(AudioSourceInitializingEvent, _super);
    function AudioSourceInitializingEvent(audioSourceId) {
        return _super.call(this, "AudioSourceInitializingEvent", audioSourceId) || this;
    }
    return AudioSourceInitializingEvent;
}(AudioSourceEvent));
exports.AudioSourceInitializingEvent = AudioSourceInitializingEvent;
// tslint:disable-next-line:max-classes-per-file
var AudioSourceReadyEvent = /** @class */ (function (_super) {
    __extends(AudioSourceReadyEvent, _super);
    function AudioSourceReadyEvent(audioSourceId) {
        return _super.call(this, "AudioSourceReadyEvent", audioSourceId) || this;
    }
    return AudioSourceReadyEvent;
}(AudioSourceEvent));
exports.AudioSourceReadyEvent = AudioSourceReadyEvent;
// tslint:disable-next-line:max-classes-per-file
var AudioSourceOffEvent = /** @class */ (function (_super) {
    __extends(AudioSourceOffEvent, _super);
    function AudioSourceOffEvent(audioSourceId) {
        return _super.call(this, "AudioSourceOffEvent", audioSourceId) || this;
    }
    return AudioSourceOffEvent;
}(AudioSourceEvent));
exports.AudioSourceOffEvent = AudioSourceOffEvent;
// tslint:disable-next-line:max-classes-per-file
var AudioSourceErrorEvent = /** @class */ (function (_super) {
    __extends(AudioSourceErrorEvent, _super);
    function AudioSourceErrorEvent(audioSourceId, error) {
        var _this = _super.call(this, "AudioSourceErrorEvent", audioSourceId, PlatformEvent_1.EventType.Error) || this;
        _this.privError = error;
        return _this;
    }
    Object.defineProperty(AudioSourceErrorEvent.prototype, "error", {
        get: function () {
            return this.privError;
        },
        enumerable: true,
        configurable: true
    });
    return AudioSourceErrorEvent;
}(AudioSourceEvent));
exports.AudioSourceErrorEvent = AudioSourceErrorEvent;
// tslint:disable-next-line:max-classes-per-file
var AudioStreamNodeEvent = /** @class */ (function (_super) {
    __extends(AudioStreamNodeEvent, _super);
    function AudioStreamNodeEvent(eventName, audioSourceId, audioNodeId) {
        var _this = _super.call(this, eventName, audioSourceId) || this;
        _this.privAudioNodeId = audioNodeId;
        return _this;
    }
    Object.defineProperty(AudioStreamNodeEvent.prototype, "audioNodeId", {
        get: function () {
            return this.privAudioNodeId;
        },
        enumerable: true,
        configurable: true
    });
    return AudioStreamNodeEvent;
}(AudioSourceEvent));
exports.AudioStreamNodeEvent = AudioStreamNodeEvent;
// tslint:disable-next-line:max-classes-per-file
var AudioStreamNodeAttachingEvent = /** @class */ (function (_super) {
    __extends(AudioStreamNodeAttachingEvent, _super);
    function AudioStreamNodeAttachingEvent(audioSourceId, audioNodeId) {
        return _super.call(this, "AudioStreamNodeAttachingEvent", audioSourceId, audioNodeId) || this;
    }
    return AudioStreamNodeAttachingEvent;
}(AudioStreamNodeEvent));
exports.AudioStreamNodeAttachingEvent = AudioStreamNodeAttachingEvent;
// tslint:disable-next-line:max-classes-per-file
var AudioStreamNodeAttachedEvent = /** @class */ (function (_super) {
    __extends(AudioStreamNodeAttachedEvent, _super);
    function AudioStreamNodeAttachedEvent(audioSourceId, audioNodeId) {
        return _super.call(this, "AudioStreamNodeAttachedEvent", audioSourceId, audioNodeId) || this;
    }
    return AudioStreamNodeAttachedEvent;
}(AudioStreamNodeEvent));
exports.AudioStreamNodeAttachedEvent = AudioStreamNodeAttachedEvent;
// tslint:disable-next-line:max-classes-per-file
var AudioStreamNodeDetachedEvent = /** @class */ (function (_super) {
    __extends(AudioStreamNodeDetachedEvent, _super);
    function AudioStreamNodeDetachedEvent(audioSourceId, audioNodeId) {
        return _super.call(this, "AudioStreamNodeDetachedEvent", audioSourceId, audioNodeId) || this;
    }
    return AudioStreamNodeDetachedEvent;
}(AudioStreamNodeEvent));
exports.AudioStreamNodeDetachedEvent = AudioStreamNodeDetachedEvent;
// tslint:disable-next-line:max-classes-per-file
var AudioStreamNodeErrorEvent = /** @class */ (function (_super) {
    __extends(AudioStreamNodeErrorEvent, _super);
    function AudioStreamNodeErrorEvent(audioSourceId, audioNodeId, error) {
        var _this = _super.call(this, "AudioStreamNodeErrorEvent", audioSourceId, audioNodeId) || this;
        _this.privError = error;
        return _this;
    }
    Object.defineProperty(AudioStreamNodeErrorEvent.prototype, "error", {
        get: function () {
            return this.privError;
        },
        enumerable: true,
        configurable: true
    });
    return AudioStreamNodeErrorEvent;
}(AudioStreamNodeEvent));
exports.AudioStreamNodeErrorEvent = AudioStreamNodeErrorEvent;

//# sourceMappingURL=AudioSourceEvents.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ChunkedArrayBufferStream.js":
/*!***********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ChunkedArrayBufferStream.js ***!
  \***********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var ChunkedArrayBufferStream = /** @class */ (function (_super) {
    __extends(ChunkedArrayBufferStream, _super);
    function ChunkedArrayBufferStream(targetChunkSize, streamId) {
        var _this = _super.call(this, streamId) || this;
        _this.privTargetChunkSize = targetChunkSize;
        _this.privNextBufferReadyBytes = 0;
        return _this;
    }
    ChunkedArrayBufferStream.prototype.writeStreamChunk = function (chunk) {
        // No pending write, and the buffer is the right size so write it.
        if (chunk.isEnd ||
            (0 === this.privNextBufferReadyBytes && chunk.buffer.byteLength === this.privTargetChunkSize)) {
            _super.prototype.writeStreamChunk.call(this, chunk);
            return;
        }
        var bytesCopiedFromBuffer = 0;
        while (bytesCopiedFromBuffer < chunk.buffer.byteLength) {
            // Fill the next buffer.
            if (undefined === this.privNextBufferToWrite) {
                this.privNextBufferToWrite = new ArrayBuffer(this.privTargetChunkSize);
                this.privNextBufferStartTime = chunk.timeReceived;
            }
            // Find out how many bytes we can copy into the read buffer.
            var bytesToCopy = Math.min(chunk.buffer.byteLength - bytesCopiedFromBuffer, this.privTargetChunkSize - this.privNextBufferReadyBytes);
            var targetView = new Uint8Array(this.privNextBufferToWrite);
            var sourceView = new Uint8Array(chunk.buffer.slice(bytesCopiedFromBuffer, bytesToCopy + bytesCopiedFromBuffer));
            targetView.set(sourceView, this.privNextBufferReadyBytes);
            this.privNextBufferReadyBytes += bytesToCopy;
            bytesCopiedFromBuffer += bytesToCopy;
            // Are we ready to write?
            if (this.privNextBufferReadyBytes === this.privTargetChunkSize) {
                _super.prototype.writeStreamChunk.call(this, {
                    buffer: this.privNextBufferToWrite,
                    isEnd: false,
                    timeReceived: this.privNextBufferStartTime,
                });
                this.privNextBufferReadyBytes = 0;
                this.privNextBufferToWrite = undefined;
            }
        }
    };
    ChunkedArrayBufferStream.prototype.close = function () {
        // Send whatever is pending, then close the base class.
        if (0 !== this.privNextBufferReadyBytes && !this.isClosed) {
            _super.prototype.writeStreamChunk.call(this, {
                buffer: this.privNextBufferToWrite.slice(0, this.privNextBufferReadyBytes),
                isEnd: false,
                timeReceived: this.privNextBufferStartTime,
            });
        }
        _super.prototype.close.call(this);
    };
    return ChunkedArrayBufferStream;
}(Exports_1.Stream));
exports.ChunkedArrayBufferStream = ChunkedArrayBufferStream;

//# sourceMappingURL=ChunkedArrayBufferStream.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionEvents.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionEvents.js ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var PlatformEvent_1 = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js");
var ConnectionEvent = /** @class */ (function (_super) {
    __extends(ConnectionEvent, _super);
    function ConnectionEvent(eventName, connectionId, eventType) {
        if (eventType === void 0) { eventType = PlatformEvent_1.EventType.Info; }
        var _this = _super.call(this, eventName, eventType) || this;
        _this.privConnectionId = connectionId;
        return _this;
    }
    Object.defineProperty(ConnectionEvent.prototype, "connectionId", {
        get: function () {
            return this.privConnectionId;
        },
        enumerable: true,
        configurable: true
    });
    return ConnectionEvent;
}(PlatformEvent_1.PlatformEvent));
exports.ConnectionEvent = ConnectionEvent;
// tslint:disable-next-line:max-classes-per-file
var ConnectionStartEvent = /** @class */ (function (_super) {
    __extends(ConnectionStartEvent, _super);
    function ConnectionStartEvent(connectionId, uri, headers) {
        var _this = _super.call(this, "ConnectionStartEvent", connectionId) || this;
        _this.privUri = uri;
        _this.privHeaders = headers;
        return _this;
    }
    Object.defineProperty(ConnectionStartEvent.prototype, "uri", {
        get: function () {
            return this.privUri;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionStartEvent.prototype, "headers", {
        get: function () {
            return this.privHeaders;
        },
        enumerable: true,
        configurable: true
    });
    return ConnectionStartEvent;
}(ConnectionEvent));
exports.ConnectionStartEvent = ConnectionStartEvent;
// tslint:disable-next-line:max-classes-per-file
var ConnectionEstablishedEvent = /** @class */ (function (_super) {
    __extends(ConnectionEstablishedEvent, _super);
    function ConnectionEstablishedEvent(connectionId, metadata) {
        return _super.call(this, "ConnectionEstablishedEvent", connectionId) || this;
    }
    return ConnectionEstablishedEvent;
}(ConnectionEvent));
exports.ConnectionEstablishedEvent = ConnectionEstablishedEvent;
// tslint:disable-next-line:max-classes-per-file
var ConnectionClosedEvent = /** @class */ (function (_super) {
    __extends(ConnectionClosedEvent, _super);
    function ConnectionClosedEvent(connectionId, statusCode, reason) {
        var _this = _super.call(this, "ConnectionClosedEvent", connectionId, PlatformEvent_1.EventType.Debug) || this;
        _this.privRreason = reason;
        _this.privStatusCode = statusCode;
        return _this;
    }
    Object.defineProperty(ConnectionClosedEvent.prototype, "reason", {
        get: function () {
            return this.privRreason;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionClosedEvent.prototype, "statusCode", {
        get: function () {
            return this.privStatusCode;
        },
        enumerable: true,
        configurable: true
    });
    return ConnectionClosedEvent;
}(ConnectionEvent));
exports.ConnectionClosedEvent = ConnectionClosedEvent;
// tslint:disable-next-line:max-classes-per-file
var ConnectionEstablishErrorEvent = /** @class */ (function (_super) {
    __extends(ConnectionEstablishErrorEvent, _super);
    function ConnectionEstablishErrorEvent(connectionId, statuscode, reason) {
        var _this = _super.call(this, "ConnectionEstablishErrorEvent", connectionId, PlatformEvent_1.EventType.Error) || this;
        _this.privStatusCode = statuscode;
        _this.privReason = reason;
        return _this;
    }
    Object.defineProperty(ConnectionEstablishErrorEvent.prototype, "reason", {
        get: function () {
            return this.privReason;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionEstablishErrorEvent.prototype, "statusCode", {
        get: function () {
            return this.privStatusCode;
        },
        enumerable: true,
        configurable: true
    });
    return ConnectionEstablishErrorEvent;
}(ConnectionEvent));
exports.ConnectionEstablishErrorEvent = ConnectionEstablishErrorEvent;
// tslint:disable-next-line:max-classes-per-file
var ConnectionMessageReceivedEvent = /** @class */ (function (_super) {
    __extends(ConnectionMessageReceivedEvent, _super);
    function ConnectionMessageReceivedEvent(connectionId, networkReceivedTimeISO, message) {
        var _this = _super.call(this, "ConnectionMessageReceivedEvent", connectionId) || this;
        _this.privNetworkReceivedTime = networkReceivedTimeISO;
        _this.privMessage = message;
        return _this;
    }
    Object.defineProperty(ConnectionMessageReceivedEvent.prototype, "networkReceivedTime", {
        get: function () {
            return this.privNetworkReceivedTime;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionMessageReceivedEvent.prototype, "message", {
        get: function () {
            return this.privMessage;
        },
        enumerable: true,
        configurable: true
    });
    return ConnectionMessageReceivedEvent;
}(ConnectionEvent));
exports.ConnectionMessageReceivedEvent = ConnectionMessageReceivedEvent;
// tslint:disable-next-line:max-classes-per-file
var ConnectionMessageSentEvent = /** @class */ (function (_super) {
    __extends(ConnectionMessageSentEvent, _super);
    function ConnectionMessageSentEvent(connectionId, networkSentTimeISO, message) {
        var _this = _super.call(this, "ConnectionMessageSentEvent", connectionId) || this;
        _this.privNetworkSentTime = networkSentTimeISO;
        _this.privMessage = message;
        return _this;
    }
    Object.defineProperty(ConnectionMessageSentEvent.prototype, "networkSentTime", {
        get: function () {
            return this.privNetworkSentTime;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionMessageSentEvent.prototype, "message", {
        get: function () {
            return this.privMessage;
        },
        enumerable: true,
        configurable: true
    });
    return ConnectionMessageSentEvent;
}(ConnectionEvent));
exports.ConnectionMessageSentEvent = ConnectionMessageSentEvent;

//# sourceMappingURL=ConnectionEvents.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionMessage.js":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionMessage.js ***!
  \****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Error_1 = __webpack_require__(/*! ./Error */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js");
var Guid_1 = __webpack_require__(/*! ./Guid */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js");
var MessageType;
(function (MessageType) {
    MessageType[MessageType["Text"] = 0] = "Text";
    MessageType[MessageType["Binary"] = 1] = "Binary";
})(MessageType = exports.MessageType || (exports.MessageType = {}));
var ConnectionMessage = /** @class */ (function () {
    function ConnectionMessage(messageType, body, headers, id) {
        this.privBody = null;
        if (messageType === MessageType.Text && body && !(typeof (body) === "string")) {
            throw new Error_1.InvalidOperationError("Payload must be a string");
        }
        if (messageType === MessageType.Binary && body && !(body instanceof ArrayBuffer)) {
            throw new Error_1.InvalidOperationError("Payload must be ArrayBuffer");
        }
        this.privMessageType = messageType;
        this.privBody = body;
        this.privHeaders = headers ? headers : {};
        this.privId = id ? id : Guid_1.createNoDashGuid();
    }
    Object.defineProperty(ConnectionMessage.prototype, "messageType", {
        get: function () {
            return this.privMessageType;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionMessage.prototype, "headers", {
        get: function () {
            return this.privHeaders;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionMessage.prototype, "body", {
        get: function () {
            return this.privBody;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionMessage.prototype, "textBody", {
        get: function () {
            if (this.privMessageType === MessageType.Binary) {
                throw new Error_1.InvalidOperationError("Not supported for binary message");
            }
            return this.privBody;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionMessage.prototype, "binaryBody", {
        get: function () {
            if (this.privMessageType === MessageType.Text) {
                throw new Error_1.InvalidOperationError("Not supported for text message");
            }
            return this.privBody;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionMessage.prototype, "id", {
        get: function () {
            return this.privId;
        },
        enumerable: true,
        configurable: true
    });
    return ConnectionMessage;
}());
exports.ConnectionMessage = ConnectionMessage;

//# sourceMappingURL=ConnectionMessage.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionOpenResponse.js":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionOpenResponse.js ***!
  \*********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var ConnectionOpenResponse = /** @class */ (function () {
    function ConnectionOpenResponse(statusCode, reason) {
        this.privStatusCode = statusCode;
        this.privReason = reason;
    }
    Object.defineProperty(ConnectionOpenResponse.prototype, "statusCode", {
        get: function () {
            return this.privStatusCode;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ConnectionOpenResponse.prototype, "reason", {
        get: function () {
            return this.privReason;
        },
        enumerable: true,
        configurable: true
    });
    return ConnectionOpenResponse;
}());
exports.ConnectionOpenResponse = ConnectionOpenResponse;

//# sourceMappingURL=ConnectionOpenResponse.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * The error that is thrown when an argument passed in is null.
 *
 * @export
 * @class ArgumentNullError
 * @extends {Error}
 */
var ArgumentNullError = /** @class */ (function (_super) {
    __extends(ArgumentNullError, _super);
    /**
     * Creates an instance of ArgumentNullError.
     *
     * @param {string} argumentName - Name of the argument that is null
     *
     * @memberOf ArgumentNullError
     */
    function ArgumentNullError(argumentName) {
        var _this = _super.call(this, argumentName) || this;
        _this.name = "ArgumentNull";
        _this.message = argumentName;
        return _this;
    }
    return ArgumentNullError;
}(Error));
exports.ArgumentNullError = ArgumentNullError;
/**
 * The error that is thrown when an invalid operation is performed in the code.
 *
 * @export
 * @class InvalidOperationError
 * @extends {Error}
 */
// tslint:disable-next-line:max-classes-per-file
var InvalidOperationError = /** @class */ (function (_super) {
    __extends(InvalidOperationError, _super);
    /**
     * Creates an instance of InvalidOperationError.
     *
     * @param {string} error - The error
     *
     * @memberOf InvalidOperationError
     */
    function InvalidOperationError(error) {
        var _this = _super.call(this, error) || this;
        _this.name = "InvalidOperation";
        _this.message = error;
        return _this;
    }
    return InvalidOperationError;
}(Error));
exports.InvalidOperationError = InvalidOperationError;
/**
 * The error that is thrown when an object is disposed.
 *
 * @export
 * @class ObjectDisposedError
 * @extends {Error}
 */
// tslint:disable-next-line:max-classes-per-file
var ObjectDisposedError = /** @class */ (function (_super) {
    __extends(ObjectDisposedError, _super);
    /**
     * Creates an instance of ObjectDisposedError.
     *
     * @param {string} objectName - The object that is disposed
     * @param {string} error - The error
     *
     * @memberOf ObjectDisposedError
     */
    function ObjectDisposedError(objectName, error) {
        var _this = _super.call(this, error) || this;
        _this.name = objectName + "ObjectDisposed";
        _this.message = error;
        return _this;
    }
    return ObjectDisposedError;
}(Error));
exports.ObjectDisposedError = ObjectDisposedError;

//# sourceMappingURL=Error.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/EventSource.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/EventSource.js ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Error_1 = __webpack_require__(/*! ./Error */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js");
var Guid_1 = __webpack_require__(/*! ./Guid */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js");
var EventSource = /** @class */ (function () {
    function EventSource(metadata) {
        var _this = this;
        this.privEventListeners = {};
        this.privIsDisposed = false;
        this.onEvent = function (event) {
            if (_this.isDisposed()) {
                throw (new Error_1.ObjectDisposedError("EventSource"));
            }
            if (_this.metadata) {
                for (var paramName in _this.metadata) {
                    if (paramName) {
                        if (event.metadata) {
                            if (!event.metadata[paramName]) {
                                event.metadata[paramName] = _this.metadata[paramName];
                            }
                        }
                    }
                }
            }
            for (var eventId in _this.privEventListeners) {
                if (eventId && _this.privEventListeners[eventId]) {
                    _this.privEventListeners[eventId](event);
                }
            }
        };
        this.attach = function (onEventCallback) {
            var id = Guid_1.createNoDashGuid();
            _this.privEventListeners[id] = onEventCallback;
            return {
                detach: function () {
                    delete _this.privEventListeners[id];
                },
            };
        };
        this.attachListener = function (listener) {
            return _this.attach(listener.onEvent);
        };
        this.isDisposed = function () {
            return _this.privIsDisposed;
        };
        this.dispose = function () {
            _this.privEventListeners = null;
            _this.privIsDisposed = true;
        };
        this.privMetadata = metadata;
    }
    Object.defineProperty(EventSource.prototype, "metadata", {
        get: function () {
            return this.privMetadata;
        },
        enumerable: true,
        configurable: true
    });
    return EventSource;
}());
exports.EventSource = EventSource;

//# sourceMappingURL=EventSource.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Events.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Events.js ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Error_1 = __webpack_require__(/*! ./Error */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js");
var EventSource_1 = __webpack_require__(/*! ./EventSource */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/EventSource.js");
var Events = /** @class */ (function () {
    function Events() {
    }
    Object.defineProperty(Events, "instance", {
        get: function () {
            return Events.privInstance;
        },
        enumerable: true,
        configurable: true
    });
    Events.privInstance = new EventSource_1.EventSource();
    Events.setEventSource = function (eventSource) {
        if (!eventSource) {
            throw new Error_1.ArgumentNullError("eventSource");
        }
        Events.privInstance = eventSource;
    };
    return Events;
}());
exports.Events = Events;

//# sourceMappingURL=Events.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js ***!
  \******************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(__webpack_require__(/*! ./AudioSourceEvents */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/AudioSourceEvents.js"));
__export(__webpack_require__(/*! ./ConnectionEvents */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionEvents.js"));
__export(__webpack_require__(/*! ./ConnectionMessage */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionMessage.js"));
__export(__webpack_require__(/*! ./ConnectionOpenResponse */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionOpenResponse.js"));
__export(__webpack_require__(/*! ./Error */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js"));
__export(__webpack_require__(/*! ./Events */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Events.js"));
__export(__webpack_require__(/*! ./EventSource */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/EventSource.js"));
__export(__webpack_require__(/*! ./Guid */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js"));
__export(__webpack_require__(/*! ./IConnection */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IConnection.js"));
__export(__webpack_require__(/*! ./List */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/List.js"));
__export(__webpack_require__(/*! ./PlatformEvent */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js"));
__export(__webpack_require__(/*! ./Promise */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Promise.js"));
__export(__webpack_require__(/*! ./Queue */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Queue.js"));
__export(__webpack_require__(/*! ./RawWebsocketMessage */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/RawWebsocketMessage.js"));
__export(__webpack_require__(/*! ./RiffPcmEncoder */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/RiffPcmEncoder.js"));
__export(__webpack_require__(/*! ./Stream */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Stream.js"));
var TranslationStatus_1 = __webpack_require__(/*! ../common.speech/TranslationStatus */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationStatus.js");
exports.TranslationStatus = TranslationStatus_1.TranslationStatus;
__export(__webpack_require__(/*! ./ChunkedArrayBufferStream */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ChunkedArrayBufferStream.js"));

//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js ***!
  \***************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var createGuid = function () {
    var d = new Date().getTime();
    var guid = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (c) {
        var r = (d + Math.random() * 16) % 16 | 0;
        d = Math.floor(d / 16);
        return (c === "x" ? r : (r & 0x3 | 0x8)).toString(16);
    });
    return guid;
};
exports.createGuid = createGuid;
var createNoDashGuid = function () {
    return createGuid().replace(new RegExp("-", "g"), "").toUpperCase();
};
exports.createNoDashGuid = createNoDashGuid;

//# sourceMappingURL=Guid.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IConnection.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IConnection.js ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var ConnectionState;
(function (ConnectionState) {
    ConnectionState[ConnectionState["None"] = 0] = "None";
    ConnectionState[ConnectionState["Connected"] = 1] = "Connected";
    ConnectionState[ConnectionState["Connecting"] = 2] = "Connecting";
    ConnectionState[ConnectionState["Disconnected"] = 3] = "Disconnected";
})(ConnectionState = exports.ConnectionState || (exports.ConnectionState = {}));

//# sourceMappingURL=IConnection.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/List.js":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/List.js ***!
  \***************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Error_1 = __webpack_require__(/*! ./Error */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js");
var List = /** @class */ (function () {
    function List(list) {
        var _this = this;
        this.privSubscriptionIdCounter = 0;
        this.privAddSubscriptions = {};
        this.privRemoveSubscriptions = {};
        this.privDisposedSubscriptions = {};
        this.privDisposeReason = null;
        this.get = function (itemIndex) {
            _this.throwIfDisposed();
            return _this.privList[itemIndex];
        };
        this.first = function () {
            return _this.get(0);
        };
        this.last = function () {
            return _this.get(_this.length() - 1);
        };
        this.add = function (item) {
            _this.throwIfDisposed();
            _this.insertAt(_this.privList.length, item);
        };
        this.insertAt = function (index, item) {
            _this.throwIfDisposed();
            if (index === 0) {
                _this.privList.unshift(item);
            }
            else if (index === _this.privList.length) {
                _this.privList.push(item);
            }
            else {
                _this.privList.splice(index, 0, item);
            }
            _this.triggerSubscriptions(_this.privAddSubscriptions);
        };
        this.removeFirst = function () {
            _this.throwIfDisposed();
            return _this.removeAt(0);
        };
        this.removeLast = function () {
            _this.throwIfDisposed();
            return _this.removeAt(_this.length() - 1);
        };
        this.removeAt = function (index) {
            _this.throwIfDisposed();
            return _this.remove(index, 1)[0];
        };
        this.remove = function (index, count) {
            _this.throwIfDisposed();
            var removedElements = _this.privList.splice(index, count);
            _this.triggerSubscriptions(_this.privRemoveSubscriptions);
            return removedElements;
        };
        this.clear = function () {
            _this.throwIfDisposed();
            _this.remove(0, _this.length());
        };
        this.length = function () {
            _this.throwIfDisposed();
            return _this.privList.length;
        };
        this.onAdded = function (addedCallback) {
            _this.throwIfDisposed();
            var subscriptionId = _this.privSubscriptionIdCounter++;
            _this.privAddSubscriptions[subscriptionId] = addedCallback;
            return {
                detach: function () {
                    delete _this.privAddSubscriptions[subscriptionId];
                },
            };
        };
        this.onRemoved = function (removedCallback) {
            _this.throwIfDisposed();
            var subscriptionId = _this.privSubscriptionIdCounter++;
            _this.privRemoveSubscriptions[subscriptionId] = removedCallback;
            return {
                detach: function () {
                    delete _this.privRemoveSubscriptions[subscriptionId];
                },
            };
        };
        this.onDisposed = function (disposedCallback) {
            _this.throwIfDisposed();
            var subscriptionId = _this.privSubscriptionIdCounter++;
            _this.privDisposedSubscriptions[subscriptionId] = disposedCallback;
            return {
                detach: function () {
                    delete _this.privDisposedSubscriptions[subscriptionId];
                },
            };
        };
        this.join = function (seperator) {
            _this.throwIfDisposed();
            return _this.privList.join(seperator);
        };
        this.toArray = function () {
            var cloneCopy = Array();
            _this.privList.forEach(function (val) {
                cloneCopy.push(val);
            });
            return cloneCopy;
        };
        this.any = function (callback) {
            _this.throwIfDisposed();
            if (callback) {
                return _this.where(callback).length() > 0;
            }
            else {
                return _this.length() > 0;
            }
        };
        this.all = function (callback) {
            _this.throwIfDisposed();
            return _this.where(callback).length() === _this.length();
        };
        this.forEach = function (callback) {
            _this.throwIfDisposed();
            for (var i = 0; i < _this.length(); i++) {
                callback(_this.privList[i], i);
            }
        };
        this.select = function (callback) {
            _this.throwIfDisposed();
            var selectList = [];
            for (var i = 0; i < _this.privList.length; i++) {
                selectList.push(callback(_this.privList[i], i));
            }
            return new List(selectList);
        };
        this.where = function (callback) {
            _this.throwIfDisposed();
            var filteredList = new List();
            for (var i = 0; i < _this.privList.length; i++) {
                if (callback(_this.privList[i], i)) {
                    filteredList.add(_this.privList[i]);
                }
            }
            return filteredList;
        };
        this.orderBy = function (compareFn) {
            _this.throwIfDisposed();
            var clonedArray = _this.toArray();
            var orderedArray = clonedArray.sort(compareFn);
            return new List(orderedArray);
        };
        this.orderByDesc = function (compareFn) {
            _this.throwIfDisposed();
            return _this.orderBy(function (a, b) { return compareFn(b, a); });
        };
        this.clone = function () {
            _this.throwIfDisposed();
            return new List(_this.toArray());
        };
        this.concat = function (list) {
            _this.throwIfDisposed();
            return new List(_this.privList.concat(list.toArray()));
        };
        this.concatArray = function (array) {
            _this.throwIfDisposed();
            return new List(_this.privList.concat(array));
        };
        this.isDisposed = function () {
            return _this.privList == null;
        };
        this.dispose = function (reason) {
            if (!_this.isDisposed()) {
                _this.privDisposeReason = reason;
                _this.privList = null;
                _this.privAddSubscriptions = null;
                _this.privRemoveSubscriptions = null;
                _this.triggerSubscriptions(_this.privDisposedSubscriptions);
            }
        };
        this.throwIfDisposed = function () {
            if (_this.isDisposed()) {
                throw new Error_1.ObjectDisposedError("List", _this.privDisposeReason);
            }
        };
        this.triggerSubscriptions = function (subscriptions) {
            if (subscriptions) {
                for (var subscriptionId in subscriptions) {
                    if (subscriptionId) {
                        subscriptions[subscriptionId]();
                    }
                }
            }
        };
        this.privList = [];
        // copy the list rather than taking as is.
        if (list) {
            for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {
                var item = list_1[_i];
                this.privList.push(item);
            }
        }
    }
    return List;
}());
exports.List = List;

//# sourceMappingURL=List.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Guid_1 = __webpack_require__(/*! ./Guid */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js");
var EventType;
(function (EventType) {
    EventType[EventType["Debug"] = 0] = "Debug";
    EventType[EventType["Info"] = 1] = "Info";
    EventType[EventType["Warning"] = 2] = "Warning";
    EventType[EventType["Error"] = 3] = "Error";
})(EventType = exports.EventType || (exports.EventType = {}));
var PlatformEvent = /** @class */ (function () {
    function PlatformEvent(eventName, eventType) {
        this.privName = eventName;
        this.privEventId = Guid_1.createNoDashGuid();
        this.privEventTime = new Date().toISOString();
        this.privEventType = eventType;
        this.privMetadata = {};
    }
    Object.defineProperty(PlatformEvent.prototype, "name", {
        get: function () {
            return this.privName;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlatformEvent.prototype, "eventId", {
        get: function () {
            return this.privEventId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlatformEvent.prototype, "eventTime", {
        get: function () {
            return this.privEventTime;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlatformEvent.prototype, "eventType", {
        get: function () {
            return this.privEventType;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlatformEvent.prototype, "metadata", {
        get: function () {
            return this.privMetadata;
        },
        enumerable: true,
        configurable: true
    });
    return PlatformEvent;
}());
exports.PlatformEvent = PlatformEvent;

//# sourceMappingURL=PlatformEvent.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Promise.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Promise.js ***!
  \******************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Error_1 = __webpack_require__(/*! ./Error */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js");
var PromiseState;
(function (PromiseState) {
    PromiseState[PromiseState["None"] = 0] = "None";
    PromiseState[PromiseState["Resolved"] = 1] = "Resolved";
    PromiseState[PromiseState["Rejected"] = 2] = "Rejected";
})(PromiseState = exports.PromiseState || (exports.PromiseState = {}));
var PromiseResult = /** @class */ (function () {
    function PromiseResult(promiseResultEventSource) {
        var _this = this;
        this.throwIfError = function () {
            if (_this.isError) {
                throw _this.error;
            }
        };
        promiseResultEventSource.on(function (result) {
            if (!_this.privIsCompleted) {
                _this.privIsCompleted = true;
                _this.privIsError = false;
                _this.privResult = result;
            }
        }, function (error) {
            if (!_this.privIsCompleted) {
                _this.privIsCompleted = true;
                _this.privIsError = true;
                _this.privError = error;
            }
        });
    }
    Object.defineProperty(PromiseResult.prototype, "isCompleted", {
        get: function () {
            return this.privIsCompleted;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PromiseResult.prototype, "isError", {
        get: function () {
            return this.privIsError;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PromiseResult.prototype, "error", {
        get: function () {
            return this.privError;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PromiseResult.prototype, "result", {
        get: function () {
            return this.privResult;
        },
        enumerable: true,
        configurable: true
    });
    return PromiseResult;
}());
exports.PromiseResult = PromiseResult;
// tslint:disable-next-line:max-classes-per-file
var PromiseResultEventSource = /** @class */ (function () {
    function PromiseResultEventSource() {
        var _this = this;
        this.setResult = function (result) {
            _this.privOnSetResult(result);
        };
        this.setError = function (error) {
            _this.privOnSetError(error);
        };
        this.on = function (onSetResult, onSetError) {
            _this.privOnSetResult = onSetResult;
            _this.privOnSetError = onSetError;
        };
    }
    return PromiseResultEventSource;
}());
exports.PromiseResultEventSource = PromiseResultEventSource;
// tslint:disable-next-line:max-classes-per-file
var PromiseHelper = /** @class */ (function () {
    function PromiseHelper() {
    }
    PromiseHelper.whenAll = function (promises) {
        if (!promises || promises.length === 0) {
            throw new Error_1.ArgumentNullError("promises");
        }
        var deferred = new Deferred();
        var errors = [];
        var completedPromises = 0;
        var checkForCompletion = function () {
            completedPromises++;
            if (completedPromises === promises.length) {
                if (errors.length === 0) {
                    deferred.resolve(true);
                }
                else {
                    deferred.reject(errors.join(", "));
                }
            }
        };
        for (var _i = 0, promises_1 = promises; _i < promises_1.length; _i++) {
            var promise = promises_1[_i];
            promise.on(function (r) {
                checkForCompletion();
            }, function (e) {
                errors.push(e);
                checkForCompletion();
            });
        }
        return deferred.promise();
    };
    PromiseHelper.fromResult = function (result) {
        var deferred = new Deferred();
        deferred.resolve(result);
        return deferred.promise();
    };
    PromiseHelper.fromError = function (error) {
        var deferred = new Deferred();
        deferred.reject(error);
        return deferred.promise();
    };
    return PromiseHelper;
}());
exports.PromiseHelper = PromiseHelper;
// TODO: replace with ES6 promises
// tslint:disable-next-line:max-classes-per-file
var Promise = /** @class */ (function () {
    function Promise(sink) {
        var _this = this;
        this.result = function () {
            return _this.privSink.result;
        };
        this.continueWith = function (continuationCallback) {
            if (!continuationCallback) {
                throw new Error_1.ArgumentNullError("continuationCallback");
            }
            var continuationDeferral = new Deferred();
            _this.privSink.on(function (r) {
                try {
                    var continuationResult = continuationCallback(_this.privSink.result);
                    continuationDeferral.resolve(continuationResult);
                }
                catch (e) {
                    continuationDeferral.reject(e);
                }
            }, function (error) {
                try {
                    var continuationResult = continuationCallback(_this.privSink.result);
                    continuationDeferral.resolve(continuationResult);
                }
                catch (e) {
                    continuationDeferral.reject("'Error handler for error " + error + " threw error " + e + "'");
                }
            });
            return continuationDeferral.promise();
        };
        this.onSuccessContinueWith = function (continuationCallback) {
            if (!continuationCallback) {
                throw new Error_1.ArgumentNullError("continuationCallback");
            }
            var continuationDeferral = new Deferred();
            _this.privSink.on(function (r) {
                try {
                    var continuationResult = continuationCallback(r);
                    continuationDeferral.resolve(continuationResult);
                }
                catch (e) {
                    continuationDeferral.reject(e);
                }
            }, function (error) {
                continuationDeferral.reject(error);
            });
            return continuationDeferral.promise();
        };
        this.continueWithPromise = function (continuationCallback) {
            if (!continuationCallback) {
                throw new Error_1.ArgumentNullError("continuationCallback");
            }
            var continuationDeferral = new Deferred();
            _this.privSink.on(function (r) {
                try {
                    var continuationPromise = continuationCallback(_this.privSink.result);
                    if (!continuationPromise) {
                        throw new Error("'Continuation callback did not return promise'");
                    }
                    continuationPromise.on(function (continuationResult) {
                        continuationDeferral.resolve(continuationResult);
                    }, function (e) {
                        continuationDeferral.reject(e);
                    });
                }
                catch (e) {
                    continuationDeferral.reject(e);
                }
            }, function (error) {
                try {
                    var continuationPromise = continuationCallback(_this.privSink.result);
                    if (!continuationPromise) {
                        throw new Error("Continuation callback did not return promise");
                    }
                    continuationPromise.on(function (continuationResult) {
                        continuationDeferral.resolve(continuationResult);
                    }, function (e) {
                        continuationDeferral.reject(e);
                    });
                }
                catch (e) {
                    continuationDeferral.reject("'Error handler for error " + error + " threw error " + e + "'");
                }
            });
            return continuationDeferral.promise();
        };
        this.onSuccessContinueWithPromise = function (continuationCallback) {
            if (!continuationCallback) {
                throw new Error_1.ArgumentNullError("continuationCallback");
            }
            var continuationDeferral = new Deferred();
            _this.privSink.on(function (r) {
                try {
                    var continuationPromise = continuationCallback(r);
                    if (!continuationPromise) {
                        throw new Error("Continuation callback did not return promise");
                    }
                    continuationPromise.on(function (continuationResult) {
                        continuationDeferral.resolve(continuationResult);
                    }, function (e) {
                        continuationDeferral.reject(e);
                    });
                }
                catch (e) {
                    continuationDeferral.reject(e);
                }
            }, function (error) {
                continuationDeferral.reject(error);
            });
            return continuationDeferral.promise();
        };
        this.on = function (successCallback, errorCallback) {
            if (!successCallback) {
                throw new Error_1.ArgumentNullError("successCallback");
            }
            if (!errorCallback) {
                throw new Error_1.ArgumentNullError("errorCallback");
            }
            _this.privSink.on(successCallback, errorCallback);
            return _this;
        };
        this.finally = function (callback) {
            if (!callback) {
                throw new Error_1.ArgumentNullError("callback");
            }
            var callbackWrapper = function (_) {
                callback();
            };
            return _this.on(callbackWrapper, callbackWrapper);
        };
        this.privSink = sink;
    }
    return Promise;
}());
exports.Promise = Promise;
// tslint:disable-next-line:max-classes-per-file
var Deferred = /** @class */ (function () {
    function Deferred() {
        var _this = this;
        this.state = function () {
            return _this.privSink.state;
        };
        this.promise = function () {
            return _this.privPromise;
        };
        this.resolve = function (result) {
            _this.privSink.resolve(result);
            return _this;
        };
        this.reject = function (error) {
            _this.privSink.reject(error);
            return _this;
        };
        this.privSink = new Sink();
        this.privPromise = new Promise(this.privSink);
    }
    return Deferred;
}());
exports.Deferred = Deferred;
// tslint:disable-next-line:max-classes-per-file
var Sink = /** @class */ (function () {
    function Sink() {
        var _this = this;
        this.privState = PromiseState.None;
        this.privPromiseResult = null;
        this.privPromiseResultEvents = null;
        this.privSuccessHandlers = [];
        this.privErrorHandlers = [];
        this.resolve = function (result) {
            if (_this.privState !== PromiseState.None) {
                throw new Error("'Cannot resolve a completed promise'");
            }
            _this.privState = PromiseState.Resolved;
            _this.privPromiseResultEvents.setResult(result);
            for (var i = 0; i < _this.privSuccessHandlers.length; i++) {
                _this.executeSuccessCallback(result, _this.privSuccessHandlers[i], _this.privErrorHandlers[i]);
            }
            _this.detachHandlers();
        };
        this.reject = function (error) {
            if (_this.privState !== PromiseState.None) {
                throw new Error("'Cannot reject a completed promise'");
            }
            _this.privState = PromiseState.Rejected;
            _this.privPromiseResultEvents.setError(error);
            for (var _i = 0, _a = _this.privErrorHandlers; _i < _a.length; _i++) {
                var errorHandler = _a[_i];
                _this.executeErrorCallback(error, errorHandler);
            }
            _this.detachHandlers();
        };
        this.on = function (successCallback, errorCallback) {
            if (successCallback == null) {
                successCallback = function (r) { return; };
            }
            if (_this.privState === PromiseState.None) {
                _this.privSuccessHandlers.push(successCallback);
                _this.privErrorHandlers.push(errorCallback);
            }
            else {
                if (_this.privState === PromiseState.Resolved) {
                    _this.executeSuccessCallback(_this.privPromiseResult.result, successCallback, errorCallback);
                }
                else if (_this.privState === PromiseState.Rejected) {
                    _this.executeErrorCallback(_this.privPromiseResult.error, errorCallback);
                }
                _this.detachHandlers();
            }
        };
        this.executeSuccessCallback = function (result, successCallback, errorCallback) {
            try {
                successCallback(result);
            }
            catch (e) {
                _this.executeErrorCallback("'Unhandled callback error: " + e + "'", errorCallback);
            }
        };
        this.executeErrorCallback = function (error, errorCallback) {
            if (errorCallback) {
                try {
                    errorCallback(error);
                }
                catch (e) {
                    throw new Error("'Unhandled callback error: " + e + ". InnerError: " + error + "'");
                }
            }
            else {
                throw new Error("'Unhandled error: " + error + "'");
            }
        };
        this.detachHandlers = function () {
            _this.privErrorHandlers = [];
            _this.privSuccessHandlers = [];
        };
        this.privPromiseResultEvents = new PromiseResultEventSource();
        this.privPromiseResult = new PromiseResult(this.privPromiseResultEvents);
    }
    Object.defineProperty(Sink.prototype, "state", {
        get: function () {
            return this.privState;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Sink.prototype, "result", {
        get: function () {
            return this.privPromiseResult;
        },
        enumerable: true,
        configurable: true
    });
    return Sink;
}());
exports.Sink = Sink;

//# sourceMappingURL=Promise.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Queue.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Queue.js ***!
  \****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Error_1 = __webpack_require__(/*! ./Error */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js");
var List_1 = __webpack_require__(/*! ./List */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/List.js");
var Promise_1 = __webpack_require__(/*! ./Promise */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Promise.js");
var SubscriberType;
(function (SubscriberType) {
    SubscriberType[SubscriberType["Dequeue"] = 0] = "Dequeue";
    SubscriberType[SubscriberType["Peek"] = 1] = "Peek";
})(SubscriberType || (SubscriberType = {}));
var Queue = /** @class */ (function () {
    function Queue(list) {
        var _this = this;
        this.privPromiseStore = new List_1.List();
        this.privIsDrainInProgress = false;
        this.privIsDisposing = false;
        this.privDisposeReason = null;
        this.enqueue = function (item) {
            _this.throwIfDispose();
            _this.enqueueFromPromise(Promise_1.PromiseHelper.fromResult(item));
        };
        this.enqueueFromPromise = function (promise) {
            _this.throwIfDispose();
            _this.privPromiseStore.add(promise);
            promise.finally(function () {
                while (_this.privPromiseStore.length() > 0) {
                    if (!_this.privPromiseStore.first().result().isCompleted) {
                        break;
                    }
                    else {
                        var p = _this.privPromiseStore.removeFirst();
                        if (!p.result().isError) {
                            _this.privList.add(p.result().result);
                        }
                        else {
                            // TODO: Log as warning.
                        }
                    }
                }
            });
        };
        this.dequeue = function () {
            _this.throwIfDispose();
            var deferredSubscriber = new Promise_1.Deferred();
            if (_this.privSubscribers) {
                _this.privSubscribers.add({ deferral: deferredSubscriber, type: SubscriberType.Dequeue });
                _this.drain();
            }
            return deferredSubscriber.promise();
        };
        this.peek = function () {
            _this.throwIfDispose();
            var deferredSubscriber = new Promise_1.Deferred();
            var subs = _this.privSubscribers;
            if (subs) {
                _this.privSubscribers.add({ deferral: deferredSubscriber, type: SubscriberType.Peek });
                _this.drain();
            }
            return deferredSubscriber.promise();
        };
        this.length = function () {
            _this.throwIfDispose();
            return _this.privList.length();
        };
        this.isDisposed = function () {
            return _this.privSubscribers == null;
        };
        this.drainAndDispose = function (pendingItemProcessor, reason) {
            if (!_this.isDisposed() && !_this.privIsDisposing) {
                _this.privDisposeReason = reason;
                _this.privIsDisposing = true;
                var subs = _this.privSubscribers;
                if (subs) {
                    while (subs.length() > 0) {
                        var subscriber = subs.removeFirst();
                        // TODO: this needs work (Resolve(null) instead?).
                        subscriber.deferral.resolve(undefined);
                        // subscriber.deferral.reject("Disposed");
                    }
                    // note: this block assumes cooperative multitasking, i.e.,
                    // between the if-statement and the assignment there are no
                    // thread switches.
                    // Reason is that between the initial const = this.; and this
                    // point there is the derral.resolve() operation that might have
                    // caused recursive calls to the Queue, especially, calling
                    // Dispose() on the queue alredy (which would reset the var
                    // here to null!).
                    // That should generally hold true for javascript...
                    if (_this.privSubscribers === subs) {
                        _this.privSubscribers = subs;
                    }
                }
                for (var _i = 0, _a = _this.privDetachables; _i < _a.length; _i++) {
                    var detachable = _a[_i];
                    detachable.detach();
                }
                if (_this.privPromiseStore.length() > 0 && pendingItemProcessor) {
                    return Promise_1.PromiseHelper
                        .whenAll(_this.privPromiseStore.toArray())
                        .continueWith(function () {
                        _this.privSubscribers = null;
                        _this.privList.forEach(function (item, index) {
                            pendingItemProcessor(item);
                        });
                        _this.privList = null;
                        return true;
                    });
                }
                else {
                    _this.privSubscribers = null;
                    _this.privList = null;
                }
            }
            return Promise_1.PromiseHelper.fromResult(true);
        };
        this.dispose = function (reason) {
            _this.drainAndDispose(null, reason);
        };
        this.drain = function () {
            if (!_this.privIsDrainInProgress && !_this.privIsDisposing) {
                _this.privIsDrainInProgress = true;
                var subs = _this.privSubscribers;
                var lists = _this.privList;
                if (subs && lists) {
                    while (lists.length() > 0 && subs.length() > 0 && !_this.privIsDisposing) {
                        var subscriber = subs.removeFirst();
                        if (subscriber.type === SubscriberType.Peek) {
                            subscriber.deferral.resolve(lists.first());
                        }
                        else {
                            var dequeuedItem = lists.removeFirst();
                            subscriber.deferral.resolve(dequeuedItem);
                        }
                    }
                    // note: this block assumes cooperative multitasking, i.e.,
                    // between the if-statement and the assignment there are no
                    // thread switches.
                    // Reason is that between the initial const = this.; and this
                    // point there is the derral.resolve() operation that might have
                    // caused recursive calls to the Queue, especially, calling
                    // Dispose() on the queue alredy (which would reset the var
                    // here to null!).
                    // That should generally hold true for javascript...
                    if (_this.privSubscribers === subs) {
                        _this.privSubscribers = subs;
                    }
                    // note: this block assumes cooperative multitasking, i.e.,
                    // between the if-statement and the assignment there are no
                    // thread switches.
                    // Reason is that between the initial const = this.; and this
                    // point there is the derral.resolve() operation that might have
                    // caused recursive calls to the Queue, especially, calling
                    // Dispose() on the queue alredy (which would reset the var
                    // here to null!).
                    // That should generally hold true for javascript...
                    if (_this.privList === lists) {
                        _this.privList = lists;
                    }
                }
                _this.privIsDrainInProgress = false;
            }
        };
        this.throwIfDispose = function () {
            if (_this.isDisposed()) {
                if (_this.privDisposeReason) {
                    throw new Error_1.InvalidOperationError(_this.privDisposeReason);
                }
                throw new Error_1.ObjectDisposedError("Queue");
            }
            else if (_this.privIsDisposing) {
                throw new Error_1.InvalidOperationError("Queue disposing");
            }
        };
        this.privList = list ? list : new List_1.List();
        this.privDetachables = [];
        this.privSubscribers = new List_1.List();
        this.privDetachables.push(this.privList.onAdded(this.drain));
    }
    return Queue;
}());
exports.Queue = Queue;

//# sourceMappingURL=Queue.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/RawWebsocketMessage.js":
/*!******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/RawWebsocketMessage.js ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var ConnectionMessage_1 = __webpack_require__(/*! ./ConnectionMessage */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionMessage.js");
var Error_1 = __webpack_require__(/*! ./Error */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js");
var Guid_1 = __webpack_require__(/*! ./Guid */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js");
var RawWebsocketMessage = /** @class */ (function () {
    function RawWebsocketMessage(messageType, payload, id) {
        this.privPayload = null;
        if (!payload) {
            throw new Error_1.ArgumentNullError("payload");
        }
        if (messageType === ConnectionMessage_1.MessageType.Binary && !(payload instanceof ArrayBuffer)) {
            throw new Error_1.InvalidOperationError("Payload must be ArrayBuffer");
        }
        if (messageType === ConnectionMessage_1.MessageType.Text && !(typeof (payload) === "string")) {
            throw new Error_1.InvalidOperationError("Payload must be a string");
        }
        this.privMessageType = messageType;
        this.privPayload = payload;
        this.privId = id ? id : Guid_1.createNoDashGuid();
    }
    Object.defineProperty(RawWebsocketMessage.prototype, "messageType", {
        get: function () {
            return this.privMessageType;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RawWebsocketMessage.prototype, "payload", {
        get: function () {
            return this.privPayload;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RawWebsocketMessage.prototype, "textContent", {
        get: function () {
            if (this.privMessageType === ConnectionMessage_1.MessageType.Binary) {
                throw new Error_1.InvalidOperationError("Not supported for binary message");
            }
            return this.privPayload;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RawWebsocketMessage.prototype, "binaryContent", {
        get: function () {
            if (this.privMessageType === ConnectionMessage_1.MessageType.Text) {
                throw new Error_1.InvalidOperationError("Not supported for text message");
            }
            return this.privPayload;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RawWebsocketMessage.prototype, "id", {
        get: function () {
            return this.privId;
        },
        enumerable: true,
        configurable: true
    });
    return RawWebsocketMessage;
}());
exports.RawWebsocketMessage = RawWebsocketMessage;

//# sourceMappingURL=RawWebsocketMessage.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/RiffPcmEncoder.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/RiffPcmEncoder.js ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var RiffPcmEncoder = /** @class */ (function () {
    function RiffPcmEncoder(actualSampleRate, desiredSampleRate) {
        var _this = this;
        this.privChannelCount = 1;
        this.encode = function (needHeader, actualAudioFrame) {
            var audioFrame = _this.downSampleAudioFrame(actualAudioFrame, _this.privActualSampleRate, _this.privDesiredSampleRate);
            if (!audioFrame) {
                return null;
            }
            var audioLength = audioFrame.length * 2;
            if (!needHeader) {
                var buffer_1 = new ArrayBuffer(audioLength);
                var view_1 = new DataView(buffer_1);
                _this.floatTo16BitPCM(view_1, 0, audioFrame);
                return buffer_1;
            }
            var buffer = new ArrayBuffer(44 + audioLength);
            var bitsPerSample = 16;
            var bytesPerSample = bitsPerSample / 8;
            // We dont know ahead of time about the length of audio to stream. So set to 0.
            var fileLength = 0;
            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView
            var view = new DataView(buffer);
            /* RIFF identifier */
            _this.setString(view, 0, "RIFF");
            /* file length */
            view.setUint32(4, fileLength, true);
            /* RIFF type & Format */
            _this.setString(view, 8, "WAVEfmt ");
            /* format chunk length */
            view.setUint32(16, 16, true);
            /* sample format (raw) */
            view.setUint16(20, 1, true);
            /* channel count */
            view.setUint16(22, _this.privChannelCount, true);
            /* sample rate */
            view.setUint32(24, _this.privDesiredSampleRate, true);
            /* byte rate (sample rate * block align) */
            view.setUint32(28, _this.privDesiredSampleRate * _this.privChannelCount * bytesPerSample, true);
            /* block align (channel count * bytes per sample) */
            view.setUint16(32, _this.privChannelCount * bytesPerSample, true);
            /* bits per sample */
            view.setUint16(34, bitsPerSample, true);
            /* data chunk identifier */
            _this.setString(view, 36, "data");
            /* data chunk length */
            view.setUint32(40, fileLength, true);
            _this.floatTo16BitPCM(view, 44, audioFrame);
            return buffer;
        };
        this.setString = function (view, offset, str) {
            for (var i = 0; i < str.length; i++) {
                view.setUint8(offset + i, str.charCodeAt(i));
            }
        };
        this.floatTo16BitPCM = function (view, offset, input) {
            for (var i = 0; i < input.length; i++, offset += 2) {
                var s = Math.max(-1, Math.min(1, input[i]));
                view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);
            }
        };
        this.downSampleAudioFrame = function (srcFrame, srcRate, dstRate) {
            if (dstRate === srcRate || dstRate > srcRate) {
                return srcFrame;
            }
            var ratio = srcRate / dstRate;
            var dstLength = Math.round(srcFrame.length / ratio);
            var dstFrame = new Float32Array(dstLength);
            var srcOffset = 0;
            var dstOffset = 0;
            while (dstOffset < dstLength) {
                var nextSrcOffset = Math.round((dstOffset + 1) * ratio);
                var accum = 0;
                var count = 0;
                while (srcOffset < nextSrcOffset && srcOffset < srcFrame.length) {
                    accum += srcFrame[srcOffset++];
                    count++;
                }
                dstFrame[dstOffset++] = accum / count;
            }
            return dstFrame;
        };
        this.privActualSampleRate = actualSampleRate;
        this.privDesiredSampleRate = desiredSampleRate;
    }
    return RiffPcmEncoder;
}());
exports.RiffPcmEncoder = RiffPcmEncoder;

//# sourceMappingURL=RiffPcmEncoder.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Stream.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Stream.js ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Error_1 = __webpack_require__(/*! ./Error */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js");
var Guid_1 = __webpack_require__(/*! ./Guid */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js");
var Queue_1 = __webpack_require__(/*! ./Queue */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Queue.js");
var Stream = /** @class */ (function () {
    function Stream(streamId) {
        var _this = this;
        this.privReaderIdCounter = 1;
        this.privIsEnded = false;
        this.getReader = function () {
            var readerId = _this.privReaderIdCounter;
            _this.privReaderIdCounter++;
            var readerQueue = new Queue_1.Queue();
            var currentLength = _this.privStreambuffer.length;
            _this.privReaderQueues[readerId] = readerQueue;
            for (var i = 0; i < currentLength; i++) {
                readerQueue.enqueue(_this.privStreambuffer[i]);
            }
            return new StreamReader(_this.privId, readerQueue, function () {
                delete _this.privReaderQueues[readerId];
            });
        };
        this.throwIfClosed = function () {
            if (_this.privIsEnded) {
                throw new Error_1.InvalidOperationError("Stream closed");
            }
        };
        this.privId = streamId ? streamId : Guid_1.createNoDashGuid();
        this.privStreambuffer = [];
        this.privReaderQueues = {};
    }
    Object.defineProperty(Stream.prototype, "isClosed", {
        get: function () {
            return this.privIsEnded;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Stream.prototype, "id", {
        get: function () {
            return this.privId;
        },
        enumerable: true,
        configurable: true
    });
    Stream.prototype.close = function () {
        if (!this.privIsEnded) {
            this.writeStreamChunk({
                buffer: null,
                isEnd: true,
                timeReceived: Date.now(),
            });
            this.privIsEnded = true;
        }
    };
    Stream.prototype.writeStreamChunk = function (streamChunk) {
        this.throwIfClosed();
        this.privStreambuffer.push(streamChunk);
        for (var readerId in this.privReaderQueues) {
            if (!this.privReaderQueues[readerId].isDisposed()) {
                try {
                    this.privReaderQueues[readerId].enqueue(streamChunk);
                }
                catch (e) {
                    // Do nothing
                }
            }
        }
    };
    return Stream;
}());
exports.Stream = Stream;
// tslint:disable-next-line:max-classes-per-file
var StreamReader = /** @class */ (function () {
    function StreamReader(streamId, readerQueue, onClose) {
        var _this = this;
        this.privIsClosed = false;
        this.read = function () {
            if (_this.isClosed) {
                throw new Error_1.InvalidOperationError("StreamReader closed");
            }
            return _this.privReaderQueue
                .dequeue()
                .onSuccessContinueWith(function (streamChunk) {
                if (streamChunk.isEnd) {
                    _this.privReaderQueue.dispose("End of stream reached");
                }
                return streamChunk;
            });
        };
        this.close = function () {
            if (!_this.privIsClosed) {
                _this.privIsClosed = true;
                _this.privReaderQueue.dispose("StreamReader closed");
                _this.privOnClose();
            }
        };
        this.privReaderQueue = readerQueue;
        this.privOnClose = onClose;
        this.privStreamId = streamId;
    }
    Object.defineProperty(StreamReader.prototype, "isClosed", {
        get: function () {
            return this.privIsClosed;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StreamReader.prototype, "streamId", {
        get: function () {
            return this.privStreamId;
        },
        enumerable: true,
        configurable: true
    });
    return StreamReader;
}());
exports.StreamReader = StreamReader;

//# sourceMappingURL=Stream.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioConfig.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioConfig.js ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js");
var Contracts_1 = __webpack_require__(/*! ../Contracts */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");
var Exports_2 = __webpack_require__(/*! ../Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var AudioInputStream_1 = __webpack_require__(/*! ./AudioInputStream */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioInputStream.js");
/**
 * Represents audio input configuration used for specifying what type of input to use (microphone, file, stream).
 * @class AudioConfig
 */
var AudioConfig = /** @class */ (function () {
    function AudioConfig() {
    }
    /**
     * Creates an AudioConfig object representing the default microphone on the system.
     * @member AudioConfig.fromDefaultMicrophoneInput
     * @function
     * @public
     * @returns {AudioConfig} The audio input configuration being created.
     */
    AudioConfig.fromDefaultMicrophoneInput = function () {
        var pcmRecorder = new Exports_1.PcmRecorder();
        return new AudioConfigImpl(new Exports_1.MicAudioSource(pcmRecorder, AudioInputStream_1.bufferSize));
    };
    /**
     * Creates an AudioConfig object representing a microphone with the specified device ID.
     * @member AudioConfig.fromMicrophoneInput
     * @function
     * @public
     * @param {string | undefined} deviceId - Specifies the device ID of the microphone to be used.
     *        Default microphone is used the value is omitted.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    AudioConfig.fromMicrophoneInput = function (deviceId) {
        var pcmRecorder = new Exports_1.PcmRecorder();
        return new AudioConfigImpl(new Exports_1.MicAudioSource(pcmRecorder, AudioInputStream_1.bufferSize, deviceId));
    };
    /**
     * Creates an AudioConfig object representing the specified file.
     * @member AudioConfig.fromWavFileInput
     * @function
     * @public
     * @param {File} fileName - Specifies the audio input file. Currently, only WAV / PCM with 16-bit
     *        samples, 16 kHz sample rate, and a single channel (Mono) is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    AudioConfig.fromWavFileInput = function (file) {
        return new AudioConfigImpl(new Exports_1.FileAudioSource(file));
    };
    /**
     * Creates an AudioConfig object representing the specified stream.
     * @member AudioConfig.fromStreamInput
     * @function
     * @public
     * @param {AudioInputStream | PullAudioInputStreamCallback} audioStream - Specifies the custom audio input
     *        stream. Currently, only WAV / PCM with 16-bit samples, 16 kHz sample rate, and a single channel
     *        (Mono) is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    AudioConfig.fromStreamInput = function (audioStream) {
        if (audioStream instanceof Exports_2.PullAudioInputStreamCallback) {
            return new AudioConfigImpl(new AudioInputStream_1.PullAudioInputStreamImpl(audioStream));
        }
        if (audioStream instanceof Exports_2.AudioInputStream) {
            return new AudioConfigImpl(audioStream);
        }
        throw new Error("Not Supported Type");
    };
    return AudioConfig;
}());
exports.AudioConfig = AudioConfig;
/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class AudioConfigImpl
 */
// tslint:disable-next-line:max-classes-per-file
var AudioConfigImpl = /** @class */ (function (_super) {
    __extends(AudioConfigImpl, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {IAudioSource} source - An audio source.
     */
    function AudioConfigImpl(source) {
        var _this = _super.call(this) || this;
        _this.privSource = source;
        return _this;
    }
    Object.defineProperty(AudioConfigImpl.prototype, "format", {
        /**
         * Format information for the audio
         */
        get: function () {
            return this.privSource.format;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @member AudioConfigImpl.prototype.close
     * @function
     * @public
     */
    AudioConfigImpl.prototype.close = function () {
        this.privSource.turnOff();
    };
    /**
     * @member AudioConfigImpl.prototype.id
     * @function
     * @public
     */
    AudioConfigImpl.prototype.id = function () {
        return this.privSource.id();
    };
    /**
     * @member AudioConfigImpl.prototype.turnOn
     * @function
     * @public
     * @returns {Promise<boolean>} A promise.
     */
    AudioConfigImpl.prototype.turnOn = function () {
        return this.privSource.turnOn();
    };
    /**
     * @member AudioConfigImpl.prototype.attach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     * @returns {Promise<IAudioStreamNode>} A promise.
     */
    AudioConfigImpl.prototype.attach = function (audioNodeId) {
        return this.privSource.attach(audioNodeId);
    };
    /**
     * @member AudioConfigImpl.prototype.detach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     */
    AudioConfigImpl.prototype.detach = function (audioNodeId) {
        return this.detach(audioNodeId);
    };
    /**
     * @member AudioConfigImpl.prototype.turnOff
     * @function
     * @public
     * @returns {Promise<boolean>} A promise.
     */
    AudioConfigImpl.prototype.turnOff = function () {
        return this.privSource.turnOff();
    };
    Object.defineProperty(AudioConfigImpl.prototype, "events", {
        /**
         * @member AudioConfigImpl.prototype.events
         * @function
         * @public
         * @returns {EventSource<AudioSourceEvent>} An event source for audio events.
         */
        get: function () {
            return this.privSource.events;
        },
        enumerable: true,
        configurable: true
    });
    AudioConfigImpl.prototype.setProperty = function (name, value) {
        Contracts_1.Contracts.throwIfNull(value, "value");
        if (undefined !== this.privSource.setProperty) {
            this.privSource.setProperty(name, value);
        }
        else {
            throw new Error("This AudioConfig instance does not support setting properties.");
        }
    };
    AudioConfigImpl.prototype.getProperty = function (name, def) {
        if (undefined !== this.privSource.getProperty) {
            return this.privSource.getProperty(name, def);
        }
        else {
            throw new Error("This AudioConfig instance does not support getting properties.");
        }
        return def;
    };
    Object.defineProperty(AudioConfigImpl.prototype, "deviceInfo", {
        get: function () {
            return this.privSource.deviceInfo;
        },
        enumerable: true,
        configurable: true
    });
    return AudioConfigImpl;
}(AudioConfig));
exports.AudioConfigImpl = AudioConfigImpl;

//# sourceMappingURL=AudioConfig.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioInputStream.js":
/*!******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioInputStream.js ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Guid_1 = __webpack_require__(/*! ../../../src/common/Guid */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js");
var Exports_1 = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Exports_2 = __webpack_require__(/*! ../../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var Exports_3 = __webpack_require__(/*! ../Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
var AudioStreamFormat_1 = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js");
exports.bufferSize = 4096;
/**
 * Represents audio input stream used for custom audio input configurations.
 * @class AudioInputStream
 */
var AudioInputStream = /** @class */ (function () {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    function AudioInputStream() {
    }
    /**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member AudioInputStream.createPushStream
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     *        written to the push audio stream's write() method (currently only support 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The audio input stream being created.
     */
    AudioInputStream.createPushStream = function (format) {
        return PushAudioInputStream.create(format);
    };
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for read()
     * and close() methods.
     * @member AudioInputStream.createPullStream
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object, derived from
     *        PullAudioInputStreamCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be returned from
     *        the callback's read() method (currently only support 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The audio input stream being created.
     */
    AudioInputStream.createPullStream = function (callback, format) {
        return PullAudioInputStream.create(callback, format);
        // throw new Error("Oops");
    };
    return AudioInputStream;
}());
exports.AudioInputStream = AudioInputStream;
/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @class PushAudioInputStream
 */
// tslint:disable-next-line:max-classes-per-file
var PushAudioInputStream = /** @class */ (function (_super) {
    __extends(PushAudioInputStream, _super);
    function PushAudioInputStream() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member PushAudioInputStream.create
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be written to the
     *        push audio stream's write() method (currently only support 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The push audio input stream being created.
     */
    PushAudioInputStream.create = function (format) {
        return new PushAudioInputStreamImpl(exports.bufferSize, format);
    };
    return PushAudioInputStream;
}(AudioInputStream));
exports.PushAudioInputStream = PushAudioInputStream;
/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @private
 * @class PushAudioInputStreamImpl
 */
// tslint:disable-next-line:max-classes-per-file
var PushAudioInputStreamImpl = /** @class */ (function (_super) {
    __extends(PushAudioInputStreamImpl, _super);
    /**
     * Creates and initalizes an instance with the given values.
     * @constructor
     * @param {AudioStreamFormat} format - The audio stream format.
     */
    function PushAudioInputStreamImpl(chunkSize, format) {
        var _this = _super.call(this) || this;
        _this.onEvent = function (event) {
            _this.privEvents.onEvent(event);
            Exports_2.Events.instance.onEvent(event);
        };
        if (format === undefined) {
            _this.privFormat = AudioStreamFormat_1.AudioStreamFormatImpl.getDefaultInputFormat();
        }
        else {
            _this.privFormat = format;
        }
        _this.privEvents = new Exports_2.EventSource();
        _this.privId = Guid_1.createNoDashGuid();
        _this.privStream = new Exports_2.ChunkedArrayBufferStream(chunkSize);
        return _this;
    }
    Object.defineProperty(PushAudioInputStreamImpl.prototype, "format", {
        /**
         * Format information for the audio
         */
        get: function () {
            return this.privFormat;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PushAudioInputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */
    PushAudioInputStreamImpl.prototype.write = function (dataBuffer) {
        this.privStream.writeStreamChunk({
            buffer: dataBuffer,
            isEnd: false,
            timeReceived: Date.now()
        });
    };
    /**
     * Closes the stream.
     * @member PushAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */
    PushAudioInputStreamImpl.prototype.close = function () {
        this.privStream.close();
    };
    PushAudioInputStreamImpl.prototype.id = function () {
        return this.privId;
    };
    PushAudioInputStreamImpl.prototype.turnOn = function () {
        this.onEvent(new Exports_2.AudioSourceInitializingEvent(this.privId)); // no stream id
        this.onEvent(new Exports_2.AudioSourceReadyEvent(this.privId));
        return Exports_2.PromiseHelper.fromResult(true);
    };
    PushAudioInputStreamImpl.prototype.attach = function (audioNodeId) {
        var _this = this;
        this.onEvent(new Exports_2.AudioStreamNodeAttachingEvent(this.privId, audioNodeId));
        return this.turnOn()
            .onSuccessContinueWith(function (_) {
            // For now we support a single parallel reader of the pushed stream.
            // So we can simiply hand the stream to the recognizer and let it recognize.
            return _this.privStream.getReader();
        })
            .onSuccessContinueWith(function (streamReader) {
            _this.onEvent(new Exports_2.AudioStreamNodeAttachedEvent(_this.privId, audioNodeId));
            return {
                detach: function () {
                    streamReader.close();
                    _this.onEvent(new Exports_2.AudioStreamNodeDetachedEvent(_this.privId, audioNodeId));
                    _this.turnOff();
                },
                id: function () {
                    return audioNodeId;
                },
                read: function () {
                    return streamReader.read();
                },
            };
        });
    };
    PushAudioInputStreamImpl.prototype.detach = function (audioNodeId) {
        this.onEvent(new Exports_2.AudioStreamNodeDetachedEvent(this.privId, audioNodeId));
    };
    PushAudioInputStreamImpl.prototype.turnOff = function () {
        return Exports_2.PromiseHelper.fromResult(false);
    };
    Object.defineProperty(PushAudioInputStreamImpl.prototype, "events", {
        get: function () {
            return this.privEvents;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PushAudioInputStreamImpl.prototype, "deviceInfo", {
        get: function () {
            return Exports_2.PromiseHelper.fromResult({
                bitspersample: this.privFormat.bitsPerSample,
                channelcount: this.privFormat.channels,
                connectivity: Exports_1.connectivity.Unknown,
                manufacturer: "Speech SDK",
                model: "PushStream",
                samplerate: this.privFormat.samplesPerSec,
                type: Exports_1.type.Stream,
            });
        },
        enumerable: true,
        configurable: true
    });
    return PushAudioInputStreamImpl;
}(PushAudioInputStream));
exports.PushAudioInputStreamImpl = PushAudioInputStreamImpl;
/*
 * Represents audio input stream used for custom audio input configurations.
 * @class PullAudioInputStream
 */
// tslint:disable-next-line:max-classes-per-file
var PullAudioInputStream = /** @class */ (function (_super) {
    __extends(PullAudioInputStream, _super);
    /**
     * Creates and initializes and instance.
     * @constructor
     */
    function PullAudioInputStream() {
        return _super.call(this) || this;
    }
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @member PullAudioInputStream.create
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     *        derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     *        returned from the callback's read() method (currently only support 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The push audio input stream being created.
     */
    PullAudioInputStream.create = function (callback, format) {
        return new PullAudioInputStreamImpl(callback, format);
    };
    return PullAudioInputStream;
}(AudioInputStream));
exports.PullAudioInputStream = PullAudioInputStream;
/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class PullAudioInputStreamImpl
 */
// tslint:disable-next-line:max-classes-per-file
var PullAudioInputStreamImpl = /** @class */ (function (_super) {
    __extends(PullAudioInputStreamImpl, _super);
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @constructor
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     *        derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     *        returned from the callback's read() method (currently only support 16 kHz 16bit mono PCM).
     */
    function PullAudioInputStreamImpl(callback, format) {
        var _this = _super.call(this) || this;
        _this.onEvent = function (event) {
            _this.privEvents.onEvent(event);
            Exports_2.Events.instance.onEvent(event);
        };
        if (undefined === format) {
            _this.privFormat = Exports_3.AudioStreamFormat.getDefaultInputFormat();
        }
        else {
            _this.privFormat = format;
        }
        _this.privEvents = new Exports_2.EventSource();
        _this.privId = Guid_1.createNoDashGuid();
        _this.privCallback = callback;
        _this.privIsClosed = false;
        return _this;
    }
    Object.defineProperty(PullAudioInputStreamImpl.prototype, "format", {
        /**
         * Format information for the audio
         */
        get: function () {
            return this.privFormat;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Closes the stream.
     * @member PullAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */
    PullAudioInputStreamImpl.prototype.close = function () {
        this.privIsClosed = true;
        this.privCallback.close();
    };
    PullAudioInputStreamImpl.prototype.id = function () {
        return this.privId;
    };
    PullAudioInputStreamImpl.prototype.turnOn = function () {
        this.onEvent(new Exports_2.AudioSourceInitializingEvent(this.privId)); // no stream id
        this.onEvent(new Exports_2.AudioSourceReadyEvent(this.privId));
        return Exports_2.PromiseHelper.fromResult(true);
    };
    PullAudioInputStreamImpl.prototype.attach = function (audioNodeId) {
        var _this = this;
        this.onEvent(new Exports_2.AudioStreamNodeAttachingEvent(this.privId, audioNodeId));
        return this.turnOn()
            .onSuccessContinueWith(function (result) {
            _this.onEvent(new Exports_2.AudioStreamNodeAttachedEvent(_this.privId, audioNodeId));
            return {
                detach: function () {
                    _this.privCallback.close();
                    _this.onEvent(new Exports_2.AudioStreamNodeDetachedEvent(_this.privId, audioNodeId));
                    _this.turnOff();
                },
                id: function () {
                    return audioNodeId;
                },
                read: function () {
                    var totalBytes = 0;
                    var transmitBuff;
                    // Until we have the minimum number of bytes to send in a transmission, keep asking for more.
                    while (totalBytes < exports.bufferSize) {
                        // Sizing the read buffer to the delta between the perfect size and what's left means we won't ever get too much
                        // data back.
                        var readBuff = new ArrayBuffer(exports.bufferSize - totalBytes);
                        var pulledBytes = _this.privCallback.read(readBuff);
                        // If there is no return buffer yet defined, set the return buffer to the that was just populated.
                        // This was, if we have enough data there's no copy penalty, but if we don't we have a buffer that's the
                        // preferred size allocated.
                        if (undefined === transmitBuff) {
                            transmitBuff = readBuff;
                        }
                        else {
                            // Not the first bite at the apple, so fill the return buffer with the data we got back.
                            var intView = new Int8Array(transmitBuff);
                            intView.set(new Int8Array(readBuff), totalBytes);
                        }
                        // If there are no bytes to read, just break out and be done.
                        if (0 === pulledBytes) {
                            break;
                        }
                        totalBytes += pulledBytes;
                    }
                    return Exports_2.PromiseHelper.fromResult({
                        buffer: transmitBuff.slice(0, totalBytes),
                        isEnd: _this.privIsClosed || totalBytes === 0,
                        timeReceived: Date.now(),
                    });
                },
            };
        });
    };
    PullAudioInputStreamImpl.prototype.detach = function (audioNodeId) {
        this.onEvent(new Exports_2.AudioStreamNodeDetachedEvent(this.privId, audioNodeId));
    };
    PullAudioInputStreamImpl.prototype.turnOff = function () {
        return Exports_2.PromiseHelper.fromResult(false);
    };
    Object.defineProperty(PullAudioInputStreamImpl.prototype, "events", {
        get: function () {
            return this.privEvents;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PullAudioInputStreamImpl.prototype, "deviceInfo", {
        get: function () {
            return Exports_2.PromiseHelper.fromResult({
                bitspersample: this.privFormat.bitsPerSample,
                channelcount: this.privFormat.channels,
                connectivity: Exports_1.connectivity.Unknown,
                manufacturer: "Speech SDK",
                model: "PullStream",
                samplerate: this.privFormat.samplesPerSec,
                type: Exports_1.type.Stream,
            });
        },
        enumerable: true,
        configurable: true
    });
    return PullAudioInputStreamImpl;
}(PullAudioInputStream));
exports.PullAudioInputStreamImpl = PullAudioInputStreamImpl;

//# sourceMappingURL=AudioInputStream.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Represents audio stream format used for custom audio input configurations.
 * @class AudioStreamFormat
 */
var AudioStreamFormat = /** @class */ (function () {
    function AudioStreamFormat() {
    }
    /**
     * Creates an audio stream format object representing the default audio stream
     * format (16KHz 16bit mono PCM).
     * @member AudioStreamFormat.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormat} The audio stream format being created.
     */
    AudioStreamFormat.getDefaultInputFormat = function () {
        return AudioStreamFormatImpl.getDefaultInputFormat();
    };
    /**
     * Creates an audio stream format object with the specified pcm waveformat characteristics.
     * @member AudioStreamFormat.getWaveFormatPCM
     * @function
     * @public
     * @param {number} samplesPerSecond - Sample rate, in samples per second (Hertz).
     * @param {number} bitsPerSample - Bits per sample, typically 16.
     * @param {number} channels - Number of channels in the waveform-audio data. Monaural data
     *        uses one channel and stereo data uses two channels.
     * @returns {AudioStreamFormat} The audio stream format being created.
     */
    AudioStreamFormat.getWaveFormatPCM = function (samplesPerSecond, bitsPerSample, channels) {
        return new AudioStreamFormatImpl(samplesPerSecond, bitsPerSample, channels);
    };
    return AudioStreamFormat;
}());
exports.AudioStreamFormat = AudioStreamFormat;
/**
 * @private
 * @class AudioStreamFormatImpl
 */
// tslint:disable-next-line:max-classes-per-file
var AudioStreamFormatImpl = /** @class */ (function (_super) {
    __extends(AudioStreamFormatImpl, _super);
    /**
     * Creates an instance with the given values.
     * @constructor
     * @param {number} samplesPerSec - Samples per second.
     * @param {number} bitsPerSample - Bits per sample.
     * @param {number} channels - Number of channels.
     */
    function AudioStreamFormatImpl(samplesPerSec, bitsPerSample, channels) {
        if (samplesPerSec === void 0) { samplesPerSec = 16000; }
        if (bitsPerSample === void 0) { bitsPerSample = 16; }
        if (channels === void 0) { channels = 1; }
        var _this = _super.call(this) || this;
        _this.formatTag = 1;
        _this.bitsPerSample = bitsPerSample;
        _this.samplesPerSec = samplesPerSec;
        _this.channels = channels;
        _this.avgBytesPerSec = _this.samplesPerSec * _this.channels * (_this.bitsPerSample / 8);
        _this.blockAlign = _this.channels * Math.max(_this.bitsPerSample, 8);
        return _this;
    }
    /**
     * Retrieves the default input format.
     * @member AudioStreamFormatImpl.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormatImpl} The default input format.
     */
    AudioStreamFormatImpl.getDefaultInputFormat = function () {
        return new AudioStreamFormatImpl();
    };
    /**
     * Closes the configuration object.
     * @member AudioStreamFormatImpl.prototype.close
     * @function
     * @public
     */
    AudioStreamFormatImpl.prototype.close = function () { return; };
    return AudioStreamFormatImpl;
}(AudioStreamFormat));
exports.AudioStreamFormatImpl = AudioStreamFormatImpl;

//# sourceMappingURL=AudioStreamFormat.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/PullAudioInputStreamCallback.js":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/PullAudioInputStreamCallback.js ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * An abstract base class that defines callback methods (read() and close()) for
 * custom audio input streams).
 * @class PullAudioInputStreamCallback
 */
var PullAudioInputStreamCallback = /** @class */ (function () {
    function PullAudioInputStreamCallback() {
    }
    return PullAudioInputStreamCallback;
}());
exports.PullAudioInputStreamCallback = PullAudioInputStreamCallback;

//# sourceMappingURL=PullAudioInputStreamCallback.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationDetails.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationDetails.js ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Exports_2 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Contains detailed information about why a result was canceled.
 * @class CancellationDetails
 */
var CancellationDetails = /** @class */ (function () {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - The error details, if provided.
     */
    function CancellationDetails(reason, errorDetails, errorCode) {
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privErrorCode = errorCode;
    }
    /**
     * Creates an instance of CancellationDetails object for the canceled RecognitionResult.
     * @member CancellationDetails.fromResult
     * @function
     * @public
     * @param {RecognitionResult} result - The result that was canceled.
     * @returns {CancellationDetails} The cancellation details object being created.
     */
    CancellationDetails.fromResult = function (result) {
        var reason = Exports_2.CancellationReason.Error;
        var errorCode = Exports_2.CancellationErrorCode.NoError;
        if (!!result.json) {
            var simpleSpeech = Exports_1.SimpleSpeechPhrase.fromJSON(result.json);
            reason = Exports_1.EnumTranslation.implTranslateCancelResult(simpleSpeech.RecognitionStatus);
        }
        if (!!result.properties) {
            errorCode = Exports_2.CancellationErrorCode[result.properties.getProperty(Exports_1.CancellationErrorCodePropertyName, Exports_2.CancellationErrorCode[Exports_2.CancellationErrorCode.NoError])];
        }
        return new CancellationDetails(reason, result.errorDetails, errorCode);
    };
    Object.defineProperty(CancellationDetails.prototype, "reason", {
        /**
         * The reason the recognition was canceled.
         * @member CancellationDetails.prototype.reason
         * @function
         * @public
         * @returns {CancellationReason} Specifies the reason canceled.
         */
        get: function () {
            return this.privReason;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CancellationDetails.prototype, "errorDetails", {
        /**
         * In case of an unsuccessful recognition, provides details of the occurred error.
         * @member CancellationDetails.prototype.errorDetails
         * @function
         * @public
         * @returns {string} A String that represents the error details.
         */
        get: function () {
            return this.privErrorDetails;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CancellationDetails.prototype, "ErrorCode", {
        /**
         * The error code in case of an unsuccessful recognition.
         * Added in version 1.1.0.
         * @return An error code that represents the error reason.
         */
        get: function () {
            return this.privErrorCode;
        },
        enumerable: true,
        configurable: true
    });
    return CancellationDetails;
}());
exports.CancellationDetails = CancellationDetails;

//# sourceMappingURL=CancellationDetails.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationErrorCodes.js":
/*!******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationErrorCodes.js ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 *  Defines error code in case that CancellationReason is Error.
 *  Added in version 1.1.0.
 */
var CancellationErrorCode;
(function (CancellationErrorCode) {
    /**
     * Indicates that no error occurred during speech recognition.
     */
    CancellationErrorCode[CancellationErrorCode["NoError"] = 0] = "NoError";
    /**
     * Indicates an authentication error.
     */
    CancellationErrorCode[CancellationErrorCode["AuthenticationFailure"] = 1] = "AuthenticationFailure";
    /**
     * Indicates that one or more recognition parameters are invalid.
     */
    CancellationErrorCode[CancellationErrorCode["BadRequestParameters"] = 2] = "BadRequestParameters";
    /**
     * Indicates that the number of parallel requests exceeded the number of allowed
     * concurrent transcriptions for the subscription.
     */
    CancellationErrorCode[CancellationErrorCode["TooManyRequests"] = 3] = "TooManyRequests";
    /**
     * Indicates a connection error.
     */
    CancellationErrorCode[CancellationErrorCode["ConnectionFailure"] = 4] = "ConnectionFailure";
    /**
     * Indicates a time-out error when waiting for response from service.
     */
    CancellationErrorCode[CancellationErrorCode["ServiceTimeout"] = 5] = "ServiceTimeout";
    /**
     * Indicates that an error is returned by the service.
     */
    CancellationErrorCode[CancellationErrorCode["ServiceError"] = 6] = "ServiceError";
    /**
     * Indicates an unexpected runtime error.
     */
    CancellationErrorCode[CancellationErrorCode["RuntimeError"] = 7] = "RuntimeError";
})(CancellationErrorCode = exports.CancellationErrorCode || (exports.CancellationErrorCode = {}));

//# sourceMappingURL=CancellationErrorCodes.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationReason.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationReason.js ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Defines the possible reasons a recognition result might be canceled.
 * @class CancellationReason
 */
var CancellationReason;
(function (CancellationReason) {
    /**
     * Indicates that an error occurred during speech recognition.
     * @member CancellationReason.Error
     */
    CancellationReason[CancellationReason["Error"] = 0] = "Error";
    /**
     * Indicates that the end of the audio stream was reached.
     * @member CancellationReason.EndOfStream
     */
    CancellationReason[CancellationReason["EndOfStream"] = 1] = "EndOfStream";
})(CancellationReason = exports.CancellationReason || (exports.CancellationReason = {}));

//# sourceMappingURL=CancellationReason.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Connection.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Connection.js ***!
  \******************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Connection is a proxy class for managing connection to the speech service of the specified Recognizer.
 * By default, a Recognizer autonomously manages connection to service when needed.
 * The Connection class provides additional methods for users to explicitly open or close a connection and
 * to subscribe to connection status changes.
 * The use of Connection is optional, and mainly for scenarios where fine tuning of application
 * behavior based on connection status is needed. Users can optionally call Open() to manually set up a connection
 * in advance before starting recognition on the Recognizer associated with this Connection.
 * If the Recognizer needs to connect or disconnect to service, it will
 * setup or shutdown the connection independently. In this case the Connection will be notified by change of connection
 * status via Connected/Disconnected events.
 * Added in version 1.2.0.
 */
var Connection = /** @class */ (function () {
    function Connection() {
    }
    /**
     * Gets the Connection instance from the specified recognizer.
     * @param recognizer The recognizer associated with the connection.
     * @return The Connection instance of the recognizer.
     */
    Connection.fromRecognizer = function (recognizer) {
        var recoBase = recognizer.internalData;
        var ret = new Connection();
        ret.privServiceRecognizer = recoBase;
        ret.privEventListener = ret.privServiceRecognizer.connectionEvents.attach(function (connectionEvent) {
            if (connectionEvent.name === "ConnectionEstablishedEvent") {
                if (!!ret.connected) {
                    ret.connected(new Exports_1.ConnectionEventArgs(connectionEvent.connectionId));
                }
            }
            else if (connectionEvent.name === "ConnectionClosedEvent") {
                if (!!ret.disconnected) {
                    ret.disconnected(new Exports_1.ConnectionEventArgs(connectionEvent.connectionId));
                }
            }
        });
        return ret;
    };
    /**
     * Starts to set up connection to the service.
     * Users can optionally call openConnection() to manually set up a connection in advance before starting recognition on the
     * Recognizer associated with this Connection. After starting recognition, calling Open() will have no effect
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notfied when the connection is established.
     */
    Connection.prototype.openConnection = function () {
        this.privServiceRecognizer.connect();
    };
    /**
     * Closes the connection the service.
     * Users can optionally call closeConnection() to manually shutdown the connection of the associated Recognizer.
     *
     * If closeConnection() is called during recognition, recognition will fail and cancel wtih an error.
     */
    Connection.prototype.closeConnection = function () {
        this.privServiceRecognizer.disconnect();
    };
    /**
     * Dispose of associated resources.
     */
    Connection.prototype.close = function () {
        /* tslint:disable:no-empty */
    };
    return Connection;
}());
exports.Connection = Connection;

//# sourceMappingURL=Connection.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConnectionEventArgs.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConnectionEventArgs.js ***!
  \***************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Defines payload for connection events like Connected/Disconnected.
 * Added in version 1.2.0
 */
var ConnectionEventArgs = /** @class */ (function (_super) {
    __extends(ConnectionEventArgs, _super);
    function ConnectionEventArgs() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return ConnectionEventArgs;
}(Exports_1.SessionEventArgs));
exports.ConnectionEventArgs = ConnectionEventArgs;

//# sourceMappingURL=ConnectionEventArgs.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @class Contracts
 * @private
 */
var Contracts = /** @class */ (function () {
    function Contracts() {
    }
    Contracts.throwIfNullOrUndefined = function (param, name) {
        if (param === undefined || param === null) {
            throw new Error("throwIfNullOrUndefined:" + name);
        }
    };
    Contracts.throwIfNull = function (param, name) {
        if (param === null) {
            throw new Error("throwIfNull:" + name);
        }
    };
    Contracts.throwIfNullOrWhitespace = function (param, name) {
        Contracts.throwIfNullOrUndefined(param, name);
        if (("" + param).trim().length < 1) {
            throw new Error("throwIfNullOrWhitespace:" + name);
        }
    };
    Contracts.throwIfDisposed = function (isDisposed) {
        if (isDisposed) {
            throw new Error("the object is already disposed");
        }
    };
    Contracts.throwIfArrayEmptyOrWhitespace = function (array, name) {
        Contracts.throwIfNullOrUndefined(array, name);
        if (array.length === 0) {
            throw new Error("throwIfArrayEmptyOrWhitespace:" + name);
        }
        for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {
            var item = array_1[_i];
            Contracts.throwIfNullOrWhitespace(item, name);
        }
    };
    Contracts.throwIfFileDoesNotExist = function (param, name) {
        Contracts.throwIfNullOrWhitespace(param, name);
        // TODO check for file existence.
    };
    return Contracts;
}());
exports.Contracts = Contracts;

//# sourceMappingURL=Contracts.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js ***!
  \***************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var AudioConfig_1 = __webpack_require__(/*! ./Audio/AudioConfig */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioConfig.js");
exports.AudioConfig = AudioConfig_1.AudioConfig;
var AudioStreamFormat_1 = __webpack_require__(/*! ./Audio/AudioStreamFormat */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js");
exports.AudioStreamFormat = AudioStreamFormat_1.AudioStreamFormat;
var AudioInputStream_1 = __webpack_require__(/*! ./Audio/AudioInputStream */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioInputStream.js");
exports.AudioInputStream = AudioInputStream_1.AudioInputStream;
exports.PullAudioInputStream = AudioInputStream_1.PullAudioInputStream;
exports.PushAudioInputStream = AudioInputStream_1.PushAudioInputStream;
var CancellationReason_1 = __webpack_require__(/*! ./CancellationReason */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationReason.js");
exports.CancellationReason = CancellationReason_1.CancellationReason;
var PullAudioInputStreamCallback_1 = __webpack_require__(/*! ./Audio/PullAudioInputStreamCallback */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/PullAudioInputStreamCallback.js");
exports.PullAudioInputStreamCallback = PullAudioInputStreamCallback_1.PullAudioInputStreamCallback;
var KeywordRecognitionModel_1 = __webpack_require__(/*! ./KeywordRecognitionModel */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/KeywordRecognitionModel.js");
exports.KeywordRecognitionModel = KeywordRecognitionModel_1.KeywordRecognitionModel;
var SessionEventArgs_1 = __webpack_require__(/*! ./SessionEventArgs */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SessionEventArgs.js");
exports.SessionEventArgs = SessionEventArgs_1.SessionEventArgs;
var RecognitionEventArgs_1 = __webpack_require__(/*! ./RecognitionEventArgs */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/RecognitionEventArgs.js");
exports.RecognitionEventArgs = RecognitionEventArgs_1.RecognitionEventArgs;
var OutputFormat_1 = __webpack_require__(/*! ./OutputFormat */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/OutputFormat.js");
exports.OutputFormat = OutputFormat_1.OutputFormat;
var IntentRecognitionEventArgs_1 = __webpack_require__(/*! ./IntentRecognitionEventArgs */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionEventArgs.js");
exports.IntentRecognitionEventArgs = IntentRecognitionEventArgs_1.IntentRecognitionEventArgs;
var RecognitionResult_1 = __webpack_require__(/*! ./RecognitionResult */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/RecognitionResult.js");
exports.RecognitionResult = RecognitionResult_1.RecognitionResult;
var SpeechRecognitionResult_1 = __webpack_require__(/*! ./SpeechRecognitionResult */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionResult.js");
exports.SpeechRecognitionResult = SpeechRecognitionResult_1.SpeechRecognitionResult;
var IntentRecognitionResult_1 = __webpack_require__(/*! ./IntentRecognitionResult */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionResult.js");
exports.IntentRecognitionResult = IntentRecognitionResult_1.IntentRecognitionResult;
var LanguageUnderstandingModel_1 = __webpack_require__(/*! ./LanguageUnderstandingModel */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LanguageUnderstandingModel.js");
exports.LanguageUnderstandingModel = LanguageUnderstandingModel_1.LanguageUnderstandingModel;
var SpeechRecognitionEventArgs_1 = __webpack_require__(/*! ./SpeechRecognitionEventArgs */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionEventArgs.js");
exports.SpeechRecognitionEventArgs = SpeechRecognitionEventArgs_1.SpeechRecognitionEventArgs;
var SpeechRecognitionCanceledEventArgs_1 = __webpack_require__(/*! ./SpeechRecognitionCanceledEventArgs */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionCanceledEventArgs.js");
exports.SpeechRecognitionCanceledEventArgs = SpeechRecognitionCanceledEventArgs_1.SpeechRecognitionCanceledEventArgs;
var TranslationRecognitionEventArgs_1 = __webpack_require__(/*! ./TranslationRecognitionEventArgs */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionEventArgs.js");
exports.TranslationRecognitionEventArgs = TranslationRecognitionEventArgs_1.TranslationRecognitionEventArgs;
var TranslationSynthesisEventArgs_1 = __webpack_require__(/*! ./TranslationSynthesisEventArgs */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationSynthesisEventArgs.js");
exports.TranslationSynthesisEventArgs = TranslationSynthesisEventArgs_1.TranslationSynthesisEventArgs;
var TranslationRecognitionResult_1 = __webpack_require__(/*! ./TranslationRecognitionResult */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionResult.js");
exports.TranslationRecognitionResult = TranslationRecognitionResult_1.TranslationRecognitionResult;
var TranslationSynthesisResult_1 = __webpack_require__(/*! ./TranslationSynthesisResult */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationSynthesisResult.js");
exports.TranslationSynthesisResult = TranslationSynthesisResult_1.TranslationSynthesisResult;
var ResultReason_1 = __webpack_require__(/*! ./ResultReason */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ResultReason.js");
exports.ResultReason = ResultReason_1.ResultReason;
var SpeechConfig_1 = __webpack_require__(/*! ./SpeechConfig */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechConfig.js");
exports.SpeechConfig = SpeechConfig_1.SpeechConfig;
var SpeechTranslationConfig_1 = __webpack_require__(/*! ./SpeechTranslationConfig */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechTranslationConfig.js");
exports.SpeechTranslationConfig = SpeechTranslationConfig_1.SpeechTranslationConfig;
var PropertyCollection_1 = __webpack_require__(/*! ./PropertyCollection */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyCollection.js");
exports.PropertyCollection = PropertyCollection_1.PropertyCollection;
var PropertyId_1 = __webpack_require__(/*! ./PropertyId */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyId.js");
exports.PropertyId = PropertyId_1.PropertyId;
var Recognizer_1 = __webpack_require__(/*! ./Recognizer */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Recognizer.js");
exports.Recognizer = Recognizer_1.Recognizer;
var SpeechRecognizer_1 = __webpack_require__(/*! ./SpeechRecognizer */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognizer.js");
exports.SpeechRecognizer = SpeechRecognizer_1.SpeechRecognizer;
var IntentRecognizer_1 = __webpack_require__(/*! ./IntentRecognizer */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognizer.js");
exports.IntentRecognizer = IntentRecognizer_1.IntentRecognizer;
var TranslationRecognizer_1 = __webpack_require__(/*! ./TranslationRecognizer */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognizer.js");
exports.TranslationRecognizer = TranslationRecognizer_1.TranslationRecognizer;
var Translations_1 = __webpack_require__(/*! ./Translations */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Translations.js");
exports.Translations = Translations_1.Translations;
var NoMatchReason_1 = __webpack_require__(/*! ./NoMatchReason */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/NoMatchReason.js");
exports.NoMatchReason = NoMatchReason_1.NoMatchReason;
var NoMatchDetails_1 = __webpack_require__(/*! ./NoMatchDetails */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/NoMatchDetails.js");
exports.NoMatchDetails = NoMatchDetails_1.NoMatchDetails;
var TranslationRecognitionCanceledEventArgs_1 = __webpack_require__(/*! ./TranslationRecognitionCanceledEventArgs */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionCanceledEventArgs.js");
exports.TranslationRecognitionCanceledEventArgs = TranslationRecognitionCanceledEventArgs_1.TranslationRecognitionCanceledEventArgs;
var IntentRecognitionCanceledEventArgs_1 = __webpack_require__(/*! ./IntentRecognitionCanceledEventArgs */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionCanceledEventArgs.js");
exports.IntentRecognitionCanceledEventArgs = IntentRecognitionCanceledEventArgs_1.IntentRecognitionCanceledEventArgs;
var CancellationDetails_1 = __webpack_require__(/*! ./CancellationDetails */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationDetails.js");
exports.CancellationDetails = CancellationDetails_1.CancellationDetails;
var CancellationErrorCodes_1 = __webpack_require__(/*! ./CancellationErrorCodes */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationErrorCodes.js");
exports.CancellationErrorCode = CancellationErrorCodes_1.CancellationErrorCode;
var ConnectionEventArgs_1 = __webpack_require__(/*! ./ConnectionEventArgs */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConnectionEventArgs.js");
exports.ConnectionEventArgs = ConnectionEventArgs_1.ConnectionEventArgs;
var Connection_1 = __webpack_require__(/*! ./Connection */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Connection.js");
exports.Connection = Connection_1.Connection;
var PhraseListGrammar_1 = __webpack_require__(/*! ./PhraseListGrammar */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PhraseListGrammar.js");
exports.PhraseListGrammar = PhraseListGrammar_1.PhraseListGrammar;

//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionCanceledEventArgs.js":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionCanceledEventArgs.js ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Define payload of intent recognition canceled result events.
 * @class IntentRecognitionCanceledEventArgs
 */
var IntentRecognitionCanceledEventArgs = /** @class */ (function (_super) {
    __extends(IntentRecognitionCanceledEventArgs, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} result - The result of the intent recognition.
     * @param {string} offset - The offset.
     * @param {IntentRecognitionResult} sessionId - The session id.
     */
    function IntentRecognitionCanceledEventArgs(reason, errorDetails, errorCode, result, offset, sessionId) {
        var _this = _super.call(this, result, offset, sessionId) || this;
        _this.privReason = reason;
        _this.privErrorDetails = errorDetails;
        _this.privErrorCode = errorCode;
        return _this;
    }
    Object.defineProperty(IntentRecognitionCanceledEventArgs.prototype, "reason", {
        /**
         * The reason the recognition was canceled.
         * @member IntentRecognitionCanceledEventArgs.prototype.reason
         * @function
         * @public
         * @returns {CancellationReason} Specifies the reason canceled.
         */
        get: function () {
            return this.privReason;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IntentRecognitionCanceledEventArgs.prototype, "errorCode", {
        /**
         * The error code in case of an unsuccessful recognition.
         * Added in version 1.1.0.
         * @return An error code that represents the error reason.
         */
        get: function () {
            return this.privErrorCode;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IntentRecognitionCanceledEventArgs.prototype, "errorDetails", {
        /**
         * In case of an unsuccessful recognition, provides details of the occurred error.
         * @member IntentRecognitionCanceledEventArgs.prototype.errorDetails
         * @function
         * @public
         * @returns {string} A String that represents the error details.
         */
        get: function () {
            return this.privErrorDetails;
        },
        enumerable: true,
        configurable: true
    });
    return IntentRecognitionCanceledEventArgs;
}(Exports_1.IntentRecognitionEventArgs));
exports.IntentRecognitionCanceledEventArgs = IntentRecognitionCanceledEventArgs;

//# sourceMappingURL=IntentRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionEventArgs.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionEventArgs.js ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Intent recognition result event arguments.
 * @class
 */
var IntentRecognitionEventArgs = /** @class */ (function (_super) {
    __extends(IntentRecognitionEventArgs, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param result - The result of the intent recognition.
     * @param offset - The offset.
     * @param sessionId - The session id.
     */
    function IntentRecognitionEventArgs(result, offset, sessionId) {
        var _this = _super.call(this, offset, sessionId) || this;
        _this.privResult = result;
        return _this;
    }
    Object.defineProperty(IntentRecognitionEventArgs.prototype, "result", {
        /**
         * Represents the intent recognition result.
         * @member IntentRecognitionEventArgs.prototype.result
         * @function
         * @public
         * @returns {IntentRecognitionResult} Represents the intent recognition result.
         */
        get: function () {
            return this.privResult;
        },
        enumerable: true,
        configurable: true
    });
    return IntentRecognitionEventArgs;
}(Exports_1.RecognitionEventArgs));
exports.IntentRecognitionEventArgs = IntentRecognitionEventArgs;

//# sourceMappingURL=IntentRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionResult.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionResult.js ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Intent recognition result.
 * @class
 */
var IntentRecognitionResult = /** @class */ (function (_super) {
    __extends(IntentRecognitionResult, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param intentId - The intent id.
     * @param resultId - The result id.
     * @param reason - The reason.
     * @param text - The recognized text.
     * @param duration - The duration.
     * @param offset - The offset into the stream.
     * @param errorDetails - Error details, if provided.
     * @param json - Additional Json, if provided.
     * @param properties - Additional properties, if provided.
     */
    function IntentRecognitionResult(intentId, resultId, reason, text, duration, offset, errorDetails, json, properties) {
        var _this = _super.call(this, resultId, reason, text, duration, offset, errorDetails, json, properties) || this;
        _this.privIntentId = intentId;
        return _this;
    }
    Object.defineProperty(IntentRecognitionResult.prototype, "intentId", {
        /**
         * A String that represents the intent identifier being recognized.
         * @member IntentRecognitionResult.prototype.intentId
         * @function
         * @public
         * @returns {string} A String that represents the intent identifier being recognized.
         */
        get: function () {
            return this.privIntentId;
        },
        enumerable: true,
        configurable: true
    });
    return IntentRecognitionResult;
}(Exports_1.SpeechRecognitionResult));
exports.IntentRecognitionResult = IntentRecognitionResult;

//# sourceMappingURL=IntentRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognizer.js":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognizer.js ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Contracts_1 = __webpack_require__(/*! ./Contracts */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");
var Exports_2 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Intent recognizer.
 * @class
 */
var IntentRecognizer = /** @class */ (function (_super) {
    __extends(IntentRecognizer, _super);
    /**
     * Initializes an instance of the IntentRecognizer.
     * @constructor
     * @param {SpeechConfig} speechConfig - The set of configuration properties.
     * @param {AudioConfig} audioConfig - An optional audio input config associated with the recognizer
     */
    function IntentRecognizer(speechConfig, audioConfig) {
        var _this = this;
        Contracts_1.Contracts.throwIfNullOrUndefined(speechConfig, "speechConfig");
        var configImpl = speechConfig;
        Contracts_1.Contracts.throwIfNullOrUndefined(configImpl, "speechConfig");
        _this = _super.call(this, audioConfig, configImpl.properties, new Exports_1.IntentConnectionFactory()) || this;
        _this.privAddedIntents = [];
        _this.privAddedLmIntents = {};
        _this.privDisposedIntentRecognizer = false;
        _this.privProperties = configImpl.properties;
        Contracts_1.Contracts.throwIfNullOrWhitespace(_this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage), Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage]);
        return _this;
    }
    Object.defineProperty(IntentRecognizer.prototype, "speechRecognitionLanguage", {
        /**
         * Gets the spoken language of recognition.
         * @member IntentRecognizer.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @returns {string} the spoken language of recognition.
         */
        get: function () {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
            return this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IntentRecognizer.prototype, "authorizationToken", {
        /**
         * Gets the authorization token used to communicate with the service.
         * @member IntentRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */
        get: function () {
            return this.properties.getProperty(Exports_2.PropertyId.SpeechServiceAuthorization_Token);
        },
        /**
         * Gets/Sets the authorization token used to communicate with the service.
         * Note: Please use a token derived from your LanguageUnderstanding subscription key for the Intent recognizer.
         * @member IntentRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @param {string} value - Authorization token.
         */
        set: function (value) {
            this.properties.setProperty(Exports_2.PropertyId.SpeechServiceAuthorization_Token, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IntentRecognizer.prototype, "properties", {
        /**
         * The collection of properties and their values defined for this IntentRecognizer.
         * @member IntentRecognizer.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their
         *          values defined for this IntentRecognizer.
         */
        get: function () {
            return this.privProperties;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Starts intent recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text and intent as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     *       so it is suitable only for single shot recognition like command or query.
     *       For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member IntentRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the recognition has finished with an IntentRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */
    IntentRecognizer.prototype.recognizeOnceAsync = function (cb, err) {
        var _this = this;
        try {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
            this.implRecognizerStop();
            if (Object.keys(this.privAddedLmIntents).length !== 0 || undefined !== this.privUmbrellaIntent) {
                var context = this.buildSpeechContext();
                this.privReco.speechContext.setSection("intent", context.Intent);
                this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);
                var intentReco = this.privReco;
                intentReco.setIntents(this.privAddedLmIntents, this.privUmbrellaIntent);
            }
            this.implRecognizerStart(Exports_1.RecognitionMode.Interactive, function (e) {
                _this.implRecognizerStop();
                if (!!cb) {
                    cb(e);
                }
            }, function (e) {
                _this.implRecognizerStop();
                if (!!err) {
                    err(e);
                }
            });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    var typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    };
    /**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member IntentRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    IntentRecognizer.prototype.startContinuousRecognitionAsync = function (cb, err) {
        try {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
            this.implRecognizerStop();
            if (Object.keys(this.privAddedLmIntents).length !== 0) {
                var context = this.buildSpeechContext();
                this.privReco.speechContext.setSection("intent", context.Intent);
                this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);
                var intentReco = this.privReco;
                intentReco.setIntents(this.privAddedLmIntents, this.privUmbrellaIntent);
            }
            this.implRecognizerStart(Exports_1.RecognitionMode.Conversation, undefined, undefined);
            // report result to promise.
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
                cb = undefined;
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    var typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    };
    /**
     * Stops continuous intent recognition.
     * @member IntentRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    IntentRecognizer.prototype.stopContinuousRecognitionAsync = function (cb, err) {
        try {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
            this.implRecognizerStop();
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    var typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    };
    /**
     * Starts speech recognition with keyword spotting, until stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     *       This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model - The keyword recognition model that specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    IntentRecognizer.prototype.startKeywordRecognitionAsync = function (model, cb, err) {
        Contracts_1.Contracts.throwIfNull(model, "model");
        if (!!err) {
            err("Not yet implemented.");
        }
    };
    /**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     *       This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    IntentRecognizer.prototype.stopKeywordRecognitionAsync = function (cb, err) {
        if (!!cb) {
            cb();
        }
    };
    /**
     * Adds a phrase that should be recognized as intent.
     * @member IntentRecognizer.prototype.addIntent
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent to be recognized.
     * @param {string} phrase - A String that specifies the phrase representing the intent.
     */
    IntentRecognizer.prototype.addIntent = function (simplePhrase, intentId) {
        Contracts_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
        Contracts_1.Contracts.throwIfNullOrWhitespace(intentId, "intentId");
        Contracts_1.Contracts.throwIfNullOrWhitespace(simplePhrase, "simplePhrase");
        this.privAddedIntents.push([intentId, simplePhrase]);
    };
    /**
     * Adds an intent from Language Understanding service for recognition.
     * @member IntentRecognizer.prototype.addIntentWithLanguageModel
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent
     *        to be recognized. Ignored if intentName is empty.
     * @param {string} model - The intent model from Language Understanding service.
     * @param {string} intentName - The intent name defined in the intent model. If it
     *        is empty, all intent names defined in the model will be added.
     */
    IntentRecognizer.prototype.addIntentWithLanguageModel = function (intentId, model, intentName) {
        Contracts_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
        Contracts_1.Contracts.throwIfNullOrWhitespace(intentId, "intentId");
        Contracts_1.Contracts.throwIfNull(model, "model");
        var modelImpl = model;
        Contracts_1.Contracts.throwIfNullOrWhitespace(modelImpl.appId, "model.appId");
        this.privAddedLmIntents[intentId] = new Exports_1.AddedLmIntent(modelImpl, intentName);
    };
    /**
     * @summary Adds all intents from the specified Language Understanding Model.
     * @member IntentRecognizer.prototype.addAllIntents
     * @function
     * @public
     * @function
     * @public
     * @param {LanguageUnderstandingModel} model - The language understanding model containing the intents.
     * @param {string} intentId - A custom id String to be returned in the IntentRecognitionResult's getIntentId() method.
     */
    IntentRecognizer.prototype.addAllIntents = function (model, intentId) {
        Contracts_1.Contracts.throwIfNull(model, "model");
        var modelImpl = model;
        Contracts_1.Contracts.throwIfNullOrWhitespace(modelImpl.appId, "model.appId");
        this.privUmbrellaIntent = new Exports_1.AddedLmIntent(modelImpl, intentId);
    };
    /**
     * closes all external resources held by an instance of this class.
     * @member IntentRecognizer.prototype.close
     * @function
     * @public
     */
    IntentRecognizer.prototype.close = function () {
        Contracts_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
        this.dispose(true);
    };
    IntentRecognizer.prototype.createRecognizerConfig = function (speechConfig) {
        return new Exports_1.RecognizerConfig(speechConfig, this.properties);
    };
    IntentRecognizer.prototype.createServiceRecognizer = function (authentication, connectionFactory, audioConfig, recognizerConfig) {
        var audioImpl = audioConfig;
        return new Exports_1.IntentServiceRecognizer(authentication, connectionFactory, audioImpl, recognizerConfig, this);
    };
    IntentRecognizer.prototype.dispose = function (disposing) {
        if (this.privDisposedIntentRecognizer) {
            return;
        }
        if (disposing) {
            this.privDisposedIntentRecognizer = true;
            _super.prototype.dispose.call(this, disposing);
        }
    };
    IntentRecognizer.prototype.buildSpeechContext = function () {
        var appId;
        var region;
        var subscriptionKey;
        var refGrammers = [];
        if (undefined !== this.privUmbrellaIntent) {
            appId = this.privUmbrellaIntent.modelImpl.appId;
            region = this.privUmbrellaIntent.modelImpl.region;
            subscriptionKey = this.privUmbrellaIntent.modelImpl.subscriptionKey;
        }
        // Build the reference grammer array.
        for (var _i = 0, _a = Object.keys(this.privAddedLmIntents); _i < _a.length; _i++) {
            var intentId = _a[_i];
            var addedLmIntent = this.privAddedLmIntents[intentId];
            // validate all the same model, region, and key...
            if (appId === undefined) {
                appId = addedLmIntent.modelImpl.appId;
            }
            else {
                if (appId !== addedLmIntent.modelImpl.appId) {
                    throw new Error("Intents must all be from the same LUIS model");
                }
            }
            if (region === undefined) {
                region = addedLmIntent.modelImpl.region;
            }
            else {
                if (region !== addedLmIntent.modelImpl.region) {
                    throw new Error("Intents must all be from the same LUIS model in a single region");
                }
            }
            if (subscriptionKey === undefined) {
                subscriptionKey = addedLmIntent.modelImpl.subscriptionKey;
            }
            else {
                if (subscriptionKey !== addedLmIntent.modelImpl.subscriptionKey) {
                    throw new Error("Intents must all use the same subscription key");
                }
            }
            var grammer = "luis/" + appId + "-PRODUCTION#" + intentId;
            refGrammers.push(grammer);
        }
        return {
            Intent: {
                id: appId,
                key: (subscriptionKey === undefined) ? this.privProperties.getProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_Key]) : subscriptionKey,
                provider: "LUIS",
            },
            ReferenceGrammars: (undefined === this.privUmbrellaIntent) ? refGrammers : ["luis/" + appId + "-PRODUCTION"],
        };
    };
    return IntentRecognizer;
}(Exports_2.Recognizer));
exports.IntentRecognizer = IntentRecognizer;

//# sourceMappingURL=IntentRecognizer.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/KeywordRecognitionModel.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/KeywordRecognitionModel.js ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Contracts_1 = __webpack_require__(/*! ./Contracts */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");
/**
 * Represents a keyword recognition model for recognizing when
 * the user says a keyword to initiate further speech recognition.
 * @class KeywordRecognitionModel
 */
var KeywordRecognitionModel = /** @class */ (function () {
    /**
     * Create and initializes a new instance.
     * @constructor
     */
    function KeywordRecognitionModel() {
        this.privDisposed = false;
    }
    /**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromFile
     * @function
     * @public
     * @param {string} fileName - A string that represents file name for the keyword recognition model.
     *        Note, the file can point to a zip file in which case the model
     *        will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */
    KeywordRecognitionModel.fromFile = function (fileName) {
        Contracts_1.Contracts.throwIfFileDoesNotExist(fileName, "fileName");
        throw new Error("Not yet implemented.");
    };
    /**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromStream
     * @function
     * @public
     * @param {string} file - A File that represents file for the keyword recognition model.
     *        Note, the file can point to a zip file in which case the model will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */
    KeywordRecognitionModel.fromStream = function (file) {
        Contracts_1.Contracts.throwIfNull(file, "file");
        throw new Error("Not yet implemented.");
    };
    /**
     * Dispose of associated resources.
     * @member KeywordRecognitionModel.prototype.close
     * @function
     * @public
     */
    KeywordRecognitionModel.prototype.close = function () {
        if (this.privDisposed) {
            return;
        }
        this.privDisposed = true;
    };
    return KeywordRecognitionModel;
}());
exports.KeywordRecognitionModel = KeywordRecognitionModel;

//# sourceMappingURL=KeywordRecognitionModel.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LanguageUnderstandingModel.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LanguageUnderstandingModel.js ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Contracts_1 = __webpack_require__(/*! ./Contracts */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");
/**
 * Language understanding model
 * @class LanguageUnderstandingModel
 */
var LanguageUnderstandingModel = /** @class */ (function () {
    /**
     * Creates and initializes a new instance
     * @constructor
     */
    function LanguageUnderstandingModel() {
    }
    /**
     * Creates an language understanding model using the specified endpoint.
     * @member LanguageUnderstandingModel.fromEndpoint
     * @function
     * @public
     * @param {URL} uri - A String that represents the endpoint of the language understanding model.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    LanguageUnderstandingModel.fromEndpoint = function (uri) {
        Contracts_1.Contracts.throwIfNull(uri, "uri");
        Contracts_1.Contracts.throwIfNullOrWhitespace(uri.hostname, "uri");
        var langModelImp = new LanguageUnderstandingModelImpl();
        // Need to extract the app ID from the URL.
        // URL is in the format: https://<region>.api.cognitive.microsoft.com/luis/v2.0/apps/<Guid>?subscription-key=<key>&timezoneOffset=-360
        // Start tearing the string apart.
        // region can be extracted from the host name.
        var firstDot = uri.host.indexOf(".");
        if (-1 === firstDot) {
            throw new Error("Could not determine region from endpoint");
        }
        langModelImp.region = uri.host.substr(0, firstDot);
        // Now the app ID.
        var lastSegment = uri.pathname.lastIndexOf("/") + 1;
        if (-1 === lastSegment) {
            throw new Error("Could not determine appId from endpoint");
        }
        langModelImp.appId = uri.pathname.substr(lastSegment);
        // And finally the key.
        langModelImp.subscriptionKey = uri.searchParams.get("subscription-key");
        if (undefined === langModelImp.subscriptionKey) {
            throw new Error("Could not determine subscription key from endpoint");
        }
        return langModelImp;
    };
    /**
     * Creates an language understanding model using the application id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromAppId
     * @function
     * @public
     * @param {string} appId - A String that represents the application id of Language Understanding service.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    LanguageUnderstandingModel.fromAppId = function (appId) {
        Contracts_1.Contracts.throwIfNullOrWhitespace(appId, "appId");
        var langModelImp = new LanguageUnderstandingModelImpl();
        langModelImp.appId = appId;
        return langModelImp;
    };
    /**
     * Creates a language understanding model using hostname, subscription key and application
     * id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - A String that represents the subscription key of
     *        Language Understanding service.
     * @param {string} appId - A String that represents the application id of Language
     *        Understanding service.
     * @param {LanguageUnderstandingModel} region - A String that represents the region
     *        of the Language Understanding service (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    LanguageUnderstandingModel.fromSubscription = function (subscriptionKey, appId, region) {
        Contracts_1.Contracts.throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        Contracts_1.Contracts.throwIfNullOrWhitespace(appId, "appId");
        Contracts_1.Contracts.throwIfNullOrWhitespace(region, "region");
        var langModelImp = new LanguageUnderstandingModelImpl();
        langModelImp.appId = appId;
        langModelImp.region = region;
        langModelImp.subscriptionKey = subscriptionKey;
        return langModelImp;
    };
    return LanguageUnderstandingModel;
}());
exports.LanguageUnderstandingModel = LanguageUnderstandingModel;
/**
 * @private
 * @class LanguageUnderstandingModelImpl
 */
// tslint:disable-next-line:max-classes-per-file
var LanguageUnderstandingModelImpl = /** @class */ (function (_super) {
    __extends(LanguageUnderstandingModelImpl, _super);
    function LanguageUnderstandingModelImpl() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return LanguageUnderstandingModelImpl;
}(LanguageUnderstandingModel));
exports.LanguageUnderstandingModelImpl = LanguageUnderstandingModelImpl;

//# sourceMappingURL=LanguageUnderstandingModel.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/NoMatchDetails.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/NoMatchDetails.js ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../../src/common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Exports_2 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Contains detailed information for NoMatch recognition results.
 * @class NoMatchDetails
 */
var NoMatchDetails = /** @class */ (function () {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {NoMatchReason} reason - The no-match reason.
     */
    function NoMatchDetails(reason) {
        this.privReason = reason;
    }
    /**
     * Creates an instance of NoMatchDetails object for the NoMatch SpeechRecognitionResults.
     * @member NoMatchDetails.fromResult
     * @function
     * @public
     * @param {SpeechRecognitionResult | IntentRecognitionResult | TranslationRecognitionResult}
     *        result - The recognition result that was not recognized.
     * @returns {NoMatchDetails} The no match details object being created.
     */
    NoMatchDetails.fromResult = function (result) {
        var simpleSpeech = Exports_1.SimpleSpeechPhrase.fromJSON(result.json);
        var reason = Exports_2.NoMatchReason.NotRecognized;
        switch (simpleSpeech.RecognitionStatus) {
            case Exports_1.RecognitionStatus.BabbleTimeout:
                reason = Exports_2.NoMatchReason.InitialBabbleTimeout;
                break;
            case Exports_1.RecognitionStatus.InitialSilenceTimeout:
                reason = Exports_2.NoMatchReason.InitialSilenceTimeout;
                break;
            default:
                reason = Exports_2.NoMatchReason.NotRecognized;
                break;
        }
        return new NoMatchDetails(reason);
    };
    Object.defineProperty(NoMatchDetails.prototype, "reason", {
        /**
         * The reason the recognition was canceled.
         * @member NoMatchDetails.prototype.reason
         * @function
         * @public
         * @returns {NoMatchReason} Specifies the reason canceled.
         */
        get: function () {
            return this.privReason;
        },
        enumerable: true,
        configurable: true
    });
    return NoMatchDetails;
}());
exports.NoMatchDetails = NoMatchDetails;

//# sourceMappingURL=NoMatchDetails.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/NoMatchReason.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/NoMatchReason.js ***!
  \*********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Defines the possible reasons a recognition result might not be recognized.
 * @class NoMatchReason
 */
var NoMatchReason;
(function (NoMatchReason) {
    /**
     * Indicates that speech was detected, but not recognized.
     * @member NoMatchReason.NotRecognized
     */
    NoMatchReason[NoMatchReason["NotRecognized"] = 0] = "NotRecognized";
    /**
     * Indicates that the start of the audio stream contained only silence,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialSilenceTimeout
     */
    NoMatchReason[NoMatchReason["InitialSilenceTimeout"] = 1] = "InitialSilenceTimeout";
    /**
     * Indicates that the start of the audio stream contained only noise,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialBabbleTimeout
     */
    NoMatchReason[NoMatchReason["InitialBabbleTimeout"] = 2] = "InitialBabbleTimeout";
})(NoMatchReason = exports.NoMatchReason || (exports.NoMatchReason = {}));

//# sourceMappingURL=NoMatchReason.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/OutputFormat.js":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/OutputFormat.js ***!
  \********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Define Speech Recognizer output formats.
 * @class OutputFormat
 */
var OutputFormat;
(function (OutputFormat) {
    /**
     * @member OutputFormat.Simple
     */
    OutputFormat[OutputFormat["Simple"] = 0] = "Simple";
    /**
     * @member OutputFormat.Detailed
     */
    OutputFormat[OutputFormat["Detailed"] = 1] = "Detailed";
})(OutputFormat = exports.OutputFormat || (exports.OutputFormat = {}));

//# sourceMappingURL=OutputFormat.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PhraseListGrammar.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PhraseListGrammar.js ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Allows additions of new phrases to improve speech recognition.
 *
 * Phrases added to the recognizer are effective at the start of the next recognition, or the next time the SpeechSDK must reconnect
 * to the speech service.
 */
var PhraseListGrammar = /** @class */ (function () {
    function PhraseListGrammar(recogBase) {
        this.privGrammerBuilder = recogBase.dynamicGrammar;
    }
    /**
     * Creates a PhraseListGrammar from a given speech recognizer. Will accept any recognizer that derives from @class Recognizer.
     * @param recognizer The recognizer to add phrase lists to.
     */
    PhraseListGrammar.fromRecognizer = function (recognizer) {
        var recoBase = recognizer.internalData;
        return new PhraseListGrammar(recoBase);
    };
    /**
     * Adds a single phrase to the current recognizer.
     * @param phrase Phrase to add.
     */
    PhraseListGrammar.prototype.addPhrase = function (phrase) {
        this.privGrammerBuilder.addPhrase(phrase);
    };
    /**
     * Adds multiple phrases to the current recognizer.
     * @param phrases Array of phrases to add.
     */
    PhraseListGrammar.prototype.addPhrases = function (phrases) {
        this.privGrammerBuilder.addPhrase(phrases);
    };
    /**
     * Clears all phrases added to the current recognizer.
     */
    PhraseListGrammar.prototype.clear = function () {
        this.privGrammerBuilder.clearPhrases();
    };
    return PhraseListGrammar;
}());
exports.PhraseListGrammar = PhraseListGrammar;

//# sourceMappingURL=PhraseListGrammar.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyCollection.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyCollection.js ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Represents collection of properties and their values.
 * @class PropertyCollection
 */
var PropertyCollection = /** @class */ (function () {
    function PropertyCollection() {
        this.privKeys = [];
        this.privValues = [];
    }
    /**
     * Returns the property value in type String. The parameter must have the same type as String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member PropertyCollection.prototype.getProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} def - The default value which is returned if the parameter
     *        is not available in the collection.
     * @returns {string} value of the parameter.
     */
    PropertyCollection.prototype.getProperty = function (key, def) {
        var keyToUse;
        if (typeof key === "string") {
            keyToUse = key;
        }
        else {
            keyToUse = Exports_1.PropertyId[key];
        }
        for (var n = 0; n < this.privKeys.length; n++) {
            if (this.privKeys[n] === keyToUse) {
                return this.privValues[n];
            }
        }
        return def;
    };
    /**
     * Sets the String value of the parameter specified by name.
     * @member PropertyCollection.prototype.setProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */
    PropertyCollection.prototype.setProperty = function (key, value) {
        var keyToUse;
        if (typeof key === "string") {
            keyToUse = key;
        }
        else {
            keyToUse = Exports_1.PropertyId[key];
        }
        for (var n = 0; n < this.privKeys.length; n++) {
            if (this.privKeys[n] === keyToUse) {
                this.privValues[n] = value;
                return;
            }
        }
        this.privKeys.push(keyToUse);
        this.privValues.push(value);
    };
    /**
     * Clones the collection.
     * @member PropertyCollection.prototype.clone
     * @function
     * @public
     * @returns {PropertyCollection} A copy of the collection.
     */
    PropertyCollection.prototype.clone = function () {
        var clonedMap = new PropertyCollection();
        for (var n = 0; n < this.privKeys.length; n++) {
            clonedMap.privKeys.push(this.privKeys[n]);
            clonedMap.privValues.push(this.privValues[n]);
        }
        return clonedMap;
    };
    return PropertyCollection;
}());
exports.PropertyCollection = PropertyCollection;

//# sourceMappingURL=PropertyCollection.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyId.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyId.js ***!
  \******************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Defines speech property ids.
 * @class PropertyId
 */
var PropertyId;
(function (PropertyId) {
    /**
     * The Cognitive Services Speech Service subscription Key. If you are using an intent recognizer, you need to specify
     * to specify the LUIS endpoint key for your particular LUIS app. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]].
     * @member PropertyId.SpeechServiceConnection_Key
     */
    PropertyId[PropertyId["SpeechServiceConnection_Key"] = 0] = "SpeechServiceConnection_Key";
    /**
     * The Cognitive Services Speech Service endpoint (url). Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromEndpoint]].
     * NOTE: This endpoint is not the same as the endpoint used to obtain an access token.
     * @member PropertyId.SpeechServiceConnection_Endpoint
     */
    PropertyId[PropertyId["SpeechServiceConnection_Endpoint"] = 1] = "SpeechServiceConnection_Endpoint";
    /**
     * The Cognitive Services Speech Service region. Under normal circumstances, you shouldn't have to
     * use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]], [[SpeechConfig.fromEndpoint]], [[SpeechConfig.fromAuthorizationToken]].
     * @member PropertyId.SpeechServiceConnection_Region
     */
    PropertyId[PropertyId["SpeechServiceConnection_Region"] = 2] = "SpeechServiceConnection_Region";
    /**
     * The Cognitive Services Speech Service authorization token (aka access token). Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead, use [[SpeechConfig.fromAuthorizationToken]],
     * [[SpeechRecognizer.authorizationToken]], [[IntentRecognizer.authorizationToken]], [[TranslationRecognizer.authorizationToken]].
     * @member PropertyId.SpeechServiceAuthorization_Token
     */
    PropertyId[PropertyId["SpeechServiceAuthorization_Token"] = 3] = "SpeechServiceAuthorization_Token";
    /**
     * The Cognitive Services Speech Service authorization type. Currently unused.
     * @member PropertyId.SpeechServiceAuthorization_Type
     */
    PropertyId[PropertyId["SpeechServiceAuthorization_Type"] = 4] = "SpeechServiceAuthorization_Type";
    /**
     * The Cognitive Services Speech Service endpoint id. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.endpointId]].
     * NOTE: The endpoint id is available in the Speech Portal, listed under Endpoint Details.
     * @member PropertyId.SpeechServiceConnection_EndpointId
     */
    PropertyId[PropertyId["SpeechServiceConnection_EndpointId"] = 5] = "SpeechServiceConnection_EndpointId";
    /**
     * The list of comma separated languages (BCP-47 format) used as target translation languages. Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead use [[SpeechTranslationConfig.addTargetLanguage]],
     * [[SpeechTranslationConfig.targetLanguages]], [[TranslationRecognizer.targetLanguages]].
     * @member PropertyId.SpeechServiceConnection_TranslationToLanguages
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationToLanguages"] = 6] = "SpeechServiceConnection_TranslationToLanguages";
    /**
     * The name of the Cognitive Service Text to Speech Service Voice. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead, use [[SpeechTranslationConfig.voiceName]].
     * NOTE: Valid voice names can be found <a href="https://aka.ms/csspeech/voicenames">here</a>.
     * @member PropertyId.SpeechServiceConnection_TranslationVoice
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationVoice"] = 7] = "SpeechServiceConnection_TranslationVoice";
    /**
     * Translation features.
     * @member PropertyId.SpeechServiceConnection_TranslationFeatures
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationFeatures"] = 8] = "SpeechServiceConnection_TranslationFeatures";
    /**
     * The Language Understanding Service Region. Under normal circumstances, you shouldn't have to use this property directly.
     * Instead, use [[LanguageUnderstandingModel]].
     * @member PropertyId.SpeechServiceConnection_IntentRegion
     */
    PropertyId[PropertyId["SpeechServiceConnection_IntentRegion"] = 9] = "SpeechServiceConnection_IntentRegion";
    /**
     * The host name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyHostName"] = 10] = "SpeechServiceConnection_ProxyHostName";
    /**
     * The port of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyPort"] = 11] = "SpeechServiceConnection_ProxyPort";
    /**
     * The user name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyUserName"] = 12] = "SpeechServiceConnection_ProxyUserName";
    /**
     * The password of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyPassword"] = 13] = "SpeechServiceConnection_ProxyPassword";
    /**
     * The Cognitive Services Speech Service recognition Mode. Can be "INTERACTIVE", "CONVERSATION", "DICTATION".
     * This property is intended to be read-only. The SDK is using it internally.
     * @member PropertyId.SpeechServiceConnection_RecoMode
     */
    PropertyId[PropertyId["SpeechServiceConnection_RecoMode"] = 14] = "SpeechServiceConnection_RecoMode";
    /**
     * The spoken language to be recognized (in BCP-47 format). Under normal circumstances, you shouldn't have to use this property
     * directly.
     * Instead, use [[SpeechConfig.speechRecognitionLanguage]].
     * @member PropertyId.SpeechServiceConnection_RecoLanguage
     */
    PropertyId[PropertyId["SpeechServiceConnection_RecoLanguage"] = 15] = "SpeechServiceConnection_RecoLanguage";
    /**
     * The session id. This id is a universally unique identifier (aka UUID) representing a specific binding of an audio input stream
     * and the underlying speech recognition instance to which it is bound. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead use [[SessionEventArgs.sessionId]].
     * @member PropertyId.Speech_SessionId
     */
    PropertyId[PropertyId["Speech_SessionId"] = 16] = "Speech_SessionId";
    /**
     * The requested Cognitive Services Speech Service response output format (simple or detailed). Under normal circumstances, you shouldn't have
     * to use this property directly.
     * Instead use [[SpeechConfig.outputFormat]].
     * @member PropertyId.SpeechServiceResponse_RequestDetailedResultTrueFalse
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestDetailedResultTrueFalse"] = 17] = "SpeechServiceResponse_RequestDetailedResultTrueFalse";
    /**
     * The requested Cognitive Services Speech Service response output profanity level. Currently unused.
     * @member PropertyId.SpeechServiceResponse_RequestProfanityFilterTrueFalse
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestProfanityFilterTrueFalse"] = 18] = "SpeechServiceResponse_RequestProfanityFilterTrueFalse";
    /**
     * The Cognitive Services Speech Service response output (in JSON format). This property is available on recognition result objects only.
     * @member PropertyId.SpeechServiceResponse_JsonResult
     */
    PropertyId[PropertyId["SpeechServiceResponse_JsonResult"] = 19] = "SpeechServiceResponse_JsonResult";
    /**
     * The Cognitive Services Speech Service error details (in JSON format). Under normal circumstances, you shouldn't have to
     * use this property directly. Instead use [[CancellationDetails.errorDetails]].
     * @member PropertyId.SpeechServiceResponse_JsonErrorDetails
     */
    PropertyId[PropertyId["SpeechServiceResponse_JsonErrorDetails"] = 20] = "SpeechServiceResponse_JsonErrorDetails";
    /**
     * The cancellation reason. Currently unused.
     * @member PropertyId.CancellationDetails_Reason
     */
    PropertyId[PropertyId["CancellationDetails_Reason"] = 21] = "CancellationDetails_Reason";
    /**
     * The cancellation text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonText
     */
    PropertyId[PropertyId["CancellationDetails_ReasonText"] = 22] = "CancellationDetails_ReasonText";
    /**
     * The Cancellation detailed text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonDetailedText
     */
    PropertyId[PropertyId["CancellationDetails_ReasonDetailedText"] = 23] = "CancellationDetails_ReasonDetailedText";
    /**
     * The Language Understanding Service response output (in JSON format). Available via [[IntentRecognitionResult]]
     * @member PropertyId.LanguageUnderstandingServiceResponse_JsonResult
     */
    PropertyId[PropertyId["LanguageUnderstandingServiceResponse_JsonResult"] = 24] = "LanguageUnderstandingServiceResponse_JsonResult";
})(PropertyId = exports.PropertyId || (exports.PropertyId = {}));

//# sourceMappingURL=PropertyId.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/RecognitionEventArgs.js":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/RecognitionEventArgs.js ***!
  \****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Defines payload for session events like Speech Start/End Detected
 * @class
 */
var RecognitionEventArgs = /** @class */ (function (_super) {
    __extends(RecognitionEventArgs, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    function RecognitionEventArgs(offset, sessionId) {
        var _this = _super.call(this, sessionId) || this;
        _this.privOffset = offset;
        return _this;
    }
    Object.defineProperty(RecognitionEventArgs.prototype, "offset", {
        /**
         * Represents the message offset
         * @member RecognitionEventArgs.prototype.offset
         * @function
         * @public
         */
        get: function () {
            return this.privOffset;
        },
        enumerable: true,
        configurable: true
    });
    return RecognitionEventArgs;
}(Exports_1.SessionEventArgs));
exports.RecognitionEventArgs = RecognitionEventArgs;

//# sourceMappingURL=RecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/RecognitionResult.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/RecognitionResult.js ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Defines result of speech recognition.
 * @class RecognitionResult
 */
var RecognitionResult = /** @class */ (function () {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    function RecognitionResult(resultId, reason, text, duration, offset, errorDetails, json, properties) {
        this.privResultId = resultId;
        this.privReason = reason;
        this.privText = text;
        this.privDuration = duration;
        this.privOffset = offset;
        this.privErrorDetails = errorDetails;
        this.privJson = json;
        this.privProperties = properties;
    }
    Object.defineProperty(RecognitionResult.prototype, "resultId", {
        /**
         * Specifies the result identifier.
         * @member RecognitionResult.prototype.resultId
         * @function
         * @public
         * @returns {string} Specifies the result identifier.
         */
        get: function () {
            return this.privResultId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionResult.prototype, "reason", {
        /**
         * Specifies status of the result.
         * @member RecognitionResult.prototype.reason
         * @function
         * @public
         * @returns {ResultReason} Specifies status of the result.
         */
        get: function () {
            return this.privReason;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionResult.prototype, "text", {
        /**
         * Presents the recognized text in the result.
         * @member RecognitionResult.prototype.text
         * @function
         * @public
         * @returns {string} Presents the recognized text in the result.
         */
        get: function () {
            return this.privText;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionResult.prototype, "duration", {
        /**
         * Duration of recognized speech in 100 nano second incements.
         * @member RecognitionResult.prototype.duration
         * @function
         * @public
         * @returns {number} Duration of recognized speech in 100 nano second incements.
         */
        get: function () {
            return this.privDuration;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionResult.prototype, "offset", {
        /**
         * Offset of recognized speech in 100 nano second incements.
         * @member RecognitionResult.prototype.offset
         * @function
         * @public
         * @returns {number} Offset of recognized speech in 100 nano second incements.
         */
        get: function () {
            return this.privOffset;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionResult.prototype, "errorDetails", {
        /**
         * In case of an unsuccessful recognition, provides details of the occurred error.
         * @member RecognitionResult.prototype.errorDetails
         * @function
         * @public
         * @returns {string} a brief description of an error.
         */
        get: function () {
            return this.privErrorDetails;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionResult.prototype, "json", {
        /**
         * A string containing Json serialized recognition result as it was received from the service.
         * @member RecognitionResult.prototype.json
         * @function
         * @private
         * @returns {string} Json serialized representation of the result.
         */
        get: function () {
            return this.privJson;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RecognitionResult.prototype, "properties", {
        /**
         *  The set of properties exposed in the result.
         * @member RecognitionResult.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The set of properties exposed in the result.
         */
        get: function () {
            return this.privProperties;
        },
        enumerable: true,
        configurable: true
    });
    return RecognitionResult;
}());
exports.RecognitionResult = RecognitionResult;

//# sourceMappingURL=RecognitionResult.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Recognizer.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Recognizer.js ***!
  \******************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Exports_2 = __webpack_require__(/*! ../common/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");
var Contracts_1 = __webpack_require__(/*! ./Contracts */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");
var Exports_3 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Defines the base class Recognizer which mainly contains common event handlers.
 * @class Recognizer
 */
var Recognizer = /** @class */ (function () {
    /**
     * Creates and initializes an instance of a Recognizer
     * @constructor
     * @param {AudioConfig} audioInput - An optional audio input stream associated with the recognizer
     */
    function Recognizer(audioConfig, properties, connectionFactory) {
        this.audioConfig = (audioConfig !== undefined) ? audioConfig : Exports_3.AudioConfig.fromDefaultMicrophoneInput();
        this.privDisposed = false;
        this.privProperties = properties.clone();
        this.privConnectionFactory = connectionFactory;
        this.implCommonRecognizerSetup();
    }
    /**
     * Dispose of associated resources.
     * @member Recognizer.prototype.close
     * @function
     * @public
     */
    Recognizer.prototype.close = function () {
        Contracts_1.Contracts.throwIfDisposed(this.privDisposed);
        this.dispose(true);
    };
    Object.defineProperty(Recognizer.prototype, "internalData", {
        /**
         * @Internal
         * Internal data member to support fromRecognizer* pattern methods on other classes.
         * Do not use externally, object returned will change without warning or notive.
         */
        get: function () {
            return this.privReco;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * This method performs cleanup of resources.
     * The Boolean parameter disposing indicates whether the method is called
     * from Dispose (if disposing is true) or from the finalizer (if disposing is false).
     * Derived classes should override this method to dispose resource if needed.
     * @member Recognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - Flag to request disposal.
     */
    Recognizer.prototype.dispose = function (disposing) {
        if (this.privDisposed) {
            return;
        }
        if (disposing) {
            if (this.privReco) {
                this.privReco.audioSource.turnOff();
                this.privReco.dispose();
            }
        }
        this.privDisposed = true;
    };
    Object.defineProperty(Recognizer, "telemetryEnabled", {
        /**
         * This method returns the current state of the telemetry setting.
         * @member Recognizer.prototype.telemetryEnabled
         * @function
         * @public
         * @returns true if the telemetry is enabled, false otherwise.
         */
        get: function () {
            return Exports_1.ServiceRecognizerBase.telemetryDataEnabled;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * This method globally enables or disables telemetry.
     * @member Recognizer.prototype.enableTelemetry
     * @function
     * @public
     * @param enabled - Global setting for telemetry collection.
     * If set to true, telemetry information like microphone errors,
     * recognition errors are collected and sent to Microsoft.
     * If set to false, no telemetry is sent to Microsoft.
     */
    /* tslint:disable:member-ordering */
    Recognizer.enableTelemetry = function (enabled) {
        Exports_1.ServiceRecognizerBase.telemetryDataEnabled = enabled;
    };
    // Does the generic recognizer setup that is common accross all recognizer types.
    Recognizer.prototype.implCommonRecognizerSetup = function () {
        var _this = this;
        var osPlatform = (typeof window !== "undefined") ? "Browser" : "Node";
        var osName = "unknown";
        var osVersion = "unknown";
        if (typeof navigator !== "undefined") {
            osPlatform = osPlatform + "/" + navigator.platform;
            osName = navigator.userAgent;
            osVersion = navigator.appVersion;
        }
        var recognizerConfig = this.createRecognizerConfig(new Exports_1.SpeechServiceConfig(new Exports_1.Context(new Exports_1.OS(osPlatform, osName, osVersion))));
        var subscriptionKey = this.privProperties.getProperty(Exports_3.PropertyId.SpeechServiceConnection_Key, undefined);
        var authentication = (subscriptionKey && subscriptionKey !== "") ?
            new Exports_1.CognitiveSubscriptionKeyAuthentication(subscriptionKey) :
            new Exports_1.CognitiveTokenAuthentication(function (authFetchEventId) {
                var authorizationToken = _this.privProperties.getProperty(Exports_3.PropertyId.SpeechServiceAuthorization_Token, undefined);
                return Exports_2.PromiseHelper.fromResult(authorizationToken);
            }, function (authFetchEventId) {
                var authorizationToken = _this.privProperties.getProperty(Exports_3.PropertyId.SpeechServiceAuthorization_Token, undefined);
                return Exports_2.PromiseHelper.fromResult(authorizationToken);
            });
        this.privReco = this.createServiceRecognizer(authentication, this.privConnectionFactory, this.audioConfig, recognizerConfig);
    };
    // Start the recognition
    Recognizer.prototype.implRecognizerStart = function (recognitionMode, successCallback, errorCallback) {
        this.privReco.recognize(recognitionMode, successCallback, errorCallback).on(
        /* tslint:disable:no-empty */
        function (result) { }, function (error) {
            if (!!errorCallback) {
                // Internal error with service communication.
                errorCallback("Runtime error: " + error);
            }
        });
    };
    Recognizer.prototype.implRecognizerStop = function () {
        if (this.privReco) {
            this.privReco.stopRecognizing();
        }
    };
    return Recognizer;
}());
exports.Recognizer = Recognizer;

//# sourceMappingURL=Recognizer.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ResultReason.js":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ResultReason.js ***!
  \********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Defines the possible reasons a recognition result might be generated.
 * @class ResultReason
 */
var ResultReason;
(function (ResultReason) {
    /**
     * Indicates speech could not be recognized. More details
     * can be found in the NoMatchDetails object.
     * @member ResultReason.NoMatch
     */
    ResultReason[ResultReason["NoMatch"] = 0] = "NoMatch";
    /**
     * Indicates that the recognition was canceled. More details
     * can be found using the CancellationDetails object.
     * @member ResultReason.Canceled
     */
    ResultReason[ResultReason["Canceled"] = 1] = "Canceled";
    /**
     * Indicates the speech result contains hypothesis text.
     * @member ResultReason.RecognizedSpeech
     */
    ResultReason[ResultReason["RecognizingSpeech"] = 2] = "RecognizingSpeech";
    /**
     * Indicates the speech result contains final text that has been recognized.
     * Speech Recognition is now complete for this phrase.
     * @member ResultReason.RecognizedSpeech
     */
    ResultReason[ResultReason["RecognizedSpeech"] = 3] = "RecognizedSpeech";
    /**
     * Indicates the intent result contains hypothesis text and intent.
     * @member ResultReason.RecognizingIntent
     */
    ResultReason[ResultReason["RecognizingIntent"] = 4] = "RecognizingIntent";
    /**
     * Indicates the intent result contains final text and intent.
     * Speech Recognition and Intent determination are now complete for this phrase.
     * @member ResultReason.RecognizedIntent
     */
    ResultReason[ResultReason["RecognizedIntent"] = 5] = "RecognizedIntent";
    /**
     * Indicates the translation result contains hypothesis text and its translation(s).
     * @member ResultReason.TranslatingSpeech
     */
    ResultReason[ResultReason["TranslatingSpeech"] = 6] = "TranslatingSpeech";
    /**
     * Indicates the translation result contains final text and corresponding translation(s).
     * Speech Recognition and Translation are now complete for this phrase.
     * @member ResultReason.TranslatedSpeech
     */
    ResultReason[ResultReason["TranslatedSpeech"] = 7] = "TranslatedSpeech";
    /**
     * Indicates the synthesized audio result contains a non-zero amount of audio data
     * @member ResultReason.SynthesizingAudio
     */
    ResultReason[ResultReason["SynthesizingAudio"] = 8] = "SynthesizingAudio";
    /**
     * Indicates the synthesized audio is now complete for this phrase.
     * @member ResultReason.SynthesizingAudioCompleted
     */
    ResultReason[ResultReason["SynthesizingAudioCompleted"] = 9] = "SynthesizingAudioCompleted";
})(ResultReason = exports.ResultReason || (exports.ResultReason = {}));

//# sourceMappingURL=ResultReason.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SessionEventArgs.js":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SessionEventArgs.js ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Defines content for session events like SessionStarted/Stopped, SoundStarted/Stopped.
 * @class SessionEventArgs
 */
var SessionEventArgs = /** @class */ (function () {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionId - The session id.
     */
    function SessionEventArgs(sessionId) {
        this.privSessionId = sessionId;
    }
    Object.defineProperty(SessionEventArgs.prototype, "sessionId", {
        /**
         * Represents the session identifier.
         * @member SessionEventArgs.prototype.sessionId
         * @function
         * @public
         * @returns {string} Represents the session identifier.
         */
        get: function () {
            return this.privSessionId;
        },
        enumerable: true,
        configurable: true
    });
    return SessionEventArgs;
}());
exports.SessionEventArgs = SessionEventArgs;

//# sourceMappingURL=SessionEventArgs.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechConfig.js":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechConfig.js ***!
  \********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Contracts_1 = __webpack_require__(/*! ./Contracts */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");
var Exports_2 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Speech configuration.
 * @class SpeechConfig
 */
var SpeechConfig = /** @class */ (function () {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    function SpeechConfig() {
    }
    /**
     * Static instance of SpeechConfig returned by passing subscriptionKey and service region.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * @member SpeechConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} The speech factory
     */
    SpeechConfig.fromSubscription = function (subscriptionKey, region) {
        Contracts_1.Contracts.throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        Contracts_1.Contracts.throwIfNullOrWhitespace(region, "region");
        var speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Region, region);
        speechImpl.setProperty(Exports_2.PropertyId.SpeechServiceConnection_IntentRegion, region);
        speechImpl.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        return speechImpl;
    };
    /**
     * Creates an instance of the speech config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or parameters.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * Note: The query parameters specified in the endpoint URL are not changed, even if they are set by any other APIs.
     * For example, if language is defined in the uri as query parameter "language=de-DE", and also set by
     *              SpeechConfig.speechRecognitionLanguage = "en-US", the language setting in uri takes precedence,
     *              and the effective language is "de-DE". Only the parameters that are not specified in the
     *              endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     *       fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     *       use the authorization token.
     * @member SpeechConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key.
     * @returns {SpeechConfig} A speech factory instance.
     */
    SpeechConfig.fromEndpoint = function (endpoint, subscriptionKey) {
        Contracts_1.Contracts.throwIfNull(endpoint, "endpoint");
        Contracts_1.Contracts.throwIfNull(subscriptionKey, "subscriptionKey");
        var speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Endpoint, endpoint.href);
        speechImpl.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        return speechImpl;
    };
    /**
     * Creates an instance of the speech factory with specified initial authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     *       expires, the caller needs to refresh it by calling this setter with a new valid token.
     * Note: Please use a token derived from your LanguageUnderstanding subscription key in case you want
     *       to use the Intent recognizer. As configuration values are copied when creating a new recognizer,
     *       the new token value will not apply to recognizers that have already been created. For recognizers
     *       that have been created before, you need to set authorization token of the corresponding recognizer
     *       to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The initial authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} A speech factory instance.
     */
    SpeechConfig.fromAuthorizationToken = function (authorizationToken, region) {
        Contracts_1.Contracts.throwIfNull(authorizationToken, "authorizationToken");
        Contracts_1.Contracts.throwIfNullOrWhitespace(region, "region");
        var speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Region, region);
        speechImpl.setProperty(Exports_2.PropertyId.SpeechServiceConnection_IntentRegion, region);
        speechImpl.authorizationToken = authorizationToken;
        return speechImpl;
    };
    /**
     * Closes the configuration.
     * @member SpeechConfig.prototype.close
     * @function
     * @public
     */
    /* tslint:disable:no-empty */
    SpeechConfig.prototype.close = function () { };
    return SpeechConfig;
}());
exports.SpeechConfig = SpeechConfig;
/**
 * @private
 * @class SpeechConfigImpl
 */
// tslint:disable-next-line:max-classes-per-file
var SpeechConfigImpl = /** @class */ (function (_super) {
    __extends(SpeechConfigImpl, _super);
    function SpeechConfigImpl() {
        var _this = _super.call(this) || this;
        _this.privProperties = new Exports_2.PropertyCollection();
        _this.speechRecognitionLanguage = "en-US"; // Should we have a default?
        _this.outputFormat = Exports_2.OutputFormat.Simple;
        return _this;
    }
    Object.defineProperty(SpeechConfigImpl.prototype, "properties", {
        get: function () {
            return this.privProperties;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechConfigImpl.prototype, "endPoint", {
        get: function () {
            return new URL(this.privProperties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_Endpoint));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechConfigImpl.prototype, "subscriptionKey", {
        get: function () {
            return this.privProperties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_Key);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechConfigImpl.prototype, "region", {
        get: function () {
            return this.privProperties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_Region);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechConfigImpl.prototype, "authorizationToken", {
        get: function () {
            return this.privProperties.getProperty(Exports_2.PropertyId.SpeechServiceAuthorization_Token);
        },
        set: function (value) {
            this.privProperties.setProperty(Exports_2.PropertyId.SpeechServiceAuthorization_Token, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechConfigImpl.prototype, "speechRecognitionLanguage", {
        get: function () {
            return this.privProperties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage);
        },
        set: function (value) {
            this.privProperties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechConfigImpl.prototype, "outputFormat", {
        get: function () {
            return Exports_2.OutputFormat[this.privProperties.getProperty(Exports_1.OutputFormatPropertyName, undefined)];
        },
        set: function (value) {
            this.privProperties.setProperty(Exports_1.OutputFormatPropertyName, Exports_2.OutputFormat[value]);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechConfigImpl.prototype, "endpointId", {
        get: function () {
            return this.privProperties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_EndpointId);
        },
        set: function (value) {
            this.privProperties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_EndpointId, value);
        },
        enumerable: true,
        configurable: true
    });
    SpeechConfigImpl.prototype.setProperty = function (name, value) {
        Contracts_1.Contracts.throwIfNull(value, "value");
        this.privProperties.setProperty(name, value);
    };
    SpeechConfigImpl.prototype.getProperty = function (name, def) {
        return this.privProperties.getProperty(name, def);
    };
    SpeechConfigImpl.prototype.setProxy = function (proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_ProxyHostName], proxyHostName);
        this.setProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_ProxyPort], proxyPort);
        this.setProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_ProxyUserName], proxyUserName);
        this.setProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_ProxyPassword], proxyPassword);
    };
    SpeechConfigImpl.prototype.clone = function () {
        var ret = new SpeechConfigImpl();
        ret.privProperties = this.privProperties.clone();
        return ret;
    };
    return SpeechConfigImpl;
}(SpeechConfig));
exports.SpeechConfigImpl = SpeechConfigImpl;

//# sourceMappingURL=SpeechConfig.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionCanceledEventArgs.js":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionCanceledEventArgs.js ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Defines content of a RecognitionErrorEvent.
 * @class SpeechRecognitionCanceledEventArgs
 */
var SpeechRecognitionCanceledEventArgs = /** @class */ (function (_super) {
    __extends(SpeechRecognitionCanceledEventArgs, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    function SpeechRecognitionCanceledEventArgs(reason, errorDetails, errorCode, offset, sessionId) {
        var _this = _super.call(this, offset, sessionId) || this;
        _this.privReason = reason;
        _this.privErrorDetails = errorDetails;
        _this.privErrorCode = errorCode;
        return _this;
    }
    Object.defineProperty(SpeechRecognitionCanceledEventArgs.prototype, "reason", {
        /**
         * The reason the recognition was canceled.
         * @member SpeechRecognitionCanceledEventArgs.prototype.reason
         * @function
         * @public
         * @returns {CancellationReason} Specifies the reason canceled.
         */
        get: function () {
            return this.privReason;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechRecognitionCanceledEventArgs.prototype, "errorCode", {
        /**
         * The error code in case of an unsuccessful recognition.
         * Added in version 1.1.0.
         * @return An error code that represents the error reason.
         */
        get: function () {
            return this.privErrorCode;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechRecognitionCanceledEventArgs.prototype, "errorDetails", {
        /**
         * In case of an unsuccessful recognition, provides details of the occurred error.
         * @member SpeechRecognitionCanceledEventArgs.prototype.errorDetails
         * @function
         * @public
         * @returns {string} A String that represents the error details.
         */
        get: function () {
            return this.privErrorDetails;
        },
        enumerable: true,
        configurable: true
    });
    return SpeechRecognitionCanceledEventArgs;
}(Exports_1.RecognitionEventArgs));
exports.SpeechRecognitionCanceledEventArgs = SpeechRecognitionCanceledEventArgs;

//# sourceMappingURL=SpeechRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionEventArgs.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionEventArgs.js ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Defines contents of speech recognizing/recognized event.
 * @class SpeechRecognitionEventArgs
 */
var SpeechRecognitionEventArgs = /** @class */ (function (_super) {
    __extends(SpeechRecognitionEventArgs, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechRecognitionResult} result - The speech recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    function SpeechRecognitionEventArgs(result, offset, sessionId) {
        var _this = _super.call(this, offset, sessionId) || this;
        _this.privResult = result;
        return _this;
    }
    Object.defineProperty(SpeechRecognitionEventArgs.prototype, "result", {
        /**
         * Specifies the recognition result.
         * @member SpeechRecognitionEventArgs.prototype.result
         * @function
         * @public
         * @returns {SpeechRecognitionResult} the recognition result.
         */
        get: function () {
            return this.privResult;
        },
        enumerable: true,
        configurable: true
    });
    return SpeechRecognitionEventArgs;
}(Exports_1.RecognitionEventArgs));
exports.SpeechRecognitionEventArgs = SpeechRecognitionEventArgs;

//# sourceMappingURL=SpeechRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionResult.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionResult.js ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Defines result of speech recognition.
 * @class SpeechRecognitionResult
 */
var SpeechRecognitionResult = /** @class */ (function (_super) {
    __extends(SpeechRecognitionResult, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @public
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    function SpeechRecognitionResult(resultId, reason, text, duration, offset, errorDetails, json, properties) {
        return _super.call(this, resultId, reason, text, duration, offset, errorDetails, json, properties) || this;
    }
    return SpeechRecognitionResult;
}(Exports_1.RecognitionResult));
exports.SpeechRecognitionResult = SpeechRecognitionResult;

//# sourceMappingURL=SpeechRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognizer.js":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognizer.js ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var SpeechConnectionFactory_1 = __webpack_require__(/*! ../common.speech/SpeechConnectionFactory */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionFactory.js");
var Contracts_1 = __webpack_require__(/*! ./Contracts */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");
var Exports_2 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Performs speech recognition from microphone, file, or other audio input streams, and gets transcribed text as result.
 * @class SpeechRecognizer
 */
var SpeechRecognizer = /** @class */ (function (_super) {
    __extends(SpeechRecognizer, _super);
    /**
     * SpeechRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */
    function SpeechRecognizer(speechConfig, audioConfig) {
        var _this = this;
        var speechConfigImpl = speechConfig;
        Contracts_1.Contracts.throwIfNull(speechConfigImpl, "speechConfig");
        Contracts_1.Contracts.throwIfNullOrWhitespace(speechConfigImpl.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage), Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage]);
        _this = _super.call(this, audioConfig, speechConfigImpl.properties, new SpeechConnectionFactory_1.SpeechConnectionFactory()) || this;
        _this.privDisposedSpeechRecognizer = false;
        return _this;
    }
    Object.defineProperty(SpeechRecognizer.prototype, "endpointId", {
        /**
         * Gets the endpoint id of a customized speech model that is used for speech recognition.
         * @member SpeechRecognizer.prototype.endpointId
         * @function
         * @public
         * @returns {string} the endpoint id of a customized speech model that is used for speech recognition.
         */
        get: function () {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer);
            return this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_EndpointId, "00000000-0000-0000-0000-000000000000");
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechRecognizer.prototype, "authorizationToken", {
        /**
         * Gets the authorization token used to communicate with the service.
         * @member SpeechRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */
        get: function () {
            return this.properties.getProperty(Exports_2.PropertyId.SpeechServiceAuthorization_Token);
        },
        /**
         * Gets/Sets the authorization token used to communicate with the service.
         * @member SpeechRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @param {string} token - Authorization token.
         */
        set: function (token) {
            Contracts_1.Contracts.throwIfNullOrWhitespace(token, "token");
            this.properties.setProperty(Exports_2.PropertyId.SpeechServiceAuthorization_Token, token);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechRecognizer.prototype, "speechRecognitionLanguage", {
        /**
         * Gets the spoken language of recognition.
         * @member SpeechRecognizer.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @returns {string} The spoken language of recognition.
         */
        get: function () {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer);
            return this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechRecognizer.prototype, "outputFormat", {
        /**
         * Gets the output format of recognition.
         * @member SpeechRecognizer.prototype.outputFormat
         * @function
         * @public
         * @returns {OutputFormat} The output format of recognition.
         */
        get: function () {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer);
            if (this.properties.getProperty(Exports_1.OutputFormatPropertyName, Exports_2.OutputFormat[Exports_2.OutputFormat.Simple]) === Exports_2.OutputFormat[Exports_2.OutputFormat.Simple]) {
                return Exports_2.OutputFormat.Simple;
            }
            else {
                return Exports_2.OutputFormat.Detailed;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechRecognizer.prototype, "properties", {
        /**
         * The collection of properties and their values defined for this SpeechRecognizer.
         * @member SpeechRecognizer.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechRecognizer.
         */
        get: function () {
            return this.privProperties;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Starts speech recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     *       so it is suitable only for single shot recognition
     *       like command or query. For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member SpeechRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the SpeechRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */
    SpeechRecognizer.prototype.recognizeOnceAsync = function (cb, err) {
        var _this = this;
        try {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer);
            this.implRecognizerStop();
            this.implRecognizerStart(Exports_1.RecognitionMode.Interactive, function (e) {
                _this.implRecognizerStop();
                if (!!cb) {
                    cb(e);
                }
            }, function (e) {
                _this.implRecognizerStop();
                if (!!err) {
                    err(e);
                }
            });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    var typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    };
    /**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member SpeechRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    SpeechRecognizer.prototype.startContinuousRecognitionAsync = function (cb, err) {
        try {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer);
            this.implRecognizerStop();
            this.implRecognizerStart(Exports_1.RecognitionMode.Conversation, undefined, undefined);
            // report result to promise.
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
                cb = undefined;
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    var typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    };
    /**
     * Stops continuous speech recognition.
     * @member SpeechRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    SpeechRecognizer.prototype.stopContinuousRecognitionAsync = function (cb, err) {
        try {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer);
            this.implRecognizerStop();
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    var typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    };
    /**
     * Starts speech recognition with keyword spotting, until
     * stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the
     *      Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model The keyword recognition model that
     *        specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    SpeechRecognizer.prototype.startKeywordRecognitionAsync = function (model, cb, err) {
        Contracts_1.Contracts.throwIfNull(model, "model");
        if (!!err) {
            err("Not yet implemented.");
        }
    };
    /**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the
     *       Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    SpeechRecognizer.prototype.stopKeywordRecognitionAsync = function (cb, err) {
        if (!!cb) {
            cb();
        }
    };
    /**
     * closes all external resources held by an instance of this class.
     * @member SpeechRecognizer.prototype.close
     * @function
     * @public
     */
    SpeechRecognizer.prototype.close = function () {
        Contracts_1.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer);
        this.dispose(true);
    };
    /**
     * Disposes any resources held by the object.
     * @member SpeechRecognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */
    SpeechRecognizer.prototype.dispose = function (disposing) {
        if (this.privDisposedSpeechRecognizer) {
            return;
        }
        if (disposing) {
            this.implRecognizerStop();
            this.privDisposedSpeechRecognizer = true;
        }
        _super.prototype.dispose.call(this, disposing);
    };
    SpeechRecognizer.prototype.createRecognizerConfig = function (speechConfig) {
        return new Exports_1.RecognizerConfig(speechConfig, this.properties);
    };
    SpeechRecognizer.prototype.createServiceRecognizer = function (authentication, connectionFactory, audioConfig, recognizerConfig) {
        var configImpl = audioConfig;
        return new Exports_1.SpeechServiceRecognizer(authentication, connectionFactory, configImpl, recognizerConfig, this);
    };
    return SpeechRecognizer;
}(Exports_2.Recognizer));
exports.SpeechRecognizer = SpeechRecognizer;

//# sourceMappingURL=SpeechRecognizer.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechTranslationConfig.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechTranslationConfig.js ***!
  \*******************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Contracts_1 = __webpack_require__(/*! ./Contracts */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");
var Exports_2 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Speech translation configuration.
 * @class SpeechTranslationConfig
 */
var SpeechTranslationConfig = /** @class */ (function (_super) {
    __extends(SpeechTranslationConfig, _super);
    /**
     * Creates an instance of recognizer config.
     */
    function SpeechTranslationConfig() {
        return _super.call(this) || this;
    }
    /**
     * Static instance of SpeechTranslationConfig returned by passing a subscription key and service region.
     * @member SpeechTranslationConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */
    SpeechTranslationConfig.fromSubscription = function (subscriptionKey, region) {
        Contracts_1.Contracts.throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        Contracts_1.Contracts.throwIfNullOrWhitespace(region, "region");
        var ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        ret.properties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Region, region);
        return ret;
    };
    /**
     * Static instance of SpeechTranslationConfig returned by passing authorization token and service region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     *       expires, the caller needs to refresh it by setting the property authorizationToken with a new
     *       valid token. Otherwise, all the recognizers created by this SpeechTranslationConfig instance
     *       will encounter errors during recognition.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply
     * to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechTranslationConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */
    SpeechTranslationConfig.fromAuthorizationToken = function (authorizationToken, region) {
        Contracts_1.Contracts.throwIfNullOrWhitespace(authorizationToken, "authorizationToken");
        Contracts_1.Contracts.throwIfNullOrWhitespace(region, "region");
        var ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(Exports_2.PropertyId.SpeechServiceAuthorization_Token, authorizationToken);
        ret.properties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Region, region);
        return ret;
    };
    /**
     * Creates an instance of the speech translation config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or paramters.
     * Note: The query properties specified in the endpoint URL are not changed, even if they are
     *       set by any other APIs. For example, if language is defined in the uri as query parameter
     *       "language=de-DE", and also set by the speechRecognitionLanguage property, the language
     *       setting in uri takes precedence, and the effective language is "de-DE".
     * Only the properties that are not specified in the endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     *       fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     *       use the authorization token.
     * @member SpeechTranslationConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key.
     * @returns {SpeechTranslationConfig} A speech config instance.
     */
    SpeechTranslationConfig.fromEndpoint = function (endpoint, subscriptionKey) {
        Contracts_1.Contracts.throwIfNull(endpoint, "endpoint");
        Contracts_1.Contracts.throwIfNull(subscriptionKey, "subscriptionKey");
        var ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Endpoint, endpoint.href);
        ret.properties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        return ret;
    };
    return SpeechTranslationConfig;
}(Exports_2.SpeechConfig));
exports.SpeechTranslationConfig = SpeechTranslationConfig;
/**
 * @private
 * @class SpeechTranslationConfigImpl
 */
// tslint:disable-next-line:max-classes-per-file
var SpeechTranslationConfigImpl = /** @class */ (function (_super) {
    __extends(SpeechTranslationConfigImpl, _super);
    function SpeechTranslationConfigImpl() {
        var _this = _super.call(this) || this;
        _this.privSpeechProperties = new Exports_2.PropertyCollection();
        _this.outputFormat = Exports_2.OutputFormat.Simple;
        return _this;
    }
    Object.defineProperty(SpeechTranslationConfigImpl.prototype, "authorizationToken", {
        /**
         * Gets/Sets the authorization token.
         * If this is set, subscription key is ignored.
         * User needs to make sure the provided authorization token is valid and not expired.
         * @member SpeechTranslationConfigImpl.prototype.authorizationToken
         * @function
         * @public
         * @param {string} value - The authorization token.
         */
        set: function (value) {
            Contracts_1.Contracts.throwIfNullOrWhitespace(value, "value");
            this.privSpeechProperties.setProperty(Exports_2.PropertyId.SpeechServiceAuthorization_Token, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechTranslationConfigImpl.prototype, "speechRecognitionLanguage", {
        /**
         * Gets/Sets the speech recognition language.
         * @member SpeechTranslationConfigImpl.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @param {string} value - The authorization token.
         */
        set: function (value) {
            Contracts_1.Contracts.throwIfNullOrWhitespace(value, "value");
            this.privSpeechProperties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechTranslationConfigImpl.prototype, "subscriptionKey", {
        /**
         * @member SpeechTranslationConfigImpl.prototype.subscriptionKey
         * @function
         * @public
         */
        get: function () {
            return this.privSpeechProperties.getProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_Key]);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechTranslationConfigImpl.prototype, "outputFormat", {
        /**
         * Gets the output format
         * @member SpeechTranslationConfigImpl.prototype.outputFormat
         * @function
         * @public
         */
        get: function () {
            return Exports_2.OutputFormat[this.privSpeechProperties.getProperty(Exports_1.OutputFormatPropertyName, undefined)];
        },
        /**
         * Gets/Sets the output format
         * @member SpeechTranslationConfigImpl.prototype.outputFormat
         * @function
         * @public
         */
        set: function (value) {
            this.privSpeechProperties.setProperty(Exports_1.OutputFormatPropertyName, Exports_2.OutputFormat[value]);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechTranslationConfigImpl.prototype, "endpointId", {
        /**
         * Gets the endpoint id.
         * @member SpeechTranslationConfigImpl.prototype.endpointId
         * @function
         * @public
         */
        get: function () {
            return this.privSpeechProperties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_EndpointId);
        },
        /**
         * Gets/Sets the endpoint id.
         * @member SpeechTranslationConfigImpl.prototype.endpointId
         * @function
         * @public
         */
        set: function (value) {
            this.privSpeechProperties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_Endpoint, value);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Add a (text) target language to translate into.
     * @member SpeechTranslationConfigImpl.prototype.addTargetLanguage
     * @function
     * @public
     * @param {string} value - The language such as de-DE
     */
    SpeechTranslationConfigImpl.prototype.addTargetLanguage = function (value) {
        Contracts_1.Contracts.throwIfNullOrWhitespace(value, "value");
        var languages = this.targetLanguages;
        languages.push(value);
        this.privSpeechProperties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationToLanguages, languages.join(","));
    };
    Object.defineProperty(SpeechTranslationConfigImpl.prototype, "targetLanguages", {
        /**
         * Gets the (text) target language to translate into.
         * @member SpeechTranslationConfigImpl.prototype.targetLanguages
         * @function
         * @public
         * @param {string} value - The language such as de-DE
         */
        get: function () {
            if (this.privSpeechProperties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationToLanguages, undefined) !== undefined) {
                return this.privSpeechProperties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",");
            }
            else {
                return [];
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechTranslationConfigImpl.prototype, "voiceName", {
        /**
         * Gets the voice name.
         * @member SpeechTranslationConfigImpl.prototype.voiceName
         * @function
         * @public
         */
        get: function () {
            return this.getProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_TranslationVoice]);
        },
        /**
         * Gets/Sets the voice of the translated language, enable voice synthesis output.
         * @member SpeechTranslationConfigImpl.prototype.voiceName
         * @function
         * @public
         * @param {string} value - The name of the voice.
         */
        set: function (value) {
            Contracts_1.Contracts.throwIfNullOrWhitespace(value, "value");
            this.privSpeechProperties.setProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationVoice, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SpeechTranslationConfigImpl.prototype, "region", {
        /**
         * Provides the region.
         * @member SpeechTranslationConfigImpl.prototype.region
         * @function
         * @public
         * @returns {string} The region.
         */
        get: function () {
            return this.privSpeechProperties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_Region);
        },
        enumerable: true,
        configurable: true
    });
    SpeechTranslationConfigImpl.prototype.setProxy = function (proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_ProxyHostName], proxyHostName);
        this.setProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_ProxyPort], proxyPort);
        this.setProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_ProxyUserName], proxyUserName);
        this.setProperty(Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_ProxyPassword], proxyPassword);
    };
    /**
     * Gets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {string} name - The name of the property.
     * @param {string} def - The default value of the property in case it is not set.
     * @returns {string} The value of the property.
     */
    SpeechTranslationConfigImpl.prototype.getProperty = function (name, def) {
        return this.privSpeechProperties.getProperty(name, def);
    };
    /**
     * Gets/Sets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {string} name - The name of the property.
     * @param {string} value - The value of the property.
     */
    SpeechTranslationConfigImpl.prototype.setProperty = function (name, value) {
        this.privSpeechProperties.setProperty(name, value);
    };
    Object.defineProperty(SpeechTranslationConfigImpl.prototype, "properties", {
        /**
         * Provides access to custom properties.
         * @member SpeechTranslationConfigImpl.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The properties.
         */
        get: function () {
            return this.privSpeechProperties;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Dispose of associated resources.
     * @member SpeechTranslationConfigImpl.prototype.close
     * @function
     * @public
     */
    SpeechTranslationConfigImpl.prototype.close = function () {
        return;
    };
    return SpeechTranslationConfigImpl;
}(SpeechTranslationConfig));
exports.SpeechTranslationConfigImpl = SpeechTranslationConfigImpl;

//# sourceMappingURL=SpeechTranslationConfig.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionCanceledEventArgs.js":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionCanceledEventArgs.js ***!
  \***********************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Define payload of speech recognition canceled result events.
 * @class TranslationRecognitionCanceledEventArgs
 */
var TranslationRecognitionCanceledEventArgs = /** @class */ (function () {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionid - The session id.
     * @param {CancellationReason} cancellationReason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {TranslationRecognitionResult} result - The result.
     */
    function TranslationRecognitionCanceledEventArgs(sessionid, cancellationReason, errorDetails, errorCode, result) {
        this.privCancelReason = cancellationReason;
        this.privErrorDetails = errorDetails;
        this.privResult = result;
        this.privSessionId = sessionid;
        this.privErrorCode = errorCode;
    }
    Object.defineProperty(TranslationRecognitionCanceledEventArgs.prototype, "result", {
        /**
         * Specifies the recognition result.
         * @member TranslationRecognitionCanceledEventArgs.prototype.result
         * @function
         * @public
         * @returns {TranslationRecognitionResult} the recognition result.
         */
        get: function () {
            return this.privResult;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationRecognitionCanceledEventArgs.prototype, "sessionId", {
        /**
         * Specifies the session identifier.
         * @member TranslationRecognitionCanceledEventArgs.prototype.sessionId
         * @function
         * @public
         * @returns {string} the session identifier.
         */
        get: function () {
            return this.privSessionId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationRecognitionCanceledEventArgs.prototype, "reason", {
        /**
         * The reason the recognition was canceled.
         * @member TranslationRecognitionCanceledEventArgs.prototype.reason
         * @function
         * @public
         * @returns {CancellationReason} Specifies the reason canceled.
         */
        get: function () {
            return this.privCancelReason;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationRecognitionCanceledEventArgs.prototype, "errorCode", {
        /**
         * The error code in case of an unsuccessful recognition.
         * Added in version 1.1.0.
         * @return An error code that represents the error reason.
         */
        get: function () {
            return this.privErrorCode;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationRecognitionCanceledEventArgs.prototype, "errorDetails", {
        /**
         * In case of an unsuccessful recognition, provides details of the occurred error.
         * @member TranslationRecognitionCanceledEventArgs.prototype.errorDetails
         * @function
         * @public
         * @returns {string} A String that represents the error details.
         */
        get: function () {
            return this.privErrorDetails;
        },
        enumerable: true,
        configurable: true
    });
    return TranslationRecognitionCanceledEventArgs;
}());
exports.TranslationRecognitionCanceledEventArgs = TranslationRecognitionCanceledEventArgs;

//# sourceMappingURL=TranslationRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionEventArgs.js":
/*!***************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionEventArgs.js ***!
  \***************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Translation text result event arguments.
 * @class TranslationRecognitionEventArgs
 */
var TranslationRecognitionEventArgs = /** @class */ (function (_super) {
    __extends(TranslationRecognitionEventArgs, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationRecognitionResult} result - The translation recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    function TranslationRecognitionEventArgs(result, offset, sessionId) {
        var _this = _super.call(this, offset, sessionId) || this;
        _this.privResult = result;
        return _this;
    }
    Object.defineProperty(TranslationRecognitionEventArgs.prototype, "result", {
        /**
         * Specifies the recognition result.
         * @member TranslationRecognitionEventArgs.prototype.result
         * @function
         * @public
         * @returns {TranslationRecognitionResult} the recognition result.
         */
        get: function () {
            return this.privResult;
        },
        enumerable: true,
        configurable: true
    });
    return TranslationRecognitionEventArgs;
}(Exports_1.RecognitionEventArgs));
exports.TranslationRecognitionEventArgs = TranslationRecognitionEventArgs;

//# sourceMappingURL=TranslationRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionResult.js":
/*!************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionResult.js ***!
  \************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Translation text result.
 * @class TranslationRecognitionResult
 */
var TranslationRecognitionResult = /** @class */ (function (_super) {
    __extends(TranslationRecognitionResult, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {Translations} translations - The translations.
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    function TranslationRecognitionResult(translations, resultId, reason, text, duration, offset, errorDetails, json, properties) {
        var _this = _super.call(this, resultId, reason, text, duration, offset, errorDetails, json, properties) || this;
        _this.privTranslations = translations;
        return _this;
    }
    Object.defineProperty(TranslationRecognitionResult.prototype, "translations", {
        /**
         * Presents the translation results. Each item in the dictionary represents
         * a translation result in one of target languages, where the key is the name
         * of the target language, in BCP-47 format, and the value is the translation
         * text in the specified language.
         * @member TranslationRecognitionResult.prototype.translations
         * @function
         * @public
         * @returns {Translations} the current translation map that holds all translations requested.
         */
        get: function () {
            return this.privTranslations;
        },
        enumerable: true,
        configurable: true
    });
    return TranslationRecognitionResult;
}(Exports_1.SpeechRecognitionResult));
exports.TranslationRecognitionResult = TranslationRecognitionResult;

//# sourceMappingURL=TranslationRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognizer.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognizer.js ***!
  \*****************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");
var Contracts_1 = __webpack_require__(/*! ./Contracts */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");
var Exports_2 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Translation recognizer
 * @class TranslationRecognizer
 */
var TranslationRecognizer = /** @class */ (function (_super) {
    __extends(TranslationRecognizer, _super);
    /**
     * Initializes an instance of the TranslationRecognizer.
     * @constructor
     * @param {SpeechTranslationConfig} speechConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     */
    function TranslationRecognizer(speechConfig, audioConfig) {
        var _this = this;
        var configImpl = speechConfig;
        Contracts_1.Contracts.throwIfNull(configImpl, "speechConfig");
        _this = _super.call(this, audioConfig, configImpl.properties, new Exports_1.TranslationConnectionFactory()) || this;
        _this.privDisposedTranslationRecognizer = false;
        _this.privProperties = configImpl.properties.clone();
        if (_this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationVoice, undefined) !== undefined) {
            Contracts_1.Contracts.throwIfNullOrWhitespace(_this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationVoice), Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_TranslationVoice]);
        }
        Contracts_1.Contracts.throwIfNullOrWhitespace(_this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationToLanguages), Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_TranslationToLanguages]);
        Contracts_1.Contracts.throwIfNullOrWhitespace(_this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage), Exports_2.PropertyId[Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage]);
        return _this;
    }
    Object.defineProperty(TranslationRecognizer.prototype, "speechRecognitionLanguage", {
        /**
         * Gets the language name that was set when the recognizer was created.
         * @member TranslationRecognizer.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @returns {string} Gets the language name that was set when the recognizer was created.
         */
        get: function () {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
            return this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_RecoLanguage);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationRecognizer.prototype, "targetLanguages", {
        /**
         * Gets target languages for translation that were set when the recognizer was created.
         * The language is specified in BCP-47 format. The translation will provide translated text for each of language.
         * @member TranslationRecognizer.prototype.targetLanguages
         * @function
         * @public
         * @returns {string[]} Gets target languages for translation that were set when the recognizer was created.
         */
        get: function () {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
            return this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",");
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationRecognizer.prototype, "voiceName", {
        /**
         * Gets the name of output voice.
         * @member TranslationRecognizer.prototype.voiceName
         * @function
         * @public
         * @returns {string} the name of output voice.
         */
        get: function () {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
            return this.properties.getProperty(Exports_2.PropertyId.SpeechServiceConnection_TranslationVoice, undefined);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationRecognizer.prototype, "authorizationToken", {
        /**
         * Gets the authorization token used to communicate with the service.
         * @member TranslationRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */
        get: function () {
            return this.properties.getProperty(Exports_2.PropertyId.SpeechServiceAuthorization_Token);
        },
        /**
         * Gets/Sets the authorization token used to communicate with the service.
         * @member TranslationRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @param {string} value - Authorization token.
         */
        set: function (value) {
            this.properties.setProperty(Exports_2.PropertyId.SpeechServiceAuthorization_Token, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationRecognizer.prototype, "properties", {
        /**
         * The collection of properties and their values defined for this TranslationRecognizer.
         * @member TranslationRecognizer.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their values defined for this TranslationRecognizer.
         */
        get: function () {
            return this.privProperties;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Starts recognition and translation, and stops after the first utterance is recognized.
     * The task returns the translation text as result.
     * Note: recognizeOnceAsync returns when the first utterance has been recognized, so it is suitableonly
     *       for single shot recognition like command or query. For long-running recognition,
     *       use startContinuousRecognitionAsync() instead.
     * @member TranslationRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the translation has completed.
     * @param err - Callback invoked in case of an error.
     */
    TranslationRecognizer.prototype.recognizeOnceAsync = function (cb, err) {
        var _this = this;
        try {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
            this.implRecognizerStop();
            this.implRecognizerStart(Exports_1.RecognitionMode.Conversation, function (e) {
                _this.implRecognizerStop();
                if (!!cb) {
                    cb(e);
                }
            }, function (e) {
                _this.implRecognizerStop();
                if (!!err) {
                    err(e);
                }
            });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    var typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    };
    /**
     * Starts recognition and translation, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive translation results.
     * @member TranslationRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has started.
     * @param err - Callback invoked in case of an error.
     */
    TranslationRecognizer.prototype.startContinuousRecognitionAsync = function (cb, err) {
        try {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
            this.implRecognizerStop();
            this.implRecognizerStart(Exports_1.RecognitionMode.Conversation, undefined, undefined);
            // report result to promise.
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
                cb = undefined;
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    var typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    };
    /**
     * Stops continuous recognition and translation.
     * @member TranslationRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has stopped.
     * @param err - Callback invoked in case of an error.
     */
    TranslationRecognizer.prototype.stopContinuousRecognitionAsync = function (cb, err) {
        try {
            Contracts_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
            this.implRecognizerStop();
            if (!!cb) {
                try {
                    cb();
                }
                catch (e) {
                    if (!!err) {
                        err(e);
                    }
                }
            }
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    var typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true);
        }
    };
    /**
     * closes all external resources held by an instance of this class.
     * @member TranslationRecognizer.prototype.close
     * @function
     * @public
     */
    TranslationRecognizer.prototype.close = function () {
        Contracts_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
        this.dispose(true);
    };
    TranslationRecognizer.prototype.dispose = function (disposing) {
        if (this.privDisposedTranslationRecognizer) {
            return;
        }
        if (disposing) {
            this.implRecognizerStop();
            this.privDisposedTranslationRecognizer = true;
            _super.prototype.dispose.call(this, disposing);
        }
    };
    TranslationRecognizer.prototype.createRecognizerConfig = function (speechConfig) {
        return new Exports_1.RecognizerConfig(speechConfig, this.properties);
    };
    TranslationRecognizer.prototype.createServiceRecognizer = function (authentication, connectionFactory, audioConfig, recognizerConfig) {
        var configImpl = audioConfig;
        return new Exports_1.TranslationServiceRecognizer(authentication, connectionFactory, configImpl, recognizerConfig, this);
    };
    return TranslationRecognizer;
}(Exports_2.Recognizer));
exports.TranslationRecognizer = TranslationRecognizer;

//# sourceMappingURL=TranslationRecognizer.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationSynthesisEventArgs.js":
/*!*************************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationSynthesisEventArgs.js ***!
  \*************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Translation Synthesis event arguments
 * @class TranslationSynthesisEventArgs
 */
var TranslationSynthesisEventArgs = /** @class */ (function (_super) {
    __extends(TranslationSynthesisEventArgs, _super);
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationSynthesisResult} result - The translation synthesis result.
     * @param {string} sessionId - The session id.
     */
    function TranslationSynthesisEventArgs(result, sessionId) {
        var _this = _super.call(this, sessionId) || this;
        _this.privResult = result;
        return _this;
    }
    Object.defineProperty(TranslationSynthesisEventArgs.prototype, "result", {
        /**
         * Specifies the translation synthesis result.
         * @member TranslationSynthesisEventArgs.prototype.result
         * @function
         * @public
         * @returns {TranslationSynthesisResult} Specifies the translation synthesis result.
         */
        get: function () {
            return this.privResult;
        },
        enumerable: true,
        configurable: true
    });
    return TranslationSynthesisEventArgs;
}(Exports_1.SessionEventArgs));
exports.TranslationSynthesisEventArgs = TranslationSynthesisEventArgs;

//# sourceMappingURL=TranslationSynthesisEventArgs.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationSynthesisResult.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationSynthesisResult.js ***!
  \**********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Defines translation synthesis result, i.e. the voice output of the translated
 * text in the target language.
 * @class TranslationSynthesisResult
 */
var TranslationSynthesisResult = /** @class */ (function () {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ResultReason} reason - The synthesis reason.
     * @param {ArrayBuffer} audio - The audio data.
     */
    function TranslationSynthesisResult(reason, audio) {
        this.privReason = reason;
        this.privAudio = audio;
    }
    Object.defineProperty(TranslationSynthesisResult.prototype, "audio", {
        /**
         * Translated text in the target language.
         * @member TranslationSynthesisResult.prototype.audio
         * @function
         * @public
         * @returns {ArrayBuffer} Translated audio in the target language.
         */
        get: function () {
            return this.privAudio;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslationSynthesisResult.prototype, "reason", {
        /**
         * The synthesis status.
         * @member TranslationSynthesisResult.prototype.reason
         * @function
         * @public
         * @returns {ResultReason} The synthesis status.
         */
        get: function () {
            return this.privReason;
        },
        enumerable: true,
        configurable: true
    });
    return TranslationSynthesisResult;
}());
exports.TranslationSynthesisResult = TranslationSynthesisResult;

//# sourceMappingURL=TranslationSynthesisResult.js.map


/***/ }),

/***/ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Translations.js":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Translations.js ***!
  \********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
var Exports_1 = __webpack_require__(/*! ./Exports */ "./node_modules/web-speech-cognitive-services/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");
/**
 * Represents collection of parameters and their values.
 * @class Translation
 */
var Translations = /** @class */ (function () {
    function Translations() {
        // Use an PropertyCollection internally, just wrapping it to hide the | enum syntax it has.
        this.privMap = new Exports_1.PropertyCollection();
    }
    /**
     * Returns the parameter value in type String. The parameter must have the same type as String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member Translation.prototype.get
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} def - The default value which is returned if the parameter is not available in the collection.
     * @returns {string} value of the parameter.
     */
    Translations.prototype.get = function (key, def) {
        return this.privMap.getProperty(key, def);
    };
    /**
     * Sets the String value of the parameter specified by name.
     * @member Translation.prototype.set
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */
    Translations.prototype.set = function (key, value) {
        this.privMap.setProperty(key, value);
    };
    return Translations;
}());
exports.Translations = Translations;

//# sourceMappingURL=Translations.js.map


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ 0:
/*!***********************************!*\
  !*** https-proxy-agent (ignored) ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 1:
/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 2:
/*!******************************************!*\
  !*** ../../external/ocsp/ocsp (ignored) ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 3:
/*!***********************************!*\
  !*** https-proxy-agent (ignored) ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 4:
/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 5:
/*!******************************************!*\
  !*** ../../external/ocsp/ocsp (ignored) ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9saWIvRGlyZWN0TGluZVNwZWVjaC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbGliL1NwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9saWIvY29nbml0aXZlU2VydmljZXNQcm9taXNlVG9FU1Byb21pc2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL2xpYi9jcmVhdGVBZGFwdGVycy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbGliL2NyZWF0ZUVycm9yRXZlbnQuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL2xpYi9jcmVhdGVUYXNrUXVldWUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL2xpYi9jcmVhdGVXZWJTcGVlY2hQb255ZmlsbEZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL2xpYi9leHRlcm5hbC9ldmVudC10YXJnZXQtc2hpbS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbGliL2luZGV4LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9saWIvcGF0Y2hEaWFsb2dTZXJ2aWNlQ29ubmVjdG9ySW5saW5lLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9saWIvcGxheUNvZ25pdGl2ZVNlcnZpY2VzU3RyZWFtLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9saWIvcGxheVdoaXRlTm9pc2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL2xpYi9yZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9saWIvc2hhcmVPYnNlcnZhYmxlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVXaWxkY2FyZC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaXRlcmFibGVUb0FycmF5LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9ub25JdGVyYWJsZVNwcmVhZC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3NldFByb3RvdHlwZU9mLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90b0NvbnN1bWFibGVBcnJheS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9hYm9ydC1jb250cm9sbGVyL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9iYXNlNjQtYXJyYXlidWZmZXIvbGliL2Jhc2U2NC1hcnJheWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2Jhc2U2NC1qcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2J1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvZmVhdHVyZXMvb2JzZXJ2YWJsZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2EtZnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hLXBvc3NpYmxlLXByb3RvdHlwZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FkZC10by11bnNjb3BhYmxlcy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FuLWluc3RhbmNlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYW4tb2JqZWN0LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktaW5jbHVkZXMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9iaW5kLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jYWxsLXdpdGgtc2FmZS1pdGVyYXRpb24tY2xvc2luZy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NsYXNzb2YtcmF3LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvY2xhc3NvZi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NvcHktY29uc3RydWN0b3ItcHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NvcnJlY3QtcHJvdG90eXBlLWdldHRlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NyZWF0ZS1pdGVyYXRvci1jb25zdHJ1Y3Rvci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NyZWF0ZS1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZGVmaW5lLWl0ZXJhdG9yLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZGVmaW5lLXdlbGwta25vd24tc3ltYm9sLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZGVzY3JpcHRvcnMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9kb2N1bWVudC1jcmVhdGUtZWxlbWVudC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2RvbS1pdGVyYWJsZXMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9lbnVtLWJ1Zy1rZXlzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZXhwb3J0LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZmFpbHMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9mdW5jdGlvbi10by1zdHJpbmcuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9nZXQtYnVpbHQtaW4uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9nZXQtaXRlcmF0b3ItbWV0aG9kLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZ2V0LWl0ZXJhdG9yLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZ2xvYmFsLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaGFzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaGlkZGVuLWtleXMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9oaWRlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaG9zdC1yZXBvcnQtZXJyb3JzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaHRtbC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2llOC1kb20tZGVmaW5lLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaW5kZXhlZC1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLWFycmF5LWl0ZXJhdG9yLW1ldGhvZC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLWZvcmNlZC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLW9iamVjdC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLXB1cmUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pdGVyYXRlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaXRlcmF0b3JzLWNvcmUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pdGVyYXRvcnMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9uYXRpdmUtc3ltYm9sLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvbmF0aXZlLXdlYWstbWFwLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWNyZWF0ZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktbmFtZXMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1zeW1ib2xzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWdldC1wcm90b3R5cGUtb2YuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3Qta2V5cy1pbnRlcm5hbC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1rZXlzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LXByb3BlcnR5LWlzLWVudW1lcmFibGUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3Qtc2V0LXByb3RvdHlwZS1vZi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC10by1zdHJpbmcuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vd24ta2V5cy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3BhdGguanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9yZWRlZmluZS1hbGwuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9yZWRlZmluZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3JlcXVpcmUtb2JqZWN0LWNvZXJjaWJsZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NldC1nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9zZXQtc3BlY2llcy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NldC10by1zdHJpbmctdGFnLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc2hhcmVkLWtleS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NoYXJlZC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3N0cmluZy1tdWx0aWJ5dGUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy90by1hYnNvbHV0ZS1pbmRleC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8taW50ZWdlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLWxlbmd0aC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLW9iamVjdC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLXByaW1pdGl2ZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3VpZC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvd3JhcHBlZC13ZWxsLWtub3duLXN5bWJvbC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lc25leHQub2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lc25leHQuc3ltYm9sLm9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2V2ZW50LWFzLXByb21pc2UvbGliL2V4dGVybmFsL3AtZGVmZXIuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9ldmVudC1hcy1wcm9taXNlL2xpYi9pbmRleC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL2llZWU3NTQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWF0aC1yYW5kb20vYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L21pY3Jvc29mdC5jb2duaXRpdmVzZXJ2aWNlcy5zcGVlY2guc2RrLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5icm93c2VyL0NvbnNvbGVMb2dnaW5nTGlzdGVuZXIuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvRXhwb3J0cy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9GaWxlQXVkaW9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvTWljQXVkaW9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvUENNUmVjb3JkZXIuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvUHJveHlJbmZvLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5icm93c2VyL1JlcGxheWFibGVBdWRpb05vZGUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvV2Vic29ja2V0Q29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9XZWJzb2NrZXRNZXNzYWdlQWRhcHRlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0FkZGVkTG1JbnRlbnQuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9BZ2VudENvbmZpZy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0NvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0Nvbm5lY3Rpb25GYWN0b3J5QmFzZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0RpYWxvZ0Nvbm5lY3RvckZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9EaWFsb2dTZXJ2aWNlQWRhcHRlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0RpYWxvZ1NlcnZpY2VUdXJuU3RhdGUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9EaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0R5bmFtaWNHcmFtbWFyQnVpbGRlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0VudW1UcmFuc2xhdGlvbi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0V4cG9ydHMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9JQXV0aGVudGljYXRpb24uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9JbnRlbnRDb25uZWN0aW9uRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0ludGVudFNlcnZpY2VSZWNvZ25pemVyLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvUXVlcnlQYXJhbWV0ZXJOYW1lcy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1JlY29nbml0aW9uRXZlbnRzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvUmVjb2duaXplckNvbmZpZy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1JlcXVlc3RTZXNzaW9uLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL0FjdGl2aXR5UmVzcG9uc2VQYXlsb2FkLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL0RldGFpbGVkU3BlZWNoUGhyYXNlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL0VudW1zLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL0ludGVudFJlc3BvbnNlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1NpbXBsZVNwZWVjaFBocmFzZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9TcGVlY2hEZXRlY3RlZC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9TcGVlY2hIeXBvdGhlc2lzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1RyYW5zbGF0aW9uSHlwb3RoZXNpcy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9UcmFuc2xhdGlvblBocmFzZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9UcmFuc2xhdGlvblN5bnRoZXNpc0VuZC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VSZWNvZ25pemVyQmFzZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5JbnRlcm5hbC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NwZWVjaENvbm5lY3Rpb25GYWN0b3J5LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuSW50ZXJuYWwuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TcGVlY2hDb250ZXh0LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3BlZWNoU2VydmljZVJlY29nbml6ZXIuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2xhdGlvbkNvbm5lY3Rpb25GYWN0b3J5LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNsYXRpb25TZXJ2aWNlUmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1RyYW5zbGF0aW9uU3RhdHVzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vQXVkaW9Tb3VyY2VFdmVudHMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0NodW5rZWRBcnJheUJ1ZmZlclN0cmVhbS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vQ29ubmVjdGlvbkV2ZW50cy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vQ29ubmVjdGlvbk1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0Nvbm5lY3Rpb25PcGVuUmVzcG9uc2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0Vycm9yLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9FdmVudFNvdXJjZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vRXZlbnRzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9FeHBvcnRzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9HdWlkLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9JQ29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vTGlzdC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vUGxhdGZvcm1FdmVudC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vUHJvbWlzZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vUXVldWUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL1Jhd1dlYnNvY2tldE1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL1JpZmZQY21FbmNvZGVyLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9TdHJlYW0uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0FjdGl2aXR5UmVjZWl2ZWRFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0F1ZGlvL0F1ZGlvQ29uZmlnLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9BdWRpb0lucHV0U3RyZWFtLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9BdWRpb091dHB1dFN0cmVhbS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQXVkaW8vQXVkaW9TdHJlYW1Gb3JtYXQuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0F1ZGlvL0Jhc2VBdWRpb1BsYXllci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQXVkaW8vUHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFjay5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQm90RnJhbWV3b3JrQ29uZmlnLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9DYW5jZWxsYXRpb25EZXRhaWxzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9DYW5jZWxsYXRpb25FcnJvckNvZGVzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9DYW5jZWxsYXRpb25SZWFzb24uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0Nvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0Nvbm5lY3Rpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0NvbnRyYWN0cy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvRGlhbG9nU2VydmljZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvRGlhbG9nU2VydmljZUNvbm5lY3Rvci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvRXhwb3J0cy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvSW50ZW50UmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0ludGVudFJlY29nbml0aW9uUmVzdWx0LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9JbnRlbnRSZWNvZ25pemVyLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9LZXl3b3JkUmVjb2duaXRpb25Nb2RlbC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL05vTWF0Y2hEZXRhaWxzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Ob01hdGNoUmVhc29uLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9PdXRwdXRGb3JtYXQuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1BocmFzZUxpc3RHcmFtbWFyLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Qcm9mYW5pdHlPcHRpb24uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1Byb3BlcnR5Q29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvUHJvcGVydHlJZC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvUmVjb2duaXRpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1JlY29nbml0aW9uUmVzdWx0LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9SZWNvZ25pemVyLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9SZXN1bHRSZWFzb24uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NlcnZpY2VQcm9wZXJ0eUNoYW5uZWwuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1Nlc3Npb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaENvbW1hbmRzQ29uZmlnLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVlY2hDb25maWcuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVlY2hSZWNvZ25pdGlvblJlc3VsdC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlZWNoUmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlZWNoVHJhbnNsYXRpb25Db25maWcuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNsYXRpb25SZWNvZ25pemVyLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zbGF0aW9ucy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3AtZGVmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9saWIvU3BlZWNoU2VydmljZXMvU3BlZWNoU0RLLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbGliL1NwZWVjaFNlcnZpY2VzL1NwZWVjaFRvVGV4dC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL2xpYi9TcGVlY2hTZXJ2aWNlcy9TcGVlY2hUb1RleHQvU3BlZWNoR3JhbW1hckxpc3QuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9saWIvU3BlZWNoU2VydmljZXMvU3BlZWNoVG9UZXh0L2NvZ25pdGl2ZVNlcnZpY2VFdmVudFJlc3VsdFRvV2ViU3BlZWNoUmVjb2duaXRpb25SZXN1bHRMaXN0LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbGliL1NwZWVjaFNlcnZpY2VzL1NwZWVjaFRvVGV4dC9jcmVhdGVTcGVlY2hSZWNvZ25pdGlvblBvbnlmaWxsLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbGliL1NwZWVjaFNlcnZpY2VzL3BhdGNoT3B0aW9ucy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL2xpYi9TcGVlY2hTZXJ2aWNlcy9yZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbGliL1V0aWwvYXJyYXlUb01hcC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL2xpYi9VdGlsL2NyZWF0ZURlZmVycmVkLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbGliL1V0aWwvY3JlYXRlUHJvbWlzZVF1ZXVlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbGliL2V4dGVybmFsL2V2ZW50LXRhcmdldC1zaGltLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL21pY3Jvc29mdC5jb2duaXRpdmVzZXJ2aWNlcy5zcGVlY2guc2RrLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uYnJvd3Nlci9Db25zb2xlTG9nZ2luZ0xpc3RlbmVyLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uYnJvd3Nlci9FeHBvcnRzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uYnJvd3Nlci9GaWxlQXVkaW9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5icm93c2VyL01pY0F1ZGlvU291cmNlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uYnJvd3Nlci9QQ01SZWNvcmRlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLmJyb3dzZXIvUHJveHlJbmZvLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uYnJvd3Nlci9SZXBsYXlhYmxlQXVkaW9Ob2RlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uYnJvd3Nlci9XZWJzb2NrZXRDb25uZWN0aW9uLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uYnJvd3Nlci9XZWJzb2NrZXRNZXNzYWdlQWRhcHRlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9BZGRlZExtSW50ZW50LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uc3BlZWNoL0NvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uc3BlZWNoL0NvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvRHluYW1pY0dyYW1tYXJCdWlsZGVyLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uc3BlZWNoL0VudW1UcmFuc2xhdGlvbi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9FeHBvcnRzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uc3BlZWNoL0lBdXRoZW50aWNhdGlvbi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9JbnRlbnRDb25uZWN0aW9uRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9JbnRlbnRTZXJ2aWNlUmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9RdWVyeVBhcmFtZXRlck5hbWVzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uc3BlZWNoL1JlY29nbml0aW9uRXZlbnRzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uc3BlZWNoL1JlY29nbml6ZXJDb25maWcuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvUmVxdWVzdFNlc3Npb24uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL0RldGFpbGVkU3BlZWNoUGhyYXNlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9FbnVtcy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvSW50ZW50UmVzcG9uc2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1NpbXBsZVNwZWVjaFBocmFzZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvU3BlZWNoRGV0ZWN0ZWQuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1NwZWVjaEh5cG90aGVzaXMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1RyYW5zbGF0aW9uSHlwb3RoZXNpcy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvVHJhbnNsYXRpb25QaHJhc2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1RyYW5zbGF0aW9uU3ludGhlc2lzRW5kLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VSZWNvZ25pemVyQmFzZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuSW50ZXJuYWwuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvU3BlZWNoQ29ubmVjdGlvbkZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuSW50ZXJuYWwuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvU3BlZWNoQ29udGV4dC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9TcGVlY2hTZXJ2aWNlUmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2xhdGlvbkNvbm5lY3Rpb25GYWN0b3J5LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24uc3BlZWNoL1RyYW5zbGF0aW9uU2VydmljZVJlY29nbml6ZXIuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNsYXRpb25TdGF0dXMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi5zcGVlY2gvV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uL0F1ZGlvU291cmNlRXZlbnRzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24vQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24vQ29ubmVjdGlvbkV2ZW50cy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uL0Nvbm5lY3Rpb25NZXNzYWdlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24vQ29ubmVjdGlvbk9wZW5SZXNwb25zZS5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uL0Vycm9yLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24vRXZlbnRTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi9FdmVudHMuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi9FeHBvcnRzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24vR3VpZC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uL0lDb25uZWN0aW9uLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24vTGlzdC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvY29tbW9uL1BsYXRmb3JtRXZlbnQuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi9Qcm9taXNlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24vUXVldWUuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi9SYXdXZWJzb2NrZXRNZXNzYWdlLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9jb21tb24vUmlmZlBjbUVuY29kZXIuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL2NvbW1vbi9TdHJlYW0uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9BdWRpby9BdWRpb0NvbmZpZy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL0F1ZGlvL0F1ZGlvSW5wdXRTdHJlYW0uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9BdWRpby9BdWRpb1N0cmVhbUZvcm1hdC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL0F1ZGlvL1B1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9DYW5jZWxsYXRpb25EZXRhaWxzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9zZGsvQ2FuY2VsbGF0aW9uRXJyb3JDb2Rlcy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL0NhbmNlbGxhdGlvblJlYXNvbi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL0Nvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9Db25uZWN0aW9uRXZlbnRBcmdzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9zZGsvQ29udHJhY3RzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9zZGsvRXhwb3J0cy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL0ludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9JbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL0ludGVudFJlY29nbml0aW9uUmVzdWx0LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9zZGsvSW50ZW50UmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9zZGsvTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9Ob01hdGNoRGV0YWlscy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL05vTWF0Y2hSZWFzb24uanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9PdXRwdXRGb3JtYXQuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9QaHJhc2VMaXN0R3JhbW1hci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL1Byb3BlcnR5Q29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL1Byb3BlcnR5SWQuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9SZWNvZ25pdGlvbkV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL1JlY29nbml0aW9uUmVzdWx0LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9zZGsvUmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL1Jlc3VsdFJlYXNvbi5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL1Nlc3Npb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9TcGVlY2hDb25maWcuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9TcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9zZGsvU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9TcGVlY2hSZWNvZ25pdGlvblJlc3VsdC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL1NwZWVjaFJlY29nbml6ZXIuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9TcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL1RyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL1RyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9UcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0LmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9zZGsvVHJhbnNsYXRpb25SZWNvZ25pemVyLmpzIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi9ub2RlX21vZHVsZXMvd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL3NyYy9zZGsvVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC8uL25vZGVfbW9kdWxlcy93ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9saWIvc3JjL3Nkay9UcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4vbm9kZV9tb2R1bGVzL3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2xpYi9zcmMvc2RrL1RyYW5zbGF0aW9ucy5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoL2h0dHBzLXByb3h5LWFnZW50IChpZ25vcmVkKSIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoL3dzIChpZ25vcmVkKSIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoLy4uLy4uL2V4dGVybmFsL29jc3Avb2NzcCAoaWdub3JlZCkiLCJ3ZWJwYWNrOi8vRGlyZWN0TGluZVNwZWVjaC9odHRwcy1wcm94eS1hZ2VudCAoaWdub3JlZCk/MTgyYSIsIndlYnBhY2s6Ly9EaXJlY3RMaW5lU3BlZWNoL3dzIChpZ25vcmVkKT84M2JmIiwid2VicGFjazovL0RpcmVjdExpbmVTcGVlY2gvLi4vLi4vZXh0ZXJuYWwvb2NzcC9vY3NwIChpZ25vcmVkKT9mZWViIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O1FBQUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7OztRQUdBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwwQ0FBMEMsZ0NBQWdDO1FBQzFFO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0Esd0RBQXdELGtCQUFrQjtRQUMxRTtRQUNBLGlEQUFpRCxjQUFjO1FBQy9EOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSx5Q0FBeUMsaUNBQWlDO1FBQzFFLGdIQUFnSCxtQkFBbUIsRUFBRTtRQUNySTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDJCQUEyQiwwQkFBMEIsRUFBRTtRQUN2RCxpQ0FBaUMsZUFBZTtRQUNoRDtRQUNBO1FBQ0E7O1FBRUE7UUFDQSxzREFBc0QsK0RBQStEOztRQUVySDtRQUNBOzs7UUFHQTtRQUNBOzs7Ozs7Ozs7Ozs7O0FDbEZhOztBQUViLDZCQUE2QixtQkFBTyxDQUFDLG9IQUE4Qzs7QUFFbkY7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQSw4Q0FBOEMsbUJBQU8sQ0FBQyxzR0FBdUM7O0FBRTdGLDhDQUE4QyxtQkFBTyxDQUFDLHNHQUF1Qzs7QUFFN0YsMkNBQTJDLG1CQUFPLENBQUMsZ0dBQW9DOztBQUV2Rix5Q0FBeUMs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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixVQUFVO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixZQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsdUNBQXVDLFNBQVM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLGlCQUFpQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFNBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFNBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsRUFBRTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBLHFCQUFxQixlQUFlO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixZQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLFNBQVM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EscUJBQXFCLFNBQVM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVEQUF1RCxPQUFPO0FBQzlEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1REFBdUQsT0FBTztBQUM5RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0I7QUFDbEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUIsUUFBUTtBQUM3QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ2tEO0FBQ1k7QUFDMEM7QUFDbkI7QUFDM0I7QUFDMEI7QUFDaEI7QUFDZDtBQUNRO0FBQ2hCO0FBQzRCO0FBQ2xCO0FBQ1k7QUFDQTtBQUNNO0FBQ0E7QUFDZ0I7QUFDTjtBQUNKO0FBQ0Y7QUFDSjtBQUM1QjtBQUNrQjtBQUNJO0FBQ1Y7QUFDaEI7QUFDQTtBQUNZO0FBQ0E7QUFDVTtBQUNsQjtBQUNFO0FBQ0U7QUFDa0Q7QUFDVjtBQUM5QjtBQUNLO0FBQ0w7QUFDbEI7QUFDYztBQUNJO0FBQ0Y7QUFDSTtBQUNJO0FBQ007QUFDTjtBQUNkO0FBQ007O0FBRTFEOzs7Ozs7Ozs7Ozs7O0FDbkRB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDOztBQUVyQztBQUNBO0FBQ0E7O0FBRUEsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixVQUFVOzs7Ozs7Ozs7Ozs7QUN2THRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxLQUFLO0FBQ0wsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0Esd0NBQXdDLFdBQVc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFNBQVM7QUFDVDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0NBQW9DLGNBQWM7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDLGtCQUFrQjtBQUNuRDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQjtB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QUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0EsMkQ7Ozs7Ozs7Ozs7OztBQzMwQmE7O0FBRWIsNkJBQTZCLG1CQUFPLENBQUMsb0hBQThDOztBQUVuRjtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBLDhDQUE4QyxtQkFBTyxDQUFDLHNHQUF1Qzs7QUFFN0YsMENBQTBDLG1CQUFPLENBQUMsc0ZBQTRCOztBQUU5RSxnREFBZ0QsbUJBQU8sQ0FBQywwR0FBeUM7O0FBRWpHLHVEQUF1RCxtQkFBTyxDQUFDLHdIQUFnRDs7QUFFL0csMkRBQTJELG1CQUFPLENBQUMsdUlBQWdDOztBQUVuRywwQ0FBMEMsZ0NBQWdDLG9DQUFvQyxvREFBb0QsOERBQThELGdFQUFnRSxFQUFFLEVBQUUsZ0NBQWdDLEVBQUUsYUFBYTs7QUFFblYsZ0NBQWdDLGdCQUFnQixzQkFBc0IsT0FBTyx1REFBdUQsYUFBYSwrQ0FBK0MseURBQXlELEVBQUUsRUFBRSxFQUFFLDZDQUE2QywyRUFBMkUsRUFBRSxPQUFPLHlDQUF5QyxrRkFBa0YsRUFBRSxFQUFFLEVBQUUsRUFBRSxlQUFlOztBQUVsaEI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQSx3Qzs7Ozs7Ozs7Ozs7O0FDN0xhOztBQUViO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esd0Q7Ozs7Ozs7Ozs7OztBQ1ZhOztBQUViLDZCQUE2QixtQkFBTyxDQUFDLG9IQUE4Qzs7QUFFbkY7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQSw4Q0FBOEMsbUJBQU8sQ0FBQyxzR0FBdUM7O0FBRTdGLDBDQUEwQyxnQ0FBZ0Msb0NBQW9DLG9EQUFvRCw4REFBOEQsZ0VBQWdFLEVBQUUsRUFBRSxnQ0FBZ0MsRUFBRSxhQUFhOztBQUVuVixnQ0FBZ0MsZ0JBQWdCLHNCQUFzQixPQUFPLHVEQUF1RCxhQUFhLCtDQUErQyx5REFBeUQsRUFBRSxFQUFFLEVBQUUsNkNBQTZDLDJFQUEyRSxFQUFFLE9BQU8seUNBQXlDLGtGQUFrRixFQUFFLEVBQUUsRUFBRSxFQUFFLGVBQWU7O0FBRWxoQjtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0EsR0FBRyxJQUFJLEtBQUs7QUFDWjtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLHNDOzs7Ozs7Ozs7Ozs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUViO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsMEM7Ozs7Ozs7Ozs7OztBQzVDYTs7QUFFYiw2QkFBNkIsbUJBQU8sQ0FBQyxvSEFBOEM7O0FBRW5GO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUEsNkNBQTZDLG1CQUFPLENBQUMsaUdBQWtCOztBQUV2RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Qzs7Ozs7Ozs7Ozs7O0FDdkNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUViLDZCQUE2QixtQkFBTyxDQUFDLG9IQUE4Qzs7QUFFbkYsc0NBQXNDLG1CQUFPLENBQUMsc0ZBQStCOztBQUU3RTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGNBQWMsWUFBWTtBQUMxQixlQUFlLGFBQWE7QUFDNUIsY0FBYyxPQUFPO0FBQ3JCLGNBQWMsaUJBQWlCO0FBQy9CLGNBQWMsUUFBUTtBQUN0QixjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsY0FBYztBQUM1QixjQUFjLE9BQU87QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFNO0FBQ2pCLGFBQWEsWUFBWTtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxPQUFPLGFBQWE7QUFDL0I7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLEVBQUU7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsR0FBRyxFQUFFOztBQUVMOztBQUVBLGlCQUFpQixpQkFBaUI7QUFDbEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsZUFBZSxjQUFjO0FBQzdCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFFOztBQUVIO0FBQ0EsaUVBQWlFOztBQUVqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLG1CQUFtQjtBQUNoQztBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLG1CQUFtQjtBQUNoQztBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLE9BQU87QUFDbEIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLEVBQUU7O0FBRUwsaUJBQWlCLGlCQUFpQjtBQUNsQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxZQUFZO0FBQ3ZCLFdBQVcsT0FBTztBQUNsQixhQUFhLE1BQU07QUFDbkI7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFNO0FBQ2pCLGFBQWEsUUFBUTtBQUNyQjtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFNO0FBQ2pCLFdBQVcsT0FBTztBQUNsQixhQUFhO0FBQ2I7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsTUFBTTtBQUNqQixXQUFXLGlCQUFpQjtBQUM1QixhQUFhO0FBQ2I7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsTUFBTTtBQUNqQixXQUFXLGNBQWM7QUFDekIsYUFBYTtBQUNiO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGNBQWMsU0FBUztBQUN2QixjQUFjLE1BQU07QUFDcEIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsUUFBUTtBQUN0QixjQUFjLGtCQUFrQjtBQUNoQztBQUNBOztBQUVBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7OztBQUdBLGlDQUFpQzs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsSUFBSTtBQUNmLGFBQWEsUUFBUTtBQUNyQjs7QUFFQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsYUFBYSwwQkFBMEI7QUFDdkM7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxtQkFBbUI7QUFDaEM7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7O0FBRUEseUNBQXlDOztBQUV6QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0EsT0FBTzs7O0FBR1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLGFBQWE7QUFDYjs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixhQUFhLFlBQVk7QUFDekI7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILGlCQUFpQix1QkFBdUI7QUFDeEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxtQkFBbUIsc0JBQXNCO0FBQ3pDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsU0FBUztBQUN0QixhQUFhLFNBQVMsaURBQWlEO0FBQ3ZFLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7O0FBR0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7O0FBR0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxTQUFTO0FBQ3RCLGFBQWEsU0FBUyxpREFBaUQ7QUFDdkUsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsYUFBYSxPQUFPLGFBQWE7QUFDakMsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7O0FBR0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOzs7QUFHTCw4Q0FBOEM7QUFDOUM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTzs7O0FBR1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTzs7O0FBR1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUU7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDOzs7Ozs7Ozs7Ozs7QUNqM0JhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBLGdCQUFnQixtQkFBTyxDQUFDLGdMQUE4QjtBQUN0RCxnQkFBZ0IsbUJBQU8sQ0FBQyxnS0FBc0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1CQUFPLENBQUMsMEpBQW1COztBQUVwQzs7Ozs7Ozs7Ozs7OztBQ2ZhO0FBQ2I7QUFDQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVELGdCQUFnQixtQkFBTyxDQUFDLDZKQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsOENBQThDO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDbkVhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVELFNBQVMsbUJBQU8sQ0FBQywyTEFBMEI7QUFDM0MsU0FBUyxtQkFBTyxDQUFDLDJLQUFrQjtBQUNuQyxTQUFTLG1CQUFPLENBQUMsNktBQW1CO0FBQ3BDLFNBQVMsbUJBQU8sQ0FBQyxxS0FBZTtBQUNoQyxTQUFTLG1CQUFPLENBQUMscUxBQXVCO0FBQ3hDLFNBQVMsbUJBQU8sQ0FBQyw2TEFBMkI7QUFDNUMsU0FBUyxtQkFBTyxDQUFDLHFMQUF1QjtBQUN4QyxTQUFTLG1CQUFPLENBQUMsaUtBQWE7O0FBRTlCOzs7Ozs7Ozs7Ozs7O0FDaEJhO0FBQ2I7QUFDQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVELDBCQUEwQixtQkFBTyxDQUFDLDhMQUF1QztBQUN6RSxnQkFBZ0IsbUJBQU8sQ0FBQywyS0FBMEI7QUFDbEQsZ0JBQWdCLG1CQUFPLENBQUMsNkpBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUNsS2E7QUFDYjtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQsMEJBQTBCLG1CQUFPLENBQUMsOExBQXVDO0FBQ3pFLGdCQUFnQixtQkFBTyxDQUFDLDJLQUEwQjtBQUNsRCxnQkFBZ0IsbUJBQU8sQ0FBQyw2SkFBbUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRjtBQUNqRjtBQUNBO0FBQ0E7QUFDQSw0RkFBNEY7QUFDNUYsa0NBQWtDLDBCQUEwQiwyQkFBMkIsdUJBQXVCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkU7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFD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QUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLENBQUM7QUFDRCw4Q0FBOEMsY0FBYztBQUM1RCxnQkFBZ0IsbUJBQU8sQ0FBQyw2SkFBbUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHNDQUFzQztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0hBQWdIO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUM1TmE7QUFDYjtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNEVBQTRFO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxxRkFBcUY7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG1FQUFtRTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsMkNBQTJDOztBQUU1Qzs7Ozs7Ozs7Ozs7OztBQzNLYTtBQUNiO0FBQ0E7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RCxnQkFBZ0IsbUJBQU8sQ0FBQyw2SkFBbUI7QUFDM0MsMEJBQTBCLG1CQUFPLENBQUMsZ0xBQXFCO0FBQ3ZELDBDQUEwQyxtQkFBTyxDQUFDLGdOQUFxQztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsZ0JBQWdCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxZQUFZO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUMzQywwQkFBMEIsbUJBQU8sQ0FBQyxnTEFBcUI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msd0JBQXdCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0NBQXNDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGdCQUFnQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxRQUFRO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUNqWWE7QUFDYjtBQUNBO0FBQ0EsOENBQThD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QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbUJBQW1CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdCQUF3QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBCQUEwQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUNyRmE7QUFDYjtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixFQUFFO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOzs7Ozs7Ozs7Ozs7O0FDN0lhO0FBQ2I7QUFDQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdCQUF3QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3JVYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDdkYsNkJBQTZCLHVEQUF1RDtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLENBQUM7QUFDRCw4Q0FBOEMsY0FBYztBQUM1RCxnQkFBZ0IsbUJBQU8sQ0FBQywyS0FBMEI7QUFDbEQsa0JBQWtCLG1CQUFPLENBQUMsc0pBQWE7QUFDdkMsZ0JBQWdCLG1CQUFPLENBQUMsa0pBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsaUJBQWlCLHdCQUF3QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsaUJBQWlCLHdCQUF3QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxJQUFJO0FBQ25CLGVBQWUsT0FBTztBQUN0QixpQkFBaUIsd0JBQXdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Es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Q0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsT0FBTztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixPQUFPO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG1CQUFtQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7Ozs7Ozs7Ozs7OztBQzFSYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDdkYsNkJBQTZCLHVEQUF1RDtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLENBQUM7QUFDRCw4Q0FBOEMsY0FBYztBQUM1RCxnQkFBZ0IsbUJBQU8sQ0FBQyxrSkFBVztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQyxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJCQUEyQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3JEYTtBQUNiO0FBQ0E7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUIsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsWUFBWTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3BEYTtBQUNiO0FBQ0E7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RCxnQkFBZ0IsbUJBQU8sQ0FBQyxrSkFBVztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOzs7Ozs7Ozs7Ozs7QUMzQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0Q0FBNEM7O0FBRTVDOzs7Ozs7Ozs7Ozs7QUNuQkEsZTs7Ozs7Ozs7Ozs7QUNBQSxlOzs7Ozs7Ozs7OztBQ0FBLGU7Ozs7Ozs7Ozs7O0FDQUEsZTs7Ozs7Ozs7Ozs7QUNBQSxlOzs7Ozs7Ozs7OztBQ0FBLGUiLCJmaWxlIjoiZGlyZWN0bGluZXNwZWVjaC5kZXZlbG9wbWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vbGliL2luZGV4LmpzXCIpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHlcIikpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIikpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3NcIikpO1xuXG52YXIgX29ic2VydmFibGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJjb3JlLWpzL2ZlYXR1cmVzL29ic2VydmFibGVcIikpO1xuXG52YXIgX21hdGhSYW5kb20gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJtYXRoLXJhbmRvbVwiKSk7XG5cbnZhciBfc2hhcmVPYnNlcnZhYmxlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9zaGFyZU9ic2VydmFibGVcIikpO1xuXG52YXIgX1NwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9TcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZVwiKSk7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gcmFuZG9tQWN0aXZpdHlJZCgpIHtcbiAgcmV0dXJuICgwLCBfbWF0aFJhbmRvbS5kZWZhdWx0KSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMik7XG59XG5cbnZhciBEaXJlY3RMaW5lU3BlZWNoID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRGlyZWN0TGluZVNwZWVjaChfcmVmKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yID0gX3JlZi5kaWFsb2dTZXJ2aWNlQ29ubmVjdG9yO1xuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIERpcmVjdExpbmVTcGVlY2gpO1xuICAgIHZhciBjb25uZWN0aW9uU3RhdHVzT2JzZXJ2ZXI7XG4gICAgdGhpcy5kaWFsb2dTZXJ2aWNlQ29ubmVjdG9yID0gZGlhbG9nU2VydmljZUNvbm5lY3RvcjtcbiAgICB0aGlzLmFjdGl2aXR5JCA9ICgwLCBfc2hhcmVPYnNlcnZhYmxlLmRlZmF1bHQpKG5ldyBfb2JzZXJ2YWJsZS5kZWZhdWx0KGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgX3RoaXMuX2FjdGl2aXR5T2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgIGNvbm5lY3Rpb25TdGF0dXNPYnNlcnZlci5uZXh0KDApO1xuICAgICAgY29ubmVjdGlvblN0YXR1c09ic2VydmVyLm5leHQoMSk7XG4gICAgICBjb25uZWN0aW9uU3RhdHVzT2JzZXJ2ZXIubmV4dCgyKTtcbiAgICB9KSk7XG4gICAgdGhpcy5jb25uZWN0aW9uU3RhdHVzJCA9ICgwLCBfc2hhcmVPYnNlcnZhYmxlLmRlZmF1bHQpKG5ldyBfb2JzZXJ2YWJsZS5kZWZhdWx0KGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgY29ubmVjdGlvblN0YXR1c09ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgfSkpO1xuXG4gICAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5hY3Rpdml0eVJlY2VpdmVkID0gZnVuY3Rpb24gKF8sIF9yZWYyKSB7XG4gICAgICB2YXIgYWN0aXZpdHkgPSBfcmVmMi5hY3Rpdml0eSxcbiAgICAgICAgICBhdWRpb1N0cmVhbSA9IF9yZWYyLmF1ZGlvU3RyZWFtO1xuXG4gICAgICB0cnkge1xuICAgICAgICBfdGhpcy5fYWN0aXZpdHlPYnNlcnZlciAmJiBfdGhpcy5fYWN0aXZpdHlPYnNlcnZlci5uZXh0KF9vYmplY3RTcHJlYWQoe30sIGFjdGl2aXR5LCB7XG4gICAgICAgICAgY2hhbm5lbERhdGE6IF9vYmplY3RTcHJlYWQoe30sIGFjdGl2aXR5LmNoYW5uZWxEYXRhLCB7fSwgYXVkaW9TdHJlYW0gPyB7XG4gICAgICAgICAgICBzcGVlY2hTeW50aGVzaXNVdHRlcmFuY2U6IG5ldyBfU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2UuZGVmYXVsdChhdWRpb1N0cmVhbSlcbiAgICAgICAgICB9IDoge30pLFxuICAgICAgICAgIGZyb206IF9vYmplY3RTcHJlYWQoe30sIGFjdGl2aXR5LmZyb20sIHtcbiAgICAgICAgICAgIC8vIFNpbmNlIERMU3BlZWNoIHNlcnZpY2UgbmV2ZXIgQUNLIG91ciBvdXRnb2luZyBhY3Rpdml0eSwgdGhpcyBhY3Rpdml0eSBtdXN0IGJlIGZyb20gYm90LlxuICAgICAgICAgICAgcm9sZTogJ2JvdCdcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAvLyBEaXJlY3QgTGluZSBTcGVlY2ggc2VydmVyIGN1cnJlbnRseSBkbyBub3QgdGltZXN0YW1wIG91dGdvaW5nIGFjdGl2aXRpZXMuXG4gICAgICAgICAgLy8gVGh1cywgaXQgd2lsbCBiZSBlYXNpZXIgdG8ganVzdCByZS10aW1lc3RhbXAgZXZlcnkgaW5jb21pbmcvb3V0Z29pbmcgYWN0aXZpdGllcyB1c2luZyBsb2NhbCB0aW1lLlxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShEaXJlY3RMaW5lU3BlZWNoLCBbe1xuICAgIGtleTogXCJlbmRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kKCkge1xuICAgICAgdGhpcy5kaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLmNsb3NlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInBvc3RBY3Rpdml0eVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwb3N0QWN0aXZpdHkoYWN0aXZpdHkpIHtcbiAgICAgIC8vIEN1cnJlbnRseSwgV2ViIENoYXQgc2V0IHVzZXIgSUQgb24gYWxsIG91dGdvaW5nIGFjdGl2aXRpZXMuXG4gICAgICAvLyBBcyBEaXJlY3QgTGluZSBTcGVlY2ggbWFpbnRhaW5zIGl0cyBvd24gdXNlciBJRCwgV2ViIENoYXQgc2hvdWxkIG5vdCBzZXQgdGhlIHVzZXIgSUQuXG4gICAgICAvLyBUT0RPOiBbUDJdIFdlIHNob3VsZCBtb3ZlIHVzZXIgSUQgaW50byBvcHRpb25zIG9mIERpcmVjdExpbmVKUywgaW5zdGVhZCBvZiBXZWIgQ2hhdC5cbiAgICAgIGFjdGl2aXR5ID0gX29iamVjdFNwcmVhZCh7fSwgYWN0aXZpdHksIHtcbiAgICAgICAgZnJvbToge1xuICAgICAgICAgIHJvbGU6ICd1c2VyJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVE9ETzogW1AxXSBEaXJlY3QgTGluZSBTcGVlY2ggc2VydmVyIGN1cnJlbnRseSBkbyBub3QgYWNrIHRoZSBvdXRnb2luZyBhY3Rpdml0aWVzIHdpdGggYW55IGFjdGl2aXR5IElEIG9yIHRpbWVzdGFtcC5cbiAgICAgICAgdmFyIHBzZXVkb0FjdGl2aXR5SWQgPSByYW5kb21BY3Rpdml0eUlkKCk7XG4gICAgICAgIHZhciBpc1NwZWVjaCA9ICEhKGFjdGl2aXR5LmNoYW5uZWxEYXRhICYmIGFjdGl2aXR5LmNoYW5uZWxEYXRhLnNwZWVjaCk7IC8vIERvIG5vdCBzZW5kIHRoZSBhY3Rpdml0eSBpZiBpdCB3YXMgZnJvbSBzcGVlY2guXG5cbiAgICAgICAgaWYgKCFpc1NwZWVjaCkge1xuICAgICAgICAgIHRoaXMuZGlhbG9nU2VydmljZUNvbm5lY3Rvci5zZW5kQWN0aXZpdHlBc3luYyhhY3Rpdml0eSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9hY3Rpdml0eU9ic2VydmVyICYmIHRoaXMuX2FjdGl2aXR5T2JzZXJ2ZXIubmV4dChfb2JqZWN0U3ByZWFkKHt9LCBhY3Rpdml0eSwge1xuICAgICAgICAgIGlkOiBwc2V1ZG9BY3Rpdml0eUlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIF9vYnNlcnZhYmxlLmRlZmF1bHQub2YocHNldWRvQWN0aXZpdHlJZCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfb2JzZXJ2YWJsZS5kZWZhdWx0KGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICAgIHJldHVybiBvYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERpcmVjdExpbmVTcGVlY2g7XG59KCk7IC8vIEludGVyZmFjZXMgbm90IHlldCBpbXBsZW1lbnRlZCBpbiBXZWIgQ2hhdDpcbi8vIHJlZmVyZW5jZUdyYW1tYXJJZD86IHN0cmluZyxcbi8vIGdldFNlc3Npb25JZD8gOiAoKSA9PiBPYnNlcnZhYmxlPHN0cmluZz5cblxuXG5leHBvcnRzLmRlZmF1bHQgPSBEaXJlY3RMaW5lU3BlZWNoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTlFYVhKbFkzUk1hVzVsVTNCbFpXTm9MbXB6SWwwc0ltNWhiV1Z6SWpwYkluSmhibVJ2YlVGamRHbDJhWFI1U1dRaUxDSjBiMU4wY21sdVp5SXNJbk4xWW5OMGNpSXNJa1JwY21WamRFeHBibVZUY0dWbFkyZ2lMQ0prYVdGc2IyZFRaWEoyYVdObFEyOXVibVZqZEc5eUlpd2lZMjl1Ym1WamRHbHZibE4wWVhSMWMwOWljMlZ5ZG1WeUlpd2lZV04wYVhacGRIa2tJaXdpVDJKelpYSjJZV0pzWlNJc0ltOWljMlZ5ZG1WeUlpd2lYMkZqZEdsMmFYUjVUMkp6WlhKMlpYSWlMQ0p1WlhoMElpd2lZMjl1Ym1WamRHbHZibE4wWVhSMWN5UWlMQ0poWTNScGRtbDBlVkpsWTJWcGRtVmtJaXdpWHlJc0ltRmpkR2wyYVhSNUlpd2lZWFZrYVc5VGRISmxZVzBpTENKamFHRnVibVZzUkdGMFlTSXNJbk53WldWamFGTjViblJvWlhOcGMxVjBkR1Z5WVc1alpTSXNJbE53WldWamFGTjViblJvWlhOcGMwRjFaR2x2VTNSeVpXRnRWWFIwWlhKaGJtTmxJaXdpWm5KdmJTSXNJbkp2YkdVaUxDSjBhVzFsYzNSaGJYQWlMQ0pFWVhSbElpd2lkRzlKVTA5VGRISnBibWNpTENKbGNuSnZjaUlzSW1OdmJuTnZiR1VpTENKamJHOXpaU0lzSW5CelpYVmtiMEZqZEdsMmFYUjVTV1FpTENKcGMxTndaV1ZqYUNJc0luTndaV1ZqYUNJc0luTmxibVJCWTNScGRtbDBlVUZ6ZVc1aklpd2lhV1FpTENKdlppSXNJbVZ5Y2lKZExDSnRZWEJ3YVc1bmN5STZJanM3T3pzN096czdPenM3T3pzN08wRkJSVUU3TzBGQlEwRTdPMEZCUlVFN08wRkJRMEU3T3pzN096dEJRVVZCTEZOQlFWTkJMR2RDUVVGVUxFZEJRVFJDTzBGQlF6RkNMRk5CUVU4c01rSkJRMHBETEZGQlJFa3NRMEZEU3l4RlFVUk1MRVZCUlVwRExFMUJSa2tzUTBGRlJ5eERRVVpJTEVOQlFWQTdRVUZIUkRzN1NVRkZiMEpETEdkQ096czdRVUZEYmtJc2EwTkJRWGRETzBGQlFVRTdPMEZCUVVFc1VVRkJNVUpETEhOQ1FVRXdRaXhSUVVFeFFrRXNjMEpCUVRCQ08wRkJRVUU3UVVGRGRFTXNVVUZCU1VNc2QwSkJRVW83UVVGRlFTeFRRVUZMUkN4elFrRkJUQ3hIUVVFNFFrRXNjMEpCUVRsQ08wRkJSVUVzVTBGQlMwVXNVMEZCVEN4SFFVRnBRaXc0UWtGRFppeEpRVUZKUXl4dFFrRkJTaXhEUVVGbExGVkJRVUZETEZGQlFWRXNSVUZCU1R0QlFVTjZRaXhOUVVGQkxFdEJRVWtzUTBGQlEwTXNhVUpCUVV3c1IwRkJlVUpFTEZGQlFYcENPMEZCUlVGSUxFMUJRVUZCTEhkQ1FVRjNRaXhEUVVGRFN5eEpRVUY2UWl4RFFVRTRRaXhEUVVFNVFqdEJRVU5CVEN4TlFVRkJRU3gzUWtGQmQwSXNRMEZCUTBzc1NVRkJla0lzUTBGQk9FSXNRMEZCT1VJN1FVRkRRVXdzVFVGQlFVRXNkMEpCUVhkQ0xFTkJRVU5MTEVsQlFYcENMRU5CUVRoQ0xFTkJRVGxDTzBGQlEwUXNTMEZPUkN4RFFVUmxMRU5CUVdwQ08wRkJWVUVzVTBGQlMwTXNhVUpCUVV3c1IwRkJlVUlzT0VKQlEzWkNMRWxCUVVsS0xHMUNRVUZLTEVOQlFXVXNWVUZCUVVNc1VVRkJVU3hGUVVGSk8wRkJRM3BDU0N4TlFVRkJRU3gzUWtGQmQwSXNSMEZCUjBjc1VVRkJNMEk3UVVGRFJDeExRVVpFTEVOQlJIVkNMRU5CUVhwQ096dEJRVTFCU2l4SlFVRkJRU3h6UWtGQmMwSXNRMEZCUTFFc1owSkJRWFpDTEVkQlFUQkRMRlZCUVVORExFTkJRVVFzVTBGQmEwTTdRVUZCUVN4VlFVRTFRa01zVVVGQk5FSXNVMEZCTlVKQkxGRkJRVFJDTzBGQlFVRXNWVUZCYkVKRExGZEJRV3RDTEZOQlFXeENRU3hYUVVGclFqczdRVUZETVVVc1ZVRkJTVHRCUVVOR0xGRkJRVUVzUzBGQlNTeERRVUZEVGl4cFFrRkJUQ3hKUVVORkxFdEJRVWtzUTBGQlEwRXNhVUpCUVV3c1EwRkJkVUpETEVsQlFYWkNMRzFDUVVOTFNTeFJRVVJNTzBGQlJVVkZMRlZCUVVGQkxGZEJRVmNzYjBKQlEwNUdMRkZCUVZFc1EwRkJRMFVzVjBGRVNDeE5RVVZNUkN4WFFVRlhMRWRCUVVjN1FVRkJSVVVzV1VGQlFVRXNkMEpCUVhkQ0xFVkJRVVVzU1VGQlNVTXNORU5CUVVvc1EwRkJkME5JTEZkQlFYaERPMEZCUVRWQ0xGZEJRVWdzUjBGQmQwWXNSVUZHT1VZc1EwRkdZanRCUVUxRlNTeFZRVUZCUVN4SlFVRkpMRzlDUVVORFRDeFJRVUZSTEVOQlFVTkxMRWxCUkZZN1FVRkZSanRCUVVOQlF5eFpRVUZCUVN4SlFVRkpMRVZCUVVVN1FVRklTaXhaUVU1T08wRkJWMFU3UVVGRFFUdEJRVU5CUXl4VlFVRkJRU3hUUVVGVExFVkJRVVVzU1VGQlNVTXNTVUZCU2l4SFFVRlhReXhYUVVGWU8wRkJZbUlzVjBGRVJqdEJRV2RDUkN4UFFXcENSQ3hEUVdsQ1JTeFBRVUZQUXl4TFFVRlFMRVZCUVdNN1FVRkRaRU1zVVVGQlFVRXNUMEZCVHl4RFFVRkRSQ3hMUVVGU0xFTkJRV05CTEV0QlFXUTdRVUZEUkR0QlFVTkdMRXRCY2tKRU8wRkJjMEpFT3pzN096QkNRVVZMTzBGQlEwb3NWMEZCUzNCQ0xITkNRVUZNTEVOQlFUUkNjMElzUzBGQk5VSTdRVUZEUkRzN08ybERRVVZaV2l4UkxFVkJRVlU3UVVGRGNrSTdRVUZEUVR0QlFVTkJPMEZCUTBGQkxFMUJRVUZCTEZGQlFWRXNjVUpCUTBoQkxGRkJSRWM3UVVGRlRrc3NVVUZCUVVFc1NVRkJTU3hGUVVGRk8wRkJRVVZETEZWQlFVRkJMRWxCUVVrc1JVRkJSVHRCUVVGU08wRkJSa0VzVVVGQlVqczdRVUZMUVN4VlFVRkpPMEZCUTBZN1FVRkRRU3haUVVGTlR5eG5Ra0ZCWjBJc1IwRkJSek5DTEdkQ1FVRm5RaXhGUVVGNlF6dEJRVU5CTEZsQlFVMDBRaXhSUVVGUkxFZEJRVWNzUTBGQlF5eEZRVUZGWkN4UlFVRlJMRU5CUVVORkxGZEJRVlFzU1VGQmQwSkdMRkZCUVZFc1EwRkJRMFVzVjBGQlZDeERRVUZ4UW1Fc1RVRkJMME1zUTBGQmJFSXNRMEZJUlN4RFFVdEdPenRCUVVOQkxGbEJRVWtzUTBGQlEwUXNVVUZCVEN4RlFVRmxPMEZCUTJJc1pVRkJTM2hDTEhOQ1FVRk1MRU5CUVRSQ01FSXNhVUpCUVRWQ0xFTkJRVGhEYUVJc1VVRkJPVU03UVVGRFJEczdRVUZGUkN4aFFVRkxUQ3hwUWtGQlRDeEpRVU5GTEV0QlFVdEJMR2xDUVVGTUxFTkJRWFZDUXl4SlFVRjJRaXh0UWtGRFMwa3NVVUZFVER0QlFVVkZhVUlzVlVGQlFVRXNSVUZCUlN4RlFVRkZTaXhuUWtGR1RqdEJRVWRGVGl4VlFVRkJRU3hUUVVGVExFVkJRVVVzU1VGQlNVTXNTVUZCU2l4SFFVRlhReXhYUVVGWU8wRkJTR0lzVjBGRVJqdEJRVTlCTEdWQlFVOW9RaXh2UWtGQlYzbENMRVZCUVZnc1EwRkJZMHdzWjBKQlFXUXNRMEZCVUR0QlFVTkVMRTlCYkVKRUxFTkJhMEpGTEU5QlFVOU5MRWRCUVZBc1JVRkJXVHRCUVVOYUxHVkJRVThzU1VGQlNURkNMRzFDUVVGS0xFTkJRV1VzVlVGQlFVTXNVVUZCVVR0QlFVRkJMR2xDUVVGSlFTeFJRVUZSTEVOQlFVTm5RaXhMUVVGVUxFTkJRV1ZUTEVkQlFXWXNRMEZCU2p0QlFVRkJMRk5CUVhaQ0xFTkJRVkE3UVVGRFJEdEJRVU5HT3pzN1MwRkhTRHRCUVVOQk8wRkJRMEVpTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lJdktpQmxjMnhwYm5RZ2JtOHRiV0ZuYVdNdGJuVnRZbVZ5Y3pvZ1cxd2laWEp5YjNKY0lpd2dleUJjSW1sbmJtOXlaVndpT2lCYk1Dd2dNU3dnTWl3Z016WmRJSDFkSUNvdlhISmNibHh5WEc1cGJYQnZjblFnVDJKelpYSjJZV0pzWlNCbWNtOXRJQ2RqYjNKbExXcHpMMlpsWVhSMWNtVnpMMjlpYzJWeWRtRmliR1VuTzF4eVhHNXBiWEJ2Y25RZ2NtRnVaRzl0SUdaeWIyMGdKMjFoZEdndGNtRnVaRzl0Snp0Y2NseHVYSEpjYm1sdGNHOXlkQ0J6YUdGeVpVOWljMlZ5ZG1GaWJHVWdabkp2YlNBbkxpOXphR0Z5WlU5aWMyVnlkbUZpYkdVbk8xeHlYRzVwYlhCdmNuUWdVM0JsWldOb1UzbHVkR2hsYzJselFYVmthVzlUZEhKbFlXMVZkSFJsY21GdVkyVWdabkp2YlNBbkxpOVRjR1ZsWTJoVGVXNTBhR1Z6YVhOQmRXUnBiMU4wY21WaGJWVjBkR1Z5WVc1alpTYzdYSEpjYmx4eVhHNW1kVzVqZEdsdmJpQnlZVzVrYjIxQlkzUnBkbWwwZVVsa0tDa2dlMXh5WEc0Z0lISmxkSFZ5YmlCeVlXNWtiMjBvS1Z4eVhHNGdJQ0FnTG5SdlUzUnlhVzVuS0RNMktWeHlYRzRnSUNBZ0xuTjFZbk4wY2lneUtUdGNjbHh1ZlZ4eVhHNWNjbHh1Wlhod2IzSjBJR1JsWm1GMWJIUWdZMnhoYzNNZ1JHbHlaV04wVEdsdVpWTndaV1ZqYUNCN1hISmNiaUFnWTI5dWMzUnlkV04wYjNJb2V5QmthV0ZzYjJkVFpYSjJhV05sUTI5dWJtVmpkRzl5SUgwcElIdGNjbHh1SUNBZ0lHeGxkQ0JqYjI1dVpXTjBhVzl1VTNSaGRIVnpUMkp6WlhKMlpYSTdYSEpjYmx4eVhHNGdJQ0FnZEdocGN5NWthV0ZzYjJkVFpYSjJhV05sUTI5dWJtVmpkRzl5SUQwZ1pHbGhiRzluVTJWeWRtbGpaVU52Ym01bFkzUnZjanRjY2x4dVhISmNiaUFnSUNCMGFHbHpMbUZqZEdsMmFYUjVKQ0E5SUhOb1lYSmxUMkp6WlhKMllXSnNaU2hjY2x4dUlDQWdJQ0FnYm1WM0lFOWljMlZ5ZG1GaWJHVW9iMkp6WlhKMlpYSWdQVDRnZTF4eVhHNGdJQ0FnSUNBZ0lIUm9hWE11WDJGamRHbDJhWFI1VDJKelpYSjJaWElnUFNCdlluTmxjblpsY2p0Y2NseHVYSEpjYmlBZ0lDQWdJQ0FnWTI5dWJtVmpkR2x2YmxOMFlYUjFjMDlpYzJWeWRtVnlMbTVsZUhRb01DazdYSEpjYmlBZ0lDQWdJQ0FnWTI5dWJtVmpkR2x2YmxOMFlYUjFjMDlpYzJWeWRtVnlMbTVsZUhRb01TazdYSEpjYmlBZ0lDQWdJQ0FnWTI5dWJtVmpkR2x2YmxOMFlYUjFjMDlpYzJWeWRtVnlMbTVsZUhRb01pazdYSEpjYmlBZ0lDQWdJSDBwWEhKY2JpQWdJQ0FwTzF4eVhHNWNjbHh1SUNBZ0lIUm9hWE11WTI5dWJtVmpkR2x2YmxOMFlYUjFjeVFnUFNCemFHRnlaVTlpYzJWeWRtRmliR1VvWEhKY2JpQWdJQ0FnSUc1bGR5QlBZbk5sY25aaFlteGxLRzlpYzJWeWRtVnlJRDArSUh0Y2NseHVJQ0FnSUNBZ0lDQmpiMjV1WldOMGFXOXVVM1JoZEhWelQySnpaWEoyWlhJZ1BTQnZZbk5sY25abGNqdGNjbHh1SUNBZ0lDQWdmU2xjY2x4dUlDQWdJQ2s3WEhKY2JseHlYRzRnSUNBZ1pHbGhiRzluVTJWeWRtbGpaVU52Ym01bFkzUnZjaTVoWTNScGRtbDBlVkpsWTJWcGRtVmtJRDBnS0Y4c0lIc2dZV04wYVhacGRIa3NJR0YxWkdsdlUzUnlaV0Z0SUgwcElEMCtJSHRjY2x4dUlDQWdJQ0FnZEhKNUlIdGNjbHh1SUNBZ0lDQWdJQ0IwYUdsekxsOWhZM1JwZG1sMGVVOWljMlZ5ZG1WeUlDWW1YSEpjYmlBZ0lDQWdJQ0FnSUNCMGFHbHpMbDloWTNScGRtbDBlVTlpYzJWeWRtVnlMbTVsZUhRb2UxeHlYRzRnSUNBZ0lDQWdJQ0FnSUNBdUxpNWhZM1JwZG1sMGVTeGNjbHh1SUNBZ0lDQWdJQ0FnSUNBZ1kyaGhibTVsYkVSaGRHRTZJSHRjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0F1TGk1aFkzUnBkbWwwZVM1amFHRnVibVZzUkdGMFlTeGNjbHh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQXVMaTRvWVhWa2FXOVRkSEpsWVcwZ1B5QjdJSE53WldWamFGTjViblJvWlhOcGMxVjBkR1Z5WVc1alpUb2dibVYzSUZOd1pXVmphRk41Ym5Sb1pYTnBjMEYxWkdsdlUzUnlaV0Z0VlhSMFpYSmhibU5sS0dGMVpHbHZVM1J5WldGdEtTQjlJRG9nZTMwcFhISmNiaUFnSUNBZ0lDQWdJQ0FnSUgwc1hISmNiaUFnSUNBZ0lDQWdJQ0FnSUdaeWIyMDZJSHRjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0F1TGk1aFkzUnBkbWwwZVM1bWNtOXRMRnh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQzh2SUZOcGJtTmxJRVJNVTNCbFpXTm9JSE5sY25acFkyVWdibVYyWlhJZ1FVTkxJRzkxY2lCdmRYUm5iMmx1WnlCaFkzUnBkbWwwZVN3Z2RHaHBjeUJoWTNScGRtbDBlU0J0ZFhOMElHSmxJR1p5YjIwZ1ltOTBMbHh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJSEp2YkdVNklDZGliM1FuWEhKY2JpQWdJQ0FnSUNBZ0lDQWdJSDBzWEhKY2JpQWdJQ0FnSUNBZ0lDQWdJQzh2SUVScGNtVmpkQ0JNYVc1bElGTndaV1ZqYUNCelpYSjJaWElnWTNWeWNtVnVkR3g1SUdSdklHNXZkQ0IwYVcxbGMzUmhiWEFnYjNWMFoyOXBibWNnWVdOMGFYWnBkR2xsY3k1Y2NseHVJQ0FnSUNBZ0lDQWdJQ0FnTHk4Z1ZHaDFjeXdnYVhRZ2QybHNiQ0JpWlNCbFlYTnBaWElnZEc4Z2FuVnpkQ0J5WlMxMGFXMWxjM1JoYlhBZ1pYWmxjbmtnYVc1amIyMXBibWN2YjNWMFoyOXBibWNnWVdOMGFYWnBkR2xsY3lCMWMybHVaeUJzYjJOaGJDQjBhVzFsTGx4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0IwYVcxbGMzUmhiWEE2SUc1bGR5QkVZWFJsS0NrdWRHOUpVMDlUZEhKcGJtY29LVnh5WEc0Z0lDQWdJQ0FnSUNBZ2ZTazdYSEpjYmlBZ0lDQWdJSDBnWTJGMFkyZ2dLR1Z5Y205eUtTQjdYSEpjYmlBZ0lDQWdJQ0FnWTI5dWMyOXNaUzVsY25KdmNpaGxjbkp2Y2lrN1hISmNiaUFnSUNBZ0lIMWNjbHh1SUNBZ0lIMDdYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQmxibVFvS1NCN1hISmNiaUFnSUNCMGFHbHpMbVJwWVd4dloxTmxjblpwWTJWRGIyNXVaV04wYjNJdVkyeHZjMlVvS1R0Y2NseHVJQ0I5WEhKY2JseHlYRzRnSUhCdmMzUkJZM1JwZG1sMGVTaGhZM1JwZG1sMGVTa2dlMXh5WEc0Z0lDQWdMeThnUTNWeWNtVnVkR3g1TENCWFpXSWdRMmhoZENCelpYUWdkWE5sY2lCSlJDQnZiaUJoYkd3Z2IzVjBaMjlwYm1jZ1lXTjBhWFpwZEdsbGN5NWNjbHh1SUNBZ0lDOHZJRUZ6SUVScGNtVmpkQ0JNYVc1bElGTndaV1ZqYUNCdFlXbHVkR0ZwYm5NZ2FYUnpJRzkzYmlCMWMyVnlJRWxFTENCWFpXSWdRMmhoZENCemFHOTFiR1FnYm05MElITmxkQ0IwYUdVZ2RYTmxjaUJKUkM1Y2NseHVJQ0FnSUM4dklGUlBSRTg2SUZ0UU1sMGdWMlVnYzJodmRXeGtJRzF2ZG1VZ2RYTmxjaUJKUkNCcGJuUnZJRzl3ZEdsdmJuTWdiMllnUkdseVpXTjBUR2x1WlVwVExDQnBibk4wWldGa0lHOW1JRmRsWWlCRGFHRjBMbHh5WEc0Z0lDQWdZV04wYVhacGRIa2dQU0I3WEhKY2JpQWdJQ0FnSUM0dUxtRmpkR2wyYVhSNUxGeHlYRzRnSUNBZ0lDQm1jbTl0T2lCN0lISnZiR1U2SUNkMWMyVnlKeUI5WEhKY2JpQWdJQ0I5TzF4eVhHNWNjbHh1SUNBZ0lIUnllU0I3WEhKY2JpQWdJQ0FnSUM4dklGUlBSRTg2SUZ0UU1WMGdSR2x5WldOMElFeHBibVVnVTNCbFpXTm9JSE5sY25abGNpQmpkWEp5Wlc1MGJIa2daRzhnYm05MElHRmpheUIwYUdVZ2IzVjBaMjlwYm1jZ1lXTjBhWFpwZEdsbGN5QjNhWFJvSUdGdWVTQmhZM1JwZG1sMGVTQkpSQ0J2Y2lCMGFXMWxjM1JoYlhBdVhISmNiaUFnSUNBZ0lHTnZibk4wSUhCelpYVmtiMEZqZEdsMmFYUjVTV1FnUFNCeVlXNWtiMjFCWTNScGRtbDBlVWxrS0NrN1hISmNiaUFnSUNBZ0lHTnZibk4wSUdselUzQmxaV05vSUQwZ0lTRW9ZV04wYVhacGRIa3VZMmhoYm01bGJFUmhkR0VnSmlZZ1lXTjBhWFpwZEhrdVkyaGhibTVsYkVSaGRHRXVjM0JsWldOb0tUdGNjbHh1WEhKY2JpQWdJQ0FnSUM4dklFUnZJRzV2ZENCelpXNWtJSFJvWlNCaFkzUnBkbWwwZVNCcFppQnBkQ0IzWVhNZ1puSnZiU0J6Y0dWbFkyZ3VYSEpjYmlBZ0lDQWdJR2xtSUNnaGFYTlRjR1ZsWTJncElIdGNjbHh1SUNBZ0lDQWdJQ0IwYUdsekxtUnBZV3h2WjFObGNuWnBZMlZEYjI1dVpXTjBiM0l1YzJWdVpFRmpkR2wyYVhSNVFYTjVibU1vWVdOMGFYWnBkSGtwTzF4eVhHNGdJQ0FnSUNCOVhISmNibHh5WEc0Z0lDQWdJQ0IwYUdsekxsOWhZM1JwZG1sMGVVOWljMlZ5ZG1WeUlDWW1YSEpjYmlBZ0lDQWdJQ0FnZEdocGN5NWZZV04wYVhacGRIbFBZbk5sY25abGNpNXVaWGgwS0h0Y2NseHVJQ0FnSUNBZ0lDQWdJQzR1TG1GamRHbDJhWFI1TEZ4eVhHNGdJQ0FnSUNBZ0lDQWdhV1E2SUhCelpYVmtiMEZqZEdsMmFYUjVTV1FzWEhKY2JpQWdJQ0FnSUNBZ0lDQjBhVzFsYzNSaGJYQTZJRzVsZHlCRVlYUmxLQ2t1ZEc5SlUwOVRkSEpwYm1jb0tWeHlYRzRnSUNBZ0lDQWdJSDBwTzF4eVhHNWNjbHh1SUNBZ0lDQWdjbVYwZFhKdUlFOWljMlZ5ZG1GaWJHVXViMllvY0hObGRXUnZRV04wYVhacGRIbEpaQ2s3WEhKY2JpQWdJQ0I5SUdOaGRHTm9JQ2hsY25JcElIdGNjbHh1SUNBZ0lDQWdjbVYwZFhKdUlHNWxkeUJQWW5ObGNuWmhZbXhsS0c5aWMyVnlkbVZ5SUQwK0lHOWljMlZ5ZG1WeUxtVnljbTl5S0dWeWNpa3BPMXh5WEc0Z0lDQWdmVnh5WEc0Z0lIMWNjbHh1ZlZ4eVhHNWNjbHh1THk4Z1NXNTBaWEptWVdObGN5QnViM1FnZVdWMElHbHRjR3hsYldWdWRHVmtJR2x1SUZkbFlpQkRhR0YwT2x4eVhHNHZMeUJ5WldabGNtVnVZMlZIY21GdGJXRnlTV1EvT2lCemRISnBibWNzWEhKY2JpOHZJR2RsZEZObGMzTnBiMjVKWkQ4Z09pQW9LU0E5UGlCUFluTmxjblpoWW14bFBITjBjbWx1Wno1Y2NseHVJbDE5IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlV2lsZGNhcmRcIik7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIikpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuXCIpKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mXCIpKTtcblxudmFyIF9pbmhlcml0czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzXCIpKTtcblxudmFyIF9ldmVudFRhcmdldFNoaW0gPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKFwiLi9leHRlcm5hbC9ldmVudC10YXJnZXQtc2hpbVwiKSk7XG5cbnZhciBTcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0V2ZW50VGFyZ2V0KSB7XG4gICgwLCBfaW5oZXJpdHMyLmRlZmF1bHQpKFNwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlLCBfRXZlbnRUYXJnZXQpO1xuXG4gIGZ1bmN0aW9uIFNwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlKGF1ZGlvU3RyZWFtKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazIuZGVmYXVsdCkodGhpcywgU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2UpO1xuICAgIF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMi5kZWZhdWx0KSh0aGlzLCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShTcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZSkuY2FsbCh0aGlzKSk7XG5cbiAgICBpZiAoYXVkaW9TdHJlYW0gJiYgIShhdWRpb1N0cmVhbS5mb3JtYXQgJiYgYXVkaW9TdHJlYW0uc3RyZWFtUmVhZGVyKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIENvZ25pdGl2ZSBTZXJ2aWNlcyBhdWRpbyBzdHJlYW0uJyk7XG4gICAgfVxuXG4gICAgX3RoaXMuYXVkaW9TdHJlYW0gPSBhdWRpb1N0cmVhbTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICByZXR1cm4gU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2U7XG59KF9ldmVudFRhcmdldFNoaW0uZGVmYXVsdCk7XG5cbigwLCBfZXZlbnRUYXJnZXRTaGltLmRlZmluZUV2ZW50QXR0cmlidXRlKShTcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZSwgJ2JvdW5kYXJ5Jyk7XG4oMCwgX2V2ZW50VGFyZ2V0U2hpbS5kZWZpbmVFdmVudEF0dHJpYnV0ZSkoU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2UsICdlbmQnKTtcbigwLCBfZXZlbnRUYXJnZXRTaGltLmRlZmluZUV2ZW50QXR0cmlidXRlKShTcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZSwgJ2Vycm9yJyk7XG4oMCwgX2V2ZW50VGFyZ2V0U2hpbS5kZWZpbmVFdmVudEF0dHJpYnV0ZSkoU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2UsICdzdGFydCcpO1xudmFyIF9kZWZhdWx0ID0gU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2U7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklpNHVMM055WXk5VGNHVmxZMmhUZVc1MGFHVnphWE5CZFdScGIxTjBjbVZoYlZWMGRHVnlZVzVqWlM1cWN5SmRMQ0p1WVcxbGN5STZXeUpUY0dWbFkyaFRlVzUwYUdWemFYTkJkV1JwYjFOMGNtVmhiVlYwZEdWeVlXNWpaU0lzSW1GMVpHbHZVM1J5WldGdElpd2labTl5YldGMElpd2ljM1J5WldGdFVtVmhaR1Z5SWl3aVJYSnliM0lpTENKRmRtVnVkRlJoY21kbGRDSmRMQ0p0WVhCd2FXNW5jeUk2SWpzN096czdPenM3T3pzN096czdPenM3T3p0QlFVRkJPenRKUVVWTlFTeHRRenM3T3pzN1FVRkRTaXdyUTBGQldVTXNWMEZCV2l4RlFVRjVRanRCUVVGQk96dEJRVUZCTzBGQlEzWkNPenRCUVVWQkxGRkJRVWxCTEZkQlFWY3NTVUZCU1N4RlFVRkZRU3hYUVVGWExFTkJRVU5ETEUxQlFWb3NTVUZCYzBKRUxGZEJRVmNzUTBGQlEwVXNXVUZCY0VNc1EwRkJia0lzUlVGQmMwVTdRVUZEY0VVc1dVRkJUU3hKUVVGSlF5eExRVUZLTEVOQlFWVXNLMFJCUVZZc1EwRkJUanRCUVVORU96dEJRVVZFTEZWQlFVdElMRmRCUVV3c1IwRkJiVUpCTEZkQlFXNUNPMEZCVUhWQ08wRkJVWGhDT3pzN1JVRlVLME5KTEhkQ096dEJRVmxzUkN3eVEwRkJjVUpNTEcxRFFVRnlRaXhGUVVFd1JDeFZRVUV4UkR0QlFVTkJMREpEUVVGeFFrRXNiVU5CUVhKQ0xFVkJRVEJFTEV0QlFURkVPMEZCUTBFc01rTkJRWEZDUVN4dFEwRkJja0lzUlVGQk1FUXNUMEZCTVVRN1FVRkRRU3d5UTBGQmNVSkJMRzFEUVVGeVFpeEZRVUV3UkN4UFFVRXhSRHRsUVVWbFFTeHRReUlzSW5OdmRYSmpaWE5EYjI1MFpXNTBJanBiSW1sdGNHOXlkQ0JGZG1WdWRGUmhjbWRsZEN3Z2V5QmtaV1pwYm1WRmRtVnVkRUYwZEhKcFluVjBaU0I5SUdaeWIyMGdKeTR2WlhoMFpYSnVZV3d2WlhabGJuUXRkR0Z5WjJWMExYTm9hVzBuTzF4eVhHNWNjbHh1WTJ4aGMzTWdVM0JsWldOb1UzbHVkR2hsYzJselFYVmthVzlUZEhKbFlXMVZkSFJsY21GdVkyVWdaWGgwWlc1a2N5QkZkbVZ1ZEZSaGNtZGxkQ0I3WEhKY2JpQWdZMjl1YzNSeWRXTjBiM0lvWVhWa2FXOVRkSEpsWVcwcElIdGNjbHh1SUNBZ0lITjFjR1Z5S0NrN1hISmNibHh5WEc0Z0lDQWdhV1lnS0dGMVpHbHZVM1J5WldGdElDWW1JQ0VvWVhWa2FXOVRkSEpsWVcwdVptOXliV0YwSUNZbUlHRjFaR2x2VTNSeVpXRnRMbk4wY21WaGJWSmxZV1JsY2lrcElIdGNjbHh1SUNBZ0lDQWdkR2h5YjNjZ2JtVjNJRVZ5Y205eUtDZFVhR1VnWm1seWMzUWdZWEpuZFcxbGJuUWdiWFZ6ZENCaVpTQmhJRU52WjI1cGRHbDJaU0JUWlhKMmFXTmxjeUJoZFdScGJ5QnpkSEpsWVcwdUp5azdYSEpjYmlBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnZEdocGN5NWhkV1JwYjFOMGNtVmhiU0E5SUdGMVpHbHZVM1J5WldGdE8xeHlYRzRnSUgxY2NseHVmVnh5WEc1Y2NseHVaR1ZtYVc1bFJYWmxiblJCZEhSeWFXSjFkR1VvVTNCbFpXTm9VM2x1ZEdobGMybHpRWFZrYVc5VGRISmxZVzFWZEhSbGNtRnVZMlVzSUNkaWIzVnVaR0Z5ZVNjcE8xeHlYRzVrWldacGJtVkZkbVZ1ZEVGMGRISnBZblYwWlNoVGNHVmxZMmhUZVc1MGFHVnphWE5CZFdScGIxTjBjbVZoYlZWMGRHVnlZVzVqWlN3Z0oyVnVaQ2NwTzF4eVhHNWtaV1pwYm1WRmRtVnVkRUYwZEhKcFluVjBaU2hUY0dWbFkyaFRlVzUwYUdWemFYTkJkV1JwYjFOMGNtVmhiVlYwZEdWeVlXNWpaU3dnSjJWeWNtOXlKeWs3WEhKY2JtUmxabWx1WlVWMlpXNTBRWFIwY21saWRYUmxLRk53WldWamFGTjViblJvWlhOcGMwRjFaR2x2VTNSeVpXRnRWWFIwWlhKaGJtTmxMQ0FuYzNSaGNuUW5LVHRjY2x4dVhISmNibVY0Y0c5eWRDQmtaV1poZFd4MElGTndaV1ZqYUZONWJuUm9aWE5wYzBGMVpHbHZVM1J5WldGdFZYUjBaWEpoYm1ObE8xeHlYRzRpWFgwPSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gY29nbml0aXZlU2VydmljZXNQcm9taXNlVG9FU1Byb21pc2U7XG5cbmZ1bmN0aW9uIGNvZ25pdGl2ZVNlcnZpY2VzUHJvbWlzZVRvRVNQcm9taXNlKHByb21pc2UpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICByZXR1cm4gcHJvbWlzZS5vbihyZXNvbHZlLCByZWplY3QpO1xuICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklpNHVMM055WXk5amIyZHVhWFJwZG1WVFpYSjJhV05sYzFCeWIyMXBjMlZVYjBWVFVISnZiV2x6WlM1cWN5SmRMQ0p1WVcxbGN5STZXeUpqYjJkdWFYUnBkbVZUWlhKMmFXTmxjMUJ5YjIxcGMyVlViMFZUVUhKdmJXbHpaU0lzSW5CeWIyMXBjMlVpTENKUWNtOXRhWE5sSWl3aWNtVnpiMngyWlNJc0luSmxhbVZqZENJc0ltOXVJbDBzSW0xaGNIQnBibWR6SWpvaU96czdPenM3TzBGQlFXVXNVMEZCVTBFc2JVTkJRVlFzUTBGQk5rTkRMRTlCUVRkRExFVkJRWE5FTzBGQlEyNUZMRk5CUVU4c1NVRkJTVU1zVDBGQlNpeERRVUZaTEZWQlFVTkRMRTlCUVVRc1JVRkJWVU1zVFVGQlZqdEJRVUZCTEZkQlFYRkNTQ3hQUVVGUExFTkJRVU5KTEVWQlFWSXNRMEZCVjBZc1QwRkJXQ3hGUVVGdlFrTXNUVUZCY0VJc1EwRkJja0k3UVVGQlFTeEhRVUZhTEVOQlFWQTdRVUZEUkNJc0luTnZkWEpqWlhORGIyNTBaVzUwSWpwYkltVjRjRzl5ZENCa1pXWmhkV3gwSUdaMWJtTjBhVzl1SUdOdloyNXBkR2wyWlZObGNuWnBZMlZ6VUhKdmJXbHpaVlJ2UlZOUWNtOXRhWE5sS0hCeWIyMXBjMlVwSUh0Y2NseHVJQ0J5WlhSMWNtNGdibVYzSUZCeWIyMXBjMlVvS0hKbGMyOXNkbVVzSUhKbGFtVmpkQ2tnUFQ0Z2NISnZiV2x6WlM1dmJpaHlaWE52YkhabExDQnlaV3BsWTNRcEtUdGNjbHh1ZlZ4eVhHNGlYWDA9IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gY3JlYXRlO1xuXG52YXIgX3JlZ2VuZXJhdG9yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3JcIikpO1xuXG52YXIgX2FzeW5jVG9HZW5lcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yXCIpKTtcblxudmFyIF9taWNyb3NvZnRDb2duaXRpdmVzZXJ2aWNlc1NwZWVjaFNkayA9IHJlcXVpcmUoXCJtaWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNka1wiKTtcblxudmFyIF9jcmVhdGVXZWJTcGVlY2hQb255ZmlsbEZhY3RvcnkgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2NyZWF0ZVdlYlNwZWVjaFBvbnlmaWxsRmFjdG9yeVwiKSk7XG5cbnZhciBfRGlyZWN0TGluZVNwZWVjaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vRGlyZWN0TGluZVNwZWVjaFwiKSk7XG5cbnZhciBfcGF0Y2hEaWFsb2dTZXJ2aWNlQ29ubmVjdG9ySW5saW5lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9wYXRjaERpYWxvZ1NlcnZpY2VDb25uZWN0b3JJbmxpbmVcIikpO1xuXG52YXIgX3Jlc29sdmVGdW5jdGlvbk9yUmV0dXJuVmFsdWUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3Jlc29sdmVGdW5jdGlvbk9yUmV0dXJuVmFsdWVcIikpO1xuXG4vKiBlc2xpbnQgY29tcGxleGl0eTogW1wiZXJyb3JcIiwgMzBdICovXG52YXIgVE9LRU5fUkVORVdBTF9JTlRFUlZBTCA9IDEyMDAwMDtcblxuZnVuY3Rpb24gY3JlYXRlKF94KSB7XG4gIHJldHVybiBfY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGUoKSB7XG4gIF9jcmVhdGUgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKFxuICAvKiNfX1BVUkVfXyovXG4gIF9yZWdlbmVyYXRvci5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoX3JlZikge1xuICAgIHZhciBhdWRpb0NvbmZpZywgYXVkaW9Db250ZXh0LCBlbmFibGVUZWxlbWV0cnksIGZldGNoQ3JlZGVudGlhbHMsIHNwZWVjaFJlY29nbml0aW9uRW5kcG9pbnRJZCwgX3JlZiRzcGVlY2hSZWNvZ25pdGlvLCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlLCBzcGVlY2hTeW50aGVzaXNEZXBsb3ltZW50SWQsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdCwgdGV4dE5vcm1hbGl6YXRpb24sIHVzZXJJRCwgdXNlcm5hbWUsIF9yZWYyLCBhdXRob3JpemF0aW9uVG9rZW4sIHJlZ2lvbiwgc3Vic2NyaXB0aW9uS2V5LCBjb25maWcsIGRpYWxvZ1NlcnZpY2VDb25uZWN0b3IsIGludGVydmFsLCBkaXJlY3RMaW5lLCB3ZWJTcGVlY2hQb255ZmlsbEZhY3Rvcnk7XG5cbiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7XG4gICAgICB3aGlsZSAoMSkge1xuICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBhdWRpb0NvbmZpZyA9IF9yZWYuYXVkaW9Db25maWcsIGF1ZGlvQ29udGV4dCA9IF9yZWYuYXVkaW9Db250ZXh0LCBlbmFibGVUZWxlbWV0cnkgPSBfcmVmLmVuYWJsZVRlbGVtZXRyeSwgZmV0Y2hDcmVkZW50aWFscyA9IF9yZWYuZmV0Y2hDcmVkZW50aWFscywgc3BlZWNoUmVjb2duaXRpb25FbmRwb2ludElkID0gX3JlZi5zcGVlY2hSZWNvZ25pdGlvbkVuZHBvaW50SWQsIF9yZWYkc3BlZWNoUmVjb2duaXRpbyA9IF9yZWYuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSwgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSA9IF9yZWYkc3BlZWNoUmVjb2duaXRpbyA9PT0gdm9pZCAwID8gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgJ2VuLVVTJyA6IF9yZWYkc3BlZWNoUmVjb2duaXRpbywgc3BlZWNoU3ludGhlc2lzRGVwbG95bWVudElkID0gX3JlZi5zcGVlY2hTeW50aGVzaXNEZXBsb3ltZW50SWQsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdCA9IF9yZWYuc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LCB0ZXh0Tm9ybWFsaXphdGlvbiA9IF9yZWYudGV4dE5vcm1hbGl6YXRpb24sIHVzZXJJRCA9IF9yZWYudXNlcklELCB1c2VybmFtZSA9IF9yZWYudXNlcm5hbWU7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ2RpcmVjdGxpbmVzcGVlY2g6IEN1c3RvbSBidWlsZC4nKTtcblxuICAgICAgICAgICAgaWYgKGZldGNoQ3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcImZldGNoQ3JlZGVudGlhbHNcIiBtdXN0IGJlIHNwZWNpZmllZC4nKTtcblxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjtcbiAgICAgICAgICAgIHJldHVybiAoMCwgX3Jlc29sdmVGdW5jdGlvbk9yUmV0dXJuVmFsdWUuZGVmYXVsdCkoZmV0Y2hDcmVkZW50aWFscyk7XG5cbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICBfcmVmMiA9IF9jb250ZXh0Mi5zZW50O1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvblRva2VuID0gX3JlZjIuYXV0aG9yaXphdGlvblRva2VuO1xuICAgICAgICAgICAgcmVnaW9uID0gX3JlZjIucmVnaW9uO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uS2V5ID0gX3JlZjIuc3Vic2NyaXB0aW9uS2V5O1xuXG4gICAgICAgICAgICBpZiAoISghYXV0aG9yaXphdGlvblRva2VuICYmICFzdWJzY3JpcHRpb25LZXkgfHwgYXV0aG9yaXphdGlvblRva2VuICYmIHN1YnNjcmlwdGlvbktleSB8fCBhdXRob3JpemF0aW9uVG9rZW4gJiYgdHlwZW9mIGF1dGhvcml6YXRpb25Ub2tlbiAhPT0gJ3N0cmluZycgfHwgc3Vic2NyaXB0aW9uS2V5ICYmIHR5cGVvZiBzdWJzY3JpcHRpb25LZXkgIT09ICdzdHJpbmcnKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcImZldGNoQ3JlZGVudGlhbHNcIiBtdXN0IHJldHVybiBlaXRoZXIgXCJhdXRob3JpemF0aW9uVG9rZW5cIiBvciBcInN1YnNjcmlwdGlvbktleVwiIGFzIGEgbm9uLWVtcHR5IHN0cmluZyBvbmx5LicpO1xuXG4gICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZW5hYmxlVGVsZW1ldHJ5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2JvdGZyYW1ld29yay1kaXJlY3RsaW5lc3BlZWNoOiBUZWxlbWV0cnkgb3B0aW9ucyBhcmUgbm90IHlldCBzdXBwb3J0ZWQuIFBsZWFzZSByZWZlciB0byBDb2duaXRpdmUgU2VydmljZXMgZG9jdW1lbnRhdGlvbiBmb3IgZGV0YWlscy4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEoIXJlZ2lvbiB8fCB0eXBlb2YgcmVnaW9uICE9PSAnc3RyaW5nJykpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXCJmZXRjaENyZWRlbnRpYWxzXCIgbXVzdCByZXR1cm4gXCJyZWdpb25cIiBhcyBhIG5vbi1lbXB0eSBzdHJpbmcuJyk7XG5cbiAgICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgaWYgKHNwZWVjaFJlY29nbml0aW9uRW5kcG9pbnRJZCkge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2JvdGZyYW1ld29yay1kaXJlY3RsaW5lc3BlZWNoOiBDdXN0b20gU3BlZWNoIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkOyBpZ25vcmluZyBzcGVlY2hSZWNvZ25pdGlvbkVuZHBvaW50SWQuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzcGVlY2hTeW50aGVzaXNEZXBsb3ltZW50SWQpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdib3RmcmFtZXdvcmstZGlyZWN0bGluZXNwZWVjaDogQ3VzdG9tIFZvaWNlIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkOyBpZ25vcmluZyBzcGVlY2hTeW50aGVzaXNEZXBsb3ltZW50SWQuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdib3RmcmFtZXdvcmstZGlyZWN0bGluZXNwZWVjaDogU3ludGhlc2lzIG91dHB1dCBmb3JtYXQgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQ7IGlnbm9yaW5nIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRleHROb3JtYWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignYm90ZnJhbWV3b3JrLWRpcmVjdGxpbmVzcGVlY2g6IFRleHQgbm9ybWFsaXphdGlvbiBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZDsgaWdub3JpbmcgXCJ0ZXh0Tm9ybWFsaXphdGlvblwiLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodXNlcklEIHx8IHVzZXJuYW1lKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignYm90ZnJhbWV3b3JrLWRpcmVjdGxpbmVzcGVlY2g6IEN1c3RvbSBcInVzZXJJZFwiIGFuZCBcInVzZXJuYW1lXCIgYXJlIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGFuZCBhcmUgaWdub3JlZC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGF1dGhvcml6YXRpb25Ub2tlbikge1xuICAgICAgICAgICAgICBjb25maWcgPSBfbWljcm9zb2Z0Q29nbml0aXZlc2VydmljZXNTcGVlY2hTZGsuQm90RnJhbWV3b3JrQ29uZmlnLmZyb21BdXRob3JpemF0aW9uVG9rZW4oYXV0aG9yaXphdGlvblRva2VuLCByZWdpb24pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uZmlnID0gX21pY3Jvc29mdENvZ25pdGl2ZXNlcnZpY2VzU3BlZWNoU2RrLkJvdEZyYW1ld29ya0NvbmZpZy5mcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbktleSwgcmVnaW9uKTtcbiAgICAgICAgICAgIH0gLy8gU3VwcG9ydGVkIG9wdGlvbnMgY2FuIGJlIGZvdW5kIGluIERpYWxvZ0Nvbm5lY3RvckZhY3RvcnkuanMuXG5cblxuICAgICAgICAgICAgY29uZmlnLnNldFByb3BlcnR5KF9taWNyb3NvZnRDb2duaXRpdmVzZXJ2aWNlc1NwZWVjaFNkay5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSwgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSk7IC8vIFRoZSBmb2xsb3dpbmcgY29kZSBzZXQgdGhlIG91dHB1dCBmb3JtYXQuIEJ1dCBjdXJyZW50bHksIG5vbmUgb2YgdGhlIGZvbGxvd2luZyB3b3JrcyBmb3Igc2V0dGluZyBkZXRhaWxlZCBvdXRwdXQgZm9ybWF0LlxuICAgICAgICAgICAgLy8gV2Ugd2lsbCBsZWF2ZSB0aGVzZSBjb2RlIGNvbW1lbnRlZCB1bnRpbCB0aGUgU3BlZWNoIFNESyBzdXBwb3J0LCBwb3NzaWJseSBpdCBpbiBvbmUgb2YgdGhlIHdheSBtZW50aW9uZWQgYmVsb3cuXG4gICAgICAgICAgICAvLyBjb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfT3V0cHV0Rm9ybWF0T3B0aW9uLCBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LkRldGFpbGVkXSk7XG4gICAgICAgICAgICAvLyBjb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdERldGFpbGVkUmVzdWx0VHJ1ZUZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgIC8vIGNvbmZpZy5zZXRQcm9wZXJ0eShPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuRGV0YWlsZWRdKTtcbiAgICAgICAgICAgIC8vIGNvbmZpZy5zZXRTZXJ2aWNlUHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdERldGFpbGVkUmVzdWx0VHJ1ZUZhbHNlLCBcInRydWVcIiwgU2VydmljZVByb3BlcnR5Q2hhbm5lbC5VcmlRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGNvZGUgaXMgY29waWVkIGZyb20gQyMsIGl0IHNob3VsZCBzZXQgZnJvbS5pZCwgYnV0IGl0IGRpZCBub3QuXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vQXp1cmUtU2FtcGxlcy9Db2duaXRpdmUtU2VydmljZXMtRGlyZWN0LUxpbmUtU3BlZWNoLUNsaWVudC9ibG9iL21hc3Rlci9ETFNwZWVjaENsaWVudC9NYWluV2luZG93LnhhbWwuY3MjTDIzNlxuXG4gICAgICAgICAgICB1c2VySUQgJiYgY29uZmlnLnNldFByb3BlcnR5KF9taWNyb3NvZnRDb2duaXRpdmVzZXJ2aWNlc1NwZWVjaFNkay5Qcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9Gcm9tX0lkLCB1c2VySUQpOyAvLyBUaGUgZm9sbG93aW5nIGNvZGUgaXMgY29waWVkIGZyb20gQyMsIGFuZCBpdCBpcyBub3Qgd29ya2luZyB5ZXQuXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vQXp1cmUtU2FtcGxlcy9Db2duaXRpdmUtU2VydmljZXMtRGlyZWN0LUxpbmUtU3BlZWNoLUNsaWVudC9ibG9iL21hc3Rlci9ETFNwZWVjaENsaWVudC9NYWluV2luZG93LnhhbWwuY3NcbiAgICAgICAgICAgIC8vIHNwZWVjaFJlY29nbml0aW9uRW5kcG9pbnRJZCAmJiBjb25maWcuc2V0U2VydmljZVByb3BlcnR5KCdjaWQnLCBzcGVlY2hSZWNvZ25pdGlvbkVuZHBvaW50SWQsIFNlcnZpY2VQcm9wZXJ0eUNoYW5uZWwuVXJpUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgLy8gc3BlZWNoU3ludGhlc2lzRGVwbG95bWVudElkICYmIGNvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLmNvbnZlcnNhdGlvbl9DdXN0b21fVm9pY2VfRGVwbG95bWVudF9JZHMsIHNwZWVjaFN5bnRoZXNpc0RlcGxveW1lbnRJZCk7XG5cbiAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2VDb25uZWN0b3IgPSAoMCwgX3BhdGNoRGlhbG9nU2VydmljZUNvbm5lY3RvcklubGluZS5kZWZhdWx0KShuZXcgX21pY3Jvc29mdENvZ25pdGl2ZXNlcnZpY2VzU3BlZWNoU2RrLkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IoY29uZmlnLCBhdWRpb0NvbmZpZykpO1xuICAgICAgICAgICAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5jb25uZWN0KCk7IC8vIFJlbmV3IHRva2VuXG5cbiAgICAgICAgICAgIGlmIChhdXRob3JpemF0aW9uVG9rZW4pIHtcbiAgICAgICAgICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChcbiAgICAgICAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICAgICAgICAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKFxuICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICAgIF9yZWdlbmVyYXRvci5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3JlZjQsIGF1dGhvcml6YXRpb25Ub2tlbiwgbmV4dFJlZ2lvbjtcblxuICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGNvbm5lY3RvciBoYXMgYmVlbiBkaXNwb3NlZCwgd2Ugc2hvdWxkIHN0b3AgcmVuZXdpbmcgdGhlIHRva2VuLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogV2Ugc2hvdWxkIHVzZSBhIHB1YmxpYyBpbXBsZW1lbnRhdGlvbiBpZiBTcGVlY2ggU0RLIGhhcyBvbmUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlhbG9nU2VydmljZUNvbm5lY3Rvci5wcml2SXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9yZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlLmRlZmF1bHQpKGZldGNoQ3JlZGVudGlhbHMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlZjQgPSBfY29udGV4dC5zZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvblRva2VuID0gX3JlZjQuYXV0aG9yaXphdGlvblRva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFJlZ2lvbiA9IF9yZWY0LnJlZ2lvbjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhvcml6YXRpb25Ub2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29uc29sZS53YXJuKCdib3RmcmFtZXdvcmstZGlyZWN0bGluZXNwZWVjaC1zZGs6IFJlbmV3IHRva2VuIGZhaWxlZCBiZWNhdXNlIFwiZmV0Y2hDcmVkZW50aWFsc1wiIGNhbGwgcmV0dXJuZWQgbm8gYXV0aG9yaXphdGlvbiB0b2tlbi4nKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWdpb24gIT09IG5leHRSZWdpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29uc29sZS53YXJuKCdib3RmcmFtZXdvcmstZGlyZWN0bGluZXNwZWVjaC1zZGs6IFJlZ2lvbiBjaGFuZ2UgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVuZXdlZCB0b2tlbi4gQXV0aG9yaXphdGlvbiB0b2tlbiBpcyBub3QgcmVuZXdlZC4nKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5hdXRob3JpemF0aW9uVG9rZW4gPSBhdXRob3JpemF0aW9uVG9rZW47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVxdWlyZS1hdG9taWMtdXBkYXRlc1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7XG4gICAgICAgICAgICAgIH0pKSwgVE9LRU5fUkVORVdBTF9JTlRFUlZBTCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRpcmVjdExpbmUgPSBuZXcgX0RpcmVjdExpbmVTcGVlY2guZGVmYXVsdCh7XG4gICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2VDb25uZWN0b3I6IGRpYWxvZ1NlcnZpY2VDb25uZWN0b3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgd2ViU3BlZWNoUG9ueWZpbGxGYWN0b3J5ID0gKDAsIF9jcmVhdGVXZWJTcGVlY2hQb255ZmlsbEZhY3RvcnkuZGVmYXVsdCkoe1xuICAgICAgICAgICAgICBhdWRpb0NvbmZpZzogYXVkaW9Db25maWcsXG4gICAgICAgICAgICAgIGF1ZGlvQ29udGV4dDogYXVkaW9Db250ZXh0LFxuICAgICAgICAgICAgICBlbmFibGVUZWxlbWV0cnk6IGVuYWJsZVRlbGVtZXRyeSxcbiAgICAgICAgICAgICAgcmVjb2duaXplcjogZGlhbG9nU2VydmljZUNvbm5lY3RvcixcbiAgICAgICAgICAgICAgdGV4dE5vcm1hbGl6YXRpb246IHRleHROb3JtYWxpemF0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KFwicmV0dXJuXCIsIHtcbiAgICAgICAgICAgICAgZGlyZWN0TGluZTogZGlyZWN0TGluZSxcbiAgICAgICAgICAgICAgd2ViU3BlZWNoUG9ueWZpbGxGYWN0b3J5OiB3ZWJTcGVlY2hQb255ZmlsbEZhY3RvcnlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY2FzZSAyOTpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIF9jYWxsZWUyKTtcbiAgfSkpO1xuICByZXR1cm4gX2NyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTlqY21WaGRHVkJaR0Z3ZEdWeWN5NXFjeUpkTENKdVlXMWxjeUk2V3lKVVQwdEZUbDlTUlU1RlYwRk1YMGxPVkVWU1ZrRk1JaXdpWTNKbFlYUmxJaXdpWVhWa2FXOURiMjVtYVdjaUxDSmhkV1JwYjBOdmJuUmxlSFFpTENKbGJtRmliR1ZVWld4bGJXVjBjbmtpTENKbVpYUmphRU55WldSbGJuUnBZV3h6SWl3aWMzQmxaV05vVW1WamIyZHVhWFJwYjI1RmJtUndiMmx1ZEVsa0lpd2ljM0JsWldOb1VtVmpiMmR1YVhScGIyNU1ZVzVuZFdGblpTSXNJbmRwYm1SdmR5SXNJbTVoZG1sbllYUnZjaUlzSW14aGJtZDFZV2RsSWl3aWMzQmxaV05vVTNsdWRHaGxjMmx6UkdWd2JHOTViV1Z1ZEVsa0lpd2ljM0JsWldOb1UzbHVkR2hsYzJselQzVjBjSFYwUm05eWJXRjBJaXdpZEdWNGRFNXZjbTFoYkdsNllYUnBiMjRpTENKMWMyVnlTVVFpTENKMWMyVnlibUZ0WlNJc0ltTnZibk52YkdVaUxDSjNZWEp1SWl3aVJYSnliM0lpTENKaGRYUm9iM0pwZW1GMGFXOXVWRzlyWlc0aUxDSnlaV2RwYjI0aUxDSnpkV0p6WTNKcGNIUnBiMjVMWlhraUxDSmpiMjVtYVdjaUxDSkNiM1JHY21GdFpYZHZjbXREYjI1bWFXY2lMQ0ptY205dFFYVjBhRzl5YVhwaGRHbHZibFJ2YTJWdUlpd2labkp2YlZOMVluTmpjbWx3ZEdsdmJpSXNJbk5sZEZCeWIzQmxjblI1SWl3aVVISnZjR1Z5ZEhsSlpDSXNJbE53WldWamFGTmxjblpwWTJWRGIyNXVaV04wYVc5dVgxSmxZMjlNWVc1bmRXRm5aU0lzSWtOdmJuWmxjbk5oZEdsdmJsOUdjbTl0WDBsa0lpd2laR2xoYkc5blUyVnlkbWxqWlVOdmJtNWxZM1J2Y2lJc0lrUnBZV3h2WjFObGNuWnBZMlZEYjI1dVpXTjBiM0lpTENKamIyNXVaV04wSWl3aWFXNTBaWEoyWVd3aUxDSnpaWFJKYm5SbGNuWmhiQ0lzSW5CeWFYWkpjMFJwYzNCdmMyVmtJaXdpWTJ4bFlYSkpiblJsY25aaGJDSXNJbTVsZUhSU1pXZHBiMjRpTENKa2FYSmxZM1JNYVc1bElpd2lSR2x5WldOMFRHbHVaVk53WldWamFDSXNJbmRsWWxOd1pXVmphRkJ2Ym5sbWFXeHNSbUZqZEc5eWVTSXNJbkpsWTI5bmJtbDZaWElpWFN3aWJXRndjR2x1WjNNaU9pSTdPenM3T3pzN096czdPenM3UVVGRlFUczdRVUZGUVRzN1FVRkRRVHM3UVVGRFFUczdRVUZEUVRzN1FVRlFRVHRCUVZOQkxFbEJRVTFCTEhOQ1FVRnpRaXhIUVVGSExFMUJRUzlDT3p0VFFVVTRRa01zVFRzN096czdPenMwUWtGQlpqdEJRVUZCT3p0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRMkpETEZsQlFVRkJMRmRCUkdFc1VVRkRZa0VzVjBGRVlTeEZRVVZpUXl4WlFVWmhMRkZCUldKQkxGbEJSbUVzUlVGSFlrTXNaVUZJWVN4UlFVZGlRU3hsUVVoaExFVkJTV0pETEdkQ1FVcGhMRkZCU1dKQkxHZENRVXBoTEVWQlMySkRMREpDUVV4aExGRkJTMkpCTERKQ1FVeGhMQ3RDUVUxaVF5eDVRa0ZPWVN4RlFVMWlRU3g1UWtGT1lTeHpRMEZOWjBJc1QwRkJUME1zVFVGQlVDeExRVUZyUWl4WFFVRnNRaXhKUVVNelFpeFBRVUZQUVN4TlFVRk5MRU5CUVVORExGTkJRV1FzUzBGQk5FSXNWMEZFUkN4SlFVVXpRa1FzVFVGQlRTeERRVUZEUXl4VFFVRlFMRU5CUVdsQ1F5eFJRVVpUTEVsQlJ6RkNMRTlCVkZjc01FSkJWV0pETERKQ1FWWmhMRkZCVldKQkxESkNRVlpoTEVWQlYySkRMREpDUVZoaExGRkJWMkpCTERKQ1FWaGhMRVZCV1dKRExHbENRVnBoTEZGQldXSkJMR2xDUVZwaExFVkJZV0pETEUxQlltRXNVVUZoWWtFc1RVRmlZU3hGUVdOaVF5eFJRV1JoTEZGQlkySkJMRkZCWkdFN1FVRm5RbUpETEZsQlFVRkJMRTlCUVU4c1EwRkJRME1zU1VGQlVpeERRVUZoTEdsRFFVRmlPenRCUVdoQ1lTeG5Ra0ZyUWxKYUxHZENRV3hDVVR0QlFVRkJPMEZCUVVFN1FVRkJRVHM3UVVGQlFTeHJRa0Z0UWt3c1NVRkJTV0VzUzBGQlNpeERRVUZWTEhWRFFVRldMRU5CYmtKTE96dEJRVUZCTzBGQlFVRTdRVUZCUVN4dFFrRnpRbWxFTERKRFFVRTJRbUlzWjBKQlFUZENMRU5CZEVKcVJEczdRVUZCUVR0QlFVRkJPMEZCYzBKTVl5eFpRVUZCUVN4clFrRjBRa3NzVTBGelFreEJMR3RDUVhSQ1N6dEJRWE5DWlVNc1dVRkJRVUVzVFVGMFFtWXNVMEZ6UW1WQkxFMUJkRUptTzBGQmMwSjFRa01zV1VGQlFVRXNaVUYwUW5aQ0xGTkJjMEoxUWtFc1pVRjBRblpDT3p0QlFVRkJMR3RDUVhsQ1ZpeERRVUZEUml4clFrRkJSQ3hKUVVGMVFpeERRVUZEUlN4bFFVRjZRaXhKUVVORFJpeHJRa0ZCYTBJc1NVRkJTVVVzWlVGRWRrSXNTVUZGUTBZc2EwSkJRV3RDTEVsQlFVa3NUMEZCVDBFc2EwSkJRVkFzUzBGQk9FSXNVVUZHY2tRc1NVRkhRMFVzWlVGQlpTeEpRVUZKTEU5QlFVOUJMR1ZCUVZBc1MwRkJNa0lzVVVFMVFuQkRPMEZCUVVFN1FVRkJRVHRCUVVGQk96dEJRVUZCTEd0Q1FUaENUQ3hKUVVGSlNDeExRVUZLTEVOQlEwb3NOa2RCUkVrc1EwRTVRa3M3TzBGQlFVRTdRVUZ0UTJJc1owSkJRVWtzVDBGQlQyUXNaVUZCVUN4TFFVRXlRaXhYUVVFdlFpeEZRVUUwUXp0QlFVTXhRMWtzWTBGQlFVRXNUMEZCVHl4RFFVRkRReXhKUVVGU0xFTkJRMFVzZFVsQlJFWTdRVUZIUkRzN1FVRjJRMWtzYTBKQmVVTlVMRU5CUVVOSExFMUJRVVFzU1VGQlZ5eFBRVUZQUVN4TlFVRlFMRXRCUVd0Q0xGRkJla053UWp0QlFVRkJPMEZCUVVFN1FVRkJRVHM3UVVGQlFTeHJRa0V3UTB3c1NVRkJTVVlzUzBGQlNpeERRVUZWTEdkRlFVRldMRU5CTVVOTE96dEJRVUZCTzBGQk5rTmlMR2RDUVVGSldpd3lRa0ZCU2l4RlFVRnBRenRCUVVNdlFsVXNZMEZCUVVFc1QwRkJUeXhEUVVGRFF5eEpRVUZTTEVOQlEwVXNaMGhCUkVZN1FVRkhSRHM3UVVGRlJDeG5Ra0ZCU1U0c01rSkJRVW9zUlVGQmFVTTdRVUZETDBKTExHTkJRVUZCTEU5QlFVOHNRMEZCUTBNc1NVRkJVaXhEUVVORkxDdEhRVVJHTzBGQlIwUTdPMEZCUlVRc1owSkJRVWxNTERKQ1FVRktMRVZCUVdsRE8wRkJReTlDU1N4alFVRkJRU3hQUVVGUExFTkJRVU5ETEVsQlFWSXNRMEZEUlN3d1NFRkVSanRCUVVkRU96dEJRVVZFTEdkQ1FVRkpTaXhwUWtGQlNpeEZRVUYxUWp0QlFVTnlRa2NzWTBGQlFVRXNUMEZCVHl4RFFVRkRReXhKUVVGU0xFTkJRMFVzTmtkQlJFWTdRVUZIUkRzN1FVRkZSQ3huUWtGQlNVZ3NUVUZCVFN4SlFVRkpReXhSUVVGa0xFVkJRWGRDTzBGQlEzUkNReXhqUVVGQlFTeFBRVUZQTEVOQlFVTkRMRWxCUVZJc1EwRkRSU3cwUjBGRVJqdEJRVWRFT3p0QlFVbEVMR2RDUVVGSlJTeHJRa0ZCU2l4RlFVRjNRanRCUVVOMFFrY3NZMEZCUVVFc1RVRkJUU3hIUVVGSFF5eDNSRUZCYlVKRExITkNRVUZ1UWl4RFFVRXdRMHdzYTBKQlFURkRMRVZCUVRoRVF5eE5RVUU1UkN4RFFVRlVPMEZCUTBRc1lVRkdSQ3hOUVVWUE8wRkJRMHhGTEdOQlFVRkJMRTFCUVUwc1IwRkJSME1zZDBSQlFXMUNSU3huUWtGQmJrSXNRMEZCYjBOS0xHVkJRWEJETEVWQlFYRkVSQ3hOUVVGeVJDeERRVUZVTzBGQlEwUXNZVUZxUmxrc1EwRnRSbUk3T3p0QlFVVkJSU3haUVVGQlFTeE5RVUZOTEVOQlFVTkpMRmRCUVZBc1EwRkJiVUpETEdkRVFVRlhReXh2UTBGQk9VSXNSVUZCYjBWeVFpeDVRa0ZCY0VVc1JVRnlSbUVzUTBGMVJtSTdRVUZEUVR0QlFVVkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJSVUU3UVVGRFFUczdRVUZEUVU4c1dVRkJRVUVzVFVGQlRTeEpRVUZKVVN4TlFVRk5MRU5CUVVOSkxGZEJRVkFzUTBGQmJVSkRMR2RFUVVGWFJTeHZRa0ZCT1VJc1JVRkJiMFJtTEUxQlFYQkVMRU5CUVZZc1EwRnFSMkVzUTBGdFIySTdRVUZEUVR0QlFVTkJPMEZCUTBFN08wRkJSVTFuUWl4WlFVRkJRU3h6UWtGNFIwOHNSMEYzUjJ0Q0xHZEVRVUZyUXl4SlFVRkpReXd5UkVGQlNpeERRVUV5UWxRc1RVRkJNMElzUlVGQmJVTndRaXhYUVVGdVF5eERRVUZzUXl4RFFYaEhiRUk3UVVFd1IySTBRaXhaUVVGQlFTeHpRa0ZCYzBJc1EwRkJRMFVzVDBGQmRrSXNSMEV4UjJFc1EwRTBSMkk3TzBGQlEwRXNaMEpCUVVsaUxHdENRVUZLTEVWQlFYZENPMEZCUTJoQ1l5eGpRVUZCUVN4UlFVUm5RaXhIUVVOTVF5eFhRVUZYTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc2QwTkJRVU03UVVGQlFUczdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVNelFqdEJRVU5CTzBGQlEwRXNORUpCUVVsS0xITkNRVUZ6UWl4RFFVRkRTeXhqUVVFelFpeEZRVUV5UXp0QlFVTjZRME1zTUVKQlFVRkJMR0ZCUVdFc1EwRkJRMGdzVVVGQlJDeERRVUZpTzBGQlEwUTdPMEZCVERCQ08wRkJRVUVzSzBKQlR6aENMREpEUVVFMlFqVkNMR2RDUVVFM1FpeERRVkE1UWpzN1FVRkJRVHRCUVVGQk8wRkJUMjVDWXl4M1FrRkJRVUVzYTBKQlVHMUNMRk5CVDI1Q1FTeHJRa0ZRYlVJN1FVRlBVMnRDTEhkQ1FVRkJRU3hWUVZCVUxGTkJUME5xUWl4TlFWQkVPenRCUVVGQkxEUkNRVk4wUWtRc2EwSkJWSE5DTzBGQlFVRTdRVUZCUVR0QlFVRkJPenRCUVVGQkxIbEVRVlZzUWtnc1QwRkJUeXhEUVVGRFF5eEpRVUZTTEVOQlEwd3NkMGhCUkVzc1EwRldhMEk3TzBGQlFVRTdRVUZCUVN3NFFrRmxka0pITEUxQlFVMHNTMEZCUzJsQ0xGVkJabGs3UVVGQlFUdEJRVUZCTzBGQlFVRTdPMEZCUVVFc2VVUkJaMEpzUW5KQ0xFOUJRVThzUTBGQlEwTXNTVUZCVWl4RFFVTk1MREJJUVVSTExFTkJhRUpyUWpzN1FVRkJRVHRCUVhGQ00wSmhMSGRDUVVGQlFTeHpRa0ZCYzBJc1EwRkJRMWdzYTBKQlFYWkNMRWRCUVRSRFFTeHJRa0ZCTlVNc1EwRnlRakpDTEVOQmNVSnhRenM3UVVGeVFuSkRPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEdWQlFVUXNTVUZ6UW5wQ2JrSXNjMEpCZEVKNVFpeERRVVJPTzBGQmQwSjJRanM3UVVGRlMzTkRMRmxCUVVGQkxGVkJka2xQTEVkQmRVbE5MRWxCUVVsRExIbENRVUZLTEVOQlFYRkNPMEZCUVVWVUxHTkJRVUZCTEhOQ1FVRnpRaXhGUVVGMFFrRTdRVUZCUml4aFFVRnlRaXhEUVhaSlRqdEJRWGxKVUZVc1dVRkJRVUVzZDBKQmVrbFBMRWRCZVVsdlFpdzJRMEZCSzBJN1FVRkRPVVIwUXl4alFVRkJRU3hYUVVGWExFVkJRVmhCTEZkQlJEaEVPMEZCUlRsRVF5eGpRVUZCUVN4WlFVRlpMRVZCUVZwQkxGbEJSamhFTzBGQlJ6bEVReXhqUVVGQlFTeGxRVUZsTEVWQlFXWkJMR1ZCU0RoRU8wRkJTVGxFY1VNc1kwRkJRVUVzVlVGQlZTeEZRVUZGV0N4elFrRkthMFE3UVVGTE9VUnFRaXhqUVVGQlFTeHBRa0ZCYVVJc1JVRkJha0pCTzBGQlREaEVMR0ZCUVM5Q0xFTkJla2x3UWp0QlFVRkJMRGhEUVdsS1RqdEJRVU5NZVVJc1kwRkJRVUVzVlVGQlZTeEZRVUZXUVN4VlFVUkxPMEZCUlV4RkxHTkJRVUZCTEhkQ1FVRjNRaXhGUVVGNFFrRTdRVUZHU3l4aFFXcEtUVHM3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hISWl3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaUx5b2daWE5zYVc1MElHTnZiWEJzWlhocGRIazZJRnRjSW1WeWNtOXlYQ0lzSURNd1hTQXFMMXh5WEc1Y2NseHVhVzF3YjNKMElIc2dRbTkwUm5KaGJXVjNiM0pyUTI5dVptbG5MQ0JFYVdGc2IyZFRaWEoyYVdObFEyOXVibVZqZEc5eUxDQlFjbTl3WlhKMGVVbGtJSDBnWm5KdmJTQW5iV2xqY205emIyWjBMV052WjI1cGRHbDJaWE5sY25acFkyVnpMWE53WldWamFDMXpaR3NuTzF4eVhHNWNjbHh1YVcxd2IzSjBJR055WldGMFpWZGxZbE53WldWamFGQnZibmxtYVd4c1JtRmpkRzl5ZVNCbWNtOXRJQ2N1TDJOeVpXRjBaVmRsWWxOd1pXVmphRkJ2Ym5sbWFXeHNSbUZqZEc5eWVTYzdYSEpjYm1sdGNHOXlkQ0JFYVhKbFkzUk1hVzVsVTNCbFpXTm9JR1p5YjIwZ0p5NHZSR2x5WldOMFRHbHVaVk53WldWamFDYzdYSEpjYm1sdGNHOXlkQ0J3WVhSamFFUnBZV3h2WjFObGNuWnBZMlZEYjI1dVpXTjBiM0pKYm14cGJtVWdabkp2YlNBbkxpOXdZWFJqYUVScFlXeHZaMU5sY25acFkyVkRiMjV1WldOMGIzSkpibXhwYm1Vbk8xeHlYRzVwYlhCdmNuUWdjbVZ6YjJ4MlpVWjFibU4wYVc5dVQzSlNaWFIxY201V1lXeDFaU0JtY205dElDY3VMM0psYzI5c2RtVkdkVzVqZEdsdmJrOXlVbVYwZFhKdVZtRnNkV1VuTzF4eVhHNWNjbHh1WTI5dWMzUWdWRTlMUlU1ZlVrVk9SVmRCVEY5SlRsUkZVbFpCVENBOUlERXlNREF3TUR0Y2NseHVYSEpjYm1WNGNHOXlkQ0JrWldaaGRXeDBJR0Z6ZVc1aklHWjFibU4wYVc5dUlHTnlaV0YwWlNoN1hISmNiaUFnWVhWa2FXOURiMjVtYVdjc1hISmNiaUFnWVhWa2FXOURiMjUwWlhoMExGeHlYRzRnSUdWdVlXSnNaVlJsYkdWdFpYUnllU3hjY2x4dUlDQm1aWFJqYUVOeVpXUmxiblJwWVd4ekxGeHlYRzRnSUhOd1pXVmphRkpsWTI5bmJtbDBhVzl1Ulc1a2NHOXBiblJKWkN4Y2NseHVJQ0J6Y0dWbFkyaFNaV052WjI1cGRHbHZia3hoYm1kMVlXZGxJRDBnS0hSNWNHVnZaaUIzYVc1a2IzY2dJVDA5SUNkMWJtUmxabWx1WldRbklDWW1YSEpjYmlBZ0lDQjBlWEJsYjJZZ2QybHVaRzkzTG01aGRtbG5ZWFJ2Y2lBaFBUMGdKM1Z1WkdWbWFXNWxaQ2NnSmlaY2NseHVJQ0FnSUhkcGJtUnZkeTV1WVhacFoyRjBiM0l1YkdGdVozVmhaMlVwSUh4OFhISmNiaUFnSUNBblpXNHRWVk1uTEZ4eVhHNGdJSE53WldWamFGTjViblJvWlhOcGMwUmxjR3h2ZVcxbGJuUkpaQ3hjY2x4dUlDQnpjR1ZsWTJoVGVXNTBhR1Z6YVhOUGRYUndkWFJHYjNKdFlYUXNYSEpjYmlBZ2RHVjRkRTV2Y20xaGJHbDZZWFJwYjI0c1hISmNiaUFnZFhObGNrbEVMRnh5WEc0Z0lIVnpaWEp1WVcxbFhISmNibjBwSUh0Y2NseHVJQ0JqYjI1emIyeGxMbmRoY200b0oyUnBjbVZqZEd4cGJtVnpjR1ZsWTJnNklFTjFjM1J2YlNCaWRXbHNaQzRuS1R0Y2NseHVYSEpjYmlBZ2FXWWdLQ0ZtWlhSamFFTnlaV1JsYm5ScFlXeHpLU0I3WEhKY2JpQWdJQ0IwYUhKdmR5QnVaWGNnUlhKeWIzSW9KMXdpWm1WMFkyaERjbVZrWlc1MGFXRnNjMXdpSUcxMWMzUWdZbVVnYzNCbFkybG1hV1ZrTGljcE8xeHlYRzRnSUgxY2NseHVYSEpjYmlBZ1kyOXVjM1FnZXlCaGRYUm9iM0pwZW1GMGFXOXVWRzlyWlc0c0lISmxaMmx2Yml3Z2MzVmljMk55YVhCMGFXOXVTMlY1SUgwZ1BTQmhkMkZwZENCeVpYTnZiSFpsUm5WdVkzUnBiMjVQY2xKbGRIVnlibFpoYkhWbEtHWmxkR05vUTNKbFpHVnVkR2xoYkhNcE8xeHlYRzVjY2x4dUlDQnBaaUFvWEhKY2JpQWdJQ0FvSVdGMWRHaHZjbWw2WVhScGIyNVViMnRsYmlBbUppQWhjM1ZpYzJOeWFYQjBhVzl1UzJWNUtTQjhmRnh5WEc0Z0lDQWdLR0YxZEdodmNtbDZZWFJwYjI1VWIydGxiaUFtSmlCemRXSnpZM0pwY0hScGIyNUxaWGtwSUh4OFhISmNiaUFnSUNBb1lYVjBhRzl5YVhwaGRHbHZibFJ2YTJWdUlDWW1JSFI1Y0dWdlppQmhkWFJvYjNKcGVtRjBhVzl1Vkc5clpXNGdJVDA5SUNkemRISnBibWNuS1NCOGZGeHlYRzRnSUNBZ0tITjFZbk5qY21sd2RHbHZia3RsZVNBbUppQjBlWEJsYjJZZ2MzVmljMk55YVhCMGFXOXVTMlY1SUNFOVBTQW5jM1J5YVc1bkp5bGNjbHh1SUNBcElIdGNjbHh1SUNBZ0lIUm9jbTkzSUc1bGR5QkZjbkp2Y2loY2NseHVJQ0FnSUNBZ0oxd2labVYwWTJoRGNtVmtaVzUwYVdGc2Mxd2lJRzExYzNRZ2NtVjBkWEp1SUdWcGRHaGxjaUJjSW1GMWRHaHZjbWw2WVhScGIyNVViMnRsYmx3aUlHOXlJRndpYzNWaWMyTnlhWEIwYVc5dVMyVjVYQ0lnWVhNZ1lTQnViMjR0Wlcxd2RIa2djM1J5YVc1bklHOXViSGt1SjF4eVhHNGdJQ0FnS1R0Y2NseHVJQ0I5WEhKY2JseHlYRzRnSUdsbUlDaDBlWEJsYjJZZ1pXNWhZbXhsVkdWc1pXMWxkSEo1SUNFOVBTQW5kVzVrWldacGJtVmtKeWtnZTF4eVhHNGdJQ0FnWTI5dWMyOXNaUzUzWVhKdUtGeHlYRzRnSUNBZ0lDQW5ZbTkwWm5KaGJXVjNiM0pyTFdScGNtVmpkR3hwYm1WemNHVmxZMmc2SUZSbGJHVnRaWFJ5ZVNCdmNIUnBiMjV6SUdGeVpTQnViM1FnZVdWMElITjFjSEJ2Y25SbFpDNGdVR3hsWVhObElISmxabVZ5SUhSdklFTnZaMjVwZEdsMlpTQlRaWEoyYVdObGN5QmtiMk4xYldWdWRHRjBhVzl1SUdadmNpQmtaWFJoYVd4ekxpZGNjbHh1SUNBZ0lDazdYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQnBaaUFvSVhKbFoybHZiaUI4ZkNCMGVYQmxiMllnY21WbmFXOXVJQ0U5UFNBbmMzUnlhVzVuSnlrZ2UxeHlYRzRnSUNBZ2RHaHliM2NnYm1WM0lFVnljbTl5S0NkY0ltWmxkR05vUTNKbFpHVnVkR2xoYkhOY0lpQnRkWE4wSUhKbGRIVnliaUJjSW5KbFoybHZibHdpSUdGeklHRWdibTl1TFdWdGNIUjVJSE4wY21sdVp5NG5LVHRjY2x4dUlDQjlYSEpjYmx4eVhHNGdJR2xtSUNoemNHVmxZMmhTWldOdloyNXBkR2x2YmtWdVpIQnZhVzUwU1dRcElIdGNjbHh1SUNBZ0lHTnZibk52YkdVdWQyRnliaWhjY2x4dUlDQWdJQ0FnSjJKdmRHWnlZVzFsZDI5eWF5MWthWEpsWTNSc2FXNWxjM0JsWldOb09pQkRkWE4wYjIwZ1UzQmxaV05vSUdseklHTjFjbkpsYm5Sc2VTQnViM1FnYzNWd2NHOXlkR1ZrT3lCcFoyNXZjbWx1WnlCemNHVmxZMmhTWldOdloyNXBkR2x2YmtWdVpIQnZhVzUwU1dRdUoxeHlYRzRnSUNBZ0tUdGNjbHh1SUNCOVhISmNibHh5WEc0Z0lHbG1JQ2h6Y0dWbFkyaFRlVzUwYUdWemFYTkVaWEJzYjNsdFpXNTBTV1FwSUh0Y2NseHVJQ0FnSUdOdmJuTnZiR1V1ZDJGeWJpaGNjbHh1SUNBZ0lDQWdKMkp2ZEdaeVlXMWxkMjl5YXkxa2FYSmxZM1JzYVc1bGMzQmxaV05vT2lCRGRYTjBiMjBnVm05cFkyVWdhWE1nWTNWeWNtVnVkR3g1SUc1dmRDQnpkWEJ3YjNKMFpXUTdJR2xuYm05eWFXNW5JSE53WldWamFGTjViblJvWlhOcGMwUmxjR3h2ZVcxbGJuUkpaQzRuWEhKY2JpQWdJQ0FwTzF4eVhHNGdJSDFjY2x4dVhISmNiaUFnYVdZZ0tITndaV1ZqYUZONWJuUm9aWE5wYzA5MWRIQjFkRVp2Y20xaGRDa2dlMXh5WEc0Z0lDQWdZMjl1YzI5c1pTNTNZWEp1S0Z4eVhHNGdJQ0FnSUNBblltOTBabkpoYldWM2IzSnJMV1JwY21WamRHeHBibVZ6Y0dWbFkyZzZJRk41Ym5Sb1pYTnBjeUJ2ZFhSd2RYUWdabTl5YldGMElHbHpJR04xY25KbGJuUnNlU0J1YjNRZ2MzVndjRzl5ZEdWa095QnBaMjV2Y21sdVp5QnpjR1ZsWTJoVGVXNTBhR1Z6YVhOUGRYUndkWFJHYjNKdFlYUXVKMXh5WEc0Z0lDQWdLVHRjY2x4dUlDQjlYSEpjYmx4eVhHNGdJR2xtSUNoMFpYaDBUbTl5YldGc2FYcGhkR2x2YmlrZ2UxeHlYRzRnSUNBZ1kyOXVjMjlzWlM1M1lYSnVLRnh5WEc0Z0lDQWdJQ0FuWW05MFpuSmhiV1YzYjNKckxXUnBjbVZqZEd4cGJtVnpjR1ZsWTJnNklGUmxlSFFnYm05eWJXRnNhWHBoZEdsdmJpQnBjeUJqZFhKeVpXNTBiSGtnYm05MElITjFjSEJ2Y25SbFpEc2dhV2R1YjNKcGJtY2dYQ0owWlhoMFRtOXliV0ZzYVhwaGRHbHZibHdpTGlkY2NseHVJQ0FnSUNrN1hISmNiaUFnZlZ4eVhHNWNjbHh1SUNCcFppQW9kWE5sY2tsRUlIeDhJSFZ6WlhKdVlXMWxLU0I3WEhKY2JpQWdJQ0JqYjI1emIyeGxMbmRoY200b1hISmNiaUFnSUNBZ0lDZGliM1JtY21GdFpYZHZjbXN0WkdseVpXTjBiR2x1WlhOd1pXVmphRG9nUTNWemRHOXRJRndpZFhObGNrbGtYQ0lnWVc1a0lGd2lkWE5sY201aGJXVmNJaUJoY21VZ1kzVnljbVZ1ZEd4NUlHNXZkQ0J6ZFhCd2IzSjBaV1FnWVc1a0lHRnlaU0JwWjI1dmNtVmtMaWRjY2x4dUlDQWdJQ2s3WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0JzWlhRZ1kyOXVabWxuTzF4eVhHNWNjbHh1SUNCcFppQW9ZWFYwYUc5eWFYcGhkR2x2YmxSdmEyVnVLU0I3WEhKY2JpQWdJQ0JqYjI1bWFXY2dQU0JDYjNSR2NtRnRaWGR2Y210RGIyNW1hV2N1Wm5KdmJVRjFkR2h2Y21sNllYUnBiMjVVYjJ0bGJpaGhkWFJvYjNKcGVtRjBhVzl1Vkc5clpXNHNJSEpsWjJsdmJpazdYSEpjYmlBZ2ZTQmxiSE5sSUh0Y2NseHVJQ0FnSUdOdmJtWnBaeUE5SUVKdmRFWnlZVzFsZDI5eWEwTnZibVpwWnk1bWNtOXRVM1ZpYzJOeWFYQjBhVzl1S0hOMVluTmpjbWx3ZEdsdmJrdGxlU3dnY21WbmFXOXVLVHRjY2x4dUlDQjlYSEpjYmx4eVhHNGdJQzh2SUZOMWNIQnZjblJsWkNCdmNIUnBiMjV6SUdOaGJpQmlaU0JtYjNWdVpDQnBiaUJFYVdGc2IyZERiMjV1WldOMGIzSkdZV04wYjNKNUxtcHpMbHh5WEc1Y2NseHVJQ0JqYjI1bWFXY3VjMlYwVUhKdmNHVnlkSGtvVUhKdmNHVnlkSGxKWkM1VGNHVmxZMmhUWlhKMmFXTmxRMjl1Ym1WamRHbHZibDlTWldOdlRHRnVaM1ZoWjJVc0lITndaV1ZqYUZKbFkyOW5ibWwwYVc5dVRHRnVaM1ZoWjJVcE8xeHlYRzVjY2x4dUlDQXZMeUJVYUdVZ1ptOXNiRzkzYVc1bklHTnZaR1VnYzJWMElIUm9aU0J2ZFhSd2RYUWdabTl5YldGMExpQkNkWFFnWTNWeWNtVnVkR3g1TENCdWIyNWxJRzltSUhSb1pTQm1iMnhzYjNkcGJtY2dkMjl5YTNNZ1ptOXlJSE5sZEhScGJtY2daR1YwWVdsc1pXUWdiM1YwY0hWMElHWnZjbTFoZEM1Y2NseHVJQ0F2THlCWFpTQjNhV3hzSUd4bFlYWmxJSFJvWlhObElHTnZaR1VnWTI5dGJXVnVkR1ZrSUhWdWRHbHNJSFJvWlNCVGNHVmxZMmdnVTBSTElITjFjSEJ2Y25Rc0lIQnZjM05wWW14NUlHbDBJR2x1SUc5dVpTQnZaaUIwYUdVZ2QyRjVJRzFsYm5ScGIyNWxaQ0JpWld4dmR5NWNjbHh1WEhKY2JpQWdMeThnWTI5dVptbG5Mbk5sZEZCeWIzQmxjblI1S0ZCeWIzQmxjblI1U1dRdVUzQmxaV05vVTJWeWRtbGpaVkpsYzNCdmJuTmxYMDkxZEhCMWRFWnZjbTFoZEU5d2RHbHZiaXdnVDNWMGNIVjBSbTl5YldGMFcwOTFkSEIxZEVadmNtMWhkQzVFWlhSaGFXeGxaRjBwTzF4eVhHNGdJQzh2SUdOdmJtWnBaeTV6WlhSUWNtOXdaWEowZVNoUWNtOXdaWEowZVVsa0xsTndaV1ZqYUZObGNuWnBZMlZTWlhOd2IyNXpaVjlTWlhGMVpYTjBSR1YwWVdsc1pXUlNaWE4xYkhSVWNuVmxSbUZzYzJVc0lIUnlkV1VwTzF4eVhHNGdJQzh2SUdOdmJtWnBaeTV6WlhSUWNtOXdaWEowZVNoUGRYUndkWFJHYjNKdFlYUlFjbTl3WlhKMGVVNWhiV1VzSUU5MWRIQjFkRVp2Y20xaGRGdFBkWFJ3ZFhSR2IzSnRZWFF1UkdWMFlXbHNaV1JkS1R0Y2NseHVJQ0F2THlCamIyNW1hV2N1YzJWMFUyVnlkbWxqWlZCeWIzQmxjblI1S0ZCeWIzQmxjblI1U1dRdVUzQmxaV05vVTJWeWRtbGpaVkpsYzNCdmJuTmxYMUpsY1hWbGMzUkVaWFJoYVd4bFpGSmxjM1ZzZEZSeWRXVkdZV3h6WlN3Z1hDSjBjblZsWENJc0lGTmxjblpwWTJWUWNtOXdaWEowZVVOb1lXNXVaV3d1VlhKcFVYVmxjbmxRWVhKaGJXVjBaWElwTzF4eVhHNWNjbHh1SUNBdkx5QlVhR1VnWm05c2JHOTNhVzVuSUdOdlpHVWdhWE1nWTI5d2FXVmtJR1p5YjIwZ1F5TXNJR2wwSUhOb2IzVnNaQ0J6WlhRZ1puSnZiUzVwWkN3Z1luVjBJR2wwSUdScFpDQnViM1F1WEhKY2JpQWdMeThnYUhSMGNITTZMeTluYVhSb2RXSXVZMjl0TDBGNmRYSmxMVk5oYlhCc1pYTXZRMjluYm1sMGFYWmxMVk5sY25acFkyVnpMVVJwY21WamRDMU1hVzVsTFZOd1pXVmphQzFEYkdsbGJuUXZZbXh2WWk5dFlYTjBaWEl2UkV4VGNHVmxZMmhEYkdsbGJuUXZUV0ZwYmxkcGJtUnZkeTU0WVcxc0xtTnpJMHd5TXpaY2NseHVJQ0IxYzJWeVNVUWdKaVlnWTI5dVptbG5Mbk5sZEZCeWIzQmxjblI1S0ZCeWIzQmxjblI1U1dRdVEyOXVkbVZ5YzJGMGFXOXVYMFp5YjIxZlNXUXNJSFZ6WlhKSlJDazdYSEpjYmx4eVhHNGdJQzh2SUZSb1pTQm1iMnhzYjNkcGJtY2dZMjlrWlNCcGN5QmpiM0JwWldRZ1puSnZiU0JESXl3Z1lXNWtJR2wwSUdseklHNXZkQ0IzYjNKcmFXNW5JSGxsZEM1Y2NseHVJQ0F2THlCb2RIUndjem92TDJkcGRHaDFZaTVqYjIwdlFYcDFjbVV0VTJGdGNHeGxjeTlEYjJkdWFYUnBkbVV0VTJWeWRtbGpaWE10UkdseVpXTjBMVXhwYm1VdFUzQmxaV05vTFVOc2FXVnVkQzlpYkc5aUwyMWhjM1JsY2k5RVRGTndaV1ZqYUVOc2FXVnVkQzlOWVdsdVYybHVaRzkzTG5oaGJXd3VZM05jY2x4dUlDQXZMeUJ6Y0dWbFkyaFNaV052WjI1cGRHbHZia1Z1WkhCdmFXNTBTV1FnSmlZZ1kyOXVabWxuTG5ObGRGTmxjblpwWTJWUWNtOXdaWEowZVNnblkybGtKeXdnYzNCbFpXTm9VbVZqYjJkdWFYUnBiMjVGYm1Sd2IybHVkRWxrTENCVFpYSjJhV05sVUhKdmNHVnlkSGxEYUdGdWJtVnNMbFZ5YVZGMVpYSjVVR0Z5WVcxbGRHVnlLVHRjY2x4dUlDQXZMeUJ6Y0dWbFkyaFRlVzUwYUdWemFYTkVaWEJzYjNsdFpXNTBTV1FnSmlZZ1kyOXVabWxuTG5ObGRGQnliM0JsY25SNUtGQnliM0JsY25SNVNXUXVZMjl1ZG1WeWMyRjBhVzl1WDBOMWMzUnZiVjlXYjJsalpWOUVaWEJzYjNsdFpXNTBYMGxrY3l3Z2MzQmxaV05vVTNsdWRHaGxjMmx6UkdWd2JHOTViV1Z1ZEVsa0tUdGNjbHh1WEhKY2JpQWdZMjl1YzNRZ1pHbGhiRzluVTJWeWRtbGpaVU52Ym01bFkzUnZjaUE5SUhCaGRHTm9SR2xoYkc5blUyVnlkbWxqWlVOdmJtNWxZM1J2Y2tsdWJHbHVaU2h1WlhjZ1JHbGhiRzluVTJWeWRtbGpaVU52Ym01bFkzUnZjaWhqYjI1bWFXY3NJR0YxWkdsdlEyOXVabWxuS1NrN1hISmNibHh5WEc0Z0lHUnBZV3h2WjFObGNuWnBZMlZEYjI1dVpXTjBiM0l1WTI5dWJtVmpkQ2dwTzF4eVhHNWNjbHh1SUNBdkx5QlNaVzVsZHlCMGIydGxibHh5WEc0Z0lHbG1JQ2hoZFhSb2IzSnBlbUYwYVc5dVZHOXJaVzRwSUh0Y2NseHVJQ0FnSUdOdmJuTjBJR2x1ZEdWeWRtRnNJRDBnYzJWMFNXNTBaWEoyWVd3b1lYTjVibU1nS0NrZ1BUNGdlMXh5WEc0Z0lDQWdJQ0F2THlCSlppQjBhR1VnWTI5dWJtVmpkRzl5SUdoaGN5QmlaV1Z1SUdScGMzQnZjMlZrTENCM1pTQnphRzkxYkdRZ2MzUnZjQ0J5Wlc1bGQybHVaeUIwYUdVZ2RHOXJaVzR1WEhKY2JpQWdJQ0FnSUM4dklGUlBSRTg2SUZkbElITm9iM1ZzWkNCMWMyVWdZU0J3ZFdKc2FXTWdhVzF3YkdWdFpXNTBZWFJwYjI0Z2FXWWdVM0JsWldOb0lGTkVTeUJvWVhNZ2IyNWxMbHh5WEc0Z0lDQWdJQ0JwWmlBb1pHbGhiRzluVTJWeWRtbGpaVU52Ym01bFkzUnZjaTV3Y21sMlNYTkVhWE53YjNObFpDa2dlMXh5WEc0Z0lDQWdJQ0FnSUdOc1pXRnlTVzUwWlhKMllXd29hVzUwWlhKMllXd3BPMXh5WEc0Z0lDQWdJQ0I5WEhKY2JseHlYRzRnSUNBZ0lDQmpiMjV6ZENCN0lHRjFkR2h2Y21sNllYUnBiMjVVYjJ0bGJpd2djbVZuYVc5dU9pQnVaWGgwVW1WbmFXOXVJSDBnUFNCaGQyRnBkQ0J5WlhOdmJIWmxSblZ1WTNScGIyNVBjbEpsZEhWeWJsWmhiSFZsS0dabGRHTm9RM0psWkdWdWRHbGhiSE1wTzF4eVhHNWNjbHh1SUNBZ0lDQWdhV1lnS0NGaGRYUm9iM0pwZW1GMGFXOXVWRzlyWlc0cElIdGNjbHh1SUNBZ0lDQWdJQ0J5WlhSMWNtNGdZMjl1YzI5c1pTNTNZWEp1S0Z4eVhHNGdJQ0FnSUNBZ0lDQWdKMkp2ZEdaeVlXMWxkMjl5YXkxa2FYSmxZM1JzYVc1bGMzQmxaV05vTFhOa2F6b2dVbVZ1WlhjZ2RHOXJaVzRnWm1GcGJHVmtJR0psWTJGMWMyVWdYQ0ptWlhSamFFTnlaV1JsYm5ScFlXeHpYQ0lnWTJGc2JDQnlaWFIxY201bFpDQnVieUJoZFhSb2IzSnBlbUYwYVc5dUlIUnZhMlZ1TGlkY2NseHVJQ0FnSUNBZ0lDQXBPMXh5WEc0Z0lDQWdJQ0I5WEhKY2JseHlYRzRnSUNBZ0lDQnBaaUFvY21WbmFXOXVJQ0U5UFNCdVpYaDBVbVZuYVc5dUtTQjdYSEpjYmlBZ0lDQWdJQ0FnY21WMGRYSnVJR052Ym5OdmJHVXVkMkZ5YmloY2NseHVJQ0FnSUNBZ0lDQWdJQ2RpYjNSbWNtRnRaWGR2Y21zdFpHbHlaV04wYkdsdVpYTndaV1ZqYUMxelpHczZJRkpsWjJsdmJpQmphR0Z1WjJVZ2FYTWdibTkwSUhOMWNIQnZjblJsWkNCbWIzSWdjbVZ1WlhkbFpDQjBiMnRsYmk0Z1FYVjBhRzl5YVhwaGRHbHZiaUIwYjJ0bGJpQnBjeUJ1YjNRZ2NtVnVaWGRsWkM0blhISmNiaUFnSUNBZ0lDQWdLVHRjY2x4dUlDQWdJQ0FnZlZ4eVhHNWNjbHh1SUNBZ0lDQWdaR2xoYkc5blUyVnlkbWxqWlVOdmJtNWxZM1J2Y2k1aGRYUm9iM0pwZW1GMGFXOXVWRzlyWlc0Z1BTQmhkWFJvYjNKcGVtRjBhVzl1Vkc5clpXNDdJQzh2SUdWemJHbHVkQzFrYVhOaFlteGxMV3hwYm1VZ2NtVnhkV2x5WlMxaGRHOXRhV010ZFhCa1lYUmxjMXh5WEc0Z0lDQWdmU3dnVkU5TFJVNWZVa1ZPUlZkQlRGOUpUbFJGVWxaQlRDazdYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQmpiMjV6ZENCa2FYSmxZM1JNYVc1bElEMGdibVYzSUVScGNtVmpkRXhwYm1WVGNHVmxZMmdvZXlCa2FXRnNiMmRUWlhKMmFXTmxRMjl1Ym1WamRHOXlJSDBwTzF4eVhHNWNjbHh1SUNCamIyNXpkQ0IzWldKVGNHVmxZMmhRYjI1NVptbHNiRVpoWTNSdmNua2dQU0JqY21WaGRHVlhaV0pUY0dWbFkyaFFiMjU1Wm1sc2JFWmhZM1J2Y25rb2UxeHlYRzRnSUNBZ1lYVmthVzlEYjI1bWFXY3NYSEpjYmlBZ0lDQmhkV1JwYjBOdmJuUmxlSFFzWEhKY2JpQWdJQ0JsYm1GaWJHVlVaV3hsYldWMGNua3NYSEpjYmlBZ0lDQnlaV052WjI1cGVtVnlPaUJrYVdGc2IyZFRaWEoyYVdObFEyOXVibVZqZEc5eUxGeHlYRzRnSUNBZ2RHVjRkRTV2Y20xaGJHbDZZWFJwYjI1Y2NseHVJQ0I5S1R0Y2NseHVYSEpjYmlBZ2NtVjBkWEp1SUh0Y2NseHVJQ0FnSUdScGNtVmpkRXhwYm1Vc1hISmNiaUFnSUNCM1pXSlRjR1ZsWTJoUWIyNTVabWxzYkVaaFkzUnZjbmxjY2x4dUlDQjlPMXh5WEc1OVhISmNiaUpkZlE9PSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gY3JlYXRlRXJyb3JFdmVudDtcblxuZnVuY3Rpb24gY3JlYXRlRXJyb3JFdmVudChlcnJvcikge1xuICB2YXIgZXJyb3JFdmVudCA9IG5ldyBFdmVudCgnZXJyb3InKTtcbiAgZXJyb3JFdmVudC5lcnJvciA9IGVycm9yO1xuICByZXR1cm4gZXJyb3JFdmVudDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklpNHVMM055WXk5amNtVmhkR1ZGY25KdmNrVjJaVzUwTG1weklsMHNJbTVoYldWeklqcGJJbU55WldGMFpVVnljbTl5UlhabGJuUWlMQ0psY25KdmNpSXNJbVZ5Y205eVJYWmxiblFpTENKRmRtVnVkQ0pkTENKdFlYQndhVzVuY3lJNklqczdPenM3T3p0QlFVRmxMRk5CUVZOQkxHZENRVUZVTEVOQlFUQkNReXhMUVVFeFFpeEZRVUZwUXp0QlFVTTVReXhOUVVGTlF5eFZRVUZWTEVkQlFVY3NTVUZCU1VNc1MwRkJTaXhEUVVGVkxFOUJRVllzUTBGQmJrSTdRVUZGUVVRc1JVRkJRVUVzVlVGQlZTeERRVUZEUkN4TFFVRllMRWRCUVcxQ1FTeExRVUZ1UWp0QlFVVkJMRk5CUVU5RExGVkJRVkE3UVVGRFJDSXNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbVY0Y0c5eWRDQmtaV1poZFd4MElHWjFibU4wYVc5dUlHTnlaV0YwWlVWeWNtOXlSWFpsYm5Rb1pYSnliM0lwSUh0Y2NseHVJQ0JqYjI1emRDQmxjbkp2Y2tWMlpXNTBJRDBnYm1WM0lFVjJaVzUwS0NkbGNuSnZjaWNwTzF4eVhHNWNjbHh1SUNCbGNuSnZja1YyWlc1MExtVnljbTl5SUQwZ1pYSnliM0k3WEhKY2JseHlYRzRnSUhKbGRIVnliaUJsY25KdmNrVjJaVzUwTzF4eVhHNTlYSEpjYmlKZGZRPT0iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHRcIik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVUYXNrUXVldWU7XG5cbnZhciBfcmVnZW5lcmF0b3IgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvclwiKSk7XG5cbnZhciBfYXN5bmNUb0dlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3JcIikpO1xuXG52YXIgX3BEZWZlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInAtZGVmZXJcIikpO1xuXG5mdW5jdGlvbiBjcmVhdGVUYXNrUXVldWUoKSB7XG4gIHZhciBxdWV1ZVdpdGhDdXJyZW50ID0gW107XG4gIHZhciBxdWV1ZSA9IHtcbiAgICBjYW5jZWxBbGw6IGZ1bmN0aW9uIGNhbmNlbEFsbCgpIHtcbiAgICAgIHF1ZXVlV2l0aEN1cnJlbnQuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICB2YXIgY2FuY2VsID0gX3JlZi5jYW5jZWw7XG4gICAgICAgIHJldHVybiBjYW5jZWwoKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcHVzaDogZnVuY3Rpb24gcHVzaChmbikge1xuICAgICAgdmFyIGNhbmNlbERlZmVycmVkID0gKDAsIF9wRGVmZXIuZGVmYXVsdCkoKTtcbiAgICAgIHZhciByZXN1bHREZWZlcnJlZCA9ICgwLCBfcERlZmVyLmRlZmF1bHQpKCk7XG4gICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgIHByb21pc2U6IHJlc3VsdERlZmVycmVkLnByb21pc2VcbiAgICAgIH07XG4gICAgICB2YXIgYWJvcnQ7XG5cbiAgICAgIHZhciBjYW5jZWwgPSBlbnRyeS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIE92ZXJyaWRlIHRoZSBcImZuXCIgc28gd2UgZG9uJ3QgY2FsbCB0aGUgYWN0dWFsIFwiZm5cIiBsYXRlci5cbiAgICAgICAgLy8gSW4gdGhpcyBhcHByb2FjaCwgd2UgY2FuIHJldXNlIHRoZSBsb2dpYyBpbnNpZGUgXCJzdGFydFwiIHRvIGhhbmRsZSBwb3N0LWNhbmNlbGxhdGlvbi5cbiAgICAgICAgZm4gPSBmdW5jdGlvbiBmbigpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdWx0OiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ2NhbmNlbGxlZCBiZWZvcmUgc3RhcnQnKSlcbiAgICAgICAgICB9O1xuICAgICAgICB9OyAvLyBBYm9ydCB0aGUgdGFzayBpZiBpdCBpcyBjdXJyZW50bHkgcnVubmluZy5cblxuXG4gICAgICAgIGFib3J0ICYmIGFib3J0KCk7XG4gICAgICAgIGNhbmNlbERlZmVycmVkLnJlamVjdChuZXcgRXJyb3IoJ2NhbmNlbGxlZCBpbiB0aGUgbWlkd2F5JykpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHN0YXJ0ID1cbiAgICAgIC8qI19fUFVSRV9fKi9cbiAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9yZWYyID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KShcbiAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICBfcmVnZW5lcmF0b3IuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgICAgICAgdmFyIF9mbiwgYWJvcnRGbiwgcmVzdWx0O1xuXG4gICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvci5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICBfZm4gPSBmbigpLCBhYm9ydEZuID0gX2ZuLmFib3J0LCByZXN1bHQgPSBfZm4ucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgYWJvcnQgPSBhYm9ydEZuO1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IHJlc3VsdERlZmVycmVkO1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtyZXN1bHQsIGNhbmNlbERlZmVycmVkLnByb21pc2VdKTtcblxuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHQuc2VudDtcblxuICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAucmVzb2x2ZS5jYWxsKF9jb250ZXh0LnQwLCBfY29udGV4dC50MSk7XG5cbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMztcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMDtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnQyID0gX2NvbnRleHRbXCJjYXRjaFwiXSgyKTtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdERlZmVycmVkLnJlamVjdChfY29udGV4dC50Mik7XG5cbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgcXVldWVXaXRoQ3VycmVudCA9IHF1ZXVlV2l0aEN1cnJlbnQuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlICE9PSBlbnRyeTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCAxMF1dKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0oKTtcblxuICAgICAgdmFyIGxhc3RFbnRyeSA9IHF1ZXVlV2l0aEN1cnJlbnRbcXVldWVXaXRoQ3VycmVudC5sZW5ndGggLSAxXTtcbiAgICAgIHZhciBsYXN0UHJvbWlzZSA9IGxhc3RFbnRyeSAmJiBsYXN0RW50cnkucHJvbWlzZSB8fCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIHF1ZXVlV2l0aEN1cnJlbnQucHVzaChlbnRyeSk7IC8vIEFmdGVyIHRoZSBsYXN0IHByb21pc2UgcmVzb2x2ZWQvcmVqZWN0ZWQsIHdlIHdpbGwgc3RhcnQgdGhpcyB0YXNrLlxuICAgICAgLy8gV2Ugd2lsbCBzdGFydCBldmVuIGlmIHRoZSBsYXN0IHByb21pc2UgcmVqZWN0ZWQuXG5cbiAgICAgIGxhc3RQcm9taXNlLnRoZW4oc3RhcnQsIHN0YXJ0KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNhbmNlbDogY2FuY2VsLFxuICAgICAgICByZXN1bHQ6IHJlc3VsdERlZmVycmVkLnByb21pc2VcbiAgICAgIH07XG4gICAgfVxuICB9O1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocXVldWUsICdsZW5ndGgnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gcXVldWVXaXRoQ3VycmVudC5sZW5ndGg7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHF1ZXVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTlqY21WaGRHVlVZWE5yVVhWbGRXVXVhbk1pWFN3aWJtRnRaWE1pT2xzaVkzSmxZWFJsVkdGemExRjFaWFZsSWl3aWNYVmxkV1ZYYVhSb1EzVnljbVZ1ZENJc0luRjFaWFZsSWl3aVkyRnVZMlZzUVd4c0lpd2labTl5UldGamFDSXNJbU5oYm1ObGJDSXNJbkIxYzJnaUxDSm1iaUlzSW1OaGJtTmxiRVJsWm1WeWNtVmtJaXdpY21WemRXeDBSR1ZtWlhKeVpXUWlMQ0psYm5SeWVTSXNJbkJ5YjIxcGMyVWlMQ0poWW05eWRDSXNJbkpsYzNWc2RDSXNJbEJ5YjIxcGMyVWlMQ0p5WldwbFkzUWlMQ0pGY25KdmNpSXNJbk4wWVhKMElpd2lZV0p2Y25SR2JpSXNJbkpoWTJVaUxDSnlaWE52YkhabElpd2labWxzZEdWeUlpd2laU0lzSW14aGMzUkZiblJ5ZVNJc0lteGxibWQwYUNJc0lteGhjM1JRY205dGFYTmxJaXdpZEdobGJpSXNJazlpYW1WamRDSXNJbVJsWm1sdVpWQnliM0JsY25SNUlpd2laMlYwSWwwc0ltMWhjSEJwYm1keklqb2lPenM3T3pzN096czdPenM3TzBGQlFVRTdPMEZCUldVc1UwRkJVMEVzWlVGQlZDeEhRVUV5UWp0QlFVTjRReXhOUVVGSlF5eG5Ra0ZCWjBJc1IwRkJSeXhGUVVGMlFqdEJRVVZCTEUxQlFVMURMRXRCUVVzc1IwRkJSenRCUVVOYVF5eEpRVUZCUVN4VFFVRlRMRVZCUVVVc2NVSkJRVTA3UVVGRFprWXNUVUZCUVVFc1owSkJRV2RDTEVOQlFVTkhMRTlCUVdwQ0xFTkJRWGxDTzBGQlFVRXNXVUZCUjBNc1RVRkJTQ3hSUVVGSFFTeE5RVUZJTzBGQlFVRXNaVUZCWjBKQkxFMUJRVTBzUlVGQmRFSTdRVUZCUVN4UFFVRjZRanRCUVVORUxFdEJTRmM3UVVGSldrTXNTVUZCUVVFc1NVRkJTU3hGUVVGRkxHTkJRVUZETEVWQlFVVXNSVUZCU1R0QlFVTldMRlZCUVUxRExHTkJRV01zUjBGQlJ5eHpRa0ZCZGtJN1FVRkRRU3hWUVVGTlF5eGpRVUZqTEVkQlFVY3NjMEpCUVhaQ08wRkJRMEVzVlVGQlRVTXNTMEZCU3l4SFFVRkhPMEZCUVVWRExGRkJRVUZCTEU5QlFVOHNSVUZCUlVZc1kwRkJZeXhEUVVGRFJUdEJRVUV4UWl4UFFVRmtPMEZCUTBFc1ZVRkJTVU1zUzBGQlNqczdRVUZGUVN4VlFVRk5VQ3hOUVVGTkxFZEJRVWxMTEV0QlFVc3NRMEZCUTB3c1RVRkJUaXhIUVVGbExGbEJRVTA3UVVGRGJrTTdRVUZEUVR0QlFVTkJSU3hSUVVGQlFTeEZRVUZGTEVkQlFVYzdRVUZCUVN4cFFrRkJUenRCUVVGRlRTeFpRVUZCUVN4TlFVRk5MRVZCUVVWRExFOUJRVThzUTBGQlEwTXNUVUZCVWl4RFFVRmxMRWxCUVVsRExFdEJRVW9zUTBGQlZTeDNRa0ZCVml4RFFVRm1PMEZCUVZZc1YwRkJVRHRCUVVGQkxGTkJRVXdzUTBGSWJVTXNRMEZMYmtNN096dEJRVU5CU2l4UlFVRkJRU3hMUVVGTExFbEJRVWxCTEV0QlFVc3NSVUZCWkR0QlFVTkJTaXhSUVVGQlFTeGpRVUZqTEVOQlFVTlBMRTFCUVdZc1EwRkJjMElzU1VGQlNVTXNTMEZCU2l4RFFVRlZMSGxDUVVGV0xFTkJRWFJDTzBGQlEwUXNUMEZTUkRzN1FVRlZRU3hWUVVGTlF5eExRVUZMTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hyUTBGQlJ6dEJRVUZCT3p0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzZDBKQlEzVkNWaXhGUVVGRkxFVkJSSHBDTEVWQlEwZFhMRTlCUkVnc1QwRkRTazRzUzBGRVNTeEZRVU5aUXl4TlFVUmFMRTlCUTFsQkxFMUJSRm83UVVGSFdrUXNhMEpCUVVGQkxFdEJRVXNzUjBGQlIwMHNUMEZCVWp0QlFVaFpPMEZCUVVFc1owTkJUMVpVTEdOQlVGVTdRVUZCUVR0QlFVRkJMSGxDUVU5dFFrc3NUMEZCVHl4RFFVRkRTeXhKUVVGU0xFTkJRV0VzUTBGQlEwNHNUVUZCUkN4RlFVRlRUQ3hqUVVGakxFTkJRVU5ITEU5QlFYaENMRU5CUVdJc1EwRlFia0k3TzBGQlFVRTdRVUZCUVRzN1FVRkJRU3c0UWtGUFMxTXNUMEZRVERzN1FVRkJRVHRCUVVGQk96dEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFWTldXQ3hyUWtGQlFVRXNZMEZCWXl4RFFVRkRUU3hOUVVGbU96dEJRVlJWTzBGQldWcGtMR3RDUVVGQlFTeG5Ra0ZCWjBJc1IwRkJSMEVzWjBKQlFXZENMRU5CUVVOdlFpeE5RVUZxUWl4RFFVRjNRaXhWUVVGQlF5eERRVUZETzBGQlFVRXNNa0pCUVVsQkxFTkJRVU1zUzBGQlMxb3NTMEZCVmp0QlFVRkJMRzFDUVVGNlFpeERRVUZ1UWpzN1FVRmFXVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4VFFVRklPenRCUVVGQkxIZENRVUZNVHl4TFFVRkxPMEZCUVVFN1FVRkJRVHRCUVVGQkxGTkJRVmc3TzBGQlpVRXNWVUZCVFUwc1UwRkJVeXhIUVVGSGRFSXNaMEpCUVdkQ0xFTkJRVU5CTEdkQ1FVRm5RaXhEUVVGRGRVSXNUVUZCYWtJc1IwRkJNRUlzUTBGQk0wSXNRMEZCYkVNN1FVRkRRU3hWUVVGTlF5eFhRVUZYTEVkQlFVbEdMRk5CUVZNc1NVRkJTVUVzVTBGQlV5eERRVUZEV2l4UFFVRjRRaXhKUVVGdlEwY3NUMEZCVHl4RFFVRkRUU3hQUVVGU0xFVkJRWGhFTzBGQlJVRnVRaXhOUVVGQlFTeG5Ra0ZCWjBJc1EwRkJRMHNzU1VGQmFrSXNRMEZCYzBKSkxFdEJRWFJDTEVWQmJFTlZMRU5CYjBOV08wRkJRMEU3TzBGQlEwRmxMRTFCUVVGQkxGZEJRVmNzUTBGQlEwTXNTVUZCV2l4RFFVRnBRbFFzUzBGQmFrSXNSVUZCZDBKQkxFdEJRWGhDTzBGQlJVRXNZVUZCVHp0QlFVTk1XaXhSUVVGQlFTeE5RVUZOTEVWQlFVNUJMRTFCUkVzN1FVRkZURkVzVVVGQlFVRXNUVUZCVFN4RlFVRkZTaXhqUVVGakxFTkJRVU5GTzBGQlJteENMRTlCUVZBN1FVRkpSRHRCUVdoRVZ5eEhRVUZrTzBGQmJVUkJaMElzUlVGQlFVRXNUVUZCVFN4RFFVRkRReXhqUVVGUUxFTkJRWE5DTVVJc1MwRkJkRUlzUlVGQk5rSXNVVUZCTjBJc1JVRkJkVU03UVVGQlJUSkNMRWxCUVVGQkxFZEJRVWNzUlVGQlJUdEJRVUZCTEdGQlFVMDFRaXhuUWtGQlowSXNRMEZCUTNWQ0xFMUJRWFpDTzBGQlFVRTdRVUZCVUN4SFFVRjJRenRCUVVWQkxGTkJRVTkwUWl4TFFVRlFPMEZCUTBRaUxDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SnBiWEJ2Y25RZ1kzSmxZWFJsUkdWbVpYSnlaV1FnWm5KdmJTQW5jQzFrWldabGNpYzdYSEpjYmx4eVhHNWxlSEJ2Y25RZ1pHVm1ZWFZzZENCbWRXNWpkR2x2YmlCamNtVmhkR1ZVWVhOclVYVmxkV1VvS1NCN1hISmNiaUFnYkdWMElIRjFaWFZsVjJsMGFFTjFjbkpsYm5RZ1BTQmJYVHRjY2x4dVhISmNiaUFnWTI5dWMzUWdjWFZsZFdVZ1BTQjdYSEpjYmlBZ0lDQmpZVzVqWld4QmJHdzZJQ2dwSUQwK0lIdGNjbHh1SUNBZ0lDQWdjWFZsZFdWWGFYUm9RM1Z5Y21WdWRDNW1iM0pGWVdOb0tDaDdJR05oYm1ObGJDQjlLU0E5UGlCallXNWpaV3dvS1NrN1hISmNiaUFnSUNCOUxGeHlYRzRnSUNBZ2NIVnphRG9nWm00Z1BUNGdlMXh5WEc0Z0lDQWdJQ0JqYjI1emRDQmpZVzVqWld4RVpXWmxjbkpsWkNBOUlHTnlaV0YwWlVSbFptVnljbVZrS0NrN1hISmNiaUFnSUNBZ0lHTnZibk4wSUhKbGMzVnNkRVJsWm1WeWNtVmtJRDBnWTNKbFlYUmxSR1ZtWlhKeVpXUW9LVHRjY2x4dUlDQWdJQ0FnWTI5dWMzUWdaVzUwY25rZ1BTQjdJSEJ5YjIxcGMyVTZJSEpsYzNWc2RFUmxabVZ5Y21Wa0xuQnliMjFwYzJVZ2ZUdGNjbHh1SUNBZ0lDQWdiR1YwSUdGaWIzSjBPMXh5WEc1Y2NseHVJQ0FnSUNBZ1kyOXVjM1FnWTJGdVkyVnNJRDBnS0dWdWRISjVMbU5oYm1ObGJDQTlJQ2dwSUQwK0lIdGNjbHh1SUNBZ0lDQWdJQ0F2THlCUGRtVnljbWxrWlNCMGFHVWdYQ0ptYmx3aUlITnZJSGRsSUdSdmJpZDBJR05oYkd3Z2RHaGxJR0ZqZEhWaGJDQmNJbVp1WENJZ2JHRjBaWEl1WEhKY2JpQWdJQ0FnSUNBZ0x5OGdTVzRnZEdocGN5QmhjSEJ5YjJGamFDd2dkMlVnWTJGdUlISmxkWE5sSUhSb1pTQnNiMmRwWXlCcGJuTnBaR1VnWENKemRHRnlkRndpSUhSdklHaGhibVJzWlNCd2IzTjBMV05oYm1ObGJHeGhkR2x2Ymk1Y2NseHVJQ0FnSUNBZ0lDQm1iaUE5SUNncElEMCtJQ2g3SUhKbGMzVnNkRG9nVUhKdmJXbHpaUzV5WldwbFkzUW9ibVYzSUVWeWNtOXlLQ2RqWVc1alpXeHNaV1FnWW1WbWIzSmxJSE4wWVhKMEp5a3BJSDBwTzF4eVhHNWNjbHh1SUNBZ0lDQWdJQ0F2THlCQlltOXlkQ0IwYUdVZ2RHRnpheUJwWmlCcGRDQnBjeUJqZFhKeVpXNTBiSGtnY25WdWJtbHVaeTVjY2x4dUlDQWdJQ0FnSUNCaFltOXlkQ0FtSmlCaFltOXlkQ2dwTzF4eVhHNGdJQ0FnSUNBZ0lHTmhibU5sYkVSbFptVnljbVZrTG5KbGFtVmpkQ2h1WlhjZ1JYSnliM0lvSjJOaGJtTmxiR3hsWkNCcGJpQjBhR1VnYldsa2QyRjVKeWtwTzF4eVhHNGdJQ0FnSUNCOUtUdGNjbHh1WEhKY2JpQWdJQ0FnSUdOdmJuTjBJSE4wWVhKMElEMGdZWE41Ym1NZ0tDa2dQVDRnZTF4eVhHNGdJQ0FnSUNBZ0lHTnZibk4wSUhzZ1lXSnZjblE2SUdGaWIzSjBSbTRzSUhKbGMzVnNkQ0I5SUQwZ1ptNG9LVHRjY2x4dVhISmNiaUFnSUNBZ0lDQWdZV0p2Y25RZ1BTQmhZbTl5ZEVadU8xeHlYRzVjY2x4dUlDQWdJQ0FnSUNCMGNua2dlMXh5WEc0Z0lDQWdJQ0FnSUNBZ0x5OGdSV2wwYUdWeUlIZGhhWFFnWm05eUlIUm9aU0JoWTNSMVlXd2djbVZ6ZFd4MExDQnZjaUIwYUdVZ2RHRnpheUJwY3lCaVpXbHVaeUJqWVc1alpXeHNaV1F1WEhKY2JpQWdJQ0FnSUNBZ0lDQnlaWE4xYkhSRVpXWmxjbkpsWkM1eVpYTnZiSFpsS0dGM1lXbDBJRkJ5YjIxcGMyVXVjbUZqWlNoYmNtVnpkV3gwTENCallXNWpaV3hFWldabGNuSmxaQzV3Y205dGFYTmxYU2twTzF4eVhHNGdJQ0FnSUNBZ0lIMGdZMkYwWTJnZ0tHVnljbTl5S1NCN1hISmNiaUFnSUNBZ0lDQWdJQ0J5WlhOMWJIUkVaV1psY25KbFpDNXlaV3BsWTNRb1pYSnliM0lwTzF4eVhHNGdJQ0FnSUNBZ0lIMWNjbHh1WEhKY2JpQWdJQ0FnSUNBZ2NYVmxkV1ZYYVhSb1EzVnljbVZ1ZENBOUlIRjFaWFZsVjJsMGFFTjFjbkpsYm5RdVptbHNkR1Z5S0dVZ1BUNGdaU0FoUFQwZ1pXNTBjbmtwTzF4eVhHNGdJQ0FnSUNCOU8xeHlYRzVjY2x4dUlDQWdJQ0FnWTI5dWMzUWdiR0Z6ZEVWdWRISjVJRDBnY1hWbGRXVlhhWFJvUTNWeWNtVnVkRnR4ZFdWMVpWZHBkR2hEZFhKeVpXNTBMbXhsYm1kMGFDQXRJREZkTzF4eVhHNGdJQ0FnSUNCamIyNXpkQ0JzWVhOMFVISnZiV2x6WlNBOUlDaHNZWE4wUlc1MGNua2dKaVlnYkdGemRFVnVkSEo1TG5CeWIyMXBjMlVwSUh4OElGQnliMjFwYzJVdWNtVnpiMngyWlNncE8xeHlYRzVjY2x4dUlDQWdJQ0FnY1hWbGRXVlhhWFJvUTNWeWNtVnVkQzV3ZFhOb0tHVnVkSEo1S1R0Y2NseHVYSEpjYmlBZ0lDQWdJQzh2SUVGbWRHVnlJSFJvWlNCc1lYTjBJSEJ5YjIxcGMyVWdjbVZ6YjJ4MlpXUXZjbVZxWldOMFpXUXNJSGRsSUhkcGJHd2djM1JoY25RZ2RHaHBjeUIwWVhOckxseHlYRzRnSUNBZ0lDQXZMeUJYWlNCM2FXeHNJSE4wWVhKMElHVjJaVzRnYVdZZ2RHaGxJR3hoYzNRZ2NISnZiV2x6WlNCeVpXcGxZM1JsWkM1Y2NseHVJQ0FnSUNBZ2JHRnpkRkJ5YjIxcGMyVXVkR2hsYmloemRHRnlkQ3dnYzNSaGNuUXBPMXh5WEc1Y2NseHVJQ0FnSUNBZ2NtVjBkWEp1SUh0Y2NseHVJQ0FnSUNBZ0lDQmpZVzVqWld3c1hISmNiaUFnSUNBZ0lDQWdjbVZ6ZFd4ME9pQnlaWE4xYkhSRVpXWmxjbkpsWkM1d2NtOXRhWE5sWEhKY2JpQWdJQ0FnSUgwN1hISmNiaUFnSUNCOVhISmNiaUFnZlR0Y2NseHVYSEpjYmlBZ1QySnFaV04wTG1SbFptbHVaVkJ5YjNCbGNuUjVLSEYxWlhWbExDQW5iR1Z1WjNSb0p5d2dleUJuWlhRNklDZ3BJRDArSUhGMVpYVmxWMmwwYUVOMWNuSmxiblF1YkdWdVozUm9JSDBwTzF4eVhHNWNjbHh1SUNCeVpYUjFjbTRnY1hWbGRXVTdYSEpjYm4xY2NseHVJbDE5IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlV2lsZGNhcmRcIik7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG5cbnZhciBfcmVnZW5lcmF0b3IgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvclwiKSk7XG5cbnZhciBfYXN5bmNUb0dlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3JcIikpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIikpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3NcIikpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuXCIpKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mXCIpKTtcblxudmFyIF9pbmhlcml0czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzXCIpKTtcblxudmFyIF9taWNyb3NvZnRDb2duaXRpdmVzZXJ2aWNlc1NwZWVjaFNkayA9IHJlcXVpcmUoXCJtaWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNka1wiKTtcblxudmFyIF9TcGVlY2hUb1RleHQgPSByZXF1aXJlKFwid2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXMvbGliL1NwZWVjaFNlcnZpY2VzL1NwZWVjaFRvVGV4dFwiKTtcblxudmFyIF9hYm9ydENvbnRyb2xsZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJhYm9ydC1jb250cm9sbGVyXCIpKTtcblxudmFyIF9jcmVhdGVFcnJvckV2ZW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9jcmVhdGVFcnJvckV2ZW50XCIpKTtcblxudmFyIF9jcmVhdGVUYXNrUXVldWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9jcmVhdGVUYXNrUXVldWVcIikpO1xuXG52YXIgX2V2ZW50VGFyZ2V0U2hpbSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCIuL2V4dGVybmFsL2V2ZW50LXRhcmdldC1zaGltXCIpKTtcblxudmFyIF9wbGF5Q29nbml0aXZlU2VydmljZXNTdHJlYW0gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3BsYXlDb2duaXRpdmVTZXJ2aWNlc1N0cmVhbVwiKSk7XG5cbnZhciBfcGxheVdoaXRlTm9pc2UgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3BsYXlXaGl0ZU5vaXNlXCIpKTtcblxudmFyIF9TcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2VcIikpO1xuXG4vKiBlc2xpbnQgY2xhc3MtbWV0aG9kcy11c2UtdGhpczogW1wiZXJyb3JcIiwgeyBcImV4Y2VwdE1ldGhvZHNcIjogW1wiY2FuY2VsXCIsIFwiZ2V0Vm9pY2VzXCIsIFwic3BlYWtcIl0gfV0gKi9cbmZ1bmN0aW9uIF9kZWZhdWx0KF9yZWYpIHtcbiAgdmFyIF9yZWYkYXVkaW9Db25maWcgPSBfcmVmLmF1ZGlvQ29uZmlnLFxuICAgICAgYXVkaW9Db25maWcgPSBfcmVmJGF1ZGlvQ29uZmlnID09PSB2b2lkIDAgPyBfbWljcm9zb2Z0Q29nbml0aXZlc2VydmljZXNTcGVlY2hTZGsuQXVkaW9Db25maWcuZnJvbURlZmF1bHRNaWNyb3Bob25lSW5wdXQoKSA6IF9yZWYkYXVkaW9Db25maWcsXG4gICAgICBhdWRpb0NvbnRleHQgPSBfcmVmLmF1ZGlvQ29udGV4dCxcbiAgICAgIGVuYWJsZVRlbGVtZXRyeSA9IF9yZWYuZW5hYmxlVGVsZW1ldHJ5LFxuICAgICAgX3JlZiRwb255ZmlsbCA9IF9yZWYucG9ueWZpbGwsXG4gICAgICBwb255ZmlsbCA9IF9yZWYkcG9ueWZpbGwgPT09IHZvaWQgMCA/IHtcbiAgICBBdWRpb0NvbnRleHQ6IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dFxuICB9IDogX3JlZiRwb255ZmlsbCxcbiAgICAgIHJlY29nbml6ZXIgPSBfcmVmLnJlY29nbml6ZXIsXG4gICAgICB0ZXh0Tm9ybWFsaXphdGlvbiA9IF9yZWYudGV4dE5vcm1hbGl6YXRpb247XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9jcmVhdGVTcGVlY2hSZWNvZ25pdCA9ICgwLCBfU3BlZWNoVG9UZXh0LmNyZWF0ZVNwZWVjaFJlY29nbml0aW9uUG9ueWZpbGxGcm9tUmVjb2duaXplcikoe1xuICAgICAgYXVkaW9Db25maWc6IGF1ZGlvQ29uZmlnLFxuICAgICAgY3JlYXRlUmVjb2duaXplcjogZnVuY3Rpb24gY3JlYXRlUmVjb2duaXplcigpIHtcbiAgICAgICAgcmV0dXJuIHJlY29nbml6ZXI7XG4gICAgICB9LFxuICAgICAgZW5hYmxlVGVsZW1ldHJ5OiBlbmFibGVUZWxlbWV0cnksXG4gICAgICBsb29zZUV2ZW50czogdHJ1ZSxcbiAgICAgIHRleHROb3JtYWxpemF0aW9uOiB0ZXh0Tm9ybWFsaXphdGlvblxuICAgIH0pLFxuICAgICAgICBTcGVlY2hHcmFtbWFyTGlzdCA9IF9jcmVhdGVTcGVlY2hSZWNvZ25pdC5TcGVlY2hHcmFtbWFyTGlzdCxcbiAgICAgICAgU3BlZWNoUmVjb2duaXRpb24gPSBfY3JlYXRlU3BlZWNoUmVjb2duaXQuU3BlZWNoUmVjb2duaXRpb247XG5cbiAgICBpZiAoIWF1ZGlvQ29udGV4dCkge1xuICAgICAgYXVkaW9Db250ZXh0ID0gbmV3IHBvbnlmaWxsLkF1ZGlvQ29udGV4dCgpO1xuICAgIH1cblxuICAgIHZhciBfY3JlYXRlVGFza1F1ZXVlID0gKDAsIF9jcmVhdGVUYXNrUXVldWUyLmRlZmF1bHQpKCksXG4gICAgICAgIGNhbmNlbEFsbCA9IF9jcmVhdGVUYXNrUXVldWUuY2FuY2VsQWxsLFxuICAgICAgICBwdXNoID0gX2NyZWF0ZVRhc2tRdWV1ZS5wdXNoO1xuXG4gICAgdmFyIFNwZWVjaFN5bnRoZXNpcyA9XG4gICAgLyojX19QVVJFX18qL1xuICAgIGZ1bmN0aW9uIChfRXZlbnRUYXJnZXRTaGltKSB7XG4gICAgICAoMCwgX2luaGVyaXRzMi5kZWZhdWx0KShTcGVlY2hTeW50aGVzaXMsIF9FdmVudFRhcmdldFNoaW0pO1xuXG4gICAgICBmdW5jdGlvbiBTcGVlY2hTeW50aGVzaXMoKSB7XG4gICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIFNwZWVjaFN5bnRoZXNpcyk7XG4gICAgICAgIHJldHVybiAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yLmRlZmF1bHQpKHRoaXMsICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKFNwZWVjaFN5bnRoZXNpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgICB9XG5cbiAgICAgICgwLCBfY3JlYXRlQ2xhc3MyLmRlZmF1bHQpKFNwZWVjaFN5bnRoZXNpcywgW3tcbiAgICAgICAga2V5OiBcImNhbmNlbFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgICAgICAgIGNhbmNlbEFsbCgpO1xuICAgICAgICB9IC8vIFJldHVybnMgYW4gZW1wdHkgYXJyYXkuXG4gICAgICAgIC8vIFN5bnRoZXNpcyBpcyBkb25lIG9uIHRoZSBib3Qgc2lkZSwgdGhlIGNvbnRlbnQgb2YgdGhlIHZvaWNlIGxpc3QgaXMgbm90IG1lYW5pbmdmdWwgb24gdGhlIGNsaWVudCBzaWRlLlxuXG4gICAgICB9LCB7XG4gICAgICAgIGtleTogXCJnZXRWb2ljZXNcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZvaWNlcygpIHtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH0sIHtcbiAgICAgICAga2V5OiBcInNwZWFrXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzcGVhayh1dHRlcmFuY2UpIHtcbiAgICAgICAgICB2YXIgX3B1c2ggPSBwdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gbmV3IF9hYm9ydENvbnRyb2xsZXIuZGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHNpZ25hbCA9IGNvbnRyb2xsZXIuc2lnbmFsO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgYWJvcnQ6IGNvbnRyb2xsZXIuYWJvcnQuYmluZChjb250cm9sbGVyKSxcbiAgICAgICAgICAgICAgcmVzdWx0OiAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKFxuICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgICAgICAgIF9yZWdlbmVyYXRvci5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3V0dGVyYW5jZSRhdWRpb1N0cmVhLCBmb3JtYXQsIHN0cmVhbVJlYWRlcjtcblxuICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXR0ZXJhbmNlLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdzdGFydCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXV0dGVyYW5jZS5hdWRpb1N0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF91dHRlcmFuY2UkYXVkaW9TdHJlYSA9IHV0dGVyYW5jZS5hdWRpb1N0cmVhbSwgZm9ybWF0ID0gX3V0dGVyYW5jZSRhdWRpb1N0cmVhLmZvcm1hdCwgc3RyZWFtUmVhZGVyID0gX3V0dGVyYW5jZSRhdWRpb1N0cmVhLnN0cmVhbVJlYWRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfcGxheUNvZ25pdGl2ZVNlcnZpY2VzU3RyZWFtLmRlZmF1bHQpKGF1ZGlvQ29udGV4dCwgZm9ybWF0LCBzdHJlYW1SZWFkZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBzaWduYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9wbGF5V2hpdGVOb2lzZS5kZWZhdWx0KShhdWRpb0NvbnRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbXCJjYXRjaFwiXSgxKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2NvbnRleHQudDAubWVzc2FnZSAhPT0gJ2Fib3J0ZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIHV0dGVyYW5jZS5kaXNwYXRjaEV2ZW50KCgwLCBfY3JlYXRlRXJyb3JFdmVudC5kZWZhdWx0KShfY29udGV4dC50MCkpKTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICAgICAgICAgICAgICB1dHRlcmFuY2UuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2VuZCcpKTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTJdXSk7XG4gICAgICAgICAgICAgIH0pKSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICByZXN1bHQgPSBfcHVzaC5yZXN1bHQ7IC8vIENhdGNoaW5nIHRoZSBlcnJvciB0byBwcmV2ZW50IHVuY2F1Z2h0IHByb21pc2UgZXJyb3IgZHVlIHRvIGNhbmNlbGxhdGlvbi5cblxuXG4gICAgICAgICAgcmVzdWx0LmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEvXmNhbmNlbGxlZC9pLnRlc3QoZXJyb3IubWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1dKTtcbiAgICAgIHJldHVybiBTcGVlY2hTeW50aGVzaXM7XG4gICAgfShfZXZlbnRUYXJnZXRTaGltLmRlZmF1bHQpO1xuXG4gICAgKDAsIF9ldmVudFRhcmdldFNoaW0uZGVmaW5lRXZlbnRBdHRyaWJ1dGUpKFNwZWVjaFN5bnRoZXNpcywgJ3ZvaWNlc2NoYW5nZWQnKTtcbiAgICByZXR1cm4ge1xuICAgICAgU3BlZWNoR3JhbW1hckxpc3Q6IFNwZWVjaEdyYW1tYXJMaXN0LFxuICAgICAgU3BlZWNoUmVjb2duaXRpb246IFNwZWVjaFJlY29nbml0aW9uLFxuICAgICAgc3BlZWNoU3ludGhlc2lzOiBuZXcgU3BlZWNoU3ludGhlc2lzKCksXG4gICAgICBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2U6IF9TcGVlY2hTeW50aGVzaXNBdWRpb1N0cmVhbVV0dGVyYW5jZS5kZWZhdWx0XG4gICAgfTtcbiAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklpNHVMM055WXk5amNtVmhkR1ZYWldKVGNHVmxZMmhRYjI1NVptbHNiRVpoWTNSdmNua3Vhbk1pWFN3aWJtRnRaWE1pT2xzaVlYVmthVzlEYjI1bWFXY2lMQ0pCZFdScGIwTnZibVpwWnlJc0ltWnliMjFFWldaaGRXeDBUV2xqY205d2FHOXVaVWx1Y0hWMElpd2lZWFZrYVc5RGIyNTBaWGgwSWl3aVpXNWhZbXhsVkdWc1pXMWxkSEo1SWl3aWNHOXVlV1pwYkd3aUxDSkJkV1JwYjBOdmJuUmxlSFFpTENKM2FXNWtiM2NpTENKM1pXSnJhWFJCZFdScGIwTnZiblJsZUhRaUxDSnlaV052WjI1cGVtVnlJaXdpZEdWNGRFNXZjbTFoYkdsNllYUnBiMjRpTENKamNtVmhkR1ZTWldOdloyNXBlbVZ5SWl3aWJHOXZjMlZGZG1WdWRITWlMQ0pUY0dWbFkyaEhjbUZ0YldGeVRHbHpkQ0lzSWxOd1pXVmphRkpsWTI5bmJtbDBhVzl1SWl3aVkyRnVZMlZzUVd4c0lpd2ljSFZ6YUNJc0lsTndaV1ZqYUZONWJuUm9aWE5wY3lJc0luVjBkR1Z5WVc1alpTSXNJbU52Ym5SeWIyeHNaWElpTENKQlltOXlkRU52Ym5SeWIyeHNaWElpTENKemFXZHVZV3dpTENKaFltOXlkQ0lzSW1KcGJtUWlMQ0p5WlhOMWJIUWlMQ0prYVhOd1lYUmphRVYyWlc1MElpd2lSWFpsYm5RaUxDSmhkV1JwYjFOMGNtVmhiU0lzSW1admNtMWhkQ0lzSW5OMGNtVmhiVkpsWVdSbGNpSXNJbTFsYzNOaFoyVWlMQ0pqWVhSamFDSXNJbVZ5Y205eUlpd2lkR1Z6ZENJc0lrVjJaVzUwVkdGeVoyVjBVMmhwYlNJc0luTndaV1ZqYUZONWJuUm9aWE5wY3lJc0lsTndaV1ZqYUZONWJuUm9aWE5wYzFWMGRHVnlZVzVqWlNJc0lsTndaV1ZqYUZONWJuUm9aWE5wYzBGMVpHbHZVM1J5WldGdFZYUjBaWEpoYm1ObElsMHNJbTFoY0hCcGJtZHpJam9pT3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPMEZCUlVFN08wRkJRMEU3TzBGQlEwRTdPMEZCUlVFN08wRkJRMEU3TzBGQlEwRTdPMEZCUTBFN08wRkJRMEU3TzBGQlEwRTdPMEZCV0VFN1FVRmhaU3gzUWtGVFdqdEJRVUZCTERoQ1FWSkVRU3hYUVZGRE8wRkJRVUVzVFVGU1JFRXNWMEZSUXl4cFEwRlNZVU1zYVVSQlFWbERMREJDUVVGYUxFVkJVV0k3UVVGQlFTeE5RVkJFUXl4WlFVOURMRkZCVUVSQkxGbEJUME03UVVGQlFTeE5RVTVFUXl4bFFVMURMRkZCVGtSQkxHVkJUVU03UVVGQlFTd3lRa0ZNUkVNc1VVRkxRenRCUVVGQkxFMUJURVJCTEZGQlMwTXNPRUpCVEZVN1FVRkRWRU1zU1VGQlFVRXNXVUZCV1N4RlFVRkZReXhOUVVGTkxFTkJRVU5FTEZsQlFWQXNTVUZCZFVKRExFMUJRVTBzUTBGQlEwTTdRVUZFYmtNc1IwRkxWanRCUVVGQkxFMUJSa1JETEZWQlJVTXNVVUZHUkVFc1ZVRkZRenRCUVVGQkxFMUJSRVJETEdsQ1FVTkRMRkZCUkVSQkxHbENRVU5ETzBGQlEwUXNVMEZCVHl4WlFVRk5PMEZCUVVFc1owTkJRM05ETEdsRlFVRTRRenRCUVVNM1JsWXNUVUZCUVVFc1YwRkJWeXhGUVVGWVFTeFhRVVEyUmp0QlFVVTNSbGNzVFVGQlFVRXNaMEpCUVdkQ0xFVkJRVVU3UVVGQlFTeGxRVUZOUml4VlFVRk9PMEZCUVVFc1QwRkdNa1U3UVVGSE4wWk1MRTFCUVVGQkxHVkJRV1VzUlVGQlprRXNaVUZJTmtZN1FVRkpOMFpSTEUxQlFVRkJMRmRCUVZjc1JVRkJSU3hKUVVwblJqdEJRVXMzUmtZc1RVRkJRVUVzYVVKQlFXbENMRVZCUVdwQ1FUdEJRVXcyUml4TFFVRTVReXhEUVVSMFF6dEJRVUZCTEZGQlEwaEhMR2xDUVVSSExIbENRVU5JUVN4cFFrRkVSenRCUVVGQkxGRkJRMmRDUXl4cFFrRkVhRUlzZVVKQlEyZENRU3hwUWtGRWFFSTdPMEZCVTFnc1VVRkJTU3hEUVVGRFdDeFpRVUZNTEVWQlFXMUNPMEZCUTJwQ1FTeE5RVUZCUVN4WlFVRlpMRWRCUVVjc1NVRkJTVVVzVVVGQlVTeERRVUZEUXl4WlFVRmlMRVZCUVdZN1FVRkRSRHM3UVVGWVZTd3lRa0ZoYVVJc1owTkJZbXBDTzBGQlFVRXNVVUZoU0ZNc1UwRmlSeXh2UWtGaFNFRXNVMEZpUnp0QlFVRkJMRkZCWVZGRExFbEJZbElzYjBKQllWRkJMRWxCWWxJN08wRkJRVUVzVVVGbFRFTXNaVUZtU3p0QlFVRkJPMEZCUVVFN1FVRkJRVHM3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVRzN1FVRkJRVHRCUVVGQk8wRkJRVUVzYVVOQlowSkJPMEZCUTFCR0xGVkJRVUZCTEZOQlFWTTdRVUZEVml4VFFXeENVU3hEUVc5Q1ZEdEJRVU5CT3p0QlFYSkNVenRCUVVGQk8wRkJRVUVzYjBOQmMwSkhPMEZCUTFZc2FVSkJRVThzUlVGQlVEdEJRVU5FTzBGQmVFSlJPMEZCUVVFN1FVRkJRU3c0UWtFd1FraEhMRk5CTVVKSExFVkJNRUpSTzBGQlFVRXNjMEpCUTBsR0xFbEJRVWtzUTBGQlF5eFpRVUZOTzBGQlF6VkNMR2RDUVVGTlJ5eFZRVUZWTEVkQlFVY3NTVUZCU1VNc2QwSkJRVW9zUlVGQmJrSTdRVUZFTkVJc1owSkJSWEJDUXl4TlFVWnZRaXhIUVVWVVJpeFZRVVpUTEVOQlJYQkNSU3hOUVVadlFqdEJRVWsxUWl4dFFrRkJUenRCUVVOTVF5eGpRVUZCUVN4TFFVRkxMRVZCUVVWSUxGVkJRVlVzUTBGQlEwY3NTMEZCV0N4RFFVRnBRa01zU1VGQmFrSXNRMEZCYzBKS0xGVkJRWFJDTEVOQlJFWTdRVUZGVEVzc1kwRkJRVUVzVFVGQlRTeEZRVUZGTzBGQlFVRTdRVUZCUVN4M1EwRkJRenRCUVVGQk96dEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUTFCT0xIZENRVUZCUVN4VFFVRlRMRU5CUVVOUExHRkJRVllzUTBGQmQwSXNTVUZCU1VNc1MwRkJTaXhEUVVGVkxFOUJRVllzUTBGQmVFSTdRVUZFVHpzN1FVRkJRU3cyUWtGSlJGSXNVMEZCVXl4RFFVRkRVeXhYUVVwVU8wRkJRVUU3UVVGQlFUdEJRVUZCT3p0QlFVRkJMR2RFUVVzNFFsUXNVMEZCVXl4RFFVRkRVeXhYUVV4NFF5eEZRVXRMUXl4TlFVeE1MSGxDUVV0TFFTeE5RVXhNTEVWQlMyRkRMRmxCVEdJc2VVSkJTMkZCTEZsQlRHSTdRVUZCUVR0QlFVRkJMQ3RDUVU5SExEQkRRVUUwUWpGQ0xGbEJRVFZDTEVWQlFUQkRlVUlzVFVGQk1VTXNSVUZCYTBSRExGbEJRV3hFTEVWQlFXZEZPMEZCUVVWU0xEQkNRVUZCUVN4TlFVRk5MRVZCUVU1Qk8wRkJRVVlzZVVKQlFXaEZMRU5CVUVnN08wRkJRVUU3UVVGQlFUdEJRVUZCT3p0QlFVRkJPMEZCUVVFN1FVRkJRU3dyUWtGVFJ5dzJRa0ZCWld4Q0xGbEJRV1lzUTBGVVNEczdRVUZCUVR0QlFVRkJPMEZCUVVFN08wRkJRVUU3UVVGQlFUdEJRVUZCT3p0QlFVRkJMRGhDUVdGRUxGbEJRVTB5UWl4UFFVRk9MRXRCUVd0Q0xGTkJZbXBDTzBGQlFVRTdRVUZCUVR0QlFVRkJPenRCUVVGQkxIbEVRV05KV2l4VFFVRlRMRU5CUVVOUExHRkJRVllzUTBGQmQwSXNNa05CUVhoQ0xFTkJaRW83TzBGQlFVRTdRVUZyUWxCUUxIZENRVUZCUVN4VFFVRlRMRU5CUVVOUExHRkJRVllzUTBGQmQwSXNTVUZCU1VNc1MwRkJTaXhEUVVGVkxFdEJRVllzUTBGQmVFSTdPMEZCYkVKUE8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMR1ZCUVVRN1FVRkdTQ3hoUVVGUU8wRkJkVUpFTEZkQk0wSnpRaXhEUVVSU08wRkJRVUVzWTBGRFVFWXNUVUZFVHl4VFFVTlFRU3hOUVVSUExFVkJPRUptT3pzN1FVRkRRVUVzVlVGQlFVRXNUVUZCVFN4RFFVRkRUeXhMUVVGUUxFTkJRV0VzVlVGQlFVTXNTMEZCU3l4RlFVRkpPMEZCUTNCQ0xHZENRVUZKTEVOQlFVTXNZMEZCWlVNc1NVRkJaaXhEUVVGdlFrUXNTMEZCU3l4RFFVRkRSaXhQUVVFeFFpeERRVUZNTEVWQlFYbERPMEZCUTNaRExHOUNRVUZOUlN4TFFVRk9PMEZCUTBRN1FVRkRSaXhYUVVwRU8wRkJTMFE3UVVFNVJGRTdRVUZCUVR0QlFVRkJMRTFCWlcxQ1JTeDNRa0ZtYmtJN08wRkJhVVZZTEN0RFFVRnhRbXBDTEdWQlFYSkNMRVZCUVhORExHVkJRWFJETzBGQlJVRXNWMEZCVHp0QlFVTk1TaXhOUVVGQlFTeHBRa0ZCYVVJc1JVRkJha0pCTEdsQ1FVUkxPMEZCUlV4RExFMUJRVUZCTEdsQ1FVRnBRaXhGUVVGcVFrRXNhVUpCUmtzN1FVRkhUSEZDTEUxQlFVRkJMR1ZCUVdVc1JVRkJSU3hKUVVGSmJFSXNaVUZCU2l4RlFVaGFPMEZCU1V4dFFpeE5RVUZCUVN4M1FrRkJkMElzUlVGQlJVTTdRVUZLY2tJc1MwRkJVRHRCUVUxRUxFZEJla1ZFTzBGQk1FVkVJaXdpYzI5MWNtTmxjME52Ym5SbGJuUWlPbHNpTHlvZ1pYTnNhVzUwSUdOc1lYTnpMVzFsZEdodlpITXRkWE5sTFhSb2FYTTZJRnRjSW1WeWNtOXlYQ0lzSUhzZ1hDSmxlR05sY0hSTlpYUm9iMlJ6WENJNklGdGNJbU5oYm1ObGJGd2lMQ0JjSW1kbGRGWnZhV05sYzF3aUxDQmNJbk53WldGclhDSmRJSDFkSUNvdlhISmNibHh5WEc1cGJYQnZjblFnZXlCQmRXUnBiME52Ym1acFp5QjlJR1p5YjIwZ0oyMXBZM0p2YzI5bWRDMWpiMmR1YVhScGRtVnpaWEoyYVdObGN5MXpjR1ZsWTJndGMyUnJKenRjY2x4dWFXMXdiM0owSUhzZ1kzSmxZWFJsVTNCbFpXTm9VbVZqYjJkdWFYUnBiMjVRYjI1NVptbHNiRVp5YjIxU1pXTnZaMjVwZW1WeUlIMGdabkp2YlNBbmQyVmlMWE53WldWamFDMWpiMmR1YVhScGRtVXRjMlZ5ZG1salpYTXZiR2xpTDFOd1pXVmphRk5sY25acFkyVnpMMU53WldWamFGUnZWR1Y0ZENjN1hISmNibWx0Y0c5eWRDQkJZbTl5ZEVOdmJuUnliMnhzWlhJZ1puSnZiU0FuWVdKdmNuUXRZMjl1ZEhKdmJHeGxjaWM3WEhKY2JseHlYRzVwYlhCdmNuUWdZM0psWVhSbFJYSnliM0pGZG1WdWRDQm1jbTl0SUNjdUwyTnlaV0YwWlVWeWNtOXlSWFpsYm5Rbk8xeHlYRzVwYlhCdmNuUWdZM0psWVhSbFZHRnphMUYxWlhWbElHWnliMjBnSnk0dlkzSmxZWFJsVkdGemExRjFaWFZsSnp0Y2NseHVhVzF3YjNKMElFVjJaVzUwVkdGeVoyVjBVMmhwYlN3Z2V5QmtaV1pwYm1WRmRtVnVkRUYwZEhKcFluVjBaU0I5SUdaeWIyMGdKeTR2WlhoMFpYSnVZV3d2WlhabGJuUXRkR0Z5WjJWMExYTm9hVzBuTzF4eVhHNXBiWEJ2Y25RZ2NHeGhlVU52WjI1cGRHbDJaVk5sY25acFkyVnpVM1J5WldGdElHWnliMjBnSnk0dmNHeGhlVU52WjI1cGRHbDJaVk5sY25acFkyVnpVM1J5WldGdEp6dGNjbHh1YVcxd2IzSjBJSEJzWVhsWGFHbDBaVTV2YVhObElHWnliMjBnSnk0dmNHeGhlVmRvYVhSbFRtOXBjMlVuTzF4eVhHNXBiWEJ2Y25RZ1UzQmxaV05vVTNsdWRHaGxjMmx6UVhWa2FXOVRkSEpsWVcxVmRIUmxjbUZ1WTJVZ1puSnZiU0FuTGk5VGNHVmxZMmhUZVc1MGFHVnphWE5CZFdScGIxTjBjbVZoYlZWMGRHVnlZVzVqWlNjN1hISmNibHh5WEc1bGVIQnZjblFnWkdWbVlYVnNkQ0JtZFc1amRHbHZiaWg3WEhKY2JpQWdZWFZrYVc5RGIyNW1hV2NnUFNCQmRXUnBiME52Ym1acFp5NW1jbTl0UkdWbVlYVnNkRTFwWTNKdmNHaHZibVZKYm5CMWRDZ3BMRnh5WEc0Z0lHRjFaR2x2UTI5dWRHVjRkQ3hjY2x4dUlDQmxibUZpYkdWVVpXeGxiV1YwY25rc1hISmNiaUFnY0c5dWVXWnBiR3dnUFNCN1hISmNiaUFnSUNCQmRXUnBiME52Ym5SbGVIUTZJSGRwYm1SdmR5NUJkV1JwYjBOdmJuUmxlSFFnZkh3Z2QybHVaRzkzTG5kbFltdHBkRUYxWkdsdlEyOXVkR1Y0ZEZ4eVhHNGdJSDBzWEhKY2JpQWdjbVZqYjJkdWFYcGxjaXhjY2x4dUlDQjBaWGgwVG05eWJXRnNhWHBoZEdsdmJseHlYRzU5S1NCN1hISmNiaUFnY21WMGRYSnVJQ2dwSUQwK0lIdGNjbHh1SUNBZ0lHTnZibk4wSUhzZ1UzQmxaV05vUjNKaGJXMWhja3hwYzNRc0lGTndaV1ZqYUZKbFkyOW5ibWwwYVc5dUlIMGdQU0JqY21WaGRHVlRjR1ZsWTJoU1pXTnZaMjVwZEdsdmJsQnZibmxtYVd4c1JuSnZiVkpsWTI5bmJtbDZaWElvZTF4eVhHNGdJQ0FnSUNCaGRXUnBiME52Ym1acFp5eGNjbHh1SUNBZ0lDQWdZM0psWVhSbFVtVmpiMmR1YVhwbGNqb2dLQ2tnUFQ0Z2NtVmpiMmR1YVhwbGNpeGNjbHh1SUNBZ0lDQWdaVzVoWW14bFZHVnNaVzFsZEhKNUxGeHlYRzRnSUNBZ0lDQnNiMjl6WlVWMlpXNTBjem9nZEhKMVpTeGNjbHh1SUNBZ0lDQWdkR1Y0ZEU1dmNtMWhiR2w2WVhScGIyNWNjbHh1SUNBZ0lIMHBPMXh5WEc1Y2NseHVJQ0FnSUdsbUlDZ2hZWFZrYVc5RGIyNTBaWGgwS1NCN1hISmNiaUFnSUNBZ0lHRjFaR2x2UTI5dWRHVjRkQ0E5SUc1bGR5QndiMjU1Wm1sc2JDNUJkV1JwYjBOdmJuUmxlSFFvS1R0Y2NseHVJQ0FnSUgxY2NseHVYSEpjYmlBZ0lDQmpiMjV6ZENCN0lHTmhibU5sYkVGc2JDd2djSFZ6YUNCOUlEMGdZM0psWVhSbFZHRnphMUYxWlhWbEtDazdYSEpjYmx4eVhHNGdJQ0FnWTJ4aGMzTWdVM0JsWldOb1UzbHVkR2hsYzJseklHVjRkR1Z1WkhNZ1JYWmxiblJVWVhKblpYUlRhR2x0SUh0Y2NseHVJQ0FnSUNBZ1kyRnVZMlZzS0NrZ2UxeHlYRzRnSUNBZ0lDQWdJR05oYm1ObGJFRnNiQ2dwTzF4eVhHNGdJQ0FnSUNCOVhISmNibHh5WEc0Z0lDQWdJQ0F2THlCU1pYUjFjbTV6SUdGdUlHVnRjSFI1SUdGeWNtRjVMbHh5WEc0Z0lDQWdJQ0F2THlCVGVXNTBhR1Z6YVhNZ2FYTWdaRzl1WlNCdmJpQjBhR1VnWW05MElITnBaR1VzSUhSb1pTQmpiMjUwWlc1MElHOW1JSFJvWlNCMmIybGpaU0JzYVhOMElHbHpJRzV2ZENCdFpXRnVhVzVuWm5Wc0lHOXVJSFJvWlNCamJHbGxiblFnYzJsa1pTNWNjbHh1SUNBZ0lDQWdaMlYwVm05cFkyVnpLQ2tnZTF4eVhHNGdJQ0FnSUNBZ0lISmxkSFZ5YmlCYlhUdGNjbHh1SUNBZ0lDQWdmVnh5WEc1Y2NseHVJQ0FnSUNBZ2MzQmxZV3NvZFhSMFpYSmhibU5sS1NCN1hISmNiaUFnSUNBZ0lDQWdZMjl1YzNRZ2V5QnlaWE4xYkhRZ2ZTQTlJSEIxYzJnb0tDa2dQVDRnZTF4eVhHNGdJQ0FnSUNBZ0lDQWdZMjl1YzNRZ1kyOXVkSEp2Ykd4bGNpQTlJRzVsZHlCQlltOXlkRU52Ym5SeWIyeHNaWElvS1R0Y2NseHVJQ0FnSUNBZ0lDQWdJR052Ym5OMElIc2djMmxuYm1Gc0lIMGdQU0JqYjI1MGNtOXNiR1Z5TzF4eVhHNWNjbHh1SUNBZ0lDQWdJQ0FnSUhKbGRIVnliaUI3WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJR0ZpYjNKME9pQmpiMjUwY205c2JHVnlMbUZpYjNKMExtSnBibVFvWTI5dWRISnZiR3hsY2lrc1hISmNiaUFnSUNBZ0lDQWdJQ0FnSUhKbGMzVnNkRG9nS0dGemVXNWpJQ2dwSUQwK0lIdGNjbHh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQjFkSFJsY21GdVkyVXVaR2x6Y0dGMFkyaEZkbVZ1ZENodVpYY2dSWFpsYm5Rb0ozTjBZWEowSnlrcE8xeHlYRzVjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0IwY25rZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdhV1lnS0hWMGRHVnlZVzVqWlM1aGRXUnBiMU4wY21WaGJTa2dlMXh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCamIyNXpkQ0I3SUdadmNtMWhkQ3dnYzNSeVpXRnRVbVZoWkdWeUlIMGdQU0IxZEhSbGNtRnVZMlV1WVhWa2FXOVRkSEpsWVcwN1hISmNibHh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCaGQyRnBkQ0J3YkdGNVEyOW5ibWwwYVhabFUyVnlkbWxqWlhOVGRISmxZVzBvWVhWa2FXOURiMjUwWlhoMExDQm1iM0p0WVhRc0lITjBjbVZoYlZKbFlXUmxjaXdnZXlCemFXZHVZV3dnZlNrN1hISmNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JoZDJGcGRDQndiR0Y1VjJocGRHVk9iMmx6WlNoaGRXUnBiME52Ym5SbGVIUXBPMXh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnZlZ4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUgwZ1kyRjBZMmdnS0dWeWNtOXlLU0I3WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBdkx5QkZhWFJvWlhJZ1pHbHpjR0YwWTJnZ1hDSmxibVJjSWlCdmNpQmNJbVZ5Y205eVhDSWdaWFpsYm5Rc0lHSjFkQ0J1YjNRZ1ltOTBhRnh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ0tHVnljbTl5TG0xbGMzTmhaMlVnSVQwOUlDZGhZbTl5ZEdWa0p5a2dlMXh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCeVpYUjFjbTRnZFhSMFpYSmhibU5sTG1ScGMzQmhkR05vUlhabGJuUW9ZM0psWVhSbFJYSnliM0pGZG1WdWRDaGxjbkp2Y2lrcE8xeHlYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdmVnh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJSDFjY2x4dVhISmNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ2RYUjBaWEpoYm1ObExtUnBjM0JoZEdOb1JYWmxiblFvYm1WM0lFVjJaVzUwS0NkbGJtUW5LU2s3WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJSDBwS0NsY2NseHVJQ0FnSUNBZ0lDQWdJSDA3WEhKY2JpQWdJQ0FnSUNBZ2ZTazdYSEpjYmx4eVhHNGdJQ0FnSUNBZ0lDOHZJRU5oZEdOb2FXNW5JSFJvWlNCbGNuSnZjaUIwYnlCd2NtVjJaVzUwSUhWdVkyRjFaMmgwSUhCeWIyMXBjMlVnWlhKeWIzSWdaSFZsSUhSdklHTmhibU5sYkd4aGRHbHZiaTVjY2x4dUlDQWdJQ0FnSUNCeVpYTjFiSFF1WTJGMFkyZ29aWEp5YjNJZ1BUNGdlMXh5WEc0Z0lDQWdJQ0FnSUNBZ2FXWWdLQ0V2WG1OaGJtTmxiR3hsWkM5cGRTNTBaWE4wS0dWeWNtOXlMbTFsYzNOaFoyVXBLU0I3WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJSFJvY205M0lHVnljbTl5TzF4eVhHNGdJQ0FnSUNBZ0lDQWdmVnh5WEc0Z0lDQWdJQ0FnSUgwcE8xeHlYRzRnSUNBZ0lDQjlYSEpjYmlBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnWkdWbWFXNWxSWFpsYm5SQmRIUnlhV0oxZEdVb1UzQmxaV05vVTNsdWRHaGxjMmx6TENBbmRtOXBZMlZ6WTJoaGJtZGxaQ2NwTzF4eVhHNWNjbHh1SUNBZ0lISmxkSFZ5YmlCN1hISmNiaUFnSUNBZ0lGTndaV1ZqYUVkeVlXMXRZWEpNYVhOMExGeHlYRzRnSUNBZ0lDQlRjR1ZsWTJoU1pXTnZaMjVwZEdsdmJpeGNjbHh1SUNBZ0lDQWdjM0JsWldOb1UzbHVkR2hsYzJsek9pQnVaWGNnVTNCbFpXTm9VM2x1ZEdobGMybHpLQ2tzWEhKY2JpQWdJQ0FnSUZOd1pXVmphRk41Ym5Sb1pYTnBjMVYwZEdWeVlXNWpaVG9nVTNCbFpXTm9VM2x1ZEdobGMybHpRWFZrYVc5VGRISmxZVzFWZEhSbGNtRnVZMlZjY2x4dUlDQWdJSDA3WEhKY2JpQWdmVHRjY2x4dWZWeHlYRzRpWFgwPSIsIi8vIFRoaXMgaXMgYWRvcHRlZCBmcm9tIGV2ZW50LXRhcmdldC1zaGltQDUuMC4xIHVuZGVyIE1JVCBMaWNlbnNlLlxuLy8gVGhlIHNvdXJjZSBjb2RlIGlzIGNvcGllZCBoZXJlIGJlY2F1c2UgdGhlIG9yaWdpbmFsIHBhY2thZ2UgZG8gbm90IHN1cHBvcnQgRVM1IGJyb3dzZXJzLlxuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuXG4vKipcclxuICogQGF1dGhvciBUb3J1IE5hZ2FzaGltYSA8aHR0cHM6Ly9naXRodWIuY29tL215c3RpY2F0ZWE+XHJcbiAqIEBjb3B5cmlnaHQgMjAxNSBUb3J1IE5hZ2FzaGltYS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICogU2VlIExJQ0VOU0UgZmlsZSBpbiByb290IGRpcmVjdG9yeSBmb3IgZnVsbCBsaWNlbnNlLlxyXG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHRcIik7XG5cbnZhciBfdHlwZW9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mXCIpKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcclxuICogQHR5cGVkZWYge29iamVjdH0gUHJpdmF0ZURhdGFcclxuICogQHByb3BlcnR5IHtFdmVudFRhcmdldH0gZXZlbnRUYXJnZXQgVGhlIGV2ZW50IHRhcmdldC5cclxuICogQHByb3BlcnR5IHt7dHlwZTpzdHJpbmd9fSBldmVudCBUaGUgb3JpZ2luYWwgZXZlbnQgb2JqZWN0LlxyXG4gKiBAcHJvcGVydHkge251bWJlcn0gZXZlbnRQaGFzZSBUaGUgY3VycmVudCBldmVudCBwaGFzZS5cclxuICogQHByb3BlcnR5IHtFdmVudFRhcmdldHxudWxsfSBjdXJyZW50VGFyZ2V0IFRoZSBjdXJyZW50IGV2ZW50IHRhcmdldC5cclxuICogQHByb3BlcnR5IHtib29sZWFufSBjYW5jZWxlZCBUaGUgZmxhZyB0byBwcmV2ZW50IGRlZmF1bHQuXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gc3RvcHBlZCBUaGUgZmxhZyB0byBzdG9wIHByb3BhZ2F0aW9uLlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGltbWVkaWF0ZVN0b3BwZWQgVGhlIGZsYWcgdG8gc3RvcCBwcm9wYWdhdGlvbiBpbW1lZGlhdGVseS5cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbnxudWxsfSBwYXNzaXZlTGlzdGVuZXIgVGhlIGxpc3RlbmVyIGlmIHRoZSBjdXJyZW50IGxpc3RlbmVyIGlzIHBhc3NpdmUuIE90aGVyd2lzZSB0aGlzIGlzIG51bGwuXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lU3RhbXAgVGhlIHVuaXggdGltZS5cclxuICogQHByaXZhdGVcclxuICovXG5cbi8qKlxyXG4gKiBQcml2YXRlIGRhdGEgZm9yIGV2ZW50IHdyYXBwZXJzLlxyXG4gKiBAdHlwZSB7V2Vha01hcDxFdmVudCwgUHJpdmF0ZURhdGE+fVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cblxudmFyIHByaXZhdGVEYXRhID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxyXG4gKiBDYWNoZSBmb3Igd3JhcHBlciBjbGFzc2VzLlxyXG4gKiBAdHlwZSB7V2Vha01hcDxPYmplY3QsIEZ1bmN0aW9uPn1cclxuICogQHByaXZhdGVcclxuICovXG5cbnZhciB3cmFwcGVycyA9IG5ldyBXZWFrTWFwKCk7XG4vKipcclxuICogR2V0IHByaXZhdGUgZGF0YS5cclxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50IG9iamVjdCB0byBnZXQgcHJpdmF0ZSBkYXRhLlxyXG4gKiBAcmV0dXJucyB7UHJpdmF0ZURhdGF9IFRoZSBwcml2YXRlIGRhdGEgb2YgdGhlIGV2ZW50LlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cblxuZnVuY3Rpb24gcGQoZXZlbnQpIHtcbiAgdmFyIHJldHYgPSBwcml2YXRlRGF0YS5nZXQoZXZlbnQpO1xuICBjb25zb2xlLmFzc2VydChyZXR2ICE9IG51bGwsIFwiJ3RoaXMnIGlzIGV4cGVjdGVkIGFuIEV2ZW50IG9iamVjdCwgYnV0IGdvdFwiLCBldmVudCk7XG4gIHJldHVybiByZXR2O1xufVxuLyoqXHJcbiAqIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jc2V0LXRoZS1jYW5jZWxlZC1mbGFnXHJcbiAqIEBwYXJhbSBkYXRhIHtQcml2YXRlRGF0YX0gcHJpdmF0ZSBkYXRhLlxyXG4gKi9cblxuXG5mdW5jdGlvbiBzZXRDYW5jZWxGbGFnKGRhdGEpIHtcbiAgaWYgKGRhdGEucGFzc2l2ZUxpc3RlbmVyICE9IG51bGwpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gcHJldmVudERlZmF1bHQgaW5zaWRlIHBhc3NpdmUgZXZlbnQgbGlzdGVuZXIgaW52b2NhdGlvbi4nLCBkYXRhLnBhc3NpdmVMaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCFkYXRhLmV2ZW50LmNhbmNlbGFibGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBkYXRhLmNhbmNlbGVkID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGRhdGEuZXZlbnQucHJldmVudERlZmF1bHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBkYXRhLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cbn1cbi8qKlxyXG4gKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jaW50ZXJmYWNlLWV2ZW50XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xuXG4vKipcclxuICogVGhlIGV2ZW50IHdyYXBwZXIuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSBldmVudFRhcmdldCBUaGUgZXZlbnQgdGFyZ2V0IG9mIHRoaXMgZGlzcGF0Y2hpbmcuXHJcbiAqIEBwYXJhbSB7RXZlbnR8e3R5cGU6c3RyaW5nfX0gZXZlbnQgVGhlIG9yaWdpbmFsIGV2ZW50IHRvIHdyYXAuXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIEV2ZW50KGV2ZW50VGFyZ2V0LCBldmVudCkge1xuICBwcml2YXRlRGF0YS5zZXQodGhpcywge1xuICAgIGV2ZW50VGFyZ2V0OiBldmVudFRhcmdldCxcbiAgICBldmVudDogZXZlbnQsXG4gICAgZXZlbnRQaGFzZTogMixcbiAgICBjdXJyZW50VGFyZ2V0OiBldmVudFRhcmdldCxcbiAgICBjYW5jZWxlZDogZmFsc2UsXG4gICAgc3RvcHBlZDogZmFsc2UsXG4gICAgaW1tZWRpYXRlU3RvcHBlZDogZmFsc2UsXG4gICAgcGFzc2l2ZUxpc3RlbmVyOiBudWxsLFxuICAgIHRpbWVTdGFtcDogZXZlbnQudGltZVN0YW1wIHx8IERhdGUubm93KClcbiAgfSk7IC8vIGh0dHBzOi8vaGV5Y2FtLmdpdGh1Yi5pby93ZWJpZGwvI1VuZm9yZ2VhYmxlXG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdpc1RydXN0ZWQnLCB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSk7IC8vIERlZmluZSBhY2Nlc3NvcnNcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGV2ZW50KTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIga2V5ID0ga2V5c1tpXTtcblxuICAgIGlmICghKGtleSBpbiB0aGlzKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwgZGVmaW5lUmVkaXJlY3REZXNjcmlwdG9yKGtleSkpO1xuICAgIH1cbiAgfVxufSAvLyBTaG91bGQgYmUgZW51bWVyYWJsZSwgYnV0IGNsYXNzIG1ldGhvZHMgYXJlIG5vdCBlbnVtZXJhYmxlLlxuXG5cbkV2ZW50LnByb3RvdHlwZSA9IHtcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdGhpcyBldmVudC5cclxuICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAqL1xuICBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gcGQodGhpcykuZXZlbnQudHlwZTtcbiAgfSxcblxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0IG9mIHRoaXMgZXZlbnQuXHJcbiAgICogQHR5cGUge0V2ZW50VGFyZ2V0fVxyXG4gICAqL1xuICBnZXQgdGFyZ2V0KCkge1xuICAgIHJldHVybiBwZCh0aGlzKS5ldmVudFRhcmdldDtcbiAgfSxcblxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0IG9mIHRoaXMgZXZlbnQuXHJcbiAgICogQHR5cGUge0V2ZW50VGFyZ2V0fVxyXG4gICAqL1xuICBnZXQgY3VycmVudFRhcmdldCgpIHtcbiAgICByZXR1cm4gcGQodGhpcykuY3VycmVudFRhcmdldDtcbiAgfSxcblxuICAvKipcclxuICAgKiBAcmV0dXJucyB7RXZlbnRUYXJnZXRbXX0gVGhlIGNvbXBvc2VkIHBhdGggb2YgdGhpcyBldmVudC5cclxuICAgKi9cbiAgY29tcG9zZWRQYXRoOiBmdW5jdGlvbiBjb21wb3NlZFBhdGgoKSB7XG4gICAgdmFyIGN1cnJlbnRUYXJnZXQgPSBwZCh0aGlzKS5jdXJyZW50VGFyZ2V0O1xuXG4gICAgaWYgKGN1cnJlbnRUYXJnZXQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBbY3VycmVudFRhcmdldF07XG4gIH0sXG5cbiAgLyoqXHJcbiAgICogQ29uc3RhbnQgb2YgTk9ORS5cclxuICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAqL1xuICBnZXQgTk9ORSgpIHtcbiAgICByZXR1cm4gMDtcbiAgfSxcblxuICAvKipcclxuICAgKiBDb25zdGFudCBvZiBDQVBUVVJJTkdfUEhBU0UuXHJcbiAgICogQHR5cGUge251bWJlcn1cclxuICAgKi9cbiAgZ2V0IENBUFRVUklOR19QSEFTRSgpIHtcbiAgICByZXR1cm4gMTtcbiAgfSxcblxuICAvKipcclxuICAgKiBDb25zdGFudCBvZiBBVF9UQVJHRVQuXHJcbiAgICogQHR5cGUge251bWJlcn1cclxuICAgKi9cbiAgZ2V0IEFUX1RBUkdFVCgpIHtcbiAgICByZXR1cm4gMjtcbiAgfSxcblxuICAvKipcclxuICAgKiBDb25zdGFudCBvZiBCVUJCTElOR19QSEFTRS5cclxuICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAqL1xuICBnZXQgQlVCQkxJTkdfUEhBU0UoKSB7XG4gICAgcmV0dXJuIDM7XG4gIH0sXG5cbiAgLyoqXHJcbiAgICogVGhlIHRhcmdldCBvZiB0aGlzIGV2ZW50LlxyXG4gICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICovXG4gIGdldCBldmVudFBoYXNlKCkge1xuICAgIHJldHVybiBwZCh0aGlzKS5ldmVudFBoYXNlO1xuICB9LFxuXG4gIC8qKlxyXG4gICAqIFN0b3AgZXZlbnQgYnViYmxpbmcuXHJcbiAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICovXG4gIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uKCkge1xuICAgIHZhciBkYXRhID0gcGQodGhpcyk7XG4gICAgZGF0YS5zdG9wcGVkID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgZGF0YS5ldmVudC5zdG9wUHJvcGFnYXRpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGRhdGEuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxyXG4gICAqIFN0b3AgZXZlbnQgYnViYmxpbmcuXHJcbiAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICovXG4gIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24gc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkge1xuICAgIHZhciBkYXRhID0gcGQodGhpcyk7XG4gICAgZGF0YS5zdG9wcGVkID0gdHJ1ZTtcbiAgICBkYXRhLmltbWVkaWF0ZVN0b3BwZWQgPSB0cnVlO1xuXG4gICAgaWYgKHR5cGVvZiBkYXRhLmV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZGF0YS5ldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXHJcbiAgICogVGhlIGZsYWcgdG8gYmUgYnViYmxpbmcuXHJcbiAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICovXG4gIGdldCBidWJibGVzKCkge1xuICAgIHJldHVybiBCb29sZWFuKHBkKHRoaXMpLmV2ZW50LmJ1YmJsZXMpO1xuICB9LFxuXG4gIC8qKlxyXG4gICAqIFRoZSBmbGFnIHRvIGJlIGNhbmNlbGFibGUuXHJcbiAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICovXG4gIGdldCBjYW5jZWxhYmxlKCkge1xuICAgIHJldHVybiBCb29sZWFuKHBkKHRoaXMpLmV2ZW50LmNhbmNlbGFibGUpO1xuICB9LFxuXG4gIC8qKlxyXG4gICAqIENhbmNlbCB0aGlzIGV2ZW50LlxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xuICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24gcHJldmVudERlZmF1bHQoKSB7XG4gICAgc2V0Q2FuY2VsRmxhZyhwZCh0aGlzKSk7XG4gIH0sXG5cbiAgLyoqXHJcbiAgICogVGhlIGZsYWcgdG8gaW5kaWNhdGUgY2FuY2VsbGF0aW9uIHN0YXRlLlxyXG4gICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAqL1xuICBnZXQgZGVmYXVsdFByZXZlbnRlZCgpIHtcbiAgICByZXR1cm4gcGQodGhpcykuY2FuY2VsZWQ7XG4gIH0sXG5cbiAgLyoqXHJcbiAgICogVGhlIGZsYWcgdG8gYmUgY29tcG9zZWQuXHJcbiAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICovXG4gIGdldCBjb21wb3NlZCgpIHtcbiAgICByZXR1cm4gQm9vbGVhbihwZCh0aGlzKS5ldmVudC5jb21wb3NlZCk7XG4gIH0sXG5cbiAgLyoqXHJcbiAgICogVGhlIHVuaXggdGltZSBvZiB0aGlzIGV2ZW50LlxyXG4gICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICovXG4gIGdldCB0aW1lU3RhbXAoKSB7XG4gICAgcmV0dXJuIHBkKHRoaXMpLnRpbWVTdGFtcDtcbiAgfSxcblxuICAvKipcclxuICAgKiBUaGUgdGFyZ2V0IG9mIHRoaXMgZXZlbnQuXHJcbiAgICogQHR5cGUge0V2ZW50VGFyZ2V0fVxyXG4gICAqIEBkZXByZWNhdGVkXHJcbiAgICovXG4gIGdldCBzcmNFbGVtZW50KCkge1xuICAgIHJldHVybiBwZCh0aGlzKS5ldmVudFRhcmdldDtcbiAgfSxcblxuICAvKipcclxuICAgKiBUaGUgZmxhZyB0byBzdG9wIGV2ZW50IGJ1YmJsaW5nLlxyXG4gICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAqIEBkZXByZWNhdGVkXHJcbiAgICovXG4gIGdldCBjYW5jZWxCdWJibGUoKSB7XG4gICAgcmV0dXJuIHBkKHRoaXMpLnN0b3BwZWQ7XG4gIH0sXG5cbiAgc2V0IGNhbmNlbEJ1YmJsZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGF0YSA9IHBkKHRoaXMpO1xuICAgIGRhdGEuc3RvcHBlZCA9IHRydWU7XG5cbiAgICBpZiAodHlwZW9mIGRhdGEuZXZlbnQuY2FuY2VsQnViYmxlID09PSAnYm9vbGVhbicpIHtcbiAgICAgIGRhdGEuZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXHJcbiAgICogVGhlIGZsYWcgdG8gaW5kaWNhdGUgY2FuY2VsbGF0aW9uIHN0YXRlLlxyXG4gICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAqIEBkZXByZWNhdGVkXHJcbiAgICovXG4gIGdldCByZXR1cm5WYWx1ZSgpIHtcbiAgICByZXR1cm4gIXBkKHRoaXMpLmNhbmNlbGVkO1xuICB9LFxuXG4gIHNldCByZXR1cm5WYWx1ZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHNldENhbmNlbEZsYWcocGQodGhpcykpO1xuICAgIH1cbiAgfSxcblxuICAvKipcclxuICAgKiBJbml0aWFsaXplIHRoaXMgZXZlbnQgb2JqZWN0LiBCdXQgZG8gbm90aGluZyB1bmRlciBldmVudCBkaXNwYXRjaGluZy5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgZXZlbnQgdHlwZS5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtidWJibGVzPWZhbHNlXSBUaGUgZmxhZyB0byBiZSBwb3NzaWJsZSB0byBidWJibGUgdXAuXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbY2FuY2VsYWJsZT1mYWxzZV0gVGhlIGZsYWcgdG8gYmUgcG9zc2libGUgdG8gY2FuY2VsLlxyXG4gICAqIEBkZXByZWNhdGVkXHJcbiAgICovXG4gIGluaXRFdmVudDogZnVuY3Rpb24gaW5pdEV2ZW50KCkgey8vIERvIG5vdGhpbmcuXG4gIH1cbn07IC8vIGBjb25zdHJ1Y3RvcmAgaXMgbm90IGVudW1lcmFibGUuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudC5wcm90b3R5cGUsICdjb25zdHJ1Y3RvcicsIHtcbiAgdmFsdWU6IEV2ZW50LFxuICBjb25maWd1cmFibGU6IHRydWUsXG4gIHdyaXRhYmxlOiB0cnVlXG59KTsgLy8gRW5zdXJlIGBldmVudCBpbnN0YW5jZW9mIHdpbmRvdy5FdmVudGAgaXMgYHRydWVgLlxuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5FdmVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgT2JqZWN0LnNldFByb3RvdHlwZU9mKEV2ZW50LnByb3RvdHlwZSwgd2luZG93LkV2ZW50LnByb3RvdHlwZSk7IC8vIE1ha2UgYXNzb2NpYXRpb24gZm9yIHdyYXBwZXJzLlxuXG4gIHdyYXBwZXJzLnNldCh3aW5kb3cuRXZlbnQucHJvdG90eXBlLCBFdmVudCk7XG59XG4vKipcclxuICogR2V0IHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIHJlZGlyZWN0IGEgZ2l2ZW4gcHJvcGVydHkuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgUHJvcGVydHkgbmFtZSB0byBkZWZpbmUgcHJvcGVydHkgZGVzY3JpcHRvci5cclxuICogQHJldHVybnMge1Byb3BlcnR5RGVzY3JpcHRvcn0gVGhlIHByb3BlcnR5IGRlc2NyaXB0b3IgdG8gcmVkaXJlY3QgdGhlIHByb3BlcnR5LlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cblxuXG5mdW5jdGlvbiBkZWZpbmVSZWRpcmVjdERlc2NyaXB0b3Ioa2V5KSB7XG4gIHJldHVybiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gcGQodGhpcykuZXZlbnRba2V5XTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICBwZCh0aGlzKS5ldmVudFtrZXldID0gdmFsdWU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9O1xufVxuLyoqXHJcbiAqIEdldCB0aGUgcHJvcGVydHkgZGVzY3JpcHRvciB0byBjYWxsIGEgZ2l2ZW4gbWV0aG9kIHByb3BlcnR5LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFByb3BlcnR5IG5hbWUgdG8gZGVmaW5lIHByb3BlcnR5IGRlc2NyaXB0b3IuXHJcbiAqIEByZXR1cm5zIHtQcm9wZXJ0eURlc2NyaXB0b3J9IFRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIGNhbGwgdGhlIG1ldGhvZCBwcm9wZXJ0eS5cclxuICogQHByaXZhdGVcclxuICovXG5cblxuZnVuY3Rpb24gZGVmaW5lQ2FsbERlc2NyaXB0b3Ioa2V5KSB7XG4gIHJldHVybiB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkge1xuICAgICAgdmFyIGV2ZW50ID0gcGQodGhpcykuZXZlbnQ7XG4gICAgICByZXR1cm4gZXZlbnRba2V5XS5hcHBseShldmVudCwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH07XG59XG4vKipcclxuICogRGVmaW5lIG5ldyB3cmFwcGVyIGNsYXNzLlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBCYXNlRXZlbnQgVGhlIGJhc2Ugd3JhcHBlciBjbGFzcy5cclxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvIFRoZSBwcm90b3R5cGUgb2YgdGhlIG9yaWdpbmFsIGV2ZW50LlxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFRoZSBkZWZpbmVkIHdyYXBwZXIgY2xhc3MuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIGRlZmluZVdyYXBwZXIoQmFzZUV2ZW50LCBwcm90bykge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3RvKTtcblxuICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gQmFzZUV2ZW50O1xuICB9XG4gIC8qKiBDdXN0b21FdmVudCAqL1xuXG5cbiAgZnVuY3Rpb24gQ3VzdG9tRXZlbnQoZXZlbnRUYXJnZXQsIGV2ZW50KSB7XG4gICAgQmFzZUV2ZW50LmNhbGwodGhpcywgZXZlbnRUYXJnZXQsIGV2ZW50KTtcbiAgfVxuXG4gIEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQmFzZUV2ZW50LnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogQ3VzdG9tRXZlbnQsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7IC8vIERlZmluZSBhY2Nlc3NvcnMuXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG5cbiAgICBpZiAoIShrZXkgaW4gQmFzZUV2ZW50LnByb3RvdHlwZSkpIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90bywga2V5KTtcbiAgICAgIHZhciBpc0Z1bmMgPSB0eXBlb2YgZGVzY3JpcHRvci52YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDdXN0b21FdmVudC5wcm90b3R5cGUsIGtleSwgaXNGdW5jID8gZGVmaW5lQ2FsbERlc2NyaXB0b3Ioa2V5KSA6IGRlZmluZVJlZGlyZWN0RGVzY3JpcHRvcihrZXkpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gQ3VzdG9tRXZlbnQ7XG59XG4vKipcclxuICogR2V0IHRoZSB3cmFwcGVyIGNsYXNzIG9mIGEgZ2l2ZW4gcHJvdG90eXBlLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvdG8gVGhlIHByb3RvdHlwZSBvZiB0aGUgb3JpZ2luYWwgZXZlbnQgdG8gZ2V0IGl0cyB3cmFwcGVyLlxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFRoZSB3cmFwcGVyIGNsYXNzLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cblxuXG5mdW5jdGlvbiBnZXRXcmFwcGVyKHByb3RvKSB7XG4gIGlmIChwcm90byA9PSBudWxsIHx8IHByb3RvID09PSBPYmplY3QucHJvdG90eXBlKSB7XG4gICAgcmV0dXJuIEV2ZW50O1xuICB9XG5cbiAgdmFyIHdyYXBwZXIgPSB3cmFwcGVycy5nZXQocHJvdG8pO1xuXG4gIGlmICh3cmFwcGVyID09IG51bGwpIHtcbiAgICB3cmFwcGVyID0gZGVmaW5lV3JhcHBlcihnZXRXcmFwcGVyKE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90bykpLCBwcm90byk7XG4gICAgd3JhcHBlcnMuc2V0KHByb3RvLCB3cmFwcGVyKTtcbiAgfVxuXG4gIHJldHVybiB3cmFwcGVyO1xufVxuLyoqXHJcbiAqIFdyYXAgYSBnaXZlbiBldmVudCB0byBtYW5hZ2VtZW50IGEgZGlzcGF0Y2hpbmcuXHJcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IGV2ZW50VGFyZ2V0IFRoZSBldmVudCB0YXJnZXQgb2YgdGhpcyBkaXNwYXRjaGluZy5cclxuICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IFRoZSBldmVudCB0byB3cmFwLlxyXG4gKiBAcmV0dXJucyB7RXZlbnR9IFRoZSB3cmFwcGVyIGluc3RhbmNlLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cblxuXG5mdW5jdGlvbiB3cmFwRXZlbnQoZXZlbnRUYXJnZXQsIGV2ZW50KSB7XG4gIHZhciBXcmFwcGVyID0gZ2V0V3JhcHBlcihPYmplY3QuZ2V0UHJvdG90eXBlT2YoZXZlbnQpKTtcbiAgcmV0dXJuIG5ldyBXcmFwcGVyKGV2ZW50VGFyZ2V0LCBldmVudCk7XG59XG4vKipcclxuICogR2V0IHRoZSBpbW1lZGlhdGVTdG9wcGVkIGZsYWcgb2YgYSBnaXZlbiBldmVudC5cclxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGdldC5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRoZSBmbGFnIHRvIHN0b3AgcHJvcGFnYXRpb24gaW1tZWRpYXRlbHkuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIGlzU3RvcHBlZChldmVudCkge1xuICByZXR1cm4gcGQoZXZlbnQpLmltbWVkaWF0ZVN0b3BwZWQ7XG59XG4vKipcclxuICogU2V0IHRoZSBjdXJyZW50IGV2ZW50IHBoYXNlIG9mIGEgZ2l2ZW4gZXZlbnQuXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBzZXQgY3VycmVudCB0YXJnZXQuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBldmVudFBoYXNlIE5ldyBldmVudCBwaGFzZS5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIHNldEV2ZW50UGhhc2UoZXZlbnQsIGV2ZW50UGhhc2UpIHtcbiAgcGQoZXZlbnQpLmV2ZW50UGhhc2UgPSBldmVudFBoYXNlO1xufVxuLyoqXHJcbiAqIFNldCB0aGUgY3VycmVudCB0YXJnZXQgb2YgYSBnaXZlbiBldmVudC5cclxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIHNldCBjdXJyZW50IHRhcmdldC5cclxuICogQHBhcmFtIHtFdmVudFRhcmdldHxudWxsfSBjdXJyZW50VGFyZ2V0IE5ldyBjdXJyZW50IHRhcmdldC5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIHNldEN1cnJlbnRUYXJnZXQoZXZlbnQsIGN1cnJlbnRUYXJnZXQpIHtcbiAgcGQoZXZlbnQpLmN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0O1xufVxuLyoqXHJcbiAqIFNldCBhIHBhc3NpdmUgbGlzdGVuZXIgb2YgYSBnaXZlbiBldmVudC5cclxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIHNldCBjdXJyZW50IHRhcmdldC5cclxuICogQHBhcmFtIHtGdW5jdGlvbnxudWxsfSBwYXNzaXZlTGlzdGVuZXIgTmV3IHBhc3NpdmUgbGlzdGVuZXIuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cblxuXG5mdW5jdGlvbiBzZXRQYXNzaXZlTGlzdGVuZXIoZXZlbnQsIHBhc3NpdmVMaXN0ZW5lcikge1xuICBwZChldmVudCkucGFzc2l2ZUxpc3RlbmVyID0gcGFzc2l2ZUxpc3RlbmVyO1xufVxuLyoqXHJcbiAqIEB0eXBlZGVmIHtvYmplY3R9IExpc3RlbmVyTm9kZVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBsaXN0ZW5lclxyXG4gKiBAcHJvcGVydHkgezF8MnwzfSBsaXN0ZW5lclR5cGVcclxuICogQHByb3BlcnR5IHtib29sZWFufSBwYXNzaXZlXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gb25jZVxyXG4gKiBAcHJvcGVydHkge0xpc3RlbmVyTm9kZXxudWxsfSBuZXh0XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xuXG4vKipcclxuICogQHR5cGUge1dlYWtNYXA8b2JqZWN0LCBNYXA8c3RyaW5nLCBMaXN0ZW5lck5vZGU+Pn1cclxuICogQHByaXZhdGVcclxuICovXG5cblxudmFyIGxpc3RlbmVyc01hcCA9IG5ldyBXZWFrTWFwKCk7IC8vIExpc3RlbmVyIHR5cGVzXG5cbnZhciBDQVBUVVJFID0gMTtcbnZhciBCVUJCTEUgPSAyO1xudmFyIEFUVFJJQlVURSA9IDM7XG4vKipcclxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIHZhbHVlIGlzIGFuIG9iamVjdCBvciBub3QuXHJcbiAqIEBwYXJhbSB7YW55fSB4IFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgdmFsdWUgaXMgYW4gb2JqZWN0LlxyXG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3QoeCkge1xuICByZXR1cm4geCAhPT0gbnVsbCAmJiAoMCwgX3R5cGVvZjIuZGVmYXVsdCkoeCkgPT09ICdvYmplY3QnOyAvL2VzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbn1cbi8qKlxyXG4gKiBHZXQgbGlzdGVuZXJzLlxyXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSBldmVudFRhcmdldCBUaGUgZXZlbnQgdGFyZ2V0IHRvIGdldC5cclxuICogQHJldHVybnMge01hcDxzdHJpbmcsIExpc3RlbmVyTm9kZT59IFRoZSBsaXN0ZW5lcnMuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIGdldExpc3RlbmVycyhldmVudFRhcmdldCkge1xuICB2YXIgbGlzdGVuZXJzID0gbGlzdGVuZXJzTWFwLmdldChldmVudFRhcmdldCk7XG5cbiAgaWYgKGxpc3RlbmVycyA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIid0aGlzJyBpcyBleHBlY3RlZCBhbiBFdmVudFRhcmdldCBvYmplY3QsIGJ1dCBnb3QgYW5vdGhlciB2YWx1ZS5cIik7XG4gIH1cblxuICByZXR1cm4gbGlzdGVuZXJzO1xufVxuLyoqXHJcbiAqIEdldCB0aGUgcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgdGhlIGV2ZW50IGF0dHJpYnV0ZSBvZiBhIGdpdmVuIGV2ZW50LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGdldCBwcm9wZXJ0eSBkZXNjcmlwdG9yLlxyXG4gKiBAcmV0dXJucyB7UHJvcGVydHlEZXNjcmlwdG9yfSBUaGUgcHJvcGVydHkgZGVzY3JpcHRvci5cclxuICogQHByaXZhdGVcclxuICovXG5cblxuZnVuY3Rpb24gZGVmaW5lRXZlbnRBdHRyaWJ1dGVEZXNjcmlwdG9yKGV2ZW50TmFtZSkge1xuICByZXR1cm4ge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIGxpc3RlbmVycyA9IGdldExpc3RlbmVycyh0aGlzKTtcbiAgICAgIHZhciBub2RlID0gbGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xuXG4gICAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChub2RlLmxpc3RlbmVyVHlwZSA9PT0gQVRUUklCVVRFKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGUubGlzdGVuZXI7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KGxpc3RlbmVyKSB7XG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdChsaXN0ZW5lcikpIHtcbiAgICAgICAgbGlzdGVuZXIgPSBudWxsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICB9XG5cbiAgICAgIHZhciBsaXN0ZW5lcnMgPSBnZXRMaXN0ZW5lcnModGhpcyk7IC8vIFRyYXZlcnNlIHRvIHRoZSB0YWlsIHdoaWxlIHJlbW92aW5nIG9sZCB2YWx1ZS5cblxuICAgICAgdmFyIHByZXYgPSBudWxsO1xuICAgICAgdmFyIG5vZGUgPSBsaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSk7XG5cbiAgICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcbiAgICAgICAgaWYgKG5vZGUubGlzdGVuZXJUeXBlID09PSBBVFRSSUJVVEUpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgb2xkIHZhbHVlLlxuICAgICAgICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBwcmV2Lm5leHQgPSBub2RlLm5leHQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChub2RlLm5leHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5zZXQoZXZlbnROYW1lLCBub2RlLm5leHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGV2ZW50TmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByZXYgPSBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZSA9IG5vZGUubmV4dDtcbiAgICAgIH0gLy8gQWRkIG5ldyB2YWx1ZS5cblxuXG4gICAgICBpZiAobGlzdGVuZXIgIT09IG51bGwpIHtcbiAgICAgICAgdmFyIG5ld05vZGUgPSB7XG4gICAgICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgICAgICAgIGxpc3RlbmVyVHlwZTogQVRUUklCVVRFLFxuICAgICAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgICAgIG9uY2U6IGZhbHNlLFxuICAgICAgICAgIG5leHQ6IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocHJldiA9PT0gbnVsbCkge1xuICAgICAgICAgIGxpc3RlbmVycy5zZXQoZXZlbnROYW1lLCBuZXdOb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmV2Lm5leHQgPSBuZXdOb2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9O1xufVxuLyoqXHJcbiAqIERlZmluZSBhbiBldmVudCBhdHRyaWJ1dGUgKGUuZy4gYGV2ZW50VGFyZ2V0Lm9uY2xpY2tgKS5cclxuICogQHBhcmFtIHtPYmplY3R9IGV2ZW50VGFyZ2V0UHJvdG90eXBlIFRoZSBldmVudCB0YXJnZXQgcHJvdG90eXBlIHRvIGRlZmluZSBhbiBldmVudCBhdHRyYml0ZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZSB0byBkZWZpbmUuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cblxuXG5mdW5jdGlvbiBkZWZpbmVFdmVudEF0dHJpYnV0ZShldmVudFRhcmdldFByb3RvdHlwZSwgZXZlbnROYW1lKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShldmVudFRhcmdldFByb3RvdHlwZSwgXCJvblwiLmNvbmNhdChldmVudE5hbWUpLCBkZWZpbmVFdmVudEF0dHJpYnV0ZURlc2NyaXB0b3IoZXZlbnROYW1lKSk7XG59XG4vKipcclxuICogRGVmaW5lIGEgY3VzdG9tIEV2ZW50VGFyZ2V0IHdpdGggZXZlbnQgYXR0cmlidXRlcy5cclxuICogQHBhcmFtIHtzdHJpbmdbXX0gZXZlbnROYW1lcyBFdmVudCBuYW1lcyBmb3IgZXZlbnQgYXR0cmlidXRlcy5cclxuICogQHJldHVybnMge0V2ZW50VGFyZ2V0fSBUaGUgY3VzdG9tIEV2ZW50VGFyZ2V0LlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cblxuXG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FdmVudFRhcmdldChldmVudE5hbWVzKSB7XG4gIC8qKiBDdXN0b21FdmVudFRhcmdldCAqL1xuICBmdW5jdGlvbiBDdXN0b21FdmVudFRhcmdldCgpIHtcbiAgICBFdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuICB9XG5cbiAgQ3VzdG9tRXZlbnRUYXJnZXQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudFRhcmdldC5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IEN1c3RvbUV2ZW50VGFyZ2V0LFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnROYW1lcy5sZW5ndGg7ICsraSkge1xuICAgIGRlZmluZUV2ZW50QXR0cmlidXRlKEN1c3RvbUV2ZW50VGFyZ2V0LnByb3RvdHlwZSwgZXZlbnROYW1lc1tpXSk7XG4gIH1cblxuICByZXR1cm4gQ3VzdG9tRXZlbnRUYXJnZXQ7XG59XG4vKipcclxuICogRXZlbnRUYXJnZXQuXHJcbiAqXHJcbiAqIC0gVGhpcyBpcyBjb25zdHJ1Y3RvciBpZiBubyBhcmd1bWVudHMuXHJcbiAqIC0gVGhpcyBpcyBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYSBDdXN0b21FdmVudFRhcmdldCBjb25zdHJ1Y3RvciBpZiB0aGVyZSBhcmUgYXJndW1lbnRzLlxyXG4gKlxyXG4gKiBGb3IgZXhhbXBsZTpcclxuICpcclxuICogICAgIGNsYXNzIEEgZXh0ZW5kcyBFdmVudFRhcmdldCB7fVxyXG4gKiAgICAgY2xhc3MgQiBleHRlbmRzIEV2ZW50VGFyZ2V0KFwibWVzc2FnZVwiKSB7fVxyXG4gKiAgICAgY2xhc3MgQyBleHRlbmRzIEV2ZW50VGFyZ2V0KFwibWVzc2FnZVwiLCBcImVycm9yXCIpIHt9XHJcbiAqICAgICBjbGFzcyBEIGV4dGVuZHMgRXZlbnRUYXJnZXQoW1wibWVzc2FnZVwiLCBcImVycm9yXCJdKSB7fVxyXG4gKi9cblxuXG5mdW5jdGlvbiBFdmVudFRhcmdldCgpIHtcbiAgLyplc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuICBpZiAodGhpcyBpbnN0YW5jZW9mIEV2ZW50VGFyZ2V0KSB7XG4gICAgbGlzdGVuZXJzTWFwLnNldCh0aGlzLCBuZXcgTWFwKCkpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgIHJldHVybiBkZWZpbmVDdXN0b21FdmVudFRhcmdldChhcmd1bWVudHNbMF0pO1xuICB9XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIHR5cGVzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHR5cGVzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBkZWZpbmVDdXN0b21FdmVudFRhcmdldCh0eXBlcyk7XG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTtcbiAgLyplc2xpbnQtZW5hYmxlIGNvbnNpc3RlbnQtcmV0dXJuICovXG59IC8vIFNob3VsZCBiZSBlbnVtZXJhYmxlLCBidXQgY2xhc3MgbWV0aG9kcyBhcmUgbm90IGVudW1lcmFibGUuXG5cblxuRXZlbnRUYXJnZXQucHJvdG90eXBlID0ge1xuICAvKipcclxuICAgKiBBZGQgYSBnaXZlbiBsaXN0ZW5lciB0byB0aGlzIGV2ZW50IHRhcmdldC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGFkZC5cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gYWRkLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnx7Y2FwdHVyZT86Ym9vbGVhbixwYXNzaXZlPzpib29sZWFuLG9uY2U/OmJvb2xlYW59fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgZm9yIHRoaXMgbGlzdGVuZXIuXHJcbiAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICovXG4gIGFkZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QobGlzdGVuZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiJ2xpc3RlbmVyJyBzaG91bGQgYmUgYSBmdW5jdGlvbiBvciBhbiBvYmplY3QuXCIpO1xuICAgIH1cblxuICAgIHZhciBsaXN0ZW5lcnMgPSBnZXRMaXN0ZW5lcnModGhpcyk7XG4gICAgdmFyIG9wdGlvbnNJc09iaiA9IGlzT2JqZWN0KG9wdGlvbnMpO1xuICAgIHZhciBjYXB0dXJlID0gb3B0aW9uc0lzT2JqID8gQm9vbGVhbihvcHRpb25zLmNhcHR1cmUpIDogQm9vbGVhbihvcHRpb25zKTtcbiAgICB2YXIgbGlzdGVuZXJUeXBlID0gY2FwdHVyZSA/IENBUFRVUkUgOiBCVUJCTEU7XG4gICAgdmFyIG5ld05vZGUgPSB7XG4gICAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXG4gICAgICBsaXN0ZW5lclR5cGU6IGxpc3RlbmVyVHlwZSxcbiAgICAgIHBhc3NpdmU6IG9wdGlvbnNJc09iaiAmJiBCb29sZWFuKG9wdGlvbnMucGFzc2l2ZSksXG4gICAgICBvbmNlOiBvcHRpb25zSXNPYmogJiYgQm9vbGVhbihvcHRpb25zLm9uY2UpLFxuICAgICAgbmV4dDogbnVsbFxuICAgIH07IC8vIFNldCBpdCBhcyB0aGUgZmlyc3Qgbm9kZSBpZiB0aGUgZmlyc3Qgbm9kZSBpcyBudWxsLlxuXG4gICAgdmFyIG5vZGUgPSBsaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSk7XG5cbiAgICBpZiAobm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBsaXN0ZW5lcnMuc2V0KGV2ZW50TmFtZSwgbmV3Tm9kZSk7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBUcmF2ZXJzZSB0byB0aGUgdGFpbCB3aGlsZSBjaGVja2luZyBkdXBsaWNhdGlvbi4uXG5cblxuICAgIHZhciBwcmV2ID0gbnVsbDtcblxuICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcbiAgICAgIGlmIChub2RlLmxpc3RlbmVyID09PSBsaXN0ZW5lciAmJiBub2RlLmxpc3RlbmVyVHlwZSA9PT0gbGlzdGVuZXJUeXBlKSB7XG4gICAgICAgIC8vIFNob3VsZCBpZ25vcmUgZHVwbGljYXRpb24uXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcHJldiA9IG5vZGU7XG4gICAgICBub2RlID0gbm9kZS5uZXh0O1xuICAgIH0gLy8gQWRkIGl0LlxuXG5cbiAgICBwcmV2Lm5leHQgPSBuZXdOb2RlO1xuICB9LFxuXG4gIC8qKlxyXG4gICAqIFJlbW92ZSBhIGdpdmVuIGxpc3RlbmVyIGZyb20gdGhpcyBldmVudCB0YXJnZXQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZSB0byByZW1vdmUuXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIHRvIHJlbW92ZS5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW58e2NhcHR1cmU/OmJvb2xlYW4scGFzc2l2ZT86Ym9vbGVhbixvbmNlPzpib29sZWFufX0gW29wdGlvbnNdIFRoZSBvcHRpb25zIGZvciB0aGlzIGxpc3RlbmVyLlxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xuICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcbiAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBsaXN0ZW5lcnMgPSBnZXRMaXN0ZW5lcnModGhpcyk7XG4gICAgdmFyIGNhcHR1cmUgPSBpc09iamVjdChvcHRpb25zKSA/IEJvb2xlYW4ob3B0aW9ucy5jYXB0dXJlKSA6IEJvb2xlYW4ob3B0aW9ucyk7XG4gICAgdmFyIGxpc3RlbmVyVHlwZSA9IGNhcHR1cmUgPyBDQVBUVVJFIDogQlVCQkxFO1xuICAgIHZhciBwcmV2ID0gbnVsbDtcbiAgICB2YXIgbm9kZSA9IGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKTtcblxuICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcbiAgICAgIGlmIChub2RlLmxpc3RlbmVyID09PSBsaXN0ZW5lciAmJiBub2RlLmxpc3RlbmVyVHlwZSA9PT0gbGlzdGVuZXJUeXBlKSB7XG4gICAgICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XG4gICAgICAgICAgcHJldi5uZXh0ID0gbm9kZS5uZXh0O1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGUubmV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgIGxpc3RlbmVycy5zZXQoZXZlbnROYW1lLCBub2RlLm5leHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUoZXZlbnROYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcHJldiA9IG5vZGU7XG4gICAgICBub2RlID0gbm9kZS5uZXh0O1xuICAgIH1cbiAgfSxcblxuICAvKipcclxuICAgKiBEaXNwYXRjaCBhIGdpdmVuIGV2ZW50LlxyXG4gICAqIEBwYXJhbSB7RXZlbnR8e3R5cGU6c3RyaW5nfX0gZXZlbnQgVGhlIGV2ZW50IHRvIGRpc3BhdGNoLlxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBgZmFsc2VgIGlmIGNhbmNlbGVkLlxyXG4gICAqL1xuICBkaXNwYXRjaEV2ZW50OiBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50ID09IG51bGwgfHwgdHlwZW9mIGV2ZW50LnR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImV2ZW50LnR5cGVcIiBzaG91bGQgYmUgYSBzdHJpbmcuJyk7XG4gICAgfSAvLyBJZiBsaXN0ZW5lcnMgYXJlbid0IHJlZ2lzdGVyZWQsIHRlcm1pbmF0ZS5cblxuXG4gICAgdmFyIGxpc3RlbmVycyA9IGdldExpc3RlbmVycyh0aGlzKTtcbiAgICB2YXIgZXZlbnROYW1lID0gZXZlbnQudHlwZTtcbiAgICB2YXIgbm9kZSA9IGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKTtcblxuICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gLy8gU2luY2Ugd2UgY2Fubm90IHJld3JpdGUgc2V2ZXJhbCBwcm9wZXJ0aWVzLCBzbyB3cmFwIG9iamVjdC5cblxuXG4gICAgdmFyIHdyYXBwZWRFdmVudCA9IHdyYXBFdmVudCh0aGlzLCBldmVudCk7IC8vIFRoaXMgZG9lc24ndCBwcm9jZXNzIGNhcHR1cmluZyBwaGFzZSBhbmQgYnViYmxpbmcgcGhhc2UuXG4gICAgLy8gVGhpcyBpc24ndCBwYXJ0aWNpcGF0aW5nIGluIGEgdHJlZS5cblxuICAgIHZhciBwcmV2ID0gbnVsbDtcblxuICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcbiAgICAgIC8vIFJlbW92ZSB0aGlzIGxpc3RlbmVyIGlmIGl0J3Mgb25jZVxuICAgICAgaWYgKG5vZGUub25jZSkge1xuICAgICAgICBpZiAocHJldiAhPT0gbnVsbCkge1xuICAgICAgICAgIHByZXYubmV4dCA9IG5vZGUubmV4dDtcbiAgICAgICAgfSBlbHNlIGlmIChub2RlLm5leHQgIT09IG51bGwpIHtcbiAgICAgICAgICBsaXN0ZW5lcnMuc2V0KGV2ZW50TmFtZSwgbm9kZS5uZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGV2ZW50TmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXYgPSBub2RlO1xuICAgICAgfSAvLyBDYWxsIHRoaXMgbGlzdGVuZXJcblxuXG4gICAgICBzZXRQYXNzaXZlTGlzdGVuZXIod3JhcHBlZEV2ZW50LCBub2RlLnBhc3NpdmUgPyBub2RlLmxpc3RlbmVyIDogbnVsbCk7XG5cbiAgICAgIGlmICh0eXBlb2Ygbm9kZS5saXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG5vZGUubGlzdGVuZXIuY2FsbCh0aGlzLCB3cmFwcGVkRXZlbnQpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG5vZGUubGlzdGVuZXJUeXBlICE9PSBBVFRSSUJVVEUgJiYgdHlwZW9mIG5vZGUubGlzdGVuZXIuaGFuZGxlRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgbm9kZS5saXN0ZW5lci5oYW5kbGVFdmVudCh3cmFwcGVkRXZlbnQpO1xuICAgICAgfSAvLyBCcmVhayBpZiBgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uYCB3YXMgY2FsbGVkLlxuXG5cbiAgICAgIGlmIChpc1N0b3BwZWQod3JhcHBlZEV2ZW50KSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgbm9kZSA9IG5vZGUubmV4dDtcbiAgICB9XG5cbiAgICBzZXRQYXNzaXZlTGlzdGVuZXIod3JhcHBlZEV2ZW50LCBudWxsKTtcbiAgICBzZXRFdmVudFBoYXNlKHdyYXBwZWRFdmVudCwgMCk7XG4gICAgc2V0Q3VycmVudFRhcmdldCh3cmFwcGVkRXZlbnQsIG51bGwpO1xuICAgIHJldHVybiAhd3JhcHBlZEV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XG4gIH1cbn07IC8vIGBjb25zdHJ1Y3RvcmAgaXMgbm90IGVudW1lcmFibGUuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudFRhcmdldC5wcm90b3R5cGUsICdjb25zdHJ1Y3RvcicsIHtcbiAgdmFsdWU6IEV2ZW50VGFyZ2V0LFxuICBjb25maWd1cmFibGU6IHRydWUsXG4gIHdyaXRhYmxlOiB0cnVlXG59KTsgLy8gRW5zdXJlIGBldmVudFRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5FdmVudFRhcmdldGAgaXMgYHRydWVgLlxuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5FdmVudFRhcmdldCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgT2JqZWN0LnNldFByb3RvdHlwZU9mKEV2ZW50VGFyZ2V0LnByb3RvdHlwZSwgd2luZG93LkV2ZW50VGFyZ2V0LnByb3RvdHlwZSk7XG59XG5cbmV4cG9ydHMuZGVmaW5lRXZlbnRBdHRyaWJ1dGUgPSBkZWZpbmVFdmVudEF0dHJpYnV0ZTtcbmV4cG9ydHMuRXZlbnRUYXJnZXQgPSBFdmVudFRhcmdldDtcbmV4cG9ydHMuZGVmYXVsdCA9IEV2ZW50VGFyZ2V0O1xubW9kdWxlLmV4cG9ydHMgPSBFdmVudFRhcmdldDtcbm1vZHVsZS5leHBvcnRzLkV2ZW50VGFyZ2V0ID0gbW9kdWxlLmV4cG9ydHNbJ2RlZmF1bHQnXSA9IEV2ZW50VGFyZ2V0O1xubW9kdWxlLmV4cG9ydHMuZGVmaW5lRXZlbnRBdHRyaWJ1dGUgPSBkZWZpbmVFdmVudEF0dHJpYnV0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklpNHVMeTR1TDNOeVl5OWxlSFJsY201aGJDOWxkbVZ1ZEMxMFlYSm5aWFF0YzJocGJTNXFjeUpkTENKdVlXMWxjeUk2V3lKUFltcGxZM1FpTENKa1pXWnBibVZRY205d1pYSjBlU0lzSW1WNGNHOXlkSE1pTENKMllXeDFaU0lzSW5CeWFYWmhkR1ZFWVhSaElpd2lWMlZoYTAxaGNDSXNJbmR5WVhCd1pYSnpJaXdpY0dRaUxDSmxkbVZ1ZENJc0luSmxkSFlpTENKblpYUWlMQ0pqYjI1emIyeGxJaXdpWVhOelpYSjBJaXdpYzJWMFEyRnVZMlZzUm14aFp5SXNJbVJoZEdFaUxDSndZWE56YVhabFRHbHpkR1Z1WlhJaUxDSmxjbkp2Y2lJc0ltTmhibU5sYkdGaWJHVWlMQ0pqWVc1alpXeGxaQ0lzSW5CeVpYWmxiblJFWldaaGRXeDBJaXdpUlhabGJuUWlMQ0psZG1WdWRGUmhjbWRsZENJc0luTmxkQ0lzSW1WMlpXNTBVR2hoYzJVaUxDSmpkWEp5Wlc1MFZHRnlaMlYwSWl3aWMzUnZjSEJsWkNJc0ltbHRiV1ZrYVdGMFpWTjBiM0J3WldRaUxDSjBhVzFsVTNSaGJYQWlMQ0pFWVhSbElpd2libTkzSWl3aVpXNTFiV1Z5WVdKc1pTSXNJbXRsZVhNaUxDSnBJaXdpYkdWdVozUm9JaXdpYTJWNUlpd2laR1ZtYVc1bFVtVmthWEpsWTNSRVpYTmpjbWx3ZEc5eUlpd2ljSEp2ZEc5MGVYQmxJaXdpZEhsd1pTSXNJblJoY21kbGRDSXNJbU52YlhCdmMyVmtVR0YwYUNJc0lrNVBUa1VpTENKRFFWQlVWVkpKVGtkZlVFaEJVMFVpTENKQlZGOVVRVkpIUlZRaUxDSkNWVUpDVEVsT1IxOVFTRUZUUlNJc0luTjBiM0JRY205d1lXZGhkR2x2YmlJc0luTjBiM0JKYlcxbFpHbGhkR1ZRY205d1lXZGhkR2x2YmlJc0ltSjFZbUpzWlhNaUxDSkNiMjlzWldGdUlpd2laR1ZtWVhWc2RGQnlaWFpsYm5SbFpDSXNJbU52YlhCdmMyVmtJaXdpYzNKalJXeGxiV1Z1ZENJc0ltTmhibU5sYkVKMVltSnNaU0lzSW5KbGRIVnlibFpoYkhWbElpd2lhVzVwZEVWMlpXNTBJaXdpWTI5dVptbG5kWEpoWW14bElpd2lkM0pwZEdGaWJHVWlMQ0ozYVc1a2IzY2lMQ0p6WlhSUWNtOTBiM1I1Y0dWUFppSXNJbVJsWm1sdVpVTmhiR3hFWlhOamNtbHdkRzl5SWl3aVlYQndiSGtpTENKaGNtZDFiV1Z1ZEhNaUxDSmtaV1pwYm1WWGNtRndjR1Z5SWl3aVFtRnpaVVYyWlc1MElpd2ljSEp2ZEc4aUxDSkRkWE4wYjIxRmRtVnVkQ0lzSW1OaGJHd2lMQ0pqY21WaGRHVWlMQ0pqYjI1emRISjFZM1J2Y2lJc0ltUmxjMk55YVhCMGIzSWlMQ0puWlhSUGQyNVFjbTl3WlhKMGVVUmxjMk55YVhCMGIzSWlMQ0pwYzBaMWJtTWlMQ0puWlhSWGNtRndjR1Z5SWl3aWQzSmhjSEJsY2lJc0ltZGxkRkJ5YjNSdmRIbHdaVTltSWl3aWQzSmhjRVYyWlc1MElpd2lWM0poY0hCbGNpSXNJbWx6VTNSdmNIQmxaQ0lzSW5ObGRFVjJaVzUwVUdoaGMyVWlMQ0p6WlhSRGRYSnlaVzUwVkdGeVoyVjBJaXdpYzJWMFVHRnpjMmwyWlV4cGMzUmxibVZ5SWl3aWJHbHpkR1Z1WlhKelRXRndJaXdpUTBGUVZGVlNSU0lzSWtKVlFrSk1SU0lzSWtGVVZGSkpRbFZVUlNJc0ltbHpUMkpxWldOMElpd2llQ0lzSW1kbGRFeHBjM1JsYm1WeWN5SXNJbXhwYzNSbGJtVnljeUlzSWxSNWNHVkZjbkp2Y2lJc0ltUmxabWx1WlVWMlpXNTBRWFIwY21saWRYUmxSR1Z6WTNKcGNIUnZjaUlzSW1WMlpXNTBUbUZ0WlNJc0ltNXZaR1VpTENKc2FYTjBaVzVsY2xSNWNHVWlMQ0pzYVhOMFpXNWxjaUlzSW01bGVIUWlMQ0p3Y21WMklpd2laR1ZzWlhSbElpd2libVYzVG05a1pTSXNJbkJoYzNOcGRtVWlMQ0p2Ym1ObElpd2laR1ZtYVc1bFJYWmxiblJCZEhSeWFXSjFkR1VpTENKbGRtVnVkRlJoY21kbGRGQnliM1J2ZEhsd1pTSXNJbVJsWm1sdVpVTjFjM1J2YlVWMlpXNTBWR0Z5WjJWMElpd2laWFpsYm5ST1lXMWxjeUlzSWtOMWMzUnZiVVYyWlc1MFZHRnlaMlYwSWl3aVJYWmxiblJVWVhKblpYUWlMQ0pOWVhBaUxDSkJjbkpoZVNJc0ltbHpRWEp5WVhraUxDSjBlWEJsY3lJc0ltRmtaRVYyWlc1MFRHbHpkR1Z1WlhJaUxDSnZjSFJwYjI1eklpd2liM0IwYVc5dWMwbHpUMkpxSWl3aVkyRndkSFZ5WlNJc0luVnVaR1ZtYVc1bFpDSXNJbkpsYlc5MlpVVjJaVzUwVEdsemRHVnVaWElpTENKa2FYTndZWFJqYUVWMlpXNTBJaXdpZDNKaGNIQmxaRVYyWlc1MElpd2laWEp5SWl3aWFHRnVaR3hsUlhabGJuUWlMQ0prWldaaGRXeDBJaXdpYlc5a2RXeGxJbDBzSW0xaGNIQnBibWR6SWpvaVFVRkJRVHRCUVVOQk96dEJRVVZCT3p0QlFVVkJPenM3T3p0QlFVdEJPenM3T3pzN1FVRkZRVUVzVFVGQlRTeERRVUZEUXl4alFVRlFMRU5CUVhOQ1F5eFBRVUYwUWl4RlFVRXJRaXhaUVVFdlFpeEZRVUUyUXp0QlFVRkZReXhGUVVGQlFTeExRVUZMTEVWQlFVVTdRVUZCVkN4RFFVRTNRenRCUVVWQk96czdPenM3T3pzN096czdPenRCUVdOQk96czdPenM3UVVGTFFTeEpRVUZOUXl4WFFVRlhMRWRCUVVjc1NVRkJTVU1zVDBGQlNpeEZRVUZ3UWp0QlFVVkJPenM3T3pzN1FVRkxRU3hKUVVGTlF5eFJRVUZSTEVkQlFVY3NTVUZCU1VRc1QwRkJTaXhGUVVGcVFqdEJRVVZCT3pzN096czdPMEZCVFVFc1UwRkJVMFVzUlVGQlZDeERRVUZaUXl4TFFVRmFMRVZCUVcxQ08wRkJRMnBDTEUxQlFVMURMRWxCUVVrc1IwRkJSMHdzVjBGQlZ5eERRVUZEVFN4SFFVRmFMRU5CUVdkQ1JpeExRVUZvUWl4RFFVRmlPMEZCUTBGSExFVkJRVUZCTEU5QlFVOHNRMEZCUTBNc1RVRkJVaXhEUVVGbFNDeEpRVUZKTEVsQlFVa3NTVUZCZGtJc1JVRkJOa0lzTmtOQlFUZENMRVZCUVRSRlJDeExRVUUxUlR0QlFVTkJMRk5CUVU5RExFbEJRVkE3UVVGRFJEdEJRVVZFT3pzN096czdRVUZKUVN4VFFVRlRTU3hoUVVGVUxFTkJRWFZDUXl4SlFVRjJRaXhGUVVFMlFqdEJRVU16UWl4TlFVRkpRU3hKUVVGSkxFTkJRVU5ETEdWQlFVd3NTVUZCZDBJc1NVRkJOVUlzUlVGQmEwTTdRVUZEYUVNc1VVRkJTU3hQUVVGUFNpeFBRVUZRTEV0QlFXMUNMRmRCUVc1Q0xFbEJRV3RETEU5QlFVOUJMRTlCUVU4c1EwRkJRMHNzUzBGQlppeExRVUY1UWl4VlFVRXZSQ3hGUVVFeVJUdEJRVU42UlV3c1RVRkJRVUVzVDBGQlR5eERRVUZEU3l4TFFVRlNMRU5CUVdNc2IwVkJRV1FzUlVGQmIwWkdMRWxCUVVrc1EwRkJRME1zWlVGQmVrWTdRVUZEUkRzN1FVRkRSRHRCUVVORU96dEJRVU5FTEUxQlFVa3NRMEZCUTBRc1NVRkJTU3hEUVVGRFRpeExRVUZNTEVOQlFWZFRMRlZCUVdoQ0xFVkJRVFJDTzBGQlF6RkNPMEZCUTBRN08wRkJSVVJJTEVWQlFVRkJMRWxCUVVrc1EwRkJRMGtzVVVGQlRDeEhRVUZuUWl4SlFVRm9RanM3UVVGRFFTeE5RVUZKTEU5QlFVOUtMRWxCUVVrc1EwRkJRMDRzUzBGQlRDeERRVUZYVnl4alFVRnNRaXhMUVVGeFF5eFZRVUY2UXl4RlFVRnhSRHRCUVVOdVJFd3NTVUZCUVVFc1NVRkJTU3hEUVVGRFRpeExRVUZNTEVOQlFWZFhMR05CUVZnN1FVRkRSRHRCUVVOR08wRkJSVVE3T3pzN08wRkJTVUU3T3pzN096czdPMEZCVFVFc1UwRkJVME1zUzBGQlZDeERRVUZsUXl4WFFVRm1MRVZCUVRSQ1lpeExRVUUxUWl4RlFVRnRRenRCUVVOcVEwb3NSVUZCUVVFc1YwRkJWeXhEUVVGRGEwSXNSMEZCV2l4RFFVRm5RaXhKUVVGb1FpeEZRVUZ6UWp0QlFVTndRa1FzU1VGQlFVRXNWMEZCVnl4RlFVRllRU3hYUVVSdlFqdEJRVVZ3UW1Jc1NVRkJRVUVzUzBGQlN5eEZRVUZNUVN4TFFVWnZRanRCUVVkd1FtVXNTVUZCUVVFc1ZVRkJWU3hGUVVGRkxFTkJTRkU3UVVGSmNFSkRMRWxCUVVGQkxHRkJRV0VzUlVGQlJVZ3NWMEZLU3p0QlFVdHdRa2dzU1VGQlFVRXNVVUZCVVN4RlFVRkZMRXRCVEZVN1FVRk5jRUpQTEVsQlFVRkJMRTlCUVU4c1JVRkJSU3hMUVU1WE8wRkJUM0JDUXl4SlFVRkJRU3huUWtGQlowSXNSVUZCUlN4TFFWQkZPMEZCVVhCQ1dDeEpRVUZCUVN4bFFVRmxMRVZCUVVVc1NVRlNSenRCUVZOd1Fsa3NTVUZCUVVFc1UwRkJVeXhGUVVGRmJrSXNTMEZCU3l4RFFVRkRiVUlzVTBGQlRpeEpRVUZ0UWtNc1NVRkJTU3hEUVVGRFF5eEhRVUZNTzBGQlZGWXNSMEZCZEVJc1JVRkVhVU1zUTBGaGFrTTdPMEZCUTBFM1FpeEZRVUZCUVN4TlFVRk5MRU5CUVVORExHTkJRVkFzUTBGQmMwSXNTVUZCZEVJc1JVRkJORUlzVjBGQk5VSXNSVUZCZVVNN1FVRkJSVVVzU1VGQlFVRXNTMEZCU3l4RlFVRkZMRXRCUVZRN1FVRkJaMEl5UWl4SlFVRkJRU3hWUVVGVkxFVkJRVVU3UVVGQk5VSXNSMEZCZWtNc1JVRmthVU1zUTBGblFtcERPenRCUVVOQkxFMUJRVTFETEVsQlFVa3NSMEZCUnk5Q0xFMUJRVTBzUTBGQlF5dENMRWxCUVZBc1EwRkJXWFpDTEV0QlFWb3NRMEZCWWpzN1FVRkRRU3hQUVVGTExFbEJRVWwzUWl4RFFVRkRMRWRCUVVjc1EwRkJZaXhGUVVGblFrRXNRMEZCUXl4SFFVRkhSQ3hKUVVGSkxFTkJRVU5GTEUxQlFYcENMRVZCUVdsRExFVkJRVVZFTEVOQlFXNURMRVZCUVhORE8wRkJRM0JETEZGQlFVMUZMRWRCUVVjc1IwRkJSMGdzU1VGQlNTeERRVUZEUXl4RFFVRkVMRU5CUVdoQ096dEJRVU5CTEZGQlFVa3NSVUZCUlVVc1IwRkJSeXhKUVVGSkxFbEJRVlFzUTBGQlNpeEZRVUZ2UWp0QlFVTnNRbXhETEUxQlFVRkJMRTFCUVUwc1EwRkJRME1zWTBGQlVDeERRVUZ6UWl4SlFVRjBRaXhGUVVFMFFtbERMRWRCUVRWQ0xFVkJRV2xEUXl4M1FrRkJkMElzUTBGQlEwUXNSMEZCUkN4RFFVRjZSRHRCUVVORU8wRkJRMFk3UVVGRFJpeERMRU5CUlVRN096dEJRVU5CWkN4TFFVRkxMRU5CUVVOblFpeFRRVUZPTEVkQlFXdENPMEZCUTJoQ096czdPMEZCU1VFc1RVRkJTVU1zU1VGQlNpeEhRVUZYTzBGQlExUXNWMEZCVHpsQ0xFVkJRVVVzUTBGQlF5eEpRVUZFTEVOQlFVWXNRMEZCVTBNc1MwRkJWQ3hEUVVGbE5rSXNTVUZCZEVJN1FVRkRSQ3hIUVZCbE96dEJRVk5vUWpzN096dEJRVWxCTEUxQlFVbERMRTFCUVVvc1IwRkJZVHRCUVVOWUxGZEJRVTh2UWl4RlFVRkZMRU5CUVVNc1NVRkJSQ3hEUVVGR0xFTkJRVk5qTEZkQlFXaENPMEZCUTBRc1IwRm1aVHM3UVVGcFFtaENPenM3TzBGQlNVRXNUVUZCU1Vjc1lVRkJTaXhIUVVGdlFqdEJRVU5zUWl4WFFVRlBha0lzUlVGQlJTeERRVUZETEVsQlFVUXNRMEZCUml4RFFVRlRhVUlzWVVGQmFFSTdRVUZEUkN4SFFYWkNaVHM3UVVGNVFtaENPenM3UVVGSFFXVXNSVUZCUVVFc1dVRTFRbWRDTERCQ1FUUkNSRHRCUVVOaUxGRkJRVTFtTEdGQlFXRXNSMEZCUjJwQ0xFVkJRVVVzUTBGQlF5eEpRVUZFTEVOQlFVWXNRMEZCVTJsQ0xHRkJRUzlDT3p0QlFVTkJMRkZCUVVsQkxHRkJRV0VzU1VGQlNTeEpRVUZ5UWl4RlFVRXlRanRCUVVONlFpeGhRVUZQTEVWQlFWQTdRVUZEUkRzN1FVRkRSQ3hYUVVGUExFTkJRVU5CTEdGQlFVUXNRMEZCVUR0QlFVTkVMRWRCYkVObE96dEJRVzlEYUVJN096czdRVUZKUVN4TlFVRkpaMElzU1VGQlNpeEhRVUZYTzBGQlExUXNWMEZCVHl4RFFVRlFPMEZCUTBRc1IwRXhRMlU3TzBGQk5FTm9RanM3T3p0QlFVbEJMRTFCUVVsRExHVkJRVW9zUjBGQmMwSTdRVUZEY0VJc1YwRkJUeXhEUVVGUU8wRkJRMFFzUjBGc1JHVTdPMEZCYjBSb1FqczdPenRCUVVsQkxFMUJRVWxETEZOQlFVb3NSMEZCWjBJN1FVRkRaQ3hYUVVGUExFTkJRVkE3UVVGRFJDeEhRVEZFWlRzN1FVRTBSR2hDT3pzN08wRkJTVUVzVFVGQlNVTXNZMEZCU2l4SFFVRnhRanRCUVVOdVFpeFhRVUZQTEVOQlFWQTdRVUZEUkN4SFFXeEZaVHM3UVVGdlJXaENPenM3TzBGQlNVRXNUVUZCU1hCQ0xGVkJRVW9zUjBGQmFVSTdRVUZEWml4WFFVRlBhRUlzUlVGQlJTeERRVUZETEVsQlFVUXNRMEZCUml4RFFVRlRaMElzVlVGQmFFSTdRVUZEUkN4SFFURkZaVHM3UVVFMFJXaENPenM3TzBGQlNVRnhRaXhGUVVGQlFTeGxRV2hHWjBJc05rSkJaMFpGTzBGQlEyaENMRkZCUVUwNVFpeEpRVUZKTEVkQlFVZFFMRVZCUVVVc1EwRkJReXhKUVVGRUxFTkJRV1k3UVVGRlFVOHNTVUZCUVVFc1NVRkJTU3hEUVVGRFZ5eFBRVUZNTEVkQlFXVXNTVUZCWmpzN1FVRkRRU3hSUVVGSkxFOUJRVTlZTEVsQlFVa3NRMEZCUTA0c1MwRkJUQ3hEUVVGWGIwTXNaVUZCYkVJc1MwRkJjME1zVlVGQk1VTXNSVUZCYzBRN1FVRkRjRVE1UWl4TlFVRkJRU3hKUVVGSkxFTkJRVU5PTEV0QlFVd3NRMEZCVjI5RExHVkJRVmc3UVVGRFJEdEJRVU5HTEVkQmRrWmxPenRCUVhsR2FFSTdPenM3UVVGSlFVTXNSVUZCUVVFc2QwSkJOMFpuUWl4elEwRTJSbGM3UVVGRGVrSXNVVUZCVFM5Q0xFbEJRVWtzUjBGQlIxQXNSVUZCUlN4RFFVRkRMRWxCUVVRc1EwRkJaanRCUVVWQlR5eEpRVUZCUVN4SlFVRkpMRU5CUVVOWExFOUJRVXdzUjBGQlpTeEpRVUZtTzBGQlEwRllMRWxCUVVGQkxFbEJRVWtzUTBGQlExa3NaMEpCUVV3c1IwRkJkMElzU1VGQmVFSTdPMEZCUTBFc1VVRkJTU3hQUVVGUFdpeEpRVUZKTEVOQlFVTk9MRXRCUVV3c1EwRkJWM0ZETEhkQ1FVRnNRaXhMUVVFclF5eFZRVUZ1UkN4RlFVRXJSRHRCUVVNM1JDOUNMRTFCUVVGQkxFbEJRVWtzUTBGQlEwNHNTMEZCVEN4RFFVRlhjVU1zZDBKQlFWZzdRVUZEUkR0QlFVTkdMRWRCY2tkbE96dEJRWFZIYUVJN096czdRVUZKUVN4TlFVRkpReXhQUVVGS0xFZEJRV003UVVGRFdpeFhRVUZQUXl4UFFVRlBMRU5CUVVONFF5eEZRVUZGTEVOQlFVTXNTVUZCUkN4RFFVRkdMRU5CUVZORExFdEJRVlFzUTBGQlpYTkRMRTlCUVdoQ0xFTkJRV1E3UVVGRFJDeEhRVGRIWlRzN1FVRXJSMmhDT3pzN08wRkJTVUVzVFVGQlNUZENMRlZCUVVvc1IwRkJhVUk3UVVGRFppeFhRVUZQT0VJc1QwRkJUeXhEUVVGRGVFTXNSVUZCUlN4RFFVRkRMRWxCUVVRc1EwRkJSaXhEUVVGVFF5eExRVUZVTEVOQlFXVlRMRlZCUVdoQ0xFTkJRV1E3UVVGRFJDeEhRWEpJWlRzN1FVRjFTR2hDT3pzN08wRkJTVUZGTEVWQlFVRkJMR05CTTBoblFpdzBRa0V5U0VNN1FVRkRaazRzU1VGQlFVRXNZVUZCWVN4RFFVRkRUaXhGUVVGRkxFTkJRVU1zU1VGQlJDeERRVUZJTEVOQlFXSTdRVUZEUkN4SFFUZElaVHM3UVVFclNHaENPenM3TzBGQlNVRXNUVUZCU1hsRExHZENRVUZLTEVkQlFYVkNPMEZCUTNKQ0xGZEJRVTk2UXl4RlFVRkZMRU5CUVVNc1NVRkJSQ3hEUVVGR0xFTkJRVk5YTEZGQlFXaENPMEZCUTBRc1IwRnlTV1U3TzBGQmRVbG9RanM3T3p0QlFVbEJMRTFCUVVrclFpeFJRVUZLTEVkQlFXVTdRVUZEWWl4WFFVRlBSaXhQUVVGUExFTkJRVU40UXl4RlFVRkZMRU5CUVVNc1NVRkJSQ3hEUVVGR0xFTkJRVk5ETEV0QlFWUXNRMEZCWlhsRExGRkJRV2hDTEVOQlFXUTdRVUZEUkN4SFFUZEpaVHM3UVVFclNXaENPenM3TzBGQlNVRXNUVUZCU1hSQ0xGTkJRVW9zUjBGQlowSTdRVUZEWkN4WFFVRlBjRUlzUlVGQlJTeERRVUZETEVsQlFVUXNRMEZCUml4RFFVRlRiMElzVTBGQmFFSTdRVUZEUkN4SFFYSktaVHM3UVVGMVNtaENPenM3T3p0QlFVdEJMRTFCUVVsMVFpeFZRVUZLTEVkQlFXbENPMEZCUTJZc1YwRkJUek5ETEVWQlFVVXNRMEZCUXl4SlFVRkVMRU5CUVVZc1EwRkJVMk1zVjBGQmFFSTdRVUZEUkN4SFFUbEtaVHM3UVVGblMyaENPenM3T3p0QlFVdEJMRTFCUVVrNFFpeFpRVUZLTEVkQlFXMUNPMEZCUTJwQ0xGZEJRVTgxUXl4RlFVRkZMRU5CUVVNc1NVRkJSQ3hEUVVGR0xFTkJRVk5yUWl4UFFVRm9RanRCUVVORUxFZEJka3RsT3p0QlFYZExhRUlzVFVGQlNUQkNMRmxCUVVvc1EwRkJhVUpvUkN4TFFVRnFRaXhGUVVGM1FqdEJRVU4wUWl4UlFVRkpMRU5CUVVOQkxFdEJRVXdzUlVGQldUdEJRVU5XTzBGQlEwUTdPMEZCUTBRc1VVRkJUVmNzU1VGQlNTeEhRVUZIVUN4RlFVRkZMRU5CUVVNc1NVRkJSQ3hEUVVGbU8wRkJSVUZQTEVsQlFVRkJMRWxCUVVrc1EwRkJRMWNzVDBGQlRDeEhRVUZsTEVsQlFXWTdPMEZCUTBFc1VVRkJTU3hQUVVGUFdDeEpRVUZKTEVOQlFVTk9MRXRCUVV3c1EwRkJWekpETEZsQlFXeENMRXRCUVcxRExGTkJRWFpETEVWQlFXdEVPMEZCUTJoRWNrTXNUVUZCUVVFc1NVRkJTU3hEUVVGRFRpeExRVUZNTEVOQlFWY3lReXhaUVVGWUxFZEJRVEJDTEVsQlFURkNPMEZCUTBRN1FVRkRSaXhIUVd4TVpUczdRVUZ2VEdoQ096czdPenRCUVV0QkxFMUJRVWxETEZkQlFVb3NSMEZCYTBJN1FVRkRhRUlzVjBGQlR5eERRVUZETjBNc1JVRkJSU3hEUVVGRExFbEJRVVFzUTBGQlJpeERRVUZUVnl4UlFVRnFRanRCUVVORUxFZEJNMHhsT3p0QlFUUk1hRUlzVFVGQlNXdERMRmRCUVVvc1EwRkJaMEpxUkN4TFFVRm9RaXhGUVVGMVFqdEJRVU55UWl4UlFVRkpMRU5CUVVOQkxFdEJRVXdzUlVGQldUdEJRVU5XVlN4TlFVRkJRU3hoUVVGaExFTkJRVU5PTEVWQlFVVXNRMEZCUXl4SlFVRkVMRU5CUVVnc1EwRkJZanRCUVVORU8wRkJRMFlzUjBGb1RXVTdPMEZCYTAxb1FqczdPenM3T3p0QlFVOUJPRU1zUlVGQlFVRXNVMEY2VFdkQ0xIVkNRWGxOU2l4RFFVTldPMEZCUTBRN1FVRXpUV1VzUTBGQmJFSXNReXhEUVRoTlFUczdRVUZEUVhKRUxFMUJRVTBzUTBGQlEwTXNZMEZCVUN4RFFVRnpRbTFDTEV0QlFVc3NRMEZCUTJkQ0xGTkJRVFZDTEVWQlFYVkRMR0ZCUVhaRExFVkJRWE5FTzBGQlEzQkVha01zUlVGQlFVRXNTMEZCU3l4RlFVRkZhVUlzUzBGRU5rTTdRVUZGY0VSclF5eEZRVUZCUVN4WlFVRlpMRVZCUVVVc1NVRkdjME03UVVGSGNFUkRMRVZCUVVGQkxGRkJRVkVzUlVGQlJUdEJRVWd3UXl4RFFVRjBSQ3hGTEVOQlRVRTdPMEZCUTBFc1NVRkJTU3hQUVVGUFF5eE5RVUZRTEV0QlFXdENMRmRCUVd4Q0xFbEJRV2xETEU5QlFVOUJMRTFCUVUwc1EwRkJRM0JETEV0QlFXUXNTMEZCZDBJc1YwRkJOMFFzUlVGQk1FVTdRVUZEZUVWd1FpeEZRVUZCUVN4TlFVRk5MRU5CUVVONVJDeGpRVUZRTEVOQlFYTkNja01zUzBGQlN5eERRVUZEWjBJc1UwRkJOVUlzUlVGQmRVTnZRaXhOUVVGTkxFTkJRVU53UXl4TFFVRlFMRU5CUVdGblFpeFRRVUZ3UkN4RlFVUjNSU3hEUVVkNFJUczdRVUZEUVRsQ0xFVkJRVUZCTEZGQlFWRXNRMEZCUTJkQ0xFZEJRVlFzUTBGQllXdERMRTFCUVUwc1EwRkJRM0JETEV0QlFWQXNRMEZCWVdkQ0xGTkJRVEZDTEVWQlFYRkRhRUlzUzBGQmNrTTdRVUZEUkR0QlFVVkVPenM3T3pzN096dEJRVTFCTEZOQlFWTmxMSGRDUVVGVUxFTkJRV3REUkN4SFFVRnNReXhGUVVGMVF6dEJRVU55UXl4VFFVRlBPMEZCUTB4NFFpeEpRVUZCUVN4SFFVUkxMR2xDUVVORE8wRkJRMG9zWVVGQlQwZ3NSVUZCUlN4RFFVRkRMRWxCUVVRc1EwRkJSaXhEUVVGVFF5eExRVUZVTEVOQlFXVXdRaXhIUVVGbUxFTkJRVkE3UVVGRFJDeExRVWhKTzBGQlNVeGFMRWxCUVVGQkxFZEJTa3NzWlVGSlJHNUNMRXRCU2tNc1JVRkpUVHRCUVVOVVNTeE5RVUZCUVN4RlFVRkZMRU5CUVVNc1NVRkJSQ3hEUVVGR0xFTkJRVk5ETEV0QlFWUXNRMEZCWlRCQ0xFZEJRV1lzU1VGQmMwSXZRaXhMUVVGMFFqdEJRVU5FTEV0QlRrazdRVUZQVEcxRUxFbEJRVUZCTEZsQlFWa3NSVUZCUlN4SlFWQlVPMEZCVVV4NFFpeEpRVUZCUVN4VlFVRlZMRVZCUVVVN1FVRlNVQ3hIUVVGUU8wRkJWVVE3UVVGRlJEczdPenM3T3pzN1FVRk5RU3hUUVVGVE5FSXNiMEpCUVZRc1EwRkJPRUo0UWl4SFFVRTVRaXhGUVVGdFF6dEJRVU5xUXl4VFFVRlBPMEZCUTB3dlFpeEpRVUZCUVN4TFFVUkxMRzFDUVVOSE8wRkJRMDRzVlVGQlRVc3NTMEZCU3l4SFFVRkhSQ3hGUVVGRkxFTkJRVU1zU1VGQlJDeERRVUZHTEVOQlFWTkRMRXRCUVhaQ08wRkJRMEVzWVVGQlQwRXNTMEZCU3l4RFFVRkRNRUlzUjBGQlJDeERRVUZNTEVOQlFWZDVRaXhMUVVGWUxFTkJRV2xDYmtRc1MwRkJha0lzUlVGQmQwSnZSQ3hUUVVGNFFpeERRVUZRTzBGQlEwUXNTMEZLU1R0QlFVdE1UaXhKUVVGQlFTeFpRVUZaTEVWQlFVVXNTVUZNVkR0QlFVMU1lRUlzU1VGQlFVRXNWVUZCVlN4RlFVRkZPMEZCVGxBc1IwRkJVRHRCUVZGRU8wRkJSVVE3T3pzN096czdPenRCUVU5QkxGTkJRVk1yUWl4aFFVRlVMRU5CUVhWQ1F5eFRRVUYyUWl4RlFVRnJRME1zUzBGQmJFTXNSVUZCZVVNN1FVRkRka01zVFVGQlRXaERMRWxCUVVrc1IwRkJSeTlDTEUxQlFVMHNRMEZCUXl0Q0xFbEJRVkFzUTBGQldXZERMRXRCUVZvc1EwRkJZanM3UVVGRFFTeE5RVUZKYUVNc1NVRkJTU3hEUVVGRFJTeE5RVUZNTEV0QlFXZENMRU5CUVhCQ0xFVkJRWFZDTzBGQlEzSkNMRmRCUVU4MlFpeFRRVUZRTzBGQlEwUTdRVUZGUkRzN08wRkJRMEVzVjBGQlUwVXNWMEZCVkN4RFFVRnhRak5ETEZkQlFYSkNMRVZCUVd0RFlpeExRVUZzUXl4RlFVRjVRenRCUVVOMlEzTkVMRWxCUVVGQkxGTkJRVk1zUTBGQlEwY3NTVUZCVml4RFFVRmxMRWxCUVdZc1JVRkJjVUkxUXl4WFFVRnlRaXhGUVVGclEySXNTMEZCYkVNN1FVRkRSRHM3UVVGRlJIZEVMRVZCUVVGQkxGZEJRVmNzUTBGQlF6VkNMRk5CUVZvc1IwRkJkMEp3UXl4TlFVRk5MRU5CUVVOclJTeE5RVUZRTEVOQlFXTktMRk5CUVZNc1EwRkJRekZDTEZOQlFYaENMRVZCUVcxRE8wRkJRM3BFSzBJc1NVRkJRVUVzVjBGQlZ5eEZRVUZGTzBGQlFVVm9SU3hOUVVGQlFTeExRVUZMTEVWQlFVVTJSQ3hYUVVGVU8wRkJRWE5DVml4TlFVRkJRU3haUVVGWkxFVkJRVVVzU1VGQmNFTTdRVUZCTUVORExFMUJRVUZCTEZGQlFWRXNSVUZCUlR0QlFVRndSRHRCUVVRMFF5eEhRVUZ1UXl4RFFVRjRRaXhEUVZoMVF5eERRV1YyUXpzN1FVRkRRU3hQUVVGTExFbEJRVWwyUWl4RFFVRkRMRWRCUVVjc1EwRkJZaXhGUVVGblFrRXNRMEZCUXl4SFFVRkhSQ3hKUVVGSkxFTkJRVU5GTEUxQlFYcENMRVZCUVdsRExFVkJRVVZFTEVOQlFXNURMRVZCUVhORE8wRkJRM0JETEZGQlFVMUZMRWRCUVVjc1IwRkJSMGdzU1VGQlNTeERRVUZEUXl4RFFVRkVMRU5CUVdoQ096dEJRVU5CTEZGQlFVa3NSVUZCUlVVc1IwRkJSeXhKUVVGSk5FSXNVMEZCVXl4RFFVRkRNVUlzVTBGQmJrSXNRMEZCU2l4RlFVRnRRenRCUVVOcVF5eFZRVUZOWjBNc1ZVRkJWU3hIUVVGSGNFVXNUVUZCVFN4RFFVRkRjVVVzZDBKQlFWQXNRMEZCWjBOT0xFdEJRV2hETEVWQlFYVkROMElzUjBGQmRrTXNRMEZCYmtJN1FVRkRRU3hWUVVGTmIwTXNUVUZCVFN4SFFVRkhMRTlCUVU5R0xGVkJRVlVzUTBGQlEycEZMRXRCUVd4Q0xFdEJRVFJDTEZWQlFUTkRPMEZCUTBGSUxFMUJRVUZCTEUxQlFVMHNRMEZCUTBNc1kwRkJVQ3hEUVVORkswUXNWMEZCVnl4RFFVRkROVUlzVTBGRVpDeEZRVVZGUml4SFFVWkdMRVZCUjBWdlF5eE5RVUZOTEVkQlFVZGFMRzlDUVVGdlFpeERRVUZEZUVJc1IwRkJSQ3hEUVVGMlFpeEhRVUVyUWtNc2QwSkJRWGRDTEVOQlFVTkVMRWRCUVVRc1EwRklMMFE3UVVGTFJEdEJRVU5HT3p0QlFVVkVMRk5CUVU4NFFpeFhRVUZRTzBGQlEwUTdRVUZGUkRzN096czdPenM3UVVGTlFTeFRRVUZUVHl4VlFVRlVMRU5CUVc5Q1VpeExRVUZ3UWl4RlFVRXlRanRCUVVONlFpeE5RVUZKUVN4TFFVRkxMRWxCUVVrc1NVRkJWQ3hKUVVGcFFrRXNTMEZCU3l4TFFVRkxMMFFzVFVGQlRTeERRVUZEYjBNc1UwRkJkRU1zUlVGQmFVUTdRVUZETDBNc1YwRkJUMmhDTEV0QlFWQTdRVUZEUkRzN1FVRkZSQ3hOUVVGSmIwUXNUMEZCVHl4SFFVRkhiRVVzVVVGQlVTeERRVUZEU1N4SFFVRlVMRU5CUVdGeFJDeExRVUZpTEVOQlFXUTdPMEZCUTBFc1RVRkJTVk1zVDBGQlR5eEpRVUZKTEVsQlFXWXNSVUZCY1VJN1FVRkRia0pCTEVsQlFVRkJMRTlCUVU4c1IwRkJSMWdzWVVGQllTeERRVUZEVlN4VlFVRlZMRU5CUVVOMlJTeE5RVUZOTEVOQlFVTjVSU3hqUVVGUUxFTkJRWE5DVml4TFFVRjBRaXhEUVVGRUxFTkJRVmdzUlVGQk1rTkJMRXRCUVRORExFTkJRWFpDTzBGQlEwRjZSQ3hKUVVGQlFTeFJRVUZSTEVOQlFVTm5RaXhIUVVGVUxFTkJRV0Y1UXl4TFFVRmlMRVZCUVc5Q1V5eFBRVUZ3UWp0QlFVTkVPenRCUVVORUxGTkJRVTlCTEU5QlFWQTdRVUZEUkR0QlFVVkVPenM3T3pzN096czdRVUZQUVN4VFFVRlRSU3hUUVVGVUxFTkJRVzFDY2tRc1YwRkJia0lzUlVGQlowTmlMRXRCUVdoRExFVkJRWFZETzBGQlEzSkRMRTFCUVUxdFJTeFBRVUZQTEVkQlFVZEtMRlZCUVZVc1EwRkJRM1pGTEUxQlFVMHNRMEZCUTNsRkxHTkJRVkFzUTBGQmMwSnFSU3hMUVVGMFFpeERRVUZFTEVOQlFURkNPMEZCUTBFc1UwRkJUeXhKUVVGSmJVVXNUMEZCU2l4RFFVRlpkRVFzVjBGQldpeEZRVUY1UW1Jc1MwRkJla0lzUTBGQlVEdEJRVU5FTzBGQlJVUTdPenM3T3pzN08wRkJUVUVzVTBGQlUyOUZMRk5CUVZRc1EwRkJiVUp3UlN4TFFVRnVRaXhGUVVFd1FqdEJRVU40UWl4VFFVRlBSQ3hGUVVGRkxFTkJRVU5ETEV0QlFVUXNRMEZCUml4RFFVRlZhMElzWjBKQlFXcENPMEZCUTBRN1FVRkZSRHM3T3pzN096czdPMEZCVDBFc1UwRkJVMjFFTEdGQlFWUXNRMEZCZFVKeVJTeExRVUYyUWl4RlFVRTRRbVVzVlVGQk9VSXNSVUZCTUVNN1FVRkRlRU5vUWl4RlFVRkJRU3hGUVVGRkxFTkJRVU5ETEV0QlFVUXNRMEZCUml4RFFVRlZaU3hWUVVGV0xFZEJRWFZDUVN4VlFVRjJRanRCUVVORU8wRkJSVVE3T3pzN096czdPenRCUVU5QkxGTkJRVk4xUkN4blFrRkJWQ3hEUVVFd1FuUkZMRXRCUVRGQ0xFVkJRV2xEWjBJc1lVRkJha01zUlVGQlowUTdRVUZET1VOcVFpeEZRVUZCUVN4RlFVRkZMRU5CUVVORExFdEJRVVFzUTBGQlJpeERRVUZWWjBJc1lVRkJWaXhIUVVFd1FrRXNZVUZCTVVJN1FVRkRSRHRCUVVWRU96czdPenM3T3pzN1FVRlBRU3hUUVVGVGRVUXNhMEpCUVZRc1EwRkJORUoyUlN4TFFVRTFRaXhGUVVGdFEwOHNaVUZCYmtNc1JVRkJiMFE3UVVGRGJFUlNMRVZCUVVGQkxFVkJRVVVzUTBGQlEwTXNTMEZCUkN4RFFVRkdMRU5CUVZWUExHVkJRVllzUjBGQk5FSkJMR1ZCUVRWQ08wRkJRMFE3UVVGRlJEczdPenM3T3pzN096dEJRVlZCT3pzN096czdRVUZKUVN4SlFVRk5hVVVzV1VGQldTeEhRVUZITEVsQlFVa3pSU3hQUVVGS0xFVkJRWEpDTEVNc1EwRkZRVHM3UVVGRFFTeEpRVUZOTkVVc1QwRkJUeXhIUVVGSExFTkJRV2hDTzBGQlEwRXNTVUZCVFVNc1RVRkJUU3hIUVVGSExFTkJRV1k3UVVGRFFTeEpRVUZOUXl4VFFVRlRMRWRCUVVjc1EwRkJiRUk3UVVGRlFUczdPenM3TzBGQlMwRXNVMEZCVTBNc1VVRkJWQ3hEUVVGclFrTXNRMEZCYkVJc1JVRkJjVUk3UVVGRGJrSXNVMEZCVDBFc1EwRkJReXhMUVVGTExFbEJRVTRzU1VGQll5eHpRa0ZCVDBFc1EwRkJVQ3hOUVVGaExGRkJRV3hETEVOQlJHMUNMRU5CUTNsQ08wRkJRemRETzBGQlJVUTdPenM3T3pzN08wRkJUVUVzVTBGQlUwTXNXVUZCVkN4RFFVRnpRbXBGTEZkQlFYUkNMRVZCUVcxRE8wRkJRMnBETEUxQlFVMXJSU3hUUVVGVExFZEJRVWRRTEZsQlFWa3NRMEZCUTNSRkxFZEJRV0lzUTBGQmFVSlhMRmRCUVdwQ0xFTkJRV3hDT3p0QlFVTkJMRTFCUVVsclJTeFRRVUZUTEVsQlFVa3NTVUZCYWtJc1JVRkJkVUk3UVVGRGNrSXNWVUZCVFN4SlFVRkpReXhUUVVGS0xFTkJRV01zYTBWQlFXUXNRMEZCVGp0QlFVTkVPenRCUVVORUxGTkJRVTlFTEZOQlFWQTdRVUZEUkR0QlFVVkVPenM3T3pzN096dEJRVTFCTEZOQlFWTkZMRGhDUVVGVUxFTkJRWGREUXl4VFFVRjRReXhGUVVGdFJEdEJRVU5xUkN4VFFVRlBPMEZCUTB4b1JpeEpRVUZCUVN4SFFVUkxMR2xDUVVORE8wRkJRMG9zVlVGQlRUWkZMRk5CUVZNc1IwRkJSMFFzV1VGQldTeERRVUZETEVsQlFVUXNRMEZCT1VJN1FVRkRRU3hWUVVGSlN5eEpRVUZKTEVkQlFVZEtMRk5CUVZNc1EwRkJRemRGTEVkQlFWWXNRMEZCWTJkR0xGTkJRV1FzUTBGQldEczdRVUZEUVN4aFFVRlBReXhKUVVGSkxFbEJRVWtzU1VGQlppeEZRVUZ4UWp0QlFVTnVRaXhaUVVGSlFTeEpRVUZKTEVOQlFVTkRMRmxCUVV3c1MwRkJjMEpVTEZOQlFURkNMRVZCUVhGRE8wRkJRMjVETEdsQ1FVRlBVU3hKUVVGSkxFTkJRVU5GTEZGQlFWbzdRVUZEUkRzN1FVRkRSRVlzVVVGQlFVRXNTVUZCU1N4SFFVRkhRU3hKUVVGSkxFTkJRVU5ITEVsQlFWbzdRVUZEUkRzN1FVRkRSQ3hoUVVGUExFbEJRVkE3UVVGRFJDeExRVmhKTzBGQllVeDRSU3hKUVVGQlFTeEhRV0pMTEdWQllVUjFSU3hSUVdKRExFVkJZVk03UVVGRFdpeFZRVUZKTEU5QlFVOUJMRkZCUVZBc1MwRkJiMElzVlVGQmNFSXNTVUZCYTBNc1EwRkJRMVFzVVVGQlVTeERRVUZEVXl4UlFVRkVMRU5CUVM5RExFVkJRVEpFTzBGQlEzcEVRU3hSUVVGQlFTeFJRVUZSTEVkQlFVY3NTVUZCV0N4RFFVUjVSQ3hEUVVONFF6dEJRVU5zUWpzN1FVRkRSQ3hWUVVGTlRpeFRRVUZUTEVkQlFVZEVMRmxCUVZrc1EwRkJReXhKUVVGRUxFTkJRVGxDTEVOQlNsa3NRMEZOV2pzN1FVRkRRU3hWUVVGSlV5eEpRVUZKTEVkQlFVY3NTVUZCV0R0QlFVTkJMRlZCUVVsS0xFbEJRVWtzUjBGQlIwb3NVMEZCVXl4RFFVRkROMFVzUjBGQlZpeERRVUZqWjBZc1UwRkJaQ3hEUVVGWU96dEJRVU5CTEdGQlFVOURMRWxCUVVrc1NVRkJTU3hKUVVGbUxFVkJRWEZDTzBGQlEyNUNMRmxCUVVsQkxFbEJRVWtzUTBGQlEwTXNXVUZCVEN4TFFVRnpRbFFzVTBGQk1VSXNSVUZCY1VNN1FVRkRia003UVVGRFFTeGpRVUZKV1N4SlFVRkpMRXRCUVVzc1NVRkJZaXhGUVVGdFFqdEJRVU5xUWtFc1dVRkJRVUVzU1VGQlNTeERRVUZEUkN4SlFVRk1MRWRCUVZsSUxFbEJRVWtzUTBGQlEwY3NTVUZCYWtJN1FVRkRSQ3hYUVVaRUxFMUJSVThzU1VGQlNVZ3NTVUZCU1N4RFFVRkRSeXhKUVVGTUxFdEJRV01zU1VGQmJFSXNSVUZCZDBJN1FVRkROMEpRTEZsQlFVRkJMRk5CUVZNc1EwRkJRMnBGTEVkQlFWWXNRMEZCWTI5RkxGTkJRV1FzUlVGQmVVSkRMRWxCUVVrc1EwRkJRMGNzU1VGQk9VSTdRVUZEUkN4WFFVWk5MRTFCUlVFN1FVRkRURkFzV1VGQlFVRXNVMEZCVXl4RFFVRkRVeXhOUVVGV0xFTkJRV2xDVGl4VFFVRnFRanRCUVVORU8wRkJRMFlzVTBGVVJDeE5RVk5QTzBGQlEweExMRlZCUVVGQkxFbEJRVWtzUjBGQlIwb3NTVUZCVUR0QlFVTkVPenRCUVVWRVFTeFJRVUZCUVN4SlFVRkpMRWRCUVVkQkxFbEJRVWtzUTBGQlEwY3NTVUZCV2p0QlFVTkVMRTlCZUVKWExFTkJNRUphT3pzN1FVRkRRU3hWUVVGSlJDeFJRVUZSTEV0QlFVc3NTVUZCYWtJc1JVRkJkVUk3UVVGRGNrSXNXVUZCVFVrc1QwRkJUeXhIUVVGSE8wRkJRMlJLTEZWQlFVRkJMRkZCUVZFc1JVRkJVa0VzVVVGRVl6dEJRVVZrUkN4VlFVRkJRU3haUVVGWkxFVkJRVVZVTEZOQlJrRTdRVUZIWkdVc1ZVRkJRVUVzVDBGQlR5eEZRVUZGTEV0QlNFczdRVUZKWkVNc1ZVRkJRVUVzU1VGQlNTeEZRVUZGTEV0QlNsRTdRVUZMWkV3c1ZVRkJRVUVzU1VGQlNTeEZRVUZGTzBGQlRGRXNVMEZCYUVJN08wRkJUMEVzV1VGQlNVTXNTVUZCU1N4TFFVRkxMRWxCUVdJc1JVRkJiVUk3UVVGRGFrSlNMRlZCUVVGQkxGTkJRVk1zUTBGQlEycEZMRWRCUVZZc1EwRkJZMjlGTEZOQlFXUXNSVUZCZVVKUExFOUJRWHBDTzBGQlEwUXNVMEZHUkN4TlFVVlBPMEZCUTB4R0xGVkJRVUZCTEVsQlFVa3NRMEZCUTBRc1NVRkJUQ3hIUVVGWlJ5eFBRVUZhTzBGQlEwUTdRVUZEUmp0QlFVTkdMRXRCZEVSSk8wRkJkVVJNTTBNc1NVRkJRVUVzV1VGQldTeEZRVUZGTEVsQmRrUlVPMEZCZDBSTWVFSXNTVUZCUVVFc1ZVRkJWU3hGUVVGRk8wRkJlRVJRTEVkQlFWQTdRVUV3UkVRN1FVRkZSRHM3T3pzN096czdRVUZOUVN4VFFVRlRjMFVzYjBKQlFWUXNRMEZCT0VKRExHOUNRVUU1UWl4RlFVRnZSRmdzVTBGQmNFUXNSVUZCSzBRN1FVRkROMFF4Uml4RlFVRkJRU3hOUVVGTkxFTkJRVU5ETEdOQlFWQXNRMEZCYzBKdlJ5eHZRa0ZCZEVJc1kwRkJhVVJZTEZOQlFXcEVMRWRCUVRoRVJDdzRRa0ZCT0VJc1EwRkJRME1zVTBGQlJDeERRVUUxUmp0QlFVTkVPMEZCUlVRN096czdPenM3TzBGQlRVRXNVMEZCVTFrc2RVSkJRVlFzUTBGQmFVTkRMRlZCUVdwRExFVkJRVFpETzBGQlF6TkRPMEZCUTBFc1YwRkJVME1zYVVKQlFWUXNSMEZCTmtJN1FVRkRNMEpETEVsQlFVRkJMRmRCUVZjc1EwRkJRM2hETEVsQlFWb3NRMEZCYVVJc1NVRkJha0k3UVVGRFJEczdRVUZGUkhWRExFVkJRVUZCTEdsQ1FVRnBRaXhEUVVGRGNFVXNVMEZCYkVJc1IwRkJPRUp3UXl4TlFVRk5MRU5CUVVOclJTeE5RVUZRTEVOQlFXTjFReXhYUVVGWExFTkJRVU55UlN4VFFVRXhRaXhGUVVGeFF6dEJRVU5xUlN0Q0xFbEJRVUZCTEZkQlFWY3NSVUZCUlR0QlFVTllhRVVzVFVGQlFVRXNTMEZCU3l4RlFVRkZjVWNzYVVKQlJFazdRVUZGV0d4RUxFMUJRVUZCTEZsQlFWa3NSVUZCUlN4SlFVWklPMEZCUjFoRExFMUJRVUZCTEZGQlFWRXNSVUZCUlR0QlFVaERPMEZCUkc5RUxFZEJRWEpETEVOQlFUbENPenRCUVZGQkxFOUJRVXNzU1VGQlNYWkNMRU5CUVVNc1IwRkJSeXhEUVVGaUxFVkJRV2RDUVN4RFFVRkRMRWRCUVVkMVJTeFZRVUZWTEVOQlFVTjBSU3hOUVVFdlFpeEZRVUYxUXl4RlFVRkZSQ3hEUVVGNlF5eEZRVUUwUXp0QlFVTXhRMjlGTEVsQlFVRkJMRzlDUVVGdlFpeERRVUZEU1N4cFFrRkJhVUlzUTBGQlEzQkZMRk5CUVc1Q0xFVkJRVGhDYlVVc1ZVRkJWU3hEUVVGRGRrVXNRMEZCUkN4RFFVRjRReXhEUVVGd1FqdEJRVU5FT3p0QlFVVkVMRk5CUVU5M1JTeHBRa0ZCVUR0QlFVTkVPMEZCUlVRN096czdPenM3T3pzN096czdPenRCUVdGQkxGTkJRVk5ETEZkQlFWUXNSMEZCZFVJN1FVRkRja0k3UVVGRFFTeE5RVUZKTEdkQ1FVRm5Ra0VzVjBGQmNFSXNSVUZCYVVNN1FVRkRMMEo2UWl4SlFVRkJRU3haUVVGWkxFTkJRVU14UkN4SFFVRmlMRU5CUVdsQ0xFbEJRV3BDTEVWQlFYVkNMRWxCUVVsdlJpeEhRVUZLTEVWQlFYWkNPMEZCUTBFN1FVRkRSRHM3UVVGRFJDeE5RVUZKT1VNc1UwRkJVeXhEUVVGRE0wSXNUVUZCVml4TFFVRnhRaXhEUVVGeVFpeEpRVUV3UWpCRkxFdEJRVXNzUTBGQlEwTXNUMEZCVGl4RFFVRmphRVFzVTBGQlV5eERRVUZETEVOQlFVUXNRMEZCZGtJc1EwRkJPVUlzUlVGQk1rUTdRVUZEZWtRc1YwRkJUekJETEhWQ1FVRjFRaXhEUVVGRE1VTXNVMEZCVXl4RFFVRkRMRU5CUVVRc1EwRkJWaXhEUVVFNVFqdEJRVU5FT3p0QlFVTkVMRTFCUVVsQkxGTkJRVk1zUTBGQlF6TkNMRTFCUVZZc1IwRkJiVUlzUTBGQmRrSXNSVUZCTUVJN1FVRkRlRUlzVVVGQlRUUkZMRXRCUVVzc1IwRkJSeXhKUVVGSlJpeExRVUZLTEVOQlFWVXZReXhUUVVGVExFTkJRVU16UWl4TlFVRndRaXhEUVVGa096dEJRVU5CTEZOQlFVc3NTVUZCU1VRc1EwRkJReXhIUVVGSExFTkJRV0lzUlVGQlowSkJMRU5CUVVNc1IwRkJSelJDTEZOQlFWTXNRMEZCUXpOQ0xFMUJRVGxDTEVWQlFYTkRMRVZCUVVWRUxFTkJRWGhETEVWQlFUSkRPMEZCUTNwRE5rVXNUVUZCUVVFc1MwRkJTeXhEUVVGRE4wVXNRMEZCUkN4RFFVRk1MRWRCUVZjMFFpeFRRVUZUTEVOQlFVTTFRaXhEUVVGRUxFTkJRWEJDTzBGQlEwUTdPMEZCUTBRc1YwRkJUM05GTEhWQ1FVRjFRaXhEUVVGRFR5eExRVUZFTEVOQlFUbENPMEZCUTBRN08wRkJRMFFzVVVGQlRTeEpRVUZKY2tJc1UwRkJTaXhEUVVGakxHMURRVUZrTEVOQlFVNDdRVUZEUVR0QlFVTkVMRU1zUTBGRlJEczdPMEZCUTBGcFFpeFhRVUZYTEVOQlFVTnlSU3hUUVVGYUxFZEJRWGRDTzBGQlEzUkNPenM3T3pzN08wRkJUMEV3UlN4RlFVRkJRU3huUWtGU2MwSXNORUpCVVV4d1FpeFRRVkpMTEVWQlVVMUhMRkZCVWs0c1JVRlJaMEpyUWl4UFFWSm9RaXhGUVZGNVFqdEJRVU0zUXl4UlFVRkpiRUlzVVVGQlVTeEpRVUZKTEVsQlFXaENMRVZCUVhOQ08wRkJRM0JDTzBGQlEwUTdPMEZCUTBRc1VVRkJTU3hQUVVGUFFTeFJRVUZRTEV0QlFXOUNMRlZCUVhCQ0xFbEJRV3RETEVOQlFVTlVMRkZCUVZFc1EwRkJRMU1zVVVGQlJDeERRVUV2UXl4RlFVRXlSRHRCUVVONlJDeFpRVUZOTEVsQlFVbE1MRk5CUVVvc1EwRkJZeXdyUTBGQlpDeERRVUZPTzBGQlEwUTdPMEZCUlVRc1VVRkJUVVFzVTBGQlV5eEhRVUZIUkN4WlFVRlpMRU5CUVVNc1NVRkJSQ3hEUVVFNVFqdEJRVU5CTEZGQlFVMHdRaXhaUVVGWkxFZEJRVWMxUWl4UlFVRlJMRU5CUVVNeVFpeFBRVUZFTEVOQlFUZENPMEZCUTBFc1VVRkJUVVVzVDBGQlR5eEhRVUZIUkN4WlFVRlpMRWRCUVVkcVJTeFBRVUZQTEVOQlFVTm5SU3hQUVVGUExFTkJRVU5GTEU5QlFWUXNRMEZCVml4SFFVRTRRbXhGTEU5QlFVOHNRMEZCUTJkRkxFOUJRVVFzUTBGQmFrVTdRVUZEUVN4UlFVRk5ia0lzV1VGQldTeEhRVUZIY1VJc1QwRkJUeXhIUVVGSGFFTXNUMEZCU0N4SFFVRmhReXhOUVVGNlF6dEJRVU5CTEZGQlFVMWxMRTlCUVU4c1IwRkJSenRCUVVOa1NpeE5RVUZCUVN4UlFVRlJMRVZCUVZKQkxGRkJSR003UVVGRlpFUXNUVUZCUVVFc1dVRkJXU3hGUVVGYVFTeFpRVVpqTzBGQlIyUk5MRTFCUVVGQkxFOUJRVThzUlVGQlJXTXNXVUZCV1N4SlFVRkpha1VzVDBGQlR5eERRVUZEWjBVc1QwRkJUeXhEUVVGRFlpeFBRVUZVTEVOQlNHeENPMEZCU1dSRExFMUJRVUZCTEVsQlFVa3NSVUZCUldFc1dVRkJXU3hKUVVGSmFrVXNUMEZCVHl4RFFVRkRaMFVzVDBGQlR5eERRVUZEV2l4SlFVRlVMRU5CU21ZN1FVRkxaRXdzVFVGQlFVRXNTVUZCU1N4RlFVRkZPMEZCVEZFc1MwRkJhRUlzUTBGYU5rTXNRMEZ2UWpkRE96dEJRVU5CTEZGQlFVbElMRWxCUVVrc1IwRkJSMG9zVTBGQlV5eERRVUZETjBVc1IwRkJWaXhEUVVGalowWXNVMEZCWkN4RFFVRllPenRCUVVOQkxGRkJRVWxETEVsQlFVa3NTMEZCUzNWQ0xGTkJRV0lzUlVGQmQwSTdRVUZEZEVJelFpeE5RVUZCUVN4VFFVRlRMRU5CUVVOcVJTeEhRVUZXTEVOQlFXTnZSU3hUUVVGa0xFVkJRWGxDVHl4UFFVRjZRanRCUVVOQk8wRkJRMFFzUzBGNlFqUkRMRU5CTWtJM1F6czdPMEZCUTBFc1VVRkJTVVlzU1VGQlNTeEhRVUZITEVsQlFWZzdPMEZCUTBFc1YwRkJUMG9zU1VGQlNTeEpRVUZKTEVsQlFXWXNSVUZCY1VJN1FVRkRia0lzVlVGQlNVRXNTVUZCU1N4RFFVRkRSU3hSUVVGTUxFdEJRV3RDUVN4UlFVRnNRaXhKUVVFNFFrWXNTVUZCU1N4RFFVRkRReXhaUVVGTUxFdEJRWE5DUVN4WlFVRjRSQ3hGUVVGelJUdEJRVU53UlR0QlFVTkJPMEZCUTBRN08wRkJRMFJITEUxQlFVRkJMRWxCUVVrc1IwRkJSMG9zU1VGQlVEdEJRVU5CUVN4TlFVRkJRU3hKUVVGSkxFZEJRVWRCTEVsQlFVa3NRMEZCUTBjc1NVRkJXanRCUVVORUxFdEJjRU0wUXl4RFFYTkROME03T3p0QlFVTkJReXhKUVVGQlFTeEpRVUZKTEVOQlFVTkVMRWxCUVV3c1IwRkJXVWNzVDBGQldqdEJRVU5FTEVkQmFFUnhRanM3UVVGclJIUkNPenM3T3pzN08wRkJUMEZyUWl4RlFVRkJRU3h0UWtGNlJITkNMQ3RDUVhsRVJucENMRk5CZWtSRkxFVkJlVVJUUnl4UlFYcEVWQ3hGUVhsRWJVSnJRaXhQUVhwRWJrSXNSVUY1UkRSQ08wRkJRMmhFTEZGQlFVbHNRaXhSUVVGUkxFbEJRVWtzU1VGQmFFSXNSVUZCYzBJN1FVRkRjRUk3UVVGRFJEczdRVUZGUkN4UlFVRk5UaXhUUVVGVExFZEJRVWRFTEZsQlFWa3NRMEZCUXl4SlFVRkVMRU5CUVRsQ08wRkJRMEVzVVVGQlRUSkNMRTlCUVU4c1IwRkJSemRDTEZGQlFWRXNRMEZCUXpKQ0xFOUJRVVFzUTBGQlVpeEhRVUZ2UW1oRkxFOUJRVThzUTBGQlEyZEZMRTlCUVU4c1EwRkJRMFVzVDBGQlZDeERRVUV6UWl4SFFVRXJRMnhGTEU5QlFVOHNRMEZCUTJkRkxFOUJRVVFzUTBGQmRFVTdRVUZEUVN4UlFVRk5ia0lzV1VGQldTeEhRVUZIY1VJc1QwRkJUeXhIUVVGSGFFTXNUMEZCU0N4SFFVRmhReXhOUVVGNlF6dEJRVVZCTEZGQlFVbGhMRWxCUVVrc1IwRkJSeXhKUVVGWU8wRkJRMEVzVVVGQlNVb3NTVUZCU1N4SFFVRkhTaXhUUVVGVExFTkJRVU0zUlN4SFFVRldMRU5CUVdOblJpeFRRVUZrTEVOQlFWZzdPMEZCUTBFc1YwRkJUME1zU1VGQlNTeEpRVUZKTEVsQlFXWXNSVUZCY1VJN1FVRkRia0lzVlVGQlNVRXNTVUZCU1N4RFFVRkRSU3hSUVVGTUxFdEJRV3RDUVN4UlFVRnNRaXhKUVVFNFFrWXNTVUZCU1N4RFFVRkRReXhaUVVGTUxFdEJRWE5DUVN4WlFVRjRSQ3hGUVVGelJUdEJRVU53UlN4WlFVRkpSeXhKUVVGSkxFdEJRVXNzU1VGQllpeEZRVUZ0UWp0QlFVTnFRa0VzVlVGQlFVRXNTVUZCU1N4RFFVRkRSQ3hKUVVGTUxFZEJRVmxJTEVsQlFVa3NRMEZCUTBjc1NVRkJha0k3UVVGRFJDeFRRVVpFTEUxQlJVOHNTVUZCU1Vnc1NVRkJTU3hEUVVGRFJ5eEpRVUZNTEV0QlFXTXNTVUZCYkVJc1JVRkJkMEk3UVVGRE4wSlFMRlZCUVVGQkxGTkJRVk1zUTBGQlEycEZMRWRCUVZZc1EwRkJZMjlGTEZOQlFXUXNSVUZCZVVKRExFbEJRVWtzUTBGQlEwY3NTVUZCT1VJN1FVRkRSQ3hUUVVaTkxFMUJSVUU3UVVGRFRGQXNWVUZCUVVFc1UwRkJVeXhEUVVGRFV5eE5RVUZXTEVOQlFXbENUaXhUUVVGcVFqdEJRVU5FT3p0QlFVTkVPMEZCUTBRN08wRkJSVVJMTEUxQlFVRkJMRWxCUVVrc1IwRkJSMG9zU1VGQlVEdEJRVU5CUVN4TlFVRkJRU3hKUVVGSkxFZEJRVWRCTEVsQlFVa3NRMEZCUTBjc1NVRkJXanRCUVVORU8wRkJRMFlzUjBGdVJuRkNPenRCUVhGR2RFSTdPenM3TzBGQlMwRnpRaXhGUVVGQlFTeGhRVEZHYzBJc2VVSkJNRVpTTlVjc1MwRXhSbEVzUlVFd1JrUTdRVUZEYmtJc1VVRkJTVUVzUzBGQlN5eEpRVUZKTEVsQlFWUXNTVUZCYVVJc1QwRkJUMEVzUzBGQlN5eERRVUZETmtJc1NVRkJZaXhMUVVGelFpeFJRVUV6UXl4RlFVRnhSRHRCUVVOdVJDeFpRVUZOTEVsQlFVbHRSQ3hUUVVGS0xFTkJRV01zYTBOQlFXUXNRMEZCVGp0QlFVTkVMRXRCU0d0Q0xFTkJTMjVDT3pzN1FVRkRRU3hSUVVGTlJDeFRRVUZUTEVkQlFVZEVMRmxCUVZrc1EwRkJReXhKUVVGRUxFTkJRVGxDTzBGQlEwRXNVVUZCVFVrc1UwRkJVeXhIUVVGSGJFWXNTMEZCU3l4RFFVRkROa0lzU1VGQmVFSTdRVUZEUVN4UlFVRkpjMFFzU1VGQlNTeEhRVUZIU2l4VFFVRlRMRU5CUVVNM1JTeEhRVUZXTEVOQlFXTm5SaXhUUVVGa0xFTkJRVmc3TzBGQlEwRXNVVUZCU1VNc1NVRkJTU3hKUVVGSkxFbEJRVm9zUlVGQmEwSTdRVUZEYUVJc1lVRkJUeXhKUVVGUU8wRkJRMFFzUzBGWWEwSXNRMEZoYmtJN096dEJRVU5CTEZGQlFVMHdRaXhaUVVGWkxFZEJRVWN6UXl4VFFVRlRMRU5CUVVNc1NVRkJSQ3hGUVVGUGJFVXNTMEZCVUN4RFFVRTVRaXhEUVdSdFFpeERRV2RDYmtJN1FVRkRRVHM3UVVGRFFTeFJRVUZKZFVZc1NVRkJTU3hIUVVGSExFbEJRVmc3TzBGQlEwRXNWMEZCVDBvc1NVRkJTU3hKUVVGSkxFbEJRV1lzUlVGQmNVSTdRVUZEYmtJN1FVRkRRU3hWUVVGSlFTeEpRVUZKTEVOQlFVTlJMRWxCUVZRc1JVRkJaVHRCUVVOaUxGbEJRVWxLTEVsQlFVa3NTMEZCU3l4SlFVRmlMRVZCUVcxQ08wRkJRMnBDUVN4VlFVRkJRU3hKUVVGSkxFTkJRVU5FTEVsQlFVd3NSMEZCV1Vnc1NVRkJTU3hEUVVGRFJ5eEpRVUZxUWp0QlFVTkVMRk5CUmtRc1RVRkZUeXhKUVVGSlNDeEpRVUZKTEVOQlFVTkhMRWxCUVV3c1MwRkJZeXhKUVVGc1FpeEZRVUYzUWp0QlFVTTNRbEFzVlVGQlFVRXNVMEZCVXl4RFFVRkRha1VzUjBGQlZpeERRVUZqYjBVc1UwRkJaQ3hGUVVGNVFrTXNTVUZCU1N4RFFVRkRSeXhKUVVFNVFqdEJRVU5FTEZOQlJrMHNUVUZGUVR0QlFVTk1VQ3hWUVVGQlFTeFRRVUZUTEVOQlFVTlRMRTFCUVZZc1EwRkJhVUpPTEZOQlFXcENPMEZCUTBRN1FVRkRSaXhQUVZKRUxFMUJVVTg3UVVGRFRFc3NVVUZCUVVFc1NVRkJTU3hIUVVGSFNpeEpRVUZRTzBGQlEwUXNUMEZhYTBJc1EwRmpia0k3T3p0QlFVTkJXaXhOUVVGQlFTeHJRa0ZCYTBJc1EwRkJRM05ETEZsQlFVUXNSVUZCWlRGQ0xFbEJRVWtzUTBGQlEwOHNUMEZCVEN4SFFVRmxVQ3hKUVVGSkxFTkJRVU5GTEZGQlFYQkNMRWRCUVN0Q0xFbEJRVGxETEVOQlFXeENPenRCUVVOQkxGVkJRVWtzVDBGQlQwWXNTVUZCU1N4RFFVRkRSU3hSUVVGYUxFdEJRWGxDTEZWQlFUZENMRVZCUVhsRE8wRkJRM1pETEZsQlFVazdRVUZEUmtZc1ZVRkJRVUVzU1VGQlNTeERRVUZEUlN4UlFVRk1MRU5CUVdNMVFpeEpRVUZrTEVOQlFXMUNMRWxCUVc1Q0xFVkJRWGxDYjBRc1dVRkJla0k3UVVGRFJDeFRRVVpFTEVOQlJVVXNUMEZCVDBNc1IwRkJVQ3hGUVVGWk8wRkJRMW9zWTBGQlNTeFBRVUZQTTBjc1QwRkJVQ3hMUVVGdFFpeFhRVUZ1UWl4SlFVRnJReXhQUVVGUFFTeFBRVUZQTEVOQlFVTkxMRXRCUVdZc1MwRkJlVUlzVlVGQkwwUXNSVUZCTWtVN1FVRkRla1ZNTEZsQlFVRkJMRTlCUVU4c1EwRkJRMHNzUzBGQlVpeERRVUZqYzBjc1IwRkJaRHRCUVVORU8wRkJRMFk3UVVGRFJpeFBRVkpFTEUxQlVVOHNTVUZCU1ROQ0xFbEJRVWtzUTBGQlEwTXNXVUZCVEN4TFFVRnpRbFFzVTBGQmRFSXNTVUZCYlVNc1QwRkJUMUVzU1VGQlNTeERRVUZEUlN4UlFVRk1MRU5CUVdNd1FpeFhRVUZ5UWl4TFFVRnhReXhWUVVFMVJTeEZRVUYzUmp0QlFVTTNSalZDTEZGQlFVRkJMRWxCUVVrc1EwRkJRMFVzVVVGQlRDeERRVUZqTUVJc1YwRkJaQ3hEUVVFd1FrWXNXVUZCTVVJN1FVRkRSQ3hQUVRGQ2EwSXNRMEUwUW01Q096czdRVUZEUVN4VlFVRkpla01zVTBGQlV5eERRVUZEZVVNc1dVRkJSQ3hEUVVGaUxFVkJRVFpDTzBGQlF6TkNPMEZCUTBRN08wRkJSVVF4UWl4TlFVRkJRU3hKUVVGSkxFZEJRVWRCTEVsQlFVa3NRMEZCUTBjc1NVRkJXanRCUVVORU96dEJRVU5FWml4SlFVRkJRU3hyUWtGQmEwSXNRMEZCUTNORExGbEJRVVFzUlVGQlpTeEpRVUZtTEVOQlFXeENPMEZCUTBGNFF5eEpRVUZCUVN4aFFVRmhMRU5CUVVOM1F5eFpRVUZFTEVWQlFXVXNRMEZCWml4RFFVRmlPMEZCUTBGMlF5eEpRVUZCUVN4blFrRkJaMElzUTBGQlEzVkRMRmxCUVVRc1JVRkJaU3hKUVVGbUxFTkJRV2hDTzBGQlJVRXNWMEZCVHl4RFFVRkRRU3haUVVGWkxFTkJRVU55UlN4blFrRkJja0k3UVVGRFJEdEJRWEpLY1VJc1EwRkJlRUlzUXl4RFFYZEtRVHM3UVVGRFFXaEVMRTFCUVUwc1EwRkJRME1zWTBGQlVDeERRVUZ6UW5kSExGZEJRVmNzUTBGQlEzSkZMRk5CUVd4RExFVkJRVFpETEdGQlFUZERMRVZCUVRSRU8wRkJRekZFYWtNc1JVRkJRVUVzUzBGQlN5eEZRVUZGYzBjc1YwRkViVVE3UVVGRk1VUnVSQ3hGUVVGQlFTeFpRVUZaTEVWQlFVVXNTVUZHTkVNN1FVRkhNVVJETEVWQlFVRkJMRkZCUVZFc1JVRkJSVHRCUVVoblJDeERRVUUxUkN4RkxFTkJUVUU3TzBGQlEwRXNTVUZCU1N4UFFVRlBReXhOUVVGUUxFdEJRV3RDTEZkQlFXeENMRWxCUVdsRExFOUJRVTlCTEUxQlFVMHNRMEZCUTJsRUxGZEJRV1FzUzBGQk9FSXNWMEZCYmtVc1JVRkJaMFk3UVVGRE9VVjZSeXhGUVVGQlFTeE5RVUZOTEVOQlFVTjVSQ3hqUVVGUUxFTkJRWE5DWjBRc1YwRkJWeXhEUVVGRGNrVXNVMEZCYkVNc1JVRkJOa052UWl4TlFVRk5MRU5CUVVOcFJDeFhRVUZRTEVOQlFXMUNja1VzVTBGQmFFVTdRVUZEUkRzN1FVRkZSR3hETEU5QlFVOHNRMEZCUTJ0SExHOUNRVUZTTEVkQlFTdENRU3h2UWtGQkwwSTdRVUZEUVd4SExFOUJRVThzUTBGQlEzVkhMRmRCUVZJc1IwRkJjMEpCTEZkQlFYUkNPMEZCUTBGMlJ5eFBRVUZQTEVOQlFVTnpTQ3hQUVVGU0xFZEJRV3RDWml4WFFVRnNRanRCUVVWQlowSXNUVUZCVFN4RFFVRkRka2dzVDBGQlVDeEhRVUZwUW5WSExGZEJRV3BDTzBGQlEwRm5RaXhOUVVGTkxFTkJRVU4yU0N4UFFVRlFMRU5CUVdWMVJ5eFhRVUZtTEVkQlFUWkNaMElzVFVGQlRTeERRVUZEZGtnc1QwRkJVQ3hEUVVGbExGTkJRV1lzU1VGQk5FSjFSeXhYUVVGNlJEdEJRVU5CWjBJc1RVRkJUU3hEUVVGRGRrZ3NUMEZCVUN4RFFVRmxhMGNzYjBKQlFXWXNSMEZCYzBOQkxHOUNRVUYwUXlJc0luTnZkWEpqWlhORGIyNTBaVzUwSWpwYklpOHZJRlJvYVhNZ2FYTWdZV1J2Y0hSbFpDQm1jbTl0SUdWMlpXNTBMWFJoY21kbGRDMXphR2x0UURVdU1DNHhJSFZ1WkdWeUlFMUpWQ0JNYVdObGJuTmxMbHh5WEc0dkx5QlVhR1VnYzI5MWNtTmxJR052WkdVZ2FYTWdZMjl3YVdWa0lHaGxjbVVnWW1WallYVnpaU0IwYUdVZ2IzSnBaMmx1WVd3Z2NHRmphMkZuWlNCa2J5QnViM1FnYzNWd2NHOXlkQ0JGVXpVZ1luSnZkM05sY25NdVhISmNibHh5WEc0dktpQmxjMnhwYm5RdFpHbHpZV0pzWlNBcUwxeHlYRzVjY2x4dUx5b3FYSEpjYmlBcUlFQmhkWFJvYjNJZ1ZHOXlkU0JPWVdkaGMyaHBiV0VnUEdoMGRIQnpPaTh2WjJsMGFIVmlMbU52YlM5dGVYTjBhV05oZEdWaFBseHlYRzRnS2lCQVkyOXdlWEpwWjJoMElESXdNVFVnVkc5eWRTQk9ZV2RoYzJocGJXRXVJRUZzYkNCeWFXZG9kSE1nY21WelpYSjJaV1F1WEhKY2JpQXFJRk5sWlNCTVNVTkZUbE5GSUdacGJHVWdhVzRnY205dmRDQmthWEpsWTNSdmNua2dabTl5SUdaMWJHd2diR2xqWlc1elpTNWNjbHh1SUNvdlhISmNiaWQxYzJVZ2MzUnlhV04wSnp0Y2NseHVYSEpjYms5aWFtVmpkQzVrWldacGJtVlFjbTl3WlhKMGVTaGxlSEJ2Y25SekxDQW5YMTlsYzAxdlpIVnNaU2NzSUhzZ2RtRnNkV1U2SUhSeWRXVWdmU2s3WEhKY2JseHlYRzR2S2lwY2NseHVJQ29nUUhSNWNHVmtaV1lnZTI5aWFtVmpkSDBnVUhKcGRtRjBaVVJoZEdGY2NseHVJQ29nUUhCeWIzQmxjblI1SUh0RmRtVnVkRlJoY21kbGRIMGdaWFpsYm5SVVlYSm5aWFFnVkdobElHVjJaVzUwSUhSaGNtZGxkQzVjY2x4dUlDb2dRSEJ5YjNCbGNuUjVJSHQ3ZEhsd1pUcHpkSEpwYm1kOWZTQmxkbVZ1ZENCVWFHVWdiM0pwWjJsdVlXd2daWFpsYm5RZ2IySnFaV04wTGx4eVhHNGdLaUJBY0hKdmNHVnlkSGtnZTI1MWJXSmxjbjBnWlhabGJuUlFhR0Z6WlNCVWFHVWdZM1Z5Y21WdWRDQmxkbVZ1ZENCd2FHRnpaUzVjY2x4dUlDb2dRSEJ5YjNCbGNuUjVJSHRGZG1WdWRGUmhjbWRsZEh4dWRXeHNmU0JqZFhKeVpXNTBWR0Z5WjJWMElGUm9aU0JqZFhKeVpXNTBJR1YyWlc1MElIUmhjbWRsZEM1Y2NseHVJQ29nUUhCeWIzQmxjblI1SUh0aWIyOXNaV0Z1ZlNCallXNWpaV3hsWkNCVWFHVWdabXhoWnlCMGJ5QndjbVYyWlc1MElHUmxabUYxYkhRdVhISmNiaUFxSUVCd2NtOXdaWEowZVNCN1ltOXZiR1ZoYm4wZ2MzUnZjSEJsWkNCVWFHVWdabXhoWnlCMGJ5QnpkRzl3SUhCeWIzQmhaMkYwYVc5dUxseHlYRzRnS2lCQWNISnZjR1Z5ZEhrZ2UySnZiMnhsWVc1OUlHbHRiV1ZrYVdGMFpWTjBiM0J3WldRZ1ZHaGxJR1pzWVdjZ2RHOGdjM1J2Y0NCd2NtOXdZV2RoZEdsdmJpQnBiVzFsWkdsaGRHVnNlUzVjY2x4dUlDb2dRSEJ5YjNCbGNuUjVJSHRHZFc1amRHbHZibnh1ZFd4c2ZTQndZWE56YVhabFRHbHpkR1Z1WlhJZ1ZHaGxJR3hwYzNSbGJtVnlJR2xtSUhSb1pTQmpkWEp5Wlc1MElHeHBjM1JsYm1WeUlHbHpJSEJoYzNOcGRtVXVJRTkwYUdWeWQybHpaU0IwYUdseklHbHpJRzUxYkd3dVhISmNiaUFxSUVCd2NtOXdaWEowZVNCN2JuVnRZbVZ5ZlNCMGFXMWxVM1JoYlhBZ1ZHaGxJSFZ1YVhnZ2RHbHRaUzVjY2x4dUlDb2dRSEJ5YVhaaGRHVmNjbHh1SUNvdlhISmNibHh5WEc0dktpcGNjbHh1SUNvZ1VISnBkbUYwWlNCa1lYUmhJR1p2Y2lCbGRtVnVkQ0IzY21Gd2NHVnljeTVjY2x4dUlDb2dRSFI1Y0dVZ2UxZGxZV3ROWVhBOFJYWmxiblFzSUZCeWFYWmhkR1ZFWVhSaFBuMWNjbHh1SUNvZ1FIQnlhWFpoZEdWY2NseHVJQ292WEhKY2JtTnZibk4wSUhCeWFYWmhkR1ZFWVhSaElEMGdibVYzSUZkbFlXdE5ZWEFvS1R0Y2NseHVYSEpjYmk4cUtseHlYRzRnS2lCRFlXTm9aU0JtYjNJZ2QzSmhjSEJsY2lCamJHRnpjMlZ6TGx4eVhHNGdLaUJBZEhsd1pTQjdWMlZoYTAxaGNEeFBZbXBsWTNRc0lFWjFibU4wYVc5dVBuMWNjbHh1SUNvZ1FIQnlhWFpoZEdWY2NseHVJQ292WEhKY2JtTnZibk4wSUhkeVlYQndaWEp6SUQwZ2JtVjNJRmRsWVd0TllYQW9LVHRjY2x4dVhISmNiaThxS2x4eVhHNGdLaUJIWlhRZ2NISnBkbUYwWlNCa1lYUmhMbHh5WEc0Z0tpQkFjR0Z5WVcwZ2UwVjJaVzUwZlNCbGRtVnVkQ0JVYUdVZ1pYWmxiblFnYjJKcVpXTjBJSFJ2SUdkbGRDQndjbWwyWVhSbElHUmhkR0V1WEhKY2JpQXFJRUJ5WlhSMWNtNXpJSHRRY21sMllYUmxSR0YwWVgwZ1ZHaGxJSEJ5YVhaaGRHVWdaR0YwWVNCdlppQjBhR1VnWlhabGJuUXVYSEpjYmlBcUlFQndjbWwyWVhSbFhISmNiaUFxTDF4eVhHNW1kVzVqZEdsdmJpQndaQ2hsZG1WdWRDa2dlMXh5WEc0Z0lHTnZibk4wSUhKbGRIWWdQU0J3Y21sMllYUmxSR0YwWVM1blpYUW9aWFpsYm5RcE8xeHlYRzRnSUdOdmJuTnZiR1V1WVhOelpYSjBLSEpsZEhZZ0lUMGdiblZzYkN3Z1hDSW5kR2hwY3ljZ2FYTWdaWGh3WldOMFpXUWdZVzRnUlhabGJuUWdiMkpxWldOMExDQmlkWFFnWjI5MFhDSXNJR1YyWlc1MEtUdGNjbHh1SUNCeVpYUjFjbTRnY21WMGRqdGNjbHh1ZlZ4eVhHNWNjbHh1THlvcVhISmNiaUFxSUdoMGRIQnpPaTh2Wkc5dExuTndaV011ZDJoaGRIZG5MbTl5Wnk4amMyVjBMWFJvWlMxallXNWpaV3hsWkMxbWJHRm5YSEpjYmlBcUlFQndZWEpoYlNCa1lYUmhJSHRRY21sMllYUmxSR0YwWVgwZ2NISnBkbUYwWlNCa1lYUmhMbHh5WEc0Z0tpOWNjbHh1Wm5WdVkzUnBiMjRnYzJWMFEyRnVZMlZzUm14aFp5aGtZWFJoS1NCN1hISmNiaUFnYVdZZ0tHUmhkR0V1Y0dGemMybDJaVXhwYzNSbGJtVnlJQ0U5SUc1MWJHd3BJSHRjY2x4dUlDQWdJR2xtSUNoMGVYQmxiMllnWTI5dWMyOXNaU0FoUFQwZ0ozVnVaR1ZtYVc1bFpDY2dKaVlnZEhsd1pXOW1JR052Ym5OdmJHVXVaWEp5YjNJZ1BUMDlJQ2RtZFc1amRHbHZiaWNwSUh0Y2NseHVJQ0FnSUNBZ1kyOXVjMjlzWlM1bGNuSnZjaWduVlc1aFlteGxJSFJ2SUhCeVpYWmxiblJFWldaaGRXeDBJR2x1YzJsa1pTQndZWE56YVhabElHVjJaVzUwSUd4cGMzUmxibVZ5SUdsdWRtOWpZWFJwYjI0dUp5d2daR0YwWVM1d1lYTnphWFpsVEdsemRHVnVaWElwTzF4eVhHNGdJQ0FnZlZ4eVhHNGdJQ0FnY21WMGRYSnVPMXh5WEc0Z0lIMWNjbHh1SUNCcFppQW9JV1JoZEdFdVpYWmxiblF1WTJGdVkyVnNZV0pzWlNrZ2UxeHlYRzRnSUNBZ2NtVjBkWEp1TzF4eVhHNGdJSDFjY2x4dVhISmNiaUFnWkdGMFlTNWpZVzVqWld4bFpDQTlJSFJ5ZFdVN1hISmNiaUFnYVdZZ0tIUjVjR1Z2WmlCa1lYUmhMbVYyWlc1MExuQnlaWFpsYm5SRVpXWmhkV3gwSUQwOVBTQW5ablZ1WTNScGIyNG5LU0I3WEhKY2JpQWdJQ0JrWVhSaExtVjJaVzUwTG5CeVpYWmxiblJFWldaaGRXeDBLQ2s3WEhKY2JpQWdmVnh5WEc1OVhISmNibHh5WEc0dktpcGNjbHh1SUNvZ1FITmxaU0JvZEhSd2N6b3ZMMlJ2YlM1emNHVmpMbmRvWVhSM1p5NXZjbWN2STJsdWRHVnlabUZqWlMxbGRtVnVkRnh5WEc0Z0tpQkFjSEpwZG1GMFpWeHlYRzRnS2k5Y2NseHVMeW9xWEhKY2JpQXFJRlJvWlNCbGRtVnVkQ0IzY21Gd2NHVnlMbHh5WEc0Z0tpQkFZMjl1YzNSeWRXTjBiM0pjY2x4dUlDb2dRSEJoY21GdElIdEZkbVZ1ZEZSaGNtZGxkSDBnWlhabGJuUlVZWEpuWlhRZ1ZHaGxJR1YyWlc1MElIUmhjbWRsZENCdlppQjBhR2x6SUdScGMzQmhkR05vYVc1bkxseHlYRzRnS2lCQWNHRnlZVzBnZTBWMlpXNTBmSHQwZVhCbE9uTjBjbWx1WjMxOUlHVjJaVzUwSUZSb1pTQnZjbWxuYVc1aGJDQmxkbVZ1ZENCMGJ5QjNjbUZ3TGx4eVhHNGdLaTljY2x4dVpuVnVZM1JwYjI0Z1JYWmxiblFvWlhabGJuUlVZWEpuWlhRc0lHVjJaVzUwS1NCN1hISmNiaUFnY0hKcGRtRjBaVVJoZEdFdWMyVjBLSFJvYVhNc0lIdGNjbHh1SUNBZ0lHVjJaVzUwVkdGeVoyVjBMRnh5WEc0Z0lDQWdaWFpsYm5Rc1hISmNiaUFnSUNCbGRtVnVkRkJvWVhObE9pQXlMRnh5WEc0Z0lDQWdZM1Z5Y21WdWRGUmhjbWRsZERvZ1pYWmxiblJVWVhKblpYUXNYSEpjYmlBZ0lDQmpZVzVqWld4bFpEb2dabUZzYzJVc1hISmNiaUFnSUNCemRHOXdjR1ZrT2lCbVlXeHpaU3hjY2x4dUlDQWdJR2x0YldWa2FXRjBaVk4wYjNCd1pXUTZJR1poYkhObExGeHlYRzRnSUNBZ2NHRnpjMmwyWlV4cGMzUmxibVZ5T2lCdWRXeHNMRnh5WEc0Z0lDQWdkR2x0WlZOMFlXMXdPaUJsZG1WdWRDNTBhVzFsVTNSaGJYQWdmSHdnUkdGMFpTNXViM2NvS1Z4eVhHNGdJSDBwTzF4eVhHNWNjbHh1SUNBdkx5Qm9kSFJ3Y3pvdkwyaGxlV05oYlM1bmFYUm9kV0l1YVc4dmQyVmlhV1JzTHlOVmJtWnZjbWRsWVdKc1pWeHlYRzRnSUU5aWFtVmpkQzVrWldacGJtVlFjbTl3WlhKMGVTaDBhR2x6TENBbmFYTlVjblZ6ZEdWa0p5d2dleUIyWVd4MVpUb2dabUZzYzJVc0lHVnVkVzFsY21GaWJHVTZJSFJ5ZFdVZ2ZTazdYSEpjYmx4eVhHNGdJQzh2SUVSbFptbHVaU0JoWTJObGMzTnZjbk5jY2x4dUlDQmpiMjV6ZENCclpYbHpJRDBnVDJKcVpXTjBMbXRsZVhNb1pYWmxiblFwTzF4eVhHNGdJR1p2Y2lBb2JHVjBJR2tnUFNBd095QnBJRHdnYTJWNWN5NXNaVzVuZEdnN0lDc3JhU2tnZTF4eVhHNGdJQ0FnWTI5dWMzUWdhMlY1SUQwZ2EyVjVjMXRwWFR0Y2NseHVJQ0FnSUdsbUlDZ2hLR3RsZVNCcGJpQjBhR2x6S1NrZ2UxeHlYRzRnSUNBZ0lDQlBZbXBsWTNRdVpHVm1hVzVsVUhKdmNHVnlkSGtvZEdocGN5d2dhMlY1TENCa1pXWnBibVZTWldScGNtVmpkRVJsYzJOeWFYQjBiM0lvYTJWNUtTazdYSEpjYmlBZ0lDQjlYSEpjYmlBZ2ZWeHlYRzU5WEhKY2JseHlYRzR2THlCVGFHOTFiR1FnWW1VZ1pXNTFiV1Z5WVdKc1pTd2dZblYwSUdOc1lYTnpJRzFsZEdodlpITWdZWEpsSUc1dmRDQmxiblZ0WlhKaFlteGxMbHh5WEc1RmRtVnVkQzV3Y205MGIzUjVjR1VnUFNCN1hISmNiaUFnTHlvcVhISmNiaUFnSUNvZ1ZHaGxJSFI1Y0dVZ2IyWWdkR2hwY3lCbGRtVnVkQzVjY2x4dUlDQWdLaUJBZEhsd1pTQjdjM1J5YVc1bmZWeHlYRzRnSUNBcUwxeHlYRzRnSUdkbGRDQjBlWEJsS0NrZ2UxeHlYRzRnSUNBZ2NtVjBkWEp1SUhCa0tIUm9hWE1wTG1WMlpXNTBMblI1Y0dVN1hISmNiaUFnZlN4Y2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0lDb2dWR2hsSUhSaGNtZGxkQ0J2WmlCMGFHbHpJR1YyWlc1MExseHlYRzRnSUNBcUlFQjBlWEJsSUh0RmRtVnVkRlJoY21kbGRIMWNjbHh1SUNBZ0tpOWNjbHh1SUNCblpYUWdkR0Z5WjJWMEtDa2dlMXh5WEc0Z0lDQWdjbVYwZFhKdUlIQmtLSFJvYVhNcExtVjJaVzUwVkdGeVoyVjBPMXh5WEc0Z0lIMHNYSEpjYmx4eVhHNGdJQzhxS2x4eVhHNGdJQ0FxSUZSb1pTQjBZWEpuWlhRZ2IyWWdkR2hwY3lCbGRtVnVkQzVjY2x4dUlDQWdLaUJBZEhsd1pTQjdSWFpsYm5SVVlYSm5aWFI5WEhKY2JpQWdJQ292WEhKY2JpQWdaMlYwSUdOMWNuSmxiblJVWVhKblpYUW9LU0I3WEhKY2JpQWdJQ0J5WlhSMWNtNGdjR1FvZEdocGN5a3VZM1Z5Y21WdWRGUmhjbWRsZER0Y2NseHVJQ0I5TEZ4eVhHNWNjbHh1SUNBdktpcGNjbHh1SUNBZ0tpQkFjbVYwZFhKdWN5QjdSWFpsYm5SVVlYSm5aWFJiWFgwZ1ZHaGxJR052YlhCdmMyVmtJSEJoZEdnZ2IyWWdkR2hwY3lCbGRtVnVkQzVjY2x4dUlDQWdLaTljY2x4dUlDQmpiMjF3YjNObFpGQmhkR2dvS1NCN1hISmNiaUFnSUNCamIyNXpkQ0JqZFhKeVpXNTBWR0Z5WjJWMElEMGdjR1FvZEdocGN5a3VZM1Z5Y21WdWRGUmhjbWRsZER0Y2NseHVJQ0FnSUdsbUlDaGpkWEp5Wlc1MFZHRnlaMlYwSUQwOUlHNTFiR3dwSUh0Y2NseHVJQ0FnSUNBZ2NtVjBkWEp1SUZ0ZE8xeHlYRzRnSUNBZ2ZWeHlYRzRnSUNBZ2NtVjBkWEp1SUZ0amRYSnlaVzUwVkdGeVoyVjBYVHRjY2x4dUlDQjlMRnh5WEc1Y2NseHVJQ0F2S2lwY2NseHVJQ0FnS2lCRGIyNXpkR0Z1ZENCdlppQk9UMDVGTGx4eVhHNGdJQ0FxSUVCMGVYQmxJSHR1ZFcxaVpYSjlYSEpjYmlBZ0lDb3ZYSEpjYmlBZ1oyVjBJRTVQVGtVb0tTQjdYSEpjYmlBZ0lDQnlaWFIxY200Z01EdGNjbHh1SUNCOUxGeHlYRzVjY2x4dUlDQXZLaXBjY2x4dUlDQWdLaUJEYjI1emRHRnVkQ0J2WmlCRFFWQlVWVkpKVGtkZlVFaEJVMFV1WEhKY2JpQWdJQ29nUUhSNWNHVWdlMjUxYldKbGNuMWNjbHh1SUNBZ0tpOWNjbHh1SUNCblpYUWdRMEZRVkZWU1NVNUhYMUJJUVZORktDa2dlMXh5WEc0Z0lDQWdjbVYwZFhKdUlERTdYSEpjYmlBZ2ZTeGNjbHh1WEhKY2JpQWdMeW9xWEhKY2JpQWdJQ29nUTI5dWMzUmhiblFnYjJZZ1FWUmZWRUZTUjBWVUxseHlYRzRnSUNBcUlFQjBlWEJsSUh0dWRXMWlaWEo5WEhKY2JpQWdJQ292WEhKY2JpQWdaMlYwSUVGVVgxUkJVa2RGVkNncElIdGNjbHh1SUNBZ0lISmxkSFZ5YmlBeU8xeHlYRzRnSUgwc1hISmNibHh5WEc0Z0lDOHFLbHh5WEc0Z0lDQXFJRU52Ym5OMFlXNTBJRzltSUVKVlFrSk1TVTVIWDFCSVFWTkZMbHh5WEc0Z0lDQXFJRUIwZVhCbElIdHVkVzFpWlhKOVhISmNiaUFnSUNvdlhISmNiaUFnWjJWMElFSlZRa0pNU1U1SFgxQklRVk5GS0NrZ2UxeHlYRzRnSUNBZ2NtVjBkWEp1SURNN1hISmNiaUFnZlN4Y2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0lDb2dWR2hsSUhSaGNtZGxkQ0J2WmlCMGFHbHpJR1YyWlc1MExseHlYRzRnSUNBcUlFQjBlWEJsSUh0dWRXMWlaWEo5WEhKY2JpQWdJQ292WEhKY2JpQWdaMlYwSUdWMlpXNTBVR2hoYzJVb0tTQjdYSEpjYmlBZ0lDQnlaWFIxY200Z2NHUW9kR2hwY3lrdVpYWmxiblJRYUdGelpUdGNjbHh1SUNCOUxGeHlYRzVjY2x4dUlDQXZLaXBjY2x4dUlDQWdLaUJUZEc5d0lHVjJaVzUwSUdKMVltSnNhVzVuTGx4eVhHNGdJQ0FxSUVCeVpYUjFjbTV6SUh0MmIybGtmVnh5WEc0Z0lDQXFMMXh5WEc0Z0lITjBiM0JRY205d1lXZGhkR2x2YmlncElIdGNjbHh1SUNBZ0lHTnZibk4wSUdSaGRHRWdQU0J3WkNoMGFHbHpLVHRjY2x4dVhISmNiaUFnSUNCa1lYUmhMbk4wYjNCd1pXUWdQU0IwY25WbE8xeHlYRzRnSUNBZ2FXWWdLSFI1Y0dWdlppQmtZWFJoTG1WMlpXNTBMbk4wYjNCUWNtOXdZV2RoZEdsdmJpQTlQVDBnSjJaMWJtTjBhVzl1SnlrZ2UxeHlYRzRnSUNBZ0lDQmtZWFJoTG1WMlpXNTBMbk4wYjNCUWNtOXdZV2RoZEdsdmJpZ3BPMXh5WEc0Z0lDQWdmVnh5WEc0Z0lIMHNYSEpjYmx4eVhHNGdJQzhxS2x4eVhHNGdJQ0FxSUZOMGIzQWdaWFpsYm5RZ1luVmlZbXhwYm1jdVhISmNiaUFnSUNvZ1FISmxkSFZ5Ym5NZ2UzWnZhV1I5WEhKY2JpQWdJQ292WEhKY2JpQWdjM1J2Y0VsdGJXVmthV0YwWlZCeWIzQmhaMkYwYVc5dUtDa2dlMXh5WEc0Z0lDQWdZMjl1YzNRZ1pHRjBZU0E5SUhCa0tIUm9hWE1wTzF4eVhHNWNjbHh1SUNBZ0lHUmhkR0V1YzNSdmNIQmxaQ0E5SUhSeWRXVTdYSEpjYmlBZ0lDQmtZWFJoTG1sdGJXVmthV0YwWlZOMGIzQndaV1FnUFNCMGNuVmxPMXh5WEc0Z0lDQWdhV1lnS0hSNWNHVnZaaUJrWVhSaExtVjJaVzUwTG5OMGIzQkpiVzFsWkdsaGRHVlFjbTl3WVdkaGRHbHZiaUE5UFQwZ0oyWjFibU4wYVc5dUp5a2dlMXh5WEc0Z0lDQWdJQ0JrWVhSaExtVjJaVzUwTG5OMGIzQkpiVzFsWkdsaGRHVlFjbTl3WVdkaGRHbHZiaWdwTzF4eVhHNGdJQ0FnZlZ4eVhHNGdJSDBzWEhKY2JseHlYRzRnSUM4cUtseHlYRzRnSUNBcUlGUm9aU0JtYkdGbklIUnZJR0psSUdKMVltSnNhVzVuTGx4eVhHNGdJQ0FxSUVCMGVYQmxJSHRpYjI5c1pXRnVmVnh5WEc0Z0lDQXFMMXh5WEc0Z0lHZGxkQ0JpZFdKaWJHVnpLQ2tnZTF4eVhHNGdJQ0FnY21WMGRYSnVJRUp2YjJ4bFlXNG9jR1FvZEdocGN5a3VaWFpsYm5RdVluVmlZbXhsY3lrN1hISmNiaUFnZlN4Y2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0lDb2dWR2hsSUdac1lXY2dkRzhnWW1VZ1kyRnVZMlZzWVdKc1pTNWNjbHh1SUNBZ0tpQkFkSGx3WlNCN1ltOXZiR1ZoYm4xY2NseHVJQ0FnS2k5Y2NseHVJQ0JuWlhRZ1kyRnVZMlZzWVdKc1pTZ3BJSHRjY2x4dUlDQWdJSEpsZEhWeWJpQkNiMjlzWldGdUtIQmtLSFJvYVhNcExtVjJaVzUwTG1OaGJtTmxiR0ZpYkdVcE8xeHlYRzRnSUgwc1hISmNibHh5WEc0Z0lDOHFLbHh5WEc0Z0lDQXFJRU5oYm1ObGJDQjBhR2x6SUdWMlpXNTBMbHh5WEc0Z0lDQXFJRUJ5WlhSMWNtNXpJSHQyYjJsa2ZWeHlYRzRnSUNBcUwxeHlYRzRnSUhCeVpYWmxiblJFWldaaGRXeDBLQ2tnZTF4eVhHNGdJQ0FnYzJWMFEyRnVZMlZzUm14aFp5aHdaQ2gwYUdsektTazdYSEpjYmlBZ2ZTeGNjbHh1WEhKY2JpQWdMeW9xWEhKY2JpQWdJQ29nVkdobElHWnNZV2NnZEc4Z2FXNWthV05oZEdVZ1kyRnVZMlZzYkdGMGFXOXVJSE4wWVhSbExseHlYRzRnSUNBcUlFQjBlWEJsSUh0aWIyOXNaV0Z1ZlZ4eVhHNGdJQ0FxTDF4eVhHNGdJR2RsZENCa1pXWmhkV3gwVUhKbGRtVnVkR1ZrS0NrZ2UxeHlYRzRnSUNBZ2NtVjBkWEp1SUhCa0tIUm9hWE1wTG1OaGJtTmxiR1ZrTzF4eVhHNGdJSDBzWEhKY2JseHlYRzRnSUM4cUtseHlYRzRnSUNBcUlGUm9aU0JtYkdGbklIUnZJR0psSUdOdmJYQnZjMlZrTGx4eVhHNGdJQ0FxSUVCMGVYQmxJSHRpYjI5c1pXRnVmVnh5WEc0Z0lDQXFMMXh5WEc0Z0lHZGxkQ0JqYjIxd2IzTmxaQ2dwSUh0Y2NseHVJQ0FnSUhKbGRIVnliaUJDYjI5c1pXRnVLSEJrS0hSb2FYTXBMbVYyWlc1MExtTnZiWEJ2YzJWa0tUdGNjbHh1SUNCOUxGeHlYRzVjY2x4dUlDQXZLaXBjY2x4dUlDQWdLaUJVYUdVZ2RXNXBlQ0IwYVcxbElHOW1JSFJvYVhNZ1pYWmxiblF1WEhKY2JpQWdJQ29nUUhSNWNHVWdlMjUxYldKbGNuMWNjbHh1SUNBZ0tpOWNjbHh1SUNCblpYUWdkR2x0WlZOMFlXMXdLQ2tnZTF4eVhHNGdJQ0FnY21WMGRYSnVJSEJrS0hSb2FYTXBMblJwYldWVGRHRnRjRHRjY2x4dUlDQjlMRnh5WEc1Y2NseHVJQ0F2S2lwY2NseHVJQ0FnS2lCVWFHVWdkR0Z5WjJWMElHOW1JSFJvYVhNZ1pYWmxiblF1WEhKY2JpQWdJQ29nUUhSNWNHVWdlMFYyWlc1MFZHRnlaMlYwZlZ4eVhHNGdJQ0FxSUVCa1pYQnlaV05oZEdWa1hISmNiaUFnSUNvdlhISmNiaUFnWjJWMElITnlZMFZzWlcxbGJuUW9LU0I3WEhKY2JpQWdJQ0J5WlhSMWNtNGdjR1FvZEdocGN5a3VaWFpsYm5SVVlYSm5aWFE3WEhKY2JpQWdmU3hjY2x4dVhISmNiaUFnTHlvcVhISmNiaUFnSUNvZ1ZHaGxJR1pzWVdjZ2RHOGdjM1J2Y0NCbGRtVnVkQ0JpZFdKaWJHbHVaeTVjY2x4dUlDQWdLaUJBZEhsd1pTQjdZbTl2YkdWaGJuMWNjbHh1SUNBZ0tpQkFaR1Z3Y21WallYUmxaRnh5WEc0Z0lDQXFMMXh5WEc0Z0lHZGxkQ0JqWVc1alpXeENkV0ppYkdVb0tTQjdYSEpjYmlBZ0lDQnlaWFIxY200Z2NHUW9kR2hwY3lrdWMzUnZjSEJsWkR0Y2NseHVJQ0I5TEZ4eVhHNGdJSE5sZENCallXNWpaV3hDZFdKaWJHVW9kbUZzZFdVcElIdGNjbHh1SUNBZ0lHbG1JQ2doZG1Gc2RXVXBJSHRjY2x4dUlDQWdJQ0FnY21WMGRYSnVPMXh5WEc0Z0lDQWdmVnh5WEc0Z0lDQWdZMjl1YzNRZ1pHRjBZU0E5SUhCa0tIUm9hWE1wTzF4eVhHNWNjbHh1SUNBZ0lHUmhkR0V1YzNSdmNIQmxaQ0E5SUhSeWRXVTdYSEpjYmlBZ0lDQnBaaUFvZEhsd1pXOW1JR1JoZEdFdVpYWmxiblF1WTJGdVkyVnNRblZpWW14bElEMDlQU0FuWW05dmJHVmhiaWNwSUh0Y2NseHVJQ0FnSUNBZ1pHRjBZUzVsZG1WdWRDNWpZVzVqWld4Q2RXSmliR1VnUFNCMGNuVmxPMXh5WEc0Z0lDQWdmVnh5WEc0Z0lIMHNYSEpjYmx4eVhHNGdJQzhxS2x4eVhHNGdJQ0FxSUZSb1pTQm1iR0ZuSUhSdklHbHVaR2xqWVhSbElHTmhibU5sYkd4aGRHbHZiaUJ6ZEdGMFpTNWNjbHh1SUNBZ0tpQkFkSGx3WlNCN1ltOXZiR1ZoYm4xY2NseHVJQ0FnS2lCQVpHVndjbVZqWVhSbFpGeHlYRzRnSUNBcUwxeHlYRzRnSUdkbGRDQnlaWFIxY201V1lXeDFaU2dwSUh0Y2NseHVJQ0FnSUhKbGRIVnliaUFoY0dRb2RHaHBjeWt1WTJGdVkyVnNaV1E3WEhKY2JpQWdmU3hjY2x4dUlDQnpaWFFnY21WMGRYSnVWbUZzZFdVb2RtRnNkV1VwSUh0Y2NseHVJQ0FnSUdsbUlDZ2hkbUZzZFdVcElIdGNjbHh1SUNBZ0lDQWdjMlYwUTJGdVkyVnNSbXhoWnlod1pDaDBhR2x6S1NrN1hISmNiaUFnSUNCOVhISmNiaUFnZlN4Y2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0lDb2dTVzVwZEdsaGJHbDZaU0IwYUdseklHVjJaVzUwSUc5aWFtVmpkQzRnUW5WMElHUnZJRzV2ZEdocGJtY2dkVzVrWlhJZ1pYWmxiblFnWkdsemNHRjBZMmhwYm1jdVhISmNiaUFnSUNvZ1FIQmhjbUZ0SUh0emRISnBibWQ5SUhSNWNHVWdWR2hsSUdWMlpXNTBJSFI1Y0dVdVhISmNiaUFnSUNvZ1FIQmhjbUZ0SUh0aWIyOXNaV0Z1ZlNCYlluVmlZbXhsY3oxbVlXeHpaVjBnVkdobElHWnNZV2NnZEc4Z1ltVWdjRzl6YzJsaWJHVWdkRzhnWW5WaVlteGxJSFZ3TGx4eVhHNGdJQ0FxSUVCd1lYSmhiU0I3WW05dmJHVmhibjBnVzJOaGJtTmxiR0ZpYkdVOVptRnNjMlZkSUZSb1pTQm1iR0ZuSUhSdklHSmxJSEJ2YzNOcFlteGxJSFJ2SUdOaGJtTmxiQzVjY2x4dUlDQWdLaUJBWkdWd2NtVmpZWFJsWkZ4eVhHNGdJQ0FxTDF4eVhHNGdJR2x1YVhSRmRtVnVkQ2dwSUh0Y2NseHVJQ0FnSUM4dklFUnZJRzV2ZEdocGJtY3VYSEpjYmlBZ2ZWeHlYRzU5TzF4eVhHNWNjbHh1THk4Z1lHTnZibk4wY25WamRHOXlZQ0JwY3lCdWIzUWdaVzUxYldWeVlXSnNaUzVjY2x4dVQySnFaV04wTG1SbFptbHVaVkJ5YjNCbGNuUjVLRVYyWlc1MExuQnliM1J2ZEhsd1pTd2dKMk52Ym5OMGNuVmpkRzl5Snl3Z2UxeHlYRzRnSUhaaGJIVmxPaUJGZG1WdWRDeGNjbHh1SUNCamIyNW1hV2QxY21GaWJHVTZJSFJ5ZFdVc1hISmNiaUFnZDNKcGRHRmliR1U2SUhSeWRXVmNjbHh1ZlNrN1hISmNibHh5WEc0dkx5QkZibk4xY21VZ1lHVjJaVzUwSUdsdWMzUmhibU5sYjJZZ2QybHVaRzkzTGtWMlpXNTBZQ0JwY3lCZ2RISjFaV0F1WEhKY2JtbG1JQ2gwZVhCbGIyWWdkMmx1Wkc5M0lDRTlQU0FuZFc1a1pXWnBibVZrSnlBbUppQjBlWEJsYjJZZ2QybHVaRzkzTGtWMlpXNTBJQ0U5UFNBbmRXNWtaV1pwYm1Wa0p5a2dlMXh5WEc0Z0lFOWlhbVZqZEM1elpYUlFjbTkwYjNSNWNHVlBaaWhGZG1WdWRDNXdjbTkwYjNSNWNHVXNJSGRwYm1SdmR5NUZkbVZ1ZEM1d2NtOTBiM1I1Y0dVcE8xeHlYRzVjY2x4dUlDQXZMeUJOWVd0bElHRnpjMjlqYVdGMGFXOXVJR1p2Y2lCM2NtRndjR1Z5Y3k1Y2NseHVJQ0IzY21Gd2NHVnljeTV6WlhRb2QybHVaRzkzTGtWMlpXNTBMbkJ5YjNSdmRIbHdaU3dnUlhabGJuUXBPMXh5WEc1OVhISmNibHh5WEc0dktpcGNjbHh1SUNvZ1IyVjBJSFJvWlNCd2NtOXdaWEowZVNCa1pYTmpjbWx3ZEc5eUlIUnZJSEpsWkdseVpXTjBJR0VnWjJsMlpXNGdjSEp2Y0dWeWRIa3VYSEpjYmlBcUlFQndZWEpoYlNCN2MzUnlhVzVuZlNCclpYa2dVSEp2Y0dWeWRIa2dibUZ0WlNCMGJ5QmtaV1pwYm1VZ2NISnZjR1Z5ZEhrZ1pHVnpZM0pwY0hSdmNpNWNjbHh1SUNvZ1FISmxkSFZ5Ym5NZ2UxQnliM0JsY25SNVJHVnpZM0pwY0hSdmNuMGdWR2hsSUhCeWIzQmxjblI1SUdSbGMyTnlhWEIwYjNJZ2RHOGdjbVZrYVhKbFkzUWdkR2hsSUhCeWIzQmxjblI1TGx4eVhHNGdLaUJBY0hKcGRtRjBaVnh5WEc0Z0tpOWNjbHh1Wm5WdVkzUnBiMjRnWkdWbWFXNWxVbVZrYVhKbFkzUkVaWE5qY21sd2RHOXlLR3RsZVNrZ2UxeHlYRzRnSUhKbGRIVnliaUI3WEhKY2JpQWdJQ0JuWlhRb0tTQjdYSEpjYmlBZ0lDQWdJSEpsZEhWeWJpQndaQ2gwYUdsektTNWxkbVZ1ZEZ0clpYbGRPMXh5WEc0Z0lDQWdmU3hjY2x4dUlDQWdJSE5sZENoMllXeDFaU2tnZTF4eVhHNGdJQ0FnSUNCd1pDaDBhR2x6S1M1bGRtVnVkRnRyWlhsZElEMGdkbUZzZFdVN1hISmNiaUFnSUNCOUxGeHlYRzRnSUNBZ1kyOXVabWxuZFhKaFlteGxPaUIwY25WbExGeHlYRzRnSUNBZ1pXNTFiV1Z5WVdKc1pUb2dkSEoxWlZ4eVhHNGdJSDA3WEhKY2JuMWNjbHh1WEhKY2JpOHFLbHh5WEc0Z0tpQkhaWFFnZEdobElIQnliM0JsY25SNUlHUmxjMk55YVhCMGIzSWdkRzhnWTJGc2JDQmhJR2RwZG1WdUlHMWxkR2h2WkNCd2NtOXdaWEowZVM1Y2NseHVJQ29nUUhCaGNtRnRJSHR6ZEhKcGJtZDlJR3RsZVNCUWNtOXdaWEowZVNCdVlXMWxJSFJ2SUdSbFptbHVaU0J3Y205d1pYSjBlU0JrWlhOamNtbHdkRzl5TGx4eVhHNGdLaUJBY21WMGRYSnVjeUI3VUhKdmNHVnlkSGxFWlhOamNtbHdkRzl5ZlNCVWFHVWdjSEp2Y0dWeWRIa2daR1Z6WTNKcGNIUnZjaUIwYnlCallXeHNJSFJvWlNCdFpYUm9iMlFnY0hKdmNHVnlkSGt1WEhKY2JpQXFJRUJ3Y21sMllYUmxYSEpjYmlBcUwxeHlYRzVtZFc1amRHbHZiaUJrWldacGJtVkRZV3hzUkdWelkzSnBjSFJ2Y2loclpYa3BJSHRjY2x4dUlDQnlaWFIxY200Z2UxeHlYRzRnSUNBZ2RtRnNkV1VvS1NCN1hISmNiaUFnSUNBZ0lHTnZibk4wSUdWMlpXNTBJRDBnY0dRb2RHaHBjeWt1WlhabGJuUTdYSEpjYmlBZ0lDQWdJSEpsZEhWeWJpQmxkbVZ1ZEZ0clpYbGRMbUZ3Y0d4NUtHVjJaVzUwTENCaGNtZDFiV1Z1ZEhNcE8xeHlYRzRnSUNBZ2ZTeGNjbHh1SUNBZ0lHTnZibVpwWjNWeVlXSnNaVG9nZEhKMVpTeGNjbHh1SUNBZ0lHVnVkVzFsY21GaWJHVTZJSFJ5ZFdWY2NseHVJQ0I5TzF4eVhHNTlYSEpjYmx4eVhHNHZLaXBjY2x4dUlDb2dSR1ZtYVc1bElHNWxkeUIzY21Gd2NHVnlJR05zWVhOekxseHlYRzRnS2lCQWNHRnlZVzBnZTBaMWJtTjBhVzl1ZlNCQ1lYTmxSWFpsYm5RZ1ZHaGxJR0poYzJVZ2QzSmhjSEJsY2lCamJHRnpjeTVjY2x4dUlDb2dRSEJoY21GdElIdFBZbXBsWTNSOUlIQnliM1J2SUZSb1pTQndjbTkwYjNSNWNHVWdiMllnZEdobElHOXlhV2RwYm1Gc0lHVjJaVzUwTGx4eVhHNGdLaUJBY21WMGRYSnVjeUI3Um5WdVkzUnBiMjU5SUZSb1pTQmtaV1pwYm1Wa0lIZHlZWEJ3WlhJZ1kyeGhjM011WEhKY2JpQXFJRUJ3Y21sMllYUmxYSEpjYmlBcUwxeHlYRzVtZFc1amRHbHZiaUJrWldacGJtVlhjbUZ3Y0dWeUtFSmhjMlZGZG1WdWRDd2djSEp2ZEc4cElIdGNjbHh1SUNCamIyNXpkQ0JyWlhseklEMGdUMkpxWldOMExtdGxlWE1vY0hKdmRHOHBPMXh5WEc0Z0lHbG1JQ2hyWlhsekxteGxibWQwYUNBOVBUMGdNQ2tnZTF4eVhHNGdJQ0FnY21WMGRYSnVJRUpoYzJWRmRtVnVkRHRjY2x4dUlDQjlYSEpjYmx4eVhHNGdJQzhxS2lCRGRYTjBiMjFGZG1WdWRDQXFMMXh5WEc0Z0lHWjFibU4wYVc5dUlFTjFjM1J2YlVWMlpXNTBLR1YyWlc1MFZHRnlaMlYwTENCbGRtVnVkQ2tnZTF4eVhHNGdJQ0FnUW1GelpVVjJaVzUwTG1OaGJHd29kR2hwY3l3Z1pYWmxiblJVWVhKblpYUXNJR1YyWlc1MEtUdGNjbHh1SUNCOVhISmNibHh5WEc0Z0lFTjFjM1J2YlVWMlpXNTBMbkJ5YjNSdmRIbHdaU0E5SUU5aWFtVmpkQzVqY21WaGRHVW9RbUZ6WlVWMlpXNTBMbkJ5YjNSdmRIbHdaU3dnZTF4eVhHNGdJQ0FnWTI5dWMzUnlkV04wYjNJNklIc2dkbUZzZFdVNklFTjFjM1J2YlVWMlpXNTBMQ0JqYjI1bWFXZDFjbUZpYkdVNklIUnlkV1VzSUhkeWFYUmhZbXhsT2lCMGNuVmxJSDFjY2x4dUlDQjlLVHRjY2x4dVhISmNiaUFnTHk4Z1JHVm1hVzVsSUdGalkyVnpjMjl5Y3k1Y2NseHVJQ0JtYjNJZ0tHeGxkQ0JwSUQwZ01Ec2dhU0E4SUd0bGVYTXViR1Z1WjNSb095QXJLMmtwSUh0Y2NseHVJQ0FnSUdOdmJuTjBJR3RsZVNBOUlHdGxlWE5iYVYwN1hISmNiaUFnSUNCcFppQW9JU2hyWlhrZ2FXNGdRbUZ6WlVWMlpXNTBMbkJ5YjNSdmRIbHdaU2twSUh0Y2NseHVJQ0FnSUNBZ1kyOXVjM1FnWkdWelkzSnBjSFJ2Y2lBOUlFOWlhbVZqZEM1blpYUlBkMjVRY205d1pYSjBlVVJsYzJOeWFYQjBiM0lvY0hKdmRHOHNJR3RsZVNrN1hISmNiaUFnSUNBZ0lHTnZibk4wSUdselJuVnVZeUE5SUhSNWNHVnZaaUJrWlhOamNtbHdkRzl5TG5aaGJIVmxJRDA5UFNBblpuVnVZM1JwYjI0bk8xeHlYRzRnSUNBZ0lDQlBZbXBsWTNRdVpHVm1hVzVsVUhKdmNHVnlkSGtvWEhKY2JpQWdJQ0FnSUNBZ1EzVnpkRzl0UlhabGJuUXVjSEp2ZEc5MGVYQmxMRnh5WEc0Z0lDQWdJQ0FnSUd0bGVTeGNjbHh1SUNBZ0lDQWdJQ0JwYzBaMWJtTWdQeUJrWldacGJtVkRZV3hzUkdWelkzSnBjSFJ2Y2loclpYa3BJRG9nWkdWbWFXNWxVbVZrYVhKbFkzUkVaWE5qY21sd2RHOXlLR3RsZVNsY2NseHVJQ0FnSUNBZ0tUdGNjbHh1SUNBZ0lIMWNjbHh1SUNCOVhISmNibHh5WEc0Z0lISmxkSFZ5YmlCRGRYTjBiMjFGZG1WdWREdGNjbHh1ZlZ4eVhHNWNjbHh1THlvcVhISmNiaUFxSUVkbGRDQjBhR1VnZDNKaGNIQmxjaUJqYkdGemN5QnZaaUJoSUdkcGRtVnVJSEJ5YjNSdmRIbHdaUzVjY2x4dUlDb2dRSEJoY21GdElIdFBZbXBsWTNSOUlIQnliM1J2SUZSb1pTQndjbTkwYjNSNWNHVWdiMllnZEdobElHOXlhV2RwYm1Gc0lHVjJaVzUwSUhSdklHZGxkQ0JwZEhNZ2QzSmhjSEJsY2k1Y2NseHVJQ29nUUhKbGRIVnlibk1nZTBaMWJtTjBhVzl1ZlNCVWFHVWdkM0poY0hCbGNpQmpiR0Z6Y3k1Y2NseHVJQ29nUUhCeWFYWmhkR1ZjY2x4dUlDb3ZYSEpjYm1aMWJtTjBhVzl1SUdkbGRGZHlZWEJ3WlhJb2NISnZkRzhwSUh0Y2NseHVJQ0JwWmlBb2NISnZkRzhnUFQwZ2JuVnNiQ0I4ZkNCd2NtOTBieUE5UFQwZ1QySnFaV04wTG5CeWIzUnZkSGx3WlNrZ2UxeHlYRzRnSUNBZ2NtVjBkWEp1SUVWMlpXNTBPMXh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdiR1YwSUhkeVlYQndaWElnUFNCM2NtRndjR1Z5Y3k1blpYUW9jSEp2ZEc4cE8xeHlYRzRnSUdsbUlDaDNjbUZ3Y0dWeUlEMDlJRzUxYkd3cElIdGNjbHh1SUNBZ0lIZHlZWEJ3WlhJZ1BTQmtaV1pwYm1WWGNtRndjR1Z5S0dkbGRGZHlZWEJ3WlhJb1QySnFaV04wTG1kbGRGQnliM1J2ZEhsd1pVOW1LSEJ5YjNSdktTa3NJSEJ5YjNSdktUdGNjbHh1SUNBZ0lIZHlZWEJ3WlhKekxuTmxkQ2h3Y205MGJ5d2dkM0poY0hCbGNpazdYSEpjYmlBZ2ZWeHlYRzRnSUhKbGRIVnliaUIzY21Gd2NHVnlPMXh5WEc1OVhISmNibHh5WEc0dktpcGNjbHh1SUNvZ1YzSmhjQ0JoSUdkcGRtVnVJR1YyWlc1MElIUnZJRzFoYm1GblpXMWxiblFnWVNCa2FYTndZWFJqYUdsdVp5NWNjbHh1SUNvZ1FIQmhjbUZ0SUh0RmRtVnVkRlJoY21kbGRIMGdaWFpsYm5SVVlYSm5aWFFnVkdobElHVjJaVzUwSUhSaGNtZGxkQ0J2WmlCMGFHbHpJR1JwYzNCaGRHTm9hVzVuTGx4eVhHNGdLaUJBY0dGeVlXMGdlMDlpYW1WamRIMGdaWFpsYm5RZ1ZHaGxJR1YyWlc1MElIUnZJSGR5WVhBdVhISmNiaUFxSUVCeVpYUjFjbTV6SUh0RmRtVnVkSDBnVkdobElIZHlZWEJ3WlhJZ2FXNXpkR0Z1WTJVdVhISmNiaUFxSUVCd2NtbDJZWFJsWEhKY2JpQXFMMXh5WEc1bWRXNWpkR2x2YmlCM2NtRndSWFpsYm5Rb1pYWmxiblJVWVhKblpYUXNJR1YyWlc1MEtTQjdYSEpjYmlBZ1kyOXVjM1FnVjNKaGNIQmxjaUE5SUdkbGRGZHlZWEJ3WlhJb1QySnFaV04wTG1kbGRGQnliM1J2ZEhsd1pVOW1LR1YyWlc1MEtTazdYSEpjYmlBZ2NtVjBkWEp1SUc1bGR5QlhjbUZ3Y0dWeUtHVjJaVzUwVkdGeVoyVjBMQ0JsZG1WdWRDazdYSEpjYm4xY2NseHVYSEpjYmk4cUtseHlYRzRnS2lCSFpYUWdkR2hsSUdsdGJXVmthV0YwWlZOMGIzQndaV1FnWm14aFp5QnZaaUJoSUdkcGRtVnVJR1YyWlc1MExseHlYRzRnS2lCQWNHRnlZVzBnZTBWMlpXNTBmU0JsZG1WdWRDQlVhR1VnWlhabGJuUWdkRzhnWjJWMExseHlYRzRnS2lCQWNtVjBkWEp1Y3lCN1ltOXZiR1ZoYm4wZ1ZHaGxJR1pzWVdjZ2RHOGdjM1J2Y0NCd2NtOXdZV2RoZEdsdmJpQnBiVzFsWkdsaGRHVnNlUzVjY2x4dUlDb2dRSEJ5YVhaaGRHVmNjbHh1SUNvdlhISmNibVoxYm1OMGFXOXVJR2x6VTNSdmNIQmxaQ2hsZG1WdWRDa2dlMXh5WEc0Z0lISmxkSFZ5YmlCd1pDaGxkbVZ1ZENrdWFXMXRaV1JwWVhSbFUzUnZjSEJsWkR0Y2NseHVmVnh5WEc1Y2NseHVMeW9xWEhKY2JpQXFJRk5sZENCMGFHVWdZM1Z5Y21WdWRDQmxkbVZ1ZENCd2FHRnpaU0J2WmlCaElHZHBkbVZ1SUdWMlpXNTBMbHh5WEc0Z0tpQkFjR0Z5WVcwZ2UwVjJaVzUwZlNCbGRtVnVkQ0JVYUdVZ1pYWmxiblFnZEc4Z2MyVjBJR04xY25KbGJuUWdkR0Z5WjJWMExseHlYRzRnS2lCQWNHRnlZVzBnZTI1MWJXSmxjbjBnWlhabGJuUlFhR0Z6WlNCT1pYY2daWFpsYm5RZ2NHaGhjMlV1WEhKY2JpQXFJRUJ5WlhSMWNtNXpJSHQyYjJsa2ZWeHlYRzRnS2lCQWNISnBkbUYwWlZ4eVhHNGdLaTljY2x4dVpuVnVZM1JwYjI0Z2MyVjBSWFpsYm5SUWFHRnpaU2hsZG1WdWRDd2daWFpsYm5SUWFHRnpaU2tnZTF4eVhHNGdJSEJrS0dWMlpXNTBLUzVsZG1WdWRGQm9ZWE5sSUQwZ1pYWmxiblJRYUdGelpUdGNjbHh1ZlZ4eVhHNWNjbHh1THlvcVhISmNiaUFxSUZObGRDQjBhR1VnWTNWeWNtVnVkQ0IwWVhKblpYUWdiMllnWVNCbmFYWmxiaUJsZG1WdWRDNWNjbHh1SUNvZ1FIQmhjbUZ0SUh0RmRtVnVkSDBnWlhabGJuUWdWR2hsSUdWMlpXNTBJSFJ2SUhObGRDQmpkWEp5Wlc1MElIUmhjbWRsZEM1Y2NseHVJQ29nUUhCaGNtRnRJSHRGZG1WdWRGUmhjbWRsZEh4dWRXeHNmU0JqZFhKeVpXNTBWR0Z5WjJWMElFNWxkeUJqZFhKeVpXNTBJSFJoY21kbGRDNWNjbHh1SUNvZ1FISmxkSFZ5Ym5NZ2UzWnZhV1I5WEhKY2JpQXFJRUJ3Y21sMllYUmxYSEpjYmlBcUwxeHlYRzVtZFc1amRHbHZiaUJ6WlhSRGRYSnlaVzUwVkdGeVoyVjBLR1YyWlc1MExDQmpkWEp5Wlc1MFZHRnlaMlYwS1NCN1hISmNiaUFnY0dRb1pYWmxiblFwTG1OMWNuSmxiblJVWVhKblpYUWdQU0JqZFhKeVpXNTBWR0Z5WjJWME8xeHlYRzU5WEhKY2JseHlYRzR2S2lwY2NseHVJQ29nVTJWMElHRWdjR0Z6YzJsMlpTQnNhWE4wWlc1bGNpQnZaaUJoSUdkcGRtVnVJR1YyWlc1MExseHlYRzRnS2lCQWNHRnlZVzBnZTBWMlpXNTBmU0JsZG1WdWRDQlVhR1VnWlhabGJuUWdkRzhnYzJWMElHTjFjbkpsYm5RZ2RHRnlaMlYwTGx4eVhHNGdLaUJBY0dGeVlXMGdlMFoxYm1OMGFXOXVmRzUxYkd4OUlIQmhjM05wZG1WTWFYTjBaVzVsY2lCT1pYY2djR0Z6YzJsMlpTQnNhWE4wWlc1bGNpNWNjbHh1SUNvZ1FISmxkSFZ5Ym5NZ2UzWnZhV1I5WEhKY2JpQXFJRUJ3Y21sMllYUmxYSEpjYmlBcUwxeHlYRzVtZFc1amRHbHZiaUJ6WlhSUVlYTnphWFpsVEdsemRHVnVaWElvWlhabGJuUXNJSEJoYzNOcGRtVk1hWE4wWlc1bGNpa2dlMXh5WEc0Z0lIQmtLR1YyWlc1MEtTNXdZWE56YVhabFRHbHpkR1Z1WlhJZ1BTQndZWE56YVhabFRHbHpkR1Z1WlhJN1hISmNibjFjY2x4dVhISmNiaThxS2x4eVhHNGdLaUJBZEhsd1pXUmxaaUI3YjJKcVpXTjBmU0JNYVhOMFpXNWxjazV2WkdWY2NseHVJQ29nUUhCeWIzQmxjblI1SUh0R2RXNWpkR2x2Ym4wZ2JHbHpkR1Z1WlhKY2NseHVJQ29nUUhCeWIzQmxjblI1SUhzeGZESjhNMzBnYkdsemRHVnVaWEpVZVhCbFhISmNiaUFxSUVCd2NtOXdaWEowZVNCN1ltOXZiR1ZoYm4wZ2NHRnpjMmwyWlZ4eVhHNGdLaUJBY0hKdmNHVnlkSGtnZTJKdmIyeGxZVzU5SUc5dVkyVmNjbHh1SUNvZ1FIQnliM0JsY25SNUlIdE1hWE4wWlc1bGNrNXZaR1Y4Ym5Wc2JIMGdibVY0ZEZ4eVhHNGdLaUJBY0hKcGRtRjBaVnh5WEc0Z0tpOWNjbHh1WEhKY2JpOHFLbHh5WEc0Z0tpQkFkSGx3WlNCN1YyVmhhMDFoY0R4dlltcGxZM1FzSUUxaGNEeHpkSEpwYm1jc0lFeHBjM1JsYm1WeVRtOWtaVDQrZlZ4eVhHNGdLaUJBY0hKcGRtRjBaVnh5WEc0Z0tpOWNjbHh1WTI5dWMzUWdiR2x6ZEdWdVpYSnpUV0Z3SUQwZ2JtVjNJRmRsWVd0TllYQW9LVHRjY2x4dVhISmNiaTh2SUV4cGMzUmxibVZ5SUhSNWNHVnpYSEpjYm1OdmJuTjBJRU5CVUZSVlVrVWdQU0F4TzF4eVhHNWpiMjV6ZENCQ1ZVSkNURVVnUFNBeU8xeHlYRzVqYjI1emRDQkJWRlJTU1VKVlZFVWdQU0F6TzF4eVhHNWNjbHh1THlvcVhISmNiaUFxSUVOb1pXTnJJSGRvWlhSb1pYSWdZU0JuYVhabGJpQjJZV3gxWlNCcGN5QmhiaUJ2WW1wbFkzUWdiM0lnYm05MExseHlYRzRnS2lCQWNHRnlZVzBnZTJGdWVYMGdlQ0JVYUdVZ2RtRnNkV1VnZEc4Z1kyaGxZMnN1WEhKY2JpQXFJRUJ5WlhSMWNtNXpJSHRpYjI5c1pXRnVmU0JnZEhKMVpXQWdhV1lnZEdobElIWmhiSFZsSUdseklHRnVJRzlpYW1WamRDNWNjbHh1SUNvdlhISmNibVoxYm1OMGFXOXVJR2x6VDJKcVpXTjBLSGdwSUh0Y2NseHVJQ0J5WlhSMWNtNGdlQ0FoUFQwZ2JuVnNiQ0FtSmlCMGVYQmxiMllnZUNBOVBUMGdKMjlpYW1WamRDYzdJQzh2WlhOc2FXNTBMV1JwYzJGaWJHVXRiR2x1WlNCdWJ5MXlaWE4wY21samRHVmtMWE41Ym5SaGVGeHlYRzU5WEhKY2JseHlYRzR2S2lwY2NseHVJQ29nUjJWMElHeHBjM1JsYm1WeWN5NWNjbHh1SUNvZ1FIQmhjbUZ0SUh0RmRtVnVkRlJoY21kbGRIMGdaWFpsYm5SVVlYSm5aWFFnVkdobElHVjJaVzUwSUhSaGNtZGxkQ0IwYnlCblpYUXVYSEpjYmlBcUlFQnlaWFIxY201eklIdE5ZWEE4YzNSeWFXNW5MQ0JNYVhOMFpXNWxjazV2WkdVK2ZTQlVhR1VnYkdsemRHVnVaWEp6TGx4eVhHNGdLaUJBY0hKcGRtRjBaVnh5WEc0Z0tpOWNjbHh1Wm5WdVkzUnBiMjRnWjJWMFRHbHpkR1Z1WlhKektHVjJaVzUwVkdGeVoyVjBLU0I3WEhKY2JpQWdZMjl1YzNRZ2JHbHpkR1Z1WlhKeklEMGdiR2x6ZEdWdVpYSnpUV0Z3TG1kbGRDaGxkbVZ1ZEZSaGNtZGxkQ2s3WEhKY2JpQWdhV1lnS0d4cGMzUmxibVZ5Y3lBOVBTQnVkV3hzS1NCN1hISmNiaUFnSUNCMGFISnZkeUJ1WlhjZ1ZIbHdaVVZ5Y205eUtGd2lKM1JvYVhNbklHbHpJR1Y0Y0dWamRHVmtJR0Z1SUVWMlpXNTBWR0Z5WjJWMElHOWlhbVZqZEN3Z1luVjBJR2R2ZENCaGJtOTBhR1Z5SUhaaGJIVmxMbHdpS1R0Y2NseHVJQ0I5WEhKY2JpQWdjbVYwZFhKdUlHeHBjM1JsYm1WeWN6dGNjbHh1ZlZ4eVhHNWNjbHh1THlvcVhISmNiaUFxSUVkbGRDQjBhR1VnY0hKdmNHVnlkSGtnWkdWelkzSnBjSFJ2Y2lCbWIzSWdkR2hsSUdWMlpXNTBJR0YwZEhKcFluVjBaU0J2WmlCaElHZHBkbVZ1SUdWMlpXNTBMbHh5WEc0Z0tpQkFjR0Z5WVcwZ2UzTjBjbWx1WjMwZ1pYWmxiblJPWVcxbElGUm9aU0JsZG1WdWRDQnVZVzFsSUhSdklHZGxkQ0J3Y205d1pYSjBlU0JrWlhOamNtbHdkRzl5TGx4eVhHNGdLaUJBY21WMGRYSnVjeUI3VUhKdmNHVnlkSGxFWlhOamNtbHdkRzl5ZlNCVWFHVWdjSEp2Y0dWeWRIa2daR1Z6WTNKcGNIUnZjaTVjY2x4dUlDb2dRSEJ5YVhaaGRHVmNjbHh1SUNvdlhISmNibVoxYm1OMGFXOXVJR1JsWm1sdVpVVjJaVzUwUVhSMGNtbGlkWFJsUkdWelkzSnBjSFJ2Y2lobGRtVnVkRTVoYldVcElIdGNjbHh1SUNCeVpYUjFjbTRnZTF4eVhHNGdJQ0FnWjJWMEtDa2dlMXh5WEc0Z0lDQWdJQ0JqYjI1emRDQnNhWE4wWlc1bGNuTWdQU0JuWlhSTWFYTjBaVzVsY25Nb2RHaHBjeWs3WEhKY2JpQWdJQ0FnSUd4bGRDQnViMlJsSUQwZ2JHbHpkR1Z1WlhKekxtZGxkQ2hsZG1WdWRFNWhiV1VwTzF4eVhHNGdJQ0FnSUNCM2FHbHNaU0FvYm05a1pTQWhQU0J1ZFd4c0tTQjdYSEpjYmlBZ0lDQWdJQ0FnYVdZZ0tHNXZaR1V1YkdsemRHVnVaWEpVZVhCbElEMDlQU0JCVkZSU1NVSlZWRVVwSUh0Y2NseHVJQ0FnSUNBZ0lDQWdJSEpsZEhWeWJpQnViMlJsTG14cGMzUmxibVZ5TzF4eVhHNGdJQ0FnSUNBZ0lIMWNjbHh1SUNBZ0lDQWdJQ0J1YjJSbElEMGdibTlrWlM1dVpYaDBPMXh5WEc0Z0lDQWdJQ0I5WEhKY2JpQWdJQ0FnSUhKbGRIVnliaUJ1ZFd4c08xeHlYRzRnSUNBZ2ZTeGNjbHh1WEhKY2JpQWdJQ0J6WlhRb2JHbHpkR1Z1WlhJcElIdGNjbHh1SUNBZ0lDQWdhV1lnS0hSNWNHVnZaaUJzYVhOMFpXNWxjaUFoUFQwZ0oyWjFibU4wYVc5dUp5QW1KaUFoYVhOUFltcGxZM1FvYkdsemRHVnVaWElwS1NCN1hISmNiaUFnSUNBZ0lDQWdiR2x6ZEdWdVpYSWdQU0J1ZFd4c095QXZMeUJsYzJ4cGJuUXRaR2x6WVdKc1pTMXNhVzVsSUc1dkxYQmhjbUZ0TFhKbFlYTnphV2R1WEhKY2JpQWdJQ0FnSUgxY2NseHVJQ0FnSUNBZ1kyOXVjM1FnYkdsemRHVnVaWEp6SUQwZ1oyVjBUR2x6ZEdWdVpYSnpLSFJvYVhNcE8xeHlYRzVjY2x4dUlDQWdJQ0FnTHk4Z1ZISmhkbVZ5YzJVZ2RHOGdkR2hsSUhSaGFXd2dkMmhwYkdVZ2NtVnRiM1pwYm1jZ2IyeGtJSFpoYkhWbExseHlYRzRnSUNBZ0lDQnNaWFFnY0hKbGRpQTlJRzUxYkd3N1hISmNiaUFnSUNBZ0lHeGxkQ0J1YjJSbElEMGdiR2x6ZEdWdVpYSnpMbWRsZENobGRtVnVkRTVoYldVcE8xeHlYRzRnSUNBZ0lDQjNhR2xzWlNBb2JtOWtaU0FoUFNCdWRXeHNLU0I3WEhKY2JpQWdJQ0FnSUNBZ2FXWWdLRzV2WkdVdWJHbHpkR1Z1WlhKVWVYQmxJRDA5UFNCQlZGUlNTVUpWVkVVcElIdGNjbHh1SUNBZ0lDQWdJQ0FnSUM4dklGSmxiVzkyWlNCdmJHUWdkbUZzZFdVdVhISmNiaUFnSUNBZ0lDQWdJQ0JwWmlBb2NISmxkaUFoUFQwZ2JuVnNiQ2tnZTF4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0J3Y21WMkxtNWxlSFFnUFNCdWIyUmxMbTVsZUhRN1hISmNiaUFnSUNBZ0lDQWdJQ0I5SUdWc2MyVWdhV1lnS0c1dlpHVXVibVY0ZENBaFBUMGdiblZzYkNrZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnSUNCc2FYTjBaVzVsY25NdWMyVjBLR1YyWlc1MFRtRnRaU3dnYm05a1pTNXVaWGgwS1R0Y2NseHVJQ0FnSUNBZ0lDQWdJSDBnWld4elpTQjdYSEpjYmlBZ0lDQWdJQ0FnSUNBZ0lHeHBjM1JsYm1WeWN5NWtaV3hsZEdVb1pYWmxiblJPWVcxbEtUdGNjbHh1SUNBZ0lDQWdJQ0FnSUgxY2NseHVJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnY0hKbGRpQTlJRzV2WkdVN1hISmNiaUFnSUNBZ0lDQWdmVnh5WEc1Y2NseHVJQ0FnSUNBZ0lDQnViMlJsSUQwZ2JtOWtaUzV1WlhoME8xeHlYRzRnSUNBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnSUNBdkx5QkJaR1FnYm1WM0lIWmhiSFZsTGx4eVhHNGdJQ0FnSUNCcFppQW9iR2x6ZEdWdVpYSWdJVDA5SUc1MWJHd3BJSHRjY2x4dUlDQWdJQ0FnSUNCamIyNXpkQ0J1WlhkT2IyUmxJRDBnZTF4eVhHNGdJQ0FnSUNBZ0lDQWdiR2x6ZEdWdVpYSXNYSEpjYmlBZ0lDQWdJQ0FnSUNCc2FYTjBaVzVsY2xSNWNHVTZJRUZVVkZKSlFsVlVSU3hjY2x4dUlDQWdJQ0FnSUNBZ0lIQmhjM05wZG1VNklHWmhiSE5sTEZ4eVhHNGdJQ0FnSUNBZ0lDQWdiMjVqWlRvZ1ptRnNjMlVzWEhKY2JpQWdJQ0FnSUNBZ0lDQnVaWGgwT2lCdWRXeHNYSEpjYmlBZ0lDQWdJQ0FnZlR0Y2NseHVJQ0FnSUNBZ0lDQnBaaUFvY0hKbGRpQTlQVDBnYm5Wc2JDa2dlMXh5WEc0Z0lDQWdJQ0FnSUNBZ2JHbHpkR1Z1WlhKekxuTmxkQ2hsZG1WdWRFNWhiV1VzSUc1bGQwNXZaR1VwTzF4eVhHNGdJQ0FnSUNBZ0lIMGdaV3h6WlNCN1hISmNiaUFnSUNBZ0lDQWdJQ0J3Y21WMkxtNWxlSFFnUFNCdVpYZE9iMlJsTzF4eVhHNGdJQ0FnSUNBZ0lIMWNjbHh1SUNBZ0lDQWdmVnh5WEc0Z0lDQWdmU3hjY2x4dUlDQWdJR052Ym1acFozVnlZV0pzWlRvZ2RISjFaU3hjY2x4dUlDQWdJR1Z1ZFcxbGNtRmliR1U2SUhSeWRXVmNjbHh1SUNCOU8xeHlYRzU5WEhKY2JseHlYRzR2S2lwY2NseHVJQ29nUkdWbWFXNWxJR0Z1SUdWMlpXNTBJR0YwZEhKcFluVjBaU0FvWlM1bkxpQmdaWFpsYm5SVVlYSm5aWFF1YjI1amJHbGphMkFwTGx4eVhHNGdLaUJBY0dGeVlXMGdlMDlpYW1WamRIMGdaWFpsYm5SVVlYSm5aWFJRY205MGIzUjVjR1VnVkdobElHVjJaVzUwSUhSaGNtZGxkQ0J3Y205MGIzUjVjR1VnZEc4Z1pHVm1hVzVsSUdGdUlHVjJaVzUwSUdGMGRISmlhWFJsTGx4eVhHNGdLaUJBY0dGeVlXMGdlM04wY21sdVozMGdaWFpsYm5ST1lXMWxJRlJvWlNCbGRtVnVkQ0J1WVcxbElIUnZJR1JsWm1sdVpTNWNjbHh1SUNvZ1FISmxkSFZ5Ym5NZ2UzWnZhV1I5WEhKY2JpQXFMMXh5WEc1bWRXNWpkR2x2YmlCa1pXWnBibVZGZG1WdWRFRjBkSEpwWW5WMFpTaGxkbVZ1ZEZSaGNtZGxkRkJ5YjNSdmRIbHdaU3dnWlhabGJuUk9ZVzFsS1NCN1hISmNiaUFnVDJKcVpXTjBMbVJsWm1sdVpWQnliM0JsY25SNUtHVjJaVzUwVkdGeVoyVjBVSEp2ZEc5MGVYQmxMQ0JnYjI0a2UyVjJaVzUwVG1GdFpYMWdMQ0JrWldacGJtVkZkbVZ1ZEVGMGRISnBZblYwWlVSbGMyTnlhWEIwYjNJb1pYWmxiblJPWVcxbEtTazdYSEpjYm4xY2NseHVYSEpjYmk4cUtseHlYRzRnS2lCRVpXWnBibVVnWVNCamRYTjBiMjBnUlhabGJuUlVZWEpuWlhRZ2QybDBhQ0JsZG1WdWRDQmhkSFJ5YVdKMWRHVnpMbHh5WEc0Z0tpQkFjR0Z5WVcwZ2UzTjBjbWx1WjF0ZGZTQmxkbVZ1ZEU1aGJXVnpJRVYyWlc1MElHNWhiV1Z6SUdadmNpQmxkbVZ1ZENCaGRIUnlhV0oxZEdWekxseHlYRzRnS2lCQWNtVjBkWEp1Y3lCN1JYWmxiblJVWVhKblpYUjlJRlJvWlNCamRYTjBiMjBnUlhabGJuUlVZWEpuWlhRdVhISmNiaUFxSUVCd2NtbDJZWFJsWEhKY2JpQXFMMXh5WEc1bWRXNWpkR2x2YmlCa1pXWnBibVZEZFhOMGIyMUZkbVZ1ZEZSaGNtZGxkQ2hsZG1WdWRFNWhiV1Z6S1NCN1hISmNiaUFnTHlvcUlFTjFjM1J2YlVWMlpXNTBWR0Z5WjJWMElDb3ZYSEpjYmlBZ1puVnVZM1JwYjI0Z1EzVnpkRzl0UlhabGJuUlVZWEpuWlhRb0tTQjdYSEpjYmlBZ0lDQkZkbVZ1ZEZSaGNtZGxkQzVqWVd4c0tIUm9hWE1wTzF4eVhHNGdJSDFjY2x4dVhISmNiaUFnUTNWemRHOXRSWFpsYm5SVVlYSm5aWFF1Y0hKdmRHOTBlWEJsSUQwZ1QySnFaV04wTG1OeVpXRjBaU2hGZG1WdWRGUmhjbWRsZEM1d2NtOTBiM1I1Y0dVc0lIdGNjbHh1SUNBZ0lHTnZibk4wY25WamRHOXlPaUI3WEhKY2JpQWdJQ0FnSUhaaGJIVmxPaUJEZFhOMGIyMUZkbVZ1ZEZSaGNtZGxkQ3hjY2x4dUlDQWdJQ0FnWTI5dVptbG5kWEpoWW14bE9pQjBjblZsTEZ4eVhHNGdJQ0FnSUNCM2NtbDBZV0pzWlRvZ2RISjFaVnh5WEc0Z0lDQWdmVnh5WEc0Z0lIMHBPMXh5WEc1Y2NseHVJQ0JtYjNJZ0tHeGxkQ0JwSUQwZ01Ec2dhU0E4SUdWMlpXNTBUbUZ0WlhNdWJHVnVaM1JvT3lBcksya3BJSHRjY2x4dUlDQWdJR1JsWm1sdVpVVjJaVzUwUVhSMGNtbGlkWFJsS0VOMWMzUnZiVVYyWlc1MFZHRnlaMlYwTG5CeWIzUnZkSGx3WlN3Z1pYWmxiblJPWVcxbGMxdHBYU2s3WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0J5WlhSMWNtNGdRM1Z6ZEc5dFJYWmxiblJVWVhKblpYUTdYSEpjYm4xY2NseHVYSEpjYmk4cUtseHlYRzRnS2lCRmRtVnVkRlJoY21kbGRDNWNjbHh1SUNwY2NseHVJQ29nTFNCVWFHbHpJR2x6SUdOdmJuTjBjblZqZEc5eUlHbG1JRzV2SUdGeVozVnRaVzUwY3k1Y2NseHVJQ29nTFNCVWFHbHpJR2x6SUdFZ1puVnVZM1JwYjI0Z2QyaHBZMmdnY21WMGRYSnVjeUJoSUVOMWMzUnZiVVYyWlc1MFZHRnlaMlYwSUdOdmJuTjBjblZqZEc5eUlHbG1JSFJvWlhKbElHRnlaU0JoY21kMWJXVnVkSE11WEhKY2JpQXFYSEpjYmlBcUlFWnZjaUJsZUdGdGNHeGxPbHh5WEc0Z0tseHlYRzRnS2lBZ0lDQWdZMnhoYzNNZ1FTQmxlSFJsYm1SeklFVjJaVzUwVkdGeVoyVjBJSHQ5WEhKY2JpQXFJQ0FnSUNCamJHRnpjeUJDSUdWNGRHVnVaSE1nUlhabGJuUlVZWEpuWlhRb1hDSnRaWE56WVdkbFhDSXBJSHQ5WEhKY2JpQXFJQ0FnSUNCamJHRnpjeUJESUdWNGRHVnVaSE1nUlhabGJuUlVZWEpuWlhRb1hDSnRaWE56WVdkbFhDSXNJRndpWlhKeWIzSmNJaWtnZTMxY2NseHVJQ29nSUNBZ0lHTnNZWE56SUVRZ1pYaDBaVzVrY3lCRmRtVnVkRlJoY21kbGRDaGJYQ0p0WlhOellXZGxYQ0lzSUZ3aVpYSnliM0pjSWwwcElIdDlYSEpjYmlBcUwxeHlYRzVtZFc1amRHbHZiaUJGZG1WdWRGUmhjbWRsZENncElIdGNjbHh1SUNBdkttVnpiR2x1ZEMxa2FYTmhZbXhsSUdOdmJuTnBjM1JsYm5RdGNtVjBkWEp1SUNvdlhISmNiaUFnYVdZZ0tIUm9hWE1nYVc1emRHRnVZMlZ2WmlCRmRtVnVkRlJoY21kbGRDa2dlMXh5WEc0Z0lDQWdiR2x6ZEdWdVpYSnpUV0Z3TG5ObGRDaDBhR2x6TENCdVpYY2dUV0Z3S0NrcE8xeHlYRzRnSUNBZ2NtVjBkWEp1TzF4eVhHNGdJSDFjY2x4dUlDQnBaaUFvWVhKbmRXMWxiblJ6TG14bGJtZDBhQ0E5UFQwZ01TQW1KaUJCY25KaGVTNXBjMEZ5Y21GNUtHRnlaM1Z0Wlc1MGMxc3dYU2twSUh0Y2NseHVJQ0FnSUhKbGRIVnliaUJrWldacGJtVkRkWE4wYjIxRmRtVnVkRlJoY21kbGRDaGhjbWQxYldWdWRITmJNRjBwTzF4eVhHNGdJSDFjY2x4dUlDQnBaaUFvWVhKbmRXMWxiblJ6TG14bGJtZDBhQ0ErSURBcElIdGNjbHh1SUNBZ0lHTnZibk4wSUhSNWNHVnpJRDBnYm1WM0lFRnljbUY1S0dGeVozVnRaVzUwY3k1c1pXNW5kR2dwTzF4eVhHNGdJQ0FnWm05eUlDaHNaWFFnYVNBOUlEQTdJR2tnUENCaGNtZDFiV1Z1ZEhNdWJHVnVaM1JvT3lBcksya3BJSHRjY2x4dUlDQWdJQ0FnZEhsd1pYTmJhVjBnUFNCaGNtZDFiV1Z1ZEhOYmFWMDdYSEpjYmlBZ0lDQjlYSEpjYmlBZ0lDQnlaWFIxY200Z1pHVm1hVzVsUTNWemRHOXRSWFpsYm5SVVlYSm5aWFFvZEhsd1pYTXBPMXh5WEc0Z0lIMWNjbHh1SUNCMGFISnZkeUJ1WlhjZ1ZIbHdaVVZ5Y205eUtDZERZVzV1YjNRZ1kyRnNiQ0JoSUdOc1lYTnpJR0Z6SUdFZ1puVnVZM1JwYjI0bktUdGNjbHh1SUNBdkttVnpiR2x1ZEMxbGJtRmliR1VnWTI5dWMybHpkR1Z1ZEMxeVpYUjFjbTRnS2k5Y2NseHVmVnh5WEc1Y2NseHVMeThnVTJodmRXeGtJR0psSUdWdWRXMWxjbUZpYkdVc0lHSjFkQ0JqYkdGemN5QnRaWFJvYjJSeklHRnlaU0J1YjNRZ1pXNTFiV1Z5WVdKc1pTNWNjbHh1UlhabGJuUlVZWEpuWlhRdWNISnZkRzkwZVhCbElEMGdlMXh5WEc0Z0lDOHFLbHh5WEc0Z0lDQXFJRUZrWkNCaElHZHBkbVZ1SUd4cGMzUmxibVZ5SUhSdklIUm9hWE1nWlhabGJuUWdkR0Z5WjJWMExseHlYRzRnSUNBcUlFQndZWEpoYlNCN2MzUnlhVzVuZlNCbGRtVnVkRTVoYldVZ1ZHaGxJR1YyWlc1MElHNWhiV1VnZEc4Z1lXUmtMbHh5WEc0Z0lDQXFJRUJ3WVhKaGJTQjdSblZ1WTNScGIyNTlJR3hwYzNSbGJtVnlJRlJvWlNCc2FYTjBaVzVsY2lCMGJ5QmhaR1F1WEhKY2JpQWdJQ29nUUhCaGNtRnRJSHRpYjI5c1pXRnVmSHRqWVhCMGRYSmxQenBpYjI5c1pXRnVMSEJoYzNOcGRtVS9PbUp2YjJ4bFlXNHNiMjVqWlQ4NlltOXZiR1ZoYm4xOUlGdHZjSFJwYjI1elhTQlVhR1VnYjNCMGFXOXVjeUJtYjNJZ2RHaHBjeUJzYVhOMFpXNWxjaTVjY2x4dUlDQWdLaUJBY21WMGRYSnVjeUI3ZG05cFpIMWNjbHh1SUNBZ0tpOWNjbHh1SUNCaFpHUkZkbVZ1ZEV4cGMzUmxibVZ5S0dWMlpXNTBUbUZ0WlN3Z2JHbHpkR1Z1WlhJc0lHOXdkR2x2Ym5NcElIdGNjbHh1SUNBZ0lHbG1JQ2hzYVhOMFpXNWxjaUE5UFNCdWRXeHNLU0I3WEhKY2JpQWdJQ0FnSUhKbGRIVnlianRjY2x4dUlDQWdJSDFjY2x4dUlDQWdJR2xtSUNoMGVYQmxiMllnYkdsemRHVnVaWElnSVQwOUlDZG1kVzVqZEdsdmJpY2dKaVlnSVdselQySnFaV04wS0d4cGMzUmxibVZ5S1NrZ2UxeHlYRzRnSUNBZ0lDQjBhSEp2ZHlCdVpYY2dWSGx3WlVWeWNtOXlLRndpSjJ4cGMzUmxibVZ5SnlCemFHOTFiR1FnWW1VZ1lTQm1kVzVqZEdsdmJpQnZjaUJoYmlCdlltcGxZM1F1WENJcE8xeHlYRzRnSUNBZ2ZWeHlYRzVjY2x4dUlDQWdJR052Ym5OMElHeHBjM1JsYm1WeWN5QTlJR2RsZEV4cGMzUmxibVZ5Y3loMGFHbHpLVHRjY2x4dUlDQWdJR052Ym5OMElHOXdkR2x2Ym5OSmMwOWlhaUE5SUdselQySnFaV04wS0c5d2RHbHZibk1wTzF4eVhHNGdJQ0FnWTI5dWMzUWdZMkZ3ZEhWeVpTQTlJRzl3ZEdsdmJuTkpjMDlpYWlBL0lFSnZiMnhsWVc0b2IzQjBhVzl1Y3k1allYQjBkWEpsS1NBNklFSnZiMnhsWVc0b2IzQjBhVzl1Y3lrN1hISmNiaUFnSUNCamIyNXpkQ0JzYVhOMFpXNWxjbFI1Y0dVZ1BTQmpZWEIwZFhKbElEOGdRMEZRVkZWU1JTQTZJRUpWUWtKTVJUdGNjbHh1SUNBZ0lHTnZibk4wSUc1bGQwNXZaR1VnUFNCN1hISmNiaUFnSUNBZ0lHeHBjM1JsYm1WeUxGeHlYRzRnSUNBZ0lDQnNhWE4wWlc1bGNsUjVjR1VzWEhKY2JpQWdJQ0FnSUhCaGMzTnBkbVU2SUc5d2RHbHZibk5KYzA5aWFpQW1KaUJDYjI5c1pXRnVLRzl3ZEdsdmJuTXVjR0Z6YzJsMlpTa3NYSEpjYmlBZ0lDQWdJRzl1WTJVNklHOXdkR2x2Ym5OSmMwOWlhaUFtSmlCQ2IyOXNaV0Z1S0c5d2RHbHZibk11YjI1alpTa3NYSEpjYmlBZ0lDQWdJRzVsZUhRNklHNTFiR3hjY2x4dUlDQWdJSDA3WEhKY2JseHlYRzRnSUNBZ0x5OGdVMlYwSUdsMElHRnpJSFJvWlNCbWFYSnpkQ0J1YjJSbElHbG1JSFJvWlNCbWFYSnpkQ0J1YjJSbElHbHpJRzUxYkd3dVhISmNiaUFnSUNCc1pYUWdibTlrWlNBOUlHeHBjM1JsYm1WeWN5NW5aWFFvWlhabGJuUk9ZVzFsS1R0Y2NseHVJQ0FnSUdsbUlDaHViMlJsSUQwOVBTQjFibVJsWm1sdVpXUXBJSHRjY2x4dUlDQWdJQ0FnYkdsemRHVnVaWEp6TG5ObGRDaGxkbVZ1ZEU1aGJXVXNJRzVsZDA1dlpHVXBPMXh5WEc0Z0lDQWdJQ0J5WlhSMWNtNDdYSEpjYmlBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnTHk4Z1ZISmhkbVZ5YzJVZ2RHOGdkR2hsSUhSaGFXd2dkMmhwYkdVZ1kyaGxZMnRwYm1jZ1pIVndiR2xqWVhScGIyNHVMbHh5WEc0Z0lDQWdiR1YwSUhCeVpYWWdQU0J1ZFd4c08xeHlYRzRnSUNBZ2QyaHBiR1VnS0c1dlpHVWdJVDBnYm5Wc2JDa2dlMXh5WEc0Z0lDQWdJQ0JwWmlBb2JtOWtaUzVzYVhOMFpXNWxjaUE5UFQwZ2JHbHpkR1Z1WlhJZ0ppWWdibTlrWlM1c2FYTjBaVzVsY2xSNWNHVWdQVDA5SUd4cGMzUmxibVZ5Vkhsd1pTa2dlMXh5WEc0Z0lDQWdJQ0FnSUM4dklGTm9iM1ZzWkNCcFoyNXZjbVVnWkhWd2JHbGpZWFJwYjI0dVhISmNiaUFnSUNBZ0lDQWdjbVYwZFhKdU8xeHlYRzRnSUNBZ0lDQjlYSEpjYmlBZ0lDQWdJSEJ5WlhZZ1BTQnViMlJsTzF4eVhHNGdJQ0FnSUNCdWIyUmxJRDBnYm05a1pTNXVaWGgwTzF4eVhHNGdJQ0FnZlZ4eVhHNWNjbHh1SUNBZ0lDOHZJRUZrWkNCcGRDNWNjbHh1SUNBZ0lIQnlaWFl1Ym1WNGRDQTlJRzVsZDA1dlpHVTdYSEpjYmlBZ2ZTeGNjbHh1WEhKY2JpQWdMeW9xWEhKY2JpQWdJQ29nVW1WdGIzWmxJR0VnWjJsMlpXNGdiR2x6ZEdWdVpYSWdabkp2YlNCMGFHbHpJR1YyWlc1MElIUmhjbWRsZEM1Y2NseHVJQ0FnS2lCQWNHRnlZVzBnZTNOMGNtbHVaMzBnWlhabGJuUk9ZVzFsSUZSb1pTQmxkbVZ1ZENCdVlXMWxJSFJ2SUhKbGJXOTJaUzVjY2x4dUlDQWdLaUJBY0dGeVlXMGdlMFoxYm1OMGFXOXVmU0JzYVhOMFpXNWxjaUJVYUdVZ2JHbHpkR1Z1WlhJZ2RHOGdjbVZ0YjNabExseHlYRzRnSUNBcUlFQndZWEpoYlNCN1ltOXZiR1ZoYm54N1kyRndkSFZ5WlQ4NlltOXZiR1ZoYml4d1lYTnphWFpsUHpwaWIyOXNaV0Z1TEc5dVkyVS9PbUp2YjJ4bFlXNTlmU0JiYjNCMGFXOXVjMTBnVkdobElHOXdkR2x2Ym5NZ1ptOXlJSFJvYVhNZ2JHbHpkR1Z1WlhJdVhISmNiaUFnSUNvZ1FISmxkSFZ5Ym5NZ2UzWnZhV1I5WEhKY2JpQWdJQ292WEhKY2JpQWdjbVZ0YjNabFJYWmxiblJNYVhOMFpXNWxjaWhsZG1WdWRFNWhiV1VzSUd4cGMzUmxibVZ5TENCdmNIUnBiMjV6S1NCN1hISmNiaUFnSUNCcFppQW9iR2x6ZEdWdVpYSWdQVDBnYm5Wc2JDa2dlMXh5WEc0Z0lDQWdJQ0J5WlhSMWNtNDdYSEpjYmlBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnWTI5dWMzUWdiR2x6ZEdWdVpYSnpJRDBnWjJWMFRHbHpkR1Z1WlhKektIUm9hWE1wTzF4eVhHNGdJQ0FnWTI5dWMzUWdZMkZ3ZEhWeVpTQTlJR2x6VDJKcVpXTjBLRzl3ZEdsdmJuTXBJRDhnUW05dmJHVmhiaWh2Y0hScGIyNXpMbU5oY0hSMWNtVXBJRG9nUW05dmJHVmhiaWh2Y0hScGIyNXpLVHRjY2x4dUlDQWdJR052Ym5OMElHeHBjM1JsYm1WeVZIbHdaU0E5SUdOaGNIUjFjbVVnUHlCRFFWQlVWVkpGSURvZ1FsVkNRa3hGTzF4eVhHNWNjbHh1SUNBZ0lHeGxkQ0J3Y21WMklEMGdiblZzYkR0Y2NseHVJQ0FnSUd4bGRDQnViMlJsSUQwZ2JHbHpkR1Z1WlhKekxtZGxkQ2hsZG1WdWRFNWhiV1VwTzF4eVhHNGdJQ0FnZDJocGJHVWdLRzV2WkdVZ0lUMGdiblZzYkNrZ2UxeHlYRzRnSUNBZ0lDQnBaaUFvYm05a1pTNXNhWE4wWlc1bGNpQTlQVDBnYkdsemRHVnVaWElnSmlZZ2JtOWtaUzVzYVhOMFpXNWxjbFI1Y0dVZ1BUMDlJR3hwYzNSbGJtVnlWSGx3WlNrZ2UxeHlYRzRnSUNBZ0lDQWdJR2xtSUNod2NtVjJJQ0U5UFNCdWRXeHNLU0I3WEhKY2JpQWdJQ0FnSUNBZ0lDQndjbVYyTG01bGVIUWdQU0J1YjJSbExtNWxlSFE3WEhKY2JpQWdJQ0FnSUNBZ2ZTQmxiSE5sSUdsbUlDaHViMlJsTG01bGVIUWdJVDA5SUc1MWJHd3BJSHRjY2x4dUlDQWdJQ0FnSUNBZ0lHeHBjM1JsYm1WeWN5NXpaWFFvWlhabGJuUk9ZVzFsTENCdWIyUmxMbTVsZUhRcE8xeHlYRzRnSUNBZ0lDQWdJSDBnWld4elpTQjdYSEpjYmlBZ0lDQWdJQ0FnSUNCc2FYTjBaVzVsY25NdVpHVnNaWFJsS0dWMlpXNTBUbUZ0WlNrN1hISmNiaUFnSUNBZ0lDQWdmVnh5WEc0Z0lDQWdJQ0FnSUhKbGRIVnlianRjY2x4dUlDQWdJQ0FnZlZ4eVhHNWNjbHh1SUNBZ0lDQWdjSEpsZGlBOUlHNXZaR1U3WEhKY2JpQWdJQ0FnSUc1dlpHVWdQU0J1YjJSbExtNWxlSFE3WEhKY2JpQWdJQ0I5WEhKY2JpQWdmU3hjY2x4dVhISmNiaUFnTHlvcVhISmNiaUFnSUNvZ1JHbHpjR0YwWTJnZ1lTQm5hWFpsYmlCbGRtVnVkQzVjY2x4dUlDQWdLaUJBY0dGeVlXMGdlMFYyWlc1MGZIdDBlWEJsT25OMGNtbHVaMzE5SUdWMlpXNTBJRlJvWlNCbGRtVnVkQ0IwYnlCa2FYTndZWFJqYUM1Y2NseHVJQ0FnS2lCQWNtVjBkWEp1Y3lCN1ltOXZiR1ZoYm4wZ1lHWmhiSE5sWUNCcFppQmpZVzVqWld4bFpDNWNjbHh1SUNBZ0tpOWNjbHh1SUNCa2FYTndZWFJqYUVWMlpXNTBLR1YyWlc1MEtTQjdYSEpjYmlBZ0lDQnBaaUFvWlhabGJuUWdQVDBnYm5Wc2JDQjhmQ0IwZVhCbGIyWWdaWFpsYm5RdWRIbHdaU0FoUFQwZ0ozTjBjbWx1WnljcElIdGNjbHh1SUNBZ0lDQWdkR2h5YjNjZ2JtVjNJRlI1Y0dWRmNuSnZjaWduWENKbGRtVnVkQzUwZVhCbFhDSWdjMmh2ZFd4a0lHSmxJR0VnYzNSeWFXNW5MaWNwTzF4eVhHNGdJQ0FnZlZ4eVhHNWNjbHh1SUNBZ0lDOHZJRWxtSUd4cGMzUmxibVZ5Y3lCaGNtVnVKM1FnY21WbmFYTjBaWEpsWkN3Z2RHVnliV2x1WVhSbExseHlYRzRnSUNBZ1kyOXVjM1FnYkdsemRHVnVaWEp6SUQwZ1oyVjBUR2x6ZEdWdVpYSnpLSFJvYVhNcE8xeHlYRzRnSUNBZ1kyOXVjM1FnWlhabGJuUk9ZVzFsSUQwZ1pYWmxiblF1ZEhsd1pUdGNjbHh1SUNBZ0lHeGxkQ0J1YjJSbElEMGdiR2x6ZEdWdVpYSnpMbWRsZENobGRtVnVkRTVoYldVcE8xeHlYRzRnSUNBZ2FXWWdLRzV2WkdVZ1BUMGdiblZzYkNrZ2UxeHlYRzRnSUNBZ0lDQnlaWFIxY200Z2RISjFaVHRjY2x4dUlDQWdJSDFjY2x4dVhISmNiaUFnSUNBdkx5QlRhVzVqWlNCM1pTQmpZVzV1YjNRZ2NtVjNjbWwwWlNCelpYWmxjbUZzSUhCeWIzQmxjblJwWlhNc0lITnZJSGR5WVhBZ2IySnFaV04wTGx4eVhHNGdJQ0FnWTI5dWMzUWdkM0poY0hCbFpFVjJaVzUwSUQwZ2QzSmhjRVYyWlc1MEtIUm9hWE1zSUdWMlpXNTBLVHRjY2x4dVhISmNiaUFnSUNBdkx5QlVhR2x6SUdSdlpYTnVKM1FnY0hKdlkyVnpjeUJqWVhCMGRYSnBibWNnY0doaGMyVWdZVzVrSUdKMVltSnNhVzVuSUhCb1lYTmxMbHh5WEc0Z0lDQWdMeThnVkdocGN5QnBjMjRuZENCd1lYSjBhV05wY0dGMGFXNW5JR2x1SUdFZ2RISmxaUzVjY2x4dUlDQWdJR3hsZENCd2NtVjJJRDBnYm5Wc2JEdGNjbHh1SUNBZ0lIZG9hV3hsSUNodWIyUmxJQ0U5SUc1MWJHd3BJSHRjY2x4dUlDQWdJQ0FnTHk4Z1VtVnRiM1psSUhSb2FYTWdiR2x6ZEdWdVpYSWdhV1lnYVhRbmN5QnZibU5sWEhKY2JpQWdJQ0FnSUdsbUlDaHViMlJsTG05dVkyVXBJSHRjY2x4dUlDQWdJQ0FnSUNCcFppQW9jSEpsZGlBaFBUMGdiblZzYkNrZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnY0hKbGRpNXVaWGgwSUQwZ2JtOWtaUzV1WlhoME8xeHlYRzRnSUNBZ0lDQWdJSDBnWld4elpTQnBaaUFvYm05a1pTNXVaWGgwSUNFOVBTQnVkV3hzS1NCN1hISmNiaUFnSUNBZ0lDQWdJQ0JzYVhOMFpXNWxjbk11YzJWMEtHVjJaVzUwVG1GdFpTd2dibTlrWlM1dVpYaDBLVHRjY2x4dUlDQWdJQ0FnSUNCOUlHVnNjMlVnZTF4eVhHNGdJQ0FnSUNBZ0lDQWdiR2x6ZEdWdVpYSnpMbVJsYkdWMFpTaGxkbVZ1ZEU1aGJXVXBPMXh5WEc0Z0lDQWdJQ0FnSUgxY2NseHVJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2NseHVJQ0FnSUNBZ0lDQndjbVYySUQwZ2JtOWtaVHRjY2x4dUlDQWdJQ0FnZlZ4eVhHNWNjbHh1SUNBZ0lDQWdMeThnUTJGc2JDQjBhR2x6SUd4cGMzUmxibVZ5WEhKY2JpQWdJQ0FnSUhObGRGQmhjM05wZG1WTWFYTjBaVzVsY2loM2NtRndjR1ZrUlhabGJuUXNJRzV2WkdVdWNHRnpjMmwyWlNBL0lHNXZaR1V1YkdsemRHVnVaWElnT2lCdWRXeHNLVHRjY2x4dUlDQWdJQ0FnYVdZZ0tIUjVjR1Z2WmlCdWIyUmxMbXhwYzNSbGJtVnlJRDA5UFNBblpuVnVZM1JwYjI0bktTQjdYSEpjYmlBZ0lDQWdJQ0FnZEhKNUlIdGNjbHh1SUNBZ0lDQWdJQ0FnSUc1dlpHVXViR2x6ZEdWdVpYSXVZMkZzYkNoMGFHbHpMQ0IzY21Gd2NHVmtSWFpsYm5RcE8xeHlYRzRnSUNBZ0lDQWdJSDBnWTJGMFkyZ2dLR1Z5Y2lrZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnYVdZZ0tIUjVjR1Z2WmlCamIyNXpiMnhsSUNFOVBTQW5kVzVrWldacGJtVmtKeUFtSmlCMGVYQmxiMllnWTI5dWMyOXNaUzVsY25KdmNpQTlQVDBnSjJaMWJtTjBhVzl1SnlrZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnSUNCamIyNXpiMnhsTG1WeWNtOXlLR1Z5Y2lrN1hISmNiaUFnSUNBZ0lDQWdJQ0I5WEhKY2JpQWdJQ0FnSUNBZ2ZWeHlYRzRnSUNBZ0lDQjlJR1ZzYzJVZ2FXWWdLRzV2WkdVdWJHbHpkR1Z1WlhKVWVYQmxJQ0U5UFNCQlZGUlNTVUpWVkVVZ0ppWWdkSGx3Wlc5bUlHNXZaR1V1YkdsemRHVnVaWEl1YUdGdVpHeGxSWFpsYm5RZ1BUMDlJQ2RtZFc1amRHbHZiaWNwSUh0Y2NseHVJQ0FnSUNBZ0lDQnViMlJsTG14cGMzUmxibVZ5TG1oaGJtUnNaVVYyWlc1MEtIZHlZWEJ3WldSRmRtVnVkQ2s3WEhKY2JpQWdJQ0FnSUgxY2NseHVYSEpjYmlBZ0lDQWdJQzh2SUVKeVpXRnJJR2xtSUdCbGRtVnVkQzV6ZEc5d1NXMXRaV1JwWVhSbFVISnZjR0ZuWVhScGIyNWdJSGRoY3lCallXeHNaV1F1WEhKY2JpQWdJQ0FnSUdsbUlDaHBjMU4wYjNCd1pXUW9kM0poY0hCbFpFVjJaVzUwS1NrZ2UxeHlYRzRnSUNBZ0lDQWdJR0p5WldGck8xeHlYRzRnSUNBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnSUNCdWIyUmxJRDBnYm05a1pTNXVaWGgwTzF4eVhHNGdJQ0FnZlZ4eVhHNGdJQ0FnYzJWMFVHRnpjMmwyWlV4cGMzUmxibVZ5S0hkeVlYQndaV1JGZG1WdWRDd2diblZzYkNrN1hISmNiaUFnSUNCelpYUkZkbVZ1ZEZCb1lYTmxLSGR5WVhCd1pXUkZkbVZ1ZEN3Z01DazdYSEpjYmlBZ0lDQnpaWFJEZFhKeVpXNTBWR0Z5WjJWMEtIZHlZWEJ3WldSRmRtVnVkQ3dnYm5Wc2JDazdYSEpjYmx4eVhHNGdJQ0FnY21WMGRYSnVJQ0YzY21Gd2NHVmtSWFpsYm5RdVpHVm1ZWFZzZEZCeVpYWmxiblJsWkR0Y2NseHVJQ0I5WEhKY2JuMDdYSEpjYmx4eVhHNHZMeUJnWTI5dWMzUnlkV04wYjNKZ0lHbHpJRzV2ZENCbGJuVnRaWEpoWW14bExseHlYRzVQWW1wbFkzUXVaR1ZtYVc1bFVISnZjR1Z5ZEhrb1JYWmxiblJVWVhKblpYUXVjSEp2ZEc5MGVYQmxMQ0FuWTI5dWMzUnlkV04wYjNJbkxDQjdYSEpjYmlBZ2RtRnNkV1U2SUVWMlpXNTBWR0Z5WjJWMExGeHlYRzRnSUdOdmJtWnBaM1Z5WVdKc1pUb2dkSEoxWlN4Y2NseHVJQ0IzY21sMFlXSnNaVG9nZEhKMVpWeHlYRzU5S1R0Y2NseHVYSEpjYmk4dklFVnVjM1Z5WlNCZ1pYWmxiblJVWVhKblpYUWdhVzV6ZEdGdVkyVnZaaUIzYVc1a2IzY3VSWFpsYm5SVVlYSm5aWFJnSUdseklHQjBjblZsWUM1Y2NseHVhV1lnS0hSNWNHVnZaaUIzYVc1a2IzY2dJVDA5SUNkMWJtUmxabWx1WldRbklDWW1JSFI1Y0dWdlppQjNhVzVrYjNjdVJYWmxiblJVWVhKblpYUWdJVDA5SUNkMWJtUmxabWx1WldRbktTQjdYSEpjYmlBZ1QySnFaV04wTG5ObGRGQnliM1J2ZEhsd1pVOW1LRVYyWlc1MFZHRnlaMlYwTG5CeWIzUnZkSGx3WlN3Z2QybHVaRzkzTGtWMlpXNTBWR0Z5WjJWMExuQnliM1J2ZEhsd1pTazdYSEpjYm4xY2NseHVYSEpjYm1WNGNHOXlkSE11WkdWbWFXNWxSWFpsYm5SQmRIUnlhV0oxZEdVZ1BTQmtaV1pwYm1WRmRtVnVkRUYwZEhKcFluVjBaVHRjY2x4dVpYaHdiM0owY3k1RmRtVnVkRlJoY21kbGRDQTlJRVYyWlc1MFZHRnlaMlYwTzF4eVhHNWxlSEJ2Y25SekxtUmxabUYxYkhRZ1BTQkZkbVZ1ZEZSaGNtZGxkRHRjY2x4dVhISmNibTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdSWFpsYm5SVVlYSm5aWFE3WEhKY2JtMXZaSFZzWlM1bGVIQnZjblJ6TGtWMlpXNTBWR0Z5WjJWMElEMGdiVzlrZFd4bExtVjRjRzl5ZEhOYkoyUmxabUYxYkhRblhTQTlJRVYyWlc1MFZHRnlaMlYwTzF4eVhHNXRiMlIxYkdVdVpYaHdiM0owY3k1a1pXWnBibVZGZG1WdWRFRjBkSEpwWW5WMFpTQTlJR1JsWm1sdVpVVjJaVzUwUVhSMGNtbGlkWFJsTzF4eVhHNHZMeU1nYzI5MWNtTmxUV0Z3Y0dsdVoxVlNURDFsZG1WdWRDMTBZWEpuWlhRdGMyaHBiUzVxY3k1dFlYQmNjbHh1SWwxOSIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdFwiKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNyZWF0ZUFkYXB0ZXJzXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9jcmVhdGVBZGFwdGVycy5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9jcmVhdGVBZGFwdGVycyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vY3JlYXRlQWRhcHRlcnNcIikpO1xuXG4vKiBnbG9iYWwgcHJvY2VzcyAqL1xuaWYgKHR5cGVvZiBIVE1MRG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiBIVE1MRG9jdW1lbnQpIHtcbiAgdmFyIG1ldGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtZXRhJyk7XG4gIG1ldGEuc2V0QXR0cmlidXRlKCduYW1lJywgJ2JvdGZyYW1ld29yay1kaXJlY3RsaW5lc3BlZWNoOnZlcnNpb24nKTtcbiAgbWV0YS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCBwcm9jZXNzLmVudi5ucG1fcGFja2FnZV92ZXJzaW9uKTtcbiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChtZXRhKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklpNHVMM055WXk5cGJtUmxlQzVxY3lKZExDSnVZVzFsY3lJNld5SklWRTFNUkc5amRXMWxiblFpTENKa2IyTjFiV1Z1ZENJc0ltMWxkR0VpTENKamNtVmhkR1ZGYkdWdFpXNTBJaXdpYzJWMFFYUjBjbWxpZFhSbElpd2ljSEp2WTJWemN5SXNJbVZ1ZGlJc0ltNXdiVjl3WVdOcllXZGxYM1psY25OcGIyNGlMQ0pvWldGa0lpd2lZWEJ3Wlc1a1EyaHBiR1FpWFN3aWJXRndjR2x1WjNNaU9pSTdPenM3T3pzN096czdPenM3TzBGQlJVRTdPMEZCUmtFN1FVRk5RU3hKUVVGSkxFOUJRVTlCTEZsQlFWQXNTMEZCZDBJc1YwRkJlRUlzU1VGQmRVTXNUMEZCVDBNc1VVRkJVQ3hMUVVGdlFpeFhRVUV6UkN4SlFVRXdSVUVzVVVGQlVTeFpRVUZaUkN4WlFVRnNSeXhGUVVGblNEdEJRVU01Unl4TlFVRk5SU3hKUVVGSkxFZEJRVWRFTEZGQlFWRXNRMEZCUTBVc1lVRkJWQ3hEUVVGMVFpeE5RVUYyUWl4RFFVRmlPMEZCUlVGRUxFVkJRVUZCTEVsQlFVa3NRMEZCUTBVc1dVRkJUQ3hEUVVGclFpeE5RVUZzUWl4RlFVRXdRaXgxUTBGQk1VSTdRVUZEUVVZc1JVRkJRVUVzU1VGQlNTeERRVUZEUlN4WlFVRk1MRU5CUVd0Q0xGTkJRV3hDTEVWQlFUWkNReXhQUVVGUExFTkJRVU5ETEVkQlFWSXNRMEZCV1VNc2JVSkJRWHBETzBGQlJVRk9MRVZCUVVGQkxGRkJRVkVzUTBGQlEwOHNTVUZCVkN4RFFVRmpReXhYUVVGa0xFTkJRVEJDVUN4SlFVRXhRanRCUVVORUlpd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sc2lMeW9nWjJ4dlltRnNJSEJ5YjJObGMzTWdLaTljY2x4dVhISmNibWx0Y0c5eWRDQmpjbVZoZEdWQlpHRndkR1Z5Y3lCbWNtOXRJQ2N1TDJOeVpXRjBaVUZrWVhCMFpYSnpKenRjY2x4dVhISmNibVY0Y0c5eWRDQjdJR055WldGMFpVRmtZWEIwWlhKeklIMDdYSEpjYmx4eVhHNXBaaUFvZEhsd1pXOW1JRWhVVFV4RWIyTjFiV1Z1ZENBaFBUMGdKM1Z1WkdWbWFXNWxaQ2NnSmlZZ2RIbHdaVzltSUdSdlkzVnRaVzUwSUNFOVBTQW5kVzVrWldacGJtVmtKeUFtSmlCa2IyTjFiV1Z1ZENCcGJuTjBZVzVqWlc5bUlFaFVUVXhFYjJOMWJXVnVkQ2tnZTF4eVhHNGdJR052Ym5OMElHMWxkR0VnUFNCa2IyTjFiV1Z1ZEM1amNtVmhkR1ZGYkdWdFpXNTBLQ2R0WlhSaEp5azdYSEpjYmx4eVhHNGdJRzFsZEdFdWMyVjBRWFIwY21saWRYUmxLQ2R1WVcxbEp5d2dKMkp2ZEdaeVlXMWxkMjl5YXkxa2FYSmxZM1JzYVc1bGMzQmxaV05vT25abGNuTnBiMjRuS1R0Y2NseHVJQ0J0WlhSaExuTmxkRUYwZEhKcFluVjBaU2duWTI5dWRHVnVkQ2NzSUhCeWIyTmxjM011Wlc1MkxtNXdiVjl3WVdOcllXZGxYM1psY25OcGIyNHBPMXh5WEc1Y2NseHVJQ0JrYjJOMWJXVnVkQzVvWldGa0xtRndjR1Z1WkVOb2FXeGtLRzFsZEdFcE8xeHlYRzU5WEhKY2JpSmRmUT09IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gcGF0Y2hEaWFsb2dTZXJ2aWNlQ29ubmVjdG9ySW5saW5lO1xuXG52YXIgX3RvQ29uc3VtYWJsZUFycmF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXlcIikpO1xuXG52YXIgX3BEZWZlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInAtZGVmZXJcIikpO1xuXG4vLyBQYXRjaGluZyBhIGZ1bmN0aW9uIHRvIGFkZCBwcmUtcHJvY2Vzc2luZyBvZiBhcmd1bWVudHMgYW5kIHBvc3QtcHJvY2Vzc2luZyBvZiByZXN1bHQuXG5mdW5jdGlvbiBwYXRjaEZ1bmN0aW9uKGZuLCBwcmUsIHBvc3QpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgYXJncyA9IHByZSA/IHByZS5hcHBseSh2b2lkIDAsICgwLCBfdG9Db25zdW1hYmxlQXJyYXkyLmRlZmF1bHQpKGFyZ3MpKSA6IGFyZ3M7XG4gICAgdmFyIHJlc3VsdCA9IGZuLmFwcGx5KHZvaWQgMCwgKDAsIF90b0NvbnN1bWFibGVBcnJheTIuZGVmYXVsdCkoYXJncykpO1xuICAgIHJldHVybiBwb3N0ID8gcG9zdChyZXN1bHQpIDogcmVzdWx0O1xuICB9O1xufVxuXG5mdW5jdGlvbiBwYXRjaERpYWxvZ1NlcnZpY2VDb25uZWN0b3JJbmxpbmUoZGlhbG9nU2VydmljZUNvbm5lY3Rvcikge1xuICAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgcGF0Y2ggRGlhbG9nU2VydmljZUNvbm5lY3RvciBieSBtb2RpZnlpbmcgdGhlIG9iamVjdC5cbiAgLy8gVGhlIHBhdGNoZXMgYXJlIGludGVuZGVkIHRvIGZpbGwtaW4gZmVhdHVyZXMgdG8gbWFrZSBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yIG9iamVjdCB3b3JrcyBsaWtlIHRoZSBmdWxsLWZsZWRnZWQgUmVjb2duaXplciBvYmplY3QuXG4gIHZhciBsYXN0UmVjb2duaXRpb25EZWZlcnJlZDtcbiAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5saXN0ZW5PbmNlQXN5bmMgPSBwYXRjaEZ1bmN0aW9uKGRpYWxvZ1NlcnZpY2VDb25uZWN0b3IubGlzdGVuT25jZUFzeW5jLmJpbmQoZGlhbG9nU2VydmljZUNvbm5lY3RvciksIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBsYXN0UmVjb2duaXRpb25EZWZlcnJlZCA9ICgwLCBfcERlZmVyLmRlZmF1bHQpKCk7XG5cbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIgPiAyID8gX2xlbjIgLSAyIDogMCksIF9rZXkyID0gMjsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgYXJnc1tfa2V5MiAtIDJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICByZXR1cm4gW3BhdGNoRnVuY3Rpb24ocmVzb2x2ZSwgbnVsbCwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgbGFzdFJlY29nbml0aW9uRGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KSwgcGF0Y2hGdW5jdGlvbihyZWplY3QsIG51bGwsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgbGFzdFJlY29nbml0aW9uRGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9KV0uY29uY2F0KGFyZ3MpO1xuICB9KTsgLy8gVE9ETzogc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyBpcyBub3Qgd29ya2luZyB5ZXQsIHVzZSBsaXN0ZW5PbmNlQXN5bmMgaW5zdGVhZC5cblxuICBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMgPSBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZGlhbG9nU2VydmljZUNvbm5lY3Rvci5saXN0ZW5PbmNlQXN5bmMoZnVuY3Rpb24gKCkgey8vIFdlIHdpbGwgcmVzb2x2ZSB0aGUgUHJvbWlzZSBpbiBhIHNldFRpbWVvdXQuXG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgcmVzb2x2ZSA9IG51bGw7XG4gICAgICByZWplY3QgJiYgcmVqZWN0KGVycik7XG4gICAgfSk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICByZWplY3QgPSBudWxsO1xuICAgICAgcmVzb2x2ZSAmJiByZXNvbHZlKCk7XG4gICAgfSwgMCk7XG4gIH07IC8vIFRPRE86IHN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyBpcyBub3Qgd29ya2luZyB5ZXQuXG4gIC8vICAgICAgIFdlIHdpbGwgbGVhdmUgb3V0IHRoZSBpbXBsZW1lbnRhdGlvbiBhcyBmYWxzeSwgV2ViIENoYXQgd2lsbCBkaXNhYmxlIHRoZSBtaWNyb3Bob25lIGJ1dHRvbiBhZnRlciBzdGFydCBkaWN0YXRlLlxuICAvLyAgICAgICBUaGlzIHdpbGwgcHJldmVudCB1c2VyIGZyb20gYWJvcnRpbmcgc3BlZWNoIHJlY29nbml0aW9uLlxuICAvLyBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyA9IHJlc29sdmUgPT4ge1xuICAvLyB9O1xuXG5cbiAgcmV0dXJuIGRpYWxvZ1NlcnZpY2VDb25uZWN0b3I7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJaTR1TDNOeVl5OXdZWFJqYUVScFlXeHZaMU5sY25acFkyVkRiMjV1WldOMGIzSkpibXhwYm1VdWFuTWlYU3dpYm1GdFpYTWlPbHNpY0dGMFkyaEdkVzVqZEdsdmJpSXNJbVp1SWl3aWNISmxJaXdpY0c5emRDSXNJbUZ5WjNNaUxDSnlaWE4xYkhRaUxDSndZWFJqYUVScFlXeHZaMU5sY25acFkyVkRiMjV1WldOMGIzSkpibXhwYm1VaUxDSmthV0ZzYjJkVFpYSjJhV05sUTI5dWJtVmpkRzl5SWl3aWJHRnpkRkpsWTI5bmJtbDBhVzl1UkdWbVpYSnlaV1FpTENKc2FYTjBaVzVQYm1ObFFYTjVibU1pTENKaWFXNWtJaXdpY21WemIyeDJaU0lzSW5KbGFtVmpkQ0lzSW1WeWNtOXlJaXdpYzNSaGNuUkRiMjUwYVc1MWIzVnpVbVZqYjJkdWFYUnBiMjVCYzNsdVl5SXNJbVZ5Y2lJc0luTmxkRlJwYldWdmRYUWlYU3dpYldGd2NHbHVaM01pT2lJN096czdPenM3T3pzN08wRkJRVUU3TzBGQlJVRTdRVUZEUVN4VFFVRlRRU3hoUVVGVUxFTkJRWFZDUXl4RlFVRjJRaXhGUVVFeVFrTXNSMEZCTTBJc1JVRkJaME5ETEVsQlFXaERMRVZCUVhORE8wRkJRM0JETEZOQlFVOHNXVUZCWVR0QlFVRkJMSE5EUVVGVVF5eEpRVUZUTzBGQlFWUkJMRTFCUVVGQkxFbEJRVk03UVVGQlFUczdRVUZEYkVKQkxFbEJRVUZCTEVsQlFVa3NSMEZCUjBZc1IwRkJSeXhIUVVGSFFTeEhRVUZITEUxQlFVZ3NNRU5CUVU5RkxFbEJRVkFzUlVGQlNDeEhRVUZyUWtFc1NVRkJOVUk3UVVGRlFTeFJRVUZOUXl4TlFVRk5MRWRCUVVkS0xFVkJRVVVzVFVGQlJpd3dRMEZCVFVjc1NVRkJUaXhGUVVGbU8wRkJSVUVzVjBGQlQwUXNTVUZCU1N4SFFVRkhRU3hKUVVGSkxFTkJRVU5GTEUxQlFVUXNRMEZCVUN4SFFVRnJRa0VzVFVGQk4wSTdRVUZEUkN4SFFVNUVPMEZCVDBRN08wRkJSV01zVTBGQlUwTXNhVU5CUVZRc1EwRkJNa05ETEhOQ1FVRXpReXhGUVVGdFJUdEJRVU5vUmp0QlFVTkJPMEZCUlVFc1RVRkJTVU1zZFVKQlFVbzdRVUZGUVVRc1JVRkJRVUVzYzBKQlFYTkNMRU5CUVVORkxHVkJRWFpDTEVkQlFYbERWQ3hoUVVGaExFTkJRM0JFVHl4elFrRkJjMElzUTBGQlEwVXNaVUZCZGtJc1EwRkJkVU5ETEVsQlFYWkRMRU5CUVRSRFNDeHpRa0ZCTlVNc1EwRkViMFFzUlVGRmNFUXNWVUZCUTBrc1QwRkJSQ3hGUVVGVlF5eE5RVUZXTEVWQlFUaENPMEZCUXpWQ1NpeEpRVUZCUVN4MVFrRkJkVUlzUjBGQlJ5eHpRa0ZCTVVJN08wRkJSRFJDTEhWRFFVRlVTaXhKUVVGVE8wRkJRVlJCTEUxQlFVRkJMRWxCUVZNN1FVRkJRVHM3UVVGSE5VSXNXVUZEUlVvc1lVRkJZU3hEUVVGRFZ5eFBRVUZFTEVWQlFWVXNTVUZCVml4RlFVRm5RaXhWUVVGQlRpeE5RVUZOTEVWQlFVazdRVUZEY2tOSExFMUJRVUZCTEhWQ1FVRjFRaXhEUVVGRFJ5eFBRVUY0UWl4RFFVRm5RMDRzVFVGQmFFTTdRVUZGUVN4aFFVRlBRU3hOUVVGUU8wRkJRMFFzUzBGS1dTeERRVVJtTEVWQlRVVk1MR0ZCUVdFc1EwRkJRMWtzVFVGQlJDeEZRVUZUTEVsQlFWUXNSVUZCWlN4VlFVRkJReXhMUVVGTExFVkJRVWs3UVVGRGJrTk1MRTFCUVVGQkxIVkNRVUYxUWl4RFFVRkRTU3hOUVVGNFFpeERRVUVyUWtNc1MwRkJMMEk3UVVGRlFTeGhRVUZQUVN4TFFVRlFPMEZCUTBRc1MwRktXU3hEUVU1bUxGTkJWMHRVTEVsQldFdzdRVUZoUkN4SFFXeENiVVFzUTBGQmRFUXNRMEZPWjBZc1EwRXlRbWhHT3p0QlFVTkJSeXhGUVVGQlFTeHpRa0ZCYzBJc1EwRkJRMDhzSzBKQlFYWkNMRWRCUVhsRUxGVkJRVU5JTEU5QlFVUXNSVUZCVlVNc1RVRkJWaXhGUVVGeFFqdEJRVU0xUlV3c1NVRkJRVUVzYzBKQlFYTkNMRU5CUVVORkxHVkJRWFpDTEVOQlEwVXNXVUZCVFN4RFFVTktPMEZCUTBRc1MwRklTQ3hGUVVsRkxGVkJRVUZOTEVkQlFVY3NSVUZCU1R0QlFVTk1TaXhOUVVGQlFTeFBRVUZQTEVkQlFVY3NTVUZCVmp0QlFVTkJReXhOUVVGQlFTeE5RVUZOTEVsQlFVbEJMRTFCUVUwc1EwRkJRMGNzUjBGQlJDeERRVUZvUWp0QlFVTkVMRXRCVUVnN1FVRlZRVU1zU1VGQlFVRXNWVUZCVlN4RFFVRkRMRmxCUVUwN1FVRkRaa29zVFVGQlFVRXNUVUZCVFN4SFFVRkhMRWxCUVZRN1FVRkRRVVFzVFVGQlFVRXNUMEZCVHl4SlFVRkpRU3hQUVVGUExFVkJRV3hDTzBGQlEwUXNTMEZJVXl4RlFVZFFMRU5CU0U4c1EwRkJWanRCUVVsRUxFZEJaa1FzUTBFMVFtZEdMRU5CTmtOb1JqdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPenM3UVVGRlFTeFRRVUZQU2l4elFrRkJVRHRCUVVORUlpd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sc2lhVzF3YjNKMElHTnlaV0YwWlVSbFptVnljbVZrSUdaeWIyMGdKM0F0WkdWbVpYSW5PMXh5WEc1Y2NseHVMeThnVUdGMFkyaHBibWNnWVNCbWRXNWpkR2x2YmlCMGJ5QmhaR1FnY0hKbExYQnliMk5sYzNOcGJtY2diMllnWVhKbmRXMWxiblJ6SUdGdVpDQndiM04wTFhCeWIyTmxjM05wYm1jZ2IyWWdjbVZ6ZFd4MExseHlYRzVtZFc1amRHbHZiaUJ3WVhSamFFWjFibU4wYVc5dUtHWnVMQ0J3Y21Vc0lIQnZjM1FwSUh0Y2NseHVJQ0J5WlhSMWNtNGdLQzR1TG1GeVozTXBJRDArSUh0Y2NseHVJQ0FnSUdGeVozTWdQU0J3Y21VZ1B5QndjbVVvTGk0dVlYSm5jeWtnT2lCaGNtZHpPMXh5WEc1Y2NseHVJQ0FnSUdOdmJuTjBJSEpsYzNWc2RDQTlJR1p1S0M0dUxtRnlaM01wTzF4eVhHNWNjbHh1SUNBZ0lISmxkSFZ5YmlCd2IzTjBJRDhnY0c5emRDaHlaWE4xYkhRcElEb2djbVZ6ZFd4ME8xeHlYRzRnSUgwN1hISmNibjFjY2x4dVhISmNibVY0Y0c5eWRDQmtaV1poZFd4MElHWjFibU4wYVc5dUlIQmhkR05vUkdsaGJHOW5VMlZ5ZG1salpVTnZibTVsWTNSdmNrbHViR2x1WlNoa2FXRnNiMmRUWlhKMmFXTmxRMjl1Ym1WamRHOXlLU0I3WEhKY2JpQWdMeThnVkdocGN5Qm1kVzVqZEdsdmJpQjNhV3hzSUhCaGRHTm9JRVJwWVd4dloxTmxjblpwWTJWRGIyNXVaV04wYjNJZ1lua2diVzlrYVdaNWFXNW5JSFJvWlNCdlltcGxZM1F1WEhKY2JpQWdMeThnVkdobElIQmhkR05vWlhNZ1lYSmxJR2x1ZEdWdVpHVmtJSFJ2SUdacGJHd3RhVzRnWm1WaGRIVnlaWE1nZEc4Z2JXRnJaU0JFYVdGc2IyZFRaWEoyYVdObFEyOXVibVZqZEc5eUlHOWlhbVZqZENCM2IzSnJjeUJzYVd0bElIUm9aU0JtZFd4c0xXWnNaV1JuWldRZ1VtVmpiMmR1YVhwbGNpQnZZbXBsWTNRdVhISmNibHh5WEc0Z0lHeGxkQ0JzWVhOMFVtVmpiMmR1YVhScGIyNUVaV1psY25KbFpEdGNjbHh1WEhKY2JpQWdaR2xoYkc5blUyVnlkbWxqWlVOdmJtNWxZM1J2Y2k1c2FYTjBaVzVQYm1ObFFYTjVibU1nUFNCd1lYUmphRVoxYm1OMGFXOXVLRnh5WEc0Z0lDQWdaR2xoYkc5blUyVnlkbWxqWlVOdmJtNWxZM1J2Y2k1c2FYTjBaVzVQYm1ObFFYTjVibU11WW1sdVpDaGthV0ZzYjJkVFpYSjJhV05sUTI5dWJtVmpkRzl5S1N4Y2NseHVJQ0FnSUNoeVpYTnZiSFpsTENCeVpXcGxZM1FzSUM0dUxtRnlaM01wSUQwK0lIdGNjbHh1SUNBZ0lDQWdiR0Z6ZEZKbFkyOW5ibWwwYVc5dVJHVm1aWEp5WldRZ1BTQmpjbVZoZEdWRVpXWmxjbkpsWkNncE8xeHlYRzVjY2x4dUlDQWdJQ0FnY21WMGRYSnVJRnRjY2x4dUlDQWdJQ0FnSUNCd1lYUmphRVoxYm1OMGFXOXVLSEpsYzI5c2RtVXNJRzUxYkd3c0lISmxjM1ZzZENBOVBpQjdYSEpjYmlBZ0lDQWdJQ0FnSUNCc1lYTjBVbVZqYjJkdWFYUnBiMjVFWldabGNuSmxaQzV5WlhOdmJIWmxLSEpsYzNWc2RDazdYSEpjYmx4eVhHNGdJQ0FnSUNBZ0lDQWdjbVYwZFhKdUlISmxjM1ZzZER0Y2NseHVJQ0FnSUNBZ0lDQjlLU3hjY2x4dUlDQWdJQ0FnSUNCd1lYUmphRVoxYm1OMGFXOXVLSEpsYW1WamRDd2diblZzYkN3Z1pYSnliM0lnUFQ0Z2UxeHlYRzRnSUNBZ0lDQWdJQ0FnYkdGemRGSmxZMjluYm1sMGFXOXVSR1ZtWlhKeVpXUXVjbVZxWldOMEtHVnljbTl5S1R0Y2NseHVYSEpjYmlBZ0lDQWdJQ0FnSUNCeVpYUjFjbTRnWlhKeWIzSTdYSEpjYmlBZ0lDQWdJQ0FnZlNrc1hISmNiaUFnSUNBZ0lDQWdMaTR1WVhKbmMxeHlYRzRnSUNBZ0lDQmRPMXh5WEc0Z0lDQWdmVnh5WEc0Z0lDazdYSEpjYmx4eVhHNGdJQzh2SUZSUFJFODZJSE4wWVhKMFEyOXVkR2x1ZFc5MWMxSmxZMjluYm1sMGFXOXVRWE41Ym1NZ2FYTWdibTkwSUhkdmNtdHBibWNnZVdWMExDQjFjMlVnYkdsemRHVnVUMjVqWlVGemVXNWpJR2x1YzNSbFlXUXVYSEpjYmlBZ1pHbGhiRzluVTJWeWRtbGpaVU52Ym01bFkzUnZjaTV6ZEdGeWRFTnZiblJwYm5WdmRYTlNaV052WjI1cGRHbHZia0Z6ZVc1aklEMGdLSEpsYzI5c2RtVXNJSEpsYW1WamRDa2dQVDRnZTF4eVhHNGdJQ0FnWkdsaGJHOW5VMlZ5ZG1salpVTnZibTVsWTNSdmNpNXNhWE4wWlc1UGJtTmxRWE41Ym1Nb1hISmNiaUFnSUNBZ0lDZ3BJRDArSUh0Y2NseHVJQ0FnSUNBZ0lDQXZMeUJYWlNCM2FXeHNJSEpsYzI5c2RtVWdkR2hsSUZCeWIyMXBjMlVnYVc0Z1lTQnpaWFJVYVcxbGIzVjBMbHh5WEc0Z0lDQWdJQ0I5TEZ4eVhHNGdJQ0FnSUNCbGNuSWdQVDRnZTF4eVhHNGdJQ0FnSUNBZ0lISmxjMjlzZG1VZ1BTQnVkV3hzTzF4eVhHNGdJQ0FnSUNBZ0lISmxhbVZqZENBbUppQnlaV3BsWTNRb1pYSnlLVHRjY2x4dUlDQWdJQ0FnZlZ4eVhHNGdJQ0FnS1R0Y2NseHVYSEpjYmlBZ0lDQnpaWFJVYVcxbGIzVjBLQ2dwSUQwK0lIdGNjbHh1SUNBZ0lDQWdjbVZxWldOMElEMGdiblZzYkR0Y2NseHVJQ0FnSUNBZ2NtVnpiMngyWlNBbUppQnlaWE52YkhabEtDazdYSEpjYmlBZ0lDQjlMQ0F3S1R0Y2NseHVJQ0I5TzF4eVhHNWNjbHh1SUNBdkx5QlVUMFJQT2lCemRHOXdRMjl1ZEdsdWRXOTFjMUpsWTI5bmJtbDBhVzl1UVhONWJtTWdhWE1nYm05MElIZHZjbXRwYm1jZ2VXVjBMbHh5WEc0Z0lDOHZJQ0FnSUNBZ0lGZGxJSGRwYkd3Z2JHVmhkbVVnYjNWMElIUm9aU0JwYlhCc1pXMWxiblJoZEdsdmJpQmhjeUJtWVd4emVTd2dWMlZpSUVOb1lYUWdkMmxzYkNCa2FYTmhZbXhsSUhSb1pTQnRhV055YjNCb2IyNWxJR0oxZEhSdmJpQmhablJsY2lCemRHRnlkQ0JrYVdOMFlYUmxMbHh5WEc0Z0lDOHZJQ0FnSUNBZ0lGUm9hWE1nZDJsc2JDQndjbVYyWlc1MElIVnpaWElnWm5KdmJTQmhZbTl5ZEdsdVp5QnpjR1ZsWTJnZ2NtVmpiMmR1YVhScGIyNHVYSEpjYmlBZ0x5OGdaR2xoYkc5blUyVnlkbWxqWlVOdmJtNWxZM1J2Y2k1emRHOXdRMjl1ZEdsdWRXOTFjMUpsWTI5bmJtbDBhVzl1UVhONWJtTWdQU0J5WlhOdmJIWmxJRDArSUh0Y2NseHVJQ0F2THlCOU8xeHlYRzVjY2x4dUlDQnlaWFIxY200Z1pHbGhiRzluVTJWeWRtbGpaVU52Ym01bFkzUnZjanRjY2x4dWZWeHlYRzRpWFgwPSIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdFwiKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHBsYXlDb2duaXRpdmVTZXJ2aWNlc1N0cmVhbTtcblxudmFyIF9yZWdlbmVyYXRvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yXCIpKTtcblxudmFyIF9hc3luY1RvR2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvclwiKSk7XG5cbnZhciBfY29nbml0aXZlU2VydmljZXNQcm9taXNlVG9FU1Byb21pc2UgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2NvZ25pdGl2ZVNlcnZpY2VzUHJvbWlzZVRvRVNQcm9taXNlXCIpKTtcblxudmFyIF9wRGVmZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJwLWRlZmVyXCIpKTtcblxuLyogZXNsaW50IG5vLW1hZ2ljLW51bWJlcnM6IFtcImVycm9yXCIsIHsgXCJpZ25vcmVcIjogWzgsIDE2LCAzMiwgMTI4LCAxMDAwLCAzMjc2OCwgMjE0NzQ4MzY0OF0gfV0gKi9cblxuLyogZXNsaW50IG5vLWF3YWl0LWluLWxvb3A6IFwib2ZmXCIgKi9cblxuLyogZXNsaW50IHByZWZlci1kZXN0cnVjdHVyaW5nOiBcIm9mZlwiICovXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXJTb3VyY2UoYXVkaW9Db250ZXh0LCBfcmVmLCBjaGFubmVsSW50ZXJsZWF2ZWRBdWRpb0RhdGEpIHtcbiAgdmFyIGNoYW5uZWxzID0gX3JlZi5jaGFubmVscyxcbiAgICAgIHNhbXBsZXNQZXJTZWMgPSBfcmVmLnNhbXBsZXNQZXJTZWM7XG4gIHZhciBidWZmZXJTb3VyY2UgPSBhdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gIHZhciBmcmFtZXMgPSBjaGFubmVsSW50ZXJsZWF2ZWRBdWRpb0RhdGEubGVuZ3RoIC8gY2hhbm5lbHM7XG4gIHZhciBhdWRpb0J1ZmZlciA9IGF1ZGlvQ29udGV4dC5jcmVhdGVCdWZmZXIoY2hhbm5lbHMsIGZyYW1lcywgc2FtcGxlc1BlclNlYyk7XG5cbiAgZm9yICh2YXIgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBjaGFubmVsczsgY2hhbm5lbCsrKSB7XG4gICAgdmFyIHBlckNoYW5uZWxBdWRpb0RhdGEgPSBhdWRpb0J1ZmZlci5nZXRDaGFubmVsRGF0YShjaGFubmVsKTsgLy8gV2UgYXJlIGNvcHlpbmcgY2hhbm5lbC1pbnRlcmxlYXZlZCBhdWRpbyBkYXRhLCBpbnRvIHBlci1jaGFubmVsIGF1ZGlvIGRhdGFcblxuICAgIGZvciAodmFyIHBlckNoYW5uZWxJbmRleCA9IDA7IHBlckNoYW5uZWxJbmRleCA8IGNoYW5uZWxJbnRlcmxlYXZlZEF1ZGlvRGF0YS5sZW5ndGg7IHBlckNoYW5uZWxJbmRleCsrKSB7XG4gICAgICBwZXJDaGFubmVsQXVkaW9EYXRhW3BlckNoYW5uZWxJbmRleF0gPSBjaGFubmVsSW50ZXJsZWF2ZWRBdWRpb0RhdGFbcGVyQ2hhbm5lbEluZGV4ICogY2hhbm5lbHMgKyBjaGFubmVsXTtcbiAgICB9XG4gIH1cblxuICBidWZmZXJTb3VyY2UuYnVmZmVyID0gYXVkaW9CdWZmZXI7XG4gIHJldHVybiBidWZmZXJTb3VyY2U7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFR5cGVkQml0QXJyYXlUb0Zsb2F0QXJyYXkoYXVkaW9EYXRhLCBtYXhWYWx1ZSkge1xuICB2YXIgZmxvYXQzMkRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGF1ZGlvRGF0YS5sZW5ndGgpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXVkaW9EYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgZmxvYXQzMkRhdGFbaV0gPSBhdWRpb0RhdGFbaV0gLyBtYXhWYWx1ZTtcbiAgfVxuXG4gIHJldHVybiBmbG9hdDMyRGF0YTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0QXVkaW9EYXRhQXJyYXlCdWZmZXJUb0Zsb2F0QXJyYXkoX3JlZjIsIGFycmF5QnVmZmVyKSB7XG4gIHZhciBiaXRzUGVyU2FtcGxlID0gX3JlZjIuYml0c1BlclNhbXBsZTtcblxuICBzd2l0Y2ggKGJpdHNQZXJTYW1wbGUpIHtcbiAgICBjYXNlIDg6XG4gICAgICByZXR1cm4gZm9ybWF0VHlwZWRCaXRBcnJheVRvRmxvYXRBcnJheShuZXcgSW50OEFycmF5KGFycmF5QnVmZmVyKSwgMTI4KTtcblxuICAgIGNhc2UgMTY6XG4gICAgICByZXR1cm4gZm9ybWF0VHlwZWRCaXRBcnJheVRvRmxvYXRBcnJheShuZXcgSW50MTZBcnJheShhcnJheUJ1ZmZlciksIDMyNzY4KTtcblxuICAgIGNhc2UgMzI6XG4gICAgICByZXR1cm4gZm9ybWF0VHlwZWRCaXRBcnJheVRvRmxvYXRBcnJheShuZXcgSW50MzJBcnJheShhcnJheUJ1ZmZlciksIDIxNDc0ODM2NDgpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBXQVZFX0ZPUk1BVF9QQ00gKDgvMTYvMzIgYnBzKSBmb3JtYXQgc3VwcG9ydGVkIGF0IHRoaXMgdGltZScpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFib3J0VG9SZWplY3Qoc2lnbmFsKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoXywgcmVqZWN0KSB7XG4gICAgc2lnbmFsLm9uYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcignYWJvcnRlZCcpKTtcbiAgICB9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcGxheUNvZ25pdGl2ZVNlcnZpY2VzU3RyZWFtKF94LCBfeDIsIF94Mykge1xuICByZXR1cm4gX3BsYXlDb2duaXRpdmVTZXJ2aWNlc1N0cmVhbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBfcGxheUNvZ25pdGl2ZVNlcnZpY2VzU3RyZWFtKCkge1xuICBfcGxheUNvZ25pdGl2ZVNlcnZpY2VzU3RyZWFtID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KShcbiAgLyojX19QVVJFX18qL1xuICBfcmVnZW5lcmF0b3IuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoYXVkaW9Db250ZXh0LCBhdWRpb0Zvcm1hdCwgc3RyZWFtUmVhZGVyKSB7XG4gICAgdmFyIF9yZWYzLFxuICAgICAgICBfcmVmMyRzaWduYWwsXG4gICAgICAgIHNpZ25hbCxcbiAgICAgICAgcXVldWVkQnVmZmVyU291cmNlTm9kZXMsXG4gICAgICAgIGFib3J0UHJvbWlzZSxcbiAgICAgICAgbGFzdEJ1ZmZlclNvdXJjZSxcbiAgICAgICAgcmVhZCxcbiAgICAgICAgY2h1bmssXG4gICAgICAgIGN1cnJlbnRUaW1lLFxuICAgICAgICBtYXhDaHVua3MsXG4gICAgICAgIGF1ZGlvRGF0YSxcbiAgICAgICAgYnVmZmVyU291cmNlLFxuICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgX2NyZWF0ZURlZmVycmVkLFxuICAgICAgICBwcm9taXNlLFxuICAgICAgICByZXNvbHZlLFxuICAgICAgICBfYXJncyA9IGFyZ3VtZW50cztcblxuICAgIHJldHVybiBfcmVnZW5lcmF0b3IuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICB3aGlsZSAoMSkge1xuICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX3JlZjMgPSBfYXJncy5sZW5ndGggPiAzICYmIF9hcmdzWzNdICE9PSB1bmRlZmluZWQgPyBfYXJnc1szXSA6IHt9LCBfcmVmMyRzaWduYWwgPSBfcmVmMy5zaWduYWwsIHNpZ25hbCA9IF9yZWYzJHNpZ25hbCA9PT0gdm9pZCAwID8ge30gOiBfcmVmMyRzaWduYWw7XG4gICAgICAgICAgICBxdWV1ZWRCdWZmZXJTb3VyY2VOb2RlcyA9IFtdO1xuICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7XG4gICAgICAgICAgICBhYm9ydFByb21pc2UgPSBhYm9ydFRvUmVqZWN0KHNpZ25hbCk7XG5cbiAgICAgICAgICAgIHJlYWQgPSBmdW5jdGlvbiByZWFkKCkge1xuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFsvLyBBYm9ydCB3aWxsIGdyYWNlZnVsbHkgZW5kIHRoZSBxdWV1ZS4gV2Ugd2lsbCBjaGVjayBzaWduYWwuYWJvcnRlZCBsYXRlciB0byB0aHJvdyBhYm9ydCBleGNlcHRpb24uXG4gICAgICAgICAgICAgIGFib3J0UHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIGlzRW5kOiB0cnVlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSksICgwLCBfY29nbml0aXZlU2VydmljZXNQcm9taXNlVG9FU1Byb21pc2UuZGVmYXVsdCkoc3RyZWFtUmVhZGVyLnJlYWQoKSldKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICghc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Fib3J0ZWQnKTtcblxuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5O1xuICAgICAgICAgICAgcmV0dXJuIHJlYWQoKTtcblxuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIGNodW5rID0gX2NvbnRleHQuc2VudDtcbiAgICAgICAgICAgIG1heENodW5rcyA9IDA7XG5cbiAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgaWYgKCEoIWNodW5rLmlzRW5kICYmIG1heENodW5rcyA8IDEwMDAgJiYgIXNpZ25hbC5hYm9ydGVkKSkge1xuICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJicmVha1wiLCAyOSk7XG5cbiAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgYXVkaW9EYXRhID0gZm9ybWF0QXVkaW9EYXRhQXJyYXlCdWZmZXJUb0Zsb2F0QXJyYXkoYXVkaW9Gb3JtYXQsIGNodW5rLmJ1ZmZlcik7XG4gICAgICAgICAgICBidWZmZXJTb3VyY2UgPSBjcmVhdGVCdWZmZXJTb3VyY2UoYXVkaW9Db250ZXh0LCBhdWRpb0Zvcm1hdCwgYXVkaW9EYXRhKTtcbiAgICAgICAgICAgIGR1cmF0aW9uID0gYnVmZmVyU291cmNlLmJ1ZmZlci5kdXJhdGlvbjtcblxuICAgICAgICAgICAgaWYgKCFjdXJyZW50VGltZSkge1xuICAgICAgICAgICAgICBjdXJyZW50VGltZSA9IGF1ZGlvQ29udGV4dC5jdXJyZW50VGltZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnVmZmVyU291cmNlLmNvbm5lY3QoYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgIGJ1ZmZlclNvdXJjZS5zdGFydChjdXJyZW50VGltZSk7XG4gICAgICAgICAgICBxdWV1ZWRCdWZmZXJTb3VyY2VOb2Rlcy5wdXNoKGJ1ZmZlclNvdXJjZSk7XG4gICAgICAgICAgICBsYXN0QnVmZmVyU291cmNlID0gYnVmZmVyU291cmNlO1xuICAgICAgICAgICAgY3VycmVudFRpbWUgKz0gZHVyYXRpb247XG5cbiAgICAgICAgICBjYXNlIDIzOlxuICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI1O1xuICAgICAgICAgICAgcmV0dXJuIHJlYWQoKTtcblxuICAgICAgICAgIGNhc2UgMjU6XG4gICAgICAgICAgICBjaHVuayA9IF9jb250ZXh0LnNlbnQ7XG4gICAgICAgICAgICBtYXhDaHVua3MrKztcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAyOTpcbiAgICAgICAgICAgIGlmICghc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhYm9ydGVkJyk7XG5cbiAgICAgICAgICBjYXNlIDMxOlxuICAgICAgICAgICAgaWYgKCFsYXN0QnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9jcmVhdGVEZWZlcnJlZCA9ICgwLCBfcERlZmVyLmRlZmF1bHQpKCksIHByb21pc2UgPSBfY3JlYXRlRGVmZXJyZWQucHJvbWlzZSwgcmVzb2x2ZSA9IF9jcmVhdGVEZWZlcnJlZC5yZXNvbHZlO1xuICAgICAgICAgICAgbGFzdEJ1ZmZlclNvdXJjZS5vbmVuZGVkID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNjtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW2Fib3J0UHJvbWlzZSwgcHJvbWlzZV0pO1xuXG4gICAgICAgICAgY2FzZSAzNjpcbiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzNjtcbiAgICAgICAgICAgIHF1ZXVlZEJ1ZmZlclNvdXJjZU5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDM2KTtcblxuICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMiwsIDM2LCAzOV1dKTtcbiAgfSkpO1xuICByZXR1cm4gX3BsYXlDb2duaXRpdmVTZXJ2aWNlc1N0cmVhbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTl3YkdGNVEyOW5ibWwwYVhabFUyVnlkbWxqWlhOVGRISmxZVzB1YW5NaVhTd2libUZ0WlhNaU9sc2lZM0psWVhSbFFuVm1abVZ5VTI5MWNtTmxJaXdpWVhWa2FXOURiMjUwWlhoMElpd2lZMmhoYm01bGJFbHVkR1Z5YkdWaGRtVmtRWFZrYVc5RVlYUmhJaXdpWTJoaGJtNWxiSE1pTENKellXMXdiR1Z6VUdWeVUyVmpJaXdpWW5WbVptVnlVMjkxY21ObElpd2labkpoYldWeklpd2liR1Z1WjNSb0lpd2lZWFZrYVc5Q2RXWm1aWElpTENKamNtVmhkR1ZDZFdabVpYSWlMQ0pqYUdGdWJtVnNJaXdpY0dWeVEyaGhibTVsYkVGMVpHbHZSR0YwWVNJc0ltZGxkRU5vWVc1dVpXeEVZWFJoSWl3aWNHVnlRMmhoYm01bGJFbHVaR1Y0SWl3aVluVm1abVZ5SWl3aVptOXliV0YwVkhsd1pXUkNhWFJCY25KaGVWUnZSbXh2WVhSQmNuSmhlU0lzSW1GMVpHbHZSR0YwWVNJc0ltMWhlRlpoYkhWbElpd2labXh2WVhRek1rUmhkR0VpTENKR2JHOWhkRE15UVhKeVlYa2lMQ0pwSWl3aVptOXliV0YwUVhWa2FXOUVZWFJoUVhKeVlYbENkV1ptWlhKVWIwWnNiMkYwUVhKeVlYa2lMQ0poY25KaGVVSjFabVpsY2lJc0ltSnBkSE5RWlhKVFlXMXdiR1VpTENKSmJuUTRRWEp5WVhraUxDSkpiblF4TmtGeWNtRjVJaXdpU1c1ME16SkJjbkpoZVNJc0lrVnljbTl5SWl3aVlXSnZjblJVYjFKbGFtVmpkQ0lzSW5OcFoyNWhiQ0lzSWxCeWIyMXBjMlVpTENKZklpd2ljbVZxWldOMElpd2liMjVoWW05eWRDSXNJbkJzWVhsRGIyZHVhWFJwZG1WVFpYSjJhV05sYzFOMGNtVmhiU0lzSW1GMVpHbHZSbTl5YldGMElpd2ljM1J5WldGdFVtVmhaR1Z5SWl3aWNYVmxkV1ZrUW5WbVptVnlVMjkxY21ObFRtOWtaWE1pTENKaFltOXlkRkJ5YjIxcGMyVWlMQ0p5WldGa0lpd2ljbUZqWlNJc0ltTmhkR05vSWl3aWFYTkZibVFpTENKaFltOXlkR1ZrSWl3aVkyaDFibXNpTENKdFlYaERhSFZ1YTNNaUxDSmtkWEpoZEdsdmJpSXNJbU4xY25KbGJuUlVhVzFsSWl3aVkyOXVibVZqZENJc0ltUmxjM1JwYm1GMGFXOXVJaXdpYzNSaGNuUWlMQ0p3ZFhOb0lpd2liR0Z6ZEVKMVptWmxjbE52ZFhKalpTSXNJbkJ5YjIxcGMyVWlMQ0p5WlhOdmJIWmxJaXdpYjI1bGJtUmxaQ0lzSW1admNrVmhZMmdpTENKdWIyUmxJaXdpYzNSdmNDSmRMQ0p0WVhCd2FXNW5jeUk2SWpzN096czdPenM3T3pzN096dEJRVWxCT3p0QlFVTkJPenRCUVV4Qk96dEJRVU5CT3p0QlFVTkJPMEZCUzBFc1UwRkJVMEVzYTBKQlFWUXNRMEZCTkVKRExGbEJRVFZDTEZGQlFYVkZReXd5UWtGQmRrVXNSVUZCYjBjN1FVRkJRU3hOUVVGNFJFTXNVVUZCZDBRc1VVRkJlRVJCTEZGQlFYZEVPMEZCUVVFc1RVRkJPVU5ETEdGQlFUaERMRkZCUVRsRFFTeGhRVUU0UXp0QlFVTnNSeXhOUVVGTlF5eFpRVUZaTEVkQlFVZEtMRmxCUVZrc1EwRkJRMFFzYTBKQlFXSXNSVUZCY2tJN1FVRkRRU3hOUVVGTlRTeE5RVUZOTEVkQlFVZEtMREpDUVVFeVFpeERRVUZEU3l4TlFVRTFRaXhIUVVGeFEwb3NVVUZCY0VRN1FVRkRRU3hOUVVGTlN5eFhRVUZYTEVkQlFVZFFMRmxCUVZrc1EwRkJRMUVzV1VGQllpeERRVUV3UWs0c1VVRkJNVUlzUlVGQmIwTkhMRTFCUVhCRExFVkJRVFJEUml4aFFVRTFReXhEUVVGd1FqczdRVUZGUVN4UFFVRkxMRWxCUVVsTkxFOUJRVThzUjBGQlJ5eERRVUZ1UWl4RlFVRnpRa0VzVDBGQlR5eEhRVUZIVUN4UlFVRm9ReXhGUVVFd1EwOHNUMEZCVHl4RlFVRnFSQ3hGUVVGeFJEdEJRVU51UkN4UlFVRk5ReXh0UWtGQmJVSXNSMEZCUjBnc1YwRkJWeXhEUVVGRFNTeGpRVUZhTEVOQlFUSkNSaXhQUVVFelFpeERRVUUxUWl4RFFVUnRSQ3hEUVVkdVJEczdRVUZEUVN4VFFVRkxMRWxCUVVsSExHVkJRV1VzUjBGQlJ5eERRVUV6UWl4RlFVRTRRa0VzWlVGQlpTeEhRVUZIV0N3eVFrRkJNa0lzUTBGQlEwc3NUVUZCTlVVc1JVRkJiMFpOTEdWQlFXVXNSVUZCYmtjc1JVRkJkVWM3UVVGRGNrZEdMRTFCUVVGQkxHMUNRVUZ0UWl4RFFVRkRSU3hsUVVGRUxFTkJRVzVDTEVkQlFYVkRXQ3d5UWtGQk1rSXNRMEZCUTFjc1pVRkJaU3hIUVVGSFZpeFJRVUZzUWl4SFFVRTJRazhzVDBGQk9VSXNRMEZCYkVVN1FVRkRSRHRCUVVOR096dEJRVVZFVEN4RlFVRkJRU3haUVVGWkxFTkJRVU5UTEUxQlFXSXNSMEZCYzBKT0xGZEJRWFJDTzBGQlJVRXNVMEZCVDBnc1dVRkJVRHRCUVVORU96dEJRVVZFTEZOQlFWTlZMQ3RDUVVGVUxFTkJRWGxEUXl4VFFVRjZReXhGUVVGdlJFTXNVVUZCY0VRc1JVRkJPRVE3UVVGRE5VUXNUVUZCVFVNc1YwRkJWeXhIUVVGSExFbEJRVWxETEZsQlFVb3NRMEZCYVVKSUxGTkJRVk1zUTBGQlExUXNUVUZCTTBJc1EwRkJjRUk3TzBGQlJVRXNUMEZCU3l4SlFVRkpZU3hEUVVGRExFZEJRVWNzUTBGQllpeEZRVUZuUWtFc1EwRkJReXhIUVVGSFNpeFRRVUZUTEVOQlFVTlVMRTFCUVRsQ0xFVkJRWE5EWVN4RFFVRkRMRVZCUVhaRExFVkJRVEpETzBGQlEzcERSaXhKUVVGQlFTeFhRVUZYTEVOQlFVTkZMRU5CUVVRc1EwRkJXQ3hIUVVGcFFrb3NVMEZCVXl4RFFVRkRTU3hEUVVGRUxFTkJRVlFzUjBGQlpVZ3NVVUZCYUVNN1FVRkRSRHM3UVVGRlJDeFRRVUZQUXl4WFFVRlFPMEZCUTBRN08wRkJSVVFzVTBGQlUwY3NjME5CUVZRc1VVRkJiVVZETEZkQlFXNUZMRVZCUVdkR08wRkJRVUVzVFVGQk9VSkRMR0ZCUVRoQ0xGTkJRVGxDUVN4aFFVRTRRanM3UVVGRE9VVXNWVUZCVVVFc1lVRkJVanRCUVVORkxGTkJRVXNzUTBGQlREdEJRVU5GTEdGQlFVOVNMQ3RDUVVFclFpeERRVUZETEVsQlFVbFRMRk5CUVVvc1EwRkJZMFlzVjBGQlpDeERRVUZFTEVWQlFUWkNMRWRCUVRkQ0xFTkJRWFJET3p0QlFVVkdMRk5CUVVzc1JVRkJURHRCUVVORkxHRkJRVTlRTEN0Q1FVRXJRaXhEUVVGRExFbEJRVWxWTEZWQlFVb3NRMEZCWlVnc1YwRkJaaXhEUVVGRUxFVkJRVGhDTEV0QlFUbENMRU5CUVhSRE96dEJRVVZHTEZOQlFVc3NSVUZCVER0QlFVTkZMR0ZCUVU5UUxDdENRVUVyUWl4RFFVRkRMRWxCUVVsWExGVkJRVW9zUTBGQlpVb3NWMEZCWml4RFFVRkVMRVZCUVRoQ0xGVkJRVGxDTEVOQlFYUkRPenRCUVVWR08wRkJRMFVzV1VGQlRTeEpRVUZKU3l4TFFVRktMRU5CUVZVc2EwVkJRVllzUTBGQlRqdEJRVmhLTzBGQllVUTdPMEZCUlVRc1UwRkJVME1zWVVGQlZDeERRVUYxUWtNc1RVRkJka0lzUlVGQkswSTdRVUZETjBJc1UwRkJUeXhKUVVGSlF5eFBRVUZLTEVOQlFWa3NWVUZCUTBNc1EwRkJSQ3hGUVVGSlF5eE5RVUZLTEVWQlFXVTdRVUZEYUVOSUxFbEJRVUZCTEUxQlFVMHNRMEZCUTBrc1QwRkJVQ3hIUVVGcFFqdEJRVUZCTEdGQlFVMUVMRTFCUVUwc1EwRkJReXhKUVVGSlRDeExRVUZLTEVOQlFWVXNVMEZCVml4RFFVRkVMRU5CUVZvN1FVRkJRU3hMUVVGcVFqdEJRVU5FTEVkQlJrMHNRMEZCVUR0QlFVZEVPenRUUVVVMlFrOHNNa0k3T3pzN096czdORUpCUVdZc2FVSkJRMkpxUXl4WlFVUmhMRVZCUldKclF5eFhRVVpoTEVWQlIySkRMRmxCU0dFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPenRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNORVZCU1Vzc1JVRktUQ3gxUWtGSldGQXNUVUZLVnl4RlFVbFlRU3hOUVVwWExEWkNRVWxHTEVWQlNrVTdRVUZOVUZFc1dVRkJRVUVzZFVKQlRrOHNSMEZOYlVJc1JVRk9ia0k3UVVGQlFUdEJRVk5NUXl4WlFVRkJRU3haUVZSTExFZEJVMVZXTEdGQlFXRXNRMEZCUTBNc1RVRkJSQ3hEUVZSMlFqczdRVUZaVEZVc1dVRkJRVUVzU1VGYVN5eEhRVmxGTEZOQlFWQkJMRWxCUVU4N1FVRkJRU3h4UWtGRFdGUXNUMEZCVHl4RFFVRkRWU3hKUVVGU0xFTkJRV0VzUTBGRFdEdEJRVU5CUml4alFVRkJRU3haUVVGWkxFTkJRVU5ITEV0QlFXSXNRMEZCYlVJN1FVRkJRU3gxUWtGQlR6dEJRVUZGUXl4clFrRkJRVUVzUzBGQlN5eEZRVUZGTzBGQlFWUXNhVUpCUVZBN1FVRkJRU3hsUVVGdVFpeERRVVpYTEVWQlIxZ3NhMFJCUVc5RFRpeFpRVUZaTEVOQlFVTkhMRWxCUVdJc1JVRkJjRU1zUTBGSVZ5eERRVUZpTEVOQlJGYzdRVUZCUVN4aFFWcEdPenRCUVVGQkxHbENRVzFDVUZZc1RVRkJUU3hEUVVGRFl5eFBRVzVDUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHM3UVVGQlFTeHJRa0Z2UWtnc1NVRkJTV2hDTEV0QlFVb3NRMEZCVlN4VFFVRldMRU5CY0VKSE96dEJRVUZCTzBGQlFVRTdRVUZCUVN4dFFrRjNRbE5aTEVsQlFVa3NSVUY0UW1JN08wRkJRVUU3UVVGM1FreExMRmxCUVVGQkxFdEJlRUpMTzBGQmQwSTRRa01zV1VGQlFVRXNVMEY0UWpsQ0xFZEJkMEl3UXl4RFFYaENNVU03TzBGQlFVRTdRVUZCUVN4clFrRjVRbFFzUTBGQlEwUXNTMEZCU3l4RFFVRkRSaXhMUVVGUUxFbEJRV2RDUnl4VFFVRlRMRWRCUVVjc1NVRkJOVUlzU1VGQmIwTXNRMEZCUTJoQ0xFMUJRVTBzUTBGQlEyTXNUMEY2UW01RE8wRkJRVUU3UVVGQlFUdEJRVUZCT3p0QlFVRkJMR2xDUVRSQ1RHUXNUVUZCVFN4RFFVRkRZeXhQUVRWQ1JqdEJRVUZCTzBGQlFVRTdRVUZCUVRzN1FVRkJRVHM3UVVGQlFUdEJRV2REU0ROQ0xGbEJRVUZCTEZOQmFFTkhMRWRCWjBOVFN5eHpRMEZCYzBNc1EwRkJRMk1zVjBGQlJDeEZRVUZqVXl4TFFVRkxMRU5CUVVNNVFpeE5RVUZ3UWl4RFFXaERMME03UVVGcFEwaFVMRmxCUVVGQkxGbEJha05ITEVkQmFVTlpUQ3hyUWtGQmEwSXNRMEZCUTBNc1dVRkJSQ3hGUVVGbGEwTXNWMEZCWml4RlFVRTBRbTVDTEZOQlFUVkNMRU5CYWtNNVFqdEJRV3REUkRoQ0xGbEJRVUZCTEZGQmJFTkRMRWRCYTBOWmVrTXNXVUZCV1N4RFFVRkRVeXhOUVd4RGVrSXNRMEZyUTBSblF5eFJRV3hEUXpzN1FVRnZRMVFzWjBKQlFVa3NRMEZCUTBNc1YwRkJUQ3hGUVVGclFqdEJRVU5vUWtFc1kwRkJRVUVzVjBGQlZ5eEhRVUZIT1VNc1dVRkJXU3hEUVVGRE9FTXNWMEZCTTBJN1FVRkRSRHM3UVVGRlJERkRMRmxCUVVGQkxGbEJRVmtzUTBGQlF6SkRMRTlCUVdJc1EwRkJjVUl2UXl4WlFVRlpMRU5CUVVOblJDeFhRVUZzUXp0QlFVTkJOVU1zV1VGQlFVRXNXVUZCV1N4RFFVRkROa01zUzBGQllpeERRVUZ0UWtnc1YwRkJia0k3UVVGRlFWWXNXVUZCUVVFc2RVSkJRWFZDTEVOQlFVTmpMRWxCUVhoQ0xFTkJRVFpDT1VNc1dVRkJOMEk3UVVGRlFTdERMRmxCUVVGQkxHZENRVUZuUWl4SFFVRkhMME1zV1VGQmJrSTdRVUZEUVRCRExGbEJRVUZCTEZkQlFWY3NTVUZCU1VRc1VVRkJaanM3UVVFNVExTTdRVUZCUVR0QlFVRkJMRzFDUVRCQ1MxQXNTVUZCU1N4RlFURkNWRHM3UVVGQlFUdEJRVEJDVkVzc1dVRkJRVUVzUzBFeFFsTTdRVUV3UW1GRExGbEJRVUZCTEZOQlFWTXNSVUV4UW5SQ08wRkJRVUU3UVVGQlFUczdRVUZCUVR0QlFVRkJMR2xDUVdsRVVHaENMRTFCUVUwc1EwRkJRMk1zVDBGcVJFRTdRVUZCUVR0QlFVRkJPMEZCUVVFN08wRkJRVUVzYTBKQmEwUklMRWxCUVVsb1FpeExRVUZLTEVOQlFWVXNVMEZCVml4RFFXeEVSenM3UVVGQlFUdEJRVUZCTEdsQ1FYRkVVSGxDTEdkQ1FYSkVUenRCUVVGQk8wRkJRVUU3UVVGQlFUczdRVUZCUVN3NFFrRnpSRzlDTEhOQ1FYUkVjRUlzUlVGelJFUkRMRTlCZEVSRExHMUNRWE5FUkVFc1QwRjBSRU1zUlVGelJGRkRMRTlCZEVSU0xHMUNRWE5FVVVFc1QwRjBSRkk3UVVGM1JGUkdMRmxCUVVGQkxHZENRVUZuUWl4RFFVRkRSeXhQUVVGcVFpeEhRVUV5UWtRc1QwRkJNMEk3UVVGNFJGTTdRVUZCUVN4dFFrRXdSRWg0UWl4UFFVRlBMRU5CUVVOVkxFbEJRVklzUTBGQllTeERRVUZEUml4WlFVRkVMRVZCUVdWbExFOUJRV1lzUTBGQllpeERRVEZFUnpzN1FVRkJRVHRCUVVGQk8wRkJOa1JZYUVJc1dVRkJRVUVzZFVKQlFYVkNMRU5CUVVOdFFpeFBRVUY0UWl4RFFVRm5ReXhWUVVGQlF5eEpRVUZKTzBGQlFVRXNjVUpCUVVsQkxFbEJRVWtzUTBGQlEwTXNTVUZCVEN4RlFVRktPMEZCUVVFc1lVRkJjRU03UVVFM1JGYzdPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNSeUlzSW5OdmRYSmpaWE5EYjI1MFpXNTBJanBiSWk4cUlHVnpiR2x1ZENCdWJ5MXRZV2RwWXkxdWRXMWlaWEp6T2lCYlhDSmxjbkp2Y2x3aUxDQjdJRndpYVdkdWIzSmxYQ0k2SUZzNExDQXhOaXdnTXpJc0lERXlPQ3dnTVRBd01Dd2dNekkzTmpnc0lESXhORGMwT0RNMk5EaGRJSDFkSUNvdlhISmNiaThxSUdWemJHbHVkQ0J1YnkxaGQyRnBkQzFwYmkxc2IyOXdPaUJjSW05bVpsd2lJQ292WEhKY2JpOHFJR1Z6YkdsdWRDQndjbVZtWlhJdFpHVnpkSEoxWTNSMWNtbHVaem9nWENKdlptWmNJaUFxTDF4eVhHNWNjbHh1YVcxd2IzSjBJR052WjI1cGRHbDJaVk5sY25acFkyVnpVSEp2YldselpWUnZSVk5RY205dGFYTmxJR1p5YjIwZ0p5NHZZMjluYm1sMGFYWmxVMlZ5ZG1salpYTlFjbTl0YVhObFZHOUZVMUJ5YjIxcGMyVW5PMXh5WEc1cGJYQnZjblFnWTNKbFlYUmxSR1ZtWlhKeVpXUWdabkp2YlNBbmNDMWtaV1psY2ljN1hISmNibHh5WEc1bWRXNWpkR2x2YmlCamNtVmhkR1ZDZFdabVpYSlRiM1Z5WTJVb1lYVmthVzlEYjI1MFpYaDBMQ0I3SUdOb1lXNXVaV3h6TENCellXMXdiR1Z6VUdWeVUyVmpJSDBzSUdOb1lXNXVaV3hKYm5SbGNteGxZWFpsWkVGMVpHbHZSR0YwWVNrZ2UxeHlYRzRnSUdOdmJuTjBJR0oxWm1abGNsTnZkWEpqWlNBOUlHRjFaR2x2UTI5dWRHVjRkQzVqY21WaGRHVkNkV1ptWlhKVGIzVnlZMlVvS1R0Y2NseHVJQ0JqYjI1emRDQm1jbUZ0WlhNZ1BTQmphR0Z1Ym1Wc1NXNTBaWEpzWldGMlpXUkJkV1JwYjBSaGRHRXViR1Z1WjNSb0lDOGdZMmhoYm01bGJITTdYSEpjYmlBZ1kyOXVjM1FnWVhWa2FXOUNkV1ptWlhJZ1BTQmhkV1JwYjBOdmJuUmxlSFF1WTNKbFlYUmxRblZtWm1WeUtHTm9ZVzV1Wld4ekxDQm1jbUZ0WlhNc0lITmhiWEJzWlhOUVpYSlRaV01wTzF4eVhHNWNjbHh1SUNCbWIzSWdLR3hsZENCamFHRnVibVZzSUQwZ01Ec2dZMmhoYm01bGJDQThJR05vWVc1dVpXeHpPeUJqYUdGdWJtVnNLeXNwSUh0Y2NseHVJQ0FnSUdOdmJuTjBJSEJsY2tOb1lXNXVaV3hCZFdScGIwUmhkR0VnUFNCaGRXUnBiMEoxWm1abGNpNW5aWFJEYUdGdWJtVnNSR0YwWVNoamFHRnVibVZzS1R0Y2NseHVYSEpjYmlBZ0lDQXZMeUJYWlNCaGNtVWdZMjl3ZVdsdVp5QmphR0Z1Ym1Wc0xXbHVkR1Z5YkdWaGRtVmtJR0YxWkdsdklHUmhkR0VzSUdsdWRHOGdjR1Z5TFdOb1lXNXVaV3dnWVhWa2FXOGdaR0YwWVZ4eVhHNGdJQ0FnWm05eUlDaHNaWFFnY0dWeVEyaGhibTVsYkVsdVpHVjRJRDBnTURzZ2NHVnlRMmhoYm01bGJFbHVaR1Y0SUR3Z1kyaGhibTVsYkVsdWRHVnliR1ZoZG1Wa1FYVmthVzlFWVhSaExteGxibWQwYURzZ2NHVnlRMmhoYm01bGJFbHVaR1Y0S3lzcElIdGNjbHh1SUNBZ0lDQWdjR1Z5UTJoaGJtNWxiRUYxWkdsdlJHRjBZVnR3WlhKRGFHRnVibVZzU1c1a1pYaGRJRDBnWTJoaGJtNWxiRWx1ZEdWeWJHVmhkbVZrUVhWa2FXOUVZWFJoVzNCbGNrTm9ZVzV1Wld4SmJtUmxlQ0FxSUdOb1lXNXVaV3h6SUNzZ1kyaGhibTVsYkYwN1hISmNiaUFnSUNCOVhISmNiaUFnZlZ4eVhHNWNjbHh1SUNCaWRXWm1aWEpUYjNWeVkyVXVZblZtWm1WeUlEMGdZWFZrYVc5Q2RXWm1aWEk3WEhKY2JseHlYRzRnSUhKbGRIVnliaUJpZFdabVpYSlRiM1Z5WTJVN1hISmNibjFjY2x4dVhISmNibVoxYm1OMGFXOXVJR1p2Y20xaGRGUjVjR1ZrUW1sMFFYSnlZWGxVYjBac2IyRjBRWEp5WVhrb1lYVmthVzlFWVhSaExDQnRZWGhXWVd4MVpTa2dlMXh5WEc0Z0lHTnZibk4wSUdac2IyRjBNekpFWVhSaElEMGdibVYzSUVac2IyRjBNekpCY25KaGVTaGhkV1JwYjBSaGRHRXViR1Z1WjNSb0tUdGNjbHh1WEhKY2JpQWdabTl5SUNoc1pYUWdhU0E5SURBN0lHa2dQQ0JoZFdScGIwUmhkR0V1YkdWdVozUm9PeUJwS3lzcElIdGNjbHh1SUNBZ0lHWnNiMkYwTXpKRVlYUmhXMmxkSUQwZ1lYVmthVzlFWVhSaFcybGRJQzhnYldGNFZtRnNkV1U3WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0J5WlhSMWNtNGdabXh2WVhRek1rUmhkR0U3WEhKY2JuMWNjbHh1WEhKY2JtWjFibU4wYVc5dUlHWnZjbTFoZEVGMVpHbHZSR0YwWVVGeWNtRjVRblZtWm1WeVZHOUdiRzloZEVGeWNtRjVLSHNnWW1sMGMxQmxjbE5oYlhCc1pTQjlMQ0JoY25KaGVVSjFabVpsY2lrZ2UxeHlYRzRnSUhOM2FYUmphQ0FvWW1sMGMxQmxjbE5oYlhCc1pTa2dlMXh5WEc0Z0lDQWdZMkZ6WlNBNE9seHlYRzRnSUNBZ0lDQnlaWFIxY200Z1ptOXliV0YwVkhsd1pXUkNhWFJCY25KaGVWUnZSbXh2WVhSQmNuSmhlU2h1WlhjZ1NXNTBPRUZ5Y21GNUtHRnljbUY1UW5WbVptVnlLU3dnTVRJNEtUdGNjbHh1WEhKY2JpQWdJQ0JqWVhObElERTJPbHh5WEc0Z0lDQWdJQ0J5WlhSMWNtNGdabTl5YldGMFZIbHdaV1JDYVhSQmNuSmhlVlJ2Um14dllYUkJjbkpoZVNodVpYY2dTVzUwTVRaQmNuSmhlU2hoY25KaGVVSjFabVpsY2lrc0lETXlOelk0S1R0Y2NseHVYSEpjYmlBZ0lDQmpZWE5sSURNeU9seHlYRzRnSUNBZ0lDQnlaWFIxY200Z1ptOXliV0YwVkhsd1pXUkNhWFJCY25KaGVWUnZSbXh2WVhSQmNuSmhlU2h1WlhjZ1NXNTBNekpCY25KaGVTaGhjbkpoZVVKMVptWmxjaWtzSURJeE5EYzBPRE0yTkRncE8xeHlYRzVjY2x4dUlDQWdJR1JsWm1GMWJIUTZYSEpjYmlBZ0lDQWdJSFJvY205M0lHNWxkeUJGY25KdmNpZ25UMjVzZVNCWFFWWkZYMFpQVWsxQlZGOVFRMDBnS0Rndk1UWXZNeklnWW5CektTQm1iM0p0WVhRZ2MzVndjRzl5ZEdWa0lHRjBJSFJvYVhNZ2RHbHRaU2NwTzF4eVhHNGdJSDFjY2x4dWZWeHlYRzVjY2x4dVpuVnVZM1JwYjI0Z1lXSnZjblJVYjFKbGFtVmpkQ2h6YVdkdVlXd3BJSHRjY2x4dUlDQnlaWFIxY200Z2JtVjNJRkJ5YjIxcGMyVW9LRjhzSUhKbGFtVmpkQ2tnUFQ0Z2UxeHlYRzRnSUNBZ2MybG5ibUZzTG05dVlXSnZjblFnUFNBb0tTQTlQaUJ5WldwbFkzUW9ibVYzSUVWeWNtOXlLQ2RoWW05eWRHVmtKeWtwTzF4eVhHNGdJSDBwTzF4eVhHNTlYSEpjYmx4eVhHNWxlSEJ2Y25RZ1pHVm1ZWFZzZENCaGMzbHVZeUJtZFc1amRHbHZiaUJ3YkdGNVEyOW5ibWwwYVhabFUyVnlkbWxqWlhOVGRISmxZVzBvWEhKY2JpQWdZWFZrYVc5RGIyNTBaWGgwTEZ4eVhHNGdJR0YxWkdsdlJtOXliV0YwTEZ4eVhHNGdJSE4wY21WaGJWSmxZV1JsY2l4Y2NseHVJQ0I3SUhOcFoyNWhiQ0E5SUh0OUlIMGdQU0I3ZlZ4eVhHNHBJSHRjY2x4dUlDQmpiMjV6ZENCeGRXVjFaV1JDZFdabVpYSlRiM1Z5WTJWT2IyUmxjeUE5SUZ0ZE8xeHlYRzVjY2x4dUlDQjBjbmtnZTF4eVhHNGdJQ0FnWTI5dWMzUWdZV0p2Y25SUWNtOXRhWE5sSUQwZ1lXSnZjblJVYjFKbGFtVmpkQ2h6YVdkdVlXd3BPMXh5WEc0Z0lDQWdiR1YwSUd4aGMzUkNkV1ptWlhKVGIzVnlZMlU3WEhKY2JseHlYRzRnSUNBZ1kyOXVjM1FnY21WaFpDQTlJQ2dwSUQwK1hISmNiaUFnSUNBZ0lGQnliMjFwYzJVdWNtRmpaU2hiWEhKY2JpQWdJQ0FnSUNBZ0x5OGdRV0p2Y25RZ2QybHNiQ0JuY21GalpXWjFiR3g1SUdWdVpDQjBhR1VnY1hWbGRXVXVJRmRsSUhkcGJHd2dZMmhsWTJzZ2MybG5ibUZzTG1GaWIzSjBaV1FnYkdGMFpYSWdkRzhnZEdoeWIzY2dZV0p2Y25RZ1pYaGpaWEIwYVc5dUxseHlYRzRnSUNBZ0lDQWdJR0ZpYjNKMFVISnZiV2x6WlM1allYUmphQ2dvS1NBOVBpQW9leUJwYzBWdVpEb2dkSEoxWlNCOUtTa3NYSEpjYmlBZ0lDQWdJQ0FnWTI5bmJtbDBhWFpsVTJWeWRtbGpaWE5RY205dGFYTmxWRzlGVTFCeWIyMXBjMlVvYzNSeVpXRnRVbVZoWkdWeUxuSmxZV1FvS1NsY2NseHVJQ0FnSUNBZ1hTazdYSEpjYmx4eVhHNGdJQ0FnYVdZZ0tITnBaMjVoYkM1aFltOXlkR1ZrS1NCN1hISmNiaUFnSUNBZ0lIUm9jbTkzSUc1bGR5QkZjbkp2Y2lnbllXSnZjblJsWkNjcE8xeHlYRzRnSUNBZ2ZWeHlYRzVjY2x4dUlDQWdJR1p2Y2lBb1hISmNiaUFnSUNBZ0lHeGxkQ0JqYUhWdWF5QTlJR0YzWVdsMElISmxZV1FvS1N3Z1kzVnljbVZ1ZEZScGJXVXNJRzFoZUVOb2RXNXJjeUE5SURBN1hISmNiaUFnSUNBZ0lDRmphSFZ1YXk1cGMwVnVaQ0FtSmlCdFlYaERhSFZ1YTNNZ1BDQXhNREF3SUNZbUlDRnphV2R1WVd3dVlXSnZjblJsWkR0Y2NseHVJQ0FnSUNBZ1kyaDFibXNnUFNCaGQyRnBkQ0J5WldGa0tDa3NJRzFoZUVOb2RXNXJjeXNyWEhKY2JpQWdJQ0FwSUh0Y2NseHVJQ0FnSUNBZ2FXWWdLSE5wWjI1aGJDNWhZbTl5ZEdWa0tTQjdYSEpjYmlBZ0lDQWdJQ0FnWW5KbFlXczdYSEpjYmlBZ0lDQWdJSDFjY2x4dVhISmNiaUFnSUNBZ0lHTnZibk4wSUdGMVpHbHZSR0YwWVNBOUlHWnZjbTFoZEVGMVpHbHZSR0YwWVVGeWNtRjVRblZtWm1WeVZHOUdiRzloZEVGeWNtRjVLR0YxWkdsdlJtOXliV0YwTENCamFIVnVheTVpZFdabVpYSXBPMXh5WEc0Z0lDQWdJQ0JqYjI1emRDQmlkV1ptWlhKVGIzVnlZMlVnUFNCamNtVmhkR1ZDZFdabVpYSlRiM1Z5WTJVb1lYVmthVzlEYjI1MFpYaDBMQ0JoZFdScGIwWnZjbTFoZEN3Z1lYVmthVzlFWVhSaEtUdGNjbHh1SUNBZ0lDQWdZMjl1YzNRZ2V5QmtkWEpoZEdsdmJpQjlJRDBnWW5WbVptVnlVMjkxY21ObExtSjFabVpsY2p0Y2NseHVYSEpjYmlBZ0lDQWdJR2xtSUNnaFkzVnljbVZ1ZEZScGJXVXBJSHRjY2x4dUlDQWdJQ0FnSUNCamRYSnlaVzUwVkdsdFpTQTlJR0YxWkdsdlEyOXVkR1Y0ZEM1amRYSnlaVzUwVkdsdFpUdGNjbHh1SUNBZ0lDQWdmVnh5WEc1Y2NseHVJQ0FnSUNBZ1luVm1abVZ5VTI5MWNtTmxMbU52Ym01bFkzUW9ZWFZrYVc5RGIyNTBaWGgwTG1SbGMzUnBibUYwYVc5dUtUdGNjbHh1SUNBZ0lDQWdZblZtWm1WeVUyOTFjbU5sTG5OMFlYSjBLR04xY25KbGJuUlVhVzFsS1R0Y2NseHVYSEpjYmlBZ0lDQWdJSEYxWlhWbFpFSjFabVpsY2xOdmRYSmpaVTV2WkdWekxuQjFjMmdvWW5WbVptVnlVMjkxY21ObEtUdGNjbHh1WEhKY2JpQWdJQ0FnSUd4aGMzUkNkV1ptWlhKVGIzVnlZMlVnUFNCaWRXWm1aWEpUYjNWeVkyVTdYSEpjYmlBZ0lDQWdJR04xY25KbGJuUlVhVzFsSUNzOUlHUjFjbUYwYVc5dU8xeHlYRzRnSUNBZ2ZWeHlYRzVjY2x4dUlDQWdJR2xtSUNoemFXZHVZV3d1WVdKdmNuUmxaQ2tnZTF4eVhHNGdJQ0FnSUNCMGFISnZkeUJ1WlhjZ1JYSnliM0lvSjJGaWIzSjBaV1FuS1R0Y2NseHVJQ0FnSUgxY2NseHVYSEpjYmlBZ0lDQnBaaUFvYkdGemRFSjFabVpsY2xOdmRYSmpaU2tnZTF4eVhHNGdJQ0FnSUNCamIyNXpkQ0I3SUhCeWIyMXBjMlVzSUhKbGMyOXNkbVVnZlNBOUlHTnlaV0YwWlVSbFptVnljbVZrS0NrN1hISmNibHh5WEc0Z0lDQWdJQ0JzWVhOMFFuVm1abVZ5VTI5MWNtTmxMbTl1Wlc1a1pXUWdQU0J5WlhOdmJIWmxPMXh5WEc1Y2NseHVJQ0FnSUNBZ1lYZGhhWFFnVUhKdmJXbHpaUzV5WVdObEtGdGhZbTl5ZEZCeWIyMXBjMlVzSUhCeWIyMXBjMlZkS1R0Y2NseHVJQ0FnSUgxY2NseHVJQ0I5SUdacGJtRnNiSGtnZTF4eVhHNGdJQ0FnY1hWbGRXVmtRblZtWm1WeVUyOTFjbU5sVG05a1pYTXVabTl5UldGamFDaHViMlJsSUQwK0lHNXZaR1V1YzNSdmNDZ3BLVHRjY2x4dUlDQjlYSEpjYm4xY2NseHVJbDE5IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gcGxheVdoaXRlTm9pc2U7XG5cbnZhciBfcmVnZW5lcmF0b3IgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvclwiKSk7XG5cbnZhciBfYXN5bmNUb0dlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3JcIikpO1xuXG52YXIgX2Jhc2U2NEFycmF5YnVmZmVyID0gcmVxdWlyZShcImJhc2U2NC1hcnJheWJ1ZmZlclwiKTtcblxudmFyIF9ldmVudEFzUHJvbWlzZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImV2ZW50LWFzLXByb21pc2VcIikpO1xuXG52YXIgRU1QVFlfTVAzX0JBU0U2NCA9ICdTVVF6QkFBQUFBQUFJMVJUVTBVQUFBQVBBQUFEVEdGMlpqVTNMalUyTGpFd01RQUFBQUFBQUFBQUFBQUEvL3RBd0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBU1c1bWJ3QUFBQThBQUFBQ0FBQUJoZ0M3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1N3U3dTd1Ny8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzhBQUFBQVRHRjJZelUzTGpZMEFBQUFBQUFBQUFBQUFBQUFKQVVIQUFBQUFBQUFBWVlvUkJxcEFBQUFBQUQvK3hERUFBUEFBQUdrQUFBQUlBQUFOSUFBQUFSTVFVMUZNeTQ1T1M0MVZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZmLzdFTVFwZzhBQUFhUUFBQUFnQUFBMGdBQUFCRlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWJztcblxuZnVuY3Rpb24gc3Vic2NyaWJlRXZlbnQodGFyZ2V0LCBuYW1lLCBoYW5kbGVyKSB7XG4gIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGhhbmRsZXIpO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBoYW5kbGVyKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXN5bmNEZWNvZGVBdWRpb0RhdGEoYXVkaW9Db250ZXh0LCBhcnJheUJ1ZmZlcikge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBwcm9taXNlID0gYXVkaW9Db250ZXh0LmRlY29kZUF1ZGlvRGF0YShhcnJheUJ1ZmZlciwgcmVzb2x2ZSwgcmVqZWN0KTsgLy8gTmV3ZXIgaW1wbGVtZW50YXRpb24gb2YgXCJkZWNvZGVBdWRpb0RhdGFcIiB3aWxsIHJldHVybiBhIFByb21pc2VcblxuICAgIHByb21pc2UgJiYgdHlwZW9mIHByb21pc2UudGhlbiA9PT0gJ2Z1bmN0aW9uJyAmJiByZXNvbHZlKHByb21pc2UpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcGxheURlY29kZWQoYXVkaW9Db250ZXh0LCBhdWRpb0J1ZmZlciwgc291cmNlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGF1ZGlvQ29udGV4dENsb3NlZCA9IG5ldyBfZXZlbnRBc1Byb21pc2UuZGVmYXVsdCgpO1xuICAgIHZhciBzb3VyY2VFbmRlZCA9IG5ldyBfZXZlbnRBc1Byb21pc2UuZGVmYXVsdCgpO1xuICAgIHZhciB1bnN1YnNjcmliZSA9IHN1YnNjcmliZUV2ZW50KGF1ZGlvQ29udGV4dCwgJ3N0YXRlY2hhbmdlJywgZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgIHZhciBzdGF0ZSA9IF9yZWYudGFyZ2V0LnN0YXRlO1xuICAgICAgcmV0dXJuIHN0YXRlID09PSAnY2xvc2VkJyAmJiBhdWRpb0NvbnRleHRDbG9zZWQuZXZlbnRMaXN0ZW5lcigpO1xuICAgIH0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIHNvdXJjZS5idWZmZXIgPSBhdWRpb0J1ZmZlcjsgLy8gXCJlbmRlZFwiIG1heSBub3QgZmlyZSBpZiB0aGUgdW5kZXJseWluZyBBdWRpb0NvbnRleHQgaXMgY2xvc2VkIHByZW1hdHVyZWx5XG5cbiAgICAgIHNvdXJjZS5vbmVuZGVkID0gc291cmNlRW5kZWQuZXZlbnRMaXN0ZW5lcjtcbiAgICAgIHNvdXJjZS5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICBzb3VyY2Uuc3RhcnQoMCk7XG4gICAgICBQcm9taXNlLnJhY2UoW2F1ZGlvQ29udGV4dENsb3NlZC51cGNvbWluZygpLCBzb3VyY2VFbmRlZC51cGNvbWluZygpXSkudGhlbihyZXNvbHZlKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJlamVjdChlcnIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHBsYXlXaGl0ZU5vaXNlKF94KSB7XG4gIHJldHVybiBfcGxheVdoaXRlTm9pc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuZnVuY3Rpb24gX3BsYXlXaGl0ZU5vaXNlKCkge1xuICBfcGxheVdoaXRlTm9pc2UgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKFxuICAvKiNfX1BVUkVfXyovXG4gIF9yZWdlbmVyYXRvci5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZShhdWRpb0NvbnRleHQpIHtcbiAgICB2YXIgc291cmNlLCBhdWRpb0J1ZmZlcjtcbiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHNvdXJjZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzO1xuICAgICAgICAgICAgcmV0dXJuIGFzeW5jRGVjb2RlQXVkaW9EYXRhKGF1ZGlvQ29udGV4dCwgKDAsIF9iYXNlNjRBcnJheWJ1ZmZlci5kZWNvZGUpKEVNUFRZX01QM19CQVNFNjQpKTtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGF1ZGlvQnVmZmVyID0gX2NvbnRleHQuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2O1xuICAgICAgICAgICAgcmV0dXJuIHBsYXlEZWNvZGVkKGF1ZGlvQ29udGV4dCwgYXVkaW9CdWZmZXIsIHNvdXJjZSk7XG5cbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIF9jYWxsZWUpO1xuICB9KSk7XG4gIHJldHVybiBfcGxheVdoaXRlTm9pc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklpNHVMM055WXk5d2JHRjVWMmhwZEdWT2IybHpaUzVxY3lKZExDSnVZVzFsY3lJNld5SkZUVkJVV1Y5TlVETmZRa0ZUUlRZMElpd2ljM1ZpYzJOeWFXSmxSWFpsYm5RaUxDSjBZWEpuWlhRaUxDSnVZVzFsSWl3aWFHRnVaR3hsY2lJc0ltRmtaRVYyWlc1MFRHbHpkR1Z1WlhJaUxDSnlaVzF2ZG1WRmRtVnVkRXhwYzNSbGJtVnlJaXdpWVhONWJtTkVaV052WkdWQmRXUnBiMFJoZEdFaUxDSmhkV1JwYjBOdmJuUmxlSFFpTENKaGNuSmhlVUoxWm1abGNpSXNJbEJ5YjIxcGMyVWlMQ0p5WlhOdmJIWmxJaXdpY21WcVpXTjBJaXdpY0hKdmJXbHpaU0lzSW1SbFkyOWtaVUYxWkdsdlJHRjBZU0lzSW5Sb1pXNGlMQ0p3YkdGNVJHVmpiMlJsWkNJc0ltRjFaR2x2UW5WbVptVnlJaXdpYzI5MWNtTmxJaXdpWVhWa2FXOURiMjUwWlhoMFEyeHZjMlZrSWl3aVJYWmxiblJCYzFCeWIyMXBjMlVpTENKemIzVnlZMlZGYm1SbFpDSXNJblZ1YzNWaWMyTnlhV0psSWl3aWMzUmhkR1VpTENKbGRtVnVkRXhwYzNSbGJtVnlJaXdpWW5WbVptVnlJaXdpYjI1bGJtUmxaQ0lzSW1OdmJtNWxZM1FpTENKa1pYTjBhVzVoZEdsdmJpSXNJbk4wWVhKMElpd2ljbUZqWlNJc0luVndZMjl0YVc1bklpd2laWEp5SWl3aWNHeGhlVmRvYVhSbFRtOXBjMlVpTENKamNtVmhkR1ZDZFdabVpYSlRiM1Z5WTJVaVhTd2liV0Z3Y0dsdVozTWlPaUk3T3pzN096czdPenM3T3pzN1FVRkJRVHM3UVVGRFFUczdRVUZGUVN4SlFVRk5RU3huUWtGQlowSXNSMEZEY0VJc2MydENRVVJHT3p0QlFVZEJMRk5CUVZORExHTkJRVlFzUTBGQmQwSkRMRTFCUVhoQ0xFVkJRV2REUXl4SlFVRm9ReXhGUVVGelEwTXNUMEZCZEVNc1JVRkJLME03UVVGRE4wTkdMRVZCUVVGQkxFMUJRVTBzUTBGQlEwY3NaMEpCUVZBc1EwRkJkMEpHTEVsQlFYaENMRVZCUVRoQ1F5eFBRVUU1UWp0QlFVVkJMRk5CUVU4N1FVRkJRU3hYUVVGTlJpeE5RVUZOTEVOQlFVTkpMRzFDUVVGUUxFTkJRVEpDU0N4SlFVRXpRaXhGUVVGcFEwTXNUMEZCYWtNc1EwRkJUanRCUVVGQkxFZEJRVkE3UVVGRFJEczdRVUZGUkN4VFFVRlRSeXh2UWtGQlZDeERRVUU0UWtNc1dVRkJPVUlzUlVGQk5FTkRMRmRCUVRWRExFVkJRWGxFTzBGQlEzWkVMRk5CUVU4c1NVRkJTVU1zVDBGQlNpeERRVUZaTEZWQlFVTkRMRTlCUVVRc1JVRkJWVU1zVFVGQlZpeEZRVUZ4UWp0QlFVTjBReXhSUVVGTlF5eFBRVUZQTEVkQlFVZE1MRmxCUVZrc1EwRkJRMDBzWlVGQllpeERRVUUyUWt3c1YwRkJOMElzUlVGQk1FTkZMRTlCUVRGRExFVkJRVzFFUXl4TlFVRnVSQ3hEUVVGb1FpeERRVVJ6UXl4RFFVZDBRenM3UVVGRFFVTXNTVUZCUVVFc1QwRkJUeXhKUVVGSkxFOUJRVTlCTEU5QlFVOHNRMEZCUTBVc1NVRkJaaXhMUVVGM1FpeFZRVUZ1UXl4SlFVRnBSRW9zVDBGQlR5eERRVUZEUlN4UFFVRkVMRU5CUVhoRU8wRkJRMFFzUjBGTVRTeERRVUZRTzBGQlRVUTdPMEZCUlVRc1UwRkJVMGNzVjBGQlZDeERRVUZ4UWxJc1dVRkJja0lzUlVGQmJVTlRMRmRCUVc1RExFVkJRV2RFUXl4TlFVRm9SQ3hGUVVGM1JEdEJRVU4wUkN4VFFVRlBMRWxCUVVsU0xFOUJRVW9zUTBGQldTeFZRVUZEUXl4UFFVRkVMRVZCUVZWRExFMUJRVllzUlVGQmNVSTdRVUZEZEVNc1VVRkJUVThzYTBKQlFXdENMRWRCUVVjc1NVRkJTVU1zZFVKQlFVb3NSVUZCTTBJN1FVRkRRU3hSUVVGTlF5eFhRVUZYTEVkQlFVY3NTVUZCU1VRc2RVSkJRVW9zUlVGQmNFSTdRVUZEUVN4UlFVRk5SU3hYUVVGWExFZEJRVWR5UWl4alFVRmpMRU5CUTJoRFR5eFpRVVJuUXl4RlFVVm9ReXhoUVVablF5eEZRVWRvUXp0QlFVRkJMRlZCUVdGbExFdEJRV0lzVVVGQlIzSkNMRTFCUVVnc1EwRkJZWEZDTEV0QlFXSTdRVUZCUVN4aFFVRXlRa0VzUzBGQlN5eExRVUZMTEZGQlFWWXNTVUZCYzBKS0xHdENRVUZyUWl4RFFVRkRTeXhoUVVGdVFpeEZRVUZxUkR0QlFVRkJMRXRCU0dkRExFTkJRV3hET3p0QlFVMUJMRkZCUVVrN1FVRkRSazRzVFVGQlFVRXNUVUZCVFN4RFFVRkRUeXhOUVVGUUxFZEJRV2RDVWl4WFFVRm9RaXhEUVVSRkxFTkJSVVk3TzBGQlEwRkRMRTFCUVVGQkxFMUJRVTBzUTBGQlExRXNUMEZCVUN4SFFVRnBRa3dzVjBGQlZ5eERRVUZEUnl4aFFVRTNRanRCUVVWQlRpeE5RVUZCUVN4TlFVRk5MRU5CUVVOVExFOUJRVkFzUTBGQlpXNUNMRmxCUVZrc1EwRkJRMjlDTEZkQlFUVkNPMEZCUTBGV0xFMUJRVUZCTEUxQlFVMHNRMEZCUTFjc1MwRkJVQ3hEUVVGaExFTkJRV0k3UVVGRlFXNUNMRTFCUVVGQkxFOUJRVThzUTBGQlEyOUNMRWxCUVZJc1EwRkJZU3hEUVVGRFdDeHJRa0ZCYTBJc1EwRkJRMWtzVVVGQmJrSXNSVUZCUkN4RlFVRm5RMVlzVjBGQlZ5eERRVUZEVlN4UlFVRmFMRVZCUVdoRExFTkJRV0lzUlVGQmMwVm9RaXhKUVVGMFJTeERRVUV5UlVvc1QwRkJNMFU3UVVGRFJDeExRVlJFTEVOQlUwVXNUMEZCVDNGQ0xFZEJRVkFzUlVGQldUdEJRVU5hY0VJc1RVRkJRVUVzVFVGQlRTeERRVUZEYjBJc1IwRkJSQ3hEUVVGT08wRkJRMFFzUzBGWVJDeFRRVmRWTzBGQlExSldMRTFCUVVGQkxGZEJRVmM3UVVGRFdqdEJRVU5HTEVkQmRrSk5MRU5CUVZBN1FVRjNRa1E3TzFOQlJUWkNWeXhqT3pzN096czdPelJDUVVGbUxHbENRVUU0UW5wQ0xGbEJRVGxDTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVOUVZTeFpRVUZCUVN4TlFVUlBMRWRCUTBWV0xGbEJRVmtzUTBGQlF6QkNMR3RDUVVGaUxFVkJSRVk3UVVGQlFUdEJRVUZCTEcxQ1FVVmhNMElzYjBKQlFXOUNMRU5CUVVORExGbEJRVVFzUlVGQlpTd3JRa0ZCVDFJc1owSkJRVkFzUTBGQlppeERRVVpxUXpzN1FVRkJRVHRCUVVWUWFVSXNXVUZCUVVFc1YwRkdUenRCUVVGQk8wRkJRVUVzYlVKQlNWQkVMRmRCUVZjc1EwRkJRMUlzV1VGQlJDeEZRVUZsVXl4WFFVRm1MRVZCUVRSQ1F5eE5RVUUxUWl4RFFVcEtPenRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMRWNpTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lKcGJYQnZjblFnZXlCa1pXTnZaR1VnZlNCbWNtOXRJQ2RpWVhObE5qUXRZWEp5WVhsaWRXWm1aWEluTzF4eVhHNXBiWEJ2Y25RZ1JYWmxiblJCYzFCeWIyMXBjMlVnWm5KdmJTQW5aWFpsYm5RdFlYTXRjSEp2YldselpTYzdYSEpjYmx4eVhHNWpiMjV6ZENCRlRWQlVXVjlOVUROZlFrRlRSVFkwSUQxY2NseHVJQ0FuVTFWUmVrSkJRVUZCUVVGQlNURlNWRlV3VlVGQlFVRlFRVUZCUkZSSFJqSmFhbFV6VEdwVk1reHFSWGROVVVGQlFVRkJRVUZCUVVGQlFVRkJMeTkwUVhkQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVk5YTlcxaWQwRkJRVUU0UVVGQlFVTkJRVUZDYUdkRE4zVTNkVGQxTjNVM2RUZDFOM1UzZFRkMU4zVTNkVGQxTjNVM2RUZDFOM1UzZFRkMU4zVTNkVGQxTjNVM2RUZDFOM1UzZFRkMU4zVTNkVGQxTjNVM2RUY3ZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTg0UVVGQlFVRlVSMFl5V1hwVk0weHFXVEJCUVVGQlFVRkJRVUZCUVVGQlFVRkJTa0ZWU0VGQlFVRkJRVUZCUVZsWmIxSkNjWEJCUVVGQlFVRkVMeXQ0UkVWQlFWQkJRVUZIYTBGQlFVRkpRVUZCVGtsQlFVRkJVazFSVlRGR1RYazBOVTlUTkRGV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXWmk4M1JVMVJjR2M0UVVGQllWRkJRVUZCWjBGQlFUQm5RVUZCUWtaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZsWldWbFpXVmxaV1ZpYzdYSEpjYmx4eVhHNW1kVzVqZEdsdmJpQnpkV0p6WTNKcFltVkZkbVZ1ZENoMFlYSm5aWFFzSUc1aGJXVXNJR2hoYm1Sc1pYSXBJSHRjY2x4dUlDQjBZWEpuWlhRdVlXUmtSWFpsYm5STWFYTjBaVzVsY2lodVlXMWxMQ0JvWVc1a2JHVnlLVHRjY2x4dVhISmNiaUFnY21WMGRYSnVJQ2dwSUQwK0lIUmhjbWRsZEM1eVpXMXZkbVZGZG1WdWRFeHBjM1JsYm1WeUtHNWhiV1VzSUdoaGJtUnNaWElwTzF4eVhHNTlYSEpjYmx4eVhHNW1kVzVqZEdsdmJpQmhjM2x1WTBSbFkyOWtaVUYxWkdsdlJHRjBZU2hoZFdScGIwTnZiblJsZUhRc0lHRnljbUY1UW5WbVptVnlLU0I3WEhKY2JpQWdjbVYwZFhKdUlHNWxkeUJRY205dGFYTmxLQ2h5WlhOdmJIWmxMQ0J5WldwbFkzUXBJRDArSUh0Y2NseHVJQ0FnSUdOdmJuTjBJSEJ5YjIxcGMyVWdQU0JoZFdScGIwTnZiblJsZUhRdVpHVmpiMlJsUVhWa2FXOUVZWFJoS0dGeWNtRjVRblZtWm1WeUxDQnlaWE52YkhabExDQnlaV3BsWTNRcE8xeHlYRzVjY2x4dUlDQWdJQzh2SUU1bGQyVnlJR2x0Y0d4bGJXVnVkR0YwYVc5dUlHOW1JRndpWkdWamIyUmxRWFZrYVc5RVlYUmhYQ0lnZDJsc2JDQnlaWFIxY200Z1lTQlFjbTl0YVhObFhISmNiaUFnSUNCd2NtOXRhWE5sSUNZbUlIUjVjR1Z2WmlCd2NtOXRhWE5sTG5Sb1pXNGdQVDA5SUNkbWRXNWpkR2x2YmljZ0ppWWdjbVZ6YjJ4MlpTaHdjbTl0YVhObEtUdGNjbHh1SUNCOUtUdGNjbHh1ZlZ4eVhHNWNjbHh1Wm5WdVkzUnBiMjRnY0d4aGVVUmxZMjlrWldRb1lYVmthVzlEYjI1MFpYaDBMQ0JoZFdScGIwSjFabVpsY2l3Z2MyOTFjbU5sS1NCN1hISmNiaUFnY21WMGRYSnVJRzVsZHlCUWNtOXRhWE5sS0NoeVpYTnZiSFpsTENCeVpXcGxZM1FwSUQwK0lIdGNjbHh1SUNBZ0lHTnZibk4wSUdGMVpHbHZRMjl1ZEdWNGRFTnNiM05sWkNBOUlHNWxkeUJGZG1WdWRFRnpVSEp2YldselpTZ3BPMXh5WEc0Z0lDQWdZMjl1YzNRZ2MyOTFjbU5sUlc1a1pXUWdQU0J1WlhjZ1JYWmxiblJCYzFCeWIyMXBjMlVvS1R0Y2NseHVJQ0FnSUdOdmJuTjBJSFZ1YzNWaWMyTnlhV0psSUQwZ2MzVmljMk55YVdKbFJYWmxiblFvWEhKY2JpQWdJQ0FnSUdGMVpHbHZRMjl1ZEdWNGRDeGNjbHh1SUNBZ0lDQWdKM04wWVhSbFkyaGhibWRsSnl4Y2NseHVJQ0FnSUNBZ0tIc2dkR0Z5WjJWME9pQjdJSE4wWVhSbElIMGdmU2tnUFQ0Z2MzUmhkR1VnUFQwOUlDZGpiRzl6WldRbklDWW1JR0YxWkdsdlEyOXVkR1Y0ZEVOc2IzTmxaQzVsZG1WdWRFeHBjM1JsYm1WeUtDbGNjbHh1SUNBZ0lDazdYSEpjYmx4eVhHNGdJQ0FnZEhKNUlIdGNjbHh1SUNBZ0lDQWdjMjkxY21ObExtSjFabVpsY2lBOUlHRjFaR2x2UW5WbVptVnlPMXh5WEc0Z0lDQWdJQ0F2THlCY0ltVnVaR1ZrWENJZ2JXRjVJRzV2ZENCbWFYSmxJR2xtSUhSb1pTQjFibVJsY214NWFXNW5JRUYxWkdsdlEyOXVkR1Y0ZENCcGN5QmpiRzl6WldRZ2NISmxiV0YwZFhKbGJIbGNjbHh1SUNBZ0lDQWdjMjkxY21ObExtOXVaVzVrWldRZ1BTQnpiM1Z5WTJWRmJtUmxaQzVsZG1WdWRFeHBjM1JsYm1WeU8xeHlYRzVjY2x4dUlDQWdJQ0FnYzI5MWNtTmxMbU52Ym01bFkzUW9ZWFZrYVc5RGIyNTBaWGgwTG1SbGMzUnBibUYwYVc5dUtUdGNjbHh1SUNBZ0lDQWdjMjkxY21ObExuTjBZWEowS0RBcE8xeHlYRzVjY2x4dUlDQWdJQ0FnVUhKdmJXbHpaUzV5WVdObEtGdGhkV1JwYjBOdmJuUmxlSFJEYkc5elpXUXVkWEJqYjIxcGJtY29LU3dnYzI5MWNtTmxSVzVrWldRdWRYQmpiMjFwYm1jb0tWMHBMblJvWlc0b2NtVnpiMngyWlNrN1hISmNiaUFnSUNCOUlHTmhkR05vSUNobGNuSXBJSHRjY2x4dUlDQWdJQ0FnY21WcVpXTjBLR1Z5Y2lrN1hISmNiaUFnSUNCOUlHWnBibUZzYkhrZ2UxeHlYRzRnSUNBZ0lDQjFibk4xWW5OamNtbGlaU2dwTzF4eVhHNGdJQ0FnZlZ4eVhHNGdJSDBwTzF4eVhHNTlYSEpjYmx4eVhHNWxlSEJ2Y25RZ1pHVm1ZWFZzZENCaGMzbHVZeUJtZFc1amRHbHZiaUJ3YkdGNVYyaHBkR1ZPYjJselpTaGhkV1JwYjBOdmJuUmxlSFFwSUh0Y2NseHVJQ0JqYjI1emRDQnpiM1Z5WTJVZ1BTQmhkV1JwYjBOdmJuUmxlSFF1WTNKbFlYUmxRblZtWm1WeVUyOTFjbU5sS0NrN1hISmNiaUFnWTI5dWMzUWdZWFZrYVc5Q2RXWm1aWElnUFNCaGQyRnBkQ0JoYzNsdVkwUmxZMjlrWlVGMVpHbHZSR0YwWVNoaGRXUnBiME52Ym5SbGVIUXNJR1JsWTI5a1pTaEZUVkJVV1Y5TlVETmZRa0ZUUlRZMEtTazdYSEpjYmx4eVhHNGdJR0YzWVdsMElIQnNZWGxFWldOdlpHVmtLR0YxWkdsdlEyOXVkR1Y0ZEN3Z1lYVmthVzlDZFdabVpYSXNJSE52ZFhKalpTazdYSEpjYm4xY2NseHVJbDE5IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSByZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlO1xuXG5mdW5jdGlvbiByZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlKGZuT3JWYWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIGZuT3JWYWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/IGZuT3JWYWx1ZSgpIDogZm5PclZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTl5WlhOdmJIWmxSblZ1WTNScGIyNVBjbEpsZEhWeWJsWmhiSFZsTG1weklsMHNJbTVoYldWeklqcGJJbkpsYzI5c2RtVkdkVzVqZEdsdmJrOXlVbVYwZFhKdVZtRnNkV1VpTENKbWJrOXlWbUZzZFdVaVhTd2liV0Z3Y0dsdVozTWlPaUk3T3pzN096czdRVUZCWlN4VFFVRlRRU3cwUWtGQlZDeERRVUZ6UTBNc1UwRkJkRU1zUlVGQmFVUTdRVUZET1VRc1UwRkJUeXhQUVVGUFFTeFRRVUZRTEV0QlFYRkNMRlZCUVhKQ0xFZEJRV3REUVN4VFFVRlRMRVZCUVRORExFZEJRV2RFUVN4VFFVRjJSRHRCUVVORUlpd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sc2laWGh3YjNKMElHUmxabUYxYkhRZ1puVnVZM1JwYjI0Z2NtVnpiMngyWlVaMWJtTjBhVzl1VDNKU1pYUjFjbTVXWVd4MVpTaG1iazl5Vm1Gc2RXVXBJSHRjY2x4dUlDQnlaWFIxY200Z2RIbHdaVzltSUdadVQzSldZV3gxWlNBOVBUMGdKMloxYm1OMGFXOXVKeUEvSUdadVQzSldZV3gxWlNncElEb2dabTVQY2xaaGJIVmxPMXh5WEc1OVhISmNiaUpkZlE9PSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gc2hhcmVPYnNlcnZhYmxlO1xuXG4vKiBnbG9iYWwgT2JzZXJ2YWJsZSAqL1xuZnVuY3Rpb24gc2hhcmVPYnNlcnZhYmxlKG9ic2VydmFibGUpIHtcbiAgdmFyIG9ic2VydmVycyA9IFtdO1xuICB2YXIgc3Vic2NyaXB0aW9uO1xuICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgaWYgKCFzdWJzY3JpcHRpb24pIHtcbiAgICAgIHN1YnNjcmlwdGlvbiA9IG9ic2VydmFibGUuc3Vic2NyaWJlKHtcbiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgICAgIG9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihlcnIpIHtcbiAgICAgICAgICBvYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KHZhbHVlKSB7XG4gICAgICAgICAgb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgb2JzZXJ2ZXJzID0gb2JzZXJ2ZXJzLmZpbHRlcihmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gbyAhPT0gb2JzZXJ2ZXI7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFvYnNlcnZlcnMubGVuZ3RoKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTl6YUdGeVpVOWljMlZ5ZG1GaWJHVXVhbk1pWFN3aWJtRnRaWE1pT2xzaWMyaGhjbVZQWW5ObGNuWmhZbXhsSWl3aWIySnpaWEoyWVdKc1pTSXNJbTlpYzJWeWRtVnljeUlzSW5OMVluTmpjbWx3ZEdsdmJpSXNJazlpYzJWeWRtRmliR1VpTENKdlluTmxjblpsY2lJc0luTjFZbk5qY21saVpTSXNJbU52YlhCc1pYUmxJaXdpWm05eVJXRmphQ0lzSW1WeWNtOXlJaXdpWlhKeUlpd2libVY0ZENJc0luWmhiSFZsSWl3aWNIVnphQ0lzSW1acGJIUmxjaUlzSW04aUxDSnNaVzVuZEdnaUxDSjFibk4xWW5OamNtbGlaU0pkTENKdFlYQndhVzVuY3lJNklqczdPenM3T3p0QlFVRkJPMEZCUldVc1UwRkJVMEVzWlVGQlZDeERRVUY1UWtNc1ZVRkJla0lzUlVGQmNVTTdRVUZEYkVRc1RVRkJTVU1zVTBGQlV5eEhRVUZITEVWQlFXaENPMEZCUTBFc1RVRkJTVU1zV1VGQlNqdEJRVVZCTEZOQlFVOHNTVUZCU1VNc1ZVRkJTaXhEUVVGbExGVkJRVUZETEZGQlFWRXNSVUZCU1R0QlFVTm9ReXhSUVVGSkxFTkJRVU5HTEZsQlFVd3NSVUZCYlVJN1FVRkRha0pCTEUxQlFVRkJMRmxCUVZrc1IwRkJSMFlzVlVGQlZTeERRVUZEU3l4VFFVRllMRU5CUVhGQ08wRkJRMnhEUXl4UlFVRkJRU3hSUVVSclF5eHpRa0ZEZGtJN1FVRkRWRXdzVlVGQlFVRXNVMEZCVXl4RFFVRkRUU3hQUVVGV0xFTkJRV3RDTEZWQlFVRklMRkZCUVZFN1FVRkJRU3h0UWtGQlNVRXNVVUZCVVN4RFFVRkRSU3hSUVVGVUxFVkJRVW83UVVGQlFTeFhRVUV4UWp0QlFVTkVMRk5CU0dsRE8wRkJTMnhEUlN4UlFVRkJRU3hMUVV4clF5eHBRa0ZMTlVKRExFZEJURFJDTEVWQlMzWkNPMEZCUTFSU0xGVkJRVUZCTEZOQlFWTXNRMEZCUTAwc1QwRkJWaXhEUVVGclFpeFZRVUZCU0N4UlFVRlJPMEZCUVVFc2JVSkJRVWxCTEZGQlFWRXNRMEZCUTBrc1MwRkJWQ3hEUVVGbFF5eEhRVUZtTEVOQlFVbzdRVUZCUVN4WFFVRXhRanRCUVVORUxGTkJVR2xETzBGQlUyeERReXhSUVVGQlFTeEpRVlJyUXl4blFrRlROMEpETEV0QlZEWkNMRVZCVTNSQ08wRkJRMVpXTEZWQlFVRkJMRk5CUVZNc1EwRkJRMDBzVDBGQlZpeERRVUZyUWl4VlFVRkJTQ3hSUVVGUk8wRkJRVUVzYlVKQlFVbEJMRkZCUVZFc1EwRkJRMDBzU1VGQlZDeERRVUZqUXl4TFFVRmtMRU5CUVVvN1FVRkJRU3hYUVVFeFFqdEJRVU5FTzBGQldHbERMRTlCUVhKQ0xFTkJRV1k3UVVGaFJEczdRVUZGUkZZc1NVRkJRVUVzVTBGQlV5eERRVUZEVnl4SlFVRldMRU5CUVdWU0xGRkJRV1k3UVVGRlFTeFhRVUZQTEZsQlFVMDdRVUZEV0Vnc1RVRkJRVUVzVTBGQlV5eEhRVUZIUVN4VFFVRlRMRU5CUVVOWkxFMUJRVllzUTBGQmFVSXNWVUZCUVVNc1EwRkJRenRCUVVGQkxHVkJRVWxCTEVOQlFVTXNTMEZCUzFZc1VVRkJWanRCUVVGQkxFOUJRV3hDTEVOQlFWbzdPMEZCUlVFc1ZVRkJTU3hEUVVGRFNDeFRRVUZUTEVOQlFVTmpMRTFCUVdZc1JVRkJkVUk3UVVGRGNrSmlMRkZCUVVGQkxGbEJRVmtzUTBGQlEyTXNWMEZCWWp0QlFVTkJaQ3hSUVVGQlFTeFpRVUZaTEVkQlFVY3NTVUZCWmp0QlFVTkVPMEZCUTBZc1MwRlFSRHRCUVZGRUxFZEJNMEpOTEVOQlFWQTdRVUUwUWtRaUxDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SXZLaUJuYkc5aVlXd2dUMkp6WlhKMllXSnNaU0FxTDF4eVhHNWNjbHh1Wlhod2IzSjBJR1JsWm1GMWJIUWdablZ1WTNScGIyNGdjMmhoY21WUFluTmxjblpoWW14bEtHOWljMlZ5ZG1GaWJHVXBJSHRjY2x4dUlDQnNaWFFnYjJKelpYSjJaWEp6SUQwZ1cxMDdYSEpjYmlBZ2JHVjBJSE4xWW5OamNtbHdkR2x2Ymp0Y2NseHVYSEpjYmlBZ2NtVjBkWEp1SUc1bGR5QlBZbk5sY25aaFlteGxLRzlpYzJWeWRtVnlJRDArSUh0Y2NseHVJQ0FnSUdsbUlDZ2hjM1ZpYzJOeWFYQjBhVzl1S1NCN1hISmNiaUFnSUNBZ0lITjFZbk5qY21sd2RHbHZiaUE5SUc5aWMyVnlkbUZpYkdVdWMzVmljMk55YVdKbEtIdGNjbHh1SUNBZ0lDQWdJQ0JqYjIxd2JHVjBaU2dwSUh0Y2NseHVJQ0FnSUNBZ0lDQWdJRzlpYzJWeWRtVnljeTVtYjNKRllXTm9LRzlpYzJWeWRtVnlJRDArSUc5aWMyVnlkbVZ5TG1OdmJYQnNaWFJsS0NrcE8xeHlYRzRnSUNBZ0lDQWdJSDBzWEhKY2JseHlYRzRnSUNBZ0lDQWdJR1Z5Y205eUtHVnljaWtnZTF4eVhHNGdJQ0FnSUNBZ0lDQWdiMkp6WlhKMlpYSnpMbVp2Y2tWaFkyZ29iMkp6WlhKMlpYSWdQVDRnYjJKelpYSjJaWEl1WlhKeWIzSW9aWEp5S1NrN1hISmNiaUFnSUNBZ0lDQWdmU3hjY2x4dVhISmNiaUFnSUNBZ0lDQWdibVY0ZENoMllXeDFaU2tnZTF4eVhHNGdJQ0FnSUNBZ0lDQWdiMkp6WlhKMlpYSnpMbVp2Y2tWaFkyZ29iMkp6WlhKMlpYSWdQVDRnYjJKelpYSjJaWEl1Ym1WNGRDaDJZV3gxWlNrcE8xeHlYRzRnSUNBZ0lDQWdJSDFjY2x4dUlDQWdJQ0FnZlNrN1hISmNiaUFnSUNCOVhISmNibHh5WEc0Z0lDQWdiMkp6WlhKMlpYSnpMbkIxYzJnb2IySnpaWEoyWlhJcE8xeHlYRzVjY2x4dUlDQWdJSEpsZEhWeWJpQW9LU0E5UGlCN1hISmNiaUFnSUNBZ0lHOWljMlZ5ZG1WeWN5QTlJRzlpYzJWeWRtVnljeTVtYVd4MFpYSW9ieUE5UGlCdklDRTlQU0J2WW5ObGNuWmxjaWs3WEhKY2JseHlYRzRnSUNBZ0lDQnBaaUFvSVc5aWMyVnlkbVZ5Y3k1c1pXNW5kR2dwSUh0Y2NseHVJQ0FnSUNBZ0lDQnpkV0p6WTNKcGNIUnBiMjR1ZFc1emRXSnpZM0pwWW1Vb0tUdGNjbHh1SUNBZ0lDQWdJQ0J6ZFdKelkzSnBjSFJwYjI0Z1BTQnVkV3hzTzF4eVhHNGdJQ0FnSUNCOVhISmNiaUFnSUNCOU8xeHlYRzRnSUgwcE8xeHlYRzU5WEhKY2JpSmRmUT09IiwiZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFycjJbaV0gPSBhcnJbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycjI7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlXaXRob3V0SG9sZXM7IiwiZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7XG4gIGlmIChzZWxmID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cblxuICByZXR1cm4gc2VsZjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkOyIsImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcblxuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hc3luY1RvR2VuZXJhdG9yOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NsYXNzQ2FsbENoZWNrOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY3JlYXRlQ2xhc3M7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2RlZmluZVByb3BlcnR5OyIsImZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuICB9O1xuICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9nZXRQcm90b3R5cGVPZjsiLCJ2YXIgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKFwiLi9zZXRQcm90b3R5cGVPZlwiKTtcblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBpZiAoc3VwZXJDbGFzcykgc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pbmhlcml0czsiLCJmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgIFwiZGVmYXVsdFwiOiBvYmpcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0OyIsImZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHtcbiAgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsO1xuICB2YXIgY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuXG4gIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSA9IGZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHtcbiAgICByZXR1cm4gY2FjaGU7XG4gIH07XG5cbiAgcmV0dXJuIGNhY2hlO1xufVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHtcbiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTtcblxuICBpZiAoY2FjaGUgJiYgY2FjaGUuaGFzKG9iaikpIHtcbiAgICByZXR1cm4gY2FjaGUuZ2V0KG9iaik7XG4gIH1cblxuICB2YXIgbmV3T2JqID0ge307XG5cbiAgaWYgKG9iaiAhPSBudWxsKSB7XG4gICAgdmFyIGhhc1Byb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgdmFyIGRlc2MgPSBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IG51bGw7XG5cbiAgICAgICAgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkge1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5ld09ialtcImRlZmF1bHRcIl0gPSBvYmo7XG5cbiAgaWYgKGNhY2hlKSB7XG4gICAgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTtcbiAgfVxuXG4gIHJldHVybiBuZXdPYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQ7IiwiZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gXCJbb2JqZWN0IEFyZ3VtZW50c11cIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2l0ZXJhYmxlVG9BcnJheTsiLCJmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfbm9uSXRlcmFibGVTcHJlYWQ7IiwidmFyIG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgPSByZXF1aXJlKFwiLi9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlXCIpO1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7XG4gIHZhciBrZXksIGk7XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldO1xuICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzOyIsImZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlOyIsInZhciBfdHlwZW9mID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvdHlwZW9mXCIpO1xuXG52YXIgYXNzZXJ0VGhpc0luaXRpYWxpemVkID0gcmVxdWlyZShcIi4vYXNzZXJ0VGhpc0luaXRpYWxpemVkXCIpO1xuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIGNhbGw7XG4gIH1cblxuICByZXR1cm4gYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuOyIsImZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gICAgby5fX3Byb3RvX18gPSBwO1xuICAgIHJldHVybiBvO1xuICB9O1xuXG4gIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3NldFByb3RvdHlwZU9mOyIsInZhciBhcnJheVdpdGhvdXRIb2xlcyA9IHJlcXVpcmUoXCIuL2FycmF5V2l0aG91dEhvbGVzXCIpO1xuXG52YXIgaXRlcmFibGVUb0FycmF5ID0gcmVxdWlyZShcIi4vaXRlcmFibGVUb0FycmF5XCIpO1xuXG52YXIgbm9uSXRlcmFibGVTcHJlYWQgPSByZXF1aXJlKFwiLi9ub25JdGVyYWJsZVNwcmVhZFwiKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikge1xuICByZXR1cm4gYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBub25JdGVyYWJsZVNwcmVhZCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF90b0NvbnN1bWFibGVBcnJheTsiLCJmdW5jdGlvbiBfdHlwZW9mMihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZjIob2JqKTsgfVxuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09IFwic3ltYm9sXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IF90eXBlb2YyKG9iaik7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfdHlwZW9mKG9iaik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3R5cGVvZjsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWdlbmVyYXRvci1ydW50aW1lXCIpO1xuIiwiLypnbG9iYWxzIHNlbGYsIHdpbmRvdyAqL1xuXCJ1c2Ugc3RyaWN0XCJcblxuLyplc2xpbnQtZGlzYWJsZSBAbXlzdGljYXRlYS9wcmV0dGllciAqL1xuY29uc3QgeyBBYm9ydENvbnRyb2xsZXIsIEFib3J0U2lnbmFsIH0gPVxuICAgIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6XG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6XG4gICAgLyogb3RoZXJ3aXNlICovIHVuZGVmaW5lZFxuLyplc2xpbnQtZW5hYmxlIEBteXN0aWNhdGVhL3ByZXR0aWVyICovXG5cbm1vZHVsZS5leHBvcnRzID0gQWJvcnRDb250cm9sbGVyXG5tb2R1bGUuZXhwb3J0cy5BYm9ydFNpZ25hbCA9IEFib3J0U2lnbmFsXG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gQWJvcnRDb250cm9sbGVyXG4iLCIvKlxuICogYmFzZTY0LWFycmF5YnVmZmVyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbmlrbGFzdmgvYmFzZTY0LWFycmF5YnVmZmVyXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEyIE5pa2xhcyB2b24gSGVydHplblxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICovXG4oZnVuY3Rpb24oKXtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIGNoYXJzID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7XG5cbiAgLy8gVXNlIGEgbG9va3VwIHRhYmxlIHRvIGZpbmQgdGhlIGluZGV4LlxuICB2YXIgbG9va3VwID0gbmV3IFVpbnQ4QXJyYXkoMjU2KTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykge1xuICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7XG4gIH1cblxuICBleHBvcnRzLmVuY29kZSA9IGZ1bmN0aW9uKGFycmF5YnVmZmVyKSB7XG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLFxuICAgIGksIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gXCJcIjtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrPTMpIHtcbiAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpXSA+PiAyXTtcbiAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTtcbiAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2kgKyAxXSAmIDE1KSA8PCAyKSB8IChieXRlc1tpICsgMl0gPj4gNildO1xuICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kgKyAyXSAmIDYzXTtcbiAgICB9XG5cbiAgICBpZiAoKGxlbiAlIDMpID09PSAyKSB7XG4gICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAxKSArIFwiPVwiO1xuICAgIH0gZWxzZSBpZiAobGVuICUgMyA9PT0gMSkge1xuICAgICAgYmFzZTY0ID0gYmFzZTY0LnN1YnN0cmluZygwLCBiYXNlNjQubGVuZ3RoIC0gMikgKyBcIj09XCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJhc2U2NDtcbiAgfTtcblxuICBleHBvcnRzLmRlY29kZSA9ICBmdW5jdGlvbihiYXNlNjQpIHtcbiAgICB2YXIgYnVmZmVyTGVuZ3RoID0gYmFzZTY0Lmxlbmd0aCAqIDAuNzUsXG4gICAgbGVuID0gYmFzZTY0Lmxlbmd0aCwgaSwgcCA9IDAsXG4gICAgZW5jb2RlZDEsIGVuY29kZWQyLCBlbmNvZGVkMywgZW5jb2RlZDQ7XG5cbiAgICBpZiAoYmFzZTY0W2Jhc2U2NC5sZW5ndGggLSAxXSA9PT0gXCI9XCIpIHtcbiAgICAgIGJ1ZmZlckxlbmd0aC0tO1xuICAgICAgaWYgKGJhc2U2NFtiYXNlNjQubGVuZ3RoIC0gMl0gPT09IFwiPVwiKSB7XG4gICAgICAgIGJ1ZmZlckxlbmd0aC0tO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBhcnJheWJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJMZW5ndGgpLFxuICAgIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSs9NCkge1xuICAgICAgZW5jb2RlZDEgPSBsb29rdXBbYmFzZTY0LmNoYXJDb2RlQXQoaSldO1xuICAgICAgZW5jb2RlZDIgPSBsb29rdXBbYmFzZTY0LmNoYXJDb2RlQXQoaSsxKV07XG4gICAgICBlbmNvZGVkMyA9IGxvb2t1cFtiYXNlNjQuY2hhckNvZGVBdChpKzIpXTtcbiAgICAgIGVuY29kZWQ0ID0gbG9va3VwW2Jhc2U2NC5jaGFyQ29kZUF0KGkrMyldO1xuXG4gICAgICBieXRlc1twKytdID0gKGVuY29kZWQxIDw8IDIpIHwgKGVuY29kZWQyID4+IDQpO1xuICAgICAgYnl0ZXNbcCsrXSA9ICgoZW5jb2RlZDIgJiAxNSkgPDwgNCkgfCAoZW5jb2RlZDMgPj4gMik7XG4gICAgICBieXRlc1twKytdID0gKChlbmNvZGVkMyAmIDMpIDw8IDYpIHwgKGVuY29kZWQ0ICYgNjMpO1xuICAgIH1cblxuICAgIHJldHVybiBhcnJheWJ1ZmZlcjtcbiAgfTtcbn0pKCk7XG4iLCIndXNlIHN0cmljdCdcblxuZXhwb3J0cy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuZXhwb3J0cy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5XG5leHBvcnRzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5XG5cbnZhciBsb29rdXAgPSBbXVxudmFyIHJldkxvb2t1cCA9IFtdXG52YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5XG5cbnZhciBjb2RlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nXG5mb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICBsb29rdXBbaV0gPSBjb2RlW2ldXG4gIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaVxufVxuXG4vLyBTdXBwb3J0IGRlY29kaW5nIFVSTC1zYWZlIGJhc2U2NCBzdHJpbmdzLCBhcyBOb2RlLmpzIGRvZXMuXG4vLyBTZWU6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jhc2U2NCNVUkxfYXBwbGljYXRpb25zXG5yZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjJcbnJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2M1xuXG5mdW5jdGlvbiBnZXRMZW5zIChiNjQpIHtcbiAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcblxuICBpZiAobGVuICUgNCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuICB9XG5cbiAgLy8gVHJpbSBvZmYgZXh0cmEgYnl0ZXMgYWZ0ZXIgcGxhY2Vob2xkZXIgYnl0ZXMgYXJlIGZvdW5kXG4gIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2JlYXRnYW1taXQvYmFzZTY0LWpzL2lzc3Vlcy80MlxuICB2YXIgdmFsaWRMZW4gPSBiNjQuaW5kZXhPZignPScpXG4gIGlmICh2YWxpZExlbiA9PT0gLTEpIHZhbGlkTGVuID0gbGVuXG5cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IHZhbGlkTGVuID09PSBsZW5cbiAgICA/IDBcbiAgICA6IDQgLSAodmFsaWRMZW4gJSA0KVxuXG4gIHJldHVybiBbdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbl1cbn1cblxuLy8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChiNjQpIHtcbiAgdmFyIGxlbnMgPSBnZXRMZW5zKGI2NClcbiAgdmFyIHZhbGlkTGVuID0gbGVuc1swXVxuICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gbGVuc1sxXVxuICByZXR1cm4gKCh2YWxpZExlbiArIHBsYWNlSG9sZGVyc0xlbikgKiAzIC8gNCkgLSBwbGFjZUhvbGRlcnNMZW5cbn1cblxuZnVuY3Rpb24gX2J5dGVMZW5ndGggKGI2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikge1xuICByZXR1cm4gKCh2YWxpZExlbiArIHBsYWNlSG9sZGVyc0xlbikgKiAzIC8gNCkgLSBwbGFjZUhvbGRlcnNMZW5cbn1cblxuZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkge1xuICB2YXIgdG1wXG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cblxuICB2YXIgYXJyID0gbmV3IEFycihfYnl0ZUxlbmd0aChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pKVxuXG4gIHZhciBjdXJCeXRlID0gMFxuXG4gIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcbiAgdmFyIGxlbiA9IHBsYWNlSG9sZGVyc0xlbiA+IDBcbiAgICA/IHZhbGlkTGVuIC0gNFxuICAgIDogdmFsaWRMZW5cblxuICB2YXIgaVxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTgpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCAxMikgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHxcbiAgICAgIHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMyldXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDE2KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAyKSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA+PiA0KVxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMSkge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA+PiAyKVxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcbiAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiAweDNGXSArXG4gICAgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtID4+IDYgJiAweDNGXSArXG4gICAgbG9va3VwW251bSAmIDB4M0ZdXG59XG5cbmZ1bmN0aW9uIGVuY29kZUNodW5rICh1aW50OCwgc3RhcnQsIGVuZCkge1xuICB2YXIgdG1wXG4gIHZhciBvdXRwdXQgPSBbXVxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMykge1xuICAgIHRtcCA9XG4gICAgICAoKHVpbnQ4W2ldIDw8IDE2KSAmIDB4RkYwMDAwKSArXG4gICAgICAoKHVpbnQ4W2kgKyAxXSA8PCA4KSAmIDB4RkYwMCkgK1xuICAgICAgKHVpbnQ4W2kgKyAyXSAmIDB4RkYpXG4gICAgb3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0KHRtcCkpXG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkge1xuICB2YXIgdG1wXG4gIHZhciBsZW4gPSB1aW50OC5sZW5ndGhcbiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG4gIHZhciBwYXJ0cyA9IFtdXG4gIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzIC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgM1xuXG4gIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcbiAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkge1xuICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsoXG4gICAgICB1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpXG4gICAgKSlcbiAgfVxuXG4gIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcbiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcbiAgICB0bXAgPSB1aW50OFtsZW4gLSAxXVxuICAgIHBhcnRzLnB1c2goXG4gICAgICBsb29rdXBbdG1wID4+IDJdICtcbiAgICAgIGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl0gK1xuICAgICAgJz09J1xuICAgIClcbiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7XG4gICAgdG1wID0gKHVpbnQ4W2xlbiAtIDJdIDw8IDgpICsgdWludDhbbGVuIC0gMV1cbiAgICBwYXJ0cy5wdXNoKFxuICAgICAgbG9va3VwW3RtcCA+PiAxMF0gK1xuICAgICAgbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXSArXG4gICAgICBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdICtcbiAgICAgICc9J1xuICAgIClcbiAgfVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKCcnKVxufVxuIiwiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JylcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbi8qXG4gKiBFeHBvcnQga01heExlbmd0aCBhZnRlciB0eXBlZCBhcnJheSBzdXBwb3J0IGlzIGRldGVybWluZWQuXG4gKi9cbmV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxuXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgYXJyLl9fcHJvdG9fXyA9IHtfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH19XG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCcpXG4gIH1cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgaWYgKHRoYXQgPT09IG51bGwpIHtcbiAgICAgIHRoYXQgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgICB9XG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZydcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZylcbiAgfVxuICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbi8vIFRPRE86IExlZ2FjeSwgbm90IG5lZWRlZCBhbnltb3JlLiBSZW1vdmUgaW4gbmV4dCBtYWpvciB2ZXJzaW9uLlxuQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xuICBhcnIuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIGZyb20gKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG4gIH1cblxuICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcbn1cblxuLyoqXG4gKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvclxuICogaWYgdmFsdWUgaXMgYSBudW1iZXIuXG4gKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG4gKiBCdWZmZXIuZnJvbShhcnJheSlcbiAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcilcbiAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuICoqL1xuQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgJiZcbiAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LlxuICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG4gICAgICA/IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgICAgOiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsKVxuICB9XG4gIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG4gKiovXG5CdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKVxufVxuXG5mdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJylcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcblxuICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKVxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXJcblxuICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnb2Zmc2V0XFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdsZW5ndGhcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSlcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpXG4gIH0gZWxzZSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IGFycmF5XG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHtcbiAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcbiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcblxuICAgIGlmICh0aGF0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoYXRcbiAgICB9XG5cbiAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXG4gICAgcmV0dXJuIHRoYXRcbiAgfVxuXG4gIGlmIChvYmopIHtcbiAgICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNuYW4ob2JqLmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCAwKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqKVxuICAgIH1cblxuICAgIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmouZGF0YSkpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKVxuICAgIH1cbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKVxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aCgpYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7XG4gIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuICAgIGxlbmd0aCA9IDBcbiAgfVxuICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXVxuICAgICAgeSA9IGJbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGJ1ZiA9IGxpc3RbaV1cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICAgIH1cbiAgICBidWYuY29weShidWZmZXIsIHBvcylcbiAgICBwb3MgKz0gYnVmLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZmZXJcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuICB9XG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG4gIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXG5cbiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG4gIC8vIHRvIHRoZWlyIHVwcGVyL2xvd2VyIGJvdW5kcyBpZiB0aGUgdmFsdWUgcGFzc2VkIGlzIG91dCBvZiByYW5nZS5cbiAgLy8gdW5kZWZpbmVkIGlzIGhhbmRsZWQgc3BlY2lhbGx5IGFzIHBlciBFQ01BLTI2MiA2dGggRWRpdGlvbixcbiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXG4gIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuXG4gIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuICBlbmQgPj4+PSAwXG4gIHN0YXJ0ID4+Pj0gMFxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG4vLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdFxuLy8gQnVmZmVyIGluc3RhbmNlcy5cbkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXG5mdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgMiAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDEpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG4gIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG4gIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNTdGFydCA9IDBcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuICAgIHJldHVybiAtMVxuICB9XG4gIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgc3RhcnQgPj4+PSAwXG4gIGVuZCA+Pj49IDBcbiAgdGhpc1N0YXJ0ID4+Pj0gMFxuICB0aGlzRW5kID4+Pj0gMFxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cbiAgdmFyIHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0XG4gIHZhciB5ID0gZW5kIC0gc3RhcnRcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG5cbiAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpXG4gIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkge1xuICAgICAgeCA9IHRoaXNDb3B5W2ldXG4gICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbi8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcbi8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG4vL1xuLy8gQXJndW1lbnRzOlxuLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG4vLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcbi8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxuICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcbiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldFxuICAgIGJ5dGVPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcbiAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICB9XG4gIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAgLy8gQ29lcmNlIHRvIE51bWJlci5cbiAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG4gICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgXCJmb29cIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyXG4gICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpXG4gIH1cblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7XG4gICAgaWYgKGRpcikgcmV0dXJuIC0xXG4gICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwXG4gICAgZWxzZSByZXR1cm4gLTFcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSB2YWxcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZylcbiAgfVxuXG4gIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV1cbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiZcbiAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmIChkaXIpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgdmFyIGluZGV4U2l6ZSA9IDFcbiAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcbiAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblxuICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcbiAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMlxuICAgICAgYXJyTGVuZ3RoIC89IDJcbiAgICAgIHZhbExlbmd0aCAvPSAyXG4gICAgICBieXRlT2Zmc2V0IC89IDJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGRpcikge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBmb3VuZCA9IHRydWVcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggfCAwXG4gICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xM1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCdcbiAgICApXG4gIH1cblxuICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpXG4gICAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyArK2kpIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG4gICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDhcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcbiAgcmV0dXJuIG9mZnNldCArIDhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcbiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cbiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICB9XG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcbiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuICB9XG5cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG4gIHZhciBpXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG4gICAgICB0YXJnZXQsXG4gICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksXG4gICAgICB0YXJnZXRTdGFydFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gVXNhZ2U6XG4vLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7XG4gIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6XG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IHN0YXJ0XG4gICAgICBzdGFydCA9IDBcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBlbmRcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfVxuICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG4gICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoY29kZSA8IDI1Nikge1xuICAgICAgICB2YWwgPSBjb2RlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMjU1XG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghdmFsKSB2YWwgPSAwXG5cbiAgdmFyIGlcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuICAgICAgPyB2YWxcbiAgICAgIDogdXRmOFRvQnl0ZXMobmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBpc25hbiAodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuIiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lc25leHQub2JzZXJ2YWJsZScpO1xucmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lc25leHQuc3ltYm9sLm9ic2VydmFibGUnKTtcbnJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZycpO1xucmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3InKTtcbnJlcXVpcmUoJy4uLy4uL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvcicpO1xudmFyIHBhdGggPSByZXF1aXJlKCcuLi8uLi9pbnRlcm5hbHMvcGF0aCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBhdGguT2JzZXJ2YWJsZTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmICh0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IFR5cGVFcnJvcihTdHJpbmcoaXQpICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICB9IHJldHVybiBpdDtcbn07XG4iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtb2JqZWN0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmICghaXNPYmplY3QoaXQpICYmIGl0ICE9PSBudWxsKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3Qgc2V0IFwiICsgU3RyaW5nKGl0KSArICcgYXMgYSBwcm90b3R5cGUnKTtcbiAgfSByZXR1cm4gaXQ7XG59O1xuIiwidmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xudmFyIGNyZWF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtY3JlYXRlJyk7XG52YXIgaGlkZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oaWRlJyk7XG5cbnZhciBVTlNDT1BBQkxFUyA9IHdlbGxLbm93blN5bWJvbCgndW5zY29wYWJsZXMnKTtcbnZhciBBcnJheVByb3RvdHlwZSA9IEFycmF5LnByb3RvdHlwZTtcblxuLy8gQXJyYXkucHJvdG90eXBlW0BAdW5zY29wYWJsZXNdXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUtQEB1bnNjb3BhYmxlc1xuaWYgKEFycmF5UHJvdG90eXBlW1VOU0NPUEFCTEVTXSA9PSB1bmRlZmluZWQpIHtcbiAgaGlkZShBcnJheVByb3RvdHlwZSwgVU5TQ09QQUJMRVMsIGNyZWF0ZShudWxsKSk7XG59XG5cbi8vIGFkZCBhIGtleSB0byBBcnJheS5wcm90b3R5cGVbQEB1bnNjb3BhYmxlc11cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSkge1xuICBBcnJheVByb3RvdHlwZVtVTlNDT1BBQkxFU11ba2V5XSA9IHRydWU7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIENvbnN0cnVjdG9yLCBuYW1lKSB7XG4gIGlmICghKGl0IGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdJbmNvcnJlY3QgJyArIChuYW1lID8gbmFtZSArICcgJyA6ICcnKSArICdpbnZvY2F0aW9uJyk7XG4gIH0gcmV0dXJuIGl0O1xufTtcbiIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgaWYgKCFpc09iamVjdChpdCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGl0KSArICcgaXMgbm90IGFuIG9iamVjdCcpO1xuICB9IHJldHVybiBpdDtcbn07XG4iLCJ2YXIgdG9JbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0Jyk7XG52YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tbGVuZ3RoJyk7XG52YXIgdG9BYnNvbHV0ZUluZGV4ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWFic29sdXRlLWluZGV4Jyk7XG5cbi8vIGBBcnJheS5wcm90b3R5cGUueyBpbmRleE9mLCBpbmNsdWRlcyB9YCBtZXRob2RzIGltcGxlbWVudGF0aW9uXG52YXIgY3JlYXRlTWV0aG9kID0gZnVuY3Rpb24gKElTX0lOQ0xVREVTKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoJHRoaXMsIGVsLCBmcm9tSW5kZXgpIHtcbiAgICB2YXIgTyA9IHRvSW5kZXhlZE9iamVjdCgkdGhpcyk7XG4gICAgdmFyIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKTtcbiAgICB2YXIgaW5kZXggPSB0b0Fic29sdXRlSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpO1xuICAgIHZhciB2YWx1ZTtcbiAgICAvLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgIGlmIChJU19JTkNMVURFUyAmJiBlbCAhPSBlbCkgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSB7XG4gICAgICB2YWx1ZSA9IE9baW5kZXgrK107XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgICBpZiAodmFsdWUgIT0gdmFsdWUpIHJldHVybiB0cnVlO1xuICAgIC8vIEFycmF5I2luZGV4T2YgaWdub3JlcyBob2xlcywgQXJyYXkjaW5jbHVkZXMgLSBub3RcbiAgICB9IGVsc2UgZm9yICg7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIHtcbiAgICAgIGlmICgoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTykgJiYgT1tpbmRleF0gPT09IGVsKSByZXR1cm4gSVNfSU5DTFVERVMgfHwgaW5kZXggfHwgMDtcbiAgICB9IHJldHVybiAhSVNfSU5DTFVERVMgJiYgLTE7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5pbmNsdWRlc2AgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5pbmNsdWRlc1xuICBpbmNsdWRlczogY3JlYXRlTWV0aG9kKHRydWUpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmluZGV4T2ZgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuaW5kZXhvZlxuICBpbmRleE9mOiBjcmVhdGVNZXRob2QoZmFsc2UpXG59O1xuIiwidmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWZ1bmN0aW9uJyk7XG5cbi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZ1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZm4sIHRoYXQsIGxlbmd0aCkge1xuICBhRnVuY3Rpb24oZm4pO1xuICBpZiAodGhhdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZm47XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSAwOiByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCk7XG4gICAgfTtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7XG4gICAgfTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7XG4gICAgfTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKC8qIC4uLmFyZ3MgKi8pIHtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgfTtcbn07XG4iLCJ2YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG5cbi8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3Jcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIEVOVFJJRVMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gRU5UUklFUyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpO1xuICAvLyA3LjQuNiBJdGVyYXRvckNsb3NlKGl0ZXJhdG9yLCBjb21wbGV0aW9uKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHZhciByZXR1cm5NZXRob2QgPSBpdGVyYXRvclsncmV0dXJuJ107XG4gICAgaWYgKHJldHVybk1ldGhvZCAhPT0gdW5kZWZpbmVkKSBhbk9iamVjdChyZXR1cm5NZXRob2QuY2FsbChpdGVyYXRvcikpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7XG59O1xuIiwidmFyIGNsYXNzb2ZSYXcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIFRPX1NUUklOR19UQUcgPSB3ZWxsS25vd25TeW1ib2woJ3RvU3RyaW5nVGFnJyk7XG4vLyBFUzMgd3JvbmcgaGVyZVxudmFyIENPUlJFQ1RfQVJHVU1FTlRTID0gY2xhc3NvZlJhdyhmdW5jdGlvbiAoKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSkgPT0gJ0FyZ3VtZW50cyc7XG5cbi8vIGZhbGxiYWNrIGZvciBJRTExIFNjcmlwdCBBY2Nlc3MgRGVuaWVkIGVycm9yXG52YXIgdHJ5R2V0ID0gZnVuY3Rpb24gKGl0LCBrZXkpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gaXRba2V5XTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxufTtcblxuLy8gZ2V0dGluZyB0YWcgZnJvbSBFUzYrIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgdmFyIE8sIHRhZywgcmVzdWx0O1xuICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCdcbiAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2VcbiAgICA6IHR5cGVvZiAodGFnID0gdHJ5R2V0KE8gPSBPYmplY3QoaXQpLCBUT19TVFJJTkdfVEFHKSkgPT0gJ3N0cmluZycgPyB0YWdcbiAgICAvLyBidWlsdGluVGFnIGNhc2VcbiAgICA6IENPUlJFQ1RfQVJHVU1FTlRTID8gY2xhc3NvZlJhdyhPKVxuICAgIC8vIEVTMyBhcmd1bWVudHMgZmFsbGJhY2tcbiAgICA6IChyZXN1bHQgPSBjbGFzc29mUmF3KE8pKSA9PSAnT2JqZWN0JyAmJiB0eXBlb2YgTy5jYWxsZWUgPT0gJ2Z1bmN0aW9uJyA/ICdBcmd1bWVudHMnIDogcmVzdWx0O1xufTtcbiIsInZhciBoYXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzJyk7XG52YXIgb3duS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vd24ta2V5cycpO1xudmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvck1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJyk7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuICB2YXIga2V5cyA9IG93bktleXMoc291cmNlKTtcbiAgdmFyIGRlZmluZVByb3BlcnR5ID0gZGVmaW5lUHJvcGVydHlNb2R1bGUuZjtcbiAgdmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvck1vZHVsZS5mO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICBpZiAoIWhhcyh0YXJnZXQsIGtleSkpIGRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTtcbiAgfVxufTtcbiIsInZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEYoKSB7IC8qIGVtcHR5ICovIH1cbiAgRi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBudWxsO1xuICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKG5ldyBGKCkpICE9PSBGLnByb3RvdHlwZTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIEl0ZXJhdG9yUHJvdG90eXBlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2l0ZXJhdG9ycy1jb3JlJykuSXRlcmF0b3JQcm90b3R5cGU7XG52YXIgY3JlYXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1jcmVhdGUnKTtcbnZhciBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLXByb3BlcnR5LWRlc2NyaXB0b3InKTtcbnZhciBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zZXQtdG8tc3RyaW5nLXRhZycpO1xudmFyIEl0ZXJhdG9ycyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pdGVyYXRvcnMnKTtcblxudmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChJdGVyYXRvckNvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KSB7XG4gIHZhciBUT19TVFJJTkdfVEFHID0gTkFNRSArICcgSXRlcmF0b3InO1xuICBJdGVyYXRvckNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSwgeyBuZXh0OiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoMSwgbmV4dCkgfSk7XG4gIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yQ29uc3RydWN0b3IsIFRPX1NUUklOR19UQUcsIGZhbHNlLCB0cnVlKTtcbiAgSXRlcmF0b3JzW1RPX1NUUklOR19UQUddID0gcmV0dXJuVGhpcztcbiAgcmV0dXJuIEl0ZXJhdG9yQ29uc3RydWN0b3I7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYml0bWFwLCB2YWx1ZSkge1xuICByZXR1cm4ge1xuICAgIGVudW1lcmFibGU6ICEoYml0bWFwICYgMSksXG4gICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLFxuICAgIHdyaXRhYmxlOiAhKGJpdG1hcCAmIDQpLFxuICAgIHZhbHVlOiB2YWx1ZVxuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2V4cG9ydCcpO1xudmFyIGNyZWF0ZUl0ZXJhdG9yQ29uc3RydWN0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLWl0ZXJhdG9yLWNvbnN0cnVjdG9yJyk7XG52YXIgZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWdldC1wcm90b3R5cGUtb2YnKTtcbnZhciBzZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qtc2V0LXByb3RvdHlwZS1vZicpO1xudmFyIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NldC10by1zdHJpbmctdGFnJyk7XG52YXIgaGlkZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oaWRlJyk7XG52YXIgcmVkZWZpbmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVkZWZpbmUnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBJU19QVVJFID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLXB1cmUnKTtcbnZhciBJdGVyYXRvcnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXRlcmF0b3JzJyk7XG52YXIgSXRlcmF0b3JzQ29yZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pdGVyYXRvcnMtY29yZScpO1xuXG52YXIgSXRlcmF0b3JQcm90b3R5cGUgPSBJdGVyYXRvcnNDb3JlLkl0ZXJhdG9yUHJvdG90eXBlO1xudmFyIEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgPSBJdGVyYXRvcnNDb3JlLkJVR0dZX1NBRkFSSV9JVEVSQVRPUlM7XG52YXIgSVRFUkFUT1IgPSB3ZWxsS25vd25TeW1ib2woJ2l0ZXJhdG9yJyk7XG52YXIgS0VZUyA9ICdrZXlzJztcbnZhciBWQUxVRVMgPSAndmFsdWVzJztcbnZhciBFTlRSSUVTID0gJ2VudHJpZXMnO1xuXG52YXIgcmV0dXJuVGhpcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEl0ZXJhYmxlLCBOQU1FLCBJdGVyYXRvckNvbnN0cnVjdG9yLCBuZXh0LCBERUZBVUxULCBJU19TRVQsIEZPUkNFRCkge1xuICBjcmVhdGVJdGVyYXRvckNvbnN0cnVjdG9yKEl0ZXJhdG9yQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpO1xuXG4gIHZhciBnZXRJdGVyYXRpb25NZXRob2QgPSBmdW5jdGlvbiAoS0lORCkge1xuICAgIGlmIChLSU5EID09PSBERUZBVUxUICYmIGRlZmF1bHRJdGVyYXRvcikgcmV0dXJuIGRlZmF1bHRJdGVyYXRvcjtcbiAgICBpZiAoIUJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgJiYgS0lORCBpbiBJdGVyYWJsZVByb3RvdHlwZSkgcmV0dXJuIEl0ZXJhYmxlUHJvdG90eXBlW0tJTkRdO1xuICAgIHN3aXRjaCAoS0lORCkge1xuICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpIHsgcmV0dXJuIG5ldyBJdGVyYXRvckNvbnN0cnVjdG9yKHRoaXMsIEtJTkQpOyB9O1xuICAgICAgY2FzZSBWQUxVRVM6IHJldHVybiBmdW5jdGlvbiB2YWx1ZXMoKSB7IHJldHVybiBuZXcgSXRlcmF0b3JDb25zdHJ1Y3Rvcih0aGlzLCBLSU5EKTsgfTtcbiAgICAgIGNhc2UgRU5UUklFUzogcmV0dXJuIGZ1bmN0aW9uIGVudHJpZXMoKSB7IHJldHVybiBuZXcgSXRlcmF0b3JDb25zdHJ1Y3Rvcih0aGlzLCBLSU5EKTsgfTtcbiAgICB9IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgSXRlcmF0b3JDb25zdHJ1Y3Rvcih0aGlzKTsgfTtcbiAgfTtcblxuICB2YXIgVE9fU1RSSU5HX1RBRyA9IE5BTUUgKyAnIEl0ZXJhdG9yJztcbiAgdmFyIElOQ09SUkVDVF9WQUxVRVNfTkFNRSA9IGZhbHNlO1xuICB2YXIgSXRlcmFibGVQcm90b3R5cGUgPSBJdGVyYWJsZS5wcm90b3R5cGU7XG4gIHZhciBuYXRpdmVJdGVyYXRvciA9IEl0ZXJhYmxlUHJvdG90eXBlW0lURVJBVE9SXVxuICAgIHx8IEl0ZXJhYmxlUHJvdG90eXBlWydAQGl0ZXJhdG9yJ11cbiAgICB8fCBERUZBVUxUICYmIEl0ZXJhYmxlUHJvdG90eXBlW0RFRkFVTFRdO1xuICB2YXIgZGVmYXVsdEl0ZXJhdG9yID0gIUJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgJiYgbmF0aXZlSXRlcmF0b3IgfHwgZ2V0SXRlcmF0aW9uTWV0aG9kKERFRkFVTFQpO1xuICB2YXIgYW55TmF0aXZlSXRlcmF0b3IgPSBOQU1FID09ICdBcnJheScgPyBJdGVyYWJsZVByb3RvdHlwZS5lbnRyaWVzIHx8IG5hdGl2ZUl0ZXJhdG9yIDogbmF0aXZlSXRlcmF0b3I7XG4gIHZhciBDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUsIG1ldGhvZHMsIEtFWTtcblxuICAvLyBmaXggbmF0aXZlXG4gIGlmIChhbnlOYXRpdmVJdGVyYXRvcikge1xuICAgIEN1cnJlbnRJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKGFueU5hdGl2ZUl0ZXJhdG9yLmNhbGwobmV3IEl0ZXJhYmxlKCkpKTtcbiAgICBpZiAoSXRlcmF0b3JQcm90b3R5cGUgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlLm5leHQpIHtcbiAgICAgIGlmICghSVNfUFVSRSAmJiBnZXRQcm90b3R5cGVPZihDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUpICE9PSBJdGVyYXRvclByb3RvdHlwZSkge1xuICAgICAgICBpZiAoc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgICBzZXRQcm90b3R5cGVPZihDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUsIEl0ZXJhdG9yUHJvdG90eXBlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlW0lURVJBVE9SXSAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgaGlkZShDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gU2V0IEBAdG9TdHJpbmdUYWcgdG8gbmF0aXZlIGl0ZXJhdG9yc1xuICAgICAgc2V0VG9TdHJpbmdUYWcoQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlLCBUT19TVFJJTkdfVEFHLCB0cnVlLCB0cnVlKTtcbiAgICAgIGlmIChJU19QVVJFKSBJdGVyYXRvcnNbVE9fU1RSSU5HX1RBR10gPSByZXR1cm5UaGlzO1xuICAgIH1cbiAgfVxuXG4gIC8vIGZpeCBBcnJheSN7dmFsdWVzLCBAQGl0ZXJhdG9yfS5uYW1lIGluIFY4IC8gRkZcbiAgaWYgKERFRkFVTFQgPT0gVkFMVUVTICYmIG5hdGl2ZUl0ZXJhdG9yICYmIG5hdGl2ZUl0ZXJhdG9yLm5hbWUgIT09IFZBTFVFUykge1xuICAgIElOQ09SUkVDVF9WQUxVRVNfTkFNRSA9IHRydWU7XG4gICAgZGVmYXVsdEl0ZXJhdG9yID0gZnVuY3Rpb24gdmFsdWVzKCkgeyByZXR1cm4gbmF0aXZlSXRlcmF0b3IuY2FsbCh0aGlzKTsgfTtcbiAgfVxuXG4gIC8vIGRlZmluZSBpdGVyYXRvclxuICBpZiAoKCFJU19QVVJFIHx8IEZPUkNFRCkgJiYgSXRlcmFibGVQcm90b3R5cGVbSVRFUkFUT1JdICE9PSBkZWZhdWx0SXRlcmF0b3IpIHtcbiAgICBoaWRlKEl0ZXJhYmxlUHJvdG90eXBlLCBJVEVSQVRPUiwgZGVmYXVsdEl0ZXJhdG9yKTtcbiAgfVxuICBJdGVyYXRvcnNbTkFNRV0gPSBkZWZhdWx0SXRlcmF0b3I7XG5cbiAgLy8gZXhwb3J0IGFkZGl0aW9uYWwgbWV0aG9kc1xuICBpZiAoREVGQVVMVCkge1xuICAgIG1ldGhvZHMgPSB7XG4gICAgICB2YWx1ZXM6IGdldEl0ZXJhdGlvbk1ldGhvZChWQUxVRVMpLFxuICAgICAga2V5czogSVNfU0VUID8gZGVmYXVsdEl0ZXJhdG9yIDogZ2V0SXRlcmF0aW9uTWV0aG9kKEtFWVMpLFxuICAgICAgZW50cmllczogZ2V0SXRlcmF0aW9uTWV0aG9kKEVOVFJJRVMpXG4gICAgfTtcbiAgICBpZiAoRk9SQ0VEKSBmb3IgKEtFWSBpbiBtZXRob2RzKSB7XG4gICAgICBpZiAoQlVHR1lfU0FGQVJJX0lURVJBVE9SUyB8fCBJTkNPUlJFQ1RfVkFMVUVTX05BTUUgfHwgIShLRVkgaW4gSXRlcmFibGVQcm90b3R5cGUpKSB7XG4gICAgICAgIHJlZGVmaW5lKEl0ZXJhYmxlUHJvdG90eXBlLCBLRVksIG1ldGhvZHNbS0VZXSk7XG4gICAgICB9XG4gICAgfSBlbHNlICQoeyB0YXJnZXQ6IE5BTUUsIHByb3RvOiB0cnVlLCBmb3JjZWQ6IEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgfHwgSU5DT1JSRUNUX1ZBTFVFU19OQU1FIH0sIG1ldGhvZHMpO1xuICB9XG5cbiAgcmV0dXJuIG1ldGhvZHM7XG59O1xuIiwidmFyIHBhdGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcGF0aCcpO1xudmFyIGhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTtcbnZhciB3cmFwcGVkV2VsbEtub3duU3ltYm9sTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dyYXBwZWQtd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5JykuZjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTkFNRSkge1xuICB2YXIgU3ltYm9sID0gcGF0aC5TeW1ib2wgfHwgKHBhdGguU3ltYm9sID0ge30pO1xuICBpZiAoIWhhcyhTeW1ib2wsIE5BTUUpKSBkZWZpbmVQcm9wZXJ0eShTeW1ib2wsIE5BTUUsIHtcbiAgICB2YWx1ZTogd3JhcHBlZFdlbGxLbm93blN5bWJvbE1vZHVsZS5mKE5BTUUpXG4gIH0pO1xufTtcbiIsInZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xuXG4vLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5XG5tb2R1bGUuZXhwb3J0cyA9ICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywgeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDc7IH0gfSkuYSAhPSA3O1xufSk7XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xuXG52YXIgZG9jdW1lbnQgPSBnbG9iYWwuZG9jdW1lbnQ7XG4vLyB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0JyBpbiBvbGQgSUVcbnZhciBFWElTVFMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBFWElTVFMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9O1xufTtcbiIsIi8vIGl0ZXJhYmxlIERPTSBjb2xsZWN0aW9uc1xuLy8gZmxhZyAtIGBpdGVyYWJsZWAgaW50ZXJmYWNlIC0gJ2VudHJpZXMnLCAna2V5cycsICd2YWx1ZXMnLCAnZm9yRWFjaCcgbWV0aG9kc1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIENTU1J1bGVMaXN0OiAwLFxuICBDU1NTdHlsZURlY2xhcmF0aW9uOiAwLFxuICBDU1NWYWx1ZUxpc3Q6IDAsXG4gIENsaWVudFJlY3RMaXN0OiAwLFxuICBET01SZWN0TGlzdDogMCxcbiAgRE9NU3RyaW5nTGlzdDogMCxcbiAgRE9NVG9rZW5MaXN0OiAxLFxuICBEYXRhVHJhbnNmZXJJdGVtTGlzdDogMCxcbiAgRmlsZUxpc3Q6IDAsXG4gIEhUTUxBbGxDb2xsZWN0aW9uOiAwLFxuICBIVE1MQ29sbGVjdGlvbjogMCxcbiAgSFRNTEZvcm1FbGVtZW50OiAwLFxuICBIVE1MU2VsZWN0RWxlbWVudDogMCxcbiAgTWVkaWFMaXN0OiAwLFxuICBNaW1lVHlwZUFycmF5OiAwLFxuICBOYW1lZE5vZGVNYXA6IDAsXG4gIE5vZGVMaXN0OiAxLFxuICBQYWludFJlcXVlc3RMaXN0OiAwLFxuICBQbHVnaW46IDAsXG4gIFBsdWdpbkFycmF5OiAwLFxuICBTVkdMZW5ndGhMaXN0OiAwLFxuICBTVkdOdW1iZXJMaXN0OiAwLFxuICBTVkdQYXRoU2VnTGlzdDogMCxcbiAgU1ZHUG9pbnRMaXN0OiAwLFxuICBTVkdTdHJpbmdMaXN0OiAwLFxuICBTVkdUcmFuc2Zvcm1MaXN0OiAwLFxuICBTb3VyY2VCdWZmZXJMaXN0OiAwLFxuICBTdHlsZVNoZWV0TGlzdDogMCxcbiAgVGV4dFRyYWNrQ3VlTGlzdDogMCxcbiAgVGV4dFRyYWNrTGlzdDogMCxcbiAgVG91Y2hMaXN0OiAwXG59O1xuIiwiLy8gSUU4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzXG5tb2R1bGUuZXhwb3J0cyA9IFtcbiAgJ2NvbnN0cnVjdG9yJyxcbiAgJ2hhc093blByb3BlcnR5JyxcbiAgJ2lzUHJvdG90eXBlT2YnLFxuICAncHJvcGVydHlJc0VudW1lcmFibGUnLFxuICAndG9Mb2NhbGVTdHJpbmcnLFxuICAndG9TdHJpbmcnLFxuICAndmFsdWVPZidcbl07XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJykuZjtcbnZhciBoaWRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hpZGUnKTtcbnZhciByZWRlZmluZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWRlZmluZScpO1xudmFyIHNldEdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zZXQtZ2xvYmFsJyk7XG52YXIgY29weUNvbnN0cnVjdG9yUHJvcGVydGllcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jb3B5LWNvbnN0cnVjdG9yLXByb3BlcnRpZXMnKTtcbnZhciBpc0ZvcmNlZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1mb3JjZWQnKTtcblxuLypcbiAgb3B0aW9ucy50YXJnZXQgICAgICAtIG5hbWUgb2YgdGhlIHRhcmdldCBvYmplY3RcbiAgb3B0aW9ucy5nbG9iYWwgICAgICAtIHRhcmdldCBpcyB0aGUgZ2xvYmFsIG9iamVjdFxuICBvcHRpb25zLnN0YXQgICAgICAgIC0gZXhwb3J0IGFzIHN0YXRpYyBtZXRob2RzIG9mIHRhcmdldFxuICBvcHRpb25zLnByb3RvICAgICAgIC0gZXhwb3J0IGFzIHByb3RvdHlwZSBtZXRob2RzIG9mIHRhcmdldFxuICBvcHRpb25zLnJlYWwgICAgICAgIC0gcmVhbCBwcm90b3R5cGUgbWV0aG9kIGZvciB0aGUgYHB1cmVgIHZlcnNpb25cbiAgb3B0aW9ucy5mb3JjZWQgICAgICAtIGV4cG9ydCBldmVuIGlmIHRoZSBuYXRpdmUgZmVhdHVyZSBpcyBhdmFpbGFibGVcbiAgb3B0aW9ucy5iaW5kICAgICAgICAtIGJpbmQgbWV0aG9kcyB0byB0aGUgdGFyZ2V0LCByZXF1aXJlZCBmb3IgdGhlIGBwdXJlYCB2ZXJzaW9uXG4gIG9wdGlvbnMud3JhcCAgICAgICAgLSB3cmFwIGNvbnN0cnVjdG9ycyB0byBwcmV2ZW50aW5nIGdsb2JhbCBwb2xsdXRpb24sIHJlcXVpcmVkIGZvciB0aGUgYHB1cmVgIHZlcnNpb25cbiAgb3B0aW9ucy51bnNhZmUgICAgICAtIHVzZSB0aGUgc2ltcGxlIGFzc2lnbm1lbnQgb2YgcHJvcGVydHkgaW5zdGVhZCBvZiBkZWxldGUgKyBkZWZpbmVQcm9wZXJ0eVxuICBvcHRpb25zLnNoYW0gICAgICAgIC0gYWRkIGEgZmxhZyB0byBub3QgY29tcGxldGVseSBmdWxsIHBvbHlmaWxsc1xuICBvcHRpb25zLmVudW1lcmFibGUgIC0gZXhwb3J0IGFzIGVudW1lcmFibGUgcHJvcGVydHlcbiAgb3B0aW9ucy5ub1RhcmdldEdldCAtIHByZXZlbnQgY2FsbGluZyBhIGdldHRlciBvbiB0YXJnZXRcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvcHRpb25zLCBzb3VyY2UpIHtcbiAgdmFyIFRBUkdFVCA9IG9wdGlvbnMudGFyZ2V0O1xuICB2YXIgR0xPQkFMID0gb3B0aW9ucy5nbG9iYWw7XG4gIHZhciBTVEFUSUMgPSBvcHRpb25zLnN0YXQ7XG4gIHZhciBGT1JDRUQsIHRhcmdldCwga2V5LCB0YXJnZXRQcm9wZXJ0eSwgc291cmNlUHJvcGVydHksIGRlc2NyaXB0b3I7XG4gIGlmIChHTE9CQUwpIHtcbiAgICB0YXJnZXQgPSBnbG9iYWw7XG4gIH0gZWxzZSBpZiAoU1RBVElDKSB7XG4gICAgdGFyZ2V0ID0gZ2xvYmFsW1RBUkdFVF0gfHwgc2V0R2xvYmFsKFRBUkdFVCwge30pO1xuICB9IGVsc2Uge1xuICAgIHRhcmdldCA9IChnbG9iYWxbVEFSR0VUXSB8fCB7fSkucHJvdG90eXBlO1xuICB9XG4gIGlmICh0YXJnZXQpIGZvciAoa2V5IGluIHNvdXJjZSkge1xuICAgIHNvdXJjZVByb3BlcnR5ID0gc291cmNlW2tleV07XG4gICAgaWYgKG9wdGlvbnMubm9UYXJnZXRHZXQpIHtcbiAgICAgIGRlc2NyaXB0b3IgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpO1xuICAgICAgdGFyZ2V0UHJvcGVydHkgPSBkZXNjcmlwdG9yICYmIGRlc2NyaXB0b3IudmFsdWU7XG4gICAgfSBlbHNlIHRhcmdldFByb3BlcnR5ID0gdGFyZ2V0W2tleV07XG4gICAgRk9SQ0VEID0gaXNGb3JjZWQoR0xPQkFMID8ga2V5IDogVEFSR0VUICsgKFNUQVRJQyA/ICcuJyA6ICcjJykgKyBrZXksIG9wdGlvbnMuZm9yY2VkKTtcbiAgICAvLyBjb250YWluZWQgaW4gdGFyZ2V0XG4gICAgaWYgKCFGT1JDRUQgJiYgdGFyZ2V0UHJvcGVydHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHR5cGVvZiBzb3VyY2VQcm9wZXJ0eSA9PT0gdHlwZW9mIHRhcmdldFByb3BlcnR5KSBjb250aW51ZTtcbiAgICAgIGNvcHlDb25zdHJ1Y3RvclByb3BlcnRpZXMoc291cmNlUHJvcGVydHksIHRhcmdldFByb3BlcnR5KTtcbiAgICB9XG4gICAgLy8gYWRkIGEgZmxhZyB0byBub3QgY29tcGxldGVseSBmdWxsIHBvbHlmaWxsc1xuICAgIGlmIChvcHRpb25zLnNoYW0gfHwgKHRhcmdldFByb3BlcnR5ICYmIHRhcmdldFByb3BlcnR5LnNoYW0pKSB7XG4gICAgICBoaWRlKHNvdXJjZVByb3BlcnR5LCAnc2hhbScsIHRydWUpO1xuICAgIH1cbiAgICAvLyBleHRlbmQgZ2xvYmFsXG4gICAgcmVkZWZpbmUodGFyZ2V0LCBrZXksIHNvdXJjZVByb3BlcnR5LCBvcHRpb25zKTtcbiAgfVxufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV4ZWMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gISFleGVjKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG4iLCJ2YXIgc2hhcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHNoYXJlZCgnbmF0aXZlLWZ1bmN0aW9uLXRvLXN0cmluZycsIEZ1bmN0aW9uLnRvU3RyaW5nKTtcbiIsInZhciBwYXRoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3BhdGgnKTtcbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG5cbnZhciBhRnVuY3Rpb24gPSBmdW5jdGlvbiAodmFyaWFibGUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YXJpYWJsZSA9PSAnZnVuY3Rpb24nID8gdmFyaWFibGUgOiB1bmRlZmluZWQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChuYW1lc3BhY2UsIG1ldGhvZCkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA8IDIgPyBhRnVuY3Rpb24ocGF0aFtuYW1lc3BhY2VdKSB8fCBhRnVuY3Rpb24oZ2xvYmFsW25hbWVzcGFjZV0pXG4gICAgOiBwYXRoW25hbWVzcGFjZV0gJiYgcGF0aFtuYW1lc3BhY2VdW21ldGhvZF0gfHwgZ2xvYmFsW25hbWVzcGFjZV0gJiYgZ2xvYmFsW25hbWVzcGFjZV1bbWV0aG9kXTtcbn07XG4iLCJ2YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mJyk7XG52YXIgSXRlcmF0b3JzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2l0ZXJhdG9ycycpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xuXG52YXIgSVRFUkFUT1IgPSB3ZWxsS25vd25TeW1ib2woJ2l0ZXJhdG9yJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmIChpdCAhPSB1bmRlZmluZWQpIHJldHVybiBpdFtJVEVSQVRPUl1cbiAgICB8fCBpdFsnQEBpdGVyYXRvciddXG4gICAgfHwgSXRlcmF0b3JzW2NsYXNzb2YoaXQpXTtcbn07XG4iLCJ2YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgZ2V0SXRlcmF0b3JNZXRob2QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LWl0ZXJhdG9yLW1ldGhvZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICB2YXIgaXRlcmF0b3JNZXRob2QgPSBnZXRJdGVyYXRvck1ldGhvZChpdCk7XG4gIGlmICh0eXBlb2YgaXRlcmF0b3JNZXRob2QgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IFR5cGVFcnJvcihTdHJpbmcoaXQpICsgJyBpcyBub3QgaXRlcmFibGUnKTtcbiAgfSByZXR1cm4gYW5PYmplY3QoaXRlcmF0b3JNZXRob2QuY2FsbChpdCkpO1xufTtcbiIsInZhciBPID0gJ29iamVjdCc7XG52YXIgY2hlY2sgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGl0ICYmIGl0Lk1hdGggPT0gTWF0aCAmJiBpdDtcbn07XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG5tb2R1bGUuZXhwb3J0cyA9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICBjaGVjayh0eXBlb2YgZ2xvYmFsVGhpcyA9PSBPICYmIGdsb2JhbFRoaXMpIHx8XG4gIGNoZWNrKHR5cGVvZiB3aW5kb3cgPT0gTyAmJiB3aW5kb3cpIHx8XG4gIGNoZWNrKHR5cGVvZiBzZWxmID09IE8gJiYgc2VsZikgfHxcbiAgY2hlY2sodHlwZW9mIGdsb2JhbCA9PSBPICYmIGdsb2JhbCkgfHxcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jXG4gIEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4iLCJ2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIGtleSkge1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHt9O1xuIiwidmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpO1xudmFyIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtcHJvcGVydHktZGVzY3JpcHRvcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERFU0NSSVBUT1JTID8gZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICByZXR1cm4gZGVmaW5lUHJvcGVydHlNb2R1bGUuZihvYmplY3QsIGtleSwgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKDEsIHZhbHVlKSk7XG59IDogZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICByZXR1cm4gb2JqZWN0O1xufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgdmFyIGNvbnNvbGUgPSBnbG9iYWwuY29uc29sZTtcbiAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS5lcnJvcikge1xuICAgIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBjb25zb2xlLmVycm9yKGEpIDogY29uc29sZS5lcnJvcihhLCBiKTtcbiAgfVxufTtcbiIsInZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEJ1aWx0SW4oJ2RvY3VtZW50JywgJ2RvY3VtZW50RWxlbWVudCcpO1xuIiwidmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciBjcmVhdGVFbGVtZW50ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RvY3VtZW50LWNyZWF0ZS1lbGVtZW50Jyk7XG5cbi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHlcbm1vZHVsZS5leHBvcnRzID0gIURFU0NSSVBUT1JTICYmICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3JlYXRlRWxlbWVudCgnZGl2JyksICdhJywge1xuICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gNzsgfVxuICB9KS5hICE9IDc7XG59KTtcbiIsInZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcblxudmFyIHNwbGl0ID0gJycuc3BsaXQ7XG5cbi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzXG5tb2R1bGUuZXhwb3J0cyA9IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgLy8gdGhyb3dzIGFuIGVycm9yIGluIHJoaW5vLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvcmhpbm8vaXNzdWVzLzM0NlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gIHJldHVybiAhT2JqZWN0KCd6JykucHJvcGVydHlJc0VudW1lcmFibGUoMCk7XG59KSA/IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gY2xhc3NvZihpdCkgPT0gJ1N0cmluZycgPyBzcGxpdC5jYWxsKGl0LCAnJykgOiBPYmplY3QoaXQpO1xufSA6IE9iamVjdDtcbiIsInZhciBOQVRJVkVfV0VBS19NQVAgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbmF0aXZlLXdlYWstbWFwJyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xudmFyIGhpZGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGlkZScpO1xudmFyIG9iamVjdEhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTtcbnZhciBzaGFyZWRLZXkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkLWtleScpO1xudmFyIGhpZGRlbktleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGlkZGVuLWtleXMnKTtcblxudmFyIFdlYWtNYXAgPSBnbG9iYWwuV2Vha01hcDtcbnZhciBzZXQsIGdldCwgaGFzO1xuXG52YXIgZW5mb3JjZSA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gaGFzKGl0KSA/IGdldChpdCkgOiBzZXQoaXQsIHt9KTtcbn07XG5cbnZhciBnZXR0ZXJGb3IgPSBmdW5jdGlvbiAoVFlQRSkge1xuICByZXR1cm4gZnVuY3Rpb24gKGl0KSB7XG4gICAgdmFyIHN0YXRlO1xuICAgIGlmICghaXNPYmplY3QoaXQpIHx8IChzdGF0ZSA9IGdldChpdCkpLnR5cGUgIT09IFRZUEUpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignSW5jb21wYXRpYmxlIHJlY2VpdmVyLCAnICsgVFlQRSArICcgcmVxdWlyZWQnKTtcbiAgICB9IHJldHVybiBzdGF0ZTtcbiAgfTtcbn07XG5cbmlmIChOQVRJVkVfV0VBS19NQVApIHtcbiAgdmFyIHN0b3JlID0gbmV3IFdlYWtNYXAoKTtcbiAgdmFyIHdtZ2V0ID0gc3RvcmUuZ2V0O1xuICB2YXIgd21oYXMgPSBzdG9yZS5oYXM7XG4gIHZhciB3bXNldCA9IHN0b3JlLnNldDtcbiAgc2V0ID0gZnVuY3Rpb24gKGl0LCBtZXRhZGF0YSkge1xuICAgIHdtc2V0LmNhbGwoc3RvcmUsIGl0LCBtZXRhZGF0YSk7XG4gICAgcmV0dXJuIG1ldGFkYXRhO1xuICB9O1xuICBnZXQgPSBmdW5jdGlvbiAoaXQpIHtcbiAgICByZXR1cm4gd21nZXQuY2FsbChzdG9yZSwgaXQpIHx8IHt9O1xuICB9O1xuICBoYXMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgICByZXR1cm4gd21oYXMuY2FsbChzdG9yZSwgaXQpO1xuICB9O1xufSBlbHNlIHtcbiAgdmFyIFNUQVRFID0gc2hhcmVkS2V5KCdzdGF0ZScpO1xuICBoaWRkZW5LZXlzW1NUQVRFXSA9IHRydWU7XG4gIHNldCA9IGZ1bmN0aW9uIChpdCwgbWV0YWRhdGEpIHtcbiAgICBoaWRlKGl0LCBTVEFURSwgbWV0YWRhdGEpO1xuICAgIHJldHVybiBtZXRhZGF0YTtcbiAgfTtcbiAgZ2V0ID0gZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIG9iamVjdEhhcyhpdCwgU1RBVEUpID8gaXRbU1RBVEVdIDoge307XG4gIH07XG4gIGhhcyA9IGZ1bmN0aW9uIChpdCkge1xuICAgIHJldHVybiBvYmplY3RIYXMoaXQsIFNUQVRFKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldDogc2V0LFxuICBnZXQ6IGdldCxcbiAgaGFzOiBoYXMsXG4gIGVuZm9yY2U6IGVuZm9yY2UsXG4gIGdldHRlckZvcjogZ2V0dGVyRm9yXG59O1xuIiwidmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xudmFyIEl0ZXJhdG9ycyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pdGVyYXRvcnMnKTtcblxudmFyIElURVJBVE9SID0gd2VsbEtub3duU3ltYm9sKCdpdGVyYXRvcicpO1xudmFyIEFycmF5UHJvdG90eXBlID0gQXJyYXkucHJvdG90eXBlO1xuXG4vLyBjaGVjayBvbiBkZWZhdWx0IEFycmF5IGl0ZXJhdG9yXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gaXQgIT09IHVuZGVmaW5lZCAmJiAoSXRlcmF0b3JzLkFycmF5ID09PSBpdCB8fCBBcnJheVByb3RvdHlwZVtJVEVSQVRPUl0gPT09IGl0KTtcbn07XG4iLCJ2YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxudmFyIHJlcGxhY2VtZW50ID0gLyN8XFwucHJvdG90eXBlXFwuLztcblxudmFyIGlzRm9yY2VkID0gZnVuY3Rpb24gKGZlYXR1cmUsIGRldGVjdGlvbikge1xuICB2YXIgdmFsdWUgPSBkYXRhW25vcm1hbGl6ZShmZWF0dXJlKV07XG4gIHJldHVybiB2YWx1ZSA9PSBQT0xZRklMTCA/IHRydWVcbiAgICA6IHZhbHVlID09IE5BVElWRSA/IGZhbHNlXG4gICAgOiB0eXBlb2YgZGV0ZWN0aW9uID09ICdmdW5jdGlvbicgPyBmYWlscyhkZXRlY3Rpb24pXG4gICAgOiAhIWRldGVjdGlvbjtcbn07XG5cbnZhciBub3JtYWxpemUgPSBpc0ZvcmNlZC5ub3JtYWxpemUgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gIHJldHVybiBTdHJpbmcoc3RyaW5nKS5yZXBsYWNlKHJlcGxhY2VtZW50LCAnLicpLnRvTG93ZXJDYXNlKCk7XG59O1xuXG52YXIgZGF0YSA9IGlzRm9yY2VkLmRhdGEgPSB7fTtcbnZhciBOQVRJVkUgPSBpc0ZvcmNlZC5OQVRJVkUgPSAnTic7XG52YXIgUE9MWUZJTEwgPSBpc0ZvcmNlZC5QT0xZRklMTCA9ICdQJztcblxubW9kdWxlLmV4cG9ydHMgPSBpc0ZvcmNlZDtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmYWxzZTtcbiIsInZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBpc0FycmF5SXRlcmF0b3JNZXRob2QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtYXJyYXktaXRlcmF0b3ItbWV0aG9kJyk7XG52YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tbGVuZ3RoJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9iaW5kLWNvbnRleHQnKTtcbnZhciBnZXRJdGVyYXRvck1ldGhvZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtaXRlcmF0b3ItbWV0aG9kJyk7XG52YXIgY2FsbFdpdGhTYWZlSXRlcmF0aW9uQ2xvc2luZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jYWxsLXdpdGgtc2FmZS1pdGVyYXRpb24tY2xvc2luZycpO1xuXG52YXIgUmVzdWx0ID0gZnVuY3Rpb24gKHN0b3BwZWQsIHJlc3VsdCkge1xuICB0aGlzLnN0b3BwZWQgPSBzdG9wcGVkO1xuICB0aGlzLnJlc3VsdCA9IHJlc3VsdDtcbn07XG5cbnZhciBpdGVyYXRlID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXRlcmFibGUsIGZuLCB0aGF0LCBBU19FTlRSSUVTLCBJU19JVEVSQVRPUikge1xuICB2YXIgYm91bmRGdW5jdGlvbiA9IGJpbmQoZm4sIHRoYXQsIEFTX0VOVFJJRVMgPyAyIDogMSk7XG4gIHZhciBpdGVyYXRvciwgaXRlckZuLCBpbmRleCwgbGVuZ3RoLCByZXN1bHQsIHN0ZXA7XG5cbiAgaWYgKElTX0lURVJBVE9SKSB7XG4gICAgaXRlcmF0b3IgPSBpdGVyYWJsZTtcbiAgfSBlbHNlIHtcbiAgICBpdGVyRm4gPSBnZXRJdGVyYXRvck1ldGhvZChpdGVyYWJsZSk7XG4gICAgaWYgKHR5cGVvZiBpdGVyRm4gIT0gJ2Z1bmN0aW9uJykgdGhyb3cgVHlwZUVycm9yKCdUYXJnZXQgaXMgbm90IGl0ZXJhYmxlJyk7XG4gICAgLy8gb3B0aW1pc2F0aW9uIGZvciBhcnJheSBpdGVyYXRvcnNcbiAgICBpZiAoaXNBcnJheUl0ZXJhdG9yTWV0aG9kKGl0ZXJGbikpIHtcbiAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSB0b0xlbmd0aChpdGVyYWJsZS5sZW5ndGgpOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKykge1xuICAgICAgICByZXN1bHQgPSBBU19FTlRSSUVTXG4gICAgICAgICAgPyBib3VuZEZ1bmN0aW9uKGFuT2JqZWN0KHN0ZXAgPSBpdGVyYWJsZVtpbmRleF0pWzBdLCBzdGVwWzFdKVxuICAgICAgICAgIDogYm91bmRGdW5jdGlvbihpdGVyYWJsZVtpbmRleF0pO1xuICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdCBpbnN0YW5jZW9mIFJlc3VsdCkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0gcmV0dXJuIG5ldyBSZXN1bHQoZmFsc2UpO1xuICAgIH1cbiAgICBpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKGl0ZXJhYmxlKTtcbiAgfVxuXG4gIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICByZXN1bHQgPSBjYWxsV2l0aFNhZmVJdGVyYXRpb25DbG9zaW5nKGl0ZXJhdG9yLCBib3VuZEZ1bmN0aW9uLCBzdGVwLnZhbHVlLCBBU19FTlRSSUVTKTtcbiAgICBpZiAocmVzdWx0ICYmIHJlc3VsdCBpbnN0YW5jZW9mIFJlc3VsdCkgcmV0dXJuIHJlc3VsdDtcbiAgfSByZXR1cm4gbmV3IFJlc3VsdChmYWxzZSk7XG59O1xuXG5pdGVyYXRlLnN0b3AgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gIHJldHVybiBuZXcgUmVzdWx0KHRydWUsIHJlc3VsdCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGdldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtcHJvdG90eXBlLW9mJyk7XG52YXIgaGlkZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oaWRlJyk7XG52YXIgaGFzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcycpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xudmFyIElTX1BVUkUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtcHVyZScpO1xuXG52YXIgSVRFUkFUT1IgPSB3ZWxsS25vd25TeW1ib2woJ2l0ZXJhdG9yJyk7XG52YXIgQlVHR1lfU0FGQVJJX0lURVJBVE9SUyA9IGZhbHNlO1xuXG52YXIgcmV0dXJuVGhpcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG5cbi8vIGAlSXRlcmF0b3JQcm90b3R5cGUlYCBvYmplY3Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSVpdGVyYXRvcnByb3RvdHlwZSUtb2JqZWN0XG52YXIgSXRlcmF0b3JQcm90b3R5cGUsIFByb3RvdHlwZU9mQXJyYXlJdGVyYXRvclByb3RvdHlwZSwgYXJyYXlJdGVyYXRvcjtcblxuaWYgKFtdLmtleXMpIHtcbiAgYXJyYXlJdGVyYXRvciA9IFtdLmtleXMoKTtcbiAgLy8gU2FmYXJpIDggaGFzIGJ1Z2d5IGl0ZXJhdG9ycyB3L28gYG5leHRgXG4gIGlmICghKCduZXh0JyBpbiBhcnJheUl0ZXJhdG9yKSkgQlVHR1lfU0FGQVJJX0lURVJBVE9SUyA9IHRydWU7XG4gIGVsc2Uge1xuICAgIFByb3RvdHlwZU9mQXJyYXlJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKGdldFByb3RvdHlwZU9mKGFycmF5SXRlcmF0b3IpKTtcbiAgICBpZiAoUHJvdG90eXBlT2ZBcnJheUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPYmplY3QucHJvdG90eXBlKSBJdGVyYXRvclByb3RvdHlwZSA9IFByb3RvdHlwZU9mQXJyYXlJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxufVxuXG5pZiAoSXRlcmF0b3JQcm90b3R5cGUgPT0gdW5kZWZpbmVkKSBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuXG4vLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKVxuaWYgKCFJU19QVVJFICYmICFoYXMoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SKSkgaGlkZShJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IsIHJldHVyblRoaXMpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgSXRlcmF0b3JQcm90b3R5cGU6IEl0ZXJhdG9yUHJvdG90eXBlLFxuICBCVUdHWV9TQUZBUklfSVRFUkFUT1JTOiBCVUdHWV9TQUZBUklfSVRFUkFUT1JTXG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7fTtcbiIsInZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICEhT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAmJiAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICAvLyBDaHJvbWUgMzggU3ltYm9sIGhhcyBpbmNvcnJlY3QgdG9TdHJpbmcgY29udmVyc2lvblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgcmV0dXJuICFTdHJpbmcoU3ltYm9sKCkpO1xufSk7XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIG5hdGl2ZUZ1bmN0aW9uVG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdG8tc3RyaW5nJyk7XG5cbnZhciBXZWFrTWFwID0gZ2xvYmFsLldlYWtNYXA7XG5cbm1vZHVsZS5leHBvcnRzID0gdHlwZW9mIFdlYWtNYXAgPT09ICdmdW5jdGlvbicgJiYgL25hdGl2ZSBjb2RlLy50ZXN0KG5hdGl2ZUZ1bmN0aW9uVG9TdHJpbmcuY2FsbChXZWFrTWFwKSk7XG4iLCJ2YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgZGVmaW5lUHJvcGVydGllcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnRpZXMnKTtcbnZhciBlbnVtQnVnS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbnVtLWJ1Zy1rZXlzJyk7XG52YXIgaGlkZGVuS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oaWRkZW4ta2V5cycpO1xudmFyIGh0bWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaHRtbCcpO1xudmFyIGRvY3VtZW50Q3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kb2N1bWVudC1jcmVhdGUtZWxlbWVudCcpO1xudmFyIHNoYXJlZEtleSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zaGFyZWQta2V5Jyk7XG52YXIgSUVfUFJPVE8gPSBzaGFyZWRLZXkoJ0lFX1BST1RPJyk7XG5cbnZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcbnZhciBFbXB0eSA9IGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfTtcblxuLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIGlmcmFtZSBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZVxudmFyIGNyZWF0ZURpY3QgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnXG4gIHZhciBpZnJhbWUgPSBkb2N1bWVudENyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICB2YXIgbGVuZ3RoID0gZW51bUJ1Z0tleXMubGVuZ3RoO1xuICB2YXIgbHQgPSAnPCc7XG4gIHZhciBzY3JpcHQgPSAnc2NyaXB0JztcbiAgdmFyIGd0ID0gJz4nO1xuICB2YXIganMgPSAnamF2YScgKyBzY3JpcHQgKyAnOic7XG4gIHZhciBpZnJhbWVEb2N1bWVudDtcbiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGh0bWwuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgaWZyYW1lLnNyYyA9IFN0cmluZyhqcyk7XG4gIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XG4gIGlmcmFtZURvY3VtZW50Lm9wZW4oKTtcbiAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyBzY3JpcHQgKyBndCArICdkb2N1bWVudC5GPU9iamVjdCcgKyBsdCArICcvJyArIHNjcmlwdCArIGd0KTtcbiAgaWZyYW1lRG9jdW1lbnQuY2xvc2UoKTtcbiAgY3JlYXRlRGljdCA9IGlmcmFtZURvY3VtZW50LkY7XG4gIHdoaWxlIChsZW5ndGgtLSkgZGVsZXRlIGNyZWF0ZURpY3RbUFJPVE9UWVBFXVtlbnVtQnVnS2V5c1tsZW5ndGhdXTtcbiAgcmV0dXJuIGNyZWF0ZURpY3QoKTtcbn07XG5cbi8vIGBPYmplY3QuY3JlYXRlYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5jcmVhdGVcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBjcmVhdGUoTywgUHJvcGVydGllcykge1xuICB2YXIgcmVzdWx0O1xuICBpZiAoTyAhPT0gbnVsbCkge1xuICAgIEVtcHR5W1BST1RPVFlQRV0gPSBhbk9iamVjdChPKTtcbiAgICByZXN1bHQgPSBuZXcgRW1wdHkoKTtcbiAgICBFbXB0eVtQUk9UT1RZUEVdID0gbnVsbDtcbiAgICAvLyBhZGQgXCJfX3Byb3RvX19cIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsXG4gICAgcmVzdWx0W0lFX1BST1RPXSA9IE87XG4gIH0gZWxzZSByZXN1bHQgPSBjcmVhdGVEaWN0KCk7XG4gIHJldHVybiBQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiBkZWZpbmVQcm9wZXJ0aWVzKHJlc3VsdCwgUHJvcGVydGllcyk7XG59O1xuXG5oaWRkZW5LZXlzW0lFX1BST1RPXSA9IHRydWU7XG4iLCJ2YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBkZWZpbmVQcm9wZXJ0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5Jyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgb2JqZWN0S2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qta2V5cycpO1xuXG4vLyBgT2JqZWN0LmRlZmluZVByb3BlcnRpZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtb2JqZWN0LmRlZmluZXByb3BlcnRpZXNcbm1vZHVsZS5leHBvcnRzID0gREVTQ1JJUFRPUlMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykge1xuICBhbk9iamVjdChPKTtcbiAgdmFyIGtleXMgPSBvYmplY3RLZXlzKFByb3BlcnRpZXMpO1xuICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciBrZXk7XG4gIHdoaWxlIChsZW5ndGggPiBpbmRleCkgZGVmaW5lUHJvcGVydHlNb2R1bGUuZihPLCBrZXkgPSBrZXlzW2luZGV4KytdLCBQcm9wZXJ0aWVzW2tleV0pO1xuICByZXR1cm4gTztcbn07XG4iLCJ2YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBJRThfRE9NX0RFRklORSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pZTgtZG9tLWRlZmluZScpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIHRvUHJpbWl0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXByaW1pdGl2ZScpO1xuXG52YXIgbmF0aXZlRGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG5cbi8vIGBPYmplY3QuZGVmaW5lUHJvcGVydHlgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtb2JqZWN0LmRlZmluZXByb3BlcnR5XG5leHBvcnRzLmYgPSBERVNDUklQVE9SUyA/IG5hdGl2ZURlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykge1xuICBhbk9iamVjdChPKTtcbiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpO1xuICBhbk9iamVjdChBdHRyaWJ1dGVzKTtcbiAgaWYgKElFOF9ET01fREVGSU5FKSB0cnkge1xuICAgIHJldHVybiBuYXRpdmVEZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxuICBpZiAoJ2dldCcgaW4gQXR0cmlidXRlcyB8fCAnc2V0JyBpbiBBdHRyaWJ1dGVzKSB0aHJvdyBUeXBlRXJyb3IoJ0FjY2Vzc29ycyBub3Qgc3VwcG9ydGVkJyk7XG4gIGlmICgndmFsdWUnIGluIEF0dHJpYnV0ZXMpIE9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlO1xuICByZXR1cm4gTztcbn07XG4iLCJ2YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtcHJvcGVydHktaXMtZW51bWVyYWJsZScpO1xudmFyIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtcHJvcGVydHktZGVzY3JpcHRvcicpO1xudmFyIHRvSW5kZXhlZE9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbmRleGVkLW9iamVjdCcpO1xudmFyIHRvUHJpbWl0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXByaW1pdGl2ZScpO1xudmFyIGhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTtcbnZhciBJRThfRE9NX0RFRklORSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pZTgtZG9tLWRlZmluZScpO1xuXG52YXIgbmF0aXZlR2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcblxuLy8gYE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtb2JqZWN0LmdldG93bnByb3BlcnR5ZGVzY3JpcHRvclxuZXhwb3J0cy5mID0gREVTQ1JJUFRPUlMgPyBuYXRpdmVHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkge1xuICBPID0gdG9JbmRleGVkT2JqZWN0KE8pO1xuICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG4gIGlmIChJRThfRE9NX0RFRklORSkgdHJ5IHtcbiAgICByZXR1cm4gbmF0aXZlR2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApO1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gIGlmIChoYXMoTywgUCkpIHJldHVybiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoIXByb3BlcnR5SXNFbnVtZXJhYmxlTW9kdWxlLmYuY2FsbChPLCBQKSwgT1tQXSk7XG59O1xuIiwidmFyIGludGVybmFsT2JqZWN0S2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qta2V5cy1pbnRlcm5hbCcpO1xudmFyIGVudW1CdWdLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VudW0tYnVnLWtleXMnKTtcblxudmFyIGhpZGRlbktleXMgPSBlbnVtQnVnS2V5cy5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTtcblxuLy8gYE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5nZXRvd25wcm9wZXJ0eW5hbWVzXG5leHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pIHtcbiAgcmV0dXJuIGludGVybmFsT2JqZWN0S2V5cyhPLCBoaWRkZW5LZXlzKTtcbn07XG4iLCJleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuIiwidmFyIGhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTtcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1vYmplY3QnKTtcbnZhciBzaGFyZWRLZXkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkLWtleScpO1xudmFyIENPUlJFQ1RfUFJPVE9UWVBFX0dFVFRFUiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jb3JyZWN0LXByb3RvdHlwZS1nZXR0ZXInKTtcblxudmFyIElFX1BST1RPID0gc2hhcmVkS2V5KCdJRV9QUk9UTycpO1xudmFyIE9iamVjdFByb3RvdHlwZSA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8vIGBPYmplY3QuZ2V0UHJvdG90eXBlT2ZgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtb2JqZWN0LmdldHByb3RvdHlwZW9mXG5tb2R1bGUuZXhwb3J0cyA9IENPUlJFQ1RfUFJPVE9UWVBFX0dFVFRFUiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIChPKSB7XG4gIE8gPSB0b09iamVjdChPKTtcbiAgaWYgKGhhcyhPLCBJRV9QUk9UTykpIHJldHVybiBPW0lFX1BST1RPXTtcbiAgaWYgKHR5cGVvZiBPLmNvbnN0cnVjdG9yID09ICdmdW5jdGlvbicgJiYgTyBpbnN0YW5jZW9mIE8uY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gTy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gIH0gcmV0dXJuIE8gaW5zdGFuY2VvZiBPYmplY3QgPyBPYmplY3RQcm90b3R5cGUgOiBudWxsO1xufTtcbiIsInZhciBoYXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzJyk7XG52YXIgdG9JbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0Jyk7XG52YXIgaW5kZXhPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1pbmNsdWRlcycpLmluZGV4T2Y7XG52YXIgaGlkZGVuS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oaWRkZW4ta2V5cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWVzKSB7XG4gIHZhciBPID0gdG9JbmRleGVkT2JqZWN0KG9iamVjdCk7XG4gIHZhciBpID0gMDtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICB2YXIga2V5O1xuICBmb3IgKGtleSBpbiBPKSAhaGFzKGhpZGRlbktleXMsIGtleSkgJiYgaGFzKE8sIGtleSkgJiYgcmVzdWx0LnB1c2goa2V5KTtcbiAgLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5c1xuICB3aGlsZSAobmFtZXMubGVuZ3RoID4gaSkgaWYgKGhhcyhPLCBrZXkgPSBuYW1lc1tpKytdKSkge1xuICAgIH5pbmRleE9mKHJlc3VsdCwga2V5KSB8fCByZXN1bHQucHVzaChrZXkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuIiwidmFyIGludGVybmFsT2JqZWN0S2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qta2V5cy1pbnRlcm5hbCcpO1xudmFyIGVudW1CdWdLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VudW0tYnVnLWtleXMnKTtcblxuLy8gYE9iamVjdC5rZXlzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5rZXlzXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIGtleXMoTykge1xuICByZXR1cm4gaW50ZXJuYWxPYmplY3RLZXlzKE8sIGVudW1CdWdLZXlzKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgbmF0aXZlUHJvcGVydHlJc0VudW1lcmFibGUgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbnZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuXG4vLyBOYXNob3JuIH4gSkRLOCBidWdcbnZhciBOQVNIT1JOX0JVRyA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvciAmJiAhbmF0aXZlUHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh7IDE6IDIgfSwgMSk7XG5cbi8vIGBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlYCBtZXRob2QgaW1wbGVtZW50YXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5wcm90b3R5cGUucHJvcGVydHlpc2VudW1lcmFibGVcbmV4cG9ydHMuZiA9IE5BU0hPUk5fQlVHID8gZnVuY3Rpb24gcHJvcGVydHlJc0VudW1lcmFibGUoVikge1xuICB2YXIgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0aGlzLCBWKTtcbiAgcmV0dXJuICEhZGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yLmVudW1lcmFibGU7XG59IDogbmF0aXZlUHJvcGVydHlJc0VudW1lcmFibGU7XG4iLCJ2YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgYVBvc3NpYmxlUHJvdG90eXBlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2EtcG9zc2libGUtcHJvdG90eXBlJyk7XG5cbi8vIGBPYmplY3Quc2V0UHJvdG90eXBlT2ZgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtb2JqZWN0LnNldHByb3RvdHlwZW9mXG4vLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCAoJ19fcHJvdG9fXycgaW4ge30gPyBmdW5jdGlvbiAoKSB7XG4gIHZhciBDT1JSRUNUX1NFVFRFUiA9IGZhbHNlO1xuICB2YXIgdGVzdCA9IHt9O1xuICB2YXIgc2V0dGVyO1xuICB0cnkge1xuICAgIHNldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoT2JqZWN0LnByb3RvdHlwZSwgJ19fcHJvdG9fXycpLnNldDtcbiAgICBzZXR0ZXIuY2FsbCh0ZXN0LCBbXSk7XG4gICAgQ09SUkVDVF9TRVRURVIgPSB0ZXN0IGluc3RhbmNlb2YgQXJyYXk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKE8sIHByb3RvKSB7XG4gICAgYW5PYmplY3QoTyk7XG4gICAgYVBvc3NpYmxlUHJvdG90eXBlKHByb3RvKTtcbiAgICBpZiAoQ09SUkVDVF9TRVRURVIpIHNldHRlci5jYWxsKE8sIHByb3RvKTtcbiAgICBlbHNlIE8uX19wcm90b19fID0gcHJvdG87XG4gICAgcmV0dXJuIE87XG4gIH07XG59KCkgOiB1bmRlZmluZWQpO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZicpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xuXG52YXIgVE9fU1RSSU5HX1RBRyA9IHdlbGxLbm93blN5bWJvbCgndG9TdHJpbmdUYWcnKTtcbnZhciB0ZXN0ID0ge307XG5cbnRlc3RbVE9fU1RSSU5HX1RBR10gPSAneic7XG5cbi8vIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYCBtZXRob2QgaW1wbGVtZW50YXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmdcbm1vZHVsZS5leHBvcnRzID0gU3RyaW5nKHRlc3QpICE9PSAnW29iamVjdCB6XScgPyBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuICdbb2JqZWN0ICcgKyBjbGFzc29mKHRoaXMpICsgJ10nO1xufSA6IHRlc3QudG9TdHJpbmc7XG4iLCJ2YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcbnZhciBnZXRPd25Qcm9wZXJ0eU5hbWVzTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LW5hbWVzJyk7XG52YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LXN5bWJvbHMnKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcblxuLy8gYWxsIG9iamVjdCBrZXlzLCBpbmNsdWRlcyBub24tZW51bWVyYWJsZSBhbmQgc3ltYm9sc1xubW9kdWxlLmV4cG9ydHMgPSBnZXRCdWlsdEluKCdSZWZsZWN0JywgJ293bktleXMnKSB8fCBmdW5jdGlvbiBvd25LZXlzKGl0KSB7XG4gIHZhciBrZXlzID0gZ2V0T3duUHJvcGVydHlOYW1lc01vZHVsZS5mKGFuT2JqZWN0KGl0KSk7XG4gIHZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBnZXRPd25Qcm9wZXJ0eVN5bWJvbHNNb2R1bGUuZjtcbiAgcmV0dXJuIGdldE93blByb3BlcnR5U3ltYm9scyA/IGtleXMuY29uY2F0KGdldE93blByb3BlcnR5U3ltYm9scyhpdCkpIDoga2V5cztcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbiIsInZhciByZWRlZmluZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWRlZmluZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0YXJnZXQsIHNyYywgb3B0aW9ucykge1xuICBmb3IgKHZhciBrZXkgaW4gc3JjKSByZWRlZmluZSh0YXJnZXQsIGtleSwgc3JjW2tleV0sIG9wdGlvbnMpO1xuICByZXR1cm4gdGFyZ2V0O1xufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgc2hhcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZCcpO1xudmFyIGhpZGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGlkZScpO1xudmFyIGhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTtcbnZhciBzZXRHbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2V0LWdsb2JhbCcpO1xudmFyIG5hdGl2ZUZ1bmN0aW9uVG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdG8tc3RyaW5nJyk7XG52YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpO1xuXG52YXIgZ2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuZ2V0O1xudmFyIGVuZm9yY2VJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5lbmZvcmNlO1xudmFyIFRFTVBMQVRFID0gU3RyaW5nKG5hdGl2ZUZ1bmN0aW9uVG9TdHJpbmcpLnNwbGl0KCd0b1N0cmluZycpO1xuXG5zaGFyZWQoJ2luc3BlY3RTb3VyY2UnLCBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIG5hdGl2ZUZ1bmN0aW9uVG9TdHJpbmcuY2FsbChpdCk7XG59KTtcblxuKG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKE8sIGtleSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgdmFyIHVuc2FmZSA9IG9wdGlvbnMgPyAhIW9wdGlvbnMudW5zYWZlIDogZmFsc2U7XG4gIHZhciBzaW1wbGUgPSBvcHRpb25zID8gISFvcHRpb25zLmVudW1lcmFibGUgOiBmYWxzZTtcbiAgdmFyIG5vVGFyZ2V0R2V0ID0gb3B0aW9ucyA/ICEhb3B0aW9ucy5ub1RhcmdldEdldCA6IGZhbHNlO1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAodHlwZW9mIGtleSA9PSAnc3RyaW5nJyAmJiAhaGFzKHZhbHVlLCAnbmFtZScpKSBoaWRlKHZhbHVlLCAnbmFtZScsIGtleSk7XG4gICAgZW5mb3JjZUludGVybmFsU3RhdGUodmFsdWUpLnNvdXJjZSA9IFRFTVBMQVRFLmpvaW4odHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/IGtleSA6ICcnKTtcbiAgfVxuICBpZiAoTyA9PT0gZ2xvYmFsKSB7XG4gICAgaWYgKHNpbXBsZSkgT1trZXldID0gdmFsdWU7XG4gICAgZWxzZSBzZXRHbG9iYWwoa2V5LCB2YWx1ZSk7XG4gICAgcmV0dXJuO1xuICB9IGVsc2UgaWYgKCF1bnNhZmUpIHtcbiAgICBkZWxldGUgT1trZXldO1xuICB9IGVsc2UgaWYgKCFub1RhcmdldEdldCAmJiBPW2tleV0pIHtcbiAgICBzaW1wbGUgPSB0cnVlO1xuICB9XG4gIGlmIChzaW1wbGUpIE9ba2V5XSA9IHZhbHVlO1xuICBlbHNlIGhpZGUoTywga2V5LCB2YWx1ZSk7XG4vLyBhZGQgZmFrZSBGdW5jdGlvbiN0b1N0cmluZyBmb3IgY29ycmVjdCB3b3JrIHdyYXBwZWQgbWV0aG9kcyAvIGNvbnN0cnVjdG9ycyB3aXRoIG1ldGhvZHMgbGlrZSBMb0Rhc2ggaXNOYXRpdmVcbn0pKEZ1bmN0aW9uLnByb3RvdHlwZSwgJ3RvU3RyaW5nJywgZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiB0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nICYmIGdldEludGVybmFsU3RhdGUodGhpcykuc291cmNlIHx8IG5hdGl2ZUZ1bmN0aW9uVG9TdHJpbmcuY2FsbCh0aGlzKTtcbn0pO1xuIiwiLy8gYFJlcXVpcmVPYmplY3RDb2VyY2libGVgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtcmVxdWlyZW9iamVjdGNvZXJjaWJsZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgaWYgKGl0ID09IHVuZGVmaW5lZCkgdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gXCIgKyBpdCk7XG4gIHJldHVybiBpdDtcbn07XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGhpZGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGlkZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgaGlkZShnbG9iYWwsIGtleSwgdmFsdWUpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGdsb2JhbFtrZXldID0gdmFsdWU7XG4gIH0gcmV0dXJuIHZhbHVlO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xuXG52YXIgU1BFQ0lFUyA9IHdlbGxLbm93blN5bWJvbCgnc3BlY2llcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDT05TVFJVQ1RPUl9OQU1FKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IGdldEJ1aWx0SW4oQ09OU1RSVUNUT1JfTkFNRSk7XG4gIHZhciBkZWZpbmVQcm9wZXJ0eSA9IGRlZmluZVByb3BlcnR5TW9kdWxlLmY7XG5cbiAgaWYgKERFU0NSSVBUT1JTICYmIENvbnN0cnVjdG9yICYmICFDb25zdHJ1Y3RvcltTUEVDSUVTXSkge1xuICAgIGRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBTUEVDSUVTLCB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH1cbiAgICB9KTtcbiAgfVxufTtcbiIsInZhciBkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5JykuZjtcbnZhciBoYXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBUT19TVFJJTkdfVEFHID0gd2VsbEtub3duU3ltYm9sKCd0b1N0cmluZ1RhZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwgVEFHLCBTVEFUSUMpIHtcbiAgaWYgKGl0ICYmICFoYXMoaXQgPSBTVEFUSUMgPyBpdCA6IGl0LnByb3RvdHlwZSwgVE9fU1RSSU5HX1RBRykpIHtcbiAgICBkZWZpbmVQcm9wZXJ0eShpdCwgVE9fU1RSSU5HX1RBRywgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBUQUcgfSk7XG4gIH1cbn07XG4iLCJ2YXIgc2hhcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZCcpO1xudmFyIHVpZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy91aWQnKTtcblxudmFyIGtleXMgPSBzaGFyZWQoJ2tleXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBrZXlzW2tleV0gfHwgKGtleXNba2V5XSA9IHVpZChrZXkpKTtcbn07XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIHNldEdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zZXQtZ2xvYmFsJyk7XG52YXIgSVNfUFVSRSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1wdXJlJyk7XG5cbnZhciBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJztcbnZhciBzdG9yZSA9IGdsb2JhbFtTSEFSRURdIHx8IHNldEdsb2JhbChTSEFSRUQsIHt9KTtcblxuKG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgcmV0dXJuIHN0b3JlW2tleV0gfHwgKHN0b3JlW2tleV0gPSB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiB7fSk7XG59KSgndmVyc2lvbnMnLCBbXSkucHVzaCh7XG4gIHZlcnNpb246ICczLjIuMScsXG4gIG1vZGU6IElTX1BVUkUgPyAncHVyZScgOiAnZ2xvYmFsJyxcbiAgY29weXJpZ2h0OiAnwqkgMjAxOSBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KSdcbn0pO1xuIiwidmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbnRlZ2VyJyk7XG52YXIgcmVxdWlyZU9iamVjdENvZXJjaWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZXF1aXJlLW9iamVjdC1jb2VyY2libGUnKTtcblxuLy8gYFN0cmluZy5wcm90b3R5cGUueyBjb2RlUG9pbnRBdCwgYXQgfWAgbWV0aG9kcyBpbXBsZW1lbnRhdGlvblxudmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uIChDT05WRVJUX1RPX1NUUklORykge1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzLCBwb3MpIHtcbiAgICB2YXIgUyA9IFN0cmluZyhyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKCR0aGlzKSk7XG4gICAgdmFyIHBvc2l0aW9uID0gdG9JbnRlZ2VyKHBvcyk7XG4gICAgdmFyIHNpemUgPSBTLmxlbmd0aDtcbiAgICB2YXIgZmlyc3QsIHNlY29uZDtcbiAgICBpZiAocG9zaXRpb24gPCAwIHx8IHBvc2l0aW9uID49IHNpemUpIHJldHVybiBDT05WRVJUX1RPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkO1xuICAgIGZpcnN0ID0gUy5jaGFyQ29kZUF0KHBvc2l0aW9uKTtcbiAgICByZXR1cm4gZmlyc3QgPCAweEQ4MDAgfHwgZmlyc3QgPiAweERCRkYgfHwgcG9zaXRpb24gKyAxID09PSBzaXplXG4gICAgICB8fCAoc2Vjb25kID0gUy5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSkpIDwgMHhEQzAwIHx8IHNlY29uZCA+IDB4REZGRlxuICAgICAgICA/IENPTlZFUlRfVE9fU1RSSU5HID8gUy5jaGFyQXQocG9zaXRpb24pIDogZmlyc3RcbiAgICAgICAgOiBDT05WRVJUX1RPX1NUUklORyA/IFMuc2xpY2UocG9zaXRpb24sIHBvc2l0aW9uICsgMikgOiAoZmlyc3QgLSAweEQ4MDAgPDwgMTApICsgKHNlY29uZCAtIDB4REMwMCkgKyAweDEwMDAwO1xuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIGBTdHJpbmcucHJvdG90eXBlLmNvZGVQb2ludEF0YCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtc3RyaW5nLnByb3RvdHlwZS5jb2RlcG9pbnRhdFxuICBjb2RlQXQ6IGNyZWF0ZU1ldGhvZChmYWxzZSksXG4gIC8vIGBTdHJpbmcucHJvdG90eXBlLmF0YCBtZXRob2RcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hdGhpYXNieW5lbnMvU3RyaW5nLnByb3RvdHlwZS5hdFxuICBjaGFyQXQ6IGNyZWF0ZU1ldGhvZCh0cnVlKVxufTtcbiIsInZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW50ZWdlcicpO1xuXG52YXIgbWF4ID0gTWF0aC5tYXg7XG52YXIgbWluID0gTWF0aC5taW47XG5cbi8vIEhlbHBlciBmb3IgYSBwb3B1bGFyIHJlcGVhdGluZyBjYXNlIG9mIHRoZSBzcGVjOlxuLy8gTGV0IGludGVnZXIgYmUgPyBUb0ludGVnZXIoaW5kZXgpLlxuLy8gSWYgaW50ZWdlciA8IDAsIGxldCByZXN1bHQgYmUgbWF4KChsZW5ndGggKyBpbnRlZ2VyKSwgMCk7IGVsc2UgbGV0IHJlc3VsdCBiZSBtaW4obGVuZ3RoLCBsZW5ndGgpLlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5kZXgsIGxlbmd0aCkge1xuICB2YXIgaW50ZWdlciA9IHRvSW50ZWdlcihpbmRleCk7XG4gIHJldHVybiBpbnRlZ2VyIDwgMCA/IG1heChpbnRlZ2VyICsgbGVuZ3RoLCAwKSA6IG1pbihpbnRlZ2VyLCBsZW5ndGgpO1xufTtcbiIsIi8vIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXG52YXIgSW5kZXhlZE9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbmRleGVkLW9iamVjdCcpO1xudmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBJbmRleGVkT2JqZWN0KHJlcXVpcmVPYmplY3RDb2VyY2libGUoaXQpKTtcbn07XG4iLCJ2YXIgY2VpbCA9IE1hdGguY2VpbDtcbnZhciBmbG9vciA9IE1hdGguZmxvb3I7XG5cbi8vIGBUb0ludGVnZXJgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtdG9pbnRlZ2VyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICByZXR1cm4gaXNOYU4oYXJndW1lbnQgPSArYXJndW1lbnQpID8gMCA6IChhcmd1bWVudCA+IDAgPyBmbG9vciA6IGNlaWwpKGFyZ3VtZW50KTtcbn07XG4iLCJ2YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWludGVnZXInKTtcblxudmFyIG1pbiA9IE1hdGgubWluO1xuXG4vLyBgVG9MZW5ndGhgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtdG9sZW5ndGhcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIHJldHVybiBhcmd1bWVudCA+IDAgPyBtaW4odG9JbnRlZ2VyKGFyZ3VtZW50KSwgMHgxRkZGRkZGRkZGRkZGRikgOiAwOyAvLyAyICoqIDUzIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxXG59O1xuIiwidmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlJyk7XG5cbi8vIGBUb09iamVjdGAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10b29iamVjdFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgcmV0dXJuIE9iamVjdChyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KSk7XG59O1xuIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xuXG4vLyBgVG9QcmltaXRpdmVgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtdG9wcmltaXRpdmVcbi8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlXG4vLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZ1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5wdXQsIFBSRUZFUlJFRF9TVFJJTkcpIHtcbiAgaWYgKCFpc09iamVjdChpbnB1dCkpIHJldHVybiBpbnB1dDtcbiAgdmFyIGZuLCB2YWw7XG4gIGlmIChQUkVGRVJSRURfU1RSSU5HICYmIHR5cGVvZiAoZm4gPSBpbnB1dC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpbnB1dCkpKSByZXR1cm4gdmFsO1xuICBpZiAodHlwZW9mIChmbiA9IGlucHV0LnZhbHVlT2YpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaW5wdXQpKSkgcmV0dXJuIHZhbDtcbiAgaWYgKCFQUkVGRVJSRURfU1RSSU5HICYmIHR5cGVvZiAoZm4gPSBpbnB1dC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpbnB1dCkpKSByZXR1cm4gdmFsO1xuICB0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIik7XG59O1xuIiwidmFyIGlkID0gMDtcbnZhciBwb3N0Zml4ID0gTWF0aC5yYW5kb20oKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiAnU3ltYm9sKCcgKyBTdHJpbmcoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSkgKyAnKV8nICsgKCsraWQgKyBwb3N0Zml4KS50b1N0cmluZygzNik7XG59O1xuIiwidmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBzaGFyZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkJyk7XG52YXIgdWlkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3VpZCcpO1xudmFyIE5BVElWRV9TWU1CT0wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbmF0aXZlLXN5bWJvbCcpO1xuXG52YXIgU3ltYm9sID0gZ2xvYmFsLlN5bWJvbDtcbnZhciBzdG9yZSA9IHNoYXJlZCgnd2tzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9IE5BVElWRV9TWU1CT0wgJiYgU3ltYm9sW25hbWVdXG4gICAgfHwgKE5BVElWRV9TWU1CT0wgPyBTeW1ib2wgOiB1aWQpKCdTeW1ib2wuJyArIG5hbWUpKTtcbn07XG4iLCJleHBvcnRzLmYgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciB0b0luZGV4ZWRPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW5kZXhlZC1vYmplY3QnKTtcbnZhciBhZGRUb1Vuc2NvcGFibGVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FkZC10by11bnNjb3BhYmxlcycpO1xudmFyIEl0ZXJhdG9ycyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pdGVyYXRvcnMnKTtcbnZhciBJbnRlcm5hbFN0YXRlTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ludGVybmFsLXN0YXRlJyk7XG52YXIgZGVmaW5lSXRlcmF0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWl0ZXJhdG9yJyk7XG5cbnZhciBBUlJBWV9JVEVSQVRPUiA9ICdBcnJheSBJdGVyYXRvcic7XG52YXIgc2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuc2V0O1xudmFyIGdldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLmdldHRlckZvcihBUlJBWV9JVEVSQVRPUik7XG5cbi8vIGBBcnJheS5wcm90b3R5cGUuZW50cmllc2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZW50cmllc1xuLy8gYEFycmF5LnByb3RvdHlwZS5rZXlzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5rZXlzXG4vLyBgQXJyYXkucHJvdG90eXBlLnZhbHVlc2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUudmFsdWVzXG4vLyBgQXJyYXkucHJvdG90eXBlW0BAaXRlcmF0b3JdYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS1AQGl0ZXJhdG9yXG4vLyBgQ3JlYXRlQXJyYXlJdGVyYXRvcmAgaW50ZXJuYWwgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1jcmVhdGVhcnJheWl0ZXJhdG9yXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmluZUl0ZXJhdG9yKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbiAoaXRlcmF0ZWQsIGtpbmQpIHtcbiAgc2V0SW50ZXJuYWxTdGF0ZSh0aGlzLCB7XG4gICAgdHlwZTogQVJSQVlfSVRFUkFUT1IsXG4gICAgdGFyZ2V0OiB0b0luZGV4ZWRPYmplY3QoaXRlcmF0ZWQpLCAvLyB0YXJnZXRcbiAgICBpbmRleDogMCwgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcbiAgICBraW5kOiBraW5kICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtpbmRcbiAgfSk7XG4vLyBgJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlLm5leHRgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtJWFycmF5aXRlcmF0b3Jwcm90b3R5cGUlLm5leHRcbn0sIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxTdGF0ZSh0aGlzKTtcbiAgdmFyIHRhcmdldCA9IHN0YXRlLnRhcmdldDtcbiAgdmFyIGtpbmQgPSBzdGF0ZS5raW5kO1xuICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCsrO1xuICBpZiAoIXRhcmdldCB8fCBpbmRleCA+PSB0YXJnZXQubGVuZ3RoKSB7XG4gICAgc3RhdGUudGFyZ2V0ID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuICBpZiAoa2luZCA9PSAna2V5cycpIHJldHVybiB7IHZhbHVlOiBpbmRleCwgZG9uZTogZmFsc2UgfTtcbiAgaWYgKGtpbmQgPT0gJ3ZhbHVlcycpIHJldHVybiB7IHZhbHVlOiB0YXJnZXRbaW5kZXhdLCBkb25lOiBmYWxzZSB9O1xuICByZXR1cm4geyB2YWx1ZTogW2luZGV4LCB0YXJnZXRbaW5kZXhdXSwgZG9uZTogZmFsc2UgfTtcbn0sICd2YWx1ZXMnKTtcblxuLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1jcmVhdGV1bm1hcHBlZGFyZ3VtZW50c29iamVjdFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtY3JlYXRlbWFwcGVkYXJndW1lbnRzb2JqZWN0XG5JdGVyYXRvcnMuQXJndW1lbnRzID0gSXRlcmF0b3JzLkFycmF5O1xuXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUtQEB1bnNjb3BhYmxlc1xuYWRkVG9VbnNjb3BhYmxlcygna2V5cycpO1xuYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7XG5hZGRUb1Vuc2NvcGFibGVzKCdlbnRyaWVzJyk7XG4iLCJ2YXIgcmVkZWZpbmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVkZWZpbmUnKTtcbnZhciB0b1N0cmluZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtdG8tc3RyaW5nJyk7XG5cbnZhciBPYmplY3RQcm90b3R5cGUgPSBPYmplY3QucHJvdG90eXBlO1xuXG4vLyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nXG5pZiAodG9TdHJpbmcgIT09IE9iamVjdFByb3RvdHlwZS50b1N0cmluZykge1xuICByZWRlZmluZShPYmplY3RQcm90b3R5cGUsICd0b1N0cmluZycsIHRvU3RyaW5nLCB7IHVuc2FmZTogdHJ1ZSB9KTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcbnZhciBjaGFyQXQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3RyaW5nLW11bHRpYnl0ZScpLmNoYXJBdDtcbnZhciBJbnRlcm5hbFN0YXRlTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ludGVybmFsLXN0YXRlJyk7XG52YXIgZGVmaW5lSXRlcmF0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWl0ZXJhdG9yJyk7XG5cbnZhciBTVFJJTkdfSVRFUkFUT1IgPSAnU3RyaW5nIEl0ZXJhdG9yJztcbnZhciBzZXRJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5zZXQ7XG52YXIgZ2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuZ2V0dGVyRm9yKFNUUklOR19JVEVSQVRPUik7XG5cbi8vIGBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUtQEBpdGVyYXRvclxuZGVmaW5lSXRlcmF0b3IoU3RyaW5nLCAnU3RyaW5nJywgZnVuY3Rpb24gKGl0ZXJhdGVkKSB7XG4gIHNldEludGVybmFsU3RhdGUodGhpcywge1xuICAgIHR5cGU6IFNUUklOR19JVEVSQVRPUixcbiAgICBzdHJpbmc6IFN0cmluZyhpdGVyYXRlZCksXG4gICAgaW5kZXg6IDBcbiAgfSk7XG4vLyBgJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJS5uZXh0YCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSVzdHJpbmdpdGVyYXRvcnByb3RvdHlwZSUubmV4dFxufSwgZnVuY3Rpb24gbmV4dCgpIHtcbiAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxTdGF0ZSh0aGlzKTtcbiAgdmFyIHN0cmluZyA9IHN0YXRlLnN0cmluZztcbiAgdmFyIGluZGV4ID0gc3RhdGUuaW5kZXg7XG4gIHZhciBwb2ludDtcbiAgaWYgKGluZGV4ID49IHN0cmluZy5sZW5ndGgpIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgcG9pbnQgPSBjaGFyQXQoc3RyaW5nLCBpbmRleCk7XG4gIHN0YXRlLmluZGV4ICs9IHBvaW50Lmxlbmd0aDtcbiAgcmV0dXJuIHsgdmFsdWU6IHBvaW50LCBkb25lOiBmYWxzZSB9O1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYnNlcnZhYmxlXG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIHNldFNwZWNpZXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2V0LXNwZWNpZXMnKTtcbnZhciBhRnVuY3Rpb24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYS1mdW5jdGlvbicpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xudmFyIGFuSW5zdGFuY2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4taW5zdGFuY2UnKTtcbnZhciBkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5JykuZjtcbnZhciBoaWRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hpZGUnKTtcbnZhciByZWRlZmluZUFsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWRlZmluZS1hbGwnKTtcbnZhciBnZXRJdGVyYXRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtaXRlcmF0b3InKTtcbnZhciBpdGVyYXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2l0ZXJhdGUnKTtcbnZhciBob3N0UmVwb3J0RXJyb3JzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hvc3QtcmVwb3J0LWVycm9ycycpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xudmFyIEludGVybmFsU3RhdGVNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaW50ZXJuYWwtc3RhdGUnKTtcblxudmFyIE9CU0VSVkFCTEUgPSB3ZWxsS25vd25TeW1ib2woJ29ic2VydmFibGUnKTtcbnZhciBnZXRJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5nZXQ7XG52YXIgc2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuc2V0O1xuXG52YXIgZ2V0TWV0aG9kID0gZnVuY3Rpb24gKGZuKSB7XG4gIHJldHVybiBmbiA9PSBudWxsID8gdW5kZWZpbmVkIDogYUZ1bmN0aW9uKGZuKTtcbn07XG5cbnZhciBjbGVhbnVwU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvblN0YXRlKSB7XG4gIHZhciBjbGVhbnVwID0gc3Vic2NyaXB0aW9uU3RhdGUuY2xlYW51cDtcbiAgaWYgKGNsZWFudXApIHtcbiAgICBzdWJzY3JpcHRpb25TdGF0ZS5jbGVhbnVwID0gdW5kZWZpbmVkO1xuICAgIHRyeSB7XG4gICAgICBjbGVhbnVwKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGhvc3RSZXBvcnRFcnJvcnMoZXJyb3IpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHN1YnNjcmlwdGlvbkNsb3NlZCA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb25TdGF0ZSkge1xuICByZXR1cm4gc3Vic2NyaXB0aW9uU3RhdGUub2JzZXJ2ZXIgPT09IHVuZGVmaW5lZDtcbn07XG5cbnZhciBjbG9zZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24sIHN1YnNjcmlwdGlvblN0YXRlKSB7XG4gIGlmICghREVTQ1JJUFRPUlMpIHtcbiAgICBzdWJzY3JpcHRpb24uY2xvc2VkID0gdHJ1ZTtcbiAgICB2YXIgc3Vic2NyaXB0aW9uT2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb25TdGF0ZS5zdWJzY3JpcHRpb25PYnNlcnZlcjtcbiAgICBpZiAoc3Vic2NyaXB0aW9uT2JzZXJ2ZXIpIHN1YnNjcmlwdGlvbk9ic2VydmVyLmNsb3NlZCA9IHRydWU7XG4gIH0gc3Vic2NyaXB0aW9uU3RhdGUub2JzZXJ2ZXIgPSB1bmRlZmluZWQ7XG59O1xuXG52YXIgU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzdWJzY3JpYmVyKSB7XG4gIHZhciBzdWJzY3JpcHRpb25TdGF0ZSA9IHNldEludGVybmFsU3RhdGUodGhpcywge1xuICAgIGNsZWFudXA6IHVuZGVmaW5lZCxcbiAgICBvYnNlcnZlcjogYW5PYmplY3Qob2JzZXJ2ZXIpLFxuICAgIHN1YnNjcmlwdGlvbk9ic2VydmVyOiB1bmRlZmluZWRcbiAgfSk7XG4gIHZhciBzdGFydDtcbiAgaWYgKCFERVNDUklQVE9SUykgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBpZiAoc3RhcnQgPSBnZXRNZXRob2Qob2JzZXJ2ZXIuc3RhcnQpKSBzdGFydC5jYWxsKG9ic2VydmVyLCB0aGlzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBob3N0UmVwb3J0RXJyb3JzKGVycm9yKTtcbiAgfVxuICBpZiAoc3Vic2NyaXB0aW9uQ2xvc2VkKHN1YnNjcmlwdGlvblN0YXRlKSkgcmV0dXJuO1xuICB2YXIgc3Vic2NyaXB0aW9uT2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb25TdGF0ZS5zdWJzY3JpcHRpb25PYnNlcnZlciA9IG5ldyBTdWJzY3JpcHRpb25PYnNlcnZlcih0aGlzKTtcbiAgdHJ5IHtcbiAgICB2YXIgY2xlYW51cCA9IHN1YnNjcmliZXIoc3Vic2NyaXB0aW9uT2JzZXJ2ZXIpO1xuICAgIHZhciBzdWJzY3JpcHRpb24gPSBjbGVhbnVwO1xuICAgIGlmIChjbGVhbnVwICE9IG51bGwpIHN1YnNjcmlwdGlvblN0YXRlLmNsZWFudXAgPSB0eXBlb2YgY2xlYW51cC51bnN1YnNjcmliZSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgPyBmdW5jdGlvbiAoKSB7IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOyB9XG4gICAgICA6IGFGdW5jdGlvbihjbGVhbnVwKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBzdWJzY3JpcHRpb25PYnNlcnZlci5lcnJvcihlcnJvcik7XG4gICAgcmV0dXJuO1xuICB9IGlmIChzdWJzY3JpcHRpb25DbG9zZWQoc3Vic2NyaXB0aW9uU3RhdGUpKSBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvblN0YXRlKTtcbn07XG5cblN1YnNjcmlwdGlvbi5wcm90b3R5cGUgPSByZWRlZmluZUFsbCh7fSwge1xuICB1bnN1YnNjcmliZTogZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgdmFyIHN1YnNjcmlwdGlvblN0YXRlID0gZ2V0SW50ZXJuYWxTdGF0ZSh0aGlzKTtcbiAgICBpZiAoIXN1YnNjcmlwdGlvbkNsb3NlZChzdWJzY3JpcHRpb25TdGF0ZSkpIHtcbiAgICAgIGNsb3NlKHRoaXMsIHN1YnNjcmlwdGlvblN0YXRlKTtcbiAgICAgIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uU3RhdGUpO1xuICAgIH1cbiAgfVxufSk7XG5cbmlmIChERVNDUklQVE9SUykgZGVmaW5lUHJvcGVydHkoU3Vic2NyaXB0aW9uLnByb3RvdHlwZSwgJ2Nsb3NlZCcsIHtcbiAgY29uZmlndXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uQ2xvc2VkKGdldEludGVybmFsU3RhdGUodGhpcykpO1xuICB9XG59KTtcblxudmFyIFN1YnNjcmlwdGlvbk9ic2VydmVyID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICBzZXRJbnRlcm5hbFN0YXRlKHRoaXMsIHsgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24gfSk7XG4gIGlmICghREVTQ1JJUFRPUlMpIHRoaXMuY2xvc2VkID0gZmFsc2U7XG59O1xuXG5TdWJzY3JpcHRpb25PYnNlcnZlci5wcm90b3R5cGUgPSByZWRlZmluZUFsbCh7fSwge1xuICBuZXh0OiBmdW5jdGlvbiBuZXh0KHZhbHVlKSB7XG4gICAgdmFyIHN1YnNjcmlwdGlvblN0YXRlID0gZ2V0SW50ZXJuYWxTdGF0ZShnZXRJbnRlcm5hbFN0YXRlKHRoaXMpLnN1YnNjcmlwdGlvbik7XG4gICAgaWYgKCFzdWJzY3JpcHRpb25DbG9zZWQoc3Vic2NyaXB0aW9uU3RhdGUpKSB7XG4gICAgICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb25TdGF0ZS5vYnNlcnZlcjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBuZXh0TWV0aG9kID0gZ2V0TWV0aG9kKG9ic2VydmVyLm5leHQpO1xuICAgICAgICBpZiAobmV4dE1ldGhvZCkgbmV4dE1ldGhvZC5jYWxsKG9ic2VydmVyLCB2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBob3N0UmVwb3J0RXJyb3JzKGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGVycm9yOiBmdW5jdGlvbiBlcnJvcih2YWx1ZSkge1xuICAgIHZhciBzdWJzY3JpcHRpb24gPSBnZXRJbnRlcm5hbFN0YXRlKHRoaXMpLnN1YnNjcmlwdGlvbjtcbiAgICB2YXIgc3Vic2NyaXB0aW9uU3RhdGUgPSBnZXRJbnRlcm5hbFN0YXRlKHN1YnNjcmlwdGlvbik7XG4gICAgaWYgKCFzdWJzY3JpcHRpb25DbG9zZWQoc3Vic2NyaXB0aW9uU3RhdGUpKSB7XG4gICAgICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb25TdGF0ZS5vYnNlcnZlcjtcbiAgICAgIGNsb3NlKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uU3RhdGUpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGVycm9yTWV0aG9kID0gZ2V0TWV0aG9kKG9ic2VydmVyLmVycm9yKTtcbiAgICAgICAgaWYgKGVycm9yTWV0aG9kKSBlcnJvck1ldGhvZC5jYWxsKG9ic2VydmVyLCB2YWx1ZSk7XG4gICAgICAgIGVsc2UgaG9zdFJlcG9ydEVycm9ycyh2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaG9zdFJlcG9ydEVycm9ycyhlcnIpO1xuICAgICAgfSBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvblN0YXRlKTtcbiAgICB9XG4gIH0sXG4gIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICB2YXIgc3Vic2NyaXB0aW9uID0gZ2V0SW50ZXJuYWxTdGF0ZSh0aGlzKS5zdWJzY3JpcHRpb247XG4gICAgdmFyIHN1YnNjcmlwdGlvblN0YXRlID0gZ2V0SW50ZXJuYWxTdGF0ZShzdWJzY3JpcHRpb24pO1xuICAgIGlmICghc3Vic2NyaXB0aW9uQ2xvc2VkKHN1YnNjcmlwdGlvblN0YXRlKSkge1xuICAgICAgdmFyIG9ic2VydmVyID0gc3Vic2NyaXB0aW9uU3RhdGUub2JzZXJ2ZXI7XG4gICAgICBjbG9zZShzdWJzY3JpcHRpb24sIHN1YnNjcmlwdGlvblN0YXRlKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBjb21wbGV0ZU1ldGhvZCA9IGdldE1ldGhvZChvYnNlcnZlci5jb21wbGV0ZSk7XG4gICAgICAgIGlmIChjb21wbGV0ZU1ldGhvZCkgY29tcGxldGVNZXRob2QuY2FsbChvYnNlcnZlcik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBob3N0UmVwb3J0RXJyb3JzKGVycm9yKTtcbiAgICAgIH0gY2xlYW51cFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25TdGF0ZSk7XG4gICAgfVxuICB9XG59KTtcblxuaWYgKERFU0NSSVBUT1JTKSBkZWZpbmVQcm9wZXJ0eShTdWJzY3JpcHRpb25PYnNlcnZlci5wcm90b3R5cGUsICdjbG9zZWQnLCB7XG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbkNsb3NlZChnZXRJbnRlcm5hbFN0YXRlKGdldEludGVybmFsU3RhdGUodGhpcykuc3Vic2NyaXB0aW9uKSk7XG4gIH1cbn0pO1xuXG52YXIgJE9ic2VydmFibGUgPSBmdW5jdGlvbiBPYnNlcnZhYmxlKHN1YnNjcmliZXIpIHtcbiAgYW5JbnN0YW5jZSh0aGlzLCAkT2JzZXJ2YWJsZSwgJ09ic2VydmFibGUnKTtcbiAgc2V0SW50ZXJuYWxTdGF0ZSh0aGlzLCB7IHN1YnNjcmliZXI6IGFGdW5jdGlvbihzdWJzY3JpYmVyKSB9KTtcbn07XG5cbnJlZGVmaW5lQWxsKCRPYnNlcnZhYmxlLnByb3RvdHlwZSwge1xuICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZShvYnNlcnZlcikge1xuICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKHR5cGVvZiBvYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJyA/IHtcbiAgICAgIG5leHQ6IG9ic2VydmVyLFxuICAgICAgZXJyb3I6IGxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsXG4gICAgICBjb21wbGV0ZTogbGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZFxuICAgIH0gOiBpc09iamVjdChvYnNlcnZlcikgPyBvYnNlcnZlciA6IHt9LCBnZXRJbnRlcm5hbFN0YXRlKHRoaXMpLnN1YnNjcmliZXIpO1xuICB9XG59KTtcblxucmVkZWZpbmVBbGwoJE9ic2VydmFibGUsIHtcbiAgZnJvbTogZnVuY3Rpb24gZnJvbSh4KSB7XG4gICAgdmFyIEMgPSB0eXBlb2YgdGhpcyA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiAkT2JzZXJ2YWJsZTtcbiAgICB2YXIgb2JzZXJ2YWJsZU1ldGhvZCA9IGdldE1ldGhvZChhbk9iamVjdCh4KVtPQlNFUlZBQkxFXSk7XG4gICAgaWYgKG9ic2VydmFibGVNZXRob2QpIHtcbiAgICAgIHZhciBvYnNlcnZhYmxlID0gYW5PYmplY3Qob2JzZXJ2YWJsZU1ldGhvZC5jYWxsKHgpKTtcbiAgICAgIHJldHVybiBvYnNlcnZhYmxlLmNvbnN0cnVjdG9yID09PSBDID8gb2JzZXJ2YWJsZSA6IG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZS5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHZhciBpdGVyYXRvciA9IGdldEl0ZXJhdG9yKHgpO1xuICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIGl0ZXJhdGUoaXRlcmF0b3IsIGZ1bmN0aW9uIChpdCkge1xuICAgICAgICBvYnNlcnZlci5uZXh0KGl0KTtcbiAgICAgICAgaWYgKG9ic2VydmVyLmNsb3NlZCkgcmV0dXJuIGl0ZXJhdGUuc3RvcCgpO1xuICAgICAgfSwgdW5kZWZpbmVkLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgIH0pO1xuICB9LFxuICBvZjogZnVuY3Rpb24gb2YoKSB7XG4gICAgdmFyIEMgPSB0eXBlb2YgdGhpcyA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiAkT2JzZXJ2YWJsZTtcbiAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgaXRlbXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkgaXRlbXNbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4KytdO1xuICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgb2JzZXJ2ZXIubmV4dChpdGVtc1tpXSk7XG4gICAgICAgIGlmIChvYnNlcnZlci5jbG9zZWQpIHJldHVybjtcbiAgICAgIH0gb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbmhpZGUoJE9ic2VydmFibGUucHJvdG90eXBlLCBPQlNFUlZBQkxFLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KTtcblxuJCh7IGdsb2JhbDogdHJ1ZSB9LCB7XG4gIE9ic2VydmFibGU6ICRPYnNlcnZhYmxlXG59KTtcblxuc2V0U3BlY2llcygnT2JzZXJ2YWJsZScpO1xuIiwidmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZWZpbmUtd2VsbC1rbm93bi1zeW1ib2wnKTtcblxuLy8gYFN5bWJvbC5vYnNlcnZhYmxlYCB3ZWxsLWtub3duIHN5bWJvbFxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JzZXJ2YWJsZVxuZGVmaW5lV2VsbEtub3duU3ltYm9sKCdvYnNlcnZhYmxlJyk7XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIERPTUl0ZXJhYmxlcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kb20taXRlcmFibGVzJyk7XG52YXIgQXJyYXlJdGVyYXRvck1ldGhvZHMgPSByZXF1aXJlKCcuLi9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yJyk7XG52YXIgaGlkZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oaWRlJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBJVEVSQVRPUiA9IHdlbGxLbm93blN5bWJvbCgnaXRlcmF0b3InKTtcbnZhciBUT19TVFJJTkdfVEFHID0gd2VsbEtub3duU3ltYm9sKCd0b1N0cmluZ1RhZycpO1xudmFyIEFycmF5VmFsdWVzID0gQXJyYXlJdGVyYXRvck1ldGhvZHMudmFsdWVzO1xuXG5mb3IgKHZhciBDT0xMRUNUSU9OX05BTUUgaW4gRE9NSXRlcmFibGVzKSB7XG4gIHZhciBDb2xsZWN0aW9uID0gZ2xvYmFsW0NPTExFQ1RJT05fTkFNRV07XG4gIHZhciBDb2xsZWN0aW9uUHJvdG90eXBlID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTtcbiAgaWYgKENvbGxlY3Rpb25Qcm90b3R5cGUpIHtcbiAgICAvLyBzb21lIENocm9tZSB2ZXJzaW9ucyBoYXZlIG5vbi1jb25maWd1cmFibGUgbWV0aG9kcyBvbiBET01Ub2tlbkxpc3RcbiAgICBpZiAoQ29sbGVjdGlvblByb3RvdHlwZVtJVEVSQVRPUl0gIT09IEFycmF5VmFsdWVzKSB0cnkge1xuICAgICAgaGlkZShDb2xsZWN0aW9uUHJvdG90eXBlLCBJVEVSQVRPUiwgQXJyYXlWYWx1ZXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBDb2xsZWN0aW9uUHJvdG90eXBlW0lURVJBVE9SXSA9IEFycmF5VmFsdWVzO1xuICAgIH1cbiAgICBpZiAoIUNvbGxlY3Rpb25Qcm90b3R5cGVbVE9fU1RSSU5HX1RBR10pIGhpZGUoQ29sbGVjdGlvblByb3RvdHlwZSwgVE9fU1RSSU5HX1RBRywgQ09MTEVDVElPTl9OQU1FKTtcbiAgICBpZiAoRE9NSXRlcmFibGVzW0NPTExFQ1RJT05fTkFNRV0pIGZvciAodmFyIE1FVEhPRF9OQU1FIGluIEFycmF5SXRlcmF0b3JNZXRob2RzKSB7XG4gICAgICAvLyBzb21lIENocm9tZSB2ZXJzaW9ucyBoYXZlIG5vbi1jb25maWd1cmFibGUgbWV0aG9kcyBvbiBET01Ub2tlbkxpc3RcbiAgICAgIGlmIChDb2xsZWN0aW9uUHJvdG90eXBlW01FVEhPRF9OQU1FXSAhPT0gQXJyYXlJdGVyYXRvck1ldGhvZHNbTUVUSE9EX05BTUVdKSB0cnkge1xuICAgICAgICBoaWRlKENvbGxlY3Rpb25Qcm90b3R5cGUsIE1FVEhPRF9OQU1FLCBBcnJheUl0ZXJhdG9yTWV0aG9kc1tNRVRIT0RfTkFNRV0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgQ29sbGVjdGlvblByb3RvdHlwZVtNRVRIT0RfTkFNRV0gPSBBcnJheUl0ZXJhdG9yTWV0aG9kc1tNRVRIT0RfTkFNRV07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvLyBUaGUgTUlUIExpY2Vuc2UgKE1JVClcbi8vXG4vLyBDb3B5cmlnaHQgKGMpIFNpbmRyZSBTb3JodXMgPHNpbmRyZXNvcmh1c0BnbWFpbC5jb20+IChzaW5kcmVzb3JodXMuY29tKVxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG4vLyBUaGlzIHBpZWNlIG9mIGNvZGUgaXMgYWRvcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9zaW5kcmVzb3JodXMvcC1kZWZlclxuLy8gVGhlIHJlYXNvbiB3aHkgd2UgbmVlZCB0byBmb3JrIGl0IGlzIGJlY2F1c2U6XG4vLyAtIFRoZSBvcmlnaW5hbCBwYWNrYWdlIHB1Ymxpc2hlZCB0byBOUE0gaXMgbm90IEVTNS1jb21wbGlhbnRcbi8vICAgIC0gRHVlIHRvIHRoZSB1c2Ugb2YgYXJyb3cgZnVuY3Rpb25zXG4vLyAtIGNyZWF0ZS1yZWFjdC1hcHBAMSBkb2VzIG5vdCBwbGF5IG5pY2Ugd2l0aCBwYWNrYWdlcyB0aGF0IGFyZSBub3QgRVM1LWNvbXBsaWFudFxuLy8gICAgLSBjcmVhdGUtcmVhY3QtYXBwQDIgZG8gcGxheSBuaWNlLCBidXQgaXQgd2FzIHNvIG5ldyB0aGF0IG1vc3Qgb2YgdGhlIHBlb3BsZSBhcmUgc3RpbGwgb24gQDFcbi8vIENyaXRlcmlhIHRvIHJlbW92ZSB0aGlzIHBhY2thZ2U6XG4vLyAtIFdoZW4gY3JlYXRlLXJlYWN0LWFwcEAyIGJlY29tZSBtYWluc3RyZWFtLCBvcixcbi8vIC0gV2hlbiBwLWRlZmVyIHN0YXJ0IHB1Ymxpc2hpbmcgYSBFUzUtY29tcGxpYW50IHZlcnNpb24gb24gTlBNXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcmV0ID0ge307XG4gIHJldC5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJldC5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICByZXQucmVqZWN0ID0gcmVqZWN0O1xuICB9KTtcbiAgcmV0dXJuIHJldDtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJaTR1THk0dUwzTnlZeTlsZUhSbGNtNWhiQzl3TFdSbFptVnlMbXB6SWwwc0ltNWhiV1Z6SWpwYkltMXZaSFZzWlNJc0ltVjRjRzl5ZEhNaUxDSnlaWFFpTENKd2NtOXRhWE5sSWl3aVVISnZiV2x6WlNJc0luSmxjMjlzZG1VaUxDSnlaV3BsWTNRaVhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVVZCTzBGQlJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVWQk8wRkJRMEU3UVVGRFFUdEJRVVZCT3p0QlFVVkJRU3hOUVVGTkxFTkJRVU5ETEU5QlFWQXNSMEZCYVVJc1dVRkJXVHRCUVVNelFpeE5RVUZOUXl4SFFVRkhMRWRCUVVjc1JVRkJXanRCUVVWQlFTeEZRVUZCUVN4SFFVRkhMRU5CUVVORExFOUJRVW9zUjBGQll5eEpRVUZKUXl4UFFVRktMRU5CUVZrc1ZVRkJWVU1zVDBGQlZpeEZRVUZ0UWtNc1RVRkJia0lzUlVGQk1rSTdRVUZEYmtSS0xFbEJRVUZCTEVkQlFVY3NRMEZCUTBjc1QwRkJTaXhIUVVGalFTeFBRVUZrTzBGQlEwRklMRWxCUVVGQkxFZEJRVWNzUTBGQlEwa3NUVUZCU2l4SFFVRmhRU3hOUVVGaU8wRkJRMFFzUjBGSVlTeERRVUZrTzBGQlMwRXNVMEZCVDBvc1IwRkJVRHRCUVVORUxFTkJWRVFpTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lJdkx5QlVhR1VnVFVsVUlFeHBZMlZ1YzJVZ0tFMUpWQ2xjYmk4dlhHNHZMeUJEYjNCNWNtbG5hSFFnS0dNcElGTnBibVJ5WlNCVGIzSm9kWE1nUEhOcGJtUnlaWE52Y21oMWMwQm5iV0ZwYkM1amIyMCtJQ2h6YVc1a2NtVnpiM0pvZFhNdVkyOXRLVnh1THk5Y2JpOHZJRkJsY20xcGMzTnBiMjRnYVhNZ2FHVnlaV0o1SUdkeVlXNTBaV1FzSUdaeVpXVWdiMllnWTJoaGNtZGxMQ0IwYnlCaGJua2djR1Z5YzI5dUlHOWlkR0ZwYm1sdVp5QmhJR052Y0hsY2JpOHZJRzltSUhSb2FYTWdjMjltZEhkaGNtVWdZVzVrSUdGemMyOWphV0YwWldRZ1pHOWpkVzFsYm5SaGRHbHZiaUJtYVd4bGN5QW9kR2hsSUZ3aVUyOW1kSGRoY21WY0lpa3NJSFJ2SUdSbFlXeGNiaTh2SUdsdUlIUm9aU0JUYjJaMGQyRnlaU0IzYVhSb2IzVjBJSEpsYzNSeWFXTjBhVzl1TENCcGJtTnNkV1JwYm1jZ2QybDBhRzkxZENCc2FXMXBkR0YwYVc5dUlIUm9aU0J5YVdkb2RITmNiaTh2SUhSdklIVnpaU3dnWTI5d2VTd2diVzlrYVdaNUxDQnRaWEpuWlN3Z2NIVmliR2x6YUN3Z1pHbHpkSEpwWW5WMFpTd2djM1ZpYkdsalpXNXpaU3dnWVc1a0wyOXlJSE5sYkd4Y2JpOHZJR052Y0dsbGN5QnZaaUIwYUdVZ1UyOW1kSGRoY21Vc0lHRnVaQ0IwYnlCd1pYSnRhWFFnY0dWeWMyOXVjeUIwYnlCM2FHOXRJSFJvWlNCVGIyWjBkMkZ5WlNCcGMxeHVMeThnWm5WeWJtbHphR1ZrSUhSdklHUnZJSE52TENCemRXSnFaV04wSUhSdklIUm9aU0JtYjJ4c2IzZHBibWNnWTI5dVpHbDBhVzl1Y3pwY2JpOHZYRzR2THlCVWFHVWdZV0p2ZG1VZ1kyOXdlWEpwWjJoMElHNXZkR2xqWlNCaGJtUWdkR2hwY3lCd1pYSnRhWE56YVc5dUlHNXZkR2xqWlNCemFHRnNiQ0JpWlNCcGJtTnNkV1JsWkNCcGJseHVMeThnWVd4c0lHTnZjR2xsY3lCdmNpQnpkV0p6ZEdGdWRHbGhiQ0J3YjNKMGFXOXVjeUJ2WmlCMGFHVWdVMjltZEhkaGNtVXVYRzR2TDF4dUx5OGdWRWhGSUZOUFJsUlhRVkpGSUVsVElGQlNUMVpKUkVWRUlGd2lRVk1nU1ZOY0lpd2dWMGxVU0U5VlZDQlhRVkpTUVU1VVdTQlBSaUJCVGxrZ1MwbE9SQ3dnUlZoUVVrVlRVeUJQVWx4dUx5OGdTVTFRVEVsRlJDd2dTVTVEVEZWRVNVNUhJRUpWVkNCT1QxUWdURWxOU1ZSRlJDQlVUeUJVU0VVZ1YwRlNVa0ZPVkVsRlV5QlBSaUJOUlZKRFNFRk9WRUZDU1V4SlZGa3NYRzR2THlCR1NWUk9SVk5USUVaUFVpQkJJRkJCVWxSSlExVk1RVklnVUZWU1VFOVRSU0JCVGtRZ1RrOU9TVTVHVWtsT1IwVk5SVTVVTGlCSlRpQk9UeUJGVmtWT1ZDQlRTRUZNVENCVVNFVmNiaTh2SUVGVlZFaFBVbE1nVDFJZ1EwOVFXVkpKUjBoVUlFaFBURVJGVWxNZ1FrVWdURWxCUWt4RklFWlBVaUJCVGxrZ1EweEJTVTBzSUVSQlRVRkhSVk1nVDFJZ1QxUklSVkpjYmk4dklFeEpRVUpKVEVsVVdTd2dWMGhGVkVoRlVpQkpUaUJCVGlCQlExUkpUMDRnVDBZZ1EwOU9WRkpCUTFRc0lGUlBVbFFnVDFJZ1QxUklSVkpYU1ZORkxDQkJVa2xUU1U1SElFWlNUMDBzWEc0dkx5QlBWVlFnVDBZZ1QxSWdTVTRnUTA5T1RrVkRWRWxQVGlCWFNWUklJRlJJUlNCVFQwWlVWMEZTUlNCUFVpQlVTRVVnVlZORklFOVNJRTlVU0VWU0lFUkZRVXhKVGtkVElFbE9YRzR2THlCVVNFVWdVMDlHVkZkQlVrVXVYRzVjYmk4dklGUm9hWE1nY0dsbFkyVWdiMllnWTI5a1pTQnBjeUJoWkc5d2RHVmtJR1p5YjIwZ2FIUjBjSE02THk5bmFYUm9kV0l1WTI5dEwzTnBibVJ5WlhOdmNtaDFjeTl3TFdSbFptVnlYRzVjYmk4dklGUm9aU0J5WldGemIyNGdkMmg1SUhkbElHNWxaV1FnZEc4Z1ptOXlheUJwZENCcGN5QmlaV05oZFhObE9seHVMeThnTFNCVWFHVWdiM0pwWjJsdVlXd2djR0ZqYTJGblpTQndkV0pzYVhOb1pXUWdkRzhnVGxCTklHbHpJRzV2ZENCRlV6VXRZMjl0Y0d4cFlXNTBYRzR2THlBZ0lDQXRJRVIxWlNCMGJ5QjBhR1VnZFhObElHOW1JR0Z5Y205M0lHWjFibU4wYVc5dWMxeHVMeThnTFNCamNtVmhkR1V0Y21WaFkzUXRZWEJ3UURFZ1pHOWxjeUJ1YjNRZ2NHeGhlU0J1YVdObElIZHBkR2dnY0dGamEyRm5aWE1nZEdoaGRDQmhjbVVnYm05MElFVlROUzFqYjIxd2JHbGhiblJjYmk4dklDQWdJQzBnWTNKbFlYUmxMWEpsWVdOMExXRndjRUF5SUdSdklIQnNZWGtnYm1salpTd2dZblYwSUdsMElIZGhjeUJ6YnlCdVpYY2dkR2hoZENCdGIzTjBJRzltSUhSb1pTQndaVzl3YkdVZ1lYSmxJSE4wYVd4c0lHOXVJRUF4WEc1Y2JpOHZJRU55YVhSbGNtbGhJSFJ2SUhKbGJXOTJaU0IwYUdseklIQmhZMnRoWjJVNlhHNHZMeUF0SUZkb1pXNGdZM0psWVhSbExYSmxZV04wTFdGd2NFQXlJR0psWTI5dFpTQnRZV2x1YzNSeVpXRnRMQ0J2Y2l4Y2JpOHZJQzBnVjJobGJpQndMV1JsWm1WeUlITjBZWEowSUhCMVlteHBjMmhwYm1jZ1lTQkZVelV0WTI5dGNHeHBZVzUwSUhabGNuTnBiMjRnYjI0Z1RsQk5YRzVjYmlkMWMyVWdjM1J5YVdOMEp6dGNibHh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaUFvS1NCN1hHNGdJR052Ym5OMElISmxkQ0E5SUh0OU8xeHVYRzRnSUhKbGRDNXdjbTl0YVhObElEMGdibVYzSUZCeWIyMXBjMlVvWm5WdVkzUnBiMjRnS0hKbGMyOXNkbVVzSUhKbGFtVmpkQ2tnZTF4dUlDQWdJSEpsZEM1eVpYTnZiSFpsSUQwZ2NtVnpiMngyWlR0Y2JpQWdJQ0J5WlhRdWNtVnFaV04wSUQwZ2NtVnFaV04wTzF4dUlDQjlLVHRjYmx4dUlDQnlaWFIxY200Z2NtVjBPMXh1ZlR0Y2JpSmRmUT09IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfcERlZmVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9leHRlcm5hbC9wLWRlZmVyXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG52YXIgRXZlbnRBc1Byb21pc2UgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFdmVudEFzUHJvbWlzZSgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50QXNQcm9taXNlKTtcblxuICAgIHRoaXMuZGVmZXJzID0gW107XG4gICAgdGhpcy51cGNvbWluZ0RlZmVycmVkID0gbnVsbDtcbiAgICB0aGlzLmV2ZW50TGlzdGVuZXIgPSB0aGlzLmV2ZW50TGlzdGVuZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMub25lID0gdGhpcy5vbmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwY29taW5nID0gdGhpcy51cGNvbWluZy5iaW5kKHRoaXMpO1xuXG4gICAgdGhpc1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogX3RoaXMudXBjb21pbmcoKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhFdmVudEFzUHJvbWlzZSwgW3tcbiAgICBrZXk6IFwiZXZlbnRMaXN0ZW5lclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudExpc3RlbmVyKGV2ZW50KSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLmRlZmVycy5zaGlmdCgpO1xuICAgICAgdmFyIGFyZ3MgPSB0aGlzLm9wdGlvbnMuYXJyYXkgPyBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykgOiBldmVudDtcbiAgICAgIGRlZmVycmVkICYmIGRlZmVycmVkLnJlc29sdmUoYXJncyk7XG5cbiAgICAgIGlmICh0aGlzLnVwY29taW5nRGVmZXJyZWQpIHtcbiAgICAgICAgdGhpcy51cGNvbWluZ0RlZmVycmVkLnJlc29sdmUoYXJncyk7XG4gICAgICAgIHRoaXMudXBjb21pbmdEZWZlcnJlZCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbmUoKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAoMCwgX3BEZWZlci5kZWZhdWx0KSgpO1xuICAgICAgdGhpcy5kZWZlcnMucHVzaChkZWZlcnJlZCk7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBjb21pbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBjb21pbmcoKSB7XG4gICAgICBpZiAoIXRoaXMudXBjb21pbmdEZWZlcnJlZCkge1xuICAgICAgICB0aGlzLnVwY29taW5nRGVmZXJyZWQgPSAoMCwgX3BEZWZlci5kZWZhdWx0KSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy51cGNvbWluZ0RlZmVycmVkLnByb21pc2U7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEV2ZW50QXNQcm9taXNlO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBFdmVudEFzUHJvbWlzZTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklpNHVMM055WXk5cGJtUmxlQzVxY3lKZExDSnVZVzFsY3lJNld5SkZkbVZ1ZEVGelVISnZiV2x6WlNJc0ltOXdkR2x2Ym5NaUxDSmtaV1psY25NaUxDSjFjR052YldsdVowUmxabVZ5Y21Wa0lpd2laWFpsYm5STWFYTjBaVzVsY2lJc0ltSnBibVFpTENKdmJtVWlMQ0oxY0dOdmJXbHVaeUlzSWxONWJXSnZiQ0lzSW1sMFpYSmhkRzl5SWl3aWJtVjRkQ0lzSW1SdmJtVWlMQ0oyWVd4MVpTSXNJbVYyWlc1MElpd2laR1ZtWlhKeVpXUWlMQ0p6YUdsbWRDSXNJbUZ5WjNNaUxDSmhjbkpoZVNJc0luTnNhV05sSWl3aVkyRnNiQ0lzSW1GeVozVnRaVzUwY3lJc0luSmxjMjlzZG1VaUxDSndkWE5vSWl3aWNISnZiV2x6WlNKZExDSnRZWEJ3YVc1bmN5STZJanM3T3pzN096dEJRVUZCT3pzN096czdPenM3TzBsQlJYRkNRU3hqT3pzN1FVRkRia0lzTkVKQlFUQkNPMEZCUVVFN08wRkJRVUVzVVVGQlpFTXNUMEZCWXl4MVJVRkJTaXhGUVVGSk96dEJRVUZCT3p0QlFVTjRRaXhUUVVGTFF5eE5RVUZNTEVkQlFXTXNSVUZCWkR0QlFVTkJMRk5CUVV0RExHZENRVUZNTEVkQlFYZENMRWxCUVhoQ08wRkJRMEVzVTBGQlMwTXNZVUZCVEN4SFFVRnhRaXhMUVVGTFFTeGhRVUZNTEVOQlFXMUNReXhKUVVGdVFpeERRVUYzUWl4SlFVRjRRaXhEUVVGeVFqdEJRVU5CTEZOQlFVdEtMRTlCUVV3c1IwRkJaVUVzVDBGQlpqdEJRVVZCTEZOQlFVdExMRWRCUVV3c1IwRkJWeXhMUVVGTFFTeEhRVUZNTEVOQlFWTkVMRWxCUVZRc1EwRkJZeXhKUVVGa0xFTkJRVmc3UVVGRFFTeFRRVUZMUlN4UlFVRk1MRWRCUVdkQ0xFdEJRVXRCTEZGQlFVd3NRMEZCWTBZc1NVRkJaQ3hEUVVGdFFpeEpRVUZ1UWl4RFFVRm9RanM3UVVGRlFTeFRRVUZMUnl4TlFVRk5MRU5CUVVORExGRkJRVm9zU1VGQmQwSTdRVUZCUVN4aFFVRlBPMEZCUXpkQ1F5eFJRVUZCUVN4SlFVRkpMRVZCUVVVN1FVRkJRU3hwUWtGQlR6dEJRVU5ZUXl4WlFVRkJRU3hKUVVGSkxFVkJRVVVzUzBGRVN6dEJRVVZZUXl4WlFVRkJRU3hMUVVGTExFVkJRVVVzUzBGQlNTeERRVUZEVEN4UlFVRk1PMEZCUmtrc1YwRkJVRHRCUVVGQk8wRkJSSFZDTEU5QlFWQTdRVUZCUVN4TFFVRjRRanRCUVUxRU96czdPMnREUVVWaFRTeExMRVZCUVU4N1FVRkRia0lzVlVGQlRVTXNVVUZCVVN4SFFVRkhMRXRCUVV0YUxFMUJRVXdzUTBGQldXRXNTMEZCV2l4RlFVRnFRanRCUVVOQkxGVkJRVTFETEVsQlFVa3NSMEZCUnl4TFFVRkxaaXhQUVVGTUxFTkJRV0ZuUWl4TFFVRmlMRWRCUVhGQ0xFZEJRVWRETEV0QlFVZ3NRMEZCVTBNc1NVRkJWQ3hEUVVGalF5eFRRVUZrTEVOQlFYSkNMRWRCUVdkRVVDeExRVUUzUkR0QlFVVkJReXhOUVVGQlFTeFJRVUZSTEVsQlFVbEJMRkZCUVZFc1EwRkJRMDhzVDBGQlZDeERRVUZwUWt3c1NVRkJha0lzUTBGQldqczdRVUZGUVN4VlFVRkpMRXRCUVV0aUxHZENRVUZVTEVWQlFUSkNPMEZCUTNwQ0xHRkJRVXRCTEdkQ1FVRk1MRU5CUVhOQ2EwSXNUMEZCZEVJc1EwRkJPRUpNTEVsQlFUbENPMEZCUTBFc1lVRkJTMklzWjBKQlFVd3NSMEZCZDBJc1NVRkJlRUk3UVVGRFJEdEJRVU5HT3pzN01FSkJSVXM3UVVGRFNpeFZRVUZOVnl4UlFVRlJMRWRCUVVjc2MwSkJRV3BDTzBGQlJVRXNWMEZCUzFvc1RVRkJUQ3hEUVVGWmIwSXNTVUZCV2l4RFFVRnBRbElzVVVGQmFrSTdRVUZGUVN4aFFVRlBRU3hSUVVGUkxFTkJRVU5UTEU5QlFXaENPMEZCUTBRN096c3JRa0ZGVlR0QlFVTlVMRlZCUVVrc1EwRkJReXhMUVVGTGNFSXNaMEpCUVZZc1JVRkJORUk3UVVGRE1VSXNZVUZCUzBFc1owSkJRVXdzUjBGQmQwSXNjMEpCUVhoQ08wRkJRMFE3TzBGQlJVUXNZVUZCVHl4TFFVRkxRU3huUWtGQlRDeERRVUZ6UW05Q0xFOUJRVGRDTzBGQlEwUWlMQ0p6YjNWeVkyVnpRMjl1ZEdWdWRDSTZXeUpwYlhCdmNuUWdZM0psWVhSbFJHVm1aWEp5WldRZ1puSnZiU0FuTGk5bGVIUmxjbTVoYkM5d0xXUmxabVZ5Snp0Y2JseHVaWGh3YjNKMElHUmxabUYxYkhRZ1kyeGhjM01nUlhabGJuUkJjMUJ5YjIxcGMyVWdlMXh1SUNCamIyNXpkSEoxWTNSdmNpaHZjSFJwYjI1eklEMGdlMzBwSUh0Y2JpQWdJQ0IwYUdsekxtUmxabVZ5Y3lBOUlGdGRPMXh1SUNBZ0lIUm9hWE11ZFhCamIyMXBibWRFWldabGNuSmxaQ0E5SUc1MWJHdzdYRzRnSUNBZ2RHaHBjeTVsZG1WdWRFeHBjM1JsYm1WeUlEMGdkR2hwY3k1bGRtVnVkRXhwYzNSbGJtVnlMbUpwYm1Rb2RHaHBjeWs3WEc0Z0lDQWdkR2hwY3k1dmNIUnBiMjV6SUQwZ2IzQjBhVzl1Y3p0Y2JseHVJQ0FnSUhSb2FYTXViMjVsSUQwZ2RHaHBjeTV2Ym1VdVltbHVaQ2gwYUdsektUdGNiaUFnSUNCMGFHbHpMblZ3WTI5dGFXNW5JRDBnZEdocGN5NTFjR052YldsdVp5NWlhVzVrS0hSb2FYTXBPMXh1WEc0Z0lDQWdkR2hwYzF0VGVXMWliMnd1YVhSbGNtRjBiM0pkSUQwZ0tDa2dQVDRnS0h0Y2JpQWdJQ0FnSUc1bGVIUTZJQ2dwSUQwK0lDaDdYRzRnSUNBZ0lDQWdJR1J2Ym1VNklHWmhiSE5sTEZ4dUlDQWdJQ0FnSUNCMllXeDFaVG9nZEdocGN5NTFjR052YldsdVp5Z3BYRzRnSUNBZ0lDQjlLVnh1SUNBZ0lIMHBPMXh1SUNCOVhHNWNiaUFnWlhabGJuUk1hWE4wWlc1bGNpaGxkbVZ1ZENrZ2UxeHVJQ0FnSUdOdmJuTjBJR1JsWm1WeWNtVmtJRDBnZEdocGN5NWtaV1psY25NdWMyaHBablFvS1R0Y2JpQWdJQ0JqYjI1emRDQmhjbWR6SUQwZ2RHaHBjeTV2Y0hScGIyNXpMbUZ5Y21GNUlEOGdXMTB1YzJ4cFkyVXVZMkZzYkNoaGNtZDFiV1Z1ZEhNcElEb2daWFpsYm5RN1hHNWNiaUFnSUNCa1pXWmxjbkpsWkNBbUppQmtaV1psY25KbFpDNXlaWE52YkhabEtHRnlaM01wTzF4dVhHNGdJQ0FnYVdZZ0tIUm9hWE11ZFhCamIyMXBibWRFWldabGNuSmxaQ2tnZTF4dUlDQWdJQ0FnZEdocGN5NTFjR052YldsdVowUmxabVZ5Y21Wa0xuSmxjMjlzZG1Vb1lYSm5jeWs3WEc0Z0lDQWdJQ0IwYUdsekxuVndZMjl0YVc1blJHVm1aWEp5WldRZ1BTQnVkV3hzTzF4dUlDQWdJSDFjYmlBZ2ZWeHVYRzRnSUc5dVpTZ3BJSHRjYmlBZ0lDQmpiMjV6ZENCa1pXWmxjbkpsWkNBOUlHTnlaV0YwWlVSbFptVnljbVZrS0NrN1hHNWNiaUFnSUNCMGFHbHpMbVJsWm1WeWN5NXdkWE5vS0dSbFptVnljbVZrS1R0Y2JseHVJQ0FnSUhKbGRIVnliaUJrWldabGNuSmxaQzV3Y205dGFYTmxPMXh1SUNCOVhHNWNiaUFnZFhCamIyMXBibWNvS1NCN1hHNGdJQ0FnYVdZZ0tDRjBhR2x6TG5Wd1kyOXRhVzVuUkdWbVpYSnlaV1FwSUh0Y2JpQWdJQ0FnSUhSb2FYTXVkWEJqYjIxcGJtZEVaV1psY25KbFpDQTlJR055WldGMFpVUmxabVZ5Y21Wa0tDazdYRzRnSUNBZ2ZWeHVYRzRnSUNBZ2NtVjBkWEp1SUhSb2FYTXVkWEJqYjIxcGJtZEVaV1psY25KbFpDNXdjbTl0YVhObE8xeHVJQ0I5WEc1OVhHNGlYWDA9IiwiZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG1cbiAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIG5CaXRzID0gLTdcbiAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMFxuICB2YXIgZCA9IGlzTEUgPyAtMSA6IDFcbiAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblxuICBpICs9IGRcblxuICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBzID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBlTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IGUgPSAoZSAqIDI1NikgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSAobSAqIDI1NikgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXNcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuICAgIGUgPSBlIC0gZUJpYXNcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxufVxuXG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjXG4gIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMClcbiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKVxuICB2YXIgZCA9IGlzTEUgPyAxIDogLTFcbiAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblxuICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKVxuXG4gIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG4gICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwXG4gICAgZSA9IGVNYXhcbiAgfSBlbHNlIHtcbiAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMilcbiAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG4gICAgICBlLS1cbiAgICAgIGMgKj0gMlxuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gY1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcylcbiAgICB9XG4gICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG4gICAgICBlKytcbiAgICAgIGMgLz0gMlxuICAgIH1cblxuICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuICAgICAgbSA9IDBcbiAgICAgIGUgPSBlTWF4XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICgodmFsdWUgKiBjKSAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSBlICsgZUJpYXNcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gMFxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbVxuICBlTGVuICs9IG1MZW5cbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxufVxuIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gIHZhciB1aW50MzIgPSAnVWludDMyQXJyYXknIGluIGdsb2JhbFxuICB2YXIgY3J5cHRvID0gZ2xvYmFsLmNyeXB0byB8fCBnbG9iYWwubXNDcnlwdG9cbiAgdmFyIHJhbmRvID0gY3J5cHRvICYmIHR5cGVvZiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09PSAnZnVuY3Rpb24nXG4gIHZhciBnb29kID0gdWludDMyICYmIHJhbmRvXG4gIGlmICghZ29vZCkgcmV0dXJuIE1hdGgucmFuZG9tXG5cbiAgdmFyIGFyciA9IG5ldyBVaW50MzJBcnJheSgxKVxuICB2YXIgbWF4ID0gTWF0aC5wb3coMiwgMzIpXG4gIGZ1bmN0aW9uIHJhbmRvbSAoKSB7XG4gICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhcnIpXG4gICAgcmV0dXJuIGFyclswXSAvIG1heFxuICB9XG5cbiAgcmFuZG9tLmNyeXB0b2dyYXBoaWMgPSB0cnVlXG4gIHJldHVybiByYW5kb21cbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB3aW5kb3cpXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnNvbGVMb2dnaW5nTGlzdGVuZXIgfSBmcm9tIFwiLi9zcmMvY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgRXZlbnRzIH0gZnJvbSBcIi4vc3JjL2NvbW1vbi9FeHBvcnRzXCI7XG4vLyBDb21tb24uU3RvcmFnZS5TZXRMb2NhbFN0b3JhZ2UobmV3IENvbW1vbi5Ccm93c2VyLkxvY2FsU3RvcmFnZSgpKTtcbi8vIENvbW1vbi5TdG9yYWdlLlNldFNlc3Npb25TdG9yYWdlKG5ldyBDb21tb24uQnJvd3Nlci5TZXNzaW9uU3RvcmFnZSgpKTtcbkV2ZW50cy5pbnN0YW5jZS5hdHRhY2hMaXN0ZW5lcihuZXcgQ29uc29sZUxvZ2dpbmdMaXN0ZW5lcigpKTtcbi8vIFNwZWVjaCBTREsgQVBJXG5leHBvcnQgKiBmcm9tIFwiLi9zcmMvc2RrL0V4cG9ydHNcIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWljcm9zb2Z0LmNvZ25pdGl2ZXNlcnZpY2VzLnNwZWVjaC5zZGsuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEV2ZW50VHlwZSB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIENvbnNvbGVMb2dnaW5nTGlzdGVuZXIge1xuICAgIGNvbnN0cnVjdG9yKGxvZ0xldmVsRmlsdGVyID0gRXZlbnRUeXBlLldhcm5pbmcpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZXZlbnRUeXBlID49IHRoaXMucHJpdkxvZ0xldmVsRmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nID0gdGhpcy50b1N0cmluZyhldmVudCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5ldmVudFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBFdmVudFR5cGUuRGVidWc6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1Zyhsb2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRXZlbnRUeXBlLkluZm86XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKGxvZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBFdmVudFR5cGUuV2FybmluZzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4obG9nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEV2ZW50VHlwZS5FcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGxvZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhsb2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRvU3RyaW5nID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsb2dGcmFnbWVudHMgPSBbXG4gICAgICAgICAgICAgICAgYCR7ZXZlbnQuRXZlbnRUaW1lfWAsXG4gICAgICAgICAgICAgICAgYCR7ZXZlbnQuTmFtZX1gLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wICYmIGV2ZW50Lmhhc093blByb3BlcnR5KHByb3ApICYmXG4gICAgICAgICAgICAgICAgICAgIHByb3AgIT09IFwiZXZlbnRUaW1lXCIgJiYgcHJvcCAhPT0gXCJldmVudFR5cGVcIiAmJlxuICAgICAgICAgICAgICAgICAgICBwcm9wICE9PSBcImV2ZW50SWRcIiAmJiBwcm9wICE9PSBcIm5hbWVcIiAmJlxuICAgICAgICAgICAgICAgICAgICBwcm9wICE9PSBcImNvbnN0cnVjdG9yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBldmVudFtwcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlVG9Mb2cgPSBcIjxOVUxMPlwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodmFsdWUpID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiAodmFsdWUpID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb0xvZyA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvTG9nID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxvZ0ZyYWdtZW50cy5wdXNoKGAke3Byb3B9OiAke3ZhbHVlVG9Mb2d9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxvZ0ZyYWdtZW50cy5qb2luKFwiIHwgXCIpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZMb2dMZXZlbEZpbHRlciA9IGxvZ0xldmVsRmlsdGVyO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29uc29sZUxvZ2dpbmdMaXN0ZW5lci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0ICogZnJvbSBcIi4vQ29uc29sZUxvZ2dpbmdMaXN0ZW5lclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vTWljQXVkaW9Tb3VyY2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0ZpbGVBdWRpb1NvdXJjZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vUENNUmVjb3JkZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1dlYnNvY2tldENvbm5lY3Rpb25cIjtcbmV4cG9ydCAqIGZyb20gXCIuL1dlYnNvY2tldE1lc3NhZ2VBZGFwdGVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9SZXBsYXlhYmxlQXVkaW9Ob2RlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9Qcm94eUluZm9cIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhwb3J0cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQXVkaW9TdHJlYW1Gb3JtYXQgfSBmcm9tIFwiLi4vLi4vc3JjL3Nkay9BdWRpby9BdWRpb1N0cmVhbUZvcm1hdFwiO1xuaW1wb3J0IHsgY29ubmVjdGl2aXR5LCB0eXBlLCB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvU291cmNlRXJyb3JFdmVudCwgQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudCwgQXVkaW9Tb3VyY2VPZmZFdmVudCwgQXVkaW9Tb3VyY2VSZWFkeUV2ZW50LCBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50LCBBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudCwgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCwgQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudCwgY3JlYXRlTm9EYXNoR3VpZCwgRXZlbnRzLCBFdmVudFNvdXJjZSwgUHJvbWlzZUhlbHBlciwgU3RyZWFtLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIEZpbGVBdWRpb1NvdXJjZSB7XG4gICAgY29uc3RydWN0b3IoZmlsZSwgYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICB0aGlzLnByaXZTdHJlYW1zID0ge307XG4gICAgICAgIHRoaXMudHVybk9uID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBGaWxlUmVhZGVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBGaWxlUmVhZGVyLlwiO1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VFcnJvckV2ZW50KGVycm9yTXNnLCBcIlwiKSk7IC8vIGluaXRpYWxpemF0aW9uIGVycm9yIC0gbm8gc3RyZWFtaWQgYXQgdGhpcyBwb2ludFxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21FcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnByaXZGaWxlLm5hbWUubGFzdEluZGV4T2YoXCIud2F2XCIpICE9PSB0aGlzLnByaXZGaWxlLm5hbWUubGVuZ3RoIC0gNCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gdGhpcy5wcml2RmlsZS5uYW1lICsgXCIgaXMgbm90IHN1cHBvcnRlZC4gT25seSBXQVZFIGZpbGVzIGFyZSBhbGxvd2VkIGF0IHRoZSBtb21lbnQuXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZUVycm9yRXZlbnQoZXJyb3JNc2csIFwiXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tRXJyb3IoZXJyb3JNc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wcml2RmlsZS5zaXplID4gRmlsZUF1ZGlvU291cmNlLk1BWF9TSVpFKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSB0aGlzLnByaXZGaWxlLm5hbWUgKyBcIiBleGNlZWRzIHRoZSBtYXhpbXVtIGFsbG93ZWQgZmlsZSBzaXplIChcIiArIEZpbGVBdWRpb1NvdXJjZS5NQVhfU0laRSArIFwiKS5cIjtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlRXJyb3JFdmVudChlcnJvck1zZywgXCJcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21FcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnQodGhpcy5wcml2SWQpKTsgLy8gbm8gc3RyZWFtIGlkXG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlUmVhZHlFdmVudCh0aGlzLnByaXZJZCkpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hdHRhY2ggPSAoYXVkaW9Ob2RlSWQpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWQoYXVkaW9Ob2RlSWQpLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aCgoc3RyZWFtUmVhZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFjaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtUmVhZGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR1cm5PZmYoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdWRpb05vZGVJZDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVhZDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmVhbVJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRldGFjaCA9IChhdWRpb05vZGVJZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGF1ZGlvTm9kZUlkICYmIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF07XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnR1cm5PZmYgPSAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN0cmVhbUlkIGluIHRoaXMucHJpdlN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5wcml2U3RyZWFtc1tzdHJlYW1JZF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHJlYW0gJiYgIXN0cmVhbS5pc0Nsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlT2ZmRXZlbnQodGhpcy5wcml2SWQpKTsgLy8gbm8gc3RyZWFtIG5vd1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGxvYWQgPSAoYXVkaW9Ob2RlSWQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnR1cm5PbigpXG4gICAgICAgICAgICAgICAgLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aCgoXykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBTdHJlYW0oYXVkaW9Ob2RlSWQpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdID0gc3RyZWFtO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0T2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgZW5kT2Zmc2V0ID0gRmlsZUF1ZGlvU291cmNlLkNIVU5LX1NJWkU7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc05leHRDaHVuayA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIG91dHB1dCBzdHJlYW0gd2FzIGNsb3NlZCAoc29tZWJvZHkgY2FsbGVkIFR1cm5PZmYpLiBXZSdyZSBkb25lIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLndyaXRlU3RyZWFtQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiByZWFkZXIucmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZE9mZnNldCA8IHRoaXMucHJpdkZpbGUuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRPZmZzZXQgPSBlbmRPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRPZmZzZXQgPSBNYXRoLm1pbihlbmRPZmZzZXQgKyBGaWxlQXVkaW9Tb3VyY2UuQ0hVTktfU0laRSwgdGhpcy5wcml2RmlsZS5zaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5wcml2RmlsZS5zbGljZShzdGFydE9mZnNldCwgZW5kT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSB3cml0dGVuIHRoZSBlbnRpcmUgZmlsZSB0byB0aGUgb3V0cHV0IHN0cmVhbSwgY2FuIGNsb3NlIGl0IG5vdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gcHJvY2Vzc05leHRDaHVuaztcbiAgICAgICAgICAgICAgICByZWFkZXIub25lcnJvciA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBFcnJvciBvY2N1cnJlZCB3aGlsZSBwcm9jZXNzaW5nICcke3RoaXMucHJpdkZpbGUubmFtZX0nLiAke2V2ZW50fWA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQsIGVycm9yTXNnKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMucHJpdkZpbGUuc2xpY2Uoc3RhcnRPZmZzZXQsIGVuZE9mZnNldCk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGNodW5rKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25FdmVudCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2RXZlbnRzLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZJZCA9IGF1ZGlvU291cmNlSWQgPyBhdWRpb1NvdXJjZUlkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZFdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2RmlsZSA9IGZpbGU7XG4gICAgfVxuICAgIGdldCBmb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiBGaWxlQXVkaW9Tb3VyY2UuRklMRUZPUk1BVDtcbiAgICB9XG4gICAgZ2V0IGV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV2ZW50cztcbiAgICB9XG4gICAgZ2V0IGRldmljZUluZm8oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21SZXN1bHQoe1xuICAgICAgICAgICAgYml0c3BlcnNhbXBsZTogRmlsZUF1ZGlvU291cmNlLkZJTEVGT1JNQVQuYml0c1BlclNhbXBsZSxcbiAgICAgICAgICAgIGNoYW5uZWxjb3VudDogRmlsZUF1ZGlvU291cmNlLkZJTEVGT1JNQVQuY2hhbm5lbHMsXG4gICAgICAgICAgICBjb25uZWN0aXZpdHk6IGNvbm5lY3Rpdml0eS5Vbmtub3duLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyOiBcIlNwZWVjaCBTREtcIixcbiAgICAgICAgICAgIG1vZGVsOiBcIkZpbGVcIixcbiAgICAgICAgICAgIHNhbXBsZXJhdGU6IEZpbGVBdWRpb1NvdXJjZS5GSUxFRk9STUFULnNhbXBsZXNQZXJTZWMsXG4gICAgICAgICAgICB0eXBlOiB0eXBlLkZpbGUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIFJlY29tbWVuZGVkIHNhbXBsZSByYXRlIChieXRlcy9zZWNvbmQpLlxuRmlsZUF1ZGlvU291cmNlLlNBTVBMRV9SQVRFID0gMTYwMDAgKiAyOyAvLyAxNiBrSHogKiAxNiBiaXRzXG4vLyBXZSBzaG91bGQgc3RyZWFtIGF1ZGlvIGF0IG5vIGZhc3RlciB0aGFuIDJ4IHJlYWwtdGltZSAoaS5lLiwgc2VuZCBmaXZlIGNodW5rc1xuLy8gcGVyIHNlY29uZCwgd2l0aCB0aGUgY2h1bmsgc2l6ZSA9PSBzYW1wbGUgcmF0ZSBpbiBieXRlcyBwZXIgc2Vjb25kICogMiAvIDUpLlxuRmlsZUF1ZGlvU291cmNlLkNIVU5LX1NJWkUgPSBGaWxlQXVkaW9Tb3VyY2UuU0FNUExFX1JBVEUgKiAyIC8gNTtcbi8vIDEwIHNlY29uZHMgb2YgYXVkaW8gaW4gYnl0ZXMgPVxuLy8gc2FtcGxlIHJhdGUgKGJ5dGVzL3NlY29uZCkgKiA2MDAgKHNlY29uZHMpICsgNDQgKHNpemUgb2YgdGhlIHdhdmUgaGVhZGVyKS5cbkZpbGVBdWRpb1NvdXJjZS5NQVhfU0laRSA9IEZpbGVBdWRpb1NvdXJjZS5TQU1QTEVfUkFURSAqIDYwMCArIDQ0O1xuRmlsZUF1ZGlvU291cmNlLkZJTEVGT1JNQVQgPSBBdWRpb1N0cmVhbUZvcm1hdC5nZXRXYXZlRm9ybWF0UENNKDE2MDAwLCAxNiwgMSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZpbGVBdWRpb1NvdXJjZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQXVkaW9TdHJlYW1Gb3JtYXQsIH0gZnJvbSBcIi4uLy4uL3NyYy9zZGsvQXVkaW8vQXVkaW9TdHJlYW1Gb3JtYXRcIjtcbmltcG9ydCB7IGNvbm5lY3Rpdml0eSwgdHlwZSB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvU291cmNlRXJyb3JFdmVudCwgQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudCwgQXVkaW9Tb3VyY2VPZmZFdmVudCwgQXVkaW9Tb3VyY2VSZWFkeUV2ZW50LCBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50LCBBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudCwgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCwgQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudCwgQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtLCBjcmVhdGVOb0Rhc2hHdWlkLCBEZWZlcnJlZCwgRXZlbnRzLCBFdmVudFNvdXJjZSwgUHJvbWlzZUhlbHBlciwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmV4cG9ydCBjb25zdCBBdWRpb1dvcmtsZXRTb3VyY2VVUkxQcm9wZXJ0eU5hbWUgPSBcIk1JQ1JPUEhPTkUtV29ya2xldFNvdXJjZVVybFwiO1xuZXhwb3J0IGNsYXNzIE1pY0F1ZGlvU291cmNlIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2UmVjb3JkZXIsIG91dHB1dENodW5rU2l6ZSwgYXVkaW9Tb3VyY2VJZCwgZGV2aWNlSWQpIHtcbiAgICAgICAgdGhpcy5wcml2UmVjb3JkZXIgPSBwcml2UmVjb3JkZXI7XG4gICAgICAgIHRoaXMuZGV2aWNlSWQgPSBkZXZpY2VJZDtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtcyA9IHt9O1xuICAgICAgICB0aGlzLnR1cm5PbiA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVBdWRpb0NvbnRleHQoKTtcbiAgICAgICAgICAgIGNvbnN0IG5hdiA9IHdpbmRvdy5uYXZpZ2F0b3I7XG4gICAgICAgICAgICBsZXQgZ2V0VXNlck1lZGlhID0gKG5hdi5nZXRVc2VyTWVkaWEgfHxcbiAgICAgICAgICAgICAgICBuYXYud2Via2l0R2V0VXNlck1lZGlhIHx8XG4gICAgICAgICAgICAgICAgbmF2Lm1vekdldFVzZXJNZWRpYSB8fFxuICAgICAgICAgICAgICAgIG5hdi5tc0dldFVzZXJNZWRpYSk7XG4gICAgICAgICAgICBpZiAoISFuYXYubWVkaWFEZXZpY2VzKSB7XG4gICAgICAgICAgICAgICAgZ2V0VXNlck1lZGlhID0gKGNvbnN0cmFpbnRzLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbmF2Lm1lZGlhRGV2aWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLmdldFVzZXJNZWRpYShjb25zdHJhaW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3NDYWxsYmFjaylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnZXRVc2VyTWVkaWEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IFwiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGdldFVzZXJNZWRpYS5cIjtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucmVqZWN0KGVycm9yTXNnKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlRXJyb3JFdmVudChlcnJvck1zZywgXCJcIikpOyAvLyBtaWMgaW5pdGlhbGl6ZWQgZXJyb3IgLSBubyBzdHJlYW1pZCBhdCB0aGlzIHBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnQodGhpcy5wcml2SWQpKTsgLy8gbm8gc3RyZWFtIGlkXG4gICAgICAgICAgICAgICAgICAgIGdldFVzZXJNZWRpYSh7IGF1ZGlvOiB0aGlzLmRldmljZUlkID8geyBkZXZpY2VJZDogdGhpcy5kZXZpY2VJZCB9IDogdHJ1ZSwgdmlkZW86IGZhbHNlIH0sIChtZWRpYVN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFTdHJlYW0gPSBtZWRpYVN0cmVhbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VSZWFkeUV2ZW50KHRoaXMucHJpdklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBFcnJvciBvY2N1cnJlZCBkdXJpbmcgbWljcm9waG9uZSBpbml0aWFsaXphdGlvbjogJHtlcnJvcn1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG1wID0gdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSEFDSzogdGhpcyBzaG91bGQgYmUgaGFuZGxlZCB0aHJvdWdoIG9uRXJyb3IgY2FsbGJhY2tzIG9mIGFsbCBwcm9taXNlcyB1cCB0aGUgc3RhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmZvcnR1bmF0ZWx5LCB0aGUgY3VycmVudCBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdCBwcm92aWRlIGFuIGVhc3kgd2F5IHRvIHJlamVjdCBwcm9taXNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2l0aG91dCBhIGxvdCBvZiBjb2RlIHJlcGxpY2F0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZml4IHByb21pc2UgaW1wbGVtZW50YXRpb24sIGFsbG93IGZvciBhIGdyYWNlZnVsIHJlamVjdCBjaGFpbmluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXAucmVqZWN0KGVycm9yTXNnKTsgLy8gdGhpcyB3aWxsIGJ1YmJsZSB1cCB0aHJvdWdoIHRoZSB3aG9sZSBjaGFpbiBvZiBwcm9taXNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggZWFjaCBuZXcgbGV2ZWwgYWRkaW5nIGV4dHJhIFwiVW5oYW5kbGVkIGNhbGxiYWNrIGVycm9yXCIgcHJlZml4IHRvIHRoZSBlcnJvciBtZXNzYWdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBsaW5lIGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZUVycm9yRXZlbnQodGhpcy5wcml2SWQsIGVycm9yTXNnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbnRleHQuc3RhdGUgPT09IFwic3VzcGVuZGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogT24gaU9TLCB0aGUgV2ViIEF1ZGlvIEFQSSByZXF1aXJlcyBzb3VuZHMgdG8gYmUgdHJpZ2dlcmVkIGZyb20gYW4gZXhwbGljaXQgdXNlciBhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9XZWJBdWRpby93ZWItYXVkaW8tYXBpL2lzc3Vlcy83OTBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udGV4dC5yZXN1bWUoKS50aGVuKG5leHQsIChyZWFzb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbC5yZWplY3QoYEZhaWxlZCB0byBpbml0aWFsaXplIGF1ZGlvIGNvbnRleHQ6ICR7cmVhc29ufWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hdHRhY2ggPSAoYXVkaW9Ob2RlSWQpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW4oYXVkaW9Ob2RlSWQpLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aCgoc3RyZWFtUmVhZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFjaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtUmVhZGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR1cm5PZmYoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnByaXZTdHJlYW1zW2F1ZGlvTm9kZUlkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdWRpb05vZGVJZDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVhZDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmVhbVJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRldGFjaCA9IChhdWRpb05vZGVJZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGF1ZGlvTm9kZUlkICYmIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF07XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnR1cm5PZmYgPSAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN0cmVhbUlkIGluIHRoaXMucHJpdlN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5wcml2U3RyZWFtc1tzdHJlYW1JZF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZU9mZkV2ZW50KHRoaXMucHJpdklkKSk7IC8vIG5vIHN0cmVhbSBub3dcbiAgICAgICAgICAgIHRoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lBdWRpb0NvbnRleHQoKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21SZXN1bHQodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubGlzdGVuID0gKGF1ZGlvTm9kZUlkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50dXJuT24oKVxuICAgICAgICAgICAgICAgIC5vblN1Y2Nlc3NDb250aW51ZVdpdGgoKF8pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtKHRoaXMucHJpdk91dHB1dENodW5rU2l6ZSwgYXVkaW9Ob2RlSWQpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdID0gc3RyZWFtO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29yZGVyLnJlY29yZCh0aGlzLnByaXZDb250ZXh0LCB0aGlzLnByaXZNZWRpYVN0cmVhbSwgc3RyZWFtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQsIGVycm9yKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25FdmVudCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2RXZlbnRzLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNyZWF0ZUF1ZGlvQ29udGV4dCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQXVkaW9Db250ZXh0XG4gICAgICAgICAgICBjb25zdCBBdWRpb0NvbnRleHQgPSAod2luZG93LkF1ZGlvQ29udGV4dClcbiAgICAgICAgICAgICAgICB8fCAod2luZG93LndlYmtpdEF1ZGlvQ29udGV4dClcbiAgICAgICAgICAgICAgICB8fCBmYWxzZTtcbiAgICAgICAgICAgIGlmICghQXVkaW9Db250ZXh0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYiBBdWRpbyBBUEkgKEF1ZGlvQ29udGV4dCBpcyBub3QgYXZhaWxhYmxlKS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZDb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlc3Ryb3lBdWRpb0NvbnRleHQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdkNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNvcmRlci5yZWxlYXNlTWVkaWFSZXNvdXJjZXModGhpcy5wcml2Q29udGV4dCk7XG4gICAgICAgICAgICAvLyBUaGlzIHBhdHRlcm4gYnJvdWdodCB0byB5b3UgYnkgYSBidWcgaW4gdGhlIFR5cGVTY3JpcHQgY29tcGlsZXIgd2hlcmUgaXRcbiAgICAgICAgICAgIC8vIGNvbmZ1c2VzIHRoZSAoXCJjbG9zZVwiIGluIHRoaXMucHJpdkNvbnRleHQpIHdpdGggdGhpcy5wcml2Q29udGV4dCBhbHdheXMgYmVpbmcgbnVsbCBhcyB0aGUgYWx0ZXJuYXRlLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8xMTQ5OFxuICAgICAgICAgICAgbGV0IGhhc0Nsb3NlID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoXCJjbG9zZVwiIGluIHRoaXMucHJpdkNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBoYXNDbG9zZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFzQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb250ZXh0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udGV4dCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChudWxsICE9PSB0aGlzLnByaXZDb250ZXh0ICYmIHRoaXMucHJpdkNvbnRleHQuc3RhdGUgPT09IFwicnVubmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgLy8gU3VzcGVuZCBhY3R1YWxseSB0YWtlcyBhIGNhbGxiYWNrLCBidXQgYW5hbG9nb3VzIHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIHJlc3VtZSBtZXRob2QsIGl0J2xsIGJlIG9ubHkgZmlyZWQgaWYgc3VzcGVuZCBpcyBjYWxsZWRcbiAgICAgICAgICAgICAgICAvLyBpbiBhIGRpcmVjdCByZXNwb25zZSB0byBhIHVzZXIgYWN0aW9uLiBUaGUgbGF0ZXIgaXMgbm90IGFsd2F5c1xuICAgICAgICAgICAgICAgIC8vIHRoZSBjYXNlLCBhcyBUdXJuT2ZmIGlzIGFsc28gY2FsbGVkLCB3aGVuIHdlIHJlY2VpdmUgYW5cbiAgICAgICAgICAgICAgICAvLyBlbmQtb2Ytc3BlZWNoIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmljZS4gU28sIGRvaW5nIGEgYmVzdCBlZmZvcnRcbiAgICAgICAgICAgICAgICAvLyBmaXJlLWFuZC1mb3JnZXQgaGVyZS5cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb250ZXh0LnN1c3BlbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2T3V0cHV0Q2h1bmtTaXplID0gb3V0cHV0Q2h1bmtTaXplO1xuICAgICAgICB0aGlzLnByaXZJZCA9IGF1ZGlvU291cmNlSWQgPyBhdWRpb1NvdXJjZUlkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZFdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICB9XG4gICAgZ2V0IGZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIE1pY0F1ZGlvU291cmNlLkFVRElPRk9STUFUO1xuICAgIH1cbiAgICBnZXQgZXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRzO1xuICAgIH1cbiAgICBnZXQgZGV2aWNlSW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWljcm9waG9uZUxhYmVsKCkub25TdWNjZXNzQ29udGludWVXaXRoKChsYWJlbCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBiaXRzcGVyc2FtcGxlOiBNaWNBdWRpb1NvdXJjZS5BVURJT0ZPUk1BVC5iaXRzUGVyU2FtcGxlLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxjb3VudDogTWljQXVkaW9Tb3VyY2UuQVVESU9GT1JNQVQuY2hhbm5lbHMsXG4gICAgICAgICAgICAgICAgY29ubmVjdGl2aXR5OiBjb25uZWN0aXZpdHkuVW5rbm93bixcbiAgICAgICAgICAgICAgICBtYW51ZmFjdHVyZXI6IFwiU3BlZWNoIFNES1wiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBsYWJlbCxcbiAgICAgICAgICAgICAgICBzYW1wbGVyYXRlOiBNaWNBdWRpb1NvdXJjZS5BVURJT0ZPUk1BVC5zYW1wbGVzUGVyU2VjLFxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUuTWljcm9waG9uZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09IEF1ZGlvV29ya2xldFNvdXJjZVVSTFByb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjb3JkZXIuc2V0V29ya2xldFVybCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9wZXJ0eSAnXCIgKyBuYW1lICsgXCInIGlzIG5vdCBzdXBwb3J0ZWQgb24gTWljcm9waG9uZS5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TWljcm9waG9uZUxhYmVsKCkge1xuICAgICAgICBjb25zdCBkZWZhdWx0TWljcm9waG9uZU5hbWUgPSBcIm1pY3JvcGhvbmVcIjtcbiAgICAgICAgLy8gSWYgd2UgZGlkIHRoaXMgYWxyZWFkeSwgcmV0dXJuIHRoZSB2YWx1ZS5cbiAgICAgICAgaWYgKHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIHN0cmVhbSBpc24ndCBjdXJyZW50bHkgcnVubmluZywgd2UgY2FuJ3QgcXVlcnkgZGV2aWNlcyBiZWNhdXNlIHNlY3VyaXR5LlxuICAgICAgICBpZiAodGhpcy5wcml2TWVkaWFTdHJlYW0gPT09IHVuZGVmaW5lZCB8fCAhdGhpcy5wcml2TWVkaWFTdHJlYW0uYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KGRlZmF1bHRNaWNyb3Bob25lTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0dXAgYSBkZWZhdWx0XG4gICAgICAgIHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCA9IGRlZmF1bHRNaWNyb3Bob25lTmFtZTtcbiAgICAgICAgLy8gR2V0IHRoZSBpZCBvZiB0aGUgZGV2aWNlIHJ1bm5pbmcgdGhlIGF1ZGlvIHRyYWNrLlxuICAgICAgICBjb25zdCBtaWNyb3Bob25lRGV2aWNlSWQgPSB0aGlzLnByaXZNZWRpYVN0cmVhbS5nZXRUcmFja3MoKVswXS5nZXRTZXR0aW5ncygpLmRldmljZUlkO1xuICAgICAgICAvLyBJZiB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgZ2V0dGluZyB0aGUgZGV2aWNlIElELCBzZXQgYSBkZWZhdWx0IGFuZCByZXR1cm4uXG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1pY3JvcGhvbmVEZXZpY2VJZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0aGlzLnByaXZNaWNyb3Bob25lTGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIC8vIEVudW1lcmF0ZSB0aGUgbWVkaWEgZGV2aWNlcy5cbiAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkudGhlbigoZGV2aWNlcykgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBkZXZpY2Ugb2YgZGV2aWNlcykge1xuICAgICAgICAgICAgICAgIGlmIChkZXZpY2UuZGV2aWNlSWQgPT09IG1pY3JvcGhvbmVEZXZpY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGb3VuZCB0aGUgZGV2aWNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCA9IGRldmljZS5sYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0aGlzLnByaXZNaWNyb3Bob25lTGFiZWwpO1xuICAgICAgICB9LCAoKSA9PiBkZWZlcnJlZC5yZXNvbHZlKHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCkpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICAgIH1cbn1cbk1pY0F1ZGlvU291cmNlLkFVRElPRk9STUFUID0gQXVkaW9TdHJlYW1Gb3JtYXQuZ2V0RGVmYXVsdElucHV0Rm9ybWF0KCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1pY0F1ZGlvU291cmNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSaWZmUGNtRW5jb2RlciB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFBjbVJlY29yZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5yZWNvcmQgPSAoY29udGV4dCwgbWVkaWFTdHJlYW0sIG91dHB1dFN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVzaXJlZFNhbXBsZVJhdGUgPSAxNjAwMDtcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdE5vZGUgPSAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBidWZmZXJTaXplID0gMDtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoYnVmZmVyU2l6ZSwgMSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZWJraXQgKDw9IHZlcnNpb24gMzEpIHJlcXVpcmVzIGEgdmFsaWQgYnVmZmVyU2l6ZS5cbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyU2l6ZSA9IDIwNDg7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhdWRpb1NhbXBsZVJhdGUgPSBjb250ZXh0LnNhbXBsZVJhdGU7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChidWZmZXJTaXplIDwgMTYzODQgJiYgYXVkaW9TYW1wbGVSYXRlID49ICgyICogZGVzaXJlZFNhbXBsZVJhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJTaXplIDw8PSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9TYW1wbGVSYXRlID4+PSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihidWZmZXJTaXplLCAxLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgY29uc3Qgd2F2ZVN0cmVhbUVuY29kZXIgPSBuZXcgUmlmZlBjbUVuY29kZXIoY29udGV4dC5zYW1wbGVSYXRlLCBkZXNpcmVkU2FtcGxlUmF0ZSk7XG4gICAgICAgICAgICBsZXQgbmVlZEhlYWRlciA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHNjcmlwdE5vZGUub25hdWRpb3Byb2Nlc3MgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEZyYW1lID0gZXZlbnQuaW5wdXRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCk7XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dFN0cmVhbSAmJiAhb3V0cHV0U3RyZWFtLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdhdmVGcmFtZSA9IHdhdmVTdHJlYW1FbmNvZGVyLmVuY29kZShuZWVkSGVhZGVyLCBpbnB1dEZyYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhd2F2ZUZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRTdHJlYW0ud3JpdGVTdHJlYW1DaHVuayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiB3YXZlRnJhbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZEhlYWRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IG1pY0lucHV0ID0gY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShtZWRpYVN0cmVhbSk7XG4gICAgICAgICAgICAvLyBodHRwczovL3dlYmF1ZGlvLmdpdGh1Yi5pby93ZWItYXVkaW8tYXBpLyNhdWRpb3dvcmtsZXRcbiAgICAgICAgICAgIC8vIFVzaW5nIEF1ZGlvV29ya2xldCB0byBpbXByb3ZlIGF1ZGlvIHF1YWxpdHkgYW5kIGF2b2lkIGF1ZGlvIGdsaXRjaGVzIGR1ZSB0byBibG9ja2luZyB0aGUgVUkgdGhyZWFkXG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTcGVlY2hQcm9jZXNzb3JTY3JpcHQgJiYgISFjb250ZXh0LmF1ZGlvV29ya2xldCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuYXVkaW9Xb3JrbGV0XG4gICAgICAgICAgICAgICAgICAgIC5hZGRNb2R1bGUodGhpcy5wcml2U3BlZWNoUHJvY2Vzc29yU2NyaXB0KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtsZXROb2RlID0gbmV3IEF1ZGlvV29ya2xldE5vZGUoY29udGV4dCwgXCJzcGVlY2gtcHJvY2Vzc29yXCIpO1xuICAgICAgICAgICAgICAgICAgICB3b3JrbGV0Tm9kZS5wb3J0Lm9ubWVzc2FnZSA9IChldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRGcmFtZSA9IGV2LmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0U3RyZWFtICYmICFvdXRwdXRTdHJlYW0uaXNDbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3YXZlRnJhbWUgPSB3YXZlU3RyZWFtRW5jb2Rlci5lbmNvZGUobmVlZEhlYWRlciwgaW5wdXRGcmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhd2F2ZUZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFN0cmVhbS53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogd2F2ZUZyYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVlZEhlYWRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbWljSW5wdXQuY29ubmVjdCh3b3JrbGV0Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtsZXROb2RlLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0UHJvY2Vzc29yTm9kZTogd29ya2xldE5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG1pY0lucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiBtZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBtaWNJbnB1dC5jb25uZWN0KHNjcmlwdE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHROb2RlLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0UHJvY2Vzc29yTm9kZTogc2NyaXB0Tm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbWljSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW06IG1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWljSW5wdXQuY29ubmVjdChzY3JpcHROb2RlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHROb2RlLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdFByb2Nlc3Nvck5vZGU6IHNjcmlwdE5vZGUsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbWljSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbTogbWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWxlYXNlTWVkaWFSZXNvdXJjZXMgPSAoY29udGV4dCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzLnNjcmlwdFByb2Nlc3Nvck5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc2NyaXB0UHJvY2Vzc29yTm9kZS5kaXNjb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVJlc291cmNlcy5zY3JpcHRQcm9jZXNzb3JOb2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzLnNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVJlc291cmNlcy5zb3VyY2UuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVJlc291cmNlcy5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzLnNvdXJjZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzZXRXb3JrbGV0VXJsKHVybCkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9jZXNzb3JTY3JpcHQgPSB1cmw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QQ01SZWNvcmRlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFByb3h5SW5mbyB7XG4gICAgY29uc3RydWN0b3IocHJveHlIb3N0TmFtZSwgcHJveHlQb3J0LCBwcm94eVVzZXJOYW1lLCBwcm94eVBhc3N3b3JkKSB7XG4gICAgICAgIHRoaXMucHJpdlByb3h5SG9zdE5hbWUgPSBwcm94eUhvc3ROYW1lO1xuICAgICAgICB0aGlzLnByaXZQcm94eVBvcnQgPSBwcm94eVBvcnQ7XG4gICAgICAgIHRoaXMucHJpdlByb3h5VXNlck5hbWUgPSBwcm94eVVzZXJOYW1lO1xuICAgICAgICB0aGlzLnByaXZQcm94eVBhc3N3b3JkID0gcHJveHlQYXNzd29yZDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21SZWNvZ25pemVyQ29uZmlnKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5SW5mbyhjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5SG9zdE5hbWUpLCBwYXJzZUludChjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UG9ydCksIDEwKSwgY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lKSwgY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBhc3N3b3JkKSk7XG4gICAgfVxuICAgIGdldCBIb3N0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3h5SG9zdE5hbWU7XG4gICAgfVxuICAgIGdldCBQb3J0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJveHlQb3J0O1xuICAgIH1cbiAgICBnZXQgVXNlck5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm94eVVzZXJOYW1lO1xuICAgIH1cbiAgICBnZXQgUGFzc3dvcmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm94eVBhc3N3b3JkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJveHlJbmZvLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm9taXNlSGVscGVyLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFJlcGxheWFibGVBdWRpb05vZGUge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlLCBmb3JtYXQpIHtcbiAgICAgICAgdGhpcy5wcml2QnVmZmVycyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZSZXBsYXlPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZMYXN0U2hyaW5rT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2QnVmZmVyU3RhcnRPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZCdWZmZXJTZXJpYWwgPSAwO1xuICAgICAgICB0aGlzLnByaXZCdWZmZXJlZEJ5dGVzID0gMDtcbiAgICAgICAgdGhpcy5wcml2UmVwbGF5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkxhc3RDaHVua0FjcXVpcmVkVGltZSA9IDA7XG4gICAgICAgIHRoaXMuaWQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlLmlkKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZSA9IGF1ZGlvU291cmNlO1xuICAgICAgICB0aGlzLnByaXZGb3JtYXQgPSBmb3JtYXQ7XG4gICAgfVxuICAgIC8vIFJlYWRzIGFuZCByZXR1cm5zIHRoZSBuZXh0IGNodW5rIG9mIGF1ZGlvIGJ1ZmZlci5cbiAgICAvLyBJZiByZXBsYXkgb2YgZXhpc3RpbmcgYnVmZmVycyBhcmUgbmVlZGVkLCByZWFkKCkgd2lsbCBmaXJzdCBzZWVrIGFuZCByZXBsYXlcbiAgICAvLyBleGlzdGluZyBjb250ZW50LCBhbmQgdXBvaW4gY29tcGxldGlvbiBpdCB3aWxsIHJlYWQgbmV3IGNvbnRlbnQgZnJvbSB0aGUgdW5kZXJseWluZ1xuICAgIC8vIGF1ZGlvIG5vZGUsIHNhdmluZyB0aGF0IGNvbnRlbnQgaW50byB0aGUgcmVwbGF5YWJsZSBidWZmZXJzLlxuICAgIHJlYWQoKSB7XG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgcmVwbGF5IHJlcXVlc3QgdG8gaG9ub3IuXG4gICAgICAgIGlmICghIXRoaXMucHJpdlJlcGxheSAmJiB0aGlzLnByaXZCdWZmZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgc3RhcnQgcG9pbnQgaW4gdGhlIGJ1ZmZlcnMuXG4gICAgICAgICAgICAvLyBPZmZzZXRzIGFyZSBpbiAxMDBucyBpbmNyZW1lbnRzLlxuICAgICAgICAgICAgLy8gU28gaG93IG1hbnkgYnl0ZXMgZG8gd2UgbmVlZCB0byBzZWVrIHRvIGdldCB0aGUgcmlnaHQgb2Zmc2V0P1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0VG9TZWVrID0gdGhpcy5wcml2UmVwbGF5T2Zmc2V0IC0gdGhpcy5wcml2QnVmZmVyU3RhcnRPZmZzZXQ7XG4gICAgICAgICAgICBsZXQgYnl0ZXNUb1NlZWsgPSBNYXRoLnJvdW5kKG9mZnNldFRvU2VlayAqIHRoaXMucHJpdkZvcm1hdC5hdmdCeXRlc1BlclNlYyAqIDFlLTcpO1xuICAgICAgICAgICAgaWYgKDAgIT09IChieXRlc1RvU2VlayAlIDIpKSB7XG4gICAgICAgICAgICAgICAgYnl0ZXNUb1NlZWsrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgdGhpcy5wcml2QnVmZmVycy5sZW5ndGggJiYgYnl0ZXNUb1NlZWsgPj0gdGhpcy5wcml2QnVmZmVyc1tpXS5jaHVuay5idWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGJ5dGVzVG9TZWVrIC09IHRoaXMucHJpdkJ1ZmZlcnNbaSsrXS5jaHVuay5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJldFZhbCA9IHRoaXMucHJpdkJ1ZmZlcnNbaV0uY2h1bmsuYnVmZmVyLnNsaWNlKGJ5dGVzVG9TZWVrKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcGxheU9mZnNldCArPSAocmV0VmFsLmJ5dGVMZW5ndGggLyB0aGlzLnByaXZGb3JtYXQuYXZnQnl0ZXNQZXJTZWMpICogMWUrNztcbiAgICAgICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgYnVmZmVycywgc3RvcCByZXBsYXlpbmcuXG4gICAgICAgICAgICBpZiAoaSA9PT0gdGhpcy5wcml2QnVmZmVycy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVwbGF5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IHJldFZhbCxcbiAgICAgICAgICAgICAgICBpc0VuZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiB0aGlzLnByaXZCdWZmZXJzW2ldLmNodW5rLnRpbWVSZWNlaXZlZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGUucmVhZCgpXG4gICAgICAgICAgICAub25TdWNjZXNzQ29udGludWVXaXRoKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LmJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkJ1ZmZlcnMucHVzaChuZXcgQnVmZmVyRW50cnkocmVzdWx0LCB0aGlzLnByaXZCdWZmZXJTZXJpYWwrKywgdGhpcy5wcml2QnVmZmVyZWRCeXRlcykpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkJ1ZmZlcmVkQnl0ZXMgKz0gcmVzdWx0LmJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRldGFjaCgpIHtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlLmRldGFjaCgpO1xuICAgICAgICB0aGlzLnByaXZCdWZmZXJzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXBsYXkoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZCdWZmZXJzICYmIDAgIT09IHRoaXMucHJpdkJ1ZmZlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXBsYXkgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVwbGF5T2Zmc2V0ID0gdGhpcy5wcml2TGFzdFNocmlua09mZnNldDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTaHJpbmtzIHRoZSBleGlzdGluZyBhdWRpbyBidWZmZXJzIHRvIHN0YXJ0IGF0IHRoZSBuZXcgb2Zmc2V0LCBvciBhdCB0aGVcbiAgICAvLyBiZWdpbm5pbmcgb2YgdGhlIGJ1ZmZlciBjbG9zZXN0IHRvIHRoZSByZXF1ZXN0ZWQgb2Zmc2V0LlxuICAgIC8vIEEgcmVwbGF5IHJlcXVlc3Qgd2lsbCBzdGFydCBmcm9tIHRoZSBsYXN0IHNocmluayBwb2ludC5cbiAgICBzaHJpbmtCdWZmZXJzKG9mZnNldCkge1xuICAgICAgICB0aGlzLnByaXZMYXN0U2hyaW5rT2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICAvLyBGaW5kIHRoZSBzdGFydCBwb2ludCBpbiB0aGUgYnVmZmVycy5cbiAgICAgICAgLy8gT2Zmc2V0cyBhcmUgaW4gMTAwbnMgaW5jcmVtZW50cy5cbiAgICAgICAgLy8gU28gaG93IG1hbnkgYnl0ZXMgZG8gd2UgbmVlZCB0byBzZWVrIHRvIGdldCB0aGUgcmlnaHQgb2Zmc2V0P1xuICAgICAgICBjb25zdCBvZmZzZXRUb1NlZWsgPSBvZmZzZXQgLSB0aGlzLnByaXZCdWZmZXJTdGFydE9mZnNldDtcbiAgICAgICAgbGV0IGJ5dGVzVG9TZWVrID0gTWF0aC5yb3VuZChvZmZzZXRUb1NlZWsgKiB0aGlzLnByaXZGb3JtYXQuYXZnQnl0ZXNQZXJTZWMgKiAxZS03KTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHRoaXMucHJpdkJ1ZmZlcnMubGVuZ3RoICYmIGJ5dGVzVG9TZWVrID49IHRoaXMucHJpdkJ1ZmZlcnNbaV0uY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgIGJ5dGVzVG9TZWVrIC09IHRoaXMucHJpdkJ1ZmZlcnNbaSsrXS5jaHVuay5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZCdWZmZXJTdGFydE9mZnNldCA9IE1hdGgucm91bmQob2Zmc2V0IC0gKChieXRlc1RvU2VlayAvIHRoaXMucHJpdkZvcm1hdC5hdmdCeXRlc1BlclNlYykgKiAxZSs3KSk7XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlcnMgPSB0aGlzLnByaXZCdWZmZXJzLnNsaWNlKGkpO1xuICAgIH1cbiAgICAvLyBGaW5kcyB0aGUgdGltZSBhIGJ1ZmZlciBvZiBhdWRpbyB3YXMgZmlyc3Qgc2VlbiBieSBvZmZzZXQuXG4gICAgZmluZFRpbWVBdE9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgaWYgKG9mZnNldCA8IHRoaXMucHJpdkJ1ZmZlclN0YXJ0T2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMucHJpdkJ1ZmZlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0T2Zmc2V0ID0gKHZhbHVlLmJ5dGVPZmZzZXQgLyB0aGlzLnByaXZGb3JtYXQuYXZnQnl0ZXNQZXJTZWMpICogMWU3O1xuICAgICAgICAgICAgY29uc3QgZW5kT2Zmc2V0ID0gc3RhcnRPZmZzZXQgKyAoKHZhbHVlLmNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoIC8gdGhpcy5wcml2Rm9ybWF0LmF2Z0J5dGVzUGVyU2VjKSAqIDFlNyk7XG4gICAgICAgICAgICBpZiAob2Zmc2V0ID49IHN0YXJ0T2Zmc2V0ICYmIG9mZnNldCA8PSBlbmRPZmZzZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuY2h1bmsudGltZVJlY2VpdmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cbi8vIFByaW1hcnkgdXNlIG9mIHRoaXMgY2xhc3MgaXMgdG8gaGVscCBkZWJ1Z2dpbmcgcHJvYmxlbXMgd2l0aCB0aGUgcmVwbGF5XG4vLyBjb2RlLiBJZiB0aGUgbWVtb3J5IGNvc3Qgb2YgYWxsb2MgLyBkZWFsbG9jIGdldHMgdG9vIG11Y2gsIGRyb3AgaXQgYW5kIGp1c3QgdXNlXG4vLyB0aGUgQXJyYXlCdWZmZXIgZGlyZWN0bHkuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmNsYXNzIEJ1ZmZlckVudHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihjaHVuaywgc2VyaWFsLCBieXRlT2Zmc2V0KSB7XG4gICAgICAgIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgICAgICAgdGhpcy5zZXJpYWwgPSBzZXJpYWw7XG4gICAgICAgIHRoaXMuYnl0ZU9mZnNldCA9IGJ5dGVPZmZzZXQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXBsYXlhYmxlQXVkaW9Ob2RlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgY3JlYXRlTm9EYXNoR3VpZCwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IFdlYnNvY2tldE1lc3NhZ2VBZGFwdGVyIH0gZnJvbSBcIi4vV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXJcIjtcbmV4cG9ydCBjbGFzcyBXZWJzb2NrZXRDb25uZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmksIHF1ZXJ5UGFyYW1ldGVycywgaGVhZGVycywgbWVzc2FnZUZvcm1hdHRlciwgcHJveHlJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRpc3Bvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzRGlzcG9zZWQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RhdGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2VBZGFwdGVyLnN0YXRlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2VBZGFwdGVyLm9wZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIuc2VuZChtZXNzYWdlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWFkID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlQWRhcHRlci5yZWFkKCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICghdXJpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJ1cmlcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtZXNzYWdlRm9ybWF0dGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJtZXNzYWdlRm9ybWF0dGVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdk1lc3NhZ2VGb3JtYXR0ZXIgPSBtZXNzYWdlRm9ybWF0dGVyO1xuICAgICAgICBsZXQgcXVlcnlQYXJhbXMgPSBcIlwiO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGlmIChxdWVyeVBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFyYW1OYW1lIGluIHF1ZXJ5UGFyYW1ldGVycykge1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMgKz0gKChpID09PSAwKSAmJiAodXJpLmluZGV4T2YoXCI/XCIpID09PSAtMSkpID8gXCI/XCIgOiBcIiZcIjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5UGFyYW1ldGVyc1twYXJhbU5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMgKz0gYCR7cGFyYW1OYW1lfT0ke3ZhbH1gO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoZWFkZXJzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGhlYWRlck5hbWUgaW4gaGVhZGVycykge1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zICs9IGkgPT09IDAgPyBcIj9cIiA6IFwiJlwiO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBlbmNvZGVVUklDb21wb25lbnQoaGVhZGVyc1toZWFkZXJOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zICs9IGAke2hlYWRlck5hbWV9PSR7dmFsfWA7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2VXJpID0gdXJpICsgcXVlcnlQYXJhbXM7XG4gICAgICAgIHRoaXMucHJpdklkID0gY29ubmVjdGlvbklkID8gY29ubmVjdGlvbklkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIgPSBuZXcgV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIodGhpcy5wcml2VXJpLCB0aGlzLmlkLCB0aGlzLnByaXZNZXNzYWdlRm9ybWF0dGVyLCBwcm94eUluZm8sIGhlYWRlcnMpO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG4gICAgZ2V0IGV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlQWRhcHRlci5ldmVudHM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1XZWJzb2NrZXRDb25uZWN0aW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgQ29ubmVjdGlvbkNsb3NlZEV2ZW50LCBDb25uZWN0aW9uRXN0YWJsaXNoZWRFdmVudCwgQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50LCBDb25uZWN0aW9uTWVzc2FnZVNlbnRFdmVudCwgQ29ubmVjdGlvbk9wZW5SZXNwb25zZSwgQ29ubmVjdGlvblN0YXJ0RXZlbnQsIENvbm5lY3Rpb25TdGF0ZSwgRGVmZXJyZWQsIEV2ZW50cywgRXZlbnRTb3VyY2UsIE1lc3NhZ2VUeXBlLCBQcm9taXNlSGVscGVyLCBRdWV1ZSwgUmF3V2Vic29ja2V0TWVzc2FnZSwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCAqIGFzIEh0dHBzUHJveHlBZ2VudCBmcm9tIFwiaHR0cHMtcHJveHktYWdlbnRcIjtcbmltcG9ydCAqIGFzIHdzIGZyb20gXCJ3c1wiO1xuaW1wb3J0ICogYXMgb2NzcCBmcm9tIFwiLi4vLi4vZXh0ZXJuYWwvb2NzcC9vY3NwXCI7XG5leHBvcnQgY2xhc3MgV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHVyaSwgY29ubmVjdGlvbklkLCBtZXNzYWdlRm9ybWF0dGVyLCBwcm94eUluZm8sIGhlYWRlcnMpIHtcbiAgICAgICAgdGhpcy5vcGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21FcnJvcihgQ2Fubm90IG9wZW4gYSBjb25uZWN0aW9uIHRoYXQgaXMgaW4gJHt0aGlzLnByaXZDb25uZWN0aW9uU3RhdGV9IHN0YXRlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbC5wcm9taXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkNlcnRpZmljYXRlVmFsaWRhdGVkRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0aW5nO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFdlYlNvY2tldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIuZm9yY2VOcG1XZWJTb2NrZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQnJvd3NlciBoYW5kbGVzIGNlcnQgY2hlY2tzLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDZXJ0aWZpY2F0ZVZhbGlkYXRlZERlZmVycmFsLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdldlYnNvY2tldENsaWVudCA9IG5ldyBXZWJTb2NrZXQodGhpcy5wcml2VXJpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3h5SW5mbyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3h5SW5mby5Ib3N0TmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3h5SW5mby5Qb3J0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaHR0cFByb3h5T3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3N0OiB0aGlzLnByb3h5SW5mby5Ib3N0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3J0OiB0aGlzLnByb3h5SW5mby5Qb3J0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IHRoaXMucHJveHlJbmZvLlVzZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cFByb3h5T3B0aW9ucy5oZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlByb3h5LUF1dGhlbnRpY2F0aW9uXCI6IFwiQmFzaWMgXCIgKyBuZXcgQnVmZmVyKHRoaXMucHJveHlJbmZvLlVzZXJOYW1lICsgXCI6XCIgKyAodGhpcy5wcm94eUluZm8uUGFzc3dvcmQgPT09IHVuZGVmaW5lZCkgPyBcIlwiIDogdGhpcy5wcm94eUluZm8uUGFzc3dvcmQpLnRvU3RyaW5nKFwiYmFzZTY0XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlcXVlc3RPQ1NQXCI6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBodHRwUHJveHlBZ2VudCA9IG5ldyBIdHRwc1Byb3h5QWdlbnQoaHR0cFByb3h5T3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBodHRwc09wdGlvbnMgPSB7IGFnZW50OiBodHRwUHJveHlBZ2VudCwgaGVhZGVyczogdGhpcy5wcml2SGVhZGVycyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50ID0gbmV3IHdzKHRoaXMucHJpdlVyaSwgaHR0cHNPcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIHRvIGJlIG5vdGlmaWVkIHdoZW4gV2ViU29ja2V0IHVwZ3JhZGUgaGFwcGVucyBzbyB3ZSBjYW4gY2hlY2sgdGhlIHZhbGlkaXR5IG9mIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2VydGlmaWNhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQuYWRkTGlzdGVuZXIoXCJ1cGdyYWRlXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGxzU29ja2V0ID0gZS5zb2NrZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVlciA9IHRsc1NvY2tldC5nZXRQZWVyQ2VydGlmaWNhdGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29yayB0aGUgc29ja2V0IHVudGlsIHdlIGtub3cgaWYgdGhlIGNlcnQgaXMgZ29vZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bHNTb2NrZXQuY29yaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9jc3AuY2hlY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZXJ0OiBwZWVyLnJhdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cE9wdGlvbnM6IGh0dHBzT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVyOiBwZWVyLmlzc3VlckNlcnRpZmljYXRlLnJhdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IsIHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNlcnRpZmljYXRlVmFsaWRhdGVkRGVmZXJyYWwucmVqZWN0KGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGxzU29ja2V0LmRlc3Ryb3koZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q2VydGlmaWNhdGVWYWxpZGF0ZWREZWZlcnJhbC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGxzU29ja2V0LnVuY29yaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBvY3NwIGxpYnJhcnkgd2lsbCBoYW5kbGUgdmFsaWRhdGlvbiBmb3IgdXMgYW5kIGZhaWwgdGhlIGNvbm5lY3Rpb24gaWYgbmVlZGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q2VydGlmaWNhdGVWYWxpZGF0ZWREZWZlcnJhbC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2NzcEFnZW50ID0gbmV3IG9jc3AuQWdlbnQoe30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgYWdlbnQ6IG9jc3BBZ2VudCwgaGVhZGVyczogdGhpcy5wcml2SGVhZGVycyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50ID0gbmV3IHdzKHRoaXMucHJpdlVyaSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50LmJpbmFyeVR5cGUgPSBcImFycmF5YnVmZmVyXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjZWl2aW5nTWVzc2FnZVF1ZXVlID0gbmV3IFF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RGlzY29ubmVjdERlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U2VuZE1lc3NhZ2VRdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1NlbmRRdWV1ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsLnJlc29sdmUobmV3IENvbm5lY3Rpb25PcGVuUmVzcG9uc2UoNTAwLCBlcnJvcikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwucHJvbWlzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBDb25uZWN0aW9uU3RhcnRFdmVudCh0aGlzLnByaXZDb25uZWN0aW9uSWQsIHRoaXMucHJpdlVyaSkpO1xuICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50Lm9ub3BlbiA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q2VydGlmaWNhdGVWYWxpZGF0ZWREZWZlcnJhbC5wcm9taXNlKCkub24oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50KHRoaXMucHJpdkNvbm5lY3Rpb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwucmVzb2x2ZShuZXcgQ29ubmVjdGlvbk9wZW5SZXNwb25zZSgyMDAsIFwiXCIpKTtcbiAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50Lm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IFVuZGVyc3RhbmQgd2hhdCB0aGlzIGlzIGVycm9yIGlzLiBXaWxsIHdlIHN0aWxsIGdldCBvbkNsb3NlID9cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvblN0YXRlICE9PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGluZykge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBJcyB0aGlzIHJlcXVpcmVkID9cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5vbkV2ZW50KG5ldyBDb25uZWN0aW9uRXJyb3JFdmVudChlcnJvck1zZywgY29ubmVjdGlvbklkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucHJpdldlYnNvY2tldENsaWVudC5vbmNsb3NlID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkO1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25Fc3RhYmxpc2hFcnJvckV2ZW50KHRoaXMuY29ubmVjdGlvbklkLCBlLmNvZGUsIGUucmVhc29uKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbC5yZXNvbHZlKG5ldyBDb25uZWN0aW9uT3BlblJlc3BvbnNlKGUuY29kZSwgZS5yZWFzb24pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQ29ubmVjdGlvbkNsb3NlZEV2ZW50KHRoaXMucHJpdkNvbm5lY3Rpb25JZCwgZS5jb2RlLCBlLnJlYXNvbikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2xvc2UoZS5jb2RlLCBlLnJlYXNvbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50Lm9ubWVzc2FnZSA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV0d29ya1JlY2VpdmVkVGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBpZCA9ICsrdGhpcy5pZENvdW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY2VpdmluZ01lc3NhZ2VRdWV1ZS5lbnF1ZXVlRnJvbVByb21pc2UoZGVmZXJyZWQucHJvbWlzZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYXdNZXNzYWdlID0gbmV3IFJhd1dlYnNvY2tldE1lc3NhZ2UoTWVzc2FnZVR5cGUuQmluYXJ5LCBlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TWVzc2FnZUZvcm1hdHRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0Nvbm5lY3Rpb25NZXNzYWdlKHJhd01lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKChjb25uZWN0aW9uTWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50KHRoaXMucHJpdkNvbm5lY3Rpb25JZCwgbmV0d29ya1JlY2VpdmVkVGltZSwgY29ubmVjdGlvbk1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbm5lY3Rpb25NZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2ZW50cyBmb3IgdGhlc2UgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChgSW52YWxpZCBiaW5hcnkgbWVzc2FnZSBmb3JtYXQuIEVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYXdNZXNzYWdlID0gbmV3IFJhd1dlYnNvY2tldE1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lc3NhZ2VGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Db25uZWN0aW9uTWVzc2FnZShyYXdNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbigoY29ubmVjdGlvbk1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25NZXNzYWdlUmVjZWl2ZWRFdmVudCh0aGlzLnByaXZDb25uZWN0aW9uSWQsIG5ldHdvcmtSZWNlaXZlZFRpbWUsIGNvbm5lY3Rpb25NZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb25uZWN0aW9uTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBFdmVudHMgZm9yIHRoZXNlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoYEludmFsaWQgdGV4dCBtZXNzYWdlIGZvcm1hdC4gRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgIT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tRXJyb3IoYENhbm5vdCBzZW5kIG9uIGNvbm5lY3Rpb24gdGhhdCBpcyBpbiAke3RoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZX0gc3RhdGVgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VTZW5kU3RhdHVzRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VTZW5kRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlNlbmRNZXNzYWdlUXVldWUuZW5xdWV1ZUZyb21Qcm9taXNlKG1lc3NhZ2VTZW5kRGVmZXJyYWwucHJvbWlzZSgpKTtcbiAgICAgICAgICAgIHRoaXMucHJpdk1lc3NhZ2VGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgICAuZnJvbUNvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgLm9uKChyYXdNZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZVNlbmREZWZlcnJhbC5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgUmF3V2Vic29ja2V0TWVzc2FnZTogcmF3TWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgc2VuZFN0YXR1c0RlZmVycmFsOiBtZXNzYWdlU2VuZFN0YXR1c0RlZmVycmFsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZVNlbmREZWZlcnJhbC5yZWplY3QoYEVycm9yIGZvcm1hdHRpbmcgdGhlIG1lc3NhZ2UuICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlU2VuZFN0YXR1c0RlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWFkID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSAhPT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21FcnJvcihgQ2Fubm90IHJlYWQgb24gY29ubmVjdGlvbiB0aGF0IGlzIGluICR7dGhpcy5wcml2Q29ubmVjdGlvblN0YXRlfSBzdGF0ZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY2VpdmluZ01lc3NhZ2VRdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2xvc2UgPSAocmVhc29uKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2V2Vic29ja2V0Q2xpZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSAhPT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQuY2xvc2UoMTAwMCwgcmVhc29uID8gcmVhc29uIDogXCJOb3JtYWwgY2xvc3VyZSBieSBjbGllbnRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJhbC5wcm9taXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RGlzY29ubmVjdERlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kUmF3TWVzc2FnZSA9IChzZW5kSXRlbSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBpbmRpY2F0ZXMgd2UgYXJlIGRyYWluaW5nIHRoZSBxdWV1ZSBhbmQgaXQgY2FtZSB3aXRoIG5vIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgaWYgKCFzZW5kSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50KHRoaXMucHJpdkNvbm5lY3Rpb25JZCwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBzZW5kSXRlbS5NZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50LnNlbmQoc2VuZEl0ZW0uUmF3V2Vic29ja2V0TWVzc2FnZS5wYXlsb2FkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tRXJyb3IoYHdlYnNvY2tldCBzZW5kIGVycm9yOiAke2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25DbG9zZSA9IChjb2RlLCByZWFzb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNsb3NlUmVhc29uID0gYENvbm5lY3Rpb24gY2xvc2VkLiAke2NvZGV9OiAke3JlYXNvbn1gO1xuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkRpc2Nvbm5lY3REZWZlcnJhbC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjZWl2aW5nTWVzc2FnZVF1ZXVlLmRpc3Bvc2UocmVhc29uKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY2VpdmluZ01lc3NhZ2VRdWV1ZS5kcmFpbkFuZERpc3Bvc2UoKHBlbmRpbmdSZWNlaXZlSXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2ZW50cyBmb3IgdGhlc2UgP1xuICAgICAgICAgICAgICAgIC8vIExvZ2dlci5pbnN0YW5jZS5vbkV2ZW50KG5ldyBMb2dnaW5nRXZlbnQoTG9nVHlwZS5XYXJuaW5nLCBudWxsLCBgRmFpbGVkIHRvIHByb2Nlc3MgcmVjZWl2ZWQgbWVzc2FnZS4gUmVhc29uOiAke2Nsb3NlUmVhc29ufSwgTWVzc2FnZTogJHtKU09OLnN0cmluZ2lmeShwZW5kaW5nUmVjZWl2ZUl0ZW0pfWApKTtcbiAgICAgICAgICAgIH0sIGNsb3NlUmVhc29uKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlNlbmRNZXNzYWdlUXVldWUuZHJhaW5BbmREaXNwb3NlKChwZW5kaW5nU2VuZEl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nU2VuZEl0ZW0uc2VuZFN0YXR1c0RlZmVycmFsLnJlamVjdChjbG9zZVJlYXNvbik7XG4gICAgICAgICAgICB9LCBjbG9zZVJlYXNvbik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJvY2Vzc1NlbmRRdWV1ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdlNlbmRNZXNzYWdlUXVldWVcbiAgICAgICAgICAgICAgICAuZGVxdWV1ZSgpXG4gICAgICAgICAgICAgICAgLm9uKChzZW5kSXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGluZGljYXRlcyB3ZSBhcmUgZHJhaW5pbmcgdGhlIHF1ZXVlIGFuZCBpdCBjYW1lIHdpdGggbm8gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbmRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kUmF3TWVzc2FnZShzZW5kSXRlbSlcbiAgICAgICAgICAgICAgICAgICAgLm9uKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEl0ZW0uc2VuZFN0YXR1c0RlZmVycmFsLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzU2VuZFF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgfSwgKHNlbmRFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZW5kSXRlbS5zZW5kU3RhdHVzRGVmZXJyYWwucmVqZWN0KHNlbmRFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1NlbmRRdWV1ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25FdmVudCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cy5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCF1cmkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcInVyaVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1lc3NhZ2VGb3JtYXR0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcIm1lc3NhZ2VGb3JtYXR0ZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm94eUluZm8gPSBwcm94eUluZm87XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25FdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbklkID0gY29ubmVjdGlvbklkO1xuICAgICAgICB0aGlzLnByaXZNZXNzYWdlRm9ybWF0dGVyID0gbWVzc2FnZUZvcm1hdHRlcjtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLk5vbmU7XG4gICAgICAgIHRoaXMucHJpdlVyaSA9IHVyaTtcbiAgICAgICAgdGhpcy5wcml2SGVhZGVycyA9IGhlYWRlcnM7XG4gICAgfVxuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25FdmVudHM7XG4gICAgfVxufVxuV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIuZm9yY2VOcG1XZWJTb2NrZXQgPSBmYWxzZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogQGNsYXNzIEFkZGVkTG1JbnRlbnRcbiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQWRkZWRMbUludGVudCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gbW9kZWxJbXBsIC0gVGhlIG1vZGVsLlxuICAgICAqIEBwYXJhbSBpbnRlbnROYW1lIC0gVGhlIGludGVudCBuYW1lLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG1vZGVsSW1wbCwgaW50ZW50TmFtZSkge1xuICAgICAgICB0aGlzLm1vZGVsSW1wbCA9IG1vZGVsSW1wbDtcbiAgICAgICAgdGhpcy5pbnRlbnROYW1lID0gaW50ZW50TmFtZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFkZGVkTG1JbnRlbnQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgSlNPTiB1c2VkIGluIHRoZSBhZ2VudC5jb25maWcgbWVzc2FnZSBzZW50IHRvIHRoZSBzcGVlY2ggc2VydmljZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50Q29uZmlnIHtcbiAgICB0b0pzb25TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmlQcml2Q29uZmlnKTtcbiAgICB9XG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pUHJpdkNvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0dGVyIGZvciB0aGUgYWdlbnQuY29uZmlnIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgYSBKU09OIHNlcmlhbGl6YWJsZSBvYmplY3QuXG4gICAgICovXG4gICAgc2V0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaVByaXZDb25maWcgPSB2YWx1ZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFnZW50Q29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgUHJvbWlzZUhlbHBlciB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQXV0aEluZm8gfSBmcm9tIFwiLi9JQXV0aGVudGljYXRpb25cIjtcbmNvbnN0IEF1dGhIZWFkZXIgPSBcIk9jcC1BcGltLVN1YnNjcmlwdGlvbi1LZXlcIjtcbi8qKlxuICogQGNsYXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBDb2duaXRpdmVTdWJzY3JpcHRpb25LZXlBdXRoZW50aWNhdGlvbiB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIENvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25LZXkgLSBUaGUgc3Vic2NyaXB0aW9uIGtleVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogRmV0Y2hlcyB0aGUgc3Vic2NyaXB0aW9uIGtleS5cbiAgICAgICAgICogQG1lbWJlclxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aEZldGNoRXZlbnRJZCAtIFRoZSBpZCB0byBmZXRjaC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmV0Y2ggPSAoYXV0aEZldGNoRXZlbnRJZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0aGlzLnByaXZBdXRoSW5mbyk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGZXRjaGVzIHRoZSBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAgICAgKiBAbWVtYmVyXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRoRmV0Y2hFdmVudElkIC0gVGhlIGlkIHRvIGZldGNoLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mZXRjaE9uRXhwaXJ5ID0gKGF1dGhGZXRjaEV2ZW50SWQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21SZXN1bHQodGhpcy5wcml2QXV0aEluZm8pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwic3Vic2NyaXB0aW9uS2V5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkF1dGhJbmZvID0gbmV3IEF1dGhJbmZvKEF1dGhIZWFkZXIsIHN1YnNjcmlwdGlvbktleSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2duaXRpdmVTdWJzY3JpcHRpb25LZXlBdXRoZW50aWNhdGlvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQXJndW1lbnROdWxsRXJyb3IgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1dGhJbmZvIH0gZnJvbSBcIi4vSUF1dGhlbnRpY2F0aW9uXCI7XG5jb25zdCBBdXRoSGVhZGVyID0gXCJBdXRob3JpemF0aW9uXCI7XG5leHBvcnQgY2xhc3MgQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZmV0Y2hDYWxsYmFjaywgZmV0Y2hPbkV4cGlyeUNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZmV0Y2ggPSAoYXV0aEZldGNoRXZlbnRJZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkZldGNoQ2FsbGJhY2soYXV0aEZldGNoRXZlbnRJZCkub25TdWNjZXNzQ29udGludWVXaXRoKCh0b2tlbikgPT4gbmV3IEF1dGhJbmZvKEF1dGhIZWFkZXIsIHRva2VuKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmV0Y2hPbkV4cGlyeSA9IChhdXRoRmV0Y2hFdmVudElkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RmV0Y2hPbkV4cGlyeUNhbGxiYWNrKGF1dGhGZXRjaEV2ZW50SWQpLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aCgodG9rZW4pID0+IG5ldyBBdXRoSW5mbyhBdXRoSGVhZGVyLCB0b2tlbikpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIWZldGNoQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImZldGNoQ2FsbGJhY2tcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmZXRjaE9uRXhwaXJ5Q2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImZldGNoT25FeHBpcnlDYWxsYmFja1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZGZXRjaENhbGxiYWNrID0gZmV0Y2hDYWxsYmFjaztcbiAgICAgICAgdGhpcy5wcml2RmV0Y2hPbkV4cGlyeUNhbGxiYWNrID0gZmV0Y2hPbkV4cGlyeUNhbGxiYWNrO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgU2VydmljZVByb3BlcnRpZXNQcm9wZXJ0eU5hbWUsIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgUXVlcnlQYXJhbWV0ZXJOYW1lcyB9IGZyb20gXCIuL1F1ZXJ5UGFyYW1ldGVyTmFtZXNcIjtcbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uRmFjdG9yeUJhc2Uge1xuICAgIHNldENvbW1vblVybFBhcmFtcyhjb25maWcsIHF1ZXJ5UGFyYW1zLCBlbmRwb2ludCkge1xuICAgICAgICB0aGlzLnNldFVybFBhcmFtZXRlcihQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuYWJsZUF1ZGlvTG9nZ2luZywgUXVlcnlQYXJhbWV0ZXJOYW1lcy5FbmFibGVBdWRpb0xvZ2dpbmcsIGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50KTtcbiAgICAgICAgdGhpcy5zZXRVcmxQYXJhbWV0ZXIoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFdvcmRMZXZlbFRpbWVzdGFtcHMsIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuRW5hYmxlV29yZExldmVsVGltZXN0YW1wcywgY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnQpO1xuICAgICAgICB0aGlzLnNldFVybFBhcmFtZXRlcihQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Qcm9mYW5pdHlPcHRpb24sIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuUHJvZmFuaWZ5LCBjb25maWcsIHF1ZXJ5UGFyYW1zLCBlbmRwb2ludCk7XG4gICAgICAgIHRoaXMuc2V0VXJsUGFyYW1ldGVyKFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW5pdGlhbFNpbGVuY2VUaW1lb3V0TXMsIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuSW5pdGlhbFNpbGVuY2VUaW1lb3V0TXMsIGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50KTtcbiAgICAgICAgdGhpcy5zZXRVcmxQYXJhbWV0ZXIoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRTaWxlbmNlVGltZW91dE1zLCBRdWVyeVBhcmFtZXRlck5hbWVzLkVuZFNpbGVuY2VUaW1lb3V0TXMsIGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50KTtcbiAgICAgICAgdGhpcy5zZXRVcmxQYXJhbWV0ZXIoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfU3RhYmxlUGFydGlhbFJlc3VsdFRocmVzaG9sZCwgUXVlcnlQYXJhbWV0ZXJOYW1lcy5TdGFibGVJbnRlcm1lZGlhdGVUaHJlc2hvbGQsIGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50KTtcbiAgICAgICAgY29uc3Qgc2VydmljZVByb3BlcnRpZXMgPSBKU09OLnBhcnNlKGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lLCBcInt9XCIpKTtcbiAgICAgICAgT2JqZWN0LmtleXMoc2VydmljZVByb3BlcnRpZXMpLmZvckVhY2goKHZhbHVlLCBudW0sIGFycmF5KSA9PiB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtc1t2YWx1ZV0gPSBzZXJ2aWNlUHJvcGVydGllc1t2YWx1ZV07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRVcmxQYXJhbWV0ZXIocHJvcElkLCBwYXJhbWV0ZXJOYW1lLCBjb25maWcsIHF1ZXJ5UGFyYW1zLCBlbmRwb2ludCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KHByb3BJZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKHZhbHVlICYmICghZW5kcG9pbnQgfHwgZW5kcG9pbnQuc2VhcmNoKHBhcmFtZXRlck5hbWUpID09PSAtMSkpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW3BhcmFtZXRlck5hbWVdID0gdmFsdWUudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ubmVjdGlvbkZhY3RvcnlCYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm94eUluZm8sIFdlYnNvY2tldENvbm5lY3Rpb24sIH0gZnJvbSBcIi4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IE91dHB1dEZvcm1hdCwgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbkZhY3RvcnlCYXNlXCI7XG5pbXBvcnQgeyBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgUXVlcnlQYXJhbWV0ZXJOYW1lcyB9IGZyb20gXCIuL1F1ZXJ5UGFyYW1ldGVyTmFtZXNcIjtcbmNvbnN0IGJhc2VVcmwgPSBcImNvbnZhaS5zcGVlY2gubWljcm9zb2Z0LmNvbVwiO1xuY29uc3QgYm90RnJhbWV3b3JrID0ge1xuICAgIGF1dGhIZWFkZXI6IFwiWC1ETFMtU2VjcmV0XCIsXG4gICAgcmVzb3VyY2VQYXRoOiBcIlwiLFxuICAgIHZlcnNpb246IFwidjNcIlxufTtcbmNvbnN0IHNwZWVjaENvbW1hbmRzID0ge1xuICAgIGF1dGhIZWFkZXI6IFwiWC1Db21tYW5kc0FwcElkXCIsXG4gICAgcmVzb3VyY2VQYXRoOiBcImNvbW1hbmRzXCIsXG4gICAgdmVyc2lvbjogXCJ2MVwiXG59O1xuY29uc3QgcGF0aFN1ZmZpeCA9IFwiYXBpXCI7XG5mdW5jdGlvbiBnZXREaWFsb2dTcGVjaWZpY1ZhbHVlcyhkaWFsb2dUeXBlKSB7XG4gICAgc3dpdGNoIChkaWFsb2dUeXBlKSB7XG4gICAgICAgIGNhc2UgXCJzcGVlY2hfY29tbWFuZHNcIjoge1xuICAgICAgICAgICAgcmV0dXJuIHNwZWVjaENvbW1hbmRzO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJib3RfZnJhbWV3b3JrXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBib3RGcmFtZXdvcms7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRpYWxvZyB0eXBlICcke2RpYWxvZ1R5cGV9J2ApO1xufVxuZXhwb3J0IGNsYXNzIERpYWxvZ0Nvbm5lY3Rpb25GYWN0b3J5IGV4dGVuZHMgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jcmVhdGUgPSAoY29uZmlnLCBhdXRoSW5mbywgY29ubmVjdGlvbklkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhcHBsaWNhdGlvbklkID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZCwgXCJcIik7XG4gICAgICAgICAgICBjb25zdCBkaWFsb2dUeXBlID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZSk7XG4gICAgICAgICAgICBjb25zdCByZWdpb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbik7XG4gICAgICAgICAgICBjb25zdCBsYW5ndWFnZSA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlLCBcImVuLVVTXCIpO1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuTGFuZ3VhZ2VQYXJhbU5hbWVdID0gbGFuZ3VhZ2U7XG4gICAgICAgICAgICBxdWVyeVBhcmFtc1tRdWVyeVBhcmFtZXRlck5hbWVzLkZvcm1hdFBhcmFtTmFtZV0gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9PdXRwdXRGb3JtYXRPcHRpb24sIE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuU2ltcGxlXSkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHsgcmVzb3VyY2VQYXRoLCB2ZXJzaW9uLCBhdXRoSGVhZGVyIH0gPSBnZXREaWFsb2dTcGVjaWZpY1ZhbHVlcyhkaWFsb2dUeXBlKTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlcnNbYXV0aEluZm8uaGVhZGVyTmFtZV0gPSBhdXRoSW5mby50b2tlbjtcbiAgICAgICAgICAgIGhlYWRlcnNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5Db25uZWN0aW9uSWRIZWFkZXJdID0gY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgbGV0IGVuZHBvaW50O1xuICAgICAgICAgICAgLy8gQXBwbGljYXRpb25JZCBpcyBvbmx5IHJlcXVpcmVkIGZvciBDdXN0b21Db21tYW5kc1xuICAgICAgICAgICAgaWYgKGFwcGxpY2F0aW9uSWQgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGB3c3M6Ly8ke3JlZ2lvbn0uJHtiYXNlVXJsfS8ke3BhdGhTdWZmaXh9LyR7dmVyc2lvbn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBgd3NzOi8vJHtyZWdpb259LiR7YmFzZVVybH0vJHtyZXNvdXJjZVBhdGh9LyR7cGF0aFN1ZmZpeH0vJHt2ZXJzaW9ufWA7XG4gICAgICAgICAgICAgICAgaGVhZGVyc1thdXRoSGVhZGVyXSA9IGFwcGxpY2F0aW9uSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdlYnNvY2tldENvbm5lY3Rpb24oZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zLCBoZWFkZXJzLCBuZXcgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBQcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgY29ubmVjdGlvbklkKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpYWxvZ0Nvbm5lY3RvckZhY3RvcnkuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFJlcGxheWFibGVBdWRpb05vZGUgfSBmcm9tIFwiLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvblN0YXRlLCBjcmVhdGVHdWlkLCBjcmVhdGVOb0Rhc2hHdWlkLCBEZWZlcnJlZCwgTWVzc2FnZVR5cGUsIFByb21pc2VIZWxwZXIsIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBY3Rpdml0eVJlY2VpdmVkRXZlbnRBcmdzLCBDYW5jZWxsYXRpb25FcnJvckNvZGUsIENhbmNlbGxhdGlvblJlYXNvbiwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCBSZWNvZ25pdGlvbkV2ZW50QXJncywgUmVzdWx0UmVhc29uLCBTZXNzaW9uRXZlbnRBcmdzLCBTcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLCBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncywgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQsIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBEaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlciB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VUdXJuU3RhdGVNYW5hZ2VyXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIEVudW1UcmFuc2xhdGlvbiwgUmVjb2duaXRpb25TdGF0dXMsIFJlcXVlc3RTZXNzaW9uLCBTZXJ2aWNlUmVjb2duaXplckJhc2UsIFNpbXBsZVNwZWVjaFBocmFzZSwgU3BlZWNoRGV0ZWN0ZWQsIFNwZWVjaEh5cG90aGVzaXMsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQWN0aXZpdHlQYXlsb2FkUmVzcG9uc2UgfSBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvQWN0aXZpdHlSZXNwb25zZVBheWxvYWRcIjtcbmltcG9ydCB7IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlIH0gZnJvbSBcIi4vU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuSW50ZXJuYWxcIjtcbmV4cG9ydCBjbGFzcyBEaWFsb2dTZXJ2aWNlQWRhcHRlciBleHRlbmRzIFNlcnZpY2VSZWNvZ25pemVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgZGlhbG9nU2VydmljZUNvbm5lY3Rvcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yKTtcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkd1aWQgPSBjcmVhdGVHdWlkKCk7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgICAgICBjb25zdCBhZ2VudE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGlvbklkOiBpbnRlcmFjdGlvbkd1aWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VQYXlsb2FkOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IDAuNVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGFnZW50TWVzc2FnZUpzb24gPSBKU09OLnN0cmluZ2lmeShhZ2VudE1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhpcy5mZXRjaERpYWxvZ0Nvbm5lY3Rpb24oKS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIFwiYWdlbnRcIiwgcmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgYWdlbnRNZXNzYWdlSnNvbikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubGlzdGVuT25jZSA9IChyZWNvTW9kZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1R1cm5Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucmVjb2duaXRpb25Nb2RlID0gcmVjb01vZGU7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24uc3RhcnROZXdSZWNvZ25pdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLmxpc3RlbkZvclNlcnZpY2VUZWxlbWV0cnkodGhpcy5wcml2RGlhbG9nQXVkaW9Tb3VyY2UuZXZlbnRzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVHVybkNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gU3RhcnQgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZpY2UuIFRoZSBwcm9taXNlIHRoaXMgd2lsbCBjcmVhdGUgaXMgc3RvcmVkIGFuZCB3aWxsIGJlIHVzZWQgYnkgY29uZmlndXJlQ29ubmVjdGlvbigpLlxuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nQ29ubmVjdEltcGwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRQcmVBdWRpb01lc3NhZ2VzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gc3VjY2Vzc0NhbGxiYWNrO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZEaWFsb2dBdWRpb1NvdXJjZVxuICAgICAgICAgICAgICAgICAgICAuYXR0YWNoKHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLmF1ZGlvTm9kZUlkKVxuICAgICAgICAgICAgICAgICAgICAuY29udGludWVXaXRoUHJvbWlzZSgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhdWRpb05vZGU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaXNFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbih0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuQ29ubmVjdGlvbkZhaWx1cmUsIHJlc3VsdC5lcnJvciwgc3VjY2Vzc0NhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21FcnJvcihyZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9Ob2RlID0gbmV3IFJlcGxheWFibGVBdWRpb05vZGUocmVzdWx0LnJlc3VsdCwgdGhpcy5wcml2RGlhbG9nQXVkaW9Tb3VyY2UuZm9ybWF0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLm9uQXVkaW9Tb3VyY2VBdHRhY2hDb21wbGV0ZWQoYXVkaW9Ob2RlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRpYWxvZ0F1ZGlvU291cmNlLmRldmljZUluZm8ub25TdWNjZXNzQ29udGludWVXaXRoUHJvbWlzZSgoZGV2aWNlSW5mbykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5TcGVlY2hTZXJ2aWNlQ29uZmlnLkNvbnRleHQuYXVkaW8gPSB7IHNvdXJjZTogZGV2aWNlSW5mbyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnQ29ubmVjdGlvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKChfKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblN0YXJ0RXZlbnRBcmdzID0gbmV3IFNlc3Npb25FdmVudEFyZ3ModGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIuc2Vzc2lvblN0YXJ0ZWQodGhpcy5wcml2UmVjb2duaXplciwgc2Vzc2lvblN0YXJ0RXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXVkaW9TZW5kUHJvbWlzZSA9IHRoaXMuc2VuZEF1ZGlvKGF1ZGlvTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdWRpb1NlbmRQcm9taXNlLm9uKChfKSA9PiB7IH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFJlY29nbml0aW9uKHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCwgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIENhbmNlbGxhdGlvbkVycm9yQ29kZS5SdW50aW1lRXJyb3IsIGVycm9yLCBzdWNjZXNzQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbih0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuQ29ubmVjdGlvbkZhaWx1cmUsIGVycm9yLCBzdWNjZXNzQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkuY29udGludWVXaXRoUHJvbWlzZSgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21FcnJvcihyZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VuZEF1ZGlvID0gKGF1ZGlvU3RyZWFtTm9kZSkgPT4ge1xuICAgICAgICAgICAgLy8gTk9URTogSG9tZS1iYWtlZCBwcm9taXNlcyBjcmFzaCBpb3Mgc2FmYXJpIGR1cmluZyB0aGUgaW52b2NhdGlvblxuICAgICAgICAgICAgLy8gb2YgdGhlIGVycm9yIGNhbGxiYWNrIGNoYWluIChsb29rcyBsaWtlIHRoZSByZWN1cnNpb24gaXMgd2F5IHRvbyBkZWVwLCBhbmRcbiAgICAgICAgICAgIC8vIGl0IGJsb3dzIHVwIHRoZSBzdGFjaykuIFRoZSBmb2xsb3dpbmcgY29uc3RydWN0IGlzIGEgc3RvcC1nYXAgdGhhdCBkb2VzIG5vdFxuICAgICAgICAgICAgLy8gYnViYmxlIHRoZSBlcnJvciB1cCB0aGUgY2FsbGJhY2sgY2hhaW4gYW5kIGhlbmNlIGNpcmN1bXZlbnRzIHRoaXMgcHJvYmxlbS5cbiAgICAgICAgICAgIC8vIFRPRE86IHJld3JpdGUgd2l0aCBFUzYgcHJvbWlzZXMuXG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgLy8gVGhlIHRpbWUgd2UgbGFzdCBzZW50IGRhdGEgdG8gdGhlIHNlcnZpY2UuXG4gICAgICAgICAgICBsZXQgbmV4dFNlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvRm9ybWF0ID0gdGhpcy5wcml2RGlhbG9nQXVkaW9Tb3VyY2UuZm9ybWF0O1xuICAgICAgICAgICAgLy8gTWF4IGFtb3VudCB0byBzZW5kIGJlZm9yZSB3ZSBzdGFydCB0byB0aHJvdHRsZVxuICAgICAgICAgICAgY29uc3QgZmFzdExhbmVTaXplTXMgPSB0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtVHJhbnNtaXRMZW5ndGhCZWZvclRocm90dGxlTXNcIiwgXCI1MDAwXCIpO1xuICAgICAgICAgICAgY29uc3QgbWF4U2VuZFVudGhyb3R0bGVkQnl0ZXMgPSBhdWRpb0Zvcm1hdC5hdmdCeXRlc1BlclNlYyAvIDEwMDAgKiBwYXJzZUludChmYXN0TGFuZVNpemVNcywgMTApO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRSZWNvZ051bWJlciA9IHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLnJlY29nTnVtYmVyO1xuICAgICAgICAgICAgY29uc3QgcmVhZEFuZFVwbG9hZEN5Y2xlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIElmIHNwZWVjaCBpcyBkb25lLCBzdG9wIHNlbmRpbmcgYXVkaW8uXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZEaWFsb2dJc0Rpc3Bvc2VkICYmXG4gICAgICAgICAgICAgICAgICAgICF0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLmlzUmVjb2duaXppbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24ucmVjb2dOdW1iZXIgPT09IHN0YXJ0UmVjb2dOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaERpYWxvZ0Nvbm5lY3Rpb24oKS5vbigoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9TdHJlYW1Ob2RlLnJlYWQoKS5vbigoYXVkaW9TdHJlYW1DaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGhhdmUgYSBuZXcgYXVkaW8gY2h1bmsgdG8gdXBsb2FkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHNlcnZpY2UgYWxyZWFkeSByZWNvZ25pemVkIGF1ZGlvIGVuZCB0aGVuIGRvbid0IHNlbmQgYW55IG1vcmUgYXVkaW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGF5bG9hZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VuZERlbGF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXVkaW9TdHJlYW1DaHVuayB8fCBhdWRpb1N0cmVhbUNodW5rLmlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRGVsYXkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IGF1ZGlvU3RyZWFtQ2h1bmsuYnVmZmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5vbkF1ZGlvU2VudChwYXlsb2FkLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4U2VuZFVudGhyb3R0bGVkQnl0ZXMgPj0gdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24uYnl0ZXNTZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRGVsYXkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZERlbGF5ID0gTWF0aC5tYXgoMCwgbmV4dFNlbmRUaW1lIC0gRGF0ZS5ub3coKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXJlIHdlIHJlYWR5IHRvIHNlbmQsIG9yIG5lZWQgd2UgZGVsYXkgbW9yZT9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTZW5kVGltZSA9IERhdGUubm93KCkgKyAocGF5bG9hZC5ieXRlTGVuZ3RoICogMTAwMCAvIChhdWRpb0Zvcm1hdC5hdmdCeXRlc1BlclNlYyAqIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGxvYWRlZCA9IGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoTWVzc2FnZVR5cGUuQmluYXJ5LCBcImF1ZGlvXCIsIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgbnVsbCwgcGF5bG9hZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXVkaW9TdHJlYW1DaHVuayAmJiAhYXVkaW9TdHJlYW1DaHVuay5pc0VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWQuY29udGludWVXaXRoKChfKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVnYXJkbGVzcyBvZiBzdWNjZXNzIG9yIGZhaWx1cmUsIHNjaGVkdWxlIHRoZSBuZXh0IHVwbG9hZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdW5kZXJseWluZyBjb25uZWN0aW9uIHdhcyBicm9rZW4sIHRoZSBuZXh0IGN5Y2xlIHdpbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgYSBuZXcgY29ubmVjdGlvbiBhbmQgcmUtdHJhbnNtaXQgbWlzc2luZyBhdWRpbyBhdXRvbWF0aWNhbGx5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRBbmRVcGxvYWRDeWNsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYXVkaW8gc3RyZWFtIGhhcyBiZWVuIGNsb3NlZCwgbm8gbmVlZCB0byBzY2hlZHVsZSBuZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWFkLXVwbG9hZCBjeWNsZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLm9uU3BlZWNoRW5kZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBzZW5kRGVsYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHdoYXRldmVyIHJlYXNvbiwgUmVqZWN0IGlzIHVzZWQgdG8gcmVtb3ZlIHF1ZXVlIHN1YnNjcmliZXJzIGluc2lkZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgUXVldWUuRHJhaW5BbmREaXNwb3NlIGludm9rZWQgZnJvbSBEZXRhY2hBdWRpb05vZGUgZG93biBiZWxvdywgd2hpY2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVhbnMgdGhhdCBzb21ldGltZXMgdGhpbmdzIGNhbiBiZSByZWplY3RlZCBpbiBub3JtYWwgY2lyY3Vtc3RhbmNlcywgd2l0aG91dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbnkgZXJyb3JzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRydWUpOyAvLyBUT0RPOiByZW1vdmUgdGhlIGFyZ3VtZW50LCBpdCdzIGlzIGNvbXBsZXRlbHkgbWVhbmluZ2xlc3MuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHJlamVjdCwgaWYgdGhlcmUgd2FzIGEgcHJvcGVyIGVycm9yLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZWFkQW5kVXBsb2FkQ3ljbGUoKTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVjZWl2ZURpYWxvZ01lc3NhZ2VPdmVycmlkZSA9IChzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2spID0+IHtcbiAgICAgICAgICAgIC8vIHdlIHdvbid0IHJlbHkgb24gdGhlIGNhc2NhZGluZyBwcm9taXNlcyBvZiB0aGUgY29ubmVjdGlvbiBzaW5jZSB3ZSB3YW50IHRvIGNvbnRpbnVhbGx5IGJlIGF2YWlsYWJsZSB0byByZWNlaXZlIG1lc3NhZ2VzXG4gICAgICAgICAgICBjb25zdCBjb21tdW5pY2F0aW9uQ3VzdG9kaWFuID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGlzLmZldGNoRGlhbG9nQ29ubmVjdGlvbigpLm9uKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24ucmVhZCgpXG4gICAgICAgICAgICAgICAgICAgIC5vblN1Y2Nlc3NDb250aW51ZVdpdGhQcm9taXNlKChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRGlzcG9zZWQgPSB0aGlzLmlzRGlzcG9zZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybWluYXRlTWVzc2FnZUxvb3AgPSAoIXRoaXMuaXNEaXNwb3NlZCgpICYmIHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3ApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEaXNwb3NlZCB8fCB0ZXJtaW5hdGVNZXNzYWdlTG9vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UncmUgZG9uZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW11bmljYXRpb25DdXN0b2RpYW4ucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZURpYWxvZ01lc3NhZ2VPdmVycmlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25NZXNzYWdlID0gU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuZnJvbUNvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInR1cm4uc3RhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXF1ZXN0SWQgPSBjb25uZWN0aW9uTWVzc2FnZS5yZXF1ZXN0SWQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXVkaW9TZXNzaW9uUmVxSWQgPSB0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHVybiBzdGFydGVkIGJ5IHRoZSBzZXJ2aWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVxdWVzdElkICE9PSBhdWRpb1Nlc3Npb25SZXFJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2VHVyblN0YXRlTWFuYWdlci5TdGFydFR1cm4odHVyblJlcXVlc3RJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3BlZWNoLnN0YXJ0ZGV0ZWN0ZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hTdGFydERldGVjdGVkID0gU3BlZWNoRGV0ZWN0ZWQuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaFN0YXJ0RXZlbnRBcmdzID0gbmV3IFJlY29nbml0aW9uRXZlbnRBcmdzKHNwZWVjaFN0YXJ0RGV0ZWN0ZWQuT2Zmc2V0LCB0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIuc3BlZWNoU3RhcnREZXRlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnNwZWVjaFN0YXJ0RGV0ZWN0ZWQodGhpcy5wcml2UmVjb2duaXplciwgc3BlZWNoU3RhcnRFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guZW5kZGV0ZWN0ZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQganNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCB3YXMgZW1wdHksIHRoZSBKU09OIHJldHVybmVkIGlzIGVtcHR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gXCJ7IE9mZnNldDogMCB9XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaFN0b3BEZXRlY3RlZCA9IFNwZWVjaERldGVjdGVkLmZyb21KU09OKGpzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLm9uU2VydmljZVJlY29nbml6ZWQoc3BlZWNoU3RvcERldGVjdGVkLk9mZnNldCArIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaFN0b3BFdmVudEFyZ3MgPSBuZXcgUmVjb2duaXRpb25FdmVudEFyZ3Moc3BlZWNoU3RvcERldGVjdGVkLk9mZnNldCArIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hFbmREZXRlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnNwZWVjaEVuZERldGVjdGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNwZWVjaFN0b3BFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXJuLmVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVybkVuZFJlcXVlc3RJZCA9IGNvbm5lY3Rpb25NZXNzYWdlLnJlcXVlc3RJZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1Nlc3Npb25SZXFJZCA9IHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0dXJuIHN0YXJ0ZWQgYnkgdGhlIHNlcnZpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR1cm5FbmRSZXF1ZXN0SWQgIT09IGF1ZGlvU2Vzc2lvblJlcUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUdXJuU3RhdGVNYW5hZ2VyLkNvbXBsZXRlVHVybih0dXJuRW5kUmVxdWVzdElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF1ZGlvIHNlc3Npb24gdHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblN0b3BFdmVudEFyZ3MgPSBuZXcgU2Vzc2lvbkV2ZW50QXJncyh0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24ub25TZXJ2aWNlVHVybkVuZFJlc3BvbnNlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdG9wcGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNlc3Npb25TdG9wRXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaWduYWwgdGhhdCBpdCdzIE9LIHRvIHN0YXJ0IGEgbmV3IHR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNUdXJuQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrICYmIHRoaXMucHJpdkxhc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sodGhpcy5wcml2TGFzdFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkxhc3RSZXN1bHQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFlcnJvckNhbGxCYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaW52b2tlIHRoZSBjYWxsIGJhY2sgb25jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBhZnRlciB0aGF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NUeXBlU3BlY2lmaWNNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxCYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlRGlhbG9nTWVzc2FnZU92ZXJyaWRlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZU1lc3NhZ2VMb29wID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvbW11bmljYXRpb25DdXN0b2RpYW4ucHJvbWlzZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZldGNoRGlhbG9nQ29ubmVjdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ0Nvbm5lY3Rpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kQWdlbnRDb25maWcgPSAoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWdlbnRDb25maWcgJiYgIXRoaXMuYWdlbnRDb25maWdTZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWdlbnRDb25maWdKc29uID0gdGhpcy5hZ2VudENvbmZpZy50b0pzb25TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFnZW50Q29uZmlnU2VudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgXCJhZ2VudC5jb25maWdcIiwgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgYWdlbnRDb25maWdKc29uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlbmRBZ2VudENvbnRleHQgPSAoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ3VpZCA9IGNyZWF0ZUd1aWQoKTtcbiAgICAgICAgICAgIGNvbnN0IGFnZW50Q29udGV4dCA9IHtcbiAgICAgICAgICAgICAgICBjaGFubmVsRGF0YTogXCJcIixcbiAgICAgICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIGludGVyYWN0aW9uSWQ6IGd1aWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZlcnNpb246IDAuNVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGFnZW50Q29udGV4dEpzb24gPSBKU09OLnN0cmluZ2lmeShhZ2VudENvbnRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgXCJzcGVlY2guYWdlbnQuY29udGV4dFwiLCB0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vanNvblwiLCBhZ2VudENvbnRleHRKc29uKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IgPSBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yO1xuICAgICAgICB0aGlzLnByaXZEaWFsb2dBdXRoZW50aWNhdGlvbiA9IGF1dGhlbnRpY2F0aW9uO1xuICAgICAgICB0aGlzLnJlY2VpdmVNZXNzYWdlT3ZlcnJpZGUgPSB0aGlzLnJlY2VpdmVEaWFsb2dNZXNzYWdlT3ZlcnJpZGU7XG4gICAgICAgIHRoaXMucHJpdlR1cm5TdGF0ZU1hbmFnZXIgPSBuZXcgRGlhbG9nU2VydmljZVR1cm5TdGF0ZU1hbmFnZXIoKTtcbiAgICAgICAgdGhpcy5yZWNvZ25pemVPdmVycmlkZSA9IHRoaXMubGlzdGVuT25jZTtcbiAgICAgICAgdGhpcy5jb25uZWN0SW1wbE92ZXJyaWRlID0gdGhpcy5kaWFsb2dDb25uZWN0SW1wbDtcbiAgICAgICAgdGhpcy5jb25maWdDb25uZWN0aW9uT3ZlcnJpZGUgPSB0aGlzLmNvbmZpZ0Nvbm5lY3Rpb247XG4gICAgICAgIHRoaXMuZmV0Y2hDb25uZWN0aW9uT3ZlcnJpZGUgPSB0aGlzLmZldGNoRGlhbG9nQ29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0T3ZlcnJpZGUgPSB0aGlzLnByaXZEaXNjb25uZWN0O1xuICAgICAgICB0aGlzLnByaXZEaWFsb2dBdWRpb1NvdXJjZSA9IGF1ZGlvU291cmNlO1xuICAgICAgICB0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbiA9IG5ldyBSZXF1ZXN0U2Vzc2lvbihhdWRpb1NvdXJjZS5pZCgpKTtcbiAgICAgICAgdGhpcy5wcml2RGlhbG9nQ29ubmVjdGlvbkZhY3RvcnkgPSBjb25uZWN0aW9uRmFjdG9yeTtcbiAgICAgICAgdGhpcy5wcml2RGlhbG9nSXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFnZW50Q29uZmlnU2VudCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZMYXN0UmVzdWx0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc1R1cm5Db21wbGV0ZSA9IHRydWU7XG4gICAgfVxuICAgIGlzRGlzcG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEaWFsb2dJc0Rpc3Bvc2VkO1xuICAgIH1cbiAgICBkaXNwb3NlKHJlYXNvbikge1xuICAgICAgICB0aGlzLnByaXZEaWFsb2dJc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmRpc3Bvc2UocmVhc29uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZEaXNjb25uZWN0KCkge1xuICAgICAgICB0aGlzLmNhbmNlbFJlY29nbml0aW9uKHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCwgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yLCBcIkRpc2Nvbm5lY3RpbmdcIiwgdW5kZWZpbmVkKTtcbiAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IHRydWU7XG4gICAgICAgIHRoaXMuYWdlbnRDb25maWdTZW50ID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnByaXZEaWFsb2dDb25uZWN0aW9uUHJvbWlzZS5yZXN1bHQoKS5pc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZEaWFsb2dDb25uZWN0aW9uUHJvbWlzZS5yZXN1bHQoKS5pc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nQ29ubmVjdGlvblByb21pc2UucmVzdWx0KCkucmVzdWx0LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dDb25uZWN0aW9uUHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dDb25uZWN0aW9uUHJvbWlzZS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NUeXBlU3BlY2lmaWNNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxCYWNrKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdFByb3BzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBpZiAoY29ubmVjdGlvbk1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQpIHtcbiAgICAgICAgICAgIHJlc3VsdFByb3BzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5waHJhc2VcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hQaHJhc2UgPSBTaW1wbGVTcGVlY2hQaHJhc2UuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLm9uUGhyYXNlUmVjb2duaXplZCh0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgc3BlZWNoUGhyYXNlLk9mZnNldCArIHNwZWVjaFBocmFzZS5EdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHNwZWVjaFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cyA9PT0gUmVjb2duaXRpb25TdGF0dXMuU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gdGhpcy5maXJlRXZlbnRGb3JSZXN1bHQoc3BlZWNoUGhyYXNlLCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkxhc3RSZXN1bHQgPSBhcmdzLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3Rvci5yZWNvZ25pemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IucmVjb2duaXplZCh0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guaHlwb3RoZXNpc1wiOlxuICAgICAgICAgICAgICAgIGNvbnN0IGh5cG90aGVzaXMgPSBTcGVlY2hIeXBvdGhlc2lzLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBoeXBvdGhlc2lzLk9mZnNldCArIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLlJlY29nbml6aW5nU3BlZWNoLCBoeXBvdGhlc2lzLlRleHQsIGh5cG90aGVzaXMuRHVyYXRpb24sIG9mZnNldCwgdW5kZWZpbmVkLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLm9uSHlwb3RoZXNpcyhvZmZzZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgaHlwb3RoZXNpcy5EdXJhdGlvbiwgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnJlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnJlY29nbml6aW5nKHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW9cIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvUmVxdWVzdElkID0gY29ubmVjdGlvbk1lc3NhZ2UucmVxdWVzdElkLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm4gPSB0aGlzLnByaXZUdXJuU3RhdGVNYW5hZ2VyLkdldFR1cm4oYXVkaW9SZXF1ZXN0SWQpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW1wdHkgYmluYXJ5IG1lc3NhZ2Ugc2lnbmFscyBlbmQgb2Ygc3RyZWFtLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVybi5lbmRBdWRpb1N0cmVhbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVybi5hdWRpb1N0cmVhbS53cml0ZShjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZXNwb25zZVwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VSZXF1ZXN0SWQgPSBjb25uZWN0aW9uTWVzc2FnZS5yZXF1ZXN0SWQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZpdHlQYXlsb2FkID0gQWN0aXZpdHlQYXlsb2FkUmVzcG9uc2UuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuID0gdGhpcy5wcml2VHVyblN0YXRlTWFuYWdlci5HZXRUdXJuKHJlc3BvbnNlUmVxdWVzdElkKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBjb252ZXJzYXRpb24gSWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2aXR5UGF5bG9hZC5jb252ZXJzYXRpb25JZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlQWdlbnRDb25maWcgPSB0aGlzLmFnZW50Q29uZmlnLmdldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWdlbnRDb25maWcuYm90SW5mby5jb252ZXJzYXRpb25JZCA9IGFjdGl2aXR5UGF5bG9hZC5jb252ZXJzYXRpb25JZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWdlbnRDb25maWcuc2V0KHVwZGF0ZUFnZW50Q29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwdWxsQXVkaW9PdXRwdXRTdHJlYW0gPSB0dXJuLnByb2Nlc3NBY3Rpdml0eVBheWxvYWQoYWN0aXZpdHlQYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZpdHkgPSBuZXcgQWN0aXZpdHlSZWNlaXZlZEV2ZW50QXJncyhhY3Rpdml0eVBheWxvYWQubWVzc2FnZVBheWxvYWQsIHB1bGxBdWRpb091dHB1dFN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IuYWN0aXZpdHlSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLmFjdGl2aXR5UmVjZWl2ZWQodGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3RvciwgYWN0aXZpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDYW5jZWxzIHJlY29nbml0aW9uLlxuICAgIGNhbmNlbFJlY29nbml0aW9uKHNlc3Npb25JZCwgcmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IsIGNhbmNlbFJlY29DYWxsYmFjaykge1xuICAgICAgICB0aGlzLnRlcm1pbmF0ZU1lc3NhZ2VMb29wID0gdHJ1ZTtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24uaXNSZWNvZ25pemluZykge1xuICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24ub25TdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISF0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLmNhbmNlbGVkKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICAgICAgcHJvcGVydGllcy5zZXRQcm9wZXJ0eShDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIENhbmNlbGxhdGlvbkVycm9yQ29kZVtlcnJvckNvZGVdKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEV2ZW50ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MoY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvciwgZXJyb3JDb2RlLCB1bmRlZmluZWQsIHNlc3Npb25JZCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IuY2FuY2VsZWQodGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3RvciwgY2FuY2VsRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICAgICAgaWYgKCEhY2FuY2VsUmVjb0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHVuZGVmaW5lZCwgLy8gUmVzdWx0SWRcbiAgICAgICAgICAgICAgICBSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHVuZGVmaW5lZCwgLy8gVGV4dFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gRHJ1YXRpb25cbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsIC8vIE9mZnNldFxuICAgICAgICAgICAgICAgIGVycm9yLCB1bmRlZmluZWQsIC8vIEpzb25cbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWxSZWNvQ2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9iKSB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBFc3RhYmxpc2hlcyBhIHdlYnNvY2tldCBjb25uZWN0aW9uIHRvIHRoZSBlbmQgcG9pbnQuXG4gICAgZGlhbG9nQ29ubmVjdEltcGwoaXNVbkF1dGhvcml6ZWQgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5wcml2RGlhbG9nQ29ubmVjdGlvblByb21pc2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaWFsb2dDb25uZWN0aW9uUHJvbWlzZS5yZXN1bHQoKS5pc0NvbXBsZXRlZCAmJlxuICAgICAgICAgICAgICAgICh0aGlzLnByaXZEaWFsb2dDb25uZWN0aW9uUHJvbWlzZS5yZXN1bHQoKS5pc0Vycm9yXG4gICAgICAgICAgICAgICAgICAgIHx8IHRoaXMucHJpdkRpYWxvZ0Nvbm5lY3Rpb25Qcm9taXNlLnJlc3VsdCgpLnJlc3VsdC5zdGF0ZSgpID09PSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWdlbnRDb25maWdTZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nQ29ubmVjdGlvblByb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRpYWxvZ0Nvbm5lY3Rpb25Qcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkRpYWxvZ0F1dGhGZXRjaEV2ZW50SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIC8vIGtlZXAgdGhlIGNvbm5lY3Rpb25JZCBmb3IgcmVjb25uZWN0IGV2ZW50c1xuICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvbklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5vblByZUNvbm5lY3Rpb25TdGFydCh0aGlzLnByaXZEaWFsb2dBdXRoRmV0Y2hFdmVudElkLCB0aGlzLnByaXZDb25uZWN0aW9uSWQpO1xuICAgICAgICBjb25zdCBhdXRoUHJvbWlzZSA9IGlzVW5BdXRob3JpemVkID8gdGhpcy5wcml2RGlhbG9nQXV0aGVudGljYXRpb24uZmV0Y2hPbkV4cGlyeSh0aGlzLnByaXZEaWFsb2dBdXRoRmV0Y2hFdmVudElkKSA6IHRoaXMucHJpdkRpYWxvZ0F1dGhlbnRpY2F0aW9uLmZldGNoKHRoaXMucHJpdkRpYWxvZ0F1dGhGZXRjaEV2ZW50SWQpO1xuICAgICAgICB0aGlzLnByaXZEaWFsb2dDb25uZWN0aW9uUHJvbWlzZSA9IGF1dGhQcm9taXNlXG4gICAgICAgICAgICAuY29udGludWVXaXRoUHJvbWlzZSgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5vbkF1dGhDb21wbGV0ZWQodHJ1ZSwgcmVzdWx0LmVycm9yKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLm9uQXV0aENvbXBsZXRlZChmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gdGhpcy5wcml2RGlhbG9nQ29ubmVjdGlvbkZhY3RvcnkuY3JlYXRlKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcsIHJlc3VsdC5yZXN1bHQsIHRoaXMucHJpdkNvbm5lY3Rpb25JZCk7XG4gICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5saXN0ZW5Gb3JTZXJ2aWNlVGVsZW1ldHJ5KGNvbm5lY3Rpb24uZXZlbnRzKTtcbiAgICAgICAgICAgIC8vIEF0dGFjaCB0byB0aGUgdW5kZXJseWluZyBldmVudC4gTm8gbmVlZCB0byBob2xkIG9udG8gdGhlIGRldGFjaCBwb2ludGVycyBhcyBpbiB0aGUgZXZlbnQgdGhlIGNvbm5lY3Rpb24gZ29lcyBhd2F5LFxuICAgICAgICAgICAgLy8gaXQnbGwgc3RvcCBzZW5kaW5nIGV2ZW50cy5cbiAgICAgICAgICAgIGNvbm5lY3Rpb24uZXZlbnRzLmF0dGFjaCgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25FdmVudHMub25FdmVudChldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLm9wZW4oKS5vblN1Y2Nlc3NDb250aW51ZVdpdGhQcm9taXNlKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24ub25QcmVDb25uZWN0aW9uU3RhcnQodGhpcy5wcml2RGlhbG9nQXV0aEZldGNoRXZlbnRJZCwgdGhpcy5wcml2Q29ubmVjdGlvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24ub25Db25uZWN0aW9uRXN0YWJsaXNoQ29tcGxldGVkKHJlc3BvbnNlLnN0YXR1c0NvZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSA0MDMgJiYgIWlzVW5BdXRob3JpemVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpYWxvZ0Nvbm5lY3RJbXBsKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24ub25Db25uZWN0aW9uRXN0YWJsaXNoQ29tcGxldGVkKHJlc3BvbnNlLnN0YXR1c0NvZGUsIHJlc3BvbnNlLnJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21FcnJvcihgVW5hYmxlIHRvIGNvbnRhY3Qgc2VydmVyLiBTdGF0dXNDb2RlOiAke3Jlc3BvbnNlLnN0YXR1c0NvZGV9LCAke3RoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50KX0gUmVhc29uOiAke3Jlc3BvbnNlLnJlYXNvbn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Mb29wID0gdGhpcy5zdGFydE1lc3NhZ2VMb29wKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEaWFsb2dDb25uZWN0aW9uUHJvbWlzZTtcbiAgICB9XG4gICAgc3RhcnRNZXNzYWdlTG9vcCgpIHtcbiAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBtZXNzYWdlUmV0cmlldmFsUHJvbWlzZSA9IHRoaXMucmVjZWl2ZURpYWxvZ01lc3NhZ2VPdmVycmlkZSgpO1xuICAgICAgICByZXR1cm4gbWVzc2FnZVJldHJpZXZhbFByb21pc2Uub24oKHIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVjb2duaXRpb24odGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkLCB0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlJ1bnRpbWVFcnJvciwgZXJyb3IsIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBUYWtlcyBhbiBlc3RhYmxpc2hlZCB3ZWJzb2NrZXQgY29ubmVjdGlvbiB0byB0aGUgZW5kcG9pbnQgYW5kIHNlbmRzIHNwZWVjaCBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uLlxuICAgIGNvbmZpZ0Nvbm5lY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlLnJlc3VsdCgpLmlzQ29tcGxldGVkICYmXG4gICAgICAgICAgICAgICAgKHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlLnJlc3VsdCgpLmlzRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgfHwgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ1Byb21pc2UucmVzdWx0KCkucmVzdWx0LnN0YXRlKCkgPT09IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ1Byb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ0Nvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZSA9IHRoaXMuZGlhbG9nQ29ubmVjdEltcGwoKS5vblN1Y2Nlc3NDb250aW51ZVdpdGhQcm9taXNlKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kU3BlZWNoU2VydmljZUNvbmZpZyhjb25uZWN0aW9uLCB0aGlzLnByaXZEaWFsb2dSZXF1ZXN0U2Vzc2lvbiwgdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5TcGVlY2hTZXJ2aWNlQ29uZmlnLnNlcmlhbGl6ZSgpKVxuICAgICAgICAgICAgICAgIC5vblN1Y2Nlc3NDb250aW51ZVdpdGhQcm9taXNlKChfKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZEFnZW50Q29uZmlnKGNvbm5lY3Rpb24pLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aCgoXykgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlO1xuICAgIH1cbiAgICBzZW5kUHJlQXVkaW9NZXNzYWdlcygpIHtcbiAgICAgICAgdGhpcy5mZXRjaERpYWxvZ0Nvbm5lY3Rpb24oKS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEFnZW50Q29udGV4dChjb25uZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpcmVFdmVudEZvclJlc3VsdChzZXJ2aWNlUmVzdWx0LCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdFJlYXNvbiA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlUmVjb2duaXRpb25SZXN1bHQoc2VydmljZVJlc3VsdC5SZWNvZ25pdGlvblN0YXR1cyk7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHNlcnZpY2VSZXN1bHQuT2Zmc2V0ICsgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdkRpYWxvZ1JlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgcmVzdWx0UmVhc29uLCBzZXJ2aWNlUmVzdWx0LkRpc3BsYXlUZXh0LCBzZXJ2aWNlUmVzdWx0LkR1cmF0aW9uLCBvZmZzZXQsIHVuZGVmaW5lZCwgSlNPTi5zdHJpbmdpZnkoc2VydmljZVJlc3VsdCksIHByb3BlcnRpZXMpO1xuICAgICAgICBjb25zdCBldiA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIG9mZnNldCwgdGhpcy5wcml2RGlhbG9nUmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgcmV0dXJuIGV2O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlhbG9nU2VydmljZUFkYXB0ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEF1ZGlvT3V0cHV0U3RyZWFtIH0gZnJvbSBcIi4uL3Nkay9BdWRpby9BdWRpb091dHB1dFN0cmVhbVwiO1xuaW1wb3J0IHsgTWVzc2FnZURhdGFTdHJlYW1UeXBlIH0gZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL0FjdGl2aXR5UmVzcG9uc2VQYXlsb2FkXCI7XG5leHBvcnQgY2xhc3MgRGlhbG9nU2VydmljZVR1cm5TdGF0ZSB7XG4gICAgY29uc3RydWN0b3IobWFuYWdlciwgcmVxdWVzdElkKSB7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcbiAgICAgICAgdGhpcy5wcml2SXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9TdHJlYW0gPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZUdXJuTWFuYWdlciA9IG1hbmFnZXI7XG4gICAgICAgIHRoaXMucmVzZXRUdXJuRW5kVGltZW91dCgpO1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgICAvLyBjb25zb2xlLmluZm8oXCJEaWFsb2dTZXJ2aWNlVHVyblN0YXRlIGRlYnVndHVybiBzdGFydDpcIiArIHRoaXMucHJpdlJlcXVlc3RJZCk7XG4gICAgfVxuICAgIGdldCBhdWRpb1N0cmVhbSgpIHtcbiAgICAgICAgLy8gQ2FsbGVkIHdoZW4gaXMgbmVlZGVkIHRvIHN0cmVhbS5cbiAgICAgICAgdGhpcy5yZXNldFR1cm5FbmRUaW1lb3V0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb1N0cmVhbTtcbiAgICB9XG4gICAgcHJvY2Vzc0FjdGl2aXR5UGF5bG9hZChwYXlsb2FkKSB7XG4gICAgICAgIGlmIChwYXlsb2FkLm1lc3NhZ2VEYXRhU3RyZWFtVHlwZSA9PT0gTWVzc2FnZURhdGFTdHJlYW1UeXBlLlRleHRUb1NwZWVjaEF1ZGlvKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpb1N0cmVhbSA9IEF1ZGlvT3V0cHV0U3RyZWFtLmNyZWF0ZVB1bGxTdHJlYW0oKTtcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICAgICAgICAvLyBjb25zb2xlLmluZm8oXCJBdWRpbyBzdGFydCBkZWJ1Z3R1cm46XCIgKyB0aGlzLnByaXZSZXF1ZXN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb1N0cmVhbTtcbiAgICB9XG4gICAgZW5kQXVkaW9TdHJlYW0oKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZBdWRpb1N0cmVhbSAhPT0gbnVsbCAmJiAhdGhpcy5wcml2QXVkaW9TdHJlYW0uaXNDbG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvU3RyZWFtLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcGxldGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZUaW1lb3V0VG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucHJpdlRpbWVvdXRUb2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmRBdWRpb1N0cmVhbSgpO1xuICAgIH1cbiAgICByZXNldFR1cm5FbmRUaW1lb3V0KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2VGltZW91dFRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnByaXZUaW1lb3V0VG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICAgIC8vIGNvbnNvbGUuaW5mbyhcIlRpbWVvdXQgcmVzZXQgZGVidWd0dXJuOlwiICsgdGhpcy5wcml2UmVxdWVzdElkKTtcbiAgICAgICAgdGhpcy5wcml2VGltZW91dFRva2VuID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgICAgICAgLy8gY29uc29sZS5pbmZvKFwiVGltZW91dCBjb21wbGV0ZSBkZWJ1Z3R1cm46XCIgKyB0aGlzLnByaXZSZXF1ZXN0SWQpO1xuICAgICAgICAgICAgdGhpcy5wcml2VHVybk1hbmFnZXIuQ29tcGxldGVUdXJuKHRoaXMucHJpdlJlcXVlc3RJZCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0sIDIwMDApO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlhbG9nU2VydmljZVR1cm5TdGF0ZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgSW52YWxpZE9wZXJhdGlvbkVycm9yIH0gZnJvbSBcIi4uL2NvbW1vbi9FcnJvclwiO1xuaW1wb3J0IHsgRGlhbG9nU2VydmljZVR1cm5TdGF0ZSB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VUdXJuU3RhdGVcIjtcbmV4cG9ydCBjbGFzcyBEaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdlR1cm5NYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU3RhcnRUdXJuKGlkKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZUdXJuTWFwLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJTZXJ2aWNlIGVycm9yOiBUaGVyZSBpcyBhbHJlYWR5IGEgdHVybiB3aXRoIGlkOlwiICsgaWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHR1cm5TdGF0ZSA9IG5ldyBEaWFsb2dTZXJ2aWNlVHVyblN0YXRlKHRoaXMsIGlkKTtcbiAgICAgICAgdGhpcy5wcml2VHVybk1hcC5zZXQoaWQsIHR1cm5TdGF0ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuTWFwLmdldChpZCk7XG4gICAgfVxuICAgIEdldFR1cm4oaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlR1cm5NYXAuZ2V0KGlkKTtcbiAgICB9XG4gICAgQ29tcGxldGVUdXJuKGlkKSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2VHVybk1hcC5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiU2VydmljZSBlcnJvcjogUmVjZWl2ZWQgdHVybiBlbmQgZm9yIGFuIHVua25vd24gdHVybiBpZDpcIiArIGlkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0dXJuU3RhdGUgPSB0aGlzLnByaXZUdXJuTWFwLmdldChpZCk7XG4gICAgICAgIHR1cm5TdGF0ZS5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnByaXZUdXJuTWFwLmRlbGV0ZShpZCk7XG4gICAgICAgIHJldHVybiB0dXJuU3RhdGU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBSZXNwb25zaWJsZSBmb3IgYnVpbGRpbmcgdGhlIG9iamVjdCB0byBiZSBzZW50IHRvIHRoZSBzcGVlY2ggc2VydmljZSB0byBzdXBwb3J0IGR5bmFtaWMgZ3JhbW1hcnMuXG4gKiBAY2xhc3MgRHluYW1pY0dyYW1tYXJCdWlsZGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBEeW5hbWljR3JhbW1hckJ1aWxkZXIge1xuICAgIC8vIEFkZHMgb25lIG1vcmUgcmVmZXJlbmNlIHBocmFzZXMgdG8gdGhlIGR5bmFtaWMgZ3JhbW1hciB0byBzZW5kLlxuICAgIC8vIEFsbCBhZGRlZCBwaHJhc2VzIGFyZSBnZW5lcmljIHBocmFzZXMuXG4gICAgYWRkUGhyYXNlKHBocmFzZSkge1xuICAgICAgICBpZiAoIXRoaXMucHJpdlBocmFzZXMpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGhyYXNlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZXMgPSB0aGlzLnByaXZQaHJhc2VzLmNvbmNhdChwaHJhc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2UGhyYXNlcy5wdXNoKHBocmFzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2xlYXJzIGFsbCBwaHJhc2VzIHN0b3JlZCBpbiB0aGUgY3VycmVudCBvYmplY3QuXG4gICAgY2xlYXJQaHJhc2VzKCkge1xuICAgICAgICB0aGlzLnByaXZQaHJhc2VzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBBZGRzIG9uZSBvciBtb3JlIHJlZmVyZW5jZSBncmFtbWFycyB0byB0aGUgY3VycmVudCBncmFtbWFyLlxuICAgIGFkZFJlZmVyZW5jZUdyYW1tYXIoZ3JhbW1hcikge1xuICAgICAgICBpZiAoIXRoaXMucHJpdkdyYW1tYXJzKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZHcmFtbWFycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChncmFtbWFyIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkdyYW1tYXJzID0gdGhpcy5wcml2R3JhbW1hcnMuY29uY2F0KGdyYW1tYXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2R3JhbW1hcnMucHVzaChncmFtbWFyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjbGVhcnMgYWxsIGdyYW1tYXJzIHN0b3JlZCBvbiB0aGUgcmVjb2duaXplci5cbiAgICBjbGVhckdyYW1tYXJzKCkge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWFycyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8gR2VuZXJhdGVzIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIGR5bmFtaWMgZ3JhbW1hciB1c2VkIGJ5IHRoZSBTcGVlY2ggU2VydmljZS5cbiAgICAvLyBUaGlzIGlzIGRvbmUgYnkgYnVpbGRpbmcgYW4gb2JqZWN0IHdpdGggdGhlIGNvcnJlY3QgbGF5b3V0IGJhc2VkIG9uIHRoZSBwaHJhc2VzIGFuZCByZWZlcmVuY2UgZ3JhbW1hcnMgYWRkZWQgdG8gdGhpcyBpbnN0YW5jZVxuICAgIC8vIG9mIGEgRHluYW1pY0dyYW1tYXJCdWlsZGVyXG4gICAgZ2VuZXJhdGVHcmFtbWFyT2JqZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2R3JhbW1hcnMgPT09IHVuZGVmaW5lZCAmJiB0aGlzLnByaXZQaHJhc2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmV0T2JqID0ge307XG4gICAgICAgIHJldE9iai5SZWZlcmVuY2VHcmFtbWFycyA9IHRoaXMucHJpdkdyYW1tYXJzO1xuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLnByaXZQaHJhc2VzICYmIDAgIT09IHRoaXMucHJpdlBocmFzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCByZXRQaHJhc2VzID0gW107XG4gICAgICAgICAgICB0aGlzLnByaXZQaHJhc2VzLmZvckVhY2goKHZhbHVlLCBpbmRleCwgYXJyYXkpID0+IHtcbiAgICAgICAgICAgICAgICByZXRQaHJhc2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBUZXh0OiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0T2JqLkdyb3VwcyA9IFt7IFR5cGU6IFwiR2VuZXJpY1wiLCBJdGVtczogcmV0UGhyYXNlcyB9XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0T2JqO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHluYW1pY0dyYW1tYXJCdWlsZGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGUsIENhbmNlbGxhdGlvblJlYXNvbiwgUmVzdWx0UmVhc29uIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBSZWNvZ25pdGlvblN0YXR1cyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBFbnVtVHJhbnNsYXRpb24ge1xuICAgIHN0YXRpYyBpbXBsVHJhbnNsYXRlUmVjb2duaXRpb25SZXN1bHQocmVjb2duaXRpb25TdGF0dXMpIHtcbiAgICAgICAgbGV0IHJlYXNvbiA9IFJlc3VsdFJlYXNvbi5DYW5jZWxlZDtcbiAgICAgICAgc3dpdGNoIChyZWNvZ25pdGlvblN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5TdWNjZXNzOlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IFJlc3VsdFJlYXNvbi5SZWNvZ25pemVkU3BlZWNoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5Ob01hdGNoOlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5Jbml0aWFsU2lsZW5jZVRpbWVvdXQ6XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkJhYmJsZVRpbWVvdXQ6XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkVuZE9mRGljdGF0aW9uOlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IFJlc3VsdFJlYXNvbi5Ob01hdGNoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5FcnJvcjpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVhc29uID0gUmVzdWx0UmVhc29uLkNhbmNlbGVkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWFzb247XG4gICAgfVxuICAgIHN0YXRpYyBpbXBsVHJhbnNsYXRlQ2FuY2VsUmVzdWx0KHJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgICAgIGxldCByZWFzb24gPSBDYW5jZWxsYXRpb25SZWFzb24uRW5kT2ZTdHJlYW07XG4gICAgICAgIHN3aXRjaCAocmVjb2duaXRpb25TdGF0dXMpIHtcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuU3VjY2VzczpcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuRW5kT2ZEaWN0YXRpb246XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLk5vTWF0Y2g6XG4gICAgICAgICAgICAgICAgcmVhc29uID0gQ2FuY2VsbGF0aW9uUmVhc29uLkVuZE9mU3RyZWFtO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5Jbml0aWFsU2lsZW5jZVRpbWVvdXQ6XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkJhYmJsZVRpbWVvdXQ6XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkVycm9yOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlYXNvbjtcbiAgICB9XG4gICAgc3RhdGljIGltcGxUcmFuc2xhdGVDYW5jZWxFcnJvckNvZGUocmVjb2duaXRpb25TdGF0dXMpIHtcbiAgICAgICAgbGV0IHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yO1xuICAgICAgICBzd2l0Y2ggKHJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkVycm9yOlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5TZXJ2aWNlRXJyb3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLlRvb01hbnlSZXF1ZXN0czpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBDYW5jZWxsYXRpb25FcnJvckNvZGUuVG9vTWFueVJlcXVlc3RzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVhc29uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW51bVRyYW5zbGF0aW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBNYWtlIHN1cmUgbm90IHRvIGV4cG9ydCBpbnRlcm5hbCBtb2R1bGVzLlxuLy9cbmV4cG9ydCAqIGZyb20gXCIuL0NvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9Db2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JQXV0aGVudGljYXRpb25cIjtcbmV4cG9ydCAqIGZyb20gXCIuL0ludGVudENvbm5lY3Rpb25GYWN0b3J5XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9SZWNvZ25pdGlvbkV2ZW50c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZVJlY29nbml6ZXJCYXNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9SZWNvZ25pemVyQ29uZmlnXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9XZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TcGVlY2hDb25uZWN0aW9uRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vVHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vRW51bVRyYW5zbGF0aW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvRW51bXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9UcmFuc2xhdGlvblN5bnRoZXNpc0VuZFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL1RyYW5zbGF0aW9uSHlwb3RoZXNpc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL1RyYW5zbGF0aW9uUGhyYXNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9UcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvU3BlZWNoRGV0ZWN0ZWRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9TcGVlY2hIeXBvdGhlc2lzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TcGVlY2hTZXJ2aWNlUmVjb2duaXplclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL0RldGFpbGVkU3BlZWNoUGhyYXNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvU2ltcGxlU3BlZWNoUGhyYXNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9BZGRlZExtSW50ZW50XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JbnRlbnRTZXJ2aWNlUmVjb2duaXplclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL0ludGVudFJlc3BvbnNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9SZXF1ZXN0U2Vzc2lvblwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU3BlZWNoQ29udGV4dFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vRHluYW1pY0dyYW1tYXJCdWlsZGVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9EaWFsb2dTZXJ2aWNlQWRhcHRlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vQWdlbnRDb25maWdcIjtcbmV4cG9ydCBjb25zdCBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUgPSBcIk91dHB1dEZvcm1hdFwiO1xuZXhwb3J0IGNvbnN0IENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSA9IFwiQ2FuY2VsbGF0aW9uRXJyb3JDb2RlXCI7XG5leHBvcnQgY29uc3QgU2VydmljZVByb3BlcnRpZXNQcm9wZXJ0eU5hbWUgPSBcIlNlcnZpY2VQcm9wZXJ0aWVzXCI7XG5leHBvcnQgY29uc3QgRm9yY2VEaWN0YXRpb25Qcm9wZXJ0eU5hbWUgPSBcIkZvcmNlRGljYXRpb25cIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhwb3J0cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGNsYXNzIEF1dGhJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcihoZWFkZXJOYW1lLCB0b2tlbikge1xuICAgICAgICB0aGlzLnByaXZIZWFkZXJOYW1lID0gaGVhZGVyTmFtZTtcbiAgICAgICAgdGhpcy5wcml2VG9rZW4gPSB0b2tlbjtcbiAgICB9XG4gICAgZ2V0IGhlYWRlck5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZIZWFkZXJOYW1lO1xuICAgIH1cbiAgICBnZXQgdG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUb2tlbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlBdXRoZW50aWNhdGlvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJveHlJbmZvLCBXZWJzb2NrZXRDb25uZWN0aW9uLCB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uRmFjdG9yeUJhc2UgfSBmcm9tIFwiLi9Db25uZWN0aW9uRmFjdG9yeUJhc2VcIjtcbmltcG9ydCB7IFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuY29uc3QgVGVzdEhvb2tzUGFyYW1OYW1lID0gXCJ0ZXN0aG9va3NcIjtcbmNvbnN0IENvbm5lY3Rpb25JZEhlYWRlciA9IFwiWC1Db25uZWN0aW9uSWRcIjtcbmV4cG9ydCBjbGFzcyBJbnRlbnRDb25uZWN0aW9uRmFjdG9yeSBleHRlbmRzIENvbm5lY3Rpb25GYWN0b3J5QmFzZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY3JlYXRlID0gKGNvbmZpZywgYXV0aEluZm8sIGNvbm5lY3Rpb25JZCkgPT4ge1xuICAgICAgICAgICAgbGV0IGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCk7XG4gICAgICAgICAgICBpZiAoIWVuZHBvaW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9JbnRlbnRSZWdpb24pO1xuICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gXCJ3c3M6Ly9zcGVlY2gucGxhdGZvcm0uYmluZy5jb20vc3BlZWNoL1wiICsgdGhpcy5nZXRTcGVlY2hSZWdpb25Gcm9tSW50ZW50UmVnaW9uKHJlZ2lvbikgKyBcIi9yZWNvZ25pdGlvbi9pbnRlcmFjdGl2ZS9jb2duaXRpdmVzZXJ2aWNlcy92MVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBcInNpbXBsZVwiLFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlOiBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXRDb21tb25VcmxQYXJhbXMoY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnQpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyc1thdXRoSW5mby5oZWFkZXJOYW1lXSA9IGF1dGhJbmZvLnRva2VuO1xuICAgICAgICAgICAgaGVhZGVyc1tDb25uZWN0aW9uSWRIZWFkZXJdID0gY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBXZWJzb2NrZXRDb25uZWN0aW9uKGVuZHBvaW50LCBxdWVyeVBhcmFtcywgaGVhZGVycywgbmV3IFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIoKSwgUHJveHlJbmZvLmZyb21SZWNvZ25pemVyQ29uZmlnKGNvbmZpZyksIGNvbm5lY3Rpb25JZCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFNwZWVjaFJlZ2lvbkZyb21JbnRlbnRSZWdpb24oaW50ZW50UmVnaW9uKSB7XG4gICAgICAgIHN3aXRjaCAoaW50ZW50UmVnaW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwiV2VzdCBVU1wiOlxuICAgICAgICAgICAgY2FzZSBcIlVTIFdlc3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ3ZXN0dXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1c3dlc3RcIjtcbiAgICAgICAgICAgIGNhc2UgXCJXZXN0IFVTIDJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBXZXN0IDJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ3ZXN0dXMyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXN3ZXN0MlwiO1xuICAgICAgICAgICAgY2FzZSBcIlNvdXRoIENlbnRyYWwgVVNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBTb3V0aCBDZW50cmFsXCI6XG4gICAgICAgICAgICBjYXNlIFwic291dGhjZW50cmFsdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1c3NvdXRoY2VudHJhbFwiO1xuICAgICAgICAgICAgY2FzZSBcIldlc3QgQ2VudHJhbCBVU1wiOlxuICAgICAgICAgICAgY2FzZSBcIlVTIFdlc3QgQ2VudHJhbFwiOlxuICAgICAgICAgICAgY2FzZSBcIndlc3RjZW50cmFsdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1c3dlc3RjZW50cmFsXCI7XG4gICAgICAgICAgICBjYXNlIFwiRWFzdCBVU1wiOlxuICAgICAgICAgICAgY2FzZSBcIlVTIEVhc3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlYXN0dXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1c2Vhc3RcIjtcbiAgICAgICAgICAgIGNhc2UgXCJFYXN0IFVTIDJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBFYXN0IDJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlYXN0dXMyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXNlYXN0MlwiO1xuICAgICAgICAgICAgY2FzZSBcIldlc3QgRXVyb3BlXCI6XG4gICAgICAgICAgICBjYXNlIFwiRXVyb3BlIFdlc3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ3ZXN0ZXVyb3BlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZXVyb3Bld2VzdFwiO1xuICAgICAgICAgICAgY2FzZSBcIk5vcnRoIEV1cm9wZVwiOlxuICAgICAgICAgICAgY2FzZSBcIkV1cm9wZSBOb3J0aFwiOlxuICAgICAgICAgICAgY2FzZSBcIm5vcnRoZXVyb3BlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZXVyb3Blbm9ydGhcIjtcbiAgICAgICAgICAgIGNhc2UgXCJCcmF6aWwgU291dGhcIjpcbiAgICAgICAgICAgIGNhc2UgXCJTb3V0aCBCcmF6aWxcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzb3V0aGJyYXppbFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImJyYXppbHNvdXRoXCI7XG4gICAgICAgICAgICBjYXNlIFwiQXVzdHJhbGlhIEVhc3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJFYXN0IEF1c3RyYWxpYVwiOlxuICAgICAgICAgICAgY2FzZSBcImVhc3RhdXN0cmFsaWFcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhdXN0cmFsaWFlYXN0XCI7XG4gICAgICAgICAgICBjYXNlIFwiU291dGhlYXN0IEFzaWFcIjpcbiAgICAgICAgICAgIGNhc2UgXCJBc2lhIFNvdXRoZWFzdFwiOlxuICAgICAgICAgICAgY2FzZSBcInNvdXRoZWFzdGFzaWFcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2lhc291dGhlYXN0XCI7XG4gICAgICAgICAgICBjYXNlIFwiRWFzdCBBc2lhXCI6XG4gICAgICAgICAgICBjYXNlIFwiQXNpYSBFYXN0XCI6XG4gICAgICAgICAgICBjYXNlIFwiZWFzdGFzaWFcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2lhZWFzdFwiO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gaW50ZW50UmVnaW9uO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRDb25uZWN0aW9uRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgTWVzc2FnZVR5cGUsIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGUsIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MsIEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzLCBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCBSZXN1bHRSZWFzb24sIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIEVudW1UcmFuc2xhdGlvbiwgSW50ZW50UmVzcG9uc2UsIFNlcnZpY2VSZWNvZ25pemVyQmFzZSwgU2ltcGxlU3BlZWNoUGhyYXNlLCBTcGVlY2hIeXBvdGhlc2lzLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIEludGVudFNlcnZpY2VSZWNvZ25pemVyIGV4dGVuZHMgU2VydmljZVJlY29nbml6ZXJCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCByZWNvZ25pemVyKSB7XG4gICAgICAgIHN1cGVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHJlY29nbml6ZXIpO1xuICAgICAgICB0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyID0gcmVjb2duaXplcjtcbiAgICAgICAgdGhpcy5wcml2SW50ZW50RGF0YVNlbnQgPSBmYWxzZTtcbiAgICB9XG4gICAgc2V0SW50ZW50cyhhZGRlZEludGVudHMsIHVtYnJlbGxhSW50ZW50KSB7XG4gICAgICAgIHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzID0gYWRkZWRJbnRlbnRzO1xuICAgICAgICB0aGlzLnByaXZVbWJyZWxsYUludGVudCA9IHVtYnJlbGxhSW50ZW50O1xuICAgICAgICB0aGlzLnByaXZJbnRlbnREYXRhU2VudCA9IHRydWU7XG4gICAgfVxuICAgIHByb2Nlc3NUeXBlU3BlY2lmaWNNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxCYWNrKSB7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGxldCBldjtcbiAgICAgICAgY29uc3QgcmVzdWx0UHJvcHMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIGlmIChjb25uZWN0aW9uTWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuVGV4dCkge1xuICAgICAgICAgICAgcmVzdWx0UHJvcHMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlIFwic3BlZWNoLmh5cG90aGVzaXNcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hIeXBvdGhlc2lzID0gU3BlZWNoSHlwb3RoZXNpcy5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEludGVudFJlY29nbml0aW9uUmVzdWx0KHVuZGVmaW5lZCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBSZXN1bHRSZWFzb24uUmVjb2duaXppbmdJbnRlbnQsIHNwZWVjaEh5cG90aGVzaXMuVGV4dCwgc3BlZWNoSHlwb3RoZXNpcy5EdXJhdGlvbiwgc3BlZWNoSHlwb3RoZXNpcy5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0LCB1bmRlZmluZWQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5LCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25IeXBvdGhlc2lzKHJlc3VsdC5vZmZzZXQpO1xuICAgICAgICAgICAgICAgIGV2ID0gbmV3IEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgc3BlZWNoSHlwb3RoZXNpcy5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkludGVudFJlY29nbml6ZXIucmVjb2duaXppbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkludGVudFJlY29nbml6ZXIucmVjb2duaXppbmcodGhpcy5wcml2SW50ZW50UmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzcGVlY2gucGhyYXNlXCI6XG4gICAgICAgICAgICAgICAgY29uc3Qgc2ltcGxlID0gU2ltcGxlU3BlZWNoUGhyYXNlLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgSW50ZW50UmVjb2duaXRpb25SZXN1bHQodW5kZWZpbmVkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlUmVjb2duaXRpb25SZXN1bHQoc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzKSwgc2ltcGxlLkRpc3BsYXlUZXh0LCBzaW1wbGUuRHVyYXRpb24sIHNpbXBsZS5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0LCB1bmRlZmluZWQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5LCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgZXYgPSBuZXcgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCByZXN1bHQub2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbmRFdmVudCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5yZWNvZ25pemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkludGVudFJlY29nbml6ZXIucmVjb2duaXplZCh0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoISFzdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWVycm9yQ2FsbEJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsQmFjayhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGludm9rZSB0aGUgY2FsbCBiYWNrIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBJZiBpbnRlbnQgZGF0YSB3YXMgc2VudCwgdGhlIHRlcm1pbmFsIHJlc3VsdCBmb3IgdGhpcyByZWNvZ25pemVyIGlzIGFuIGludGVudCBiZWluZyBmb3VuZC5cbiAgICAgICAgICAgICAgICAvLyBJZiBubyBpbnRlbnQgZGF0YSB3YXMgc2VudCwgdGhlIHRlcm1pbmFsIGV2ZW50IGlzIHNwZWVjaCByZWNvZ25pdGlvbiBiZWluZyBzdWNjZXNzZnVsLlxuICAgICAgICAgICAgICAgIGlmIChmYWxzZSA9PT0gdGhpcy5wcml2SW50ZW50RGF0YVNlbnQgfHwgUmVzdWx0UmVhc29uLk5vTWF0Y2ggPT09IGV2LnJlc3VsdC5yZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgYnVmZmVycy5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QaHJhc2VSZWNvZ25pemVkKGV2Lm9mZnNldCArIGV2LnJlc3VsdC5kdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRFdmVudCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3F1aXJyZWwgYXdheSB0aGUgYXJncywgd2hlbiB0aGUgcmVzcG9uc2UgZXZlbnQgYXJyaXZlcyBpdCB3aWxsIGJ1aWxkIHVwb24gdGhlbVxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhlbiByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UGVuZGluZ0ludGVudEFyZ3MgPSBldjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmVzcG9uc2VcIjpcbiAgICAgICAgICAgICAgICAvLyBSZXNwb25zZSBmcm9tIExVSVNcbiAgICAgICAgICAgICAgICBldiA9IHRoaXMucHJpdlBlbmRpbmdJbnRlbnRBcmdzO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlBlbmRpbmdJbnRlbnRBcmdzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGV2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcIlwiID09PSBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjb25kaXRpb24gaGFwcGVucyBpZiB0aGVyZSBpcyBub3RoaW5nIGJ1dCBzaWxlbmNlIGluIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXVkaW8gc2VudCB0byB0aGUgc2VydmljZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBPZGQuLi4gTm90IHN1cmUgdGhpcyBjYW4gaGFwcGVuXG4gICAgICAgICAgICAgICAgICAgIGV2ID0gbmV3IEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzKG5ldyBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCgpLCAwIC8qVE9ETyovLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlbnRSZXNwb25zZSA9IEludGVudFJlc3BvbnNlLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAvLyBJZiBMVUlTIGRpZG4ndCByZXR1cm4gYW55dGhpbmcsIHNlbmQgdGhlIGV4aXN0aW5nIGV2ZW50LCBlbHNlXG4gICAgICAgICAgICAgICAgLy8gbW9kaWZ5IGl0IHRvIHNob3cgdGhlIG1hdGNoLlxuICAgICAgICAgICAgICAgIC8vIFNlZSBpZiB0aGUgaW50ZW50IGZvdW5kIGlzIGluIHRoZSBsaXN0IG9mIGludGVudHMgYXNrZWQgZm9yLlxuICAgICAgICAgICAgICAgIGxldCBhZGRlZEludGVudCA9IHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzW2ludGVudFJlc3BvbnNlLnRvcFNjb3JpbmdJbnRlbnQuaW50ZW50XTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2VW1icmVsbGFJbnRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRlZEludGVudCA9IHRoaXMucHJpdlVtYnJlbGxhSW50ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gaW50ZW50UmVzcG9uc2UgJiYgYWRkZWRJbnRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlbnRJZCA9IGFkZGVkSW50ZW50LmludGVudE5hbWUgPT09IHVuZGVmaW5lZCA/IGludGVudFJlc3BvbnNlLnRvcFNjb3JpbmdJbnRlbnQuaW50ZW50IDogYWRkZWRJbnRlbnQuaW50ZW50TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlYXNvbiA9IGV2LnJlc3VsdC5yZWFzb247XG4gICAgICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IGludGVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb24gPSBSZXN1bHRSZWFzb24uUmVjb2duaXplZEludGVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUsIHByb3BlcnRpZXMgaXMgc2V0LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gKHVuZGVmaW5lZCAhPT0gZXYucmVzdWx0LnByb3BlcnRpZXMpID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2LnJlc3VsdC5wcm9wZXJ0aWVzIDogbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgZXYgPSBuZXcgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MobmV3IEludGVudFJlY29nbml0aW9uUmVzdWx0KGludGVudElkLCBldi5yZXN1bHQucmVzdWx0SWQsIHJlYXNvbiwgZXYucmVzdWx0LnRleHQsIGV2LnJlc3VsdC5kdXJhdGlvbiwgZXYucmVzdWx0Lm9mZnNldCwgZXYucmVzdWx0LmVycm9yRGV0YWlscywgZXYucmVzdWx0Lmpzb24sIHByb3BlcnRpZXMpLCBldi5vZmZzZXQsIGV2LnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUGhyYXNlUmVjb2duaXplZChldi5vZmZzZXQgKyBldi5yZXN1bHQuZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkludGVudFJlY29nbml6ZXIucmVjb2duaXplZCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5yZWNvZ25pemVkKHRoaXMucHJpdkludGVudFJlY29nbml6ZXIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgIGlmICghIXN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKGV2LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWVycm9yQ2FsbEJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaW52b2tlIHRoZSBjYWxsIGJhY2sgb25jZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGlmIGl0J3Mgc3VjY2Vzc2Z1bCBkb24ndCBpbnZva2UgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsQmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENhbmNlbHMgcmVjb2duaXRpb24uXG4gICAgY2FuY2VsUmVjb2duaXRpb24oc2Vzc2lvbklkLCByZXF1ZXN0SWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JDb2RlLCBlcnJvciwgY2FuY2VsUmVjb0NhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIHByb3BlcnRpZXMuc2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbZXJyb3JDb2RlXSk7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkludGVudFJlY29nbml6ZXIuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEV2ZW50ID0gbmV3IEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MoY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvciwgZXJyb3JDb2RlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5jYW5jZWxlZCh0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLCBjYW5jZWxFdmVudCk7XG4gICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhY2FuY2VsUmVjb0NhbGxiYWNrKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgSW50ZW50UmVjb2duaXRpb25SZXN1bHQodW5kZWZpbmVkLCAvLyBJbnRlbnQgSWRcbiAgICAgICAgICAgIHJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLkNhbmNlbGVkLCB1bmRlZmluZWQsIC8vIFRleHRcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gRHJ1YXRpb25cbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gT2Zmc2V0XG4gICAgICAgICAgICBlcnJvciwgdW5kZWZpbmVkLCAvLyBKc29uXG4gICAgICAgICAgICBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsUmVjb0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYikgeyB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVudFNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgUXVlcnlQYXJhbWV0ZXJOYW1lcyB7XG4gICAgc3RhdGljIGdldCBUZXN0SG9va3NQYXJhbU5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcInRlc3Rob29rc1wiO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IENvbm5lY3Rpb25JZEhlYWRlcigpIHtcbiAgICAgICAgcmV0dXJuIFwiWC1Db25uZWN0aW9uSWRcIjtcbiAgICB9XG4gICAgc3RhdGljIGdldCBEZXBsb3ltZW50SWRQYXJhbU5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImNpZFwiO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IEZvcm1hdFBhcmFtTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZm9ybWF0XCI7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgTGFuZ3VhZ2VQYXJhbU5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImxhbmd1YWdlXCI7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgVHJhbnNsYXRpb25Gcm9tUGFyYW1OYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJmcm9tXCI7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgVHJhbnNsYXRpb25Ub1BhcmFtTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidG9cIjtcbiAgICB9XG4gICAgc3RhdGljIGdldCBQcm9mYW5pZnkoKSB7XG4gICAgICAgIHJldHVybiBcInByb2Zhbml0eVwiO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IEVuYWJsZUF1ZGlvTG9nZ2luZygpIHtcbiAgICAgICAgcmV0dXJuIFwic3RvcmVBdWRpb1wiO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IEVuYWJsZVdvcmRMZXZlbFRpbWVzdGFtcHMoKSB7XG4gICAgICAgIHJldHVybiBcIndvcmRMZXZlbFRpbWVzdGFtcHNcIjtcbiAgICB9XG4gICAgc3RhdGljIGdldCBJbml0aWFsU2lsZW5jZVRpbWVvdXRNcygpIHtcbiAgICAgICAgcmV0dXJuIFwiaW5pdGlhbFNpbGVuY2VUaW1lb3V0TXNcIjtcbiAgICB9XG4gICAgc3RhdGljIGdldCBFbmRTaWxlbmNlVGltZW91dE1zKCkge1xuICAgICAgICByZXR1cm4gXCJlbmRTaWxlbmNlVGltZW91dE1zXCI7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgU3RhYmxlSW50ZXJtZWRpYXRlVGhyZXNob2xkKCkge1xuICAgICAgICByZXR1cm4gXCJzdGFibGVJbnRlcm1lZGlhdGVUaHJlc2hvbGRcIjtcbiAgICB9XG4gICAgc3RhdGljIGdldCBTdGFibGVUcmFuc2xhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFwic3RhYmxlVHJhbnNsYXRpb25cIjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXJ5UGFyYW1ldGVyTmFtZXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEV2ZW50VHlwZSwgUGxhdGZvcm1FdmVudCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlY29nbml0aW9uRXZlbnQgZXh0ZW5kcyBQbGF0Zm9ybUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihldmVudE5hbWUsIHJlcXVlc3RJZCwgc2Vzc2lvbklkLCBldmVudFR5cGUgPSBFdmVudFR5cGUuSW5mbykge1xuICAgICAgICBzdXBlcihldmVudE5hbWUsIGV2ZW50VHlwZSk7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcbiAgICAgICAgdGhpcy5wcml2U2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuICAgIH1cbiAgICBnZXQgcmVxdWVzdElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVxdWVzdElkO1xuICAgIH1cbiAgICBnZXQgc2Vzc2lvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2Vzc2lvbklkO1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFJlY29nbml0aW9uVHJpZ2dlcmVkRXZlbnQgZXh0ZW5kcyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0SWQsIHNlc3Npb25JZCwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgc3VwZXIoXCJSZWNvZ25pdGlvblRyaWdnZXJlZEV2ZW50XCIsIHJlcXVlc3RJZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCA9IGF1ZGlvU291cmNlSWQ7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZUlkID0gYXVkaW9Ob2RlSWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb1NvdXJjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvTm9kZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgfVxufVxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgTGlzdGVuaW5nU3RhcnRlZEV2ZW50IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IocmVxdWVzdElkLCBzZXNzaW9uSWQsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHN1cGVyKFwiTGlzdGVuaW5nU3RhcnRlZEV2ZW50XCIsIHJlcXVlc3RJZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCA9IGF1ZGlvU291cmNlSWQ7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZUlkID0gYXVkaW9Ob2RlSWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb1NvdXJjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvTm9kZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgfVxufVxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IocmVxdWVzdElkLCBhdXRoRmV0Y2hFdmVudGlkLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW5nVG9TZXJ2aWNlRXZlbnRcIiwgcmVxdWVzdElkLCBzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudGlkID0gYXV0aEZldGNoRXZlbnRpZDtcbiAgICB9XG4gICAgZ2V0IGF1dGhGZXRjaEV2ZW50aWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudGlkO1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFJlY29nbml0aW9uU3RhcnRlZEV2ZW50IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IocmVxdWVzdElkLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCwgYXV0aEZldGNoRXZlbnRJZCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKFwiUmVjb2duaXRpb25TdGFydGVkRXZlbnRcIiwgcmVxdWVzdElkLCBzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb1NvdXJjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvTm9kZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgfVxuICAgIGdldCBhdXRoRmV0Y2hFdmVudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZDtcbiAgICB9XG59XG5leHBvcnQgdmFyIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1cztcbihmdW5jdGlvbiAoUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzKSB7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIlN1Y2Nlc3NcIl0gPSAwXSA9IFwiU3VjY2Vzc1wiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJBdWRpb1NvdXJjZUVycm9yXCJdID0gMV0gPSBcIkF1ZGlvU291cmNlRXJyb3JcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiQXVkaW9Tb3VyY2VUaW1lb3V0XCJdID0gMl0gPSBcIkF1ZGlvU291cmNlVGltZW91dFwiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJBdXRoVG9rZW5GZXRjaEVycm9yXCJdID0gM10gPSBcIkF1dGhUb2tlbkZldGNoRXJyb3JcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiQXV0aFRva2VuRmV0Y2hUaW1lb3V0XCJdID0gNF0gPSBcIkF1dGhUb2tlbkZldGNoVGltZW91dFwiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJVbkF1dGhvcml6ZWRcIl0gPSA1XSA9IFwiVW5BdXRob3JpemVkXCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIkNvbm5lY3RUaW1lb3V0XCJdID0gNl0gPSBcIkNvbm5lY3RUaW1lb3V0XCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIkNvbm5lY3RFcnJvclwiXSA9IDddID0gXCJDb25uZWN0RXJyb3JcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiQ2xpZW50UmVjb2duaXRpb25BY3Rpdml0eVRpbWVvdXRcIl0gPSA4XSA9IFwiQ2xpZW50UmVjb2duaXRpb25BY3Rpdml0eVRpbWVvdXRcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiVW5rbm93bkVycm9yXCJdID0gOV0gPSBcIlVua25vd25FcnJvclwiO1xufSkoUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzIHx8IChSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXMgPSB7fSkpO1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgUmVjb2duaXRpb25FbmRlZEV2ZW50IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IocmVxdWVzdElkLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCwgYXV0aEZldGNoRXZlbnRJZCwgc2Vzc2lvbklkLCBzZXJ2aWNlVGFnLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgIHN1cGVyKFwiUmVjb2duaXRpb25FbmRlZEV2ZW50XCIsIHJlcXVlc3RJZCwgc2Vzc2lvbklkLCBzdGF0dXMgPT09IFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1cy5TdWNjZXNzID8gRXZlbnRUeXBlLkluZm8gOiBFdmVudFR5cGUuRXJyb3IpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgICAgIHRoaXMucHJpdlN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5wcml2U2VydmljZVRhZyA9IHNlcnZpY2VUYWc7XG4gICAgfVxuICAgIGdldCBhdWRpb1NvdXJjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvTm9kZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgfVxuICAgIGdldCBhdXRoRmV0Y2hFdmVudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZDtcbiAgICB9XG4gICAgZ2V0IHNlcnZpY2VUYWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTZXJ2aWNlVGFnO1xuICAgIH1cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RhdHVzO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvcjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlY29nbml0aW9uRXZlbnRzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgdmFyIFJlY29nbml0aW9uTW9kZTtcbihmdW5jdGlvbiAoUmVjb2duaXRpb25Nb2RlKSB7XG4gICAgUmVjb2duaXRpb25Nb2RlW1JlY29nbml0aW9uTW9kZVtcIkludGVyYWN0aXZlXCJdID0gMF0gPSBcIkludGVyYWN0aXZlXCI7XG4gICAgUmVjb2duaXRpb25Nb2RlW1JlY29nbml0aW9uTW9kZVtcIkNvbnZlcnNhdGlvblwiXSA9IDFdID0gXCJDb252ZXJzYXRpb25cIjtcbiAgICBSZWNvZ25pdGlvbk1vZGVbUmVjb2duaXRpb25Nb2RlW1wiRGljdGF0aW9uXCJdID0gMl0gPSBcIkRpY3RhdGlvblwiO1xufSkoUmVjb2duaXRpb25Nb2RlIHx8IChSZWNvZ25pdGlvbk1vZGUgPSB7fSkpO1xuZXhwb3J0IHZhciBTcGVlY2hSZXN1bHRGb3JtYXQ7XG4oZnVuY3Rpb24gKFNwZWVjaFJlc3VsdEZvcm1hdCkge1xuICAgIFNwZWVjaFJlc3VsdEZvcm1hdFtTcGVlY2hSZXN1bHRGb3JtYXRbXCJTaW1wbGVcIl0gPSAwXSA9IFwiU2ltcGxlXCI7XG4gICAgU3BlZWNoUmVzdWx0Rm9ybWF0W1NwZWVjaFJlc3VsdEZvcm1hdFtcIkRldGFpbGVkXCJdID0gMV0gPSBcIkRldGFpbGVkXCI7XG59KShTcGVlY2hSZXN1bHRGb3JtYXQgfHwgKFNwZWVjaFJlc3VsdEZvcm1hdCA9IHt9KSk7XG5leHBvcnQgY2xhc3MgUmVjb2duaXplckNvbmZpZyB7XG4gICAgY29uc3RydWN0b3Ioc3BlZWNoU2VydmljZUNvbmZpZywgcGFyYW1ldGVycykge1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pdGlvbk1vZGUgPSBSZWNvZ25pdGlvbk1vZGUuSW50ZXJhY3RpdmU7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFNlcnZpY2VDb25maWcgPSBzcGVlY2hTZXJ2aWNlQ29uZmlnID8gc3BlZWNoU2VydmljZUNvbmZpZyA6IG5ldyBTcGVlY2hTZXJ2aWNlQ29uZmlnKG5ldyBDb250ZXh0KG51bGwpKTtcbiAgICAgICAgdGhpcy5wcml2UGFyYW1ldGVycyA9IHBhcmFtZXRlcnM7XG4gICAgfVxuICAgIGdldCBwYXJhbWV0ZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFyYW1ldGVycztcbiAgICB9XG4gICAgZ2V0IHJlY29nbml0aW9uTW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY29nbml0aW9uTW9kZTtcbiAgICB9XG4gICAgc2V0IHJlY29nbml0aW9uTW9kZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pdGlvbk1vZGUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5wcml2UmVjb2duaXRpb25BY3Rpdml0eVRpbWVvdXQgPSB2YWx1ZSA9PT0gUmVjb2duaXRpb25Nb2RlLkludGVyYWN0aXZlID8gODAwMCA6IDI1MDAwO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hTZXJ2aWNlQ29uZmlnLlJlY29nbml0aW9uID0gUmVjb2duaXRpb25Nb2RlW3ZhbHVlXTtcbiAgICB9XG4gICAgZ2V0IFNwZWVjaFNlcnZpY2VDb25maWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hTZXJ2aWNlQ29uZmlnO1xuICAgIH1cbiAgICBnZXQgcmVjb2duaXRpb25BY3Rpdml0eVRpbWVvdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWNvZ25pdGlvbkFjdGl2aXR5VGltZW91dDtcbiAgICB9XG4gICAgZ2V0IGlzQ29udGludW91c1JlY29nbml0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjb2duaXRpb25Nb2RlICE9PSBSZWNvZ25pdGlvbk1vZGUuSW50ZXJhY3RpdmU7XG4gICAgfVxufVxuLy8gVGhlIGNvbmZpZyBpcyBzZXJpYWxpemVkIGFuZCBzZW50IGFzIHRoZSBTcGVlY2guQ29uZmlnXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBTcGVlY2hTZXJ2aWNlQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGsgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudFtrICYmIGsuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBrLnN1YnN0cmluZygxKV0gPSB2YWx1ZVtrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIH1cbiAgICBnZXQgQ29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dDtcbiAgICB9XG4gICAgZ2V0IFJlY29nbml0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWNvZ25pdGlvbjtcbiAgICB9XG4gICAgc2V0IFJlY29nbml0aW9uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucmVjb2duaXRpb24gPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKG9zKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtID0gbmV3IFN5c3RlbSgpO1xuICAgICAgICB0aGlzLm9zID0gb3M7XG4gICAgfVxufVxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgU3lzdGVtIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gTm90ZTogYmVsb3cgd2lsbCBiZSBwYXRjaGVkIGZvciBvZmZpY2lhbCBidWlsZHMuXG4gICAgICAgIGNvbnN0IFNQRUVDSFNES19DTElFTlRTREtfVkVSU0lPTiA9IFwiMS42LjAtYWxwaGEuMC4xXCI7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiU3BlZWNoU0RLXCI7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IFNQRUVDSFNES19DTElFTlRTREtfVkVSU0lPTjtcbiAgICAgICAgdGhpcy5idWlsZCA9IFwiSmF2YVNjcmlwdFwiO1xuICAgICAgICB0aGlzLmxhbmcgPSBcIkphdmFTY3JpcHRcIjtcbiAgICB9XG59XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBPUyB7XG4gICAgY29uc3RydWN0b3IocGxhdGZvcm0sIG5hbWUsIHZlcnNpb24pIHtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IHBsYXRmb3JtO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIERldmljZSB7XG4gICAgY29uc3RydWN0b3IobWFudWZhY3R1cmVyLCBtb2RlbCwgdmVyc2lvbikge1xuICAgICAgICB0aGlzLm1hbnVmYWN0dXJlciA9IG1hbnVmYWN0dXJlcjtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIH1cbn1cbmV4cG9ydCB2YXIgY29ubmVjdGl2aXR5O1xuKGZ1bmN0aW9uIChjb25uZWN0aXZpdHkpIHtcbiAgICBjb25uZWN0aXZpdHlbXCJCbHVldG9vdGhcIl0gPSBcIkJsdWV0b290aFwiO1xuICAgIGNvbm5lY3Rpdml0eVtcIldpcmVkXCJdID0gXCJXaXJlZFwiO1xuICAgIGNvbm5lY3Rpdml0eVtcIldpRmlcIl0gPSBcIldpRmlcIjtcbiAgICBjb25uZWN0aXZpdHlbXCJDZWxsdWxhclwiXSA9IFwiQ2VsbHVsYXJcIjtcbiAgICBjb25uZWN0aXZpdHlbXCJJbkJ1aWx0XCJdID0gXCJJbkJ1aWx0XCI7XG4gICAgY29ubmVjdGl2aXR5W1wiVW5rbm93blwiXSA9IFwiVW5rbm93blwiO1xufSkoY29ubmVjdGl2aXR5IHx8IChjb25uZWN0aXZpdHkgPSB7fSkpO1xuZXhwb3J0IHZhciB0eXBlO1xuKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdHlwZVtcIlBob25lXCJdID0gXCJQaG9uZVwiO1xuICAgIHR5cGVbXCJTcGVha2VyXCJdID0gXCJTcGVha2VyXCI7XG4gICAgdHlwZVtcIkNhclwiXSA9IFwiQ2FyXCI7XG4gICAgdHlwZVtcIkhlYWRzZXRcIl0gPSBcIkhlYWRzZXRcIjtcbiAgICB0eXBlW1wiVGhlcm1vc3RhdFwiXSA9IFwiVGhlcm1vc3RhdFwiO1xuICAgIHR5cGVbXCJNaWNyb3Bob25lc1wiXSA9IFwiTWljcm9waG9uZXNcIjtcbiAgICB0eXBlW1wiRGVza3Bob25lXCJdID0gXCJEZXNrcGhvbmVcIjtcbiAgICB0eXBlW1wiUmVtb3RlQ29udHJvbFwiXSA9IFwiUmVtb3RlQ29udHJvbFwiO1xuICAgIHR5cGVbXCJVbmtub3duXCJdID0gXCJVbmtub3duXCI7XG4gICAgdHlwZVtcIkZpbGVcIl0gPSBcIkZpbGVcIjtcbiAgICB0eXBlW1wiU3RyZWFtXCJdID0gXCJTdHJlYW1cIjtcbn0pKHR5cGUgfHwgKHR5cGUgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWNvZ25pemVyQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkLCBEZWZlcnJlZCwgRXZlbnRzLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50LCBMaXN0ZW5pbmdTdGFydGVkRXZlbnQsIFJlY29nbml0aW9uU3RhcnRlZEV2ZW50LCBSZWNvZ25pdGlvblRyaWdnZXJlZEV2ZW50LCB9IGZyb20gXCIuL1JlY29nbml0aW9uRXZlbnRzXCI7XG5pbXBvcnQgeyBTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIgfSBmcm9tIFwiLi9TZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuSW50ZXJuYWxcIjtcbmV4cG9ydCBjbGFzcyBSZXF1ZXN0U2Vzc2lvbiB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkRldGFjaGFibGVzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMucHJpdklzQXVkaW9Ob2RlRGV0YWNoZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNSZWNvZ25pemluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZJc1NwZWVjaEVuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdlR1cm5TdGFydEF1ZGlvT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2TGFzdFJlY29PZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzUmVjZWl2ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2Qnl0ZXNTZW50ID0gMDtcbiAgICAgICAgdGhpcy5wcml2UmVjb2dOdW1iZXIgPSAwO1xuICAgICAgICB0aGlzLm9uQXVkaW9Tb3VyY2VBdHRhY2hDb21wbGV0ZWQgPSAoYXVkaW9Ob2RlLCBpc0Vycm9yLCBlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlID0gYXVkaW9Ob2RlO1xuICAgICAgICAgICAgdGhpcy5wcml2SXNBdWRpb05vZGVEZXRhY2hlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgTGlzdGVuaW5nU3RhcnRlZEV2ZW50KHRoaXMucHJpdlJlcXVlc3RJZCwgdGhpcy5wcml2U2Vzc2lvbklkLCB0aGlzLnByaXZBdWRpb1NvdXJjZUlkLCB0aGlzLnByaXZBdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUHJlQ29ubmVjdGlvblN0YXJ0ID0gKGF1dGhGZXRjaEV2ZW50SWQsIGNvbm5lY3Rpb25JZCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZTZXNzaW9uSWQgPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3RpbmdUb1NlcnZpY2VFdmVudCh0aGlzLnByaXZSZXF1ZXN0SWQsIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQsIHRoaXMucHJpdlNlc3Npb25JZCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uQXV0aENvbXBsZXRlZCA9IChpc0Vycm9yLCBlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkNvbm5lY3Rpb25Fc3RhYmxpc2hDb21wbGV0ZWQgPSAoc3RhdHVzQ29kZSwgcmVhc29uKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBSZWNvZ25pdGlvblN0YXJ0ZWRFdmVudCh0aGlzLnJlcXVlc3RJZCwgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCwgdGhpcy5wcml2QXVkaW9Ob2RlSWQsIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQsIHRoaXMucHJpdlNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkF1ZGlvTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZBdWRpb05vZGUucmVwbGF5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJpdlR1cm5TdGFydEF1ZGlvT2Zmc2V0ID0gdGhpcy5wcml2TGFzdFJlY29PZmZzZXQ7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Qnl0ZXNTZW50ID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblNlcnZpY2VUdXJuRW5kUmVzcG9uc2UgPSAoY29udGludW91c1JlY29nbml0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWNvbnRpbnVvdXNSZWNvZ25pdGlvbiB8fCB0aGlzLmlzU3BlZWNoRW5kZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IHJlcXVlc3Qgc2V0LlxuICAgICAgICAgICAgICAgIHRoaXMucHJpdlR1cm5TdGFydEF1ZGlvT2Zmc2V0ID0gdGhpcy5wcml2TGFzdFJlY29PZmZzZXQ7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdElkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZS5yZXBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kaXNwb3NlID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICAvLyB3ZSBzaG91bGQgaGF2ZSBjb21wbGV0ZWQgYnkgbm93LiBJZiB3ZSBkaWQgbm90IGl0cyBhbiB1bmtub3duIGVycm9yLlxuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGV0YWNoYWJsZSBvZiB0aGlzLnByaXZEZXRhY2hhYmxlcykge1xuICAgICAgICAgICAgICAgICAgICBkZXRhY2hhYmxlLmRldGFjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFRlbGVtZXRyeSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuaGFzVGVsZW1ldHJ5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5nZXRUZWxlbWV0cnkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRXZlbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2SXNSZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzUmVjb2duaXppbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRldGFjaEF1ZGlvTm9kZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRldGFjaEF1ZGlvTm9kZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNBdWRpb05vZGVEZXRhY2hlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzQXVkaW9Ob2RlRGV0YWNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZBdWRpb05vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlLmRldGFjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCA9IGF1ZGlvU291cmNlSWQ7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RDb21wbGV0aW9uRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICB9XG4gICAgZ2V0IHNlc3Npb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlc3Npb25JZDtcbiAgICB9XG4gICAgZ2V0IHJlcXVlc3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlcXVlc3RJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvTm9kZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgfVxuICAgIGdldCBjb21wbGV0aW9uUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlcXVlc3RDb21wbGV0aW9uRGVmZXJyYWwucHJvbWlzZSgpO1xuICAgIH1cbiAgICBnZXQgaXNTcGVlY2hFbmRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzU3BlZWNoRW5kZWQ7XG4gICAgfVxuICAgIGdldCBpc1JlY29nbml6aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNSZWNvZ25pemluZztcbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRUdXJuQXVkaW9PZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldDtcbiAgICB9XG4gICAgZ2V0IHJlY29nTnVtYmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjb2dOdW1iZXI7XG4gICAgfVxuICAgIC8vIFRoZSBudW1iZXIgb2YgYnl0ZXMgc2VudCBmb3IgdGhlIGN1cnJlbnQgY29ubmVjdGlvbi5cbiAgICAvLyBDb3VudGVyIGlzIHJlc2V0IHRvIDAgZWFjaCB0aW1lIGEgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZC5cbiAgICBnZXQgYnl0ZXNTZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Qnl0ZXNTZW50O1xuICAgIH1cbiAgICBsaXN0ZW5Gb3JTZXJ2aWNlVGVsZW1ldHJ5KGV2ZW50U291cmNlKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5wcml2RGV0YWNoYWJsZXMucHVzaChldmVudFNvdXJjZS5hdHRhY2hMaXN0ZW5lcih0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGFydE5ld1JlY29nbml0aW9uKCkge1xuICAgICAgICB0aGlzLnByaXZJc1NwZWVjaEVuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklzUmVjb2duaXppbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucHJpdkxhc3RSZWNvT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdElkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZSZWNvZ051bWJlcisrO1xuICAgICAgICB0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIgPSBuZXcgU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyKHRoaXMucHJpdlJlcXVlc3RJZCwgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCwgdGhpcy5wcml2QXVkaW9Ob2RlSWQpO1xuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IFJlY29nbml0aW9uVHJpZ2dlcmVkRXZlbnQodGhpcy5yZXF1ZXN0SWQsIHRoaXMucHJpdlNlc3Npb25JZCwgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCwgdGhpcy5wcml2QXVkaW9Ob2RlSWQpKTtcbiAgICB9XG4gICAgb25IeXBvdGhlc2lzKG9mZnNldCkge1xuICAgICAgICBpZiAoIXRoaXMucHJpdkh5cG90aGVzaXNSZWNlaXZlZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2SHlwb3RoZXNpc1JlY2VpdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5oeXBvdGhlc2lzUmVjZWl2ZWQodGhpcy5wcml2QXVkaW9Ob2RlLmZpbmRUaW1lQXRPZmZzZXQob2Zmc2V0KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25QaHJhc2VSZWNvZ25pemVkKG9mZnNldCkge1xuICAgICAgICB0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIucGhyYXNlUmVjZWl2ZWQodGhpcy5wcml2QXVkaW9Ob2RlLmZpbmRUaW1lQXRPZmZzZXQob2Zmc2V0KSk7XG4gICAgICAgIHRoaXMub25TZXJ2aWNlUmVjb2duaXplZChvZmZzZXQpO1xuICAgIH1cbiAgICBvblNlcnZpY2VSZWNvZ25pemVkKG9mZnNldCkge1xuICAgICAgICB0aGlzLnByaXZMYXN0UmVjb09mZnNldCA9IG9mZnNldDtcbiAgICAgICAgdGhpcy5wcml2SHlwb3RoZXNpc1JlY2VpdmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZS5zaHJpbmtCdWZmZXJzKG9mZnNldCk7XG4gICAgfVxuICAgIG9uQXVkaW9TZW50KGJ5dGVzU2VudCkge1xuICAgICAgICB0aGlzLnByaXZCeXRlc1NlbnQgKz0gYnl0ZXNTZW50O1xuICAgIH1cbiAgICBvblN0b3BSZWNvZ25pemluZygpIHtcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgfVxuICAgIC8vIFNob3VsZCBiZSBjYWxsZWQgd2l0aCB0aGUgYXVkaW9Ob2RlIGZvciB0aGlzIHNlc3Npb24gaGFzIGluZGljYXRlZCB0aGF0IGl0IGlzIG91dCBvZiBzcGVlY2guXG4gICAgb25TcGVlY2hFbmRlZCgpIHtcbiAgICAgICAgdGhpcy5wcml2SXNTcGVlY2hFbmRlZCA9IHRydWU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXF1ZXN0U2Vzc2lvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gcmVzcG9uc2VcbmV4cG9ydCBjbGFzcyBBY3Rpdml0eVBheWxvYWRSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZBY3Rpdml0eVJlc3BvbnNlID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBY3Rpdml0eVBheWxvYWRSZXNwb25zZShqc29uKTtcbiAgICB9XG4gICAgZ2V0IGNvbnZlcnNhdGlvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWN0aXZpdHlSZXNwb25zZS5jb252ZXJzYXRpb25JZDtcbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2VEYXRhU3RyZWFtVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFjdGl2aXR5UmVzcG9uc2UubWVzc2FnZURhdGFTdHJlYW1UeXBlO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZVBheWxvYWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBY3Rpdml0eVJlc3BvbnNlLm1lc3NhZ2VQYXlsb2FkO1xuICAgIH1cbiAgICBnZXQgdmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFjdGl2aXR5UmVzcG9uc2UudmVyc2lvbjtcbiAgICB9XG59XG5leHBvcnQgdmFyIE1lc3NhZ2VEYXRhU3RyZWFtVHlwZTtcbihmdW5jdGlvbiAoTWVzc2FnZURhdGFTdHJlYW1UeXBlKSB7XG4gICAgTWVzc2FnZURhdGFTdHJlYW1UeXBlW01lc3NhZ2VEYXRhU3RyZWFtVHlwZVtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIE1lc3NhZ2VEYXRhU3RyZWFtVHlwZVtNZXNzYWdlRGF0YVN0cmVhbVR5cGVbXCJUZXh0VG9TcGVlY2hBdWRpb1wiXSA9IDFdID0gXCJUZXh0VG9TcGVlY2hBdWRpb1wiO1xufSkoTWVzc2FnZURhdGFTdHJlYW1UeXBlIHx8IChNZXNzYWdlRGF0YVN0cmVhbVR5cGUgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BY3Rpdml0eVJlc3BvbnNlUGF5bG9hZC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUmVjb2duaXRpb25TdGF0dXMgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIERldGFpbGVkU3BlZWNoUGhyYXNlIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICAgICAgdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuUmVjb2duaXRpb25TdGF0dXMgPSBSZWNvZ25pdGlvblN0YXR1c1t0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5SZWNvZ25pdGlvblN0YXR1c107XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGV0YWlsZWRTcGVlY2hQaHJhc2UoanNvbik7XG4gICAgfVxuICAgIGdldCBSZWNvZ25pdGlvblN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzO1xuICAgIH1cbiAgICBnZXQgTkJlc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5OQmVzdDtcbiAgICB9XG4gICAgZ2V0IER1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuRHVyYXRpb247XG4gICAgfVxuICAgIGdldCBPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5PZmZzZXQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZXRhaWxlZFNwZWVjaFBocmFzZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBAY2xhc3MgU3ludGhlc2lzU3RhdHVzXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgdmFyIFN5bnRoZXNpc1N0YXR1cztcbihmdW5jdGlvbiAoU3ludGhlc2lzU3RhdHVzKSB7XG4gICAgLyoqXG4gICAgICogVGhlIHJlc3BvbnNlIGNvbnRhaW5zIHZhbGlkIGF1ZGlvIGRhdGEuXG4gICAgICogQG1lbWJlciBTeW50aGVzaXNTdGF0dXMuU3VjY2Vzc1xuICAgICAqL1xuICAgIFN5bnRoZXNpc1N0YXR1c1tTeW50aGVzaXNTdGF0dXNbXCJTdWNjZXNzXCJdID0gMF0gPSBcIlN1Y2Nlc3NcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIGVuZCBvZiBhdWRpbyBkYXRhLiBObyB2YWxpZCBhdWRpbyBkYXRhIGlzIGluY2x1ZGVkIGluIHRoZSBtZXNzYWdlLlxuICAgICAqIEBtZW1iZXIgU3ludGhlc2lzU3RhdHVzLlN5bnRoZXNpc0VuZFxuICAgICAqL1xuICAgIFN5bnRoZXNpc1N0YXR1c1tTeW50aGVzaXNTdGF0dXNbXCJTeW50aGVzaXNFbmRcIl0gPSAxXSA9IFwiU3ludGhlc2lzRW5kXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBzeW50aGVzaXMgZGF0YSBwcm9jZXNzaW5nLlxuICAgICAqIEBtZW1iZXIgU3ludGhlc2lzU3RhdHVzLkVycm9yXG4gICAgICovXG4gICAgU3ludGhlc2lzU3RhdHVzW1N5bnRoZXNpc1N0YXR1c1tcIkVycm9yXCJdID0gMl0gPSBcIkVycm9yXCI7XG59KShTeW50aGVzaXNTdGF0dXMgfHwgKFN5bnRoZXNpc1N0YXR1cyA9IHt9KSk7XG5leHBvcnQgdmFyIFJlY29nbml0aW9uU3RhdHVzO1xuKGZ1bmN0aW9uIChSZWNvZ25pdGlvblN0YXR1cykge1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiU3VjY2Vzc1wiXSA9IDBdID0gXCJTdWNjZXNzXCI7XG4gICAgUmVjb2duaXRpb25TdGF0dXNbUmVjb2duaXRpb25TdGF0dXNbXCJOb01hdGNoXCJdID0gMV0gPSBcIk5vTWF0Y2hcIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIkluaXRpYWxTaWxlbmNlVGltZW91dFwiXSA9IDJdID0gXCJJbml0aWFsU2lsZW5jZVRpbWVvdXRcIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIkJhYmJsZVRpbWVvdXRcIl0gPSAzXSA9IFwiQmFiYmxlVGltZW91dFwiO1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiRXJyb3JcIl0gPSA0XSA9IFwiRXJyb3JcIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIkVuZE9mRGljdGF0aW9uXCJdID0gNV0gPSBcIkVuZE9mRGljdGF0aW9uXCI7XG4gICAgUmVjb2duaXRpb25TdGF0dXNbUmVjb2duaXRpb25TdGF0dXNbXCJUb29NYW55UmVxdWVzdHNcIl0gPSA2XSA9IFwiVG9vTWFueVJlcXVlc3RzXCI7XG59KShSZWNvZ25pdGlvblN0YXR1cyB8fCAoUmVjb2duaXRpb25TdGF0dXMgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbnVtcy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gcmVzcG9uc2VcbmV4cG9ydCBjbGFzcyBJbnRlbnRSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZJbnRlbnRSZXNwb25zZSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW50ZW50UmVzcG9uc2UoanNvbik7XG4gICAgfVxuICAgIGdldCBxdWVyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkludGVudFJlc3BvbnNlLnF1ZXJ5O1xuICAgIH1cbiAgICBnZXQgdG9wU2NvcmluZ0ludGVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkludGVudFJlc3BvbnNlLnRvcFNjb3JpbmdJbnRlbnQ7XG4gICAgfVxuICAgIGdldCBlbnRpdGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkludGVudFJlc3BvbnNlLmVudGl0aWVzO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZW50UmVzcG9uc2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFJlY29nbml0aW9uU3RhdHVzIH0gZnJvbSBcIi4uL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBTaW1wbGVTcGVlY2hQaHJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2U2ltcGxlU3BlZWNoUGhyYXNlID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICAgICAgdGhpcy5wcml2U2ltcGxlU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzID0gUmVjb2duaXRpb25TdGF0dXNbdGhpcy5wcml2U2ltcGxlU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzXTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTcGVlY2hQaHJhc2UoanNvbik7XG4gICAgfVxuICAgIGdldCBSZWNvZ25pdGlvblN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNpbXBsZVNwZWVjaFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cztcbiAgICB9XG4gICAgZ2V0IERpc3BsYXlUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2ltcGxlU3BlZWNoUGhyYXNlLkRpc3BsYXlUZXh0O1xuICAgIH1cbiAgICBnZXQgT2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2ltcGxlU3BlZWNoUGhyYXNlLk9mZnNldDtcbiAgICB9XG4gICAgZ2V0IER1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2ltcGxlU3BlZWNoUGhyYXNlLkR1cmF0aW9uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2ltcGxlU3BlZWNoUGhyYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgU3BlZWNoRGV0ZWN0ZWQge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoU3RhcnREZXRlY3RlZCA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3BlZWNoRGV0ZWN0ZWQoanNvbik7XG4gICAgfVxuICAgIGdldCBPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hTdGFydERldGVjdGVkLk9mZnNldDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaERldGVjdGVkLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgU3BlZWNoSHlwb3RoZXNpcyB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hIeXBvdGhlc2lzID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGVlY2hIeXBvdGhlc2lzKGpzb24pO1xuICAgIH1cbiAgICBnZXQgVGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEh5cG90aGVzaXMuVGV4dDtcbiAgICB9XG4gICAgZ2V0IE9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEh5cG90aGVzaXMuT2Zmc2V0O1xuICAgIH1cbiAgICBnZXQgRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hIeXBvdGhlc2lzLkR1cmF0aW9uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoSHlwb3RoZXNpcy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgVHJhbnNsYXRpb25TdGF0dXMgfSBmcm9tIFwiLi4vVHJhbnNsYXRpb25TdGF0dXNcIjtcbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvbkh5cG90aGVzaXMge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25IeXBvdGhlc2lzID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25IeXBvdGhlc2lzLlRyYW5zbGF0aW9uLlRyYW5zbGF0aW9uU3RhdHVzID0gVHJhbnNsYXRpb25TdGF0dXNbdGhpcy5wcml2VHJhbnNsYXRpb25IeXBvdGhlc2lzLlRyYW5zbGF0aW9uLlRyYW5zbGF0aW9uU3RhdHVzXTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2xhdGlvbkh5cG90aGVzaXMoanNvbik7XG4gICAgfVxuICAgIGdldCBEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5EdXJhdGlvbjtcbiAgICB9XG4gICAgZ2V0IE9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5PZmZzZXQ7XG4gICAgfVxuICAgIGdldCBUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNsYXRpb25IeXBvdGhlc2lzLlRleHQ7XG4gICAgfVxuICAgIGdldCBUcmFuc2xhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5UcmFuc2xhdGlvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uSHlwb3RoZXNpcy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUmVjb2duaXRpb25TdGF0dXMgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgVHJhbnNsYXRpb25TdGF0dXMgfSBmcm9tIFwiLi4vVHJhbnNsYXRpb25TdGF0dXNcIjtcbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblBocmFzZSB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzID0gUmVjb2duaXRpb25TdGF0dXNbdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuUmVjb2duaXRpb25TdGF0dXNdO1xuICAgICAgICBpZiAodGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuVHJhbnNsYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuVHJhbnNsYXRpb24uVHJhbnNsYXRpb25TdGF0dXMgPSBUcmFuc2xhdGlvblN0YXR1c1t0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvblN0YXR1c107XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2xhdGlvblBocmFzZShqc29uKTtcbiAgICB9XG4gICAgZ2V0IFJlY29nbml0aW9uU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuUmVjb2duaXRpb25TdGF0dXM7XG4gICAgfVxuICAgIGdldCBPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5PZmZzZXQ7XG4gICAgfVxuICAgIGdldCBEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uUGhyYXNlLkR1cmF0aW9uO1xuICAgIH1cbiAgICBnZXQgVGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uUGhyYXNlLlRleHQ7XG4gICAgfVxuICAgIGdldCBUcmFuc2xhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uUGhyYXNlLlRyYW5zbGF0aW9uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25QaHJhc2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFN5bnRoZXNpc1N0YXR1cyB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25TeW50aGVzaXNFbmQge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzRW5kID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzRW5kLlN5bnRoZXNpc1N0YXR1cyA9IFN5bnRoZXNpc1N0YXR1c1t0aGlzLnByaXZTeW50aGVzaXNFbmQuU3ludGhlc2lzU3RhdHVzXTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2xhdGlvblN5bnRoZXNpc0VuZChqc29uKTtcbiAgICB9XG4gICAgZ2V0IFN5bnRoZXNpc1N0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN5bnRoZXNpc0VuZC5TeW50aGVzaXNTdGF0dXM7XG4gICAgfVxuICAgIGdldCBGYWlsdXJlUmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3ludGhlc2lzRW5kLkZhaWx1cmVSZWFzb247XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblN5bnRoZXNpc0VuZC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUmVwbGF5YWJsZUF1ZGlvTm9kZSB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgQ29ubmVjdGlvblN0YXRlLCBjcmVhdGVOb0Rhc2hHdWlkLCBEZWZlcnJlZCwgRXZlbnRTb3VyY2UsIE1lc3NhZ2VUeXBlLCBQcm9taXNlSGVscGVyLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFByb3BlcnR5SWQsIFJlY29nbml0aW9uRXZlbnRBcmdzLCBTZXNzaW9uRXZlbnRBcmdzLCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQWdlbnRDb25maWcsIER5bmFtaWNHcmFtbWFyQnVpbGRlciwgUmVxdWVzdFNlc3Npb24sIFNwZWVjaENvbnRleHQsIFNwZWVjaERldGVjdGVkLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmltcG9ydCB7IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlIH0gZnJvbSBcIi4vU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuSW50ZXJuYWxcIjtcbmV4cG9ydCBjbGFzcyBTZXJ2aWNlUmVjb2duaXplckJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHJlY29nbml6ZXIpIHtcbiAgICAgICAgdGhpcy5yZWNvZ25pemVPdmVycmlkZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0T3ZlcnJpZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2VuZFRlbGVtZXRyeURhdGEgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZWxlbWV0cnlEYXRhID0gdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uZ2V0VGVsZW1ldHJ5KCk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oXCJUZWxlbTogXCIgKyB0ZWxlbWV0cnlEYXRhKTtcbiAgICAgICAgICAgIGlmIChTZXJ2aWNlUmVjb2duaXplckJhc2UudGVsZW1ldHJ5RGF0YUVuYWJsZWQgIT09IHRydWUgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkIHx8XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gdGVsZW1ldHJ5RGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21SZXN1bHQodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISFTZXJ2aWNlUmVjb2duaXplckJhc2UudGVsZW1ldHJ5RGF0YSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIFNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhKHRlbGVtZXRyeURhdGEpO1xuICAgICAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCkub25TdWNjZXNzQ29udGludWVXaXRoKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgXCJ0ZWxlbWV0cnlcIiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgdGVsZW1ldHJ5RGF0YSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVjZWl2ZU1lc3NhZ2VPdmVycmlkZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yZWNlaXZlTWVzc2FnZSA9IChzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2spID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoQ29ubmVjdGlvbigpLm9uKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24ucmVhZCgpXG4gICAgICAgICAgICAgICAgICAgIC5vblN1Y2Nlc3NDb250aW51ZVdpdGhQcm9taXNlKChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlY2VpdmVNZXNzYWdlT3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZU1lc3NhZ2VPdmVycmlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZJc0Rpc3Bvc2VkIHx8ICF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSdyZSBkb25lLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGluZGljYXRlcyB3ZSBhcmUgZHJhaW5pbmcgdGhlIHF1ZXVlIGFuZCBpdCBjYW1lIHdpdGggbm8gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzUmVjb2duaXppbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZU1lc3NhZ2Uoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxCYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uTWVzc2FnZSA9IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlLmZyb21Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25NZXNzYWdlLnJlcXVlc3RJZC50b0xvd2VyQ2FzZSgpID09PSB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb25uZWN0aW9uTWVzc2FnZS5wYXRoLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHVybi5zdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZNdXN0UmVwb3J0RW5kT2ZTdHJlYW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3BlZWNoLnN0YXJ0ZGV0ZWN0ZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWNoU3RhcnREZXRlY3RlZCA9IFNwZWVjaERldGVjdGVkLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWNoU3RhcnRFdmVudEFyZ3MgPSBuZXcgUmVjb2duaXRpb25FdmVudEFyZ3Moc3BlZWNoU3RhcnREZXRlY3RlZC5PZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIuc3BlZWNoU3RhcnREZXRlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hTdGFydERldGVjdGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNwZWVjaFN0YXJ0RXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3BlZWNoLmVuZGRldGVjdGVkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBqc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3Qgd2FzIGVtcHR5LCB0aGUgSlNPTiByZXR1cm5lZCBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24gPSBcInsgT2Zmc2V0OiAwIH1cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hTdG9wRGV0ZWN0ZWQgPSBTcGVlY2hEZXRlY3RlZC5mcm9tSlNPTihqc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBzaHJpbmsgdGhlIGJ1ZmZlcnMgZm9yIGNvbnRpbnVvdXMgcmVjb2duaXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBzaW5nbGUgc2hvdCwgdGhlIHNwZWVjaC5waHJhc2UgbWVzc2FnZSB3aWxsIGNvbWUgYWZ0ZXIgdGhlIHNwZWVjaC5lbmQgYW5kIGl0IHNob3VsZCBvd24gYnVmZmVyIHNocmluay5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcuaXNDb250aW51b3VzUmVjb2duaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU2VydmljZVJlY29nbml6ZWQoc3BlZWNoU3RvcERldGVjdGVkLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaFN0b3BFdmVudEFyZ3MgPSBuZXcgUmVjb2duaXRpb25FdmVudEFyZ3Moc3BlZWNoU3RvcERldGVjdGVkLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIuc3BlZWNoRW5kRGV0ZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIuc3BlZWNoRW5kRGV0ZWN0ZWQodGhpcy5wcml2UmVjb2duaXplciwgc3BlZWNoU3RvcEV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInR1cm4uZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZFRlbGVtZXRyeURhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiYgdGhpcy5wcml2TXVzdFJlcG9ydEVuZE9mU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZNdXN0UmVwb3J0RW5kT2ZTdHJlYW0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVjb2duaXRpb25Mb2NhbChDYW5jZWxsYXRpb25SZWFzb24uRW5kT2ZTdHJlYW0sIENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yLCB1bmRlZmluZWQsIHN1Y2Nlc3NDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblN0b3BFdmVudEFyZ3MgPSBuZXcgU2Vzc2lvbkV2ZW50QXJncyh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblNlcnZpY2VUdXJuRW5kUmVzcG9uc2UodGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5pc0NvbnRpbnVvdXNSZWNvZ25pdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5pc0NvbnRpbnVvdXNSZWNvZ25pdGlvbiB8fCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RvcHBlZCh0aGlzLnByaXZSZWNvZ25pemVyLCBzZXNzaW9uU3RvcEV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaENvbm5lY3Rpb24oKS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRTcGVlY2hDb250ZXh0KGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NUeXBlU3BlY2lmaWNNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxCYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlTWVzc2FnZShzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2spO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kU3BlZWNoQ29udGV4dCA9IChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzcGVlY2hDb250ZXh0SnNvbiA9IHRoaXMuc3BlZWNoQ29udGV4dC50b0pTT04oKTtcbiAgICAgICAgICAgIGlmIChzcGVlY2hDb250ZXh0SnNvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIFwic3BlZWNoLmNvbnRleHRcIiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgc3BlZWNoQ29udGV4dEpzb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21SZXN1bHQodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29ubmVjdEltcGxPdmVycmlkZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jb25maWdDb25uZWN0aW9uT3ZlcnJpZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZmV0Y2hDb25uZWN0aW9uT3ZlcnJpZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2VuZFNwZWVjaFNlcnZpY2VDb25maWcgPSAoY29ubmVjdGlvbiwgcmVxdWVzdFNlc3Npb24sIFNwZWVjaFNlcnZpY2VDb25maWdKc29uKSA9PiB7XG4gICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IGFueXRoaW5nIHRoYXQgaXMgbm90IHJlcXVpcmVkIGZvciB0aGUgc2VydmljZSB0byB3b3JrLlxuICAgICAgICAgICAgaWYgKFNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdpdGhUZWxlbWV0cnkgPSBKU09OLnBhcnNlKFNwZWVjaFNlcnZpY2VDb25maWdKc29uKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtOiB3aXRoVGVsZW1ldHJ5LmNvbnRleHQuc3lzdGVtLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgU3BlZWNoU2VydmljZUNvbmZpZ0pzb24gPSBKU09OLnN0cmluZ2lmeShyZXBsYWNlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoU3BlZWNoU2VydmljZUNvbmZpZ0pzb24pIHsgLy8gJiYgdGhpcy5wcml2Q29ubmVjdGlvbklkICE9PSB0aGlzLnByaXZTcGVlY2hTZXJ2aWNlQ29uZmlnQ29ubmVjdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoU2VydmljZUNvbmZpZ0Nvbm5lY3Rpb25JZCA9IHRoaXMucHJpdkNvbm5lY3Rpb25JZDtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcInNwZWVjaC5jb25maWdcIiwgcmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgU3BlZWNoU2VydmljZUNvbmZpZ0pzb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21SZXN1bHQodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VuZEF1ZGlvID0gKGF1ZGlvU3RyZWFtTm9kZSkgPT4ge1xuICAgICAgICAgICAgLy8gTk9URTogSG9tZS1iYWtlZCBwcm9taXNlcyBjcmFzaCBpb3Mgc2FmYXJpIGR1cmluZyB0aGUgaW52b2NhdGlvblxuICAgICAgICAgICAgLy8gb2YgdGhlIGVycm9yIGNhbGxiYWNrIGNoYWluIChsb29rcyBsaWtlIHRoZSByZWN1cnNpb24gaXMgd2F5IHRvbyBkZWVwLCBhbmRcbiAgICAgICAgICAgIC8vIGl0IGJsb3dzIHVwIHRoZSBzdGFjaykuIFRoZSBmb2xsb3dpbmcgY29uc3RydWN0IGlzIGEgc3RvcC1nYXAgdGhhdCBkb2VzIG5vdFxuICAgICAgICAgICAgLy8gYnViYmxlIHRoZSBlcnJvciB1cCB0aGUgY2FsbGJhY2sgY2hhaW4gYW5kIGhlbmNlIGNpcmN1bXZlbnRzIHRoaXMgcHJvYmxlbS5cbiAgICAgICAgICAgIC8vIFRPRE86IHJld3JpdGUgd2l0aCBFUzYgcHJvbWlzZXMuXG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgLy8gVGhlIHRpbWUgd2UgbGFzdCBzZW50IGRhdGEgdG8gdGhlIHNlcnZpY2UuXG4gICAgICAgICAgICBsZXQgbmV4dFNlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvRm9ybWF0ID0gdGhpcy5wcml2QXVkaW9Tb3VyY2UuZm9ybWF0O1xuICAgICAgICAgICAgLy8gTWF4IGFtb3VudCB0byBzZW5kIGJlZm9yZSB3ZSBzdGFydCB0byB0aHJvdHRsZVxuICAgICAgICAgICAgY29uc3QgZmFzdExhbmVTaXplTXMgPSB0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtVHJhbnNtaXRMZW5ndGhCZWZvclRocm90dGxlTXNcIiwgXCI1MDAwXCIpO1xuICAgICAgICAgICAgY29uc3QgbWF4U2VuZFVudGhyb3R0bGVkQnl0ZXMgPSBhdWRpb0Zvcm1hdC5hdmdCeXRlc1BlclNlYyAvIDEwMDAgKiBwYXJzZUludChmYXN0TGFuZVNpemVNcywgMTApO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRSZWNvZ051bWJlciA9IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlY29nTnVtYmVyO1xuICAgICAgICAgICAgY29uc3QgcmVhZEFuZFVwbG9hZEN5Y2xlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIElmIHNwZWVjaCBpcyBkb25lLCBzdG9wIHNlbmRpbmcgYXVkaW8uXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZJc0Rpc3Bvc2VkICYmXG4gICAgICAgICAgICAgICAgICAgICF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzUmVjb2duaXppbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVjb2dOdW1iZXIgPT09IHN0YXJ0UmVjb2dOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaENvbm5lY3Rpb24oKS5vbigoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9TdHJlYW1Ob2RlLnJlYWQoKS5vbigoYXVkaW9TdHJlYW1DaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGhhdmUgYSBuZXcgYXVkaW8gY2h1bmsgdG8gdXBsb2FkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHNlcnZpY2UgYWxyZWFkeSByZWNvZ25pemVkIGF1ZGlvIGVuZCB0aGVuIGRvbid0IHNlbmQgYW55IG1vcmUgYXVkaW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGF5bG9hZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VuZERlbGF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdWRpb1N0cmVhbUNodW5rLmlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRGVsYXkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IGF1ZGlvU3RyZWFtQ2h1bmsuYnVmZmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1ZGlvU2VudChwYXlsb2FkLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4U2VuZFVudGhyb3R0bGVkQnl0ZXMgPj0gdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uYnl0ZXNTZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRGVsYXkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZERlbGF5ID0gTWF0aC5tYXgoMCwgbmV4dFNlbmRUaW1lIC0gRGF0ZS5ub3coKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXJlIHdlIHJlYWR5IHRvIHNlbmQsIG9yIG5lZWQgd2UgZGVsYXkgbW9yZT9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTZW5kVGltZSA9IERhdGUubm93KCkgKyAocGF5bG9hZC5ieXRlTGVuZ3RoICogMTAwMCAvIChhdWRpb0Zvcm1hdC5hdmdCeXRlc1BlclNlYyAqIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGxvYWRlZCA9IGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoTWVzc2FnZVR5cGUuQmluYXJ5LCBcImF1ZGlvXCIsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgbnVsbCwgcGF5bG9hZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWF1ZGlvU3RyZWFtQ2h1bmsuaXNFbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZGVkLmNvbnRpbnVlV2l0aCgoXykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZ2FyZGxlc3Mgb2Ygc3VjY2VzcyBvciBmYWlsdXJlLCBzY2hlZHVsZSB0aGUgbmV4dCB1cGxvYWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVuZGVybHlpbmcgY29ubmVjdGlvbiB3YXMgYnJva2VuLCB0aGUgbmV4dCBjeWNsZSB3aWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGEgbmV3IGNvbm5lY3Rpb24gYW5kIHJlLXRyYW5zbWl0IG1pc3NpbmcgYXVkaW8gYXV0b21hdGljYWxseS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkQW5kVXBsb2FkQ3ljbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGF1ZGlvIHN0cmVhbSBoYXMgYmVlbiBjbG9zZWQsIG5vIG5lZWQgdG8gc2NoZWR1bGUgbmV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVhZC11cGxvYWQgY3ljbGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblNwZWVjaEVuZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgc2VuZERlbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciB3aGF0ZXZlciByZWFzb24sIFJlamVjdCBpcyB1c2VkIHRvIHJlbW92ZSBxdWV1ZSBzdWJzY3JpYmVycyBpbnNpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIFF1ZXVlLkRyYWluQW5kRGlzcG9zZSBpbnZva2VkIGZyb20gRGV0YWNoQXVkaW9Ob2RlIGRvd24gYmVsb3csIHdoaWNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lYW5zIHRoYXQgc29tZXRpbWVzIHRoaW5ncyBjYW4gYmUgcmVqZWN0ZWQgaW4gbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHdpdGhvdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW55IGVycm9ycy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0cnVlKTsgLy8gVE9ETzogcmVtb3ZlIHRoZSBhcmd1bWVudCwgaXQncyBpcyBjb21wbGV0ZWx5IG1lYW5pbmdsZXNzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSByZWplY3QsIGlmIHRoZXJlIHdhcyBhIHByb3BlciBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVhZEFuZFVwbG9hZEN5Y2xlKCk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZldGNoQ29ubmVjdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZldGNoQ29ubmVjdGlvbk92ZXJyaWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaENvbm5lY3Rpb25PdmVycmlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJlQ29ubmVjdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJhdXRoZW50aWNhdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvbm5lY3Rpb25GYWN0b3J5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJjb25uZWN0aW9uRmFjdG9yeVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWF1ZGlvU291cmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJhdWRpb1NvdXJjZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlY29nbml6ZXJDb25maWcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcInJlY29nbml6ZXJDb25maWdcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2TXVzdFJlcG9ydEVuZE9mU3RyZWFtID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkF1dGhlbnRpY2F0aW9uID0gYXV0aGVudGljYXRpb247XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25GYWN0b3J5ID0gY29ubmVjdGlvbkZhY3Rvcnk7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU291cmNlID0gYXVkaW9Tb3VyY2U7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcgPSByZWNvZ25pemVyQ29uZmlnO1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIgPSByZWNvZ25pemVyO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbiA9IG5ldyBSZXF1ZXN0U2Vzc2lvbih0aGlzLnByaXZBdWRpb1NvdXJjZS5pZCgpKTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cyA9IG5ldyBFdmVudFNvdXJjZSgpO1xuICAgICAgICB0aGlzLnByaXZEeW5hbWljR3JhbW1hciA9IG5ldyBEeW5hbWljR3JhbW1hckJ1aWxkZXIoKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoQ29udGV4dCA9IG5ldyBTcGVlY2hDb250ZXh0KHRoaXMucHJpdkR5bmFtaWNHcmFtbWFyKTtcbiAgICAgICAgdGhpcy5wcml2QWdlbnRDb25maWcgPSBuZXcgQWdlbnRDb25maWcoKTtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvU291cmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2U7XG4gICAgfVxuICAgIGdldCBzcGVlY2hDb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoQ29udGV4dDtcbiAgICB9XG4gICAgZ2V0IGR5bmFtaWNHcmFtbWFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RHluYW1pY0dyYW1tYXI7XG4gICAgfVxuICAgIGdldCBhZ2VudENvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFnZW50Q29uZmlnO1xuICAgIH1cbiAgICBpc0Rpc3Bvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNEaXNwb3NlZDtcbiAgICB9XG4gICAgZGlzcG9zZShyZWFzb24pIHtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmRpc3Bvc2UocmVhc29uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBjb25uZWN0aW9uRXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cztcbiAgICB9XG4gICAgZ2V0IHJlY29nbml0aW9uTW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucmVjb2duaXRpb25Nb2RlO1xuICAgIH1cbiAgICByZWNvZ25pemUocmVjb01vZGUsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsQmFjaykge1xuICAgICAgICBpZiAodGhpcy5yZWNvZ25pemVPdmVycmlkZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWNvZ25pemVPdmVycmlkZShyZWNvTW9kZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxCYWNrKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhciB0aGUgZXhpc3RpbmcgY29uZmlndXJhdGlvbiBwcm9taXNlIHRvIGZvcmNlIGEgcmUtdHJhbnNtaXNzaW9uIG9mIGNvbmZpZyBhbmQgY29udGV4dC5cbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5yZWNvZ25pdGlvbk1vZGUgPSByZWNvTW9kZTtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc3RhcnROZXdSZWNvZ25pdGlvbigpO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5saXN0ZW5Gb3JTZXJ2aWNlVGVsZW1ldHJ5KHRoaXMucHJpdkF1ZGlvU291cmNlLmV2ZW50cyk7XG4gICAgICAgIC8vIFN0YXJ0IHRoZSBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2aWNlLiBUaGUgcHJvbWlzZSB0aGlzIHdpbGwgY3JlYXRlIGlzIHN0b3JlZCBhbmQgd2lsbCBiZSB1c2VkIGJ5IGNvbmZpZ3VyZUNvbm5lY3Rpb24oKS5cbiAgICAgICAgdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5hdWRpb1NvdXJjZVxuICAgICAgICAgICAgLmF0dGFjaCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5hdWRpb05vZGVJZClcbiAgICAgICAgICAgIC5jb250aW51ZVdpdGhQcm9taXNlKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGxldCBhdWRpb05vZGU7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuQ29ubmVjdGlvbkZhaWx1cmUsIHJlc3VsdC5lcnJvciwgc3VjY2Vzc0NhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tRXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF1ZGlvTm9kZSA9IG5ldyBSZXBsYXlhYmxlQXVkaW9Ob2RlKHJlc3VsdC5yZXN1bHQsIHRoaXMuYXVkaW9Tb3VyY2UuZm9ybWF0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1ZGlvU291cmNlQXR0YWNoQ29tcGxldGVkKGF1ZGlvTm9kZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXVkaW9Tb3VyY2UuZGV2aWNlSW5mby5vblN1Y2Nlc3NDb250aW51ZVdpdGhQcm9taXNlKChkZXZpY2VJbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5TcGVlY2hTZXJ2aWNlQ29uZmlnLkNvbnRleHQuYXVkaW8gPSB7IHNvdXJjZTogZGV2aWNlSW5mbyB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZUNvbm5lY3Rpb24oKVxuICAgICAgICAgICAgICAgICAgICAub24oKF8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblN0YXJ0RXZlbnRBcmdzID0gbmV3IFNlc3Npb25FdmVudEFyZ3ModGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RhcnRlZCh0aGlzLnByaXZSZWNvZ25pemVyLCBzZXNzaW9uU3RhcnRFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VSZXRyaWV2YWxQcm9taXNlID0gdGhpcy5yZWNlaXZlTWVzc2FnZShzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2spO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1NlbmRQcm9taXNlID0gdGhpcy5zZW5kQXVkaW8oYXVkaW9Ob2RlKTtcbiAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgYXVkaW9TZW5kUHJvbWlzZS5vbigoXykgPT4geyB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVjb2duaXRpb25Mb2NhbChDYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIENhbmNlbGxhdGlvbkVycm9yQ29kZS5SdW50aW1lRXJyb3IsIGVycm9yLCBzdWNjZXNzQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvblByb21pc2UgPSBQcm9taXNlSGVscGVyLndoZW5BbGwoW21lc3NhZ2VSZXRyaWV2YWxQcm9taXNlLCBhdWRpb1NlbmRQcm9taXNlXSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wbGV0aW9uUHJvbWlzZS5vbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbkxvY2FsKENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlJ1bnRpbWVFcnJvciwgZXJyb3IsIHN1Y2Nlc3NDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuQ29ubmVjdGlvbkZhaWx1cmUsIGVycm9yLCBzdWNjZXNzQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH0pLmNvbnRpbnVlV2l0aFByb21pc2UoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21FcnJvcihyZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdG9wUmVjb2duaXppbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblN0b3BSZWNvZ25pemluZygpO1xuICAgICAgICAgICAgdGhpcy5zZW5kVGVsZW1ldHJ5RGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5hdWRpb1NvdXJjZS50dXJuT2ZmKCk7XG4gICAgICAgICAgICB0aGlzLnNlbmRGaW5hbEF1ZGlvKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0SW1wbCgpLnJlc3VsdCgpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5kaXNjb25uZWN0T3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0T3ZlcnJpZGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvciwgXCJEaXNjb25uZWN0aW5nXCIsIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZS5yZXN1bHQoKS5pc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZS5yZXN1bHQoKS5pc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UucmVzdWx0KCkucmVzdWx0LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRNZXNzYWdlKG1lc3NhZ2UpIHsgfVxuICAgIC8vIENhbmNlbHMgcmVjb2duaXRpb24uXG4gICAgY2FuY2VsUmVjb2duaXRpb25Mb2NhbChjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IsIGNhbmNlbFJlY29DYWxsYmFjaykge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblN0b3BSZWNvZ25pemluZygpO1xuICAgICAgICAgICAgdGhpcy5zZW5kVGVsZW1ldHJ5RGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbih0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yLCBjYW5jZWxSZWNvQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEVzdGFibGlzaGVzIGEgd2Vic29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIGVuZCBwb2ludC5cbiAgICBjb25uZWN0SW1wbChpc1VuQXV0aG9yaXplZCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RJbXBsT3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdEltcGxPdmVycmlkZShpc1VuQXV0aG9yaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UucmVzdWx0KCkuaXNDb21wbGV0ZWQgJiZcbiAgICAgICAgICAgICAgICAodGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UucmVzdWx0KCkuaXNFcnJvclxuICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZS5yZXN1bHQoKS5yZXN1bHQuc3RhdGUoKSA9PT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QcmVDb25uZWN0aW9uU3RhcnQodGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCwgdGhpcy5wcml2Q29ubmVjdGlvbklkKTtcbiAgICAgICAgY29uc3QgYXV0aFByb21pc2UgPSBpc1VuQXV0aG9yaXplZCA/IHRoaXMucHJpdkF1dGhlbnRpY2F0aW9uLmZldGNoT25FeHBpcnkodGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCkgOiB0aGlzLnByaXZBdXRoZW50aWNhdGlvbi5mZXRjaCh0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkKTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UgPSBhdXRoUHJvbWlzZVxuICAgICAgICAgICAgLmNvbnRpbnVlV2l0aFByb21pc2UoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5pc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25BdXRoQ29tcGxldGVkKHRydWUsIHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1dGhDb21wbGV0ZWQoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXMucHJpdkNvbm5lY3Rpb25GYWN0b3J5LmNyZWF0ZSh0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLCByZXN1bHQucmVzdWx0LCB0aGlzLnByaXZDb25uZWN0aW9uSWQpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ubGlzdGVuRm9yU2VydmljZVRlbGVtZXRyeShjb25uZWN0aW9uLmV2ZW50cyk7XG4gICAgICAgICAgICAvLyBBdHRhY2ggdG8gdGhlIHVuZGVybHlpbmcgZXZlbnQuIE5vIG5lZWQgdG8gaG9sZCBvbnRvIHRoZSBkZXRhY2ggcG9pbnRlcnMgYXMgaW4gdGhlIGV2ZW50IHRoZSBjb25uZWN0aW9uIGdvZXMgYXdheSxcbiAgICAgICAgICAgIC8vIGl0J2xsIHN0b3Agc2VuZGluZyBldmVudHMuXG4gICAgICAgICAgICBjb25uZWN0aW9uLmV2ZW50cy5hdHRhY2goKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uRXZlbnRzLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5vcGVuKCkub25TdWNjZXNzQ29udGludWVXaXRoUHJvbWlzZSgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUHJlQ29ubmVjdGlvblN0YXJ0KHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQsIHRoaXMucHJpdkNvbm5lY3Rpb25JZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uQ29ubmVjdGlvbkVzdGFibGlzaENvbXBsZXRlZChyZXNwb25zZS5zdGF0dXNDb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdChjb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gNDAzICYmICFpc1VuQXV0aG9yaXplZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0SW1wbCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uQ29ubmVjdGlvbkVzdGFibGlzaENvbXBsZXRlZChyZXNwb25zZS5zdGF0dXNDb2RlLCByZXNwb25zZS5yZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tRXJyb3IoYFVuYWJsZSB0byBjb250YWN0IHNlcnZlci4gU3RhdHVzQ29kZTogJHtyZXNwb25zZS5zdGF0dXNDb2RlfSwgJHt0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCl9IFJlYXNvbjogJHtyZXNwb25zZS5yZWFzb259YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2U7XG4gICAgfVxuICAgIHNlbmRGaW5hbEF1ZGlvKCkge1xuICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICB0aGlzLmZldGNoQ29ubmVjdGlvbigpLm9uKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLkJpbmFyeSwgXCJhdWRpb1wiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIG51bGwsIG51bGwpKS5vbigoXykgPT4ge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gICAgfVxuICAgIC8vIFRha2VzIGFuIGVzdGFibGlzaGVkIHdlYnNvY2tldCBjb25uZWN0aW9uIHRvIHRoZSBlbmRwb2ludCBhbmQgc2VuZHMgc3BlZWNoIGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb24uXG4gICAgY29uZmlndXJlQ29ubmVjdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnQ29ubmVjdGlvbk92ZXJyaWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ0Nvbm5lY3Rpb25PdmVycmlkZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UucmVzdWx0KCkuaXNDb21wbGV0ZWQgJiZcbiAgICAgICAgICAgICAgICAodGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlLnJlc3VsdCgpLmlzRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgfHwgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlLnJlc3VsdCgpLnJlc3VsdC5zdGF0ZSgpID09PSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJlQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgPSB0aGlzLmNvbm5lY3RJbXBsKCkub25TdWNjZXNzQ29udGludWVXaXRoUHJvbWlzZSgoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFNwZWVjaFNlcnZpY2VDb25maWcoY29ubmVjdGlvbiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24sIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcuU3BlZWNoU2VydmljZUNvbmZpZy5zZXJpYWxpemUoKSlcbiAgICAgICAgICAgICAgICAub25TdWNjZXNzQ29udGludWVXaXRoUHJvbWlzZSgoXykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRTcGVlY2hDb250ZXh0KGNvbm5lY3Rpb24pLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aCgoXykgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZTtcbiAgICB9XG59XG5TZXJ2aWNlUmVjb2duaXplckJhc2UudGVsZW1ldHJ5RGF0YUVuYWJsZWQgPSB0cnVlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXJ2aWNlUmVjb2duaXplckJhc2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEF1ZGlvU291cmNlRXJyb3JFdmVudCwgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudCwgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnQsIENvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50LCBDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudCwgQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50LCBDb25uZWN0aW9uU3RhcnRFdmVudCwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3RpbmdUb1NlcnZpY2VFdmVudCwgUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudCB9IGZyb20gXCIuL1JlY29nbml0aW9uRXZlbnRzXCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIge1xuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3RJZCwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZMaXN0ZW5pbmdUcmlnZ2VyTWV0cmljID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2TWljTWV0cmljID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYyA9IG51bGw7XG4gICAgICAgIHRoaXMub25FdmVudCA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2SXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudCAmJiBlLnJlcXVlc3RJZCA9PT0gdGhpcy5wcml2UmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgRW5kOiBlLmV2ZW50VGltZSxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogXCJMaXN0ZW5pbmdUcmlnZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgIFN0YXJ0OiBlLmV2ZW50VGltZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudCAmJiBlLmF1ZGlvU291cmNlSWQgPT09IHRoaXMucHJpdkF1ZGlvU291cmNlSWQgJiYgZS5hdWRpb05vZGVJZCA9PT0gdGhpcy5wcml2QXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNaWNTdGFydFRpbWUgPSBlLmV2ZW50VGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudCAmJiBlLmF1ZGlvU291cmNlSWQgPT09IHRoaXMucHJpdkF1ZGlvU291cmNlSWQgJiYgZS5hdWRpb05vZGVJZCA9PT0gdGhpcy5wcml2QXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNaWNTdGFydFRpbWUgPSBlLmV2ZW50VGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXVkaW9Tb3VyY2VFcnJvckV2ZW50ICYmIGUuYXVkaW9Tb3VyY2VJZCA9PT0gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2TWljTWV0cmljKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1pY01ldHJpYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVuZDogZS5ldmVudFRpbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBFcnJvcjogZS5lcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWU6IFwiTWljcm9waG9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IHRoaXMucHJpdk1pY1N0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnQgJiYgZS5hdWRpb1NvdXJjZUlkID09PSB0aGlzLnByaXZBdWRpb1NvdXJjZUlkICYmIGUuYXVkaW9Ob2RlSWQgPT09IHRoaXMucHJpdkF1ZGlvTm9kZUlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZNaWNNZXRyaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TWljTWV0cmljID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgRW5kOiBlLmV2ZW50VGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEVycm9yOiBlLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgTmFtZTogXCJNaWNyb3Bob25lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBTdGFydDogdGhpcy5wcml2TWljU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCAmJiBlLmF1ZGlvU291cmNlSWQgPT09IHRoaXMucHJpdkF1ZGlvU291cmNlSWQgJiYgZS5hdWRpb05vZGVJZCA9PT0gdGhpcy5wcml2QXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJpdk1pY01ldHJpYykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZNaWNNZXRyaWMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFbmQ6IGUuZXZlbnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgTmFtZTogXCJNaWNyb3Bob25lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBTdGFydDogdGhpcy5wcml2TWljU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50ICYmIGUucmVxdWVzdElkID09PSB0aGlzLnByaXZSZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBlLnNlc3Npb25JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29ubmVjdGlvblN0YXJ0RXZlbnQgJiYgZS5jb25uZWN0aW9uSWQgPT09IHRoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25TdGFydFRpbWUgPSBlLmV2ZW50VGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnQgJiYgZS5jb25uZWN0aW9uSWQgPT09IHRoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgRW5kOiBlLmV2ZW50VGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIElkOiB0aGlzLnByaXZDb25uZWN0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBOYW1lOiBcIkNvbm5lY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0OiB0aGlzLnByaXZDb25uZWN0aW9uU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29ubmVjdGlvbkVzdGFibGlzaEVycm9yRXZlbnQgJiYgZS5jb25uZWN0aW9uSWQgPT09IHRoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgRW5kOiBlLmV2ZW50VGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEVycm9yOiB0aGlzLmdldENvbm5lY3Rpb25FcnJvcihlLnN0YXR1c0NvZGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgSWQ6IHRoaXMucHJpdkNvbm5lY3Rpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWU6IFwiQ29ubmVjdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IHRoaXMucHJpdkNvbm5lY3Rpb25TdGFydFRpbWUsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQgJiYgZS5jb25uZWN0aW9uSWQgPT09IHRoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgICAgIGlmIChlLm1lc3NhZ2UgJiYgZS5tZXNzYWdlLmhlYWRlcnMgJiYgZS5tZXNzYWdlLmhlYWRlcnMucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXNbZS5tZXNzYWdlLmhlYWRlcnMucGF0aF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXNbZS5tZXNzYWdlLmhlYWRlcnMucGF0aF0gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzW2UubWVzc2FnZS5oZWFkZXJzLnBhdGhdLnB1c2goZS5uZXR3b3JrUmVjZWl2ZWRUaW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0VGVsZW1ldHJ5ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWV0cmljcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkxpc3RlbmluZ1RyaWdnZXJNZXRyaWMpIHtcbiAgICAgICAgICAgICAgICBtZXRyaWNzLnB1c2godGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2TWljTWV0cmljKSB7XG4gICAgICAgICAgICAgICAgbWV0cmljcy5wdXNoKHRoaXMucHJpdk1pY01ldHJpYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYykge1xuICAgICAgICAgICAgICAgIG1ldHJpY3MucHVzaCh0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG1ldHJpY3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIFBocmFzZUxhdGVuY3lNczogdGhpcy5wcml2UGhyYXNlTGF0ZW5jaWVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkh5cG90aGVzaXNMYXRlbmNpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG1ldHJpY3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIEZpcnN0SHlwb3RoZXNpc0xhdGVuY3lNczogdGhpcy5wcml2SHlwb3RoZXNpc0xhdGVuY2llcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRlbGVtZXRyeSA9IHtcbiAgICAgICAgICAgICAgICBNZXRyaWNzOiBtZXRyaWNzLFxuICAgICAgICAgICAgICAgIFJlY2VpdmVkTWVzc2FnZXM6IHRoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KHRlbGVtZXRyeSk7XG4gICAgICAgICAgICAvLyBXZSBkb250IHdhbnQgdG8gc2VuZCB0aGUgc2FtZSB0ZWxlbWV0cnkgYWdhaW4uIFNvIGNsZWFuIHRob3NlIG91dC5cbiAgICAgICAgICAgIHRoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucHJpdkxpc3RlbmluZ1RyaWdnZXJNZXRyaWMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wcml2TWljTWV0cmljID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wcml2UGhyYXNlTGF0ZW5jaWVzID0gW107XG4gICAgICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzTGF0ZW5jaWVzID0gW107XG4gICAgICAgICAgICByZXR1cm4ganNvbjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kaXNwb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q29ubmVjdGlvbkVycm9yID0gKHN0YXR1c0NvZGUpID0+IHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAtLSBXZWJzb2NrZXQgc3RhdHVzIGNvZGVzIC0tXG4gICAgICAgICAgICBOb3JtYWxDbG9zdXJlID0gMTAwMCxcbiAgICAgICAgICAgIEVuZHBvaW50VW5hdmFpbGFibGUgPSAxMDAxLFxuICAgICAgICAgICAgUHJvdG9jb2xFcnJvciA9IDEwMDIsXG4gICAgICAgICAgICBJbnZhbGlkTWVzc2FnZVR5cGUgPSAxMDAzLFxuICAgICAgICAgICAgRW1wdHkgPSAxMDA1LFxuICAgICAgICAgICAgSW52YWxpZFBheWxvYWREYXRhID0gMTAwNyxcbiAgICAgICAgICAgIFBvbGljeVZpb2xhdGlvbiA9IDEwMDgsXG4gICAgICAgICAgICBNZXNzYWdlVG9vQmlnID0gMTAwOSxcbiAgICAgICAgICAgIE1hbmRhdG9yeUV4dGVuc2lvbiA9IDEwMTAsXG4gICAgICAgICAgICBJbnRlcm5hbFNlcnZlckVycm9yID0gMTAxMVxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHN3aXRjaCAoc3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgNDAwOlxuICAgICAgICAgICAgICAgIGNhc2UgMTAwMjpcbiAgICAgICAgICAgICAgICBjYXNlIDEwMDM6XG4gICAgICAgICAgICAgICAgY2FzZSAxMDA1OlxuICAgICAgICAgICAgICAgIGNhc2UgMTAwNzpcbiAgICAgICAgICAgICAgICBjYXNlIDEwMDg6XG4gICAgICAgICAgICAgICAgY2FzZSAxMDA5OiByZXR1cm4gXCJCYWRSZXF1ZXN0XCI7XG4gICAgICAgICAgICAgICAgY2FzZSA0MDE6IHJldHVybiBcIlVuYXV0aG9yaXplZFwiO1xuICAgICAgICAgICAgICAgIGNhc2UgNDAzOiByZXR1cm4gXCJGb3JiaWRkZW5cIjtcbiAgICAgICAgICAgICAgICBjYXNlIDUwMzpcbiAgICAgICAgICAgICAgICBjYXNlIDEwMDE6IHJldHVybiBcIlNlcnZlclVuYXZhaWxhYmxlXCI7XG4gICAgICAgICAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgICAgICAgY2FzZSAxMDExOiByZXR1cm4gXCJTZXJ2ZXJFcnJvclwiO1xuICAgICAgICAgICAgICAgIGNhc2UgNDA4OlxuICAgICAgICAgICAgICAgIGNhc2UgNTA0OiByZXR1cm4gXCJUaW1lb3V0XCI7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIFwic3RhdHVzY29kZTpcIiArIHN0YXR1c0NvZGUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdElkID0gcmVxdWVzdElkO1xuICAgICAgICB0aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICAgICAgdGhpcy5wcml2UmVjZWl2ZWRNZXNzYWdlcyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2SHlwb3RoZXNpc0xhdGVuY2llcyA9IFtdO1xuICAgIH1cbiAgICBwaHJhc2VSZWNlaXZlZChhdWRpb1JlY2VpdmVkVGltZSkge1xuICAgICAgICBpZiAoYXVkaW9SZWNlaXZlZFRpbWUgPiAwKSB7IC8vIDAgaW5kaWNhdGVzIHRoZSB0aW1lIGlzIHVua25vd24uIERyb3AgaXQuXG4gICAgICAgICAgICB0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMucHVzaChEYXRlLm5vdygpIC0gYXVkaW9SZWNlaXZlZFRpbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGh5cG90aGVzaXNSZWNlaXZlZChhdWRpb1JlY2VpdmVkVGltZSkge1xuICAgICAgICBpZiAoYXVkaW9SZWNlaXZlZFRpbWUgPiAwKSB7IC8vIDAgaW5kaWNhdGVzIHRoZSB0aW1lIGlzIHVua25vd24uIERyb3AgaXQuXG4gICAgICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzTGF0ZW5jaWVzLnB1c2goRGF0ZS5ub3coKSAtIGF1ZGlvUmVjZWl2ZWRUaW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBEZXRlcm1pbmVzIGlmIHRoZXJlIGFyZSBhbnkgdGVsZW1ldHJ5IGV2ZW50cyB0byBzZW5kIHRvIHRoZSBzZXJ2aWNlLlxuICAgIGdldCBoYXNUZWxlbWV0cnkoKSB7XG4gICAgICAgIHJldHVybiAoT2JqZWN0LmtleXModGhpcy5wcml2UmVjZWl2ZWRNZXNzYWdlcykubGVuZ3RoICE9PSAwIHx8XG4gICAgICAgICAgICB0aGlzLnByaXZMaXN0ZW5pbmdUcmlnZ2VyTWV0cmljICE9PSBudWxsIHx8XG4gICAgICAgICAgICB0aGlzLnByaXZNaWNNZXRyaWMgIT09IG51bGwgfHxcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMgIT09IG51bGwgfHxcbiAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZUxhdGVuY2llcy5sZW5ndGggIT09IDAgfHxcbiAgICAgICAgICAgIHRoaXMucHJpdkh5cG90aGVzaXNMYXRlbmNpZXMubGVuZ3RoICE9PSAwKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5JbnRlcm5hbC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJveHlJbmZvLCBXZWJzb2NrZXRDb25uZWN0aW9uLCB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBGb3JjZURpY3RhdGlvblByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IE91dHB1dEZvcm1hdCwgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbkZhY3RvcnlCYXNlXCI7XG5pbXBvcnQgeyBSZWNvZ25pdGlvbk1vZGUsIFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBRdWVyeVBhcmFtZXRlck5hbWVzIH0gZnJvbSBcIi4vUXVlcnlQYXJhbWV0ZXJOYW1lc1wiO1xuZXhwb3J0IGNsYXNzIFNwZWVjaENvbm5lY3Rpb25GYWN0b3J5IGV4dGVuZHMgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5pbnRlcmFjdGl2ZVJlbGF0aXZlVXJpID0gXCIvc3BlZWNoL3JlY29nbml0aW9uL2ludGVyYWN0aXZlL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uUmVsYXRpdmVVcmkgPSBcIi9zcGVlY2gvcmVjb2duaXRpb24vY29udmVyc2F0aW9uL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgIHRoaXMuZGljdGF0aW9uUmVsYXRpdmVVcmkgPSBcIi9zcGVlY2gvcmVjb2duaXRpb24vZGljdGF0aW9uL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgIHRoaXMuY3JlYXRlID0gKGNvbmZpZywgYXV0aEluZm8sIGNvbm5lY3Rpb25JZCkgPT4ge1xuICAgICAgICAgICAgbGV0IGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge307XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludElkID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmIChlbmRwb2ludElkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbmRwb2ludCB8fCBlbmRwb2ludC5zZWFyY2goUXVlcnlQYXJhbWV0ZXJOYW1lcy5EZXBsb3ltZW50SWRQYXJhbU5hbWUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtc1tRdWVyeVBhcmFtZXRlck5hbWVzLkRlcGxveW1lbnRJZFBhcmFtTmFtZV0gPSBlbmRwb2ludElkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbmRwb2ludCB8fCBlbmRwb2ludC5zZWFyY2goUXVlcnlQYXJhbWV0ZXJOYW1lcy5MYW5ndWFnZVBhcmFtTmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuTGFuZ3VhZ2VQYXJhbU5hbWVdID0gbGFuZ3VhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlbmRwb2ludCB8fCBlbmRwb2ludC5zZWFyY2goUXVlcnlQYXJhbWV0ZXJOYW1lcy5Gb3JtYXRQYXJhbU5hbWUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuRm9ybWF0UGFyYW1OYW1lXSA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0W091dHB1dEZvcm1hdC5TaW1wbGVdKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRDb21tb25VcmxQYXJhbXMoY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnQpO1xuICAgICAgICAgICAgaWYgKCFlbmRwb2ludCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhvc3QgPSBcIndzczovL1wiICsgcmVnaW9uICsgXCIuc3R0LnNwZWVjaC5taWNyb3NvZnQuY29tXCI7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChjb25maWcucmVjb2duaXRpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShGb3JjZURpY3RhdGlvblByb3BlcnR5TmFtZSwgXCJmYWxzZVwiKSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGhvc3QgKyB0aGlzLmRpY3RhdGlvblJlbGF0aXZlVXJpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBob3N0ICsgdGhpcy5jb252ZXJzYXRpb25SZWxhdGl2ZVVyaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uTW9kZS5EaWN0YXRpb246XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGhvc3QgKyB0aGlzLmRpY3RhdGlvblJlbGF0aXZlVXJpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGhvc3QgKyB0aGlzLmludGVyYWN0aXZlUmVsYXRpdmVVcmk7IC8vIGRlZmF1bHQgaXMgaW50ZXJhY3RpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlcnNbYXV0aEluZm8uaGVhZGVyTmFtZV0gPSBhdXRoSW5mby50b2tlbjtcbiAgICAgICAgICAgIGhlYWRlcnNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5Db25uZWN0aW9uSWRIZWFkZXJdID0gY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBXZWJzb2NrZXRDb25uZWN0aW9uKGVuZHBvaW50LCBxdWVyeVBhcmFtcywgaGVhZGVycywgbmV3IFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIoKSwgUHJveHlJbmZvLmZyb21SZWNvZ25pemVyQ29uZmlnKGNvbmZpZyksIGNvbm5lY3Rpb25JZCk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hDb25uZWN0aW9uRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQXJndW1lbnROdWxsRXJyb3IsIENvbm5lY3Rpb25NZXNzYWdlIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5jb25zdCBQYXRoSGVhZGVyTmFtZSA9IFwicGF0aFwiO1xuY29uc3QgQ29udGVudFR5cGVIZWFkZXJOYW1lID0gXCJjb250ZW50LXR5cGVcIjtcbmNvbnN0IFJlcXVlc3RJZEhlYWRlck5hbWUgPSBcIngtcmVxdWVzdGlkXCI7XG5jb25zdCBSZXF1ZXN0VGltZXN0YW1wSGVhZGVyTmFtZSA9IFwieC10aW1lc3RhbXBcIjtcbmV4cG9ydCBjbGFzcyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZSBleHRlbmRzIENvbm5lY3Rpb25NZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlVHlwZSwgcGF0aCwgcmVxdWVzdElkLCBjb250ZW50VHlwZSwgYm9keSwgYWRkaXRpb25hbEhlYWRlcnMsIGlkKSB7XG4gICAgICAgIGlmICghcGF0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwicGF0aFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlcXVlc3RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwicmVxdWVzdElkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgaGVhZGVyc1tQYXRoSGVhZGVyTmFtZV0gPSBwYXRoO1xuICAgICAgICBoZWFkZXJzW1JlcXVlc3RJZEhlYWRlck5hbWVdID0gcmVxdWVzdElkO1xuICAgICAgICBoZWFkZXJzW1JlcXVlc3RUaW1lc3RhbXBIZWFkZXJOYW1lXSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgaWYgKGNvbnRlbnRUeXBlKSB7XG4gICAgICAgICAgICBoZWFkZXJzW0NvbnRlbnRUeXBlSGVhZGVyTmFtZV0gPSBjb250ZW50VHlwZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWRkaXRpb25hbEhlYWRlcnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaGVhZGVyTmFtZSBpbiBhZGRpdGlvbmFsSGVhZGVycykge1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbaGVhZGVyTmFtZV0gPSBhZGRpdGlvbmFsSGVhZGVyc1toZWFkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICBzdXBlcihtZXNzYWdlVHlwZSwgYm9keSwgaGVhZGVycywgaWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIobWVzc2FnZVR5cGUsIGJvZHksIGhlYWRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdlBhdGggPSBwYXRoO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMucHJpdkNvbnRlbnRUeXBlID0gY29udGVudFR5cGU7XG4gICAgICAgIHRoaXMucHJpdkFkZGl0aW9uYWxIZWFkZXJzID0gYWRkaXRpb25hbEhlYWRlcnM7XG4gICAgfVxuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGF0aDtcbiAgICB9XG4gICAgZ2V0IHJlcXVlc3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlcXVlc3RJZDtcbiAgICB9XG4gICAgZ2V0IGNvbnRlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29udGVudFR5cGU7XG4gICAgfVxuICAgIGdldCBhZGRpdGlvbmFsSGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFkZGl0aW9uYWxIZWFkZXJzO1xuICAgIH1cbn1cblNwZWVjaENvbm5lY3Rpb25NZXNzYWdlLmZyb21Db25uZWN0aW9uTWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XG4gICAgbGV0IHBhdGggPSBudWxsO1xuICAgIGxldCByZXF1ZXN0SWQgPSBudWxsO1xuICAgIGxldCBjb250ZW50VHlwZSA9IG51bGw7XG4gICAgbGV0IHJlcXVlc3RUaW1lc3RhbXAgPSBudWxsO1xuICAgIGNvbnN0IGFkZGl0aW9uYWxIZWFkZXJzID0ge307XG4gICAgaWYgKG1lc3NhZ2UuaGVhZGVycykge1xuICAgICAgICBmb3IgKGNvbnN0IGhlYWRlck5hbWUgaW4gbWVzc2FnZS5oZWFkZXJzKSB7XG4gICAgICAgICAgICBpZiAoaGVhZGVyTmFtZSkge1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFBhdGhIZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IG1lc3NhZ2UuaGVhZGVyc1toZWFkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpID09PSBSZXF1ZXN0SWRIZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkID0gbWVzc2FnZS5oZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChoZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFJlcXVlc3RUaW1lc3RhbXBIZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFRpbWVzdGFtcCA9IG1lc3NhZ2UuaGVhZGVyc1toZWFkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpID09PSBDb250ZW50VHlwZUhlYWRlck5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IG1lc3NhZ2UuaGVhZGVyc1toZWFkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxIZWFkZXJzW2hlYWRlck5hbWVdID0gbWVzc2FnZS5oZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UubWVzc2FnZVR5cGUsIHBhdGgsIHJlcXVlc3RJZCwgY29udGVudFR5cGUsIG1lc3NhZ2UuYm9keSwgYWRkaXRpb25hbEhlYWRlcnMsIG1lc3NhZ2UuaWQpO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuSW50ZXJuYWwuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgSlNPTiB1c2VkIGluIHRoZSBzcGVlY2guY29udGV4dCBtZXNzYWdlIHNlbnQgdG8gdGhlIHNwZWVjaCBzZXJ2aWNlLlxuICogVGhlIGR5bmFtaWMgZ3JhbW1hciBpcyBhbHdheXMgcmVmcmVzaGVkIGZyb20gdGhlIGVuY2Fwc3VsYXRlZCBkeW5hbWljIGdyYW1tYXIgb2JqZWN0LlxuICovXG5leHBvcnQgY2xhc3MgU3BlZWNoQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IoZHluYW1pY0dyYW1tYXIpIHtcbiAgICAgICAgdGhpcy5wcml2Q29udGV4dCA9IHt9O1xuICAgICAgICB0aGlzLnByaXZEeW5hbWljR3JhbW1hciA9IGR5bmFtaWNHcmFtbWFyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgc2VjdGlvbiB0byB0aGUgc3BlZWNoLmNvbnRleHQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSBzZWN0aW9uTmFtZSBOYW1lIG9mIHRoZSBzZWN0aW9uIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgSlNPTiBzZXJpYWxpemVhYmxlIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIHZhbHVlLlxuICAgICAqL1xuICAgIHNldFNlY3Rpb24oc2VjdGlvbk5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbnRleHRbc2VjdGlvbk5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgZGdpID0gdGhpcy5wcml2RHluYW1pY0dyYW1tYXIuZ2VuZXJhdGVHcmFtbWFyT2JqZWN0KCk7XG4gICAgICAgIHRoaXMuc2V0U2VjdGlvbihcImRnaVwiLCBkZ2kpO1xuICAgICAgICBjb25zdCByZXQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnByaXZDb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaENvbnRleHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZSwgT3V0cHV0Rm9ybWF0LCBQcm9wZXJ0eUNvbGxlY3Rpb24sIFByb3BlcnR5SWQsIFJlc3VsdFJlYXNvbiwgU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncywgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MsIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0LCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBEZXRhaWxlZFNwZWVjaFBocmFzZSwgRW51bVRyYW5zbGF0aW9uLCBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIFJlY29nbml0aW9uU3RhdHVzLCBTZXJ2aWNlUmVjb2duaXplckJhc2UsIFNpbXBsZVNwZWVjaFBocmFzZSwgU3BlZWNoSHlwb3RoZXNpcywgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBTcGVlY2hTZXJ2aWNlUmVjb2duaXplciBleHRlbmRzIFNlcnZpY2VSZWNvZ25pemVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgc3BlZWNoUmVjb2duaXplcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCBzcGVlY2hSZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUmVjb2duaXplciA9IHNwZWVjaFJlY29nbml6ZXI7XG4gICAgfVxuICAgIHByb2Nlc3NUeXBlU3BlY2lmaWNNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxCYWNrKSB7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdFByb3BzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICByZXN1bHRQcm9wcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0LCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlIFwic3BlZWNoLmh5cG90aGVzaXNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guZnJhZ21lbnRcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBoeXBvdGhlc2lzID0gU3BlZWNoSHlwb3RoZXNpcy5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaHlwb3RoZXNpcy5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0O1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5SZWNvZ25pemluZ1NwZWVjaCwgaHlwb3RoZXNpcy5UZXh0LCBoeXBvdGhlc2lzLkR1cmF0aW9uLCBvZmZzZXQsIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkh5cG90aGVzaXMob2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBldiA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIGh5cG90aGVzaXMuRHVyYXRpb24sIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U3BlZWNoUmVjb2duaXplci5yZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoUmVjb2duaXplci5yZWNvZ25pemluZyh0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5waHJhc2VcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBzaW1wbGUgPSBTaW1wbGVTcGVlY2hQaHJhc2UuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFJlYXNvbiA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlUmVjb2duaXRpb25SZXN1bHQoc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblBocmFzZVJlY29nbml6ZWQodGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCArIHNpbXBsZS5PZmZzZXQgKyBzaW1wbGUuRHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmIChSZXN1bHRSZWFzb24uQ2FuY2VsZWQgPT09IHJlc3VsdFJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxSZWFzb24gPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdChzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoY2FuY2VsUmVhc29uLCBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbEVycm9yQ29kZShzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMpLCB1bmRlZmluZWQsIHN1Y2Nlc3NDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkICYmIHJlc3VsdFJlYXNvbiA9PT0gUmVzdWx0UmVhc29uLk5vTWF0Y2ggJiYgc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzICE9PSBSZWNvZ25pdGlvblN0YXR1cy5Jbml0aWFsU2lsZW5jZVRpbWVvdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSkgPT09IE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuU2ltcGxlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlc3VsdFJlYXNvbiwgc2ltcGxlLkRpc3BsYXlUZXh0LCBzaW1wbGUuRHVyYXRpb24sIHNpbXBsZS5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0LCB1bmRlZmluZWQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5LCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxlZCA9IERldGFpbGVkU3BlZWNoUGhyYXNlLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQodGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCByZXN1bHRSZWFzb24sIGRldGFpbGVkLlJlY29nbml0aW9uU3RhdHVzID09PSBSZWNvZ25pdGlvblN0YXR1cy5TdWNjZXNzID8gZGV0YWlsZWQuTkJlc3RbMF0uRGlzcGxheSA6IHVuZGVmaW5lZCwgZGV0YWlsZWQuRHVyYXRpb24sIGRldGFpbGVkLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgcmVzdWx0Lm9mZnNldCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIucmVjb2duaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIucmVjb2duaXplZCh0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoISFzdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWVycm9yQ2FsbEJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsQmFjayhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGludm9rZSB0aGUgY2FsbCBiYWNrIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDYW5jZWxzIHJlY29nbml0aW9uLlxuICAgIGNhbmNlbFJlY29nbml0aW9uKHNlc3Npb25JZCwgcmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IsIGNhbmNlbFJlY29DYWxsYmFjaykge1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW2Vycm9yQ29kZV0pO1xuICAgICAgICBpZiAoISF0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLmNhbmNlbGVkKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxFdmVudCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzKGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3IsIGVycm9yQ29kZSwgdW5kZWZpbmVkLCBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLmNhbmNlbGVkKHRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIsIGNhbmNlbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoISFjYW5jZWxSZWNvQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdChyZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5DYW5jZWxlZCwgdW5kZWZpbmVkLCAvLyBUZXh0XG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIERydWF0aW9uXG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIE9mZnNldFxuICAgICAgICAgICAgZXJyb3IsIHVuZGVmaW5lZCwgLy8gSnNvblxuICAgICAgICAgICAgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbmNlbFJlY29DYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2IpIHsgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hTZXJ2aWNlUmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJveHlJbmZvLCBXZWJzb2NrZXRDb25uZWN0aW9uLCB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uRmFjdG9yeUJhc2UgfSBmcm9tIFwiLi9Db25uZWN0aW9uRmFjdG9yeUJhc2VcIjtcbmltcG9ydCB7IFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgUXVlcnlQYXJhbWV0ZXJOYW1lcyB9IGZyb20gXCIuL1F1ZXJ5UGFyYW1ldGVyTmFtZXNcIjtcbmNvbnN0IFRlc3RIb29rc1BhcmFtTmFtZSA9IFwidGVzdGhvb2tzXCI7XG5jb25zdCBDb25uZWN0aW9uSWRIZWFkZXIgPSBcIlgtQ29ubmVjdGlvbklkXCI7XG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeSBleHRlbmRzIENvbm5lY3Rpb25GYWN0b3J5QmFzZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY3JlYXRlID0gKGNvbmZpZywgYXV0aEluZm8sIGNvbm5lY3Rpb25JZCkgPT4ge1xuICAgICAgICAgICAgbGV0IGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmICghZW5kcG9pbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBlbmRwb2ludCA9IFwid3NzOi8vXCIgKyByZWdpb24gKyBcIi5zMnMuc3BlZWNoLm1pY3Jvc29mdC5jb20vc3BlZWNoL3RyYW5zbGF0aW9uL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBmcm9tOiBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSksXG4gICAgICAgICAgICAgICAgdG86IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcyksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXRDb21tb25VcmxQYXJhbXMoY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnQpO1xuICAgICAgICAgICAgdGhpcy5zZXRVcmxQYXJhbWV0ZXIoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfVHJhbnNsYXRpb25SZXF1ZXN0U3RhYmxlUGFydGlhbFJlc3VsdCwgUXVlcnlQYXJhbWV0ZXJOYW1lcy5TdGFibGVUcmFuc2xhdGlvbiwgY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnQpO1xuICAgICAgICAgICAgY29uc3Qgdm9pY2VOYW1lID0gXCJ2b2ljZVwiO1xuICAgICAgICAgICAgY29uc3QgZmVhdHVyZU5hbWUgPSBcImZlYXR1cmVzXCI7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlLCB1bmRlZmluZWQpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtc1t2b2ljZU5hbWVdID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlKTtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtc1tmZWF0dXJlTmFtZV0gPSBcInRleHR0b3NwZWVjaFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyc1thdXRoSW5mby5oZWFkZXJOYW1lXSA9IGF1dGhJbmZvLnRva2VuO1xuICAgICAgICAgICAgaGVhZGVyc1tDb25uZWN0aW9uSWRIZWFkZXJdID0gY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBXZWJzb2NrZXRDb25uZWN0aW9uKGVuZHBvaW50LCBxdWVyeVBhcmFtcywgaGVhZGVycywgbmV3IFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIoKSwgUHJveHlJbmZvLmZyb21SZWNvZ25pemVyQ29uZmlnKGNvbmZpZyksIGNvbm5lY3Rpb25JZCk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvbkNvbm5lY3Rpb25GYWN0b3J5LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSwgVHJhbnNsYXRpb25TdGF0dXMsIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGUsIENhbmNlbGxhdGlvblJlYXNvbiwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCBSZXN1bHRSZWFzb24sIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncywgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncywgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCwgVHJhbnNsYXRpb25zLCBUcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJncywgVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQsIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIEVudW1UcmFuc2xhdGlvbiwgUmVjb2duaXRpb25TdGF0dXMsIFNlcnZpY2VSZWNvZ25pemVyQmFzZSwgU3ludGhlc2lzU3RhdHVzLCBUcmFuc2xhdGlvbkh5cG90aGVzaXMsIFRyYW5zbGF0aW9uUGhyYXNlLCBUcmFuc2xhdGlvblN5bnRoZXNpc0VuZCwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyIGV4dGVuZHMgU2VydmljZVJlY29nbml6ZXJCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCB0cmFuc2xhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgc3VwZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgdHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyID0gdHJhbnNsYXRpb25SZWNvZ25pemVyO1xuICAgIH1cbiAgICBwcm9jZXNzVHlwZVNwZWNpZmljTWVzc2FnZXMoY29ubmVjdGlvbk1lc3NhZ2UsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsQmFjaykge1xuICAgICAgICBjb25zdCByZXN1bHRQcm9wcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgaWYgKGNvbm5lY3Rpb25NZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICByZXN1bHRQcm9wcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0LCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChjb25uZWN0aW9uTWVzc2FnZS5wYXRoLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGlvbi5oeXBvdGhlc2lzXCI6XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5maXJlRXZlbnRGb3JSZXN1bHQoVHJhbnNsYXRpb25IeXBvdGhlc2lzLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uSHlwb3RoZXNpcyh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgcmVzdWx0Lm9mZnNldCk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIucmVjb2duaXppbmcodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGlvbi5waHJhc2VcIjpcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2xhdGVkUGhyYXNlID0gVHJhbnNsYXRpb25QaHJhc2UuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUGhyYXNlUmVjb2duaXplZCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgdHJhbnNsYXRlZFBocmFzZS5PZmZzZXQgKyB0cmFuc2xhdGVkUGhyYXNlLkR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRlZFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cyA9PT0gUmVjb2duaXRpb25TdGF0dXMuU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBPSywgdGhlIHJlY29nbml0aW9uIHdhcyBzdWNjZXNzZnVsLiBIb3cnZCB0aGUgdHJhbnNsYXRpb24gZG8/XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZmlyZUV2ZW50Rm9yUmVzdWx0KHRyYW5zbGF0ZWRQaHJhc2UsIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6ZWQodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlcG9ydCByZXN1bHQgdG8gcHJvbWlzZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhc3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyb3JDYWxsQmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaW52b2tlIHRoZSBjYWxsIGJhY2sgb25jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpZiBpdCdzIHN1Y2Nlc3NmdWwgZG9uJ3QgaW52b2tlIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IgYWZ0ZXIgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ2FsbEJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFzb24gPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZVJlY29nbml0aW9uUmVzdWx0KHRyYW5zbGF0ZWRQaHJhc2UuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCh1bmRlZmluZWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgcmVhc29uLCB0cmFuc2xhdGVkUGhyYXNlLlRleHQsIHRyYW5zbGF0ZWRQaHJhc2UuRHVyYXRpb24sIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQgKyB0cmFuc2xhdGVkUGhyYXNlLk9mZnNldCwgdW5kZWZpbmVkLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVhc29uID09PSBSZXN1bHRSZWFzb24uQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbFJlYXNvbiA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlQ2FuY2VsUmVzdWx0KHRyYW5zbGF0ZWRQaHJhc2UuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbkxvY2FsKGNhbmNlbFJlYXNvbiwgRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVDYW5jZWxFcnJvckNvZGUodHJhbnNsYXRlZFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cyksIHVuZGVmaW5lZCwgc3VjY2Vzc0NhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiYgcmVhc29uID09PSBSZXN1bHRSZWFzb24uTm9NYXRjaCAmJiB0cmFuc2xhdGVkUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzICE9PSBSZWNvZ25pdGlvblN0YXR1cy5Jbml0aWFsU2lsZW5jZVRpbWVvdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXYgPSBuZXcgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIHJlc3VsdC5vZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5yZWNvZ25pemVkKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcG9ydCByZXN1bHQgdG8gcHJvbWlzZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFlcnJvckNhbGxCYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaW52b2tlIHRoZSBjYWxsIGJhY2sgb25jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBhZnRlciB0aGF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0aW9uLnN5bnRoZXNpc1wiOlxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFN5bnRoZXNpc0F1ZGlvKGNvbm5lY3Rpb25NZXNzYWdlLmJpbmFyeUJvZHksIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRpb24uc3ludGhlc2lzLmVuZFwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IHN5bnRoRW5kID0gVHJhbnNsYXRpb25TeW50aGVzaXNFbmQuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoc3ludGhFbmQuU3ludGhlc2lzU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU3ludGhlc2lzU3RhdHVzLkVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnN5bnRoZXNpemluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdChSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0RXZlbnQgPSBuZXcgVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MocmVzdWx0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5zeW50aGVzaXppbmcodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCByZXRFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbmQgcmFpc2UgYSBjYW5jZWxlZCBldmVudCB0byBzZW5kIHRoZSByaWNoKGVyKSBlcnJvciBtZXNzYWdlIGJhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsZWRSZXN1bHQgPSBuZXcgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCwgQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBzeW50aEVuZC5GYWlsdXJlUmVhc29uLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuU2VydmljZUVycm9yLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuY2FuY2VsZWQodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCBjYW5jZWxlZFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTeW50aGVzaXNTdGF0dXMuU3VjY2VzczpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZFN5bnRoZXNpc0F1ZGlvKHVuZGVmaW5lZCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDYW5jZWxzIHJlY29nbml0aW9uLlxuICAgIGNhbmNlbFJlY29nbml0aW9uKHNlc3Npb25JZCwgcmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IsIGNhbmNlbFJlY29DYWxsYmFjaykge1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW2Vycm9yQ29kZV0pO1xuICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEV2ZW50ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyhzZXNzaW9uSWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3IsIGVycm9yQ29kZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLmNhbmNlbGVkKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgY2FuY2VsRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghIWNhbmNlbFJlY29DYWxsYmFjaykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQodW5kZWZpbmVkLCAvLyBUcmFuc2xhdGlvbnNcbiAgICAgICAgICAgIHJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLkNhbmNlbGVkLCB1bmRlZmluZWQsIC8vIFRleHRcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gRHJ1YXRpb25cbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gT2Zmc2V0XG4gICAgICAgICAgICBlcnJvciwgdW5kZWZpbmVkLCAvLyBKc29uXG4gICAgICAgICAgICBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsUmVjb0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYikgeyB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmlyZUV2ZW50Rm9yUmVzdWx0KHNlcnZpY2VSZXN1bHQsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgbGV0IHRyYW5zbGF0aW9ucztcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvbnMpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0aW9ucyA9IG5ldyBUcmFuc2xhdGlvbnMoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdHJhbnNsYXRpb24gb2Ygc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbnMuc2V0KHRyYW5zbGF0aW9uLkxhbmd1YWdlLCB0cmFuc2xhdGlvbi5UZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzdWx0UmVhc29uO1xuICAgICAgICBpZiAoc2VydmljZVJlc3VsdCBpbnN0YW5jZW9mIFRyYW5zbGF0aW9uUGhyYXNlKSB7XG4gICAgICAgICAgICBpZiAoc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvblN0YXR1cyA9PT0gVHJhbnNsYXRpb25TdGF0dXMuU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHJlc3VsdFJlYXNvbiA9IFJlc3VsdFJlYXNvbi5UcmFuc2xhdGVkU3BlZWNoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0UmVhc29uID0gUmVzdWx0UmVhc29uLlJlY29nbml6ZWRTcGVlY2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRSZWFzb24gPSBSZXN1bHRSZWFzb24uVHJhbnNsYXRpbmdTcGVlY2g7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gc2VydmljZVJlc3VsdC5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCh0cmFuc2xhdGlvbnMsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgcmVzdWx0UmVhc29uLCBzZXJ2aWNlUmVzdWx0LlRleHQsIHNlcnZpY2VSZXN1bHQuRHVyYXRpb24sIG9mZnNldCwgc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5GYWlsdXJlUmVhc29uLCBKU09OLnN0cmluZ2lmeShzZXJ2aWNlUmVzdWx0KSwgcHJvcGVydGllcyk7XG4gICAgICAgIGNvbnN0IGV2ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBvZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgIHJldHVybiBldjtcbiAgICB9XG4gICAgc2VuZFN5bnRoZXNpc0F1ZGlvKGF1ZGlvLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgY29uc3QgcmVhc29uID0gKHVuZGVmaW5lZCA9PT0gYXVkaW8pID8gUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvQ29tcGxldGVkIDogUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQocmVhc29uLCBhdWRpbyk7XG4gICAgICAgIGNvbnN0IHJldEV2ZW50ID0gbmV3IFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzKHJlc3VsdCwgc2Vzc2lvbklkKTtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnN5bnRoZXNpemluZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuc3ludGhlc2l6aW5nKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgcmV0RXZlbnQpO1xuICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdHJhbnNsYXRpb24gc3RhdHVzLlxuICogQGNsYXNzIFRyYW5zbGF0aW9uU3RhdHVzXG4gKi9cbmV4cG9ydCB2YXIgVHJhbnNsYXRpb25TdGF0dXM7XG4oZnVuY3Rpb24gKFRyYW5zbGF0aW9uU3RhdHVzKSB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblN0YXR1cy5TdWNjZXNzXG4gICAgICovXG4gICAgVHJhbnNsYXRpb25TdGF0dXNbVHJhbnNsYXRpb25TdGF0dXNbXCJTdWNjZXNzXCJdID0gMF0gPSBcIlN1Y2Nlc3NcIjtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uU3RhdHVzLkVycm9yXG4gICAgICovXG4gICAgVHJhbnNsYXRpb25TdGF0dXNbVHJhbnNsYXRpb25TdGF0dXNbXCJFcnJvclwiXSA9IDFdID0gXCJFcnJvclwiO1xufSkoVHJhbnNsYXRpb25TdGF0dXMgfHwgKFRyYW5zbGF0aW9uU3RhdHVzID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25TdGF0dXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbm5lY3Rpb25NZXNzYWdlLCBEZWZlcnJlZCwgTWVzc2FnZVR5cGUsIFJhd1dlYnNvY2tldE1lc3NhZ2UsIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5jb25zdCBDUkxGID0gXCJcXHJcXG5cIjtcbmV4cG9ydCBjbGFzcyBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50b0Nvbm5lY3Rpb25NZXNzYWdlID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRNZXNzYWdlID0gbWVzc2FnZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJvZHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckJvZHlTcGxpdCA9IHRleHRNZXNzYWdlLnNwbGl0KFwiXFxyXFxuXFxyXFxuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlckJvZHlTcGxpdCAmJiBoZWFkZXJCb2R5U3BsaXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSB0aGlzLnBhcnNlSGVhZGVycyhoZWFkZXJCb2R5U3BsaXRbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJCb2R5U3BsaXQubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0gaGVhZGVyQm9keVNwbGl0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKG5ldyBDb25uZWN0aW9uTWVzc2FnZShtZXNzYWdlLm1lc3NhZ2VUeXBlLCBib2R5LCBoZWFkZXJzLCBtZXNzYWdlLmlkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLkJpbmFyeSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5hcnlNZXNzYWdlID0gbWVzc2FnZS5iaW5hcnlDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBsZXQgYm9keSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYmluYXJ5TWVzc2FnZSB8fCBiaW5hcnlNZXNzYWdlLmJ5dGVMZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJpbmFyeSBtZXNzYWdlIGZvcm1hdC4gSGVhZGVyIGxlbmd0aCBtaXNzaW5nLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhiaW5hcnlNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyTGVuZ3RoID0gZGF0YVZpZXcuZ2V0SW50MTYoMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiaW5hcnlNZXNzYWdlLmJ5dGVMZW5ndGggPCBoZWFkZXJMZW5ndGggKyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJpbmFyeSBtZXNzYWdlIGZvcm1hdC4gSGVhZGVyIGNvbnRlbnQgbWlzc2luZy5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGhlYWRlcnNTdHJpbmcgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlYWRlckxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzU3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGRhdGFWaWV3KS5nZXRJbnQ4KGkgKyAyKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IHRoaXMucGFyc2VIZWFkZXJzKGhlYWRlcnNTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmluYXJ5TWVzc2FnZS5ieXRlTGVuZ3RoID4gaGVhZGVyTGVuZ3RoICsgMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9keSA9IGJpbmFyeU1lc3NhZ2Uuc2xpY2UoMiArIGhlYWRlckxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyYWwucmVzb2x2ZShuZXcgQ29ubmVjdGlvbk1lc3NhZ2UobWVzc2FnZS5tZXNzYWdlVHlwZSwgYm9keSwgaGVhZGVycywgbWVzc2FnZS5pZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyYWwucmVqZWN0KGBFcnJvciBmb3JtYXR0aW5nIHRoZSBtZXNzYWdlLiBFcnJvcjogJHtlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mcm9tQ29ubmVjdGlvbk1lc3NhZ2UgPSAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IGAke3RoaXMubWFrZUhlYWRlcnMobWVzc2FnZSl9JHtDUkxGfSR7bWVzc2FnZS50ZXh0Qm9keSA/IG1lc3NhZ2UudGV4dEJvZHkgOiBcIlwifWA7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmFsLnJlc29sdmUobmV3IFJhd1dlYnNvY2tldE1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgcGF5bG9hZCwgbWVzc2FnZS5pZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5CaW5hcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyc1N0cmluZyA9IHRoaXMubWFrZUhlYWRlcnMobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBtZXNzYWdlLmJpbmFyeUJvZHk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckludDhBcnJheSA9IG5ldyBJbnQ4QXJyYXkodGhpcy5zdHJpbmdUb0FycmF5QnVmZmVyKGhlYWRlcnNTdHJpbmcpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IG5ldyBBcnJheUJ1ZmZlcigyICsgaGVhZGVySW50OEFycmF5LmJ5dGVMZW5ndGggKyAoY29udGVudCA/IGNvbnRlbnQuYnl0ZUxlbmd0aCA6IDApKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcocGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDE2KDAsIGhlYWRlckludDhBcnJheS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlYWRlckludDhBcnJheS5ieXRlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDgoMiArIGksIGhlYWRlckludDhBcnJheVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvZHlJbnQ4QXJyYXkgPSBuZXcgSW50OEFycmF5KGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2R5SW50OEFycmF5LmJ5dGVMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDgoMiArIGhlYWRlckludDhBcnJheS5ieXRlTGVuZ3RoICsgaSwgYm9keUludDhBcnJheVtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyYWwucmVzb2x2ZShuZXcgUmF3V2Vic29ja2V0TWVzc2FnZShNZXNzYWdlVHlwZS5CaW5hcnksIHBheWxvYWQsIG1lc3NhZ2UuaWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGRlZmVycmFsLnJlamVjdChgRXJyb3IgZm9ybWF0dGluZyB0aGUgbWVzc2FnZS4gJHtlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tYWtlSGVhZGVycyA9IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc1N0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5oZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBoZWFkZXIgaW4gbWVzc2FnZS5oZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNTdHJpbmcgKz0gYCR7aGVhZGVyfTogJHttZXNzYWdlLmhlYWRlcnNbaGVhZGVyXX0ke0NSTEZ9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoZWFkZXJzU3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBhcnNlSGVhZGVycyA9IChoZWFkZXJzU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgICAgICAgICBpZiAoaGVhZGVyc1N0cmluZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlck1hdGNoZXMgPSBoZWFkZXJzU3RyaW5nLm1hdGNoKC9bXlxcclxcbl0rL2cpO1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaGVhZGVyIG9mIGhlYWRlck1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IGhlYWRlci5pbmRleE9mKFwiOlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJOYW1lID0gc2VwYXJhdG9ySW5kZXggPiAwID8gaGVhZGVyLnN1YnN0cigwLCBzZXBhcmF0b3JJbmRleCkudHJpbSgpLnRvTG93ZXJDYXNlKCkgOiBoZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyVmFsdWUgPSBzZXBhcmF0b3JJbmRleCA+IDAgJiYgaGVhZGVyLmxlbmd0aCA+IChzZXBhcmF0b3JJbmRleCArIDEpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnN1YnN0cihzZXBhcmF0b3JJbmRleCArIDEpLnRyaW0oKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1toZWFkZXJOYW1lXSA9IGhlYWRlclZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RyaW5nVG9BcnJheUJ1ZmZlciA9IChzdHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihzdHIubGVuZ3RoKTtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRVaW50OChpLCBzdHIuY2hhckNvZGVBdChpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgRXZlbnRUeXBlLCBQbGF0Zm9ybUV2ZW50IH0gZnJvbSBcIi4vUGxhdGZvcm1FdmVudFwiO1xuZXhwb3J0IGNsYXNzIEF1ZGlvU291cmNlRXZlbnQgZXh0ZW5kcyBQbGF0Zm9ybUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihldmVudE5hbWUsIGF1ZGlvU291cmNlSWQsIGV2ZW50VHlwZSA9IEV2ZW50VHlwZS5JbmZvKSB7XG4gICAgICAgIHN1cGVyKGV2ZW50TmFtZSwgZXZlbnRUeXBlKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCA9IGF1ZGlvU291cmNlSWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb1NvdXJjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZDtcbiAgICB9XG59XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50IGV4dGVuZHMgQXVkaW9Tb3VyY2VFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICBzdXBlcihcIkF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCk7XG4gICAgfVxufVxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQXVkaW9Tb3VyY2VSZWFkeUV2ZW50IGV4dGVuZHMgQXVkaW9Tb3VyY2VFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICBzdXBlcihcIkF1ZGlvU291cmNlUmVhZHlFdmVudFwiLCBhdWRpb1NvdXJjZUlkKTtcbiAgICB9XG59XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBBdWRpb1NvdXJjZU9mZkV2ZW50IGV4dGVuZHMgQXVkaW9Tb3VyY2VFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICBzdXBlcihcIkF1ZGlvU291cmNlT2ZmRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCk7XG4gICAgfVxufVxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQXVkaW9Tb3VyY2VFcnJvckV2ZW50IGV4dGVuZHMgQXVkaW9Tb3VyY2VFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCwgZXJyb3IpIHtcbiAgICAgICAgc3VwZXIoXCJBdWRpb1NvdXJjZUVycm9yRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCwgRXZlbnRUeXBlLkVycm9yKTtcbiAgICAgICAgdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICB9XG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3I7XG4gICAgfVxufVxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQXVkaW9TdHJlYW1Ob2RlRXZlbnQgZXh0ZW5kcyBBdWRpb1NvdXJjZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihldmVudE5hbWUsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHN1cGVyKGV2ZW50TmFtZSwgYXVkaW9Tb3VyY2VJZCk7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZUlkID0gYXVkaW9Ob2RlSWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb05vZGVJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvTm9kZUlkO1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50IGV4dGVuZHMgQXVkaW9TdHJlYW1Ob2RlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHN1cGVyKFwiQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpO1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQgZXh0ZW5kcyBBdWRpb1N0cmVhbU5vZGVFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgc3VwZXIoXCJBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50XCIsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKTtcbiAgICB9XG59XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50IGV4dGVuZHMgQXVkaW9TdHJlYW1Ob2RlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHN1cGVyKFwiQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudFwiLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCk7XG4gICAgfVxufVxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudCBleHRlbmRzIEF1ZGlvU3RyZWFtTm9kZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCwgZXJyb3IpIHtcbiAgICAgICAgc3VwZXIoXCJBdWRpb1N0cmVhbU5vZGVFcnJvckV2ZW50XCIsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKTtcbiAgICAgICAgdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICB9XG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3I7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb1NvdXJjZUV2ZW50cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIENodW5rZWRBcnJheUJ1ZmZlclN0cmVhbSBleHRlbmRzIFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IodGFyZ2V0Q2h1bmtTaXplLCBzdHJlYW1JZCkge1xuICAgICAgICBzdXBlcihzdHJlYW1JZCk7XG4gICAgICAgIHRoaXMucHJpdlRhcmdldENodW5rU2l6ZSA9IHRhcmdldENodW5rU2l6ZTtcbiAgICAgICAgdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMgPSAwO1xuICAgIH1cbiAgICB3cml0ZVN0cmVhbUNodW5rKGNodW5rKSB7XG4gICAgICAgIC8vIE5vIHBlbmRpbmcgd3JpdGUsIGFuZCB0aGUgYnVmZmVyIGlzIHRoZSByaWdodCBzaXplIHNvIHdyaXRlIGl0LlxuICAgICAgICBpZiAoY2h1bmsuaXNFbmQgfHxcbiAgICAgICAgICAgICgwID09PSB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyAmJiBjaHVuay5idWZmZXIuYnl0ZUxlbmd0aCA9PT0gdGhpcy5wcml2VGFyZ2V0Q2h1bmtTaXplKSkge1xuICAgICAgICAgICAgc3VwZXIud3JpdGVTdHJlYW1DaHVuayhjaHVuayk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJ5dGVzQ29waWVkRnJvbUJ1ZmZlciA9IDA7XG4gICAgICAgIHdoaWxlIChieXRlc0NvcGllZEZyb21CdWZmZXIgPCBjaHVuay5idWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRmlsbCB0aGUgbmV4dCBidWZmZXIuXG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLnByaXZOZXh0QnVmZmVyVG9Xcml0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdk5leHRCdWZmZXJUb1dyaXRlID0gbmV3IEFycmF5QnVmZmVyKHRoaXMucHJpdlRhcmdldENodW5rU2l6ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TmV4dEJ1ZmZlclN0YXJ0VGltZSA9IGNodW5rLnRpbWVSZWNlaXZlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZpbmQgb3V0IGhvdyBtYW55IGJ5dGVzIHdlIGNhbiBjb3B5IGludG8gdGhlIHJlYWQgYnVmZmVyLlxuICAgICAgICAgICAgY29uc3QgYnl0ZXNUb0NvcHkgPSBNYXRoLm1pbihjaHVuay5idWZmZXIuYnl0ZUxlbmd0aCAtIGJ5dGVzQ29waWVkRnJvbUJ1ZmZlciwgdGhpcy5wcml2VGFyZ2V0Q2h1bmtTaXplIC0gdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0VmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMucHJpdk5leHRCdWZmZXJUb1dyaXRlKTtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZVZpZXcgPSBuZXcgVWludDhBcnJheShjaHVuay5idWZmZXIuc2xpY2UoYnl0ZXNDb3BpZWRGcm9tQnVmZmVyLCBieXRlc1RvQ29weSArIGJ5dGVzQ29waWVkRnJvbUJ1ZmZlcikpO1xuICAgICAgICAgICAgdGFyZ2V0Vmlldy5zZXQoc291cmNlVmlldywgdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMpO1xuICAgICAgICAgICAgdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMgKz0gYnl0ZXNUb0NvcHk7XG4gICAgICAgICAgICBieXRlc0NvcGllZEZyb21CdWZmZXIgKz0gYnl0ZXNUb0NvcHk7XG4gICAgICAgICAgICAvLyBBcmUgd2UgcmVhZHkgdG8gd3JpdGU/XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMgPT09IHRoaXMucHJpdlRhcmdldENodW5rU2l6ZSkge1xuICAgICAgICAgICAgICAgIHN1cGVyLndyaXRlU3RyZWFtQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHRoaXMucHJpdk5leHRCdWZmZXJUb1dyaXRlLFxuICAgICAgICAgICAgICAgICAgICBpc0VuZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogdGhpcy5wcml2TmV4dEJ1ZmZlclN0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TmV4dEJ1ZmZlclRvV3JpdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIC8vIFNlbmQgd2hhdGV2ZXIgaXMgcGVuZGluZywgdGhlbiBjbG9zZSB0aGUgYmFzZSBjbGFzcy5cbiAgICAgICAgaWYgKDAgIT09IHRoaXMucHJpdk5leHRCdWZmZXJSZWFkeUJ5dGVzICYmICF0aGlzLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICBzdXBlci53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IHRoaXMucHJpdk5leHRCdWZmZXJUb1dyaXRlLnNsaWNlKDAsIHRoaXMucHJpdk5leHRCdWZmZXJSZWFkeUJ5dGVzKSxcbiAgICAgICAgICAgICAgICBpc0VuZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiB0aGlzLnByaXZOZXh0QnVmZmVyU3RhcnRUaW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNodW5rZWRBcnJheUJ1ZmZlclN0cmVhbS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgRXZlbnRUeXBlLCBQbGF0Zm9ybUV2ZW50IH0gZnJvbSBcIi4vUGxhdGZvcm1FdmVudFwiO1xuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25FdmVudCBleHRlbmRzIFBsYXRmb3JtRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50TmFtZSwgY29ubmVjdGlvbklkLCBldmVudFR5cGUgPSBFdmVudFR5cGUuSW5mbykge1xuICAgICAgICBzdXBlcihldmVudE5hbWUsIGV2ZW50VHlwZSk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3Rpb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25JZDtcbiAgICB9XG59XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uU3RhcnRFdmVudCBleHRlbmRzIENvbm5lY3Rpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkLCB1cmksIGhlYWRlcnMpIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW9uU3RhcnRFdmVudFwiLCBjb25uZWN0aW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZVcmkgPSB1cmk7XG4gICAgICAgIHRoaXMucHJpdkhlYWRlcnMgPSBoZWFkZXJzO1xuICAgIH1cbiAgICBnZXQgdXJpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VXJpO1xuICAgIH1cbiAgICBnZXQgaGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkhlYWRlcnM7XG4gICAgfVxufVxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCwgbWV0YWRhdGEpIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW9uRXN0YWJsaXNoZWRFdmVudFwiLCBjb25uZWN0aW9uSWQpO1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25DbG9zZWRFdmVudCBleHRlbmRzIENvbm5lY3Rpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkLCBzdGF0dXNDb2RlLCByZWFzb24pIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW9uQ2xvc2VkRXZlbnRcIiwgY29ubmVjdGlvbklkLCBFdmVudFR5cGUuRGVidWcpO1xuICAgICAgICB0aGlzLnByaXZScmVhc29uID0gcmVhc29uO1xuICAgICAgICB0aGlzLnByaXZTdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB9XG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJyZWFzb247XG4gICAgfVxuICAgIGdldCBzdGF0dXNDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RhdHVzQ29kZTtcbiAgICB9XG59XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudCBleHRlbmRzIENvbm5lY3Rpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkLCBzdGF0dXNjb2RlLCByZWFzb24pIHtcbiAgICAgICAgc3VwZXIoXCJDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudFwiLCBjb25uZWN0aW9uSWQsIEV2ZW50VHlwZS5FcnJvcik7XG4gICAgICAgIHRoaXMucHJpdlN0YXR1c0NvZGUgPSBzdGF0dXNjb2RlO1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgfVxuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIGdldCBzdGF0dXNDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RhdHVzQ29kZTtcbiAgICB9XG59XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCwgbmV0d29ya1JlY2VpdmVkVGltZUlTTywgbWVzc2FnZSkge1xuICAgICAgICBzdXBlcihcIkNvbm5lY3Rpb25NZXNzYWdlUmVjZWl2ZWRFdmVudFwiLCBjb25uZWN0aW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZOZXR3b3JrUmVjZWl2ZWRUaW1lID0gbmV0d29ya1JlY2VpdmVkVGltZUlTTztcbiAgICAgICAgdGhpcy5wcml2TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBuZXR3b3JrUmVjZWl2ZWRUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TmV0d29ya1JlY2VpdmVkVGltZTtcbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNZXNzYWdlO1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvbkV2ZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSWQsIG5ldHdvcmtTZW50VGltZUlTTywgbWVzc2FnZSkge1xuICAgICAgICBzdXBlcihcIkNvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50XCIsIGNvbm5lY3Rpb25JZCk7XG4gICAgICAgIHRoaXMucHJpdk5ldHdvcmtTZW50VGltZSA9IG5ldHdvcmtTZW50VGltZUlTTztcbiAgICAgICAgdGhpcy5wcml2TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBuZXR3b3JrU2VudFRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZOZXR3b3JrU2VudFRpbWU7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWVzc2FnZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb25FdmVudHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEludmFsaWRPcGVyYXRpb25FcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkIH0gZnJvbSBcIi4vR3VpZFwiO1xuZXhwb3J0IHZhciBNZXNzYWdlVHlwZTtcbihmdW5jdGlvbiAoTWVzc2FnZVR5cGUpIHtcbiAgICBNZXNzYWdlVHlwZVtNZXNzYWdlVHlwZVtcIlRleHRcIl0gPSAwXSA9IFwiVGV4dFwiO1xuICAgIE1lc3NhZ2VUeXBlW01lc3NhZ2VUeXBlW1wiQmluYXJ5XCJdID0gMV0gPSBcIkJpbmFyeVwiO1xufSkoTWVzc2FnZVR5cGUgfHwgKE1lc3NhZ2VUeXBlID0ge30pKTtcbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uTWVzc2FnZSB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZVR5cGUsIGJvZHksIGhlYWRlcnMsIGlkKSB7XG4gICAgICAgIHRoaXMucHJpdkJvZHkgPSBudWxsO1xuICAgICAgICBpZiAobWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQgJiYgYm9keSAmJiAhKHR5cGVvZiAoYm9keSkgPT09IFwic3RyaW5nXCIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiUGF5bG9hZCBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuQmluYXJ5ICYmIGJvZHkgJiYgIShib2R5IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiUGF5bG9hZCBtdXN0IGJlIEFycmF5QnVmZmVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdk1lc3NhZ2VUeXBlID0gbWVzc2FnZVR5cGU7XG4gICAgICAgIHRoaXMucHJpdkJvZHkgPSBib2R5O1xuICAgICAgICB0aGlzLnByaXZIZWFkZXJzID0gaGVhZGVycyA/IGhlYWRlcnMgOiB7fTtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBpZCA/IGlkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNZXNzYWdlVHlwZTtcbiAgICB9XG4gICAgZ2V0IGhlYWRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZIZWFkZXJzO1xuICAgIH1cbiAgICBnZXQgYm9keSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkJvZHk7XG4gICAgfVxuICAgIGdldCB0ZXh0Qm9keSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdk1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5CaW5hcnkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJOb3Qgc3VwcG9ydGVkIGZvciBiaW5hcnkgbWVzc2FnZVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcml2Qm9keTtcbiAgICB9XG4gICAgZ2V0IGJpbmFyeUJvZHkoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZNZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuVGV4dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIk5vdCBzdXBwb3J0ZWQgZm9yIHRleHQgbWVzc2FnZVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcml2Qm9keTtcbiAgICB9XG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0aW9uTWVzc2FnZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25PcGVuUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKHN0YXR1c0NvZGUsIHJlYXNvbikge1xuICAgICAgICB0aGlzLnByaXZTdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICAgICAgdGhpcy5wcml2UmVhc29uID0gcmVhc29uO1xuICAgIH1cbiAgICBnZXQgc3RhdHVzQ29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN0YXR1c0NvZGU7XG4gICAgfVxuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0aW9uT3BlblJlc3BvbnNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIFRoZSBlcnJvciB0aGF0IGlzIHRocm93biB3aGVuIGFuIGFyZ3VtZW50IHBhc3NlZCBpbiBpcyBudWxsLlxuICpcbiAqIEBleHBvcnRcbiAqIEBjbGFzcyBBcmd1bWVudE51bGxFcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG5leHBvcnQgY2xhc3MgQXJndW1lbnROdWxsRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBBcmd1bWVudE51bGxFcnJvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhcmd1bWVudE5hbWUgLSBOYW1lIG9mIHRoZSBhcmd1bWVudCB0aGF0IGlzIG51bGxcbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBBcmd1bWVudE51bGxFcnJvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFyZ3VtZW50TmFtZSkge1xuICAgICAgICBzdXBlcihhcmd1bWVudE5hbWUpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkFyZ3VtZW50TnVsbFwiO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBhcmd1bWVudE5hbWU7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgZXJyb3IgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBpbnZhbGlkIG9wZXJhdGlvbiBpcyBwZXJmb3JtZWQgaW4gdGhlIGNvZGUuXG4gKlxuICogQGV4cG9ydFxuICogQGNsYXNzIEludmFsaWRPcGVyYXRpb25FcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBJbnZhbGlkT3BlcmF0aW9uRXJyb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3IgLSBUaGUgZXJyb3JcbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBJbnZhbGlkT3BlcmF0aW9uRXJyb3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlcnJvcikge1xuICAgICAgICBzdXBlcihlcnJvcik7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiSW52YWxpZE9wZXJhdGlvblwiO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIFRoZSBlcnJvciB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9iamVjdCBpcyBkaXNwb3NlZC5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgT2JqZWN0RGlzcG9zZWRFcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBPYmplY3REaXNwb3NlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgT2JqZWN0RGlzcG9zZWRFcnJvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvYmplY3ROYW1lIC0gVGhlIG9iamVjdCB0aGF0IGlzIGRpc3Bvc2VkXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yIC0gVGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgT2JqZWN0RGlzcG9zZWRFcnJvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9iamVjdE5hbWUsIGVycm9yKSB7XG4gICAgICAgIHN1cGVyKGVycm9yKTtcbiAgICAgICAgdGhpcy5uYW1lID0gb2JqZWN0TmFtZSArIFwiT2JqZWN0RGlzcG9zZWRcIjtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3I7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FcnJvci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgT2JqZWN0RGlzcG9zZWRFcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkIH0gZnJvbSBcIi4vR3VpZFwiO1xuZXhwb3J0IGNsYXNzIEV2ZW50U291cmNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXRhZGF0YSkge1xuICAgICAgICB0aGlzLnByaXZFdmVudExpc3RlbmVycyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25FdmVudCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKG5ldyBPYmplY3REaXNwb3NlZEVycm9yKFwiRXZlbnRTb3VyY2VcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmFtTmFtZSBpbiB0aGlzLm1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5tZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnQubWV0YWRhdGFbcGFyYW1OYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5tZXRhZGF0YVtwYXJhbU5hbWVdID0gdGhpcy5tZXRhZGF0YVtwYXJhbU5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgZXZlbnRJZCBpbiB0aGlzLnByaXZFdmVudExpc3RlbmVycykge1xuICAgICAgICAgICAgICAgIGlmIChldmVudElkICYmIHRoaXMucHJpdkV2ZW50TGlzdGVuZXJzW2V2ZW50SWRdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkV2ZW50TGlzdGVuZXJzW2V2ZW50SWRdKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYXR0YWNoID0gKG9uRXZlbnRDYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZFdmVudExpc3RlbmVyc1tpZF0gPSBvbkV2ZW50Q2FsbGJhY2s7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRldGFjaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2RXZlbnRMaXN0ZW5lcnNbaWRdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmF0dGFjaExpc3RlbmVyID0gKGxpc3RlbmVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2gobGlzdGVuZXIub25FdmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Rpc3Bvc2VkO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRpc3Bvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZFdmVudExpc3RlbmVycyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2TWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICB9XG4gICAgZ2V0IG1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWV0YWRhdGE7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFNvdXJjZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQXJndW1lbnROdWxsRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuaW1wb3J0IHsgRXZlbnRTb3VyY2UgfSBmcm9tIFwiLi9FdmVudFNvdXJjZVwiO1xuZXhwb3J0IGNsYXNzIEV2ZW50cyB7XG4gICAgc3RhdGljIGdldCBpbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50cy5wcml2SW5zdGFuY2U7XG4gICAgfVxufVxuRXZlbnRzLnByaXZJbnN0YW5jZSA9IG5ldyBFdmVudFNvdXJjZSgpO1xuRXZlbnRzLnNldEV2ZW50U291cmNlID0gKGV2ZW50U291cmNlKSA9PiB7XG4gICAgaWYgKCFldmVudFNvdXJjZSkge1xuICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJldmVudFNvdXJjZVwiKTtcbiAgICB9XG4gICAgRXZlbnRzLnByaXZJbnN0YW5jZSA9IGV2ZW50U291cmNlO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgKiBmcm9tIFwiLi9BdWRpb1NvdXJjZUV2ZW50c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vQ29ubmVjdGlvbkV2ZW50c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vQ29ubmVjdGlvbk1lc3NhZ2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0Nvbm5lY3Rpb25PcGVuUmVzcG9uc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0Vycm9yXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9FdmVudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0V2ZW50U291cmNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9HdWlkXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JQ29ubmVjdGlvblwiO1xuZXhwb3J0ICogZnJvbSBcIi4vTGlzdFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vUGxhdGZvcm1FdmVudFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vUHJvbWlzZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vUXVldWVcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1Jhd1dlYnNvY2tldE1lc3NhZ2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1JpZmZQY21FbmNvZGVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TdHJlYW1cIjtcbmV4cG9ydCB7IFRyYW5zbGF0aW9uU3RhdHVzIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvVHJhbnNsYXRpb25TdGF0dXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0NodW5rZWRBcnJheUJ1ZmZlclN0cmVhbVwiO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FeHBvcnRzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5jb25zdCBjcmVhdGVHdWlkID0gKCkgPT4ge1xuICAgIGxldCBkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgY29uc3QgZ3VpZCA9IFwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLCAoYykgPT4ge1xuICAgICAgICBjb25zdCByID0gKGQgKyBNYXRoLnJhbmRvbSgpICogMTYpICUgMTYgfCAwO1xuICAgICAgICBkID0gTWF0aC5mbG9vcihkIC8gMTYpO1xuICAgICAgICByZXR1cm4gKGMgPT09IFwieFwiID8gciA6IChyICYgMHgzIHwgMHg4KSkudG9TdHJpbmcoMTYpO1xuICAgIH0pO1xuICAgIHJldHVybiBndWlkO1xufTtcbmNvbnN0IGNyZWF0ZU5vRGFzaEd1aWQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGNyZWF0ZUd1aWQoKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCItXCIsIFwiZ1wiKSwgXCJcIikudG9VcHBlckNhc2UoKTtcbn07XG5leHBvcnQgeyBjcmVhdGVHdWlkLCBjcmVhdGVOb0Rhc2hHdWlkIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUd1aWQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCB2YXIgQ29ubmVjdGlvblN0YXRlO1xuKGZ1bmN0aW9uIChDb25uZWN0aW9uU3RhdGUpIHtcbiAgICBDb25uZWN0aW9uU3RhdGVbQ29ubmVjdGlvblN0YXRlW1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgQ29ubmVjdGlvblN0YXRlW0Nvbm5lY3Rpb25TdGF0ZVtcIkNvbm5lY3RlZFwiXSA9IDFdID0gXCJDb25uZWN0ZWRcIjtcbiAgICBDb25uZWN0aW9uU3RhdGVbQ29ubmVjdGlvblN0YXRlW1wiQ29ubmVjdGluZ1wiXSA9IDJdID0gXCJDb25uZWN0aW5nXCI7XG4gICAgQ29ubmVjdGlvblN0YXRlW0Nvbm5lY3Rpb25TdGF0ZVtcIkRpc2Nvbm5lY3RlZFwiXSA9IDNdID0gXCJEaXNjb25uZWN0ZWRcIjtcbn0pKENvbm5lY3Rpb25TdGF0ZSB8fCAoQ29ubmVjdGlvblN0YXRlID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SUNvbm5lY3Rpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IE9iamVjdERpc3Bvc2VkRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuZXhwb3J0IGNsYXNzIExpc3Qge1xuICAgIGNvbnN0cnVjdG9yKGxpc3QpIHtcbiAgICAgICAgdGhpcy5wcml2U3Vic2NyaXB0aW9uSWRDb3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5wcml2QWRkU3Vic2NyaXB0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zID0ge307XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkU3Vic2NyaXB0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlUmVhc29uID0gbnVsbDtcbiAgICAgICAgdGhpcy5nZXQgPSAoaXRlbUluZGV4KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxpc3RbaXRlbUluZGV4XTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5maXJzdCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldCgwKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5sYXN0ID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoKCkgLSAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGQgPSAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0QXQodGhpcy5wcml2TGlzdC5sZW5ndGgsIGl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmluc2VydEF0ID0gKGluZGV4LCBpdGVtKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TGlzdC51bnNoaWZ0KGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggPT09IHRoaXMucHJpdkxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TGlzdC5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3Vic2NyaXB0aW9ucyh0aGlzLnByaXZBZGRTdWJzY3JpcHRpb25zKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZW1vdmVGaXJzdCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVBdCgwKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZW1vdmVMYXN0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUF0KHRoaXMubGVuZ3RoKCkgLSAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZW1vdmVBdCA9IChpbmRleCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbW92ZShpbmRleCwgMSlbMF07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVtb3ZlID0gKGluZGV4LCBjb3VudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRFbGVtZW50cyA9IHRoaXMucHJpdkxpc3Quc3BsaWNlKGluZGV4LCBjb3VudCk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWJzY3JpcHRpb25zKHRoaXMucHJpdlJlbW92ZVN1YnNjcmlwdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlbW92ZWRFbGVtZW50cztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbGVhciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSgwLCB0aGlzLmxlbmd0aCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxpc3QubGVuZ3RoO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uQWRkZWQgPSAoYWRkZWRDYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbklkID0gdGhpcy5wcml2U3Vic2NyaXB0aW9uSWRDb3VudGVyKys7XG4gICAgICAgICAgICB0aGlzLnByaXZBZGRTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSA9IGFkZGVkQ2FsbGJhY2s7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRldGFjaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2QWRkU3Vic2NyaXB0aW9uc1tzdWJzY3JpcHRpb25JZF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25SZW1vdmVkID0gKHJlbW92ZWRDYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbklkID0gdGhpcy5wcml2U3Vic2NyaXB0aW9uSWRDb3VudGVyKys7XG4gICAgICAgICAgICB0aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSA9IHJlbW92ZWRDYWxsYmFjaztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGV0YWNoOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRpc3Bvc2VkID0gKGRpc3Bvc2VkQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25JZCA9IHRoaXMucHJpdlN1YnNjcmlwdGlvbklkQ291bnRlcisrO1xuICAgICAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSA9IGRpc3Bvc2VkQ2FsbGJhY2s7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRldGFjaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2RGlzcG9zZWRTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5qb2luID0gKHNlcGVyYXRvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZMaXN0LmpvaW4oc2VwZXJhdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50b0FycmF5ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2xvbmVDb3B5ID0gQXJyYXkoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkxpc3QuZm9yRWFjaCgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xvbmVDb3B5LnB1c2godmFsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lQ29weTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hbnkgPSAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53aGVyZShjYWxsYmFjaykubGVuZ3RoKCkgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoKCkgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFsbCA9IChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndoZXJlKGNhbGxiYWNrKS5sZW5ndGgoKSA9PT0gdGhpcy5sZW5ndGgoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mb3JFYWNoID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLnByaXZMaXN0W2ldLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZWxlY3QgPSAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RMaXN0ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJpdkxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RMaXN0LnB1c2goY2FsbGJhY2sodGhpcy5wcml2TGlzdFtpXSwgaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0KHNlbGVjdExpc3QpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLndoZXJlID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRMaXN0ID0gbmV3IExpc3QoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wcml2TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayh0aGlzLnByaXZMaXN0W2ldLCBpKSkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZExpc3QuYWRkKHRoaXMucHJpdkxpc3RbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJlZExpc3Q7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub3JkZXJCeSA9IChjb21wYXJlRm4pID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICBjb25zdCBjbG9uZWRBcnJheSA9IHRoaXMudG9BcnJheSgpO1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJlZEFycmF5ID0gY2xvbmVkQXJyYXkuc29ydChjb21wYXJlRm4pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0KG9yZGVyZWRBcnJheSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub3JkZXJCeURlc2MgPSAoY29tcGFyZUZuKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JkZXJCeSgoYSwgYikgPT4gY29tcGFyZUZuKGIsIGEpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbG9uZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExpc3QodGhpcy50b0FycmF5KCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNvbmNhdCA9IChsaXN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0KHRoaXMucHJpdkxpc3QuY29uY2F0KGxpc3QudG9BcnJheSgpKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29uY2F0QXJyYXkgPSAoYXJyYXkpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExpc3QodGhpcy5wcml2TGlzdC5jb25jYXQoYXJyYXkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxpc3QgPT0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kaXNwb3NlID0gKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpc3Bvc2VSZWFzb24gPSByZWFzb247XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TGlzdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2QWRkU3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVtb3ZlU3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3Vic2NyaXB0aW9ucyh0aGlzLnByaXZEaXNwb3NlZFN1YnNjcmlwdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGlzcG9zZWQoKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3REaXNwb3NlZEVycm9yKFwiTGlzdFwiLCB0aGlzLnByaXZEaXNwb3NlUmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3Vic2NyaXB0aW9ucyA9IChzdWJzY3JpcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3Vic2NyaXB0aW9uSWQgaW4gc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnNbc3Vic2NyaXB0aW9uSWRdKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdkxpc3QgPSBbXTtcbiAgICAgICAgLy8gY29weSB0aGUgbGlzdCByYXRoZXIgdGhhbiB0YWtpbmcgYXMgaXMuXG4gICAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbGlzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkxpc3QucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGlzdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCB9IGZyb20gXCIuL0d1aWRcIjtcbmV4cG9ydCB2YXIgRXZlbnRUeXBlO1xuKGZ1bmN0aW9uIChFdmVudFR5cGUpIHtcbiAgICBFdmVudFR5cGVbRXZlbnRUeXBlW1wiRGVidWdcIl0gPSAwXSA9IFwiRGVidWdcIjtcbiAgICBFdmVudFR5cGVbRXZlbnRUeXBlW1wiSW5mb1wiXSA9IDFdID0gXCJJbmZvXCI7XG4gICAgRXZlbnRUeXBlW0V2ZW50VHlwZVtcIldhcm5pbmdcIl0gPSAyXSA9IFwiV2FybmluZ1wiO1xuICAgIEV2ZW50VHlwZVtFdmVudFR5cGVbXCJFcnJvclwiXSA9IDNdID0gXCJFcnJvclwiO1xufSkoRXZlbnRUeXBlIHx8IChFdmVudFR5cGUgPSB7fSkpO1xuZXhwb3J0IGNsYXNzIFBsYXRmb3JtRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50TmFtZSwgZXZlbnRUeXBlKSB7XG4gICAgICAgIHRoaXMucHJpdk5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgIHRoaXMucHJpdkV2ZW50SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdkV2ZW50VGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuICAgICAgICB0aGlzLnByaXZNZXRhZGF0YSA9IHt9O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk5hbWU7XG4gICAgfVxuICAgIGdldCBldmVudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRJZDtcbiAgICB9XG4gICAgZ2V0IGV2ZW50VGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV2ZW50VGltZTtcbiAgICB9XG4gICAgZ2V0IGV2ZW50VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV2ZW50VHlwZTtcbiAgICB9XG4gICAgZ2V0IG1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWV0YWRhdGE7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QbGF0Zm9ybUV2ZW50LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5leHBvcnQgdmFyIFByb21pc2VTdGF0ZTtcbihmdW5jdGlvbiAoUHJvbWlzZVN0YXRlKSB7XG4gICAgUHJvbWlzZVN0YXRlW1Byb21pc2VTdGF0ZVtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIFByb21pc2VTdGF0ZVtQcm9taXNlU3RhdGVbXCJSZXNvbHZlZFwiXSA9IDFdID0gXCJSZXNvbHZlZFwiO1xuICAgIFByb21pc2VTdGF0ZVtQcm9taXNlU3RhdGVbXCJSZWplY3RlZFwiXSA9IDJdID0gXCJSZWplY3RlZFwiO1xufSkoUHJvbWlzZVN0YXRlIHx8IChQcm9taXNlU3RhdGUgPSB7fSkpO1xuZXhwb3J0IGNsYXNzIFByb21pc2VSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKHByb21pc2VSZXN1bHRFdmVudFNvdXJjZSkge1xuICAgICAgICB0aGlzLnRocm93SWZFcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwcm9taXNlUmVzdWx0RXZlbnRTb3VyY2Uub24oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZJc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc0Vycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBpc0NvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzQ29tcGxldGVkO1xuICAgIH1cbiAgICBnZXQgaXNFcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzRXJyb3I7XG4gICAgfVxuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yO1xuICAgIH1cbiAgICBnZXQgcmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdWx0O1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFByb21pc2VSZXN1bHRFdmVudFNvdXJjZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2V0UmVzdWx0ID0gKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2T25TZXRSZXN1bHQocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRFcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2T25TZXRFcnJvcihlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub24gPSAob25TZXRSZXN1bHQsIG9uU2V0RXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdk9uU2V0UmVzdWx0ID0gb25TZXRSZXN1bHQ7XG4gICAgICAgICAgICB0aGlzLnByaXZPblNldEVycm9yID0gb25TZXRFcnJvcjtcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBQcm9taXNlSGVscGVyIHtcbn1cblByb21pc2VIZWxwZXIud2hlbkFsbCA9IChwcm9taXNlcykgPT4ge1xuICAgIGlmICghcHJvbWlzZXMgfHwgcHJvbWlzZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcInByb21pc2VzXCIpO1xuICAgIH1cbiAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgIGxldCBjb21wbGV0ZWRQcm9taXNlcyA9IDA7XG4gICAgY29uc3QgY2hlY2tGb3JDb21wbGV0aW9uID0gKCkgPT4ge1xuICAgICAgICBjb21wbGV0ZWRQcm9taXNlcysrO1xuICAgICAgICBpZiAoY29tcGxldGVkUHJvbWlzZXMgPT09IHByb21pc2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGVycm9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9ycy5qb2luKFwiLCBcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHByb21pc2Ugb2YgcHJvbWlzZXMpIHtcbiAgICAgICAgcHJvbWlzZS5vbigocikgPT4ge1xuICAgICAgICAgICAgY2hlY2tGb3JDb21wbGV0aW9uKCk7XG4gICAgICAgIH0sIChlKSA9PiB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChlKTtcbiAgICAgICAgICAgIGNoZWNrRm9yQ29tcGxldGlvbigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbn07XG5Qcm9taXNlSGVscGVyLmZyb21SZXN1bHQgPSAocmVzdWx0KSA9PiB7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbn07XG5Qcm9taXNlSGVscGVyLmZyb21FcnJvciA9IChlcnJvcikgPT4ge1xuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xufTtcbi8vIFRPRE86IHJlcGxhY2Ugd2l0aCBFUzYgcHJvbWlzZXNcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFByb21pc2Uge1xuICAgIGNvbnN0cnVjdG9yKHNpbmspIHtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U2luay5yZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29udGludWVXaXRoID0gKGNvbnRpbnVhdGlvbkNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWNvbnRpbnVhdGlvbkNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwiY29udGludWF0aW9uQ2FsbGJhY2tcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb250aW51YXRpb25EZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhpcy5wcml2U2luay5vbigocikgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRpbnVhdGlvblJlc3VsdCA9IGNvbnRpbnVhdGlvbkNhbGxiYWNrKHRoaXMucHJpdlNpbmsucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVzb2x2ZShjb250aW51YXRpb25SZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb25EZWZlcnJhbC5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGludWF0aW9uUmVzdWx0ID0gY29udGludWF0aW9uQ2FsbGJhY2sodGhpcy5wcml2U2luay5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb25EZWZlcnJhbC5yZXNvbHZlKGNvbnRpbnVhdGlvblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvbkRlZmVycmFsLnJlamVjdChgJ0Vycm9yIGhhbmRsZXIgZm9yIGVycm9yICR7ZXJyb3J9IHRocmV3IGVycm9yICR7ZX0nYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY29udGludWF0aW9uRGVmZXJyYWwucHJvbWlzZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aCA9IChjb250aW51YXRpb25DYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgaWYgKCFjb250aW51YXRpb25DYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImNvbnRpbnVhdGlvbkNhbGxiYWNrXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29udGludWF0aW9uRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlNpbmsub24oKHIpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250aW51YXRpb25SZXN1bHQgPSBjb250aW51YXRpb25DYWxsYmFjayhyKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVzb2x2ZShjb250aW51YXRpb25SZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb25EZWZlcnJhbC5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRpbnVhdGlvbkRlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jb250aW51ZVdpdGhQcm9taXNlID0gKGNvbnRpbnVhdGlvbkNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWNvbnRpbnVhdGlvbkNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwiY29udGludWF0aW9uQ2FsbGJhY2tcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb250aW51YXRpb25EZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhpcy5wcml2U2luay5vbigocikgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRpbnVhdGlvblByb21pc2UgPSBjb250aW51YXRpb25DYWxsYmFjayh0aGlzLnByaXZTaW5rLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGludWF0aW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ0NvbnRpbnVhdGlvbiBjYWxsYmFjayBkaWQgbm90IHJldHVybiBwcm9taXNlJ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb25Qcm9taXNlLm9uKChjb250aW51YXRpb25SZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvbkRlZmVycmFsLnJlc29sdmUoY29udGludWF0aW9uUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvbkRlZmVycmFsLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvbkRlZmVycmFsLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250aW51YXRpb25Qcm9taXNlID0gY29udGludWF0aW9uQ2FsbGJhY2sodGhpcy5wcml2U2luay5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRpbnVhdGlvblByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRpbnVhdGlvbiBjYWxsYmFjayBkaWQgbm90IHJldHVybiBwcm9taXNlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvblByb21pc2Uub24oKGNvbnRpbnVhdGlvblJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVzb2x2ZShjb250aW51YXRpb25SZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9LCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVqZWN0KGAnRXJyb3IgaGFuZGxlciBmb3IgZXJyb3IgJHtlcnJvcn0gdGhyZXcgZXJyb3IgJHtlfSdgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb250aW51YXRpb25EZWZlcnJhbC5wcm9taXNlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25TdWNjZXNzQ29udGludWVXaXRoUHJvbWlzZSA9IChjb250aW51YXRpb25DYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgaWYgKCFjb250aW51YXRpb25DYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImNvbnRpbnVhdGlvbkNhbGxiYWNrXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29udGludWF0aW9uRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlNpbmsub24oKHIpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250aW51YXRpb25Qcm9taXNlID0gY29udGludWF0aW9uQ2FsbGJhY2socik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGludWF0aW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udGludWF0aW9uIGNhbGxiYWNrIGRpZCBub3QgcmV0dXJuIHByb21pc2VcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uUHJvbWlzZS5vbigoY29udGludWF0aW9uUmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb25EZWZlcnJhbC5yZXNvbHZlKGNvbnRpbnVhdGlvblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb25EZWZlcnJhbC5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb25EZWZlcnJhbC5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRpbnVhdGlvbkRlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbiA9IChzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGlmICghc3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwic3VjY2Vzc0NhbGxiYWNrXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwiZXJyb3JDYWxsYmFja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJpdlNpbmsub24oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZpbmFsbHkgPSAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJjYWxsYmFja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrV3JhcHBlciA9IChfKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbihjYWxsYmFja1dyYXBwZXIsIGNhbGxiYWNrV3JhcHBlcik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdlNpbmsgPSBzaW5rO1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIERlZmVycmVkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTaW5rLnN0YXRlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByb21pc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvbWlzZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2U2luay5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWplY3QgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdlNpbmsucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZTaW5rID0gbmV3IFNpbmsoKTtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZSA9IG5ldyBQcm9taXNlKHRoaXMucHJpdlNpbmspO1xuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFNpbmsge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByaXZTdGF0ZSA9IFByb21pc2VTdGF0ZS5Ob25lO1xuICAgICAgICB0aGlzLnByaXZQcm9taXNlUmVzdWx0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZVJlc3VsdEV2ZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NIYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZFcnJvckhhbmRsZXJzID0gW107XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZTdGF0ZSAhPT0gUHJvbWlzZVN0YXRlLk5vbmUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInQ2Fubm90IHJlc29sdmUgYSBjb21wbGV0ZWQgcHJvbWlzZSdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZTdGF0ZSA9IFByb21pc2VTdGF0ZS5SZXNvbHZlZDtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb21pc2VSZXN1bHRFdmVudHMuc2V0UmVzdWx0KHJlc3VsdCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJpdlN1Y2Nlc3NIYW5kbGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQsIHRoaXMucHJpdlN1Y2Nlc3NIYW5kbGVyc1tpXSwgdGhpcy5wcml2RXJyb3JIYW5kbGVyc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRldGFjaEhhbmRsZXJzKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVqZWN0ID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2U3RhdGUgIT09IFByb21pc2VTdGF0ZS5Ob25lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ0Nhbm5vdCByZWplY3QgYSBjb21wbGV0ZWQgcHJvbWlzZSdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZTdGF0ZSA9IFByb21pc2VTdGF0ZS5SZWplY3RlZDtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb21pc2VSZXN1bHRFdmVudHMuc2V0RXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlcnJvckhhbmRsZXIgb2YgdGhpcy5wcml2RXJyb3JIYW5kbGVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUVycm9yQ2FsbGJhY2soZXJyb3IsIGVycm9ySGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRldGFjaEhhbmRsZXJzKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub24gPSAoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3VjY2Vzc0NhbGxiYWNrID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2sgPSAocikgPT4geyByZXR1cm47IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2U3RhdGUgPT09IFByb21pc2VTdGF0ZS5Ob25lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0hhbmRsZXJzLnB1c2goc3VjY2Vzc0NhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZFcnJvckhhbmRsZXJzLnB1c2goZXJyb3JDYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2U3RhdGUgPT09IFByb21pc2VTdGF0ZS5SZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVTdWNjZXNzQ2FsbGJhY2sodGhpcy5wcml2UHJvbWlzZVJlc3VsdC5yZXN1bHQsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucHJpdlN0YXRlID09PSBQcm9taXNlU3RhdGUuUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlRXJyb3JDYWxsYmFjayh0aGlzLnByaXZQcm9taXNlUmVzdWx0LmVycm9yLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhY2hIYW5kbGVycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmV4ZWN1dGVTdWNjZXNzQ2FsbGJhY2sgPSAocmVzdWx0LCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUVycm9yQ2FsbGJhY2soYCdVbmhhbmRsZWQgY2FsbGJhY2sgZXJyb3I6ICR7ZX0nYCwgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZXhlY3V0ZUVycm9yQ2FsbGJhY2sgPSAoZXJyb3IsIGVycm9yQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayhlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJ1VuaGFuZGxlZCBjYWxsYmFjayBlcnJvcjogJHtlfS4gSW5uZXJFcnJvcjogJHtlcnJvcn0nYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnVW5oYW5kbGVkIGVycm9yOiAke2Vycm9yfSdgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZXRhY2hIYW5kbGVycyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdkVycm9ySGFuZGxlcnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NIYW5kbGVycyA9IFtdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZQcm9taXNlUmVzdWx0RXZlbnRzID0gbmV3IFByb21pc2VSZXN1bHRFdmVudFNvdXJjZSgpO1xuICAgICAgICB0aGlzLnByaXZQcm9taXNlUmVzdWx0ID0gbmV3IFByb21pc2VSZXN1bHQodGhpcy5wcml2UHJvbWlzZVJlc3VsdEV2ZW50cyk7XG4gICAgfVxuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN0YXRlO1xuICAgIH1cbiAgICBnZXQgcmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvbWlzZVJlc3VsdDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb21pc2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEludmFsaWRPcGVyYXRpb25FcnJvciwgT2JqZWN0RGlzcG9zZWRFcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQgeyBMaXN0IH0gZnJvbSBcIi4vTGlzdFwiO1xuaW1wb3J0IHsgRGVmZXJyZWQsIFByb21pc2VIZWxwZXIgfSBmcm9tIFwiLi9Qcm9taXNlXCI7XG52YXIgU3Vic2NyaWJlclR5cGU7XG4oZnVuY3Rpb24gKFN1YnNjcmliZXJUeXBlKSB7XG4gICAgU3Vic2NyaWJlclR5cGVbU3Vic2NyaWJlclR5cGVbXCJEZXF1ZXVlXCJdID0gMF0gPSBcIkRlcXVldWVcIjtcbiAgICBTdWJzY3JpYmVyVHlwZVtTdWJzY3JpYmVyVHlwZVtcIlBlZWtcIl0gPSAxXSA9IFwiUGVla1wiO1xufSkoU3Vic2NyaWJlclR5cGUgfHwgKFN1YnNjcmliZXJUeXBlID0ge30pKTtcbmV4cG9ydCBjbGFzcyBRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IobGlzdCkge1xuICAgICAgICB0aGlzLnByaXZQcm9taXNlU3RvcmUgPSBuZXcgTGlzdCgpO1xuICAgICAgICB0aGlzLnByaXZJc0RyYWluSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlUmVhc29uID0gbnVsbDtcbiAgICAgICAgdGhpcy5lbnF1ZXVlID0gKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuZW5xdWV1ZUZyb21Qcm9taXNlKFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdChpdGVtKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZW5xdWV1ZUZyb21Qcm9taXNlID0gKHByb21pc2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb21pc2VTdG9yZS5hZGQocHJvbWlzZSk7XG4gICAgICAgICAgICBwcm9taXNlLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLnByaXZQcm9taXNlU3RvcmUubGVuZ3RoKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2UHJvbWlzZVN0b3JlLmZpcnN0KCkucmVzdWx0KCkuaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMucHJpdlByb21pc2VTdG9yZS5yZW1vdmVGaXJzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLnJlc3VsdCgpLmlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMaXN0LmFkZChwLnJlc3VsdCgpLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBMb2cgYXMgd2FybmluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlcXVldWUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlKCk7XG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZFN1YnNjcmliZXIgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZTdWJzY3JpYmVycykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzLmFkZCh7IGRlZmVycmFsOiBkZWZlcnJlZFN1YnNjcmliZXIsIHR5cGU6IFN1YnNjcmliZXJUeXBlLkRlcXVldWUgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFpbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkU3Vic2NyaWJlci5wcm9taXNlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucGVlayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkU3Vic2NyaWJlciA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgY29uc3Qgc3VicyA9IHRoaXMucHJpdlN1YnNjcmliZXJzO1xuICAgICAgICAgICAgaWYgKHN1YnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWJzY3JpYmVycy5hZGQoeyBkZWZlcnJhbDogZGVmZXJyZWRTdWJzY3JpYmVyLCB0eXBlOiBTdWJzY3JpYmVyVHlwZS5QZWVrIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhaW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZFN1YnNjcmliZXIucHJvbWlzZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxlbmd0aCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZMaXN0Lmxlbmd0aCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U3Vic2NyaWJlcnMgPT0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kcmFpbkFuZERpc3Bvc2UgPSAocGVuZGluZ0l0ZW1Qcm9jZXNzb3IsIHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQoKSAmJiAhdGhpcy5wcml2SXNEaXNwb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEaXNwb3NlUmVhc29uID0gcmVhc29uO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJzID0gdGhpcy5wcml2U3Vic2NyaWJlcnM7XG4gICAgICAgICAgICAgICAgaWYgKHN1YnMpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN1YnMubGVuZ3RoKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpYmVyID0gc3Vicy5yZW1vdmVGaXJzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogdGhpcyBuZWVkcyB3b3JrIChSZXNvbHZlKG51bGwpIGluc3RlYWQ/KS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZGVmZXJyYWwucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3Vic2NyaWJlci5kZWZlcnJhbC5yZWplY3QoXCJEaXNwb3NlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBub3RlOiB0aGlzIGJsb2NrIGFzc3VtZXMgY29vcGVyYXRpdmUgbXVsdGl0YXNraW5nLCBpLmUuLFxuICAgICAgICAgICAgICAgICAgICAvLyBiZXR3ZWVuIHRoZSBpZi1zdGF0ZW1lbnQgYW5kIHRoZSBhc3NpZ25tZW50IHRoZXJlIGFyZSBub1xuICAgICAgICAgICAgICAgICAgICAvLyB0aHJlYWQgc3dpdGNoZXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlYXNvbiBpcyB0aGF0IGJldHdlZW4gdGhlIGluaXRpYWwgY29uc3QgPSB0aGlzLjsgYW5kIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9pbnQgdGhlcmUgaXMgdGhlIGRlcnJhbC5yZXNvbHZlKCkgb3BlcmF0aW9uIHRoYXQgbWlnaHQgaGF2ZVxuICAgICAgICAgICAgICAgICAgICAvLyBjYXVzZWQgcmVjdXJzaXZlIGNhbGxzIHRvIHRoZSBRdWV1ZSwgZXNwZWNpYWxseSwgY2FsbGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBEaXNwb3NlKCkgb24gdGhlIHF1ZXVlIGFscmVkeSAod2hpY2ggd291bGQgcmVzZXQgdGhlIHZhclxuICAgICAgICAgICAgICAgICAgICAvLyBoZXJlIHRvIG51bGwhKS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhhdCBzaG91bGQgZ2VuZXJhbGx5IGhvbGQgdHJ1ZSBmb3IgamF2YXNjcmlwdC4uLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2U3Vic2NyaWJlcnMgPT09IHN1YnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gc3VicztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRldGFjaGFibGUgb2YgdGhpcy5wcml2RGV0YWNoYWJsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWNoYWJsZS5kZXRhY2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlByb21pc2VTdG9yZS5sZW5ndGgoKSA+IDAgJiYgcGVuZGluZ0l0ZW1Qcm9jZXNzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aGVuQWxsKHRoaXMucHJpdlByb21pc2VTdG9yZS50b0FycmF5KCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29udGludWVXaXRoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkxpc3QuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nSXRlbVByb2Nlc3NvcihpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TGlzdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWJzY3JpYmVycyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkxpc3QgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21SZXN1bHQodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGlzcG9zZSA9IChyZWFzb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMuZHJhaW5BbmREaXNwb3NlKG51bGwsIHJlYXNvbik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZHJhaW4gPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzRHJhaW5JblByb2dyZXNzICYmICF0aGlzLnByaXZJc0Rpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRHJhaW5JblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJzID0gdGhpcy5wcml2U3Vic2NyaWJlcnM7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdHMgPSB0aGlzLnByaXZMaXN0O1xuICAgICAgICAgICAgICAgIGlmIChzdWJzICYmIGxpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChsaXN0cy5sZW5ndGgoKSA+IDAgJiYgc3Vicy5sZW5ndGgoKSA+IDAgJiYgIXRoaXMucHJpdklzRGlzcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpYmVyID0gc3Vicy5yZW1vdmVGaXJzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIudHlwZSA9PT0gU3Vic2NyaWJlclR5cGUuUGVlaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZGVmZXJyYWwucmVzb2x2ZShsaXN0cy5maXJzdCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlcXVldWVkSXRlbSA9IGxpc3RzLnJlbW92ZUZpcnN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5kZWZlcnJhbC5yZXNvbHZlKGRlcXVldWVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gbm90ZTogdGhpcyBibG9jayBhc3N1bWVzIGNvb3BlcmF0aXZlIG11bHRpdGFza2luZywgaS5lLixcbiAgICAgICAgICAgICAgICAgICAgLy8gYmV0d2VlbiB0aGUgaWYtc3RhdGVtZW50IGFuZCB0aGUgYXNzaWdubWVudCB0aGVyZSBhcmUgbm9cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhyZWFkIHN3aXRjaGVzLlxuICAgICAgICAgICAgICAgICAgICAvLyBSZWFzb24gaXMgdGhhdCBiZXR3ZWVuIHRoZSBpbml0aWFsIGNvbnN0ID0gdGhpcy47IGFuZCB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHBvaW50IHRoZXJlIGlzIHRoZSBkZXJyYWwucmVzb2x2ZSgpIG9wZXJhdGlvbiB0aGF0IG1pZ2h0IGhhdmVcbiAgICAgICAgICAgICAgICAgICAgLy8gY2F1c2VkIHJlY3Vyc2l2ZSBjYWxscyB0byB0aGUgUXVldWUsIGVzcGVjaWFsbHksIGNhbGxpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcG9zZSgpIG9uIHRoZSBxdWV1ZSBhbHJlZHkgKHdoaWNoIHdvdWxkIHJlc2V0IHRoZSB2YXJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGVyZSB0byBudWxsISkuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoYXQgc2hvdWxkIGdlbmVyYWxseSBob2xkIHRydWUgZm9yIGphdmFzY3JpcHQuLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlN1YnNjcmliZXJzID09PSBzdWJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWJzY3JpYmVycyA9IHN1YnM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gbm90ZTogdGhpcyBibG9jayBhc3N1bWVzIGNvb3BlcmF0aXZlIG11bHRpdGFza2luZywgaS5lLixcbiAgICAgICAgICAgICAgICAgICAgLy8gYmV0d2VlbiB0aGUgaWYtc3RhdGVtZW50IGFuZCB0aGUgYXNzaWdubWVudCB0aGVyZSBhcmUgbm9cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhyZWFkIHN3aXRjaGVzLlxuICAgICAgICAgICAgICAgICAgICAvLyBSZWFzb24gaXMgdGhhdCBiZXR3ZWVuIHRoZSBpbml0aWFsIGNvbnN0ID0gdGhpcy47IGFuZCB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHBvaW50IHRoZXJlIGlzIHRoZSBkZXJyYWwucmVzb2x2ZSgpIG9wZXJhdGlvbiB0aGF0IG1pZ2h0IGhhdmVcbiAgICAgICAgICAgICAgICAgICAgLy8gY2F1c2VkIHJlY3Vyc2l2ZSBjYWxscyB0byB0aGUgUXVldWUsIGVzcGVjaWFsbHksIGNhbGxpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcG9zZSgpIG9uIHRoZSBxdWV1ZSBhbHJlZHkgKHdoaWNoIHdvdWxkIHJlc2V0IHRoZSB2YXJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGVyZSB0byBudWxsISkuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoYXQgc2hvdWxkIGdlbmVyYWxseSBob2xkIHRydWUgZm9yIGphdmFzY3JpcHQuLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdkxpc3QgPT09IGxpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMaXN0ID0gbGlzdHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNEcmFpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGlzcG9zZWQoKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlUmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IodGhpcy5wcml2RGlzcG9zZVJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3REaXNwb3NlZEVycm9yKFwiUXVldWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnByaXZJc0Rpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJRdWV1ZSBkaXNwb3NpbmdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdkxpc3QgPSBsaXN0ID8gbGlzdCA6IG5ldyBMaXN0KCk7XG4gICAgICAgIHRoaXMucHJpdkRldGFjaGFibGVzID0gW107XG4gICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gbmV3IExpc3QoKTtcbiAgICAgICAgdGhpcy5wcml2RGV0YWNoYWJsZXMucHVzaCh0aGlzLnByaXZMaXN0Lm9uQWRkZWQodGhpcy5kcmFpbikpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UXVldWUuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbk1lc3NhZ2VcIjtcbmltcG9ydCB7IEFyZ3VtZW50TnVsbEVycm9yLCBJbnZhbGlkT3BlcmF0aW9uRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCB9IGZyb20gXCIuL0d1aWRcIjtcbmV4cG9ydCBjbGFzcyBSYXdXZWJzb2NrZXRNZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlVHlwZSwgcGF5bG9hZCwgaWQpIHtcbiAgICAgICAgdGhpcy5wcml2UGF5bG9hZCA9IG51bGw7XG4gICAgICAgIGlmICghcGF5bG9hZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwicGF5bG9hZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLkJpbmFyeSAmJiAhKHBheWxvYWQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJQYXlsb2FkIG11c3QgYmUgQXJyYXlCdWZmZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0ICYmICEodHlwZW9mIChwYXlsb2FkKSA9PT0gXCJzdHJpbmdcIikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJQYXlsb2FkIG11c3QgYmUgYSBzdHJpbmdcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2TWVzc2FnZVR5cGUgPSBtZXNzYWdlVHlwZTtcbiAgICAgICAgdGhpcy5wcml2UGF5bG9hZCA9IHBheWxvYWQ7XG4gICAgICAgIHRoaXMucHJpdklkID0gaWQgPyBpZCA6IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWVzc2FnZVR5cGU7XG4gICAgfVxuICAgIGdldCBwYXlsb2FkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGF5bG9hZDtcbiAgICB9XG4gICAgZ2V0IHRleHRDb250ZW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2TWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLkJpbmFyeSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIk5vdCBzdXBwb3J0ZWQgZm9yIGJpbmFyeSBtZXNzYWdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXlsb2FkO1xuICAgIH1cbiAgICBnZXQgYmluYXJ5Q29udGVudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdk1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiTm90IHN1cHBvcnRlZCBmb3IgdGV4dCBtZXNzYWdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXlsb2FkO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJhd1dlYnNvY2tldE1lc3NhZ2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCBjbGFzcyBSaWZmUGNtRW5jb2RlciB7XG4gICAgY29uc3RydWN0b3IoYWN0dWFsU2FtcGxlUmF0ZSwgZGVzaXJlZFNhbXBsZVJhdGUpIHtcbiAgICAgICAgdGhpcy5wcml2Q2hhbm5lbENvdW50ID0gMTtcbiAgICAgICAgdGhpcy5lbmNvZGUgPSAobmVlZEhlYWRlciwgYWN0dWFsQXVkaW9GcmFtZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXVkaW9GcmFtZSA9IHRoaXMuZG93blNhbXBsZUF1ZGlvRnJhbWUoYWN0dWFsQXVkaW9GcmFtZSwgdGhpcy5wcml2QWN0dWFsU2FtcGxlUmF0ZSwgdGhpcy5wcml2RGVzaXJlZFNhbXBsZVJhdGUpO1xuICAgICAgICAgICAgaWYgKCFhdWRpb0ZyYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhdWRpb0xlbmd0aCA9IGF1ZGlvRnJhbWUubGVuZ3RoICogMjtcbiAgICAgICAgICAgIGlmICghbmVlZEhlYWRlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihhdWRpb0xlbmd0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRUbzE2Qml0UENNKHZpZXcsIDAsIGF1ZGlvRnJhbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNDQgKyBhdWRpb0xlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBiaXRzUGVyU2FtcGxlID0gMTY7XG4gICAgICAgICAgICBjb25zdCBieXRlc1BlclNhbXBsZSA9IGJpdHNQZXJTYW1wbGUgLyA4O1xuICAgICAgICAgICAgLy8gV2UgZG9udCBrbm93IGFoZWFkIG9mIHRpbWUgYWJvdXQgdGhlIGxlbmd0aCBvZiBhdWRpbyB0byBzdHJlYW0uIFNvIHNldCB0byAwLlxuICAgICAgICAgICAgY29uc3QgZmlsZUxlbmd0aCA9IDA7XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRhVmlld1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgICAgICAgICAgLyogUklGRiBpZGVudGlmaWVyICovXG4gICAgICAgICAgICB0aGlzLnNldFN0cmluZyh2aWV3LCAwLCBcIlJJRkZcIik7XG4gICAgICAgICAgICAvKiBmaWxlIGxlbmd0aCAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoNCwgZmlsZUxlbmd0aCwgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBSSUZGIHR5cGUgJiBGb3JtYXQgKi9cbiAgICAgICAgICAgIHRoaXMuc2V0U3RyaW5nKHZpZXcsIDgsIFwiV0FWRWZtdCBcIik7XG4gICAgICAgICAgICAvKiBmb3JtYXQgY2h1bmsgbGVuZ3RoICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMigxNiwgMTYsIHRydWUpO1xuICAgICAgICAgICAgLyogc2FtcGxlIGZvcm1hdCAocmF3KSAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoMjAsIDEsIHRydWUpO1xuICAgICAgICAgICAgLyogY2hhbm5lbCBjb3VudCAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoMjIsIHRoaXMucHJpdkNoYW5uZWxDb3VudCwgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBzYW1wbGUgcmF0ZSAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoMjQsIHRoaXMucHJpdkRlc2lyZWRTYW1wbGVSYXRlLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIGJ5dGUgcmF0ZSAoc2FtcGxlIHJhdGUgKiBibG9jayBhbGlnbikgKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDI4LCB0aGlzLnByaXZEZXNpcmVkU2FtcGxlUmF0ZSAqIHRoaXMucHJpdkNoYW5uZWxDb3VudCAqIGJ5dGVzUGVyU2FtcGxlLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIGJsb2NrIGFsaWduIChjaGFubmVsIGNvdW50ICogYnl0ZXMgcGVyIHNhbXBsZSkgKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDE2KDMyLCB0aGlzLnByaXZDaGFubmVsQ291bnQgKiBieXRlc1BlclNhbXBsZSwgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBiaXRzIHBlciBzYW1wbGUgKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDE2KDM0LCBiaXRzUGVyU2FtcGxlLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIGRhdGEgY2h1bmsgaWRlbnRpZmllciAqL1xuICAgICAgICAgICAgdGhpcy5zZXRTdHJpbmcodmlldywgMzYsIFwiZGF0YVwiKTtcbiAgICAgICAgICAgIC8qIGRhdGEgY2h1bmsgbGVuZ3RoICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMig0MCwgZmlsZUxlbmd0aCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmZsb2F0VG8xNkJpdFBDTSh2aWV3LCA0NCwgYXVkaW9GcmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFN0cmluZyA9ICh2aWV3LCBvZmZzZXQsIHN0cikgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCArIGksIHN0ci5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mbG9hdFRvMTZCaXRQQ00gPSAodmlldywgb2Zmc2V0LCBpbnB1dCkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKywgb2Zmc2V0ICs9IDIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKDEsIGlucHV0W2ldKSk7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRJbnQxNihvZmZzZXQsIHMgPCAwID8gcyAqIDB4ODAwMCA6IHMgKiAweDdGRkYsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRvd25TYW1wbGVBdWRpb0ZyYW1lID0gKHNyY0ZyYW1lLCBzcmNSYXRlLCBkc3RSYXRlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZHN0UmF0ZSA9PT0gc3JjUmF0ZSB8fCBkc3RSYXRlID4gc3JjUmF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzcmNGcmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJhdGlvID0gc3JjUmF0ZSAvIGRzdFJhdGU7XG4gICAgICAgICAgICBjb25zdCBkc3RMZW5ndGggPSBNYXRoLnJvdW5kKHNyY0ZyYW1lLmxlbmd0aCAvIHJhdGlvKTtcbiAgICAgICAgICAgIGNvbnN0IGRzdEZyYW1lID0gbmV3IEZsb2F0MzJBcnJheShkc3RMZW5ndGgpO1xuICAgICAgICAgICAgbGV0IHNyY09mZnNldCA9IDA7XG4gICAgICAgICAgICBsZXQgZHN0T2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChkc3RPZmZzZXQgPCBkc3RMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0U3JjT2Zmc2V0ID0gTWF0aC5yb3VuZCgoZHN0T2Zmc2V0ICsgMSkgKiByYXRpbyk7XG4gICAgICAgICAgICAgICAgbGV0IGFjY3VtID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChzcmNPZmZzZXQgPCBuZXh0U3JjT2Zmc2V0ICYmIHNyY09mZnNldCA8IHNyY0ZyYW1lLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhY2N1bSArPSBzcmNGcmFtZVtzcmNPZmZzZXQrK107XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRzdEZyYW1lW2RzdE9mZnNldCsrXSA9IGFjY3VtIC8gY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZHN0RnJhbWU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdkFjdHVhbFNhbXBsZVJhdGUgPSBhY3R1YWxTYW1wbGVSYXRlO1xuICAgICAgICB0aGlzLnByaXZEZXNpcmVkU2FtcGxlUmF0ZSA9IGRlc2lyZWRTYW1wbGVSYXRlO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmlmZlBjbUVuY29kZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEludmFsaWRPcGVyYXRpb25FcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkIH0gZnJvbSBcIi4vR3VpZFwiO1xuaW1wb3J0IHsgUXVldWUgfSBmcm9tIFwiLi9RdWV1ZVwiO1xuZXhwb3J0IGNsYXNzIFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3Ioc3RyZWFtSWQpIHtcbiAgICAgICAgdGhpcy5wcml2UmVhZGVySWRDb3VudGVyID0gMTtcbiAgICAgICAgdGhpcy5wcml2SXNFbmRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdldFJlYWRlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlcklkID0gdGhpcy5wcml2UmVhZGVySWRDb3VudGVyO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVhZGVySWRDb3VudGVyKys7XG4gICAgICAgICAgICBjb25zdCByZWFkZXJRdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudExlbmd0aCA9IHRoaXMucHJpdlN0cmVhbWJ1ZmZlci5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLnByaXZSZWFkZXJRdWV1ZXNbcmVhZGVySWRdID0gcmVhZGVyUXVldWU7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlYWRlclF1ZXVlLmVucXVldWUodGhpcy5wcml2U3RyZWFtYnVmZmVyW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyZWFtUmVhZGVyKHRoaXMucHJpdklkLCByZWFkZXJRdWV1ZSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnByaXZSZWFkZXJRdWV1ZXNbcmVhZGVySWRdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGhyb3dJZkNsb3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZJc0VuZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIlN0cmVhbSBjbG9zZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdklkID0gc3RyZWFtSWQgPyBzdHJlYW1JZCA6IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtYnVmZmVyID0gW107XG4gICAgICAgIHRoaXMucHJpdlJlYWRlclF1ZXVlcyA9IHt9O1xuICAgIH1cbiAgICBnZXQgaXNDbG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0VuZGVkO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2SXNFbmRlZCkge1xuICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgaXNFbmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnByaXZJc0VuZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cml0ZVN0cmVhbUNodW5rKHN0cmVhbUNodW5rKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkNsb3NlZCgpO1xuICAgICAgICB0aGlzLnByaXZTdHJlYW1idWZmZXIucHVzaChzdHJlYW1DaHVuayk7XG4gICAgICAgIGZvciAoY29uc3QgcmVhZGVySWQgaW4gdGhpcy5wcml2UmVhZGVyUXVldWVzKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdlJlYWRlclF1ZXVlc1tyZWFkZXJJZF0uaXNEaXNwb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVhZGVyUXVldWVzW3JlYWRlcklkXS5lbnF1ZXVlKHN0cmVhbUNodW5rKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFN0cmVhbVJlYWRlciB7XG4gICAgY29uc3RydWN0b3Ioc3RyZWFtSWQsIHJlYWRlclF1ZXVlLCBvbkNsb3NlKSB7XG4gICAgICAgIHRoaXMucHJpdklzQ2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVhZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIlN0cmVhbVJlYWRlciBjbG9zZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhZGVyUXVldWVcbiAgICAgICAgICAgICAgICAuZGVxdWV1ZSgpXG4gICAgICAgICAgICAgICAgLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aCgoc3RyZWFtQ2h1bmspID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtQ2h1bmsgPT09IHVuZGVmaW5lZCB8fCBzdHJlYW1DaHVuay5pc0VuZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWFkZXJRdWV1ZS5kaXNwb3NlKFwiRW5kIG9mIHN0cmVhbSByZWFjaGVkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtQ2h1bms7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNDbG9zZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc0Nsb3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVhZGVyUXVldWUuZGlzcG9zZShcIlN0cmVhbVJlYWRlciBjbG9zZWRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2T25DbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZSZWFkZXJRdWV1ZSA9IHJlYWRlclF1ZXVlO1xuICAgICAgICB0aGlzLnByaXZPbkNsb3NlID0gb25DbG9zZTtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtSWQgPSBzdHJlYW1JZDtcbiAgICB9XG4gICAgZ2V0IGlzQ2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNDbG9zZWQ7XG4gICAgfVxuICAgIGdldCBzdHJlYW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN0cmVhbUlkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RyZWFtLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgY29udGVudHMgb2YgcmVjZWl2ZWQgbWVzc2FnZS9ldmVudHMuXG4gKiBAY2xhc3MgQWN0aXZpdHlSZWNlaXZlZEV2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgQWN0aXZpdHlSZWNlaXZlZEV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge2FueX0gYWN0aXZpdHkgLSBUaGUgYWN0aXZpdHkuLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFjdGl2aXR5LCBhdWRpb1N0cmVhbSkge1xuICAgICAgICB0aGlzLnByaXZBY3Rpdml0eSA9IGFjdGl2aXR5O1xuICAgICAgICB0aGlzLnByaXZBdWRpb1N0cmVhbSA9IGF1ZGlvU3RyZWFtO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSByZWNlaXZlZCBhY3Rpdml0eVxuICAgICAqIEBtZW1iZXIgQWN0aXZpdHlSZWNlaXZlZEV2ZW50QXJncy5wcm90b3R5cGUuYWN0aXZpdHlcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge2FueX0gdGhlIHJlY2VpdmVkIGFjdGl2aXR5LlxuICAgICAqL1xuICAgIGdldCBhY3Rpdml0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFjdGl2aXR5O1xuICAgIH1cbiAgICBnZXQgYXVkaW9TdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb1N0cmVhbTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFjdGl2aXR5UmVjZWl2ZWRFdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEZpbGVBdWRpb1NvdXJjZSwgTWljQXVkaW9Tb3VyY2UsIFBjbVJlY29yZGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IEF1ZGlvSW5wdXRTdHJlYW0sIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2sgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgYnVmZmVyU2l6ZSwgUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsIH0gZnJvbSBcIi4vQXVkaW9JbnB1dFN0cmVhbVwiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb24gdXNlZCBmb3Igc3BlY2lmeWluZyB3aGF0IHR5cGUgb2YgaW5wdXQgdG8gdXNlIChtaWNyb3Bob25lLCBmaWxlLCBzdHJlYW0pLlxuICogQGNsYXNzIEF1ZGlvQ29uZmlnXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb0NvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBBdWRpb0NvbmZpZyBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBkZWZhdWx0IG1pY3JvcGhvbmUgb24gdGhlIHN5c3RlbS5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21EZWZhdWx0TWljcm9waG9uZUlucHV0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbmZpZ30gVGhlIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbURlZmF1bHRNaWNyb3Bob25lSW5wdXQoKSB7XG4gICAgICAgIGNvbnN0IHBjbVJlY29yZGVyID0gbmV3IFBjbVJlY29yZGVyKCk7XG4gICAgICAgIHJldHVybiBuZXcgQXVkaW9Db25maWdJbXBsKG5ldyBNaWNBdWRpb1NvdXJjZShwY21SZWNvcmRlciwgYnVmZmVyU2l6ZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIEF1ZGlvQ29uZmlnIG9iamVjdCByZXByZXNlbnRpbmcgYSBtaWNyb3Bob25lIHdpdGggdGhlIHNwZWNpZmllZCBkZXZpY2UgSUQuXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tTWljcm9waG9uZUlucHV0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgdW5kZWZpbmVkfSBkZXZpY2VJZCAtIFNwZWNpZmllcyB0aGUgZGV2aWNlIElEIG9mIHRoZSBtaWNyb3Bob25lIHRvIGJlIHVzZWQuXG4gICAgICogICAgICAgIERlZmF1bHQgbWljcm9waG9uZSBpcyB1c2VkIHRoZSB2YWx1ZSBpcyBvbWl0dGVkLlxuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbmZpZ30gVGhlIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbU1pY3JvcGhvbmVJbnB1dChkZXZpY2VJZCkge1xuICAgICAgICBjb25zdCBwY21SZWNvcmRlciA9IG5ldyBQY21SZWNvcmRlcigpO1xuICAgICAgICByZXR1cm4gbmV3IEF1ZGlvQ29uZmlnSW1wbChuZXcgTWljQXVkaW9Tb3VyY2UocGNtUmVjb3JkZXIsIGJ1ZmZlclNpemUsIGRldmljZUlkKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQXVkaW9Db25maWcgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIGZpbGUuXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tV2F2RmlsZUlucHV0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZU5hbWUgLSBTcGVjaWZpZXMgdGhlIGF1ZGlvIGlucHV0IGZpbGUuIEN1cnJlbnRseSwgb25seSBXQVYgLyBQQ00gd2l0aCAxNi1iaXRcbiAgICAgKiAgICAgICAgc2FtcGxlcywgMTYga0h6IHNhbXBsZSByYXRlLCBhbmQgYSBzaW5nbGUgY2hhbm5lbCAoTW9ubykgaXMgc3VwcG9ydGVkLlxuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbmZpZ30gVGhlIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVdhdkZpbGVJbnB1dChmaWxlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXVkaW9Db25maWdJbXBsKG5ldyBGaWxlQXVkaW9Tb3VyY2UoZmlsZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIEF1ZGlvQ29uZmlnIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBzdHJlYW0uXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tU3RyZWFtSW5wdXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtBdWRpb0lucHV0U3RyZWFtIHwgUHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFja30gYXVkaW9TdHJlYW0gLSBTcGVjaWZpZXMgdGhlIGN1c3RvbSBhdWRpbyBpbnB1dFxuICAgICAqICAgICAgICBzdHJlYW0uIEN1cnJlbnRseSwgb25seSBXQVYgLyBQQ00gd2l0aCAxNi1iaXQgc2FtcGxlcywgMTYga0h6IHNhbXBsZSByYXRlLCBhbmQgYSBzaW5nbGUgY2hhbm5lbFxuICAgICAqICAgICAgICAoTW9ubykgaXMgc3VwcG9ydGVkLlxuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbmZpZ30gVGhlIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVN0cmVhbUlucHV0KGF1ZGlvU3RyZWFtKSB7XG4gICAgICAgIGlmIChhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9Db25maWdJbXBsKG5ldyBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGwoYXVkaW9TdHJlYW0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXVkaW9TdHJlYW0gaW5zdGFuY2VvZiBBdWRpb0lucHV0U3RyZWFtKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvQ29uZmlnSW1wbChhdWRpb1N0cmVhbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IFN1cHBvcnRlZCBUeXBlXCIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhdWRpbyBpbnB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBBdWRpb0NvbmZpZ0ltcGxcbiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQXVkaW9Db25maWdJbXBsIGV4dGVuZHMgQXVkaW9Db25maWcge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtJQXVkaW9Tb3VyY2V9IHNvdXJjZSAtIEFuIGF1ZGlvIHNvdXJjZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wcml2U291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JtYXQgaW5mb3JtYXRpb24gZm9yIHRoZSBhdWRpb1xuICAgICAqL1xuICAgIGdldCBmb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuZm9ybWF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMucHJpdlNvdXJjZS50dXJuT2ZmKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXVkaW9Db25maWdJbXBsLnByb3RvdHlwZS5pZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5pZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUudHVybk9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBBIHByb21pc2UuXG4gICAgICovXG4gICAgdHVybk9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U291cmNlLnR1cm5PbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuYXR0YWNoXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdWRpb05vZGVJZCAtIFRoZSBhdWRpbyBub2RlIGlkLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPElBdWRpb1N0cmVhbU5vZGU+fSBBIHByb21pc2UuXG4gICAgICovXG4gICAgYXR0YWNoKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuYXR0YWNoKGF1ZGlvTm9kZUlkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLmRldGFjaFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXVkaW9Ob2RlSWQgLSBUaGUgYXVkaW8gbm9kZSBpZC5cbiAgICAgKi9cbiAgICBkZXRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGV0YWNoKGF1ZGlvTm9kZUlkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLnR1cm5PZmZcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IEEgcHJvbWlzZS5cbiAgICAgKi9cbiAgICB0dXJuT2ZmKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U291cmNlLnR1cm5PZmYoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLmV2ZW50c1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7RXZlbnRTb3VyY2U8QXVkaW9Tb3VyY2VFdmVudD59IEFuIGV2ZW50IHNvdXJjZSBmb3IgYXVkaW8gZXZlbnRzLlxuICAgICAqL1xuICAgIGdldCBldmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuZXZlbnRzO1xuICAgIH1cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHRoaXMucHJpdlNvdXJjZS5zZXRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgdGhpcy5wcml2U291cmNlLnNldFByb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgQXVkaW9Db25maWcgaW5zdGFuY2UgZG9lcyBub3Qgc3VwcG9ydCBzZXR0aW5nIHByb3BlcnRpZXMuXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFByb3BlcnR5KG5hbWUsIGRlZikge1xuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLnByaXZTb3VyY2UuZ2V0UHJvcGVydHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuZ2V0UHJvcGVydHkobmFtZSwgZGVmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgQXVkaW9Db25maWcgaW5zdGFuY2UgZG9lcyBub3Qgc3VwcG9ydCBnZXR0aW5nIHByb3BlcnRpZXMuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWY7XG4gICAgfVxuICAgIGdldCBkZXZpY2VJbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U291cmNlLmRldmljZUluZm87XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb0NvbmZpZy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCB9IGZyb20gXCIuLi8uLi8uLi9zcmMvY29tbW9uL0d1aWRcIjtcbmltcG9ydCB7IGNvbm5lY3Rpdml0eSwgdHlwZSwgfSBmcm9tIFwiLi4vLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50LCBBdWRpb1NvdXJjZVJlYWR5RXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50LCBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50LCBDaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0sIEV2ZW50cywgRXZlbnRTb3VyY2UsIFByb21pc2VIZWxwZXIsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBdWRpb1N0cmVhbUZvcm1hdCB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBdWRpb1N0cmVhbUZvcm1hdEltcGwgfSBmcm9tIFwiLi9BdWRpb1N0cmVhbUZvcm1hdFwiO1xuZXhwb3J0IGNvbnN0IGJ1ZmZlclNpemUgPSA0MDk2O1xuLyoqXG4gKiBSZXByZXNlbnRzIGF1ZGlvIGlucHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAY2xhc3MgQXVkaW9JbnB1dFN0cmVhbVxuICovXG5leHBvcnQgY2xhc3MgQXVkaW9JbnB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbWVtb3J5IGJhY2tlZCBQdXNoQXVkaW9JbnB1dFN0cmVhbSB3aXRoIHRoZSBzcGVjaWZpZWQgYXVkaW8gZm9ybWF0LlxuICAgICAqIEBtZW1iZXIgQXVkaW9JbnB1dFN0cmVhbS5jcmVhdGVQdXNoU3RyZWFtXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7QXVkaW9TdHJlYW1Gb3JtYXR9IGZvcm1hdCAtIFRoZSBhdWRpbyBkYXRhIGZvcm1hdCBpbiB3aGljaCBhdWRpbyB3aWxsIGJlXG4gICAgICogICAgICAgIHdyaXR0ZW4gdG8gdGhlIHB1c2ggYXVkaW8gc3RyZWFtJ3Mgd3JpdGUoKSBtZXRob2QgKGN1cnJlbnRseSBvbmx5IHN1cHBvcnQgMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAcmV0dXJucyB7UHVzaEF1ZGlvSW5wdXRTdHJlYW19IFRoZSBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlUHVzaFN0cmVhbShmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIFB1c2hBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZShmb3JtYXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgUHVsbEF1ZGlvSW5wdXRTdHJlYW0gdGhhdCBkZWxlZ2F0ZXMgdG8gdGhlIHNwZWNpZmllZCBjYWxsYmFjayBpbnRlcmZhY2UgZm9yIHJlYWQoKVxuICAgICAqIGFuZCBjbG9zZSgpIG1ldGhvZHMuXG4gICAgICogQG1lbWJlciBBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZVB1bGxTdHJlYW1cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrfSBjYWxsYmFjayAtIFRoZSBjdXN0b20gYXVkaW8gaW5wdXQgb2JqZWN0LCBkZXJpdmVkIGZyb21cbiAgICAgKiAgICAgICAgUHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFja1xuICAgICAqIEBwYXJhbSB7QXVkaW9TdHJlYW1Gb3JtYXR9IGZvcm1hdCAtIFRoZSBhdWRpbyBkYXRhIGZvcm1hdCBpbiB3aGljaCBhdWRpbyB3aWxsIGJlIHJldHVybmVkIGZyb21cbiAgICAgKiAgICAgICAgdGhlIGNhbGxiYWNrJ3MgcmVhZCgpIG1ldGhvZCAoY3VycmVudGx5IG9ubHkgc3VwcG9ydCAxNiBrSHogMTZiaXQgbW9ubyBQQ00pLlxuICAgICAqIEByZXR1cm5zIHtQdWxsQXVkaW9JbnB1dFN0cmVhbX0gVGhlIGF1ZGlvIGlucHV0IHN0cmVhbSBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVQdWxsU3RyZWFtKGNhbGxiYWNrLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIFB1bGxBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZShjYWxsYmFjaywgZm9ybWF0KTtcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiT29wc1wiKTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgbWVtb3J5IGJhY2tlZCBwdXNoIGF1ZGlvIGlucHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAY2xhc3MgUHVzaEF1ZGlvSW5wdXRTdHJlYW1cbiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgUHVzaEF1ZGlvSW5wdXRTdHJlYW0gZXh0ZW5kcyBBdWRpb0lucHV0U3RyZWFtIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbWVtb3J5IGJhY2tlZCBQdXNoQXVkaW9JbnB1dFN0cmVhbSB3aXRoIHRoZSBzcGVjaWZpZWQgYXVkaW8gZm9ybWF0LlxuICAgICAqIEBtZW1iZXIgUHVzaEF1ZGlvSW5wdXRTdHJlYW0uY3JlYXRlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7QXVkaW9TdHJlYW1Gb3JtYXR9IGZvcm1hdCAtIFRoZSBhdWRpbyBkYXRhIGZvcm1hdCBpbiB3aGljaCBhdWRpbyB3aWxsIGJlIHdyaXR0ZW4gdG8gdGhlXG4gICAgICogICAgICAgIHB1c2ggYXVkaW8gc3RyZWFtJ3Mgd3JpdGUoKSBtZXRob2QgKGN1cnJlbnRseSBvbmx5IHN1cHBvcnQgMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAcmV0dXJucyB7UHVzaEF1ZGlvSW5wdXRTdHJlYW19IFRoZSBwdXNoIGF1ZGlvIGlucHV0IHN0cmVhbSBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsKGJ1ZmZlclNpemUsIGZvcm1hdCk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIG1lbW9yeSBiYWNrZWQgcHVzaCBhdWRpbyBpbnB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGxcbiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsIGV4dGVuZHMgUHVzaEF1ZGlvSW5wdXRTdHJlYW0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRhbGl6ZXMgYW4gaW5zdGFuY2Ugd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7QXVkaW9TdHJlYW1Gb3JtYXR9IGZvcm1hdCAtIFRoZSBhdWRpbyBzdHJlYW0gZm9ybWF0LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNodW5rU2l6ZSwgZm9ybWF0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMub25FdmVudCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2RXZlbnRzLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkZvcm1hdCA9IEF1ZGlvU3RyZWFtRm9ybWF0SW1wbC5nZXREZWZhdWx0SW5wdXRGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZFdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdlN0cmVhbSA9IG5ldyBDaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0oY2h1bmtTaXplKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0IGluZm9ybWF0aW9uIGZvciB0aGUgYXVkaW9cbiAgICAgKi9cbiAgICBnZXQgZm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Rm9ybWF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIGF1ZGlvIGRhdGEgc3BlY2lmaWVkIGJ5IG1ha2luZyBhbiBpbnRlcm5hbCBjb3B5IG9mIHRoZSBkYXRhLlxuICAgICAqIEBtZW1iZXIgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS53cml0ZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBkYXRhQnVmZmVyIC0gVGhlIGF1ZGlvIGJ1ZmZlciBvZiB3aGljaCB0aGlzIGZ1bmN0aW9uIHdpbGwgbWFrZSBhIGNvcHkuXG4gICAgICovXG4gICAgd3JpdGUoZGF0YUJ1ZmZlcikge1xuICAgICAgICB0aGlzLnByaXZTdHJlYW0ud3JpdGVTdHJlYW1DaHVuayh7XG4gICAgICAgICAgICBidWZmZXI6IGRhdGFCdWZmZXIsXG4gICAgICAgICAgICBpc0VuZDogZmFsc2UsXG4gICAgICAgICAgICB0aW1lUmVjZWl2ZWQ6IERhdGUubm93KClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtLlxuICAgICAqIEBtZW1iZXIgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtLmNsb3NlKCk7XG4gICAgfVxuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIHR1cm5PbigpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50KHRoaXMucHJpdklkKSk7IC8vIG5vIHN0cmVhbSBpZFxuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlUmVhZHlFdmVudCh0aGlzLnByaXZJZCkpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRydWUpO1xuICAgIH1cbiAgICBhdHRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHVybk9uKClcbiAgICAgICAgICAgIC5vblN1Y2Nlc3NDb250aW51ZVdpdGgoKF8pID0+IHtcbiAgICAgICAgICAgIC8vIEZvciBub3cgd2Ugc3VwcG9ydCBhIHNpbmdsZSBwYXJhbGxlbCByZWFkZXIgb2YgdGhlIHB1c2hlZCBzdHJlYW0uXG4gICAgICAgICAgICAvLyBTbyB3ZSBjYW4gc2ltaXBseSBoYW5kIHRoZSBzdHJlYW0gdG8gdGhlIHJlY29nbml6ZXIgYW5kIGxldCBpdCByZWNvZ25pemUuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aCgoc3RyZWFtUmVhZGVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRldGFjaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW1SZWFkZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnR1cm5PZmYoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdWRpb05vZGVJZDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlYWQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmVhbVJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgIH1cbiAgICB0dXJuT2ZmKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KGZhbHNlKTtcbiAgICB9XG4gICAgZ2V0IGV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV2ZW50cztcbiAgICB9XG4gICAgZ2V0IGRldmljZUluZm8oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmZyb21SZXN1bHQoe1xuICAgICAgICAgICAgYml0c3BlcnNhbXBsZTogdGhpcy5wcml2Rm9ybWF0LmJpdHNQZXJTYW1wbGUsXG4gICAgICAgICAgICBjaGFubmVsY291bnQ6IHRoaXMucHJpdkZvcm1hdC5jaGFubmVscyxcbiAgICAgICAgICAgIGNvbm5lY3Rpdml0eTogY29ubmVjdGl2aXR5LlVua25vd24sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IFwiU3BlZWNoIFNES1wiLFxuICAgICAgICAgICAgbW9kZWw6IFwiUHVzaFN0cmVhbVwiLFxuICAgICAgICAgICAgc2FtcGxlcmF0ZTogdGhpcy5wcml2Rm9ybWF0LnNhbXBsZXNQZXJTZWMsXG4gICAgICAgICAgICB0eXBlOiB0eXBlLlN0cmVhbSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLypcbiAqIFJlcHJlc2VudHMgYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBjbGFzcyBQdWxsQXVkaW9JbnB1dFN0cmVhbVxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBQdWxsQXVkaW9JbnB1dFN0cmVhbSBleHRlbmRzIEF1ZGlvSW5wdXRTdHJlYW0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuZCBpbnN0YW5jZS5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoKTsgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBQdWxsQXVkaW9JbnB1dFN0cmVhbSB0aGF0IGRlbGVnYXRlcyB0byB0aGUgc3BlY2lmaWVkIGNhbGxiYWNrIGludGVyZmFjZSBmb3JcbiAgICAgKiByZWFkKCkgYW5kIGNsb3NlKCkgbWV0aG9kcywgdXNpbmcgdGhlIGRlZmF1bHQgZm9ybWF0ICgxNiBrSHogMTZiaXQgbW9ubyBQQ00pLlxuICAgICAqIEBtZW1iZXIgUHVsbEF1ZGlvSW5wdXRTdHJlYW0uY3JlYXRlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7UHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFja30gY2FsbGJhY2sgLSBUaGUgY3VzdG9tIGF1ZGlvIGlucHV0IG9iamVjdCxcbiAgICAgKiAgICAgICAgZGVyaXZlZCBmcm9tIFB1bGxBdWRpb0lucHV0U3RyZWFtQ3VzdG9tQ2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge0F1ZGlvU3RyZWFtRm9ybWF0fSBmb3JtYXQgLSBUaGUgYXVkaW8gZGF0YSBmb3JtYXQgaW4gd2hpY2ggYXVkaW8gd2lsbCBiZVxuICAgICAqICAgICAgICByZXR1cm5lZCBmcm9tIHRoZSBjYWxsYmFjaydzIHJlYWQoKSBtZXRob2QgKGN1cnJlbnRseSBvbmx5IHN1cHBvcnQgMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAcmV0dXJucyB7UHVsbEF1ZGlvSW5wdXRTdHJlYW19IFRoZSBwdXNoIGF1ZGlvIGlucHV0IHN0cmVhbSBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoY2FsbGJhY2ssIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gbmV3IFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbChjYWxsYmFjaywgZm9ybWF0KTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsXG4gKi9cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbCBleHRlbmRzIFB1bGxBdWRpb0lucHV0U3RyZWFtIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgUHVsbEF1ZGlvSW5wdXRTdHJlYW0gdGhhdCBkZWxlZ2F0ZXMgdG8gdGhlIHNwZWNpZmllZCBjYWxsYmFjayBpbnRlcmZhY2UgZm9yXG4gICAgICogcmVhZCgpIGFuZCBjbG9zZSgpIG1ldGhvZHMsIHVzaW5nIHRoZSBkZWZhdWx0IGZvcm1hdCAoMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1B1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2t9IGNhbGxiYWNrIC0gVGhlIGN1c3RvbSBhdWRpbyBpbnB1dCBvYmplY3QsXG4gICAgICogICAgICAgIGRlcml2ZWQgZnJvbSBQdWxsQXVkaW9JbnB1dFN0cmVhbUN1c3RvbUNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIGRhdGEgZm9ybWF0IGluIHdoaWNoIGF1ZGlvIHdpbGwgYmVcbiAgICAgKiAgICAgICAgcmV0dXJuZWQgZnJvbSB0aGUgY2FsbGJhY2sncyByZWFkKCkgbWV0aG9kIChjdXJyZW50bHkgb25seSBzdXBwb3J0IDE2IGtIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2ssIGZvcm1hdCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm9uRXZlbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdkV2ZW50cy5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZm9ybWF0KSB7XG4gICAgICAgICAgICB0aGlzLnByaXZGb3JtYXQgPSBBdWRpb1N0cmVhbUZvcm1hdC5nZXREZWZhdWx0SW5wdXRGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZFdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdkNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMucHJpdklzQ2xvc2VkID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBpbmZvcm1hdGlvbiBmb3IgdGhlIGF1ZGlvXG4gICAgICovXG4gICAgZ2V0IGZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkZvcm1hdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0uXG4gICAgICogQG1lbWJlciBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGwucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnByaXZJc0Nsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMucHJpdkNhbGxiYWNrLmNsb3NlKCk7XG4gICAgfVxuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIHR1cm5PbigpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50KHRoaXMucHJpdklkKSk7IC8vIG5vIHN0cmVhbSBpZFxuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlUmVhZHlFdmVudCh0aGlzLnByaXZJZCkpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRydWUpO1xuICAgIH1cbiAgICBhdHRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHVybk9uKClcbiAgICAgICAgICAgIC5vblN1Y2Nlc3NDb250aW51ZVdpdGgoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkZXRhY2g6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q2FsbGJhY2suY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnR1cm5PZmYoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdWRpb05vZGVJZDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlYWQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvdGFsQnl0ZXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhbnNtaXRCdWZmO1xuICAgICAgICAgICAgICAgICAgICAvLyBVbnRpbCB3ZSBoYXZlIHRoZSBtaW5pbXVtIG51bWJlciBvZiBieXRlcyB0byBzZW5kIGluIGEgdHJhbnNtaXNzaW9uLCBrZWVwIGFza2luZyBmb3IgbW9yZS5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRvdGFsQnl0ZXMgPCBidWZmZXJTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaXppbmcgdGhlIHJlYWQgYnVmZmVyIHRvIHRoZSBkZWx0YSBiZXR3ZWVuIHRoZSBwZXJmZWN0IHNpemUgYW5kIHdoYXQncyBsZWZ0IG1lYW5zIHdlIHdvbid0IGV2ZXIgZ2V0IHRvbyBtdWNoXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGJhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFkQnVmZiA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJTaXplIC0gdG90YWxCeXRlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwdWxsZWRCeXRlcyA9IHRoaXMucHJpdkNhbGxiYWNrLnJlYWQocmVhZEJ1ZmYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gcmV0dXJuIGJ1ZmZlciB5ZXQgZGVmaW5lZCwgc2V0IHRoZSByZXR1cm4gYnVmZmVyIHRvIHRoZSB0aGF0IHdhcyBqdXN0IHBvcHVsYXRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2FzLCBpZiB3ZSBoYXZlIGVub3VnaCBkYXRhIHRoZXJlJ3Mgbm8gY29weSBwZW5hbHR5LCBidXQgaWYgd2UgZG9uJ3Qgd2UgaGF2ZSBhIGJ1ZmZlciB0aGF0J3MgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVmZXJyZWQgc2l6ZSBhbGxvY2F0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0cmFuc21pdEJ1ZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc21pdEJ1ZmYgPSByZWFkQnVmZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCB0aGUgZmlyc3QgYml0ZSBhdCB0aGUgYXBwbGUsIHNvIGZpbGwgdGhlIHJldHVybiBidWZmZXIgd2l0aCB0aGUgZGF0YSB3ZSBnb3QgYmFjay5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRWaWV3ID0gbmV3IEludDhBcnJheSh0cmFuc21pdEJ1ZmYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludFZpZXcuc2V0KG5ldyBJbnQ4QXJyYXkocmVhZEJ1ZmYpLCB0b3RhbEJ5dGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBieXRlcyB0byByZWFkLCBqdXN0IGJyZWFrIG91dCBhbmQgYmUgZG9uZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBwdWxsZWRCeXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxCeXRlcyArPSBwdWxsZWRCeXRlcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogdHJhbnNtaXRCdWZmLnNsaWNlKDAsIHRvdGFsQnl0ZXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IHRoaXMucHJpdklzQ2xvc2VkIHx8IHRvdGFsQnl0ZXMgPT09IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lUmVjZWl2ZWQ6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGV0YWNoKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICB9XG4gICAgdHVybk9mZigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdChmYWxzZSk7XG4gICAgfVxuICAgIGdldCBldmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFdmVudHM7XG4gICAgfVxuICAgIGdldCBkZXZpY2VJbmZvKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHtcbiAgICAgICAgICAgIGJpdHNwZXJzYW1wbGU6IHRoaXMucHJpdkZvcm1hdC5iaXRzUGVyU2FtcGxlLFxuICAgICAgICAgICAgY2hhbm5lbGNvdW50OiB0aGlzLnByaXZGb3JtYXQuY2hhbm5lbHMsXG4gICAgICAgICAgICBjb25uZWN0aXZpdHk6IGNvbm5lY3Rpdml0eS5Vbmtub3duLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyOiBcIlNwZWVjaCBTREtcIixcbiAgICAgICAgICAgIG1vZGVsOiBcIlB1bGxTdHJlYW1cIixcbiAgICAgICAgICAgIHNhbXBsZXJhdGU6IHRoaXMucHJpdkZvcm1hdC5zYW1wbGVzUGVyU2VjLFxuICAgICAgICAgICAgdHlwZTogdHlwZS5TdHJlYW0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXVkaW9JbnB1dFN0cmVhbS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCB9IGZyb20gXCIuLi8uLi8uLi9zcmMvY29tbW9uL0d1aWRcIjtcbmltcG9ydCB7IENodW5rZWRBcnJheUJ1ZmZlclN0cmVhbSwgUHJvbWlzZUhlbHBlciwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvU3RyZWFtRm9ybWF0SW1wbCB9IGZyb20gXCIuL0F1ZGlvU3RyZWFtRm9ybWF0XCI7XG5leHBvcnQgY29uc3QgYnVmZmVyU2l6ZSA9IDQwOTY7XG4vKipcbiAqIFJlcHJlc2VudHMgYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBjbGFzcyBBdWRpb0lucHV0U3RyZWFtXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb091dHB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbWVtb3J5IGJhY2tlZCBQdWxsQXVkaW9PdXRwdXRTdHJlYW0gd2l0aCB0aGUgc3BlY2lmaWVkIGF1ZGlvIGZvcm1hdC5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvSW5wdXRTdHJlYW0uY3JlYXRlUHVsbFN0cmVhbVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0F1ZGlvU3RyZWFtRm9ybWF0fSBmb3JtYXQgLSBUaGUgYXVkaW8gZGF0YSBmb3JtYXQgaW4gd2hpY2ggYXVkaW8gd2lsbCBiZVxuICAgICAqICAgICAgICB3cml0dGVuIHRvIHRoZSBwdXNoIGF1ZGlvIHN0cmVhbSdzIHdyaXRlKCkgbWV0aG9kIChjdXJyZW50bHkgb25seSBzdXBwb3J0IDE2IGtIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICogQHJldHVybnMge1B1bGxBdWRpb091dHB1dFN0cmVhbX0gVGhlIGF1ZGlvIGlucHV0IHN0cmVhbSBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVQdWxsU3RyZWFtKGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gUHVsbEF1ZGlvT3V0cHV0U3RyZWFtLmNyZWF0ZShmb3JtYXQpO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBtZW1vcnkgYmFja2VkIHB1c2ggYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBjbGFzcyBQdWxsQXVkaW9PdXRwdXRTdHJlYW1cbiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtIGV4dGVuZHMgQXVkaW9PdXRwdXRTdHJlYW0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBtZW1vcnkgYmFja2VkIFB1bGxBdWRpb091dHB1dFN0cmVhbSB3aXRoIHRoZSBzcGVjaWZpZWQgYXVkaW8gZm9ybWF0LlxuICAgICAqIEBtZW1iZXIgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtLmNyZWF0ZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0F1ZGlvU3RyZWFtRm9ybWF0fSBmb3JtYXQgLSBUaGUgYXVkaW8gZGF0YSBmb3JtYXQgaW4gd2hpY2ggYXVkaW8gd2lsbCBiZSB3cml0dGVuIHRvIHRoZVxuICAgICAqICAgICAgICBwdXNoIGF1ZGlvIHN0cmVhbSdzIHdyaXRlKCkgbWV0aG9kIChjdXJyZW50bHkgb25seSBzdXBwb3J0IDE2IGtIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICogQHJldHVybnMge1B1bGxBdWRpb091dHB1dFN0cmVhbX0gVGhlIHB1c2ggYXVkaW8gaW5wdXQgc3RyZWFtIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsKGJ1ZmZlclNpemUsIGZvcm1hdCk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIG1lbW9yeSBiYWNrZWQgcHVzaCBhdWRpbyBpbnB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsXG4gKi9cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFB1bGxBdWRpb091dHB1dFN0cmVhbUltcGwgZXh0ZW5kcyBQdWxsQXVkaW9PdXRwdXRTdHJlYW0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRhbGl6ZXMgYW4gaW5zdGFuY2Ugd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7QXVkaW9TdHJlYW1Gb3JtYXR9IGZvcm1hdCAtIFRoZSBhdWRpbyBzdHJlYW0gZm9ybWF0LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNodW5rU2l6ZSwgZm9ybWF0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2Rm9ybWF0ID0gQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLmdldERlZmF1bHRJbnB1dEZvcm1hdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2Rm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdklkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZTdHJlYW0gPSBuZXcgQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtKGNodW5rU2l6ZSk7XG4gICAgICAgIHRoaXMuc3RyZWFtUmVhZGVyID0gdGhpcy5wcml2U3RyZWFtLmdldFJlYWRlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JtYXQgaW5mb3JtYXRpb24gZm9yIHRoZSBhdWRpb1xuICAgICAqL1xuICAgIGdldCBmb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZGb3JtYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgc3RyZWFtIGlzIGNsb3NlZFxuICAgICAqIEBtZW1iZXIgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbC5wcm90b3R5cGUuaXNDbG9zZWRcbiAgICAgKiBAcHJvcGVydHlcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IGlzQ2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RyZWFtLmlzQ2xvc2VkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpZCBvZiB0aGUgc3RyZWFtXG4gICAgICogQG1lbWJlciBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5pZFxuICAgICAqIEBwcm9wZXJ0eVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZGF0YSBmcm9tIHRoZSBidWZmZXJcbiAgICAgKiBAbWVtYmVyIFB1bGxBdWRpb091dHB1dFN0cmVhbUltcGwucHJvdG90eXBlLnJlYWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gZGF0YUJ1ZmZlciAtIFRoZSBhdWRpbyBidWZmZXIgb2Ygd2hpY2ggdGhpcyBmdW5jdGlvbiB3aWxsIG1ha2UgYSBjb3B5LlxuICAgICAqL1xuICAgIHJlYWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmVhbVJlYWRlci5yZWFkKClcbiAgICAgICAgICAgIC5vblN1Y2Nlc3NDb250aW51ZVdpdGhQcm9taXNlKChjaHVuaykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuZnJvbVJlc3VsdChjaHVuay5idWZmZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRoZSBhdWRpbyBkYXRhIHNwZWNpZmllZCBieSBtYWtpbmcgYW4gaW50ZXJuYWwgY29weSBvZiB0aGUgZGF0YS5cbiAgICAgKiBAbWVtYmVyIFB1bGxBdWRpb091dHB1dFN0cmVhbUltcGwucHJvdG90eXBlLndyaXRlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGRhdGFCdWZmZXIgLSBUaGUgYXVkaW8gYnVmZmVyIG9mIHdoaWNoIHRoaXMgZnVuY3Rpb24gd2lsbCBtYWtlIGEgY29weS5cbiAgICAgKi9cbiAgICB3cml0ZShkYXRhQnVmZmVyKSB7XG4gICAgICAgIHRoaXMucHJpdlN0cmVhbS53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgIGJ1ZmZlcjogZGF0YUJ1ZmZlcixcbiAgICAgICAgICAgIGlzRW5kOiBmYWxzZSxcbiAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogRGF0ZS5ub3coKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0uXG4gICAgICogQG1lbWJlciBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtLmNsb3NlKCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb091dHB1dFN0cmVhbS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBSZXByZXNlbnRzIGF1ZGlvIHN0cmVhbSBmb3JtYXQgdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQGNsYXNzIEF1ZGlvU3RyZWFtRm9ybWF0XG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb1N0cmVhbUZvcm1hdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhdWRpbyBzdHJlYW0gZm9ybWF0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGRlZmF1bHQgYXVkaW8gc3RyZWFtXG4gICAgICogZm9ybWF0ICgxNktIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICogQG1lbWJlciBBdWRpb1N0cmVhbUZvcm1hdC5nZXREZWZhdWx0SW5wdXRGb3JtYXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0F1ZGlvU3RyZWFtRm9ybWF0fSBUaGUgYXVkaW8gc3RyZWFtIGZvcm1hdCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXREZWZhdWx0SW5wdXRGb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiBBdWRpb1N0cmVhbUZvcm1hdEltcGwuZ2V0RGVmYXVsdElucHV0Rm9ybWF0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXVkaW8gc3RyZWFtIGZvcm1hdCBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIHBjbSB3YXZlZm9ybWF0IGNoYXJhY3RlcmlzdGljcy5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvU3RyZWFtRm9ybWF0LmdldFdhdmVGb3JtYXRQQ01cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNhbXBsZXNQZXJTZWNvbmQgLSBTYW1wbGUgcmF0ZSwgaW4gc2FtcGxlcyBwZXIgc2Vjb25kIChIZXJ0eikuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJpdHNQZXJTYW1wbGUgLSBCaXRzIHBlciBzYW1wbGUsIHR5cGljYWxseSAxNi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY2hhbm5lbHMgLSBOdW1iZXIgb2YgY2hhbm5lbHMgaW4gdGhlIHdhdmVmb3JtLWF1ZGlvIGRhdGEuIE1vbmF1cmFsIGRhdGFcbiAgICAgKiAgICAgICAgdXNlcyBvbmUgY2hhbm5lbCBhbmQgc3RlcmVvIGRhdGEgdXNlcyB0d28gY2hhbm5lbHMuXG4gICAgICogQHJldHVybnMge0F1ZGlvU3RyZWFtRm9ybWF0fSBUaGUgYXVkaW8gc3RyZWFtIGZvcm1hdCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRXYXZlRm9ybWF0UENNKHNhbXBsZXNQZXJTZWNvbmQsIGJpdHNQZXJTYW1wbGUsIGNoYW5uZWxzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsKHNhbXBsZXNQZXJTZWNvbmQsIGJpdHNQZXJTYW1wbGUsIGNoYW5uZWxzKTtcbiAgICB9XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsXG4gKi9cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIEF1ZGlvU3RyZWFtRm9ybWF0SW1wbCBleHRlbmRzIEF1ZGlvU3RyZWFtRm9ybWF0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIHdpdGggdGhlIGdpdmVuIHZhbHVlcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2FtcGxlc1BlclNlYyAtIFNhbXBsZXMgcGVyIHNlY29uZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0c1BlclNhbXBsZSAtIEJpdHMgcGVyIHNhbXBsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY2hhbm5lbHMgLSBOdW1iZXIgb2YgY2hhbm5lbHMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2FtcGxlc1BlclNlYyA9IDE2MDAwLCBiaXRzUGVyU2FtcGxlID0gMTYsIGNoYW5uZWxzID0gMSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmZvcm1hdFRhZyA9IDE7XG4gICAgICAgIHRoaXMuYml0c1BlclNhbXBsZSA9IGJpdHNQZXJTYW1wbGU7XG4gICAgICAgIHRoaXMuc2FtcGxlc1BlclNlYyA9IHNhbXBsZXNQZXJTZWM7XG4gICAgICAgIHRoaXMuY2hhbm5lbHMgPSBjaGFubmVscztcbiAgICAgICAgdGhpcy5hdmdCeXRlc1BlclNlYyA9IHRoaXMuc2FtcGxlc1BlclNlYyAqIHRoaXMuY2hhbm5lbHMgKiAodGhpcy5iaXRzUGVyU2FtcGxlIC8gOCk7XG4gICAgICAgIHRoaXMuYmxvY2tBbGlnbiA9IHRoaXMuY2hhbm5lbHMgKiBNYXRoLm1heCh0aGlzLmJpdHNQZXJTYW1wbGUsIDgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGRlZmF1bHQgaW5wdXQgZm9ybWF0LlxuICAgICAqIEBtZW1iZXIgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLmdldERlZmF1bHRJbnB1dEZvcm1hdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7QXVkaW9TdHJlYW1Gb3JtYXRJbXBsfSBUaGUgZGVmYXVsdCBpbnB1dCBmb3JtYXQuXG4gICAgICovXG4gICAgc3RhdGljIGdldERlZmF1bHRJbnB1dEZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb1N0cmVhbUZvcm1hdEltcGwoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdC5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvU3RyZWFtRm9ybWF0SW1wbC5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2xvc2UoKSB7IHJldHVybjsgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb1N0cmVhbUZvcm1hdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgSW52YWxpZE9wZXJhdGlvbkVycm9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9FcnJvclwiO1xuLyoqXG4gKiBCYXNlIGF1ZGlvIHBsYXllciBjbGFzc1xuICogVE9ETzogUGxheXMgb25seSBQQ00gZm9yIG5vdy5cbiAqIEBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgQmFzZUF1ZGlvUGxheWVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvRm9ybWF0KSB7XG4gICAgICAgIHRoaXMuYXVkaW9Db250ZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5nYWluTm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuYXV0b1VwZGF0ZUJ1ZmZlclRpbWVyID0gMDtcbiAgICAgICAgdGhpcy5pbml0KGF1ZGlvRm9ybWF0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogcGxheSBBdWRpbyBzYW1wbGVcbiAgICAgKiBAcGFyYW0gbmV3QXVkaW9EYXRhIGF1ZGlvIGRhdGEgdG8gYmUgcGxheWVkLlxuICAgICAqL1xuICAgIHBsYXlBdWRpb1NhbXBsZShuZXdBdWRpb0RhdGEpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVJbml0aWFsaXplZENvbnRleHQoKTtcbiAgICAgICAgY29uc3QgYXVkaW9EYXRhID0gdGhpcy5mb3JtYXRBdWRpb0RhdGEobmV3QXVkaW9EYXRhKTtcbiAgICAgICAgY29uc3QgbmV3U2FtcGxlc0RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuc2FtcGxlcy5sZW5ndGggKyBhdWRpb0RhdGEubGVuZ3RoKTtcbiAgICAgICAgbmV3U2FtcGxlc0RhdGEuc2V0KHRoaXMuc2FtcGxlcywgMCk7XG4gICAgICAgIG5ld1NhbXBsZXNEYXRhLnNldChhdWRpb0RhdGEsIHRoaXMuc2FtcGxlcy5sZW5ndGgpO1xuICAgICAgICB0aGlzLnNhbXBsZXMgPSBuZXdTYW1wbGVzRGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogc3RvcHMgYXVkaW8gYW5kIGNsZWFycyB0aGUgYnVmZmVyc1xuICAgICAqL1xuICAgIHN0b3BBdWRpbygpIHtcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9Db250ZXh0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNhbXBsZXMgPSBuZXcgRmxvYXQzMkFycmF5KCk7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b1VwZGF0ZUJ1ZmZlclRpbWVyKTtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9Db250ZXh0LmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvQ29udGV4dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdChhdWRpb0Zvcm1hdCkge1xuICAgICAgICB0aGlzLmF1ZGlvRm9ybWF0ID0gYXVkaW9Gb3JtYXQ7XG4gICAgICAgIHRoaXMuc2FtcGxlcyA9IG5ldyBGbG9hdDMyQXJyYXkoKTtcbiAgICB9XG4gICAgZW5zdXJlSW5pdGlhbGl6ZWRDb250ZXh0KCkge1xuICAgICAgICBpZiAodGhpcy5hdWRpb0NvbnRleHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQXVkaW9Db250ZXh0KCk7XG4gICAgICAgICAgICBjb25zdCB0aW1lclBlcmlvZCA9IDIwMDtcbiAgICAgICAgICAgIHRoaXMuYXV0b1VwZGF0ZUJ1ZmZlclRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQXVkaW9CdWZmZXIoKTtcbiAgICAgICAgICAgIH0sIHRpbWVyUGVyaW9kKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVBdWRpb0NvbnRleHQoKSB7XG4gICAgICAgIC8vIG5ldyAoKHdpbmRvdyBhcyBhbnkpLkF1ZGlvQ29udGV4dCB8fCAod2luZG93IGFzIGFueSkud2Via2l0QXVkaW9Db250ZXh0KSgpO1xuICAgICAgICB0aGlzLmF1ZGlvQ29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICAgICAgLy8gVE9ETzogVmFyaW91cyBleGFtcGxlcyBzaG93cyB0aGlzIGdhaW4gbm9kZSwgaXQgZG9lcyBub3Qgc2VlbSB0byBiZSBuZWVkZWQgdW5sZXNzIHdlIHBsYW5cbiAgICAgICAgLy8gdG8gY29udHJvbCB0aGUgdm9sdW1lLCBub3QgbGlrZWx5XG4gICAgICAgIHRoaXMuZ2Fpbk5vZGUgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7XG4gICAgICAgIHRoaXMuZ2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IDE7XG4gICAgICAgIHRoaXMuZ2Fpbk5vZGUuY29ubmVjdCh0aGlzLmF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdGhpcy5hdWRpb0NvbnRleHQuY3VycmVudFRpbWU7XG4gICAgfVxuICAgIGZvcm1hdEF1ZGlvRGF0YShhdWRpb0RhdGEpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmF1ZGlvRm9ybWF0LmJpdHNQZXJTYW1wbGUpIHtcbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRBcnJheUJ1ZmZlcihuZXcgSW50OEFycmF5KGF1ZGlvRGF0YSksIDEyOCk7XG4gICAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdEFycmF5QnVmZmVyKG5ldyBJbnQxNkFycmF5KGF1ZGlvRGF0YSksIDMyNzY4KTtcbiAgICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0QXJyYXlCdWZmZXIobmV3IEludDMyQXJyYXkoYXVkaW9EYXRhKSwgMjE0NzQ4MzY0OCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJPbmx5IFdBVkVfRk9STUFUX1BDTSAoOC8xNi8zMiBicHMpIGZvcm1hdCBzdXBwb3J0ZWQgYXQgdGhpcyB0aW1lXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvcm1hdEFycmF5QnVmZmVyKGF1ZGlvRGF0YSwgbWF4VmFsdWUpIHtcbiAgICAgICAgY29uc3QgZmxvYXQzMkRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGF1ZGlvRGF0YS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF1ZGlvRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZmxvYXQzMkRhdGFbaV0gPSBhdWRpb0RhdGFbaV0gLyBtYXhWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxvYXQzMkRhdGE7XG4gICAgfVxuICAgIHVwZGF0ZUF1ZGlvQnVmZmVyKCkge1xuICAgICAgICBpZiAodGhpcy5zYW1wbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoYW5uZWxDb3VudCA9IHRoaXMuYXVkaW9Gb3JtYXQuY2hhbm5lbHM7XG4gICAgICAgIGNvbnN0IGJ1ZmZlclNvdXJjZSA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICBjb25zdCBmcmFtZUNvdW50ID0gdGhpcy5zYW1wbGVzLmxlbmd0aCAvIGNoYW5uZWxDb3VudDtcbiAgICAgICAgY29uc3QgYXVkaW9CdWZmZXIgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVCdWZmZXIoY2hhbm5lbENvdW50LCBmcmFtZUNvdW50LCB0aGlzLmF1ZGlvRm9ybWF0LnNhbXBsZXNQZXJTZWMpO1xuICAgICAgICAvLyBUT0RPOiBTaG91bGQgd2UgZG8gdGhlIGNvbnZlcnNpb24gaW4gdGhlIHB1c2hBdWRpb1NhbXBsZSBpbnN0ZWFkP1xuICAgICAgICBmb3IgKGxldCBjaGFubmVsID0gMDsgY2hhbm5lbCA8IGNoYW5uZWxDb3VudDsgY2hhbm5lbCsrKSB7XG4gICAgICAgICAgICAvLyBGaWxsIGluIGluZGl2aWR1YWwgY2hhbm5lbCBkYXRhXG4gICAgICAgICAgICBsZXQgY2hhbm5lbE9mZnNldCA9IGNoYW5uZWw7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0RhdGEgPSBhdWRpb0J1ZmZlci5nZXRDaGFubmVsRGF0YShjaGFubmVsKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zYW1wbGVzLmxlbmd0aDsgaSsrLCBjaGFubmVsT2Zmc2V0ICs9IGNoYW5uZWxDb3VudCkge1xuICAgICAgICAgICAgICAgIGF1ZGlvRGF0YVtpXSA9IHRoaXMuc2FtcGxlc1tjaGFubmVsT2Zmc2V0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGFydFRpbWUgPCB0aGlzLmF1ZGlvQ29udGV4dC5jdXJyZW50VGltZSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSB0aGlzLmF1ZGlvQ29udGV4dC5jdXJyZW50VGltZTtcbiAgICAgICAgfVxuICAgICAgICBidWZmZXJTb3VyY2UuYnVmZmVyID0gYXVkaW9CdWZmZXI7XG4gICAgICAgIGJ1ZmZlclNvdXJjZS5jb25uZWN0KHRoaXMuZ2Fpbk5vZGUpO1xuICAgICAgICBidWZmZXJTb3VyY2Uuc3RhcnQodGhpcy5zdGFydFRpbWUpO1xuICAgICAgICAvLyBNYWtlIHN1cmUgd2UgcGxheSB0aGUgbmV4dCBzYW1wbGUgYWZ0ZXIgdGhlIGN1cnJlbnQgb25lLlxuICAgICAgICB0aGlzLnN0YXJ0VGltZSArPSBhdWRpb0J1ZmZlci5kdXJhdGlvbjtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHNhbXBsZXMgZm9yIHRoZSBuZXh0IHB1c2hlZCBkYXRhLlxuICAgICAgICB0aGlzLnNhbXBsZXMgPSBuZXcgRmxvYXQzMkFycmF5KCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlQXVkaW9QbGF5ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogQW4gYWJzdHJhY3QgYmFzZSBjbGFzcyB0aGF0IGRlZmluZXMgY2FsbGJhY2sgbWV0aG9kcyAocmVhZCgpIGFuZCBjbG9zZSgpKSBmb3JcbiAqIGN1c3RvbSBhdWRpbyBpbnB1dCBzdHJlYW1zKS5cbiAqIEBjbGFzcyBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrXG4gKi9cbmV4cG9ydCBjbGFzcyBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrIHtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFjay5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbCB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VDb25maWdcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIENsYXNzIHRoYXQgZGVmaW5lcyBjb25maWd1cmF0aW9ucyBmb3IgdGhlIGRpYWxvZyBzZXJ2aWNlIGNvbm5lY3RvciBvYmplY3QgZm9yIHVzaW5nIGEgQm90IEZyYW1ld29yayBiYWNrZW5kLlxuICogQGNsYXNzIEJvdEZyYW1ld29ya0NvbmZpZ1xuICovXG5leHBvcnQgY2xhc3MgQm90RnJhbWV3b3JrQ29uZmlnIGV4dGVuZHMgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQm90RnJhbWV3b3JrQ29uZmlnLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBib3QgZnJhbWV3b3JrIGNvbmZpZyB3aXRoIHRoZSBzcGVjaWZpZWQgc3Vic2NyaXB0aW9uIGFuZCByZWdpb24uXG4gICAgICogQG1lbWJlciBCb3RGcmFtZXdvcmtDb25maWcuZnJvbVN1YnNjcmlwdGlvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gc3Vic2NyaXB0aW9uIFN1YnNjcmlwdGlvbiBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoZSBib3RcbiAgICAgKiBAcGFyYW0gcmVnaW9uIFRoZSByZWdpb24gbmFtZSAoc2VlIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9ha2EubXMvY3NzcGVlY2gvcmVnaW9uXCI+cmVnaW9uIHBhZ2U8L2E+KS5cbiAgICAgKiBAcmV0dXJucyB7Qm90RnJhbWV3b3JrQ29uZmlnfSBBIG5ldyBib3QgZnJhbWV3b3JrIGNvbmZpZy5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHJlZ2lvbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uoc3Vic2NyaXB0aW9uLCBcInN1YnNjcmlwdGlvblwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZ2lvbiwgXCJyZWdpb25cIik7XG4gICAgICAgIGNvbnN0IGJvdEZyYW1ld29ya0NvbmZpZyA9IG5ldyBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbCgpO1xuICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZSwgXCJib3RfZnJhbWV3b3JrXCIpO1xuICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHN1YnNjcmlwdGlvbik7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgcmV0dXJuIGJvdEZyYW1ld29ya0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgYm90IGZyYW1ld29yayBjb25maWcgd2l0aCB0aGUgc3BlY2lmaWVkIGF1dGhvcml6YXRpb24gdG9rZW4gYW5kIHJlZ2lvbi5cbiAgICAgKiBOb3RlOiBUaGUgY2FsbGVyIG5lZWRzIHRvIGVuc3VyZSB0aGF0IHRoZSBhdXRob3JpemF0aW9uIHRva2VuIGlzIHZhbGlkLiBCZWZvcmUgdGhlIGF1dGhvcml6YXRpb24gdG9rZW5cbiAgICAgKiBleHBpcmVzLCB0aGUgY2FsbGVyIG5lZWRzIHRvIHJlZnJlc2ggaXQgYnkgY2FsbGluZyB0aGlzIHNldHRlciB3aXRoIGEgbmV3IHZhbGlkIHRva2VuLlxuICAgICAqIEFzIGNvbmZpZ3VyYXRpb24gdmFsdWVzIGFyZSBjb3BpZWQgd2hlbiBjcmVhdGluZyBhIG5ldyByZWNvZ25pemVyLCB0aGUgbmV3IHRva2VuIHZhbHVlIHdpbGwgbm90IGFwcGx5IHRvIHJlY29nbml6ZXJzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gY3JlYXRlZC5cbiAgICAgKiBGb3IgcmVjb2duaXplcnMgdGhhdCBoYXZlIGJlZW4gY3JlYXRlZCBiZWZvcmUsIHlvdSBuZWVkIHRvIHNldCBhdXRob3JpemF0aW9uIHRva2VuIG9mIHRoZSBjb3JyZXNwb25kaW5nIHJlY29nbml6ZXJcbiAgICAgKiB0byByZWZyZXNoIHRoZSB0b2tlbi4gT3RoZXJ3aXNlLCB0aGUgcmVjb2duaXplcnMgd2lsbCBlbmNvdW50ZXIgZXJyb3JzIGR1cmluZyByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIEJvdEZyYW1ld29ya0NvbmZpZy5mcm9tQXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uVG9rZW4gVGhlIGF1dGhvcml6YXRpb24gdG9rZW4gYXNzb2NpYXRlZCB3aXRoIHRoZSBib3RcbiAgICAgKiBAcGFyYW0gcmVnaW9uIFRoZSByZWdpb24gbmFtZSAoc2VlIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9ha2EubXMvY3NzcGVlY2gvcmVnaW9uXCI+cmVnaW9uIHBhZ2U8L2E+KS5cbiAgICAgKiBAcmV0dXJucyB7Qm90RnJhbWV3b3JrQ29uZmlnfSBBIG5ldyBib3QgZnJhbWV3b3JrIGNvbmZpZy5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUF1dGhvcml6YXRpb25Ub2tlbihhdXRob3JpemF0aW9uVG9rZW4sIHJlZ2lvbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoYXV0aG9yaXphdGlvblRva2VuLCBcImF1dGhvcml6YXRpb25Ub2tlblwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZ2lvbiwgXCJyZWdpb25cIik7XG4gICAgICAgIGNvbnN0IGJvdEZyYW1ld29ya0NvbmZpZyA9IG5ldyBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbCgpO1xuICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZSwgXCJib3RfZnJhbWV3b3JrXCIpO1xuICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgYXV0aG9yaXphdGlvblRva2VuKTtcbiAgICAgICAgYm90RnJhbWV3b3JrQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uLCByZWdpb24pO1xuICAgICAgICByZXR1cm4gYm90RnJhbWV3b3JrQ29uZmlnO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm90RnJhbWV3b3JrQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIEVudW1UcmFuc2xhdGlvbiwgU2ltcGxlU3BlZWNoUGhyYXNlIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24gfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIENvbnRhaW5zIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IHdoeSBhIHJlc3VsdCB3YXMgY2FuY2VsZWQuXG4gKiBAY2xhc3MgQ2FuY2VsbGF0aW9uRGV0YWlsc1xuICovXG5leHBvcnQgY2xhc3MgQ2FuY2VsbGF0aW9uRGV0YWlscyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gcmVhc29uIC0gVGhlIGNhbmNlbGxhdGlvbiByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIFRoZSBlcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlKSB7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQ2FuY2VsbGF0aW9uRGV0YWlscyBvYmplY3QgZm9yIHRoZSBjYW5jZWxlZCBSZWNvZ25pdGlvblJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvbkRldGFpbHMuZnJvbVJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1JlY29nbml0aW9uUmVzdWx0fSByZXN1bHQgLSBUaGUgcmVzdWx0IHRoYXQgd2FzIGNhbmNlbGVkLlxuICAgICAqIEByZXR1cm5zIHtDYW5jZWxsYXRpb25EZXRhaWxzfSBUaGUgY2FuY2VsbGF0aW9uIGRldGFpbHMgb2JqZWN0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIGxldCByZWFzb24gPSBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3I7XG4gICAgICAgIGxldCBlcnJvckNvZGUgPSBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvcjtcbiAgICAgICAgaWYgKCEhcmVzdWx0Lmpzb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHNpbXBsZVNwZWVjaCA9IFNpbXBsZVNwZWVjaFBocmFzZS5mcm9tSlNPTihyZXN1bHQuanNvbik7XG4gICAgICAgICAgICByZWFzb24gPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdChzaW1wbGVTcGVlY2guUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIXJlc3VsdC5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBlcnJvckNvZGUgPSBDYW5jZWxsYXRpb25FcnJvckNvZGVbcmVzdWx0LnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLk5vRXJyb3JdKV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDYW5jZWxsYXRpb25EZXRhaWxzKHJlYXNvbiwgcmVzdWx0LmVycm9yRGV0YWlscywgZXJyb3JDb2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJlYXNvbiB0aGUgcmVjb2duaXRpb24gd2FzIGNhbmNlbGVkLlxuICAgICAqIEBtZW1iZXIgQ2FuY2VsbGF0aW9uRGV0YWlscy5wcm90b3R5cGUucmVhc29uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtDYW5jZWxsYXRpb25SZWFzb259IFNwZWNpZmllcyB0aGUgcmVhc29uIGNhbmNlbGVkLlxuICAgICAqL1xuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHJlY29nbml0aW9uLCBwcm92aWRlcyBkZXRhaWxzIG9mIHRoZSBvY2N1cnJlZCBlcnJvci5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvbkRldGFpbHMucHJvdG90eXBlLmVycm9yRGV0YWlsc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGVycm9yIGRldGFpbHMuXG4gICAgICovXG4gICAgZ2V0IGVycm9yRGV0YWlscygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yRGV0YWlscztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGVycm9yIGNvZGUgaW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24uXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjEuMC5cbiAgICAgKiBAcmV0dXJuIEFuIGVycm9yIGNvZGUgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciByZWFzb24uXG4gICAgICovXG4gICAgZ2V0IEVycm9yQ29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yQ29kZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNhbmNlbGxhdGlvbkRldGFpbHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogIERlZmluZXMgZXJyb3IgY29kZSBpbiBjYXNlIHRoYXQgQ2FuY2VsbGF0aW9uUmVhc29uIGlzIEVycm9yLlxuICogIEFkZGVkIGluIHZlcnNpb24gMS4xLjAuXG4gKi9cbmV4cG9ydCB2YXIgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlO1xuKGZ1bmN0aW9uIChDYW5jZWxsYXRpb25FcnJvckNvZGUpIHtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCBubyBlcnJvciBvY2N1cnJlZCBkdXJpbmcgc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJOb0Vycm9yXCJdID0gMF0gPSBcIk5vRXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgYW4gYXV0aGVudGljYXRpb24gZXJyb3IuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIkF1dGhlbnRpY2F0aW9uRmFpbHVyZVwiXSA9IDFdID0gXCJBdXRoZW50aWNhdGlvbkZhaWx1cmVcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCBvbmUgb3IgbW9yZSByZWNvZ25pdGlvbiBwYXJhbWV0ZXJzIGFyZSBpbnZhbGlkLlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJCYWRSZXF1ZXN0UGFyYW1ldGVyc1wiXSA9IDJdID0gXCJCYWRSZXF1ZXN0UGFyYW1ldGVyc1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBudW1iZXIgb2YgcGFyYWxsZWwgcmVxdWVzdHMgZXhjZWVkZWQgdGhlIG51bWJlciBvZiBhbGxvd2VkXG4gICAgICogY29uY3VycmVudCB0cmFuc2NyaXB0aW9ucyBmb3IgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW1wiVG9vTWFueVJlcXVlc3RzXCJdID0gM10gPSBcIlRvb01hbnlSZXF1ZXN0c1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBhIGNvbm5lY3Rpb24gZXJyb3IuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIkNvbm5lY3Rpb25GYWlsdXJlXCJdID0gNF0gPSBcIkNvbm5lY3Rpb25GYWlsdXJlXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGEgdGltZS1vdXQgZXJyb3Igd2hlbiB3YWl0aW5nIGZvciByZXNwb25zZSBmcm9tIHNlcnZpY2UuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIlNlcnZpY2VUaW1lb3V0XCJdID0gNV0gPSBcIlNlcnZpY2VUaW1lb3V0XCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgYW4gZXJyb3IgaXMgcmV0dXJuZWQgYnkgdGhlIHNlcnZpY2UuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIlNlcnZpY2VFcnJvclwiXSA9IDZdID0gXCJTZXJ2aWNlRXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgYW4gdW5leHBlY3RlZCBydW50aW1lIGVycm9yLlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJSdW50aW1lRXJyb3JcIl0gPSA3XSA9IFwiUnVudGltZUVycm9yXCI7XG59KShDYW5jZWxsYXRpb25FcnJvckNvZGUgfHwgKENhbmNlbGxhdGlvbkVycm9yQ29kZSA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNhbmNlbGxhdGlvbkVycm9yQ29kZXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyB0aGUgcG9zc2libGUgcmVhc29ucyBhIHJlY29nbml0aW9uIHJlc3VsdCBtaWdodCBiZSBjYW5jZWxlZC5cbiAqIEBjbGFzcyBDYW5jZWxsYXRpb25SZWFzb25cbiAqL1xuZXhwb3J0IHZhciBDYW5jZWxsYXRpb25SZWFzb247XG4oZnVuY3Rpb24gKENhbmNlbGxhdGlvblJlYXNvbikge1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IGFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBzcGVlY2ggcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3JcbiAgICAgKi9cbiAgICBDYW5jZWxsYXRpb25SZWFzb25bQ2FuY2VsbGF0aW9uUmVhc29uW1wiRXJyb3JcIl0gPSAwXSA9IFwiRXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgZW5kIG9mIHRoZSBhdWRpbyBzdHJlYW0gd2FzIHJlYWNoZWQuXG4gICAgICogQG1lbWJlciBDYW5jZWxsYXRpb25SZWFzb24uRW5kT2ZTdHJlYW1cbiAgICAgKi9cbiAgICBDYW5jZWxsYXRpb25SZWFzb25bQ2FuY2VsbGF0aW9uUmVhc29uW1wiRW5kT2ZTdHJlYW1cIl0gPSAxXSA9IFwiRW5kT2ZTdHJlYW1cIjtcbn0pKENhbmNlbGxhdGlvblJlYXNvbiB8fCAoQ2FuY2VsbGF0aW9uUmVhc29uID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2FuY2VsbGF0aW9uUmVhc29uLmpzLm1hcFxuIiwiLy9cbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBmaWxlIGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGZ1bGwgbGljZW5zZSBpbmZvcm1hdGlvbi5cbi8vXG5pbXBvcnQgeyBDb25uZWN0aW9uRXZlbnRBcmdzLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogQ29ubmVjdGlvbiBpcyBhIHByb3h5IGNsYXNzIGZvciBtYW5hZ2luZyBjb25uZWN0aW9uIHRvIHRoZSBzcGVlY2ggc2VydmljZSBvZiB0aGUgc3BlY2lmaWVkIFJlY29nbml6ZXIuXG4gKiBCeSBkZWZhdWx0LCBhIFJlY29nbml6ZXIgYXV0b25vbW91c2x5IG1hbmFnZXMgY29ubmVjdGlvbiB0byBzZXJ2aWNlIHdoZW4gbmVlZGVkLlxuICogVGhlIENvbm5lY3Rpb24gY2xhc3MgcHJvdmlkZXMgYWRkaXRpb25hbCBtZXRob2RzIGZvciB1c2VycyB0byBleHBsaWNpdGx5IG9wZW4gb3IgY2xvc2UgYSBjb25uZWN0aW9uIGFuZFxuICogdG8gc3Vic2NyaWJlIHRvIGNvbm5lY3Rpb24gc3RhdHVzIGNoYW5nZXMuXG4gKiBUaGUgdXNlIG9mIENvbm5lY3Rpb24gaXMgb3B0aW9uYWwsIGFuZCBtYWlubHkgZm9yIHNjZW5hcmlvcyB3aGVyZSBmaW5lIHR1bmluZyBvZiBhcHBsaWNhdGlvblxuICogYmVoYXZpb3IgYmFzZWQgb24gY29ubmVjdGlvbiBzdGF0dXMgaXMgbmVlZGVkLiBVc2VycyBjYW4gb3B0aW9uYWxseSBjYWxsIE9wZW4oKSB0byBtYW51YWxseSBzZXQgdXAgYSBjb25uZWN0aW9uXG4gKiBpbiBhZHZhbmNlIGJlZm9yZSBzdGFydGluZyByZWNvZ25pdGlvbiBvbiB0aGUgUmVjb2duaXplciBhc3NvY2lhdGVkIHdpdGggdGhpcyBDb25uZWN0aW9uLlxuICogSWYgdGhlIFJlY29nbml6ZXIgbmVlZHMgdG8gY29ubmVjdCBvciBkaXNjb25uZWN0IHRvIHNlcnZpY2UsIGl0IHdpbGxcbiAqIHNldHVwIG9yIHNodXRkb3duIHRoZSBjb25uZWN0aW9uIGluZGVwZW5kZW50bHkuIEluIHRoaXMgY2FzZSB0aGUgQ29ubmVjdGlvbiB3aWxsIGJlIG5vdGlmaWVkIGJ5IGNoYW5nZSBvZiBjb25uZWN0aW9uXG4gKiBzdGF0dXMgdmlhIENvbm5lY3RlZC9EaXNjb25uZWN0ZWQgZXZlbnRzLlxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjIuMC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIENvbm5lY3Rpb24gaW5zdGFuY2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHJlY29nbml6ZXIgVGhlIHJlY29nbml6ZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb25uZWN0aW9uLlxuICAgICAqIEByZXR1cm4gVGhlIENvbm5lY3Rpb24gaW5zdGFuY2Ugb2YgdGhlIHJlY29nbml6ZXIuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZWNvZ25pemVyKHJlY29nbml6ZXIpIHtcbiAgICAgICAgY29uc3QgcmVjb0Jhc2UgPSByZWNvZ25pemVyLmludGVybmFsRGF0YTtcbiAgICAgICAgY29uc3QgcmV0ID0gbmV3IENvbm5lY3Rpb24oKTtcbiAgICAgICAgcmV0LnByaXZTZXJ2aWNlUmVjb2duaXplciA9IHJlY29CYXNlO1xuICAgICAgICByZXQucHJpdkV2ZW50TGlzdGVuZXIgPSByZXQucHJpdlNlcnZpY2VSZWNvZ25pemVyLmNvbm5lY3Rpb25FdmVudHMuYXR0YWNoKChjb25uZWN0aW9uRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uRXZlbnQubmFtZSA9PT0gXCJDb25uZWN0aW9uRXN0YWJsaXNoZWRFdmVudFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhcmV0LmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXQuY29ubmVjdGVkKG5ldyBDb25uZWN0aW9uRXZlbnRBcmdzKGNvbm5lY3Rpb25FdmVudC5jb25uZWN0aW9uSWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb25uZWN0aW9uRXZlbnQubmFtZSA9PT0gXCJDb25uZWN0aW9uQ2xvc2VkRXZlbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghIXJldC5kaXNjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LmRpc2Nvbm5lY3RlZChuZXcgQ29ubmVjdGlvbkV2ZW50QXJncyhjb25uZWN0aW9uRXZlbnQuY29ubmVjdGlvbklkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRvIHNldCB1cCBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2aWNlLlxuICAgICAqIFVzZXJzIGNhbiBvcHRpb25hbGx5IGNhbGwgb3BlbkNvbm5lY3Rpb24oKSB0byBtYW51YWxseSBzZXQgdXAgYSBjb25uZWN0aW9uIGluIGFkdmFuY2UgYmVmb3JlIHN0YXJ0aW5nIHJlY29nbml0aW9uIG9uIHRoZVxuICAgICAqIFJlY29nbml6ZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgQ29ubmVjdGlvbi4gQWZ0ZXIgc3RhcnRpbmcgcmVjb2duaXRpb24sIGNhbGxpbmcgT3BlbigpIHdpbGwgaGF2ZSBubyBlZmZlY3RcbiAgICAgKlxuICAgICAqIE5vdGU6IE9uIHJldHVybiwgdGhlIGNvbm5lY3Rpb24gbWlnaHQgbm90IGJlIHJlYWR5IHlldC4gUGxlYXNlIHN1YnNjcmliZSB0byB0aGUgQ29ubmVjdGVkIGV2ZW50IHRvXG4gICAgICogYmUgbm90ZmllZCB3aGVuIHRoZSBjb25uZWN0aW9uIGlzIGVzdGFibGlzaGVkLlxuICAgICAqL1xuICAgIG9wZW5Db25uZWN0aW9uKCkge1xuICAgICAgICB0aGlzLnByaXZTZXJ2aWNlUmVjb2duaXplci5jb25uZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgY29ubmVjdGlvbiB0aGUgc2VydmljZS5cbiAgICAgKiBVc2VycyBjYW4gb3B0aW9uYWxseSBjYWxsIGNsb3NlQ29ubmVjdGlvbigpIHRvIG1hbnVhbGx5IHNodXRkb3duIHRoZSBjb25uZWN0aW9uIG9mIHRoZSBhc3NvY2lhdGVkIFJlY29nbml6ZXIuXG4gICAgICpcbiAgICAgKiBJZiBjbG9zZUNvbm5lY3Rpb24oKSBpcyBjYWxsZWQgZHVyaW5nIHJlY29nbml0aW9uLCByZWNvZ25pdGlvbiB3aWxsIGZhaWwgYW5kIGNhbmNlbCB3dGloIGFuIGVycm9yLlxuICAgICAqL1xuICAgIGNsb3NlQ29ubmVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5wcml2U2VydmljZVJlY29nbml6ZXIuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIG9mIGFzc29jaWF0ZWQgcmVzb3VyY2VzLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ubmVjdGlvbi5qcy5tYXBcbiIsIi8vXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4gU2VlIExJQ0VOU0UubWQgZmlsZSBpbiB0aGUgcHJvamVjdCByb290IGZvciBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4vL1xuaW1wb3J0IHsgU2Vzc2lvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyBwYXlsb2FkIGZvciBjb25uZWN0aW9uIGV2ZW50cyBsaWtlIENvbm5lY3RlZC9EaXNjb25uZWN0ZWQuXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMi4wXG4gKi9cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uRXZlbnRBcmdzIGV4dGVuZHMgU2Vzc2lvbkV2ZW50QXJncyB7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogQGNsYXNzIENvbnRyYWN0c1xuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnRyYWN0cyB7XG4gICAgc3RhdGljIHRocm93SWZOdWxsT3JVbmRlZmluZWQocGFyYW0sIG5hbWUpIHtcbiAgICAgICAgaWYgKHBhcmFtID09PSB1bmRlZmluZWQgfHwgcGFyYW0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRocm93SWZOdWxsT3JVbmRlZmluZWQ6XCIgKyBuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgdGhyb3dJZk51bGwocGFyYW0sIG5hbWUpIHtcbiAgICAgICAgaWYgKHBhcmFtID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aHJvd0lmTnVsbDpcIiArIG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyB0aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShwYXJhbSwgbmFtZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChwYXJhbSwgbmFtZSk7XG4gICAgICAgIGlmICgoXCJcIiArIHBhcmFtKS50cmltKCkubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhyb3dJZk51bGxPcldoaXRlc3BhY2U6XCIgKyBuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgdGhyb3dJZkRpc3Bvc2VkKGlzRGlzcG9zZWQpIHtcbiAgICAgICAgaWYgKGlzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRoZSBvYmplY3QgaXMgYWxyZWFkeSBkaXNwb3NlZFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgdGhyb3dJZkFycmF5RW1wdHlPcldoaXRlc3BhY2UoYXJyYXksIG5hbWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoYXJyYXksIG5hbWUpO1xuICAgICAgICBpZiAoYXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aHJvd0lmQXJyYXlFbXB0eU9yV2hpdGVzcGFjZTpcIiArIG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnJheSkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGl0ZW0sIG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyB0aHJvd0lmRmlsZURvZXNOb3RFeGlzdChwYXJhbSwgbmFtZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocGFyYW0sIG5hbWUpO1xuICAgICAgICAvLyBUT0RPIGNoZWNrIGZvciBmaWxlIGV4aXN0ZW5jZS5cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnRyYWN0cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkLCBTcGVlY2hDb25maWdJbXBsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBDbGFzcyB0aGF0IGRlZmluZXMgYmFzZSBjb25maWd1cmF0aW9ucyBmb3IgZGlhbG9nIHNlcnZpY2UgY29ubmVjdG9yXG4gKiBAY2xhc3MgRGlhbG9nU2VydmljZUNvbmZpZ1xuICovXG5leHBvcnQgY2xhc3MgRGlhbG9nU2VydmljZUNvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBEaWFsb2dTZXJ2aWNlIGNvbmZpZy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxufVxuLyoqXG4gKiBEaWFsb2cgU2VydmljZSBjb25maWd1cmF0aW9uLlxuICogQGNsYXNzIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsXG4gKi9cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsIGV4dGVuZHMgRGlhbG9nU2VydmljZUNvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBkaWFsb2dTZXJ2aWNlIGNvbmZpZy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoQ29uZmlnID0gbmV3IFNwZWVjaENvbmZpZ0ltcGwoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgYWNjZXNzIHRvIGN1c3RvbSBwcm9wZXJ0aWVzLlxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb3BlcnR5Q29sbGVjdGlvbn0gVGhlIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hDb25maWcucHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3BlZWNoIHJlY29nbml0aW9uIGxhbmd1YWdlLlxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hDb25maWcuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc3BlZWNoIHJlY29nbml0aW9uIGxhbmd1YWdlLlxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGxhbmd1YWdlIHRvIHNldC5cbiAgICAgKi9cbiAgICBzZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSh2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaENvbmZpZy5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYSBuYW1lZCBwcm9wZXJ0eSBhcyB2YWx1ZVxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwucHJvdG90eXBlLnNldFByb3BlcnR5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7UHJvcGVydHlJZCB8IHN0cmluZ30gbmFtZSAtIFRoZSBwcm9wZXJ0eSB0byBzZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIHZhbHVlLlxuICAgICAqL1xuICAgIHNldFByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaENvbmZpZy5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYSBuYW1lZCBwcm9wZXJ0eSBhcyB2YWx1ZVxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwucHJvdG90eXBlLmdldFByb3BlcnR5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7UHJvcGVydHlJZCB8IHN0cmluZ30gbmFtZSAtIFRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRlZiAtIFRoZSBkZWZhdWx0IHZhbHVlIHRvIHJldHVybiBpbiBjYXNlIHRoZSBwcm9wZXJ0eSBpcyBub3Qga25vd24uXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGN1cnJlbnQgdmFsdWUsIG9yIHByb3ZpZGVkIGRlZmF1bHQsIG9mIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBnZXRQcm9wZXJ0eShuYW1lLCBkZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaENvbmZpZy5nZXRQcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJveHkgY29uZmlndXJhdGlvbi5cbiAgICAgKiBPbmx5IHJlbGV2YW50IGluIE5vZGUuanMgZW52aXJvbm1lbnRzLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS40LjAuXG4gICAgICogQHBhcmFtIHByb3h5SG9zdE5hbWUgVGhlIGhvc3QgbmFtZSBvZiB0aGUgcHJveHkgc2VydmVyLCB3aXRob3V0IHRoZSBwcm90b2NvbCBzY2hlbWUgKGh0dHA6Ly8pXG4gICAgICogQHBhcmFtIHByb3h5UG9ydCBUaGUgcG9ydCBudW1iZXIgb2YgdGhlIHByb3h5IHNlcnZlci5cbiAgICAgKiBAcGFyYW0gcHJveHlVc2VyTmFtZSBUaGUgdXNlciBuYW1lIG9mIHRoZSBwcm94eSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIHByb3h5UGFzc3dvcmQgVGhlIHBhc3N3b3JkIG9mIHRoZSBwcm94eSBzZXJ2ZXIuXG4gICAgICovXG4gICAgc2V0UHJveHkocHJveHlIb3N0TmFtZSwgcHJveHlQb3J0LCBwcm94eVVzZXJOYW1lLCBwcm94eVBhc3N3b3JkKSB7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eUhvc3ROYW1lLCBwcm94eUhvc3ROYW1lKTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UG9ydCwgYCR7cHJveHlQb3J0fWApO1xuICAgICAgICBpZiAocHJveHlVc2VyTmFtZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5VXNlck5hbWUsIHByb3h5VXNlck5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm94eVBhc3N3b3JkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQYXNzd29yZCwgcHJveHlQYXNzd29yZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0U2VydmljZVByb3BlcnR5KG5hbWUsIHZhbHVlLCBjaGFubmVsKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaENvbmZpZy5zZXRTZXJ2aWNlUHJvcGVydHkobmFtZSwgdmFsdWUsIGNoYW5uZWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIG9mIGFzc29jaWF0ZWQgcmVzb3VyY2VzLlxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaWFsb2dTZXJ2aWNlQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBEaWFsb2dDb25uZWN0aW9uRmFjdG9yeSB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0RpYWxvZ0Nvbm5lY3RvckZhY3RvcnlcIjtcbmltcG9ydCB7IERpYWxvZ1NlcnZpY2VBZGFwdGVyLCBSZWNvZ25pdGlvbk1vZGUsIFJlY29nbml6ZXJDb25maWcsIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBSZWNvZ25pemVyIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuL1Byb3BlcnR5SWRcIjtcbi8qKlxuICogRGlhbG9nIFNlcnZpY2UgQ29ubmVjdG9yXG4gKiBAY2xhc3MgRGlhbG9nU2VydmljZUNvbm5lY3RvclxuICovXG5leHBvcnQgY2xhc3MgRGlhbG9nU2VydmljZUNvbm5lY3RvciBleHRlbmRzIFJlY29nbml6ZXIge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RGlhbG9nU2VydmljZUNvbmZpZ30gZGlhbG9nQ29uZmlnIC0gU2V0IG9mIHByb3BlcnRpZXMgdG8gY29uZmlndXJlIHRoaXMgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGNvbmZpZyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkaWFsb2dDb25maWcsIGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGRpYWxvZ1NlcnZpY2VDb25maWdJbXBsID0gZGlhbG9nQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoZGlhbG9nQ29uZmlnLCBcImRpYWxvZ0NvbmZpZ1wiKTtcbiAgICAgICAgc3VwZXIoYXVkaW9Db25maWcsIGRpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3BlcnRpZXMsIG5ldyBEaWFsb2dDb25uZWN0aW9uRmFjdG9yeSgpKTtcbiAgICAgICAgdGhpcy5pc1R1cm5Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IGRpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3BlcnRpZXMuY2xvbmUoKTtcbiAgICAgICAgY29uc3QgYWdlbnRDb25maWcgPSB0aGlzLmJ1aWxkQWdlbnRDb25maWcoKTtcbiAgICAgICAgdGhpcy5wcml2UmVjby5hZ2VudENvbmZpZy5zZXQoYWdlbnRDb25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgYSBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2aWNlLlxuICAgICAqIFVzZXJzIGNhbiBvcHRpb25hbGx5IGNhbGwgY29ubmVjdCgpIHRvIG1hbnVhbGx5IHNldCB1cCBhIGNvbm5lY3Rpb24gaW4gYWR2YW5jZSwgYmVmb3JlIHN0YXJ0aW5nIGludGVyYWN0aW9ucy5cbiAgICAgKlxuICAgICAqIE5vdGU6IE9uIHJldHVybiwgdGhlIGNvbm5lY3Rpb24gbWlnaHQgbm90IGJlIHJlYWR5IHlldC4gUGxlYXNlIHN1YnNjcmliZSB0byB0aGUgQ29ubmVjdGVkIGV2ZW50IHRvXG4gICAgICogYmUgbm90aWZpZWQgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZC5cbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IucHJvdG90eXBlLmNvbm5lY3RcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5wcml2UmVjby5jb25uZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgY29ubmVjdGlvbiB0aGUgc2VydmljZS5cbiAgICAgKiBVc2VycyBjYW4gb3B0aW9uYWxseSBjYWxsIGRpc2Nvbm5lY3QoKSB0byBtYW51YWxseSBzaHV0ZG93biB0aGUgY29ubmVjdGlvbiBvZiB0aGUgYXNzb2NpYXRlZCBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLlxuICAgICAqXG4gICAgICogSWYgZGlzY29ubmVjdCgpIGlzIGNhbGxlZCBkdXJpbmcgYSByZWNvZ25pdGlvbiwgcmVjb2duaXRpb24gd2lsbCBmYWlsIGFuZCBjYW5jZWwgd2l0aCBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICB0aGlzLnByaXZSZWNvLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIHNldCBhdXRob3JpemF0aW9uVG9rZW4odG9rZW4pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRva2VuLCBcInRva2VuXCIpO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLlxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbm5lY3Rvci5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHJlY29nbml0aW9uIGFuZCBzdG9wcyBhZnRlciB0aGUgZmlyc3QgdXR0ZXJhbmNlIGlzIHJlY29nbml6ZWQuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3RvdHlwZS5saXN0ZW5PbmNlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgcmVzdWx0IHdoZW4gdGhlIHJlY28gaGFzIGNvbXBsZXRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIGxpc3Rlbk9uY2VBc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVHVybkNvbXBsZXRlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2SXNEaXNwb3NlZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVHVybkNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0YXJ0KFJlY29nbml0aW9uTW9kZS5Db252ZXJzYXRpb24sIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNUdXJuQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2IoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVHVybkNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyKHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERlc3Ryb3kgdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRBY3Rpdml0eUFzeW5jKGFjdGl2aXR5KSB7XG4gICAgICAgIHRoaXMucHJpdlJlY28uc2VuZE1lc3NhZ2UoYWN0aXZpdHkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjbG9zZXMgYWxsIGV4dGVybmFsIHJlc291cmNlcyBoZWxkIGJ5IGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZJc0Rpc3Bvc2VkKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgIH1cbiAgICBkaXNwb3NlKGRpc3Bvc2luZykge1xuICAgICAgICBpZiAodGhpcy5wcml2SXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHN1cGVyLmRpc3Bvc2UoZGlzcG9zaW5nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IFJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnLCB0aGlzLnByaXZQcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgY3JlYXRlU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICBjb25zdCBhdWRpb1NvdXJjZSA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICByZXR1cm4gbmV3IERpYWxvZ1NlcnZpY2VBZGFwdGVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHRoaXMpO1xuICAgIH1cbiAgICBidWlsZEFnZW50Q29uZmlnKCkge1xuICAgICAgICBjb25zdCBjb21tdW5pY2F0aW9uVHlwZSA9IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShcIkNvbnZlcnNhdGlvbl9Db21tdW5pY2F0aW9uX1R5cGVcIiwgXCJEZWZhdWx0XCIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm90SW5mbzoge1xuICAgICAgICAgICAgICAgIGNvbW1UeXBlOiBjb21tdW5pY2F0aW9uVHlwZSxcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uSWQ6IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkKSxcbiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZyb21JZDogdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0Zyb21fSWQsIHVuZGVmaW5lZClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2ZXJzaW9uOiAwLjJcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpYWxvZ1NlcnZpY2VDb25uZWN0b3IuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCB7IEF1ZGlvQ29uZmlnIH0gZnJvbSBcIi4vQXVkaW8vQXVkaW9Db25maWdcIjtcbmV4cG9ydCB7IEF1ZGlvU3RyZWFtRm9ybWF0IH0gZnJvbSBcIi4vQXVkaW8vQXVkaW9TdHJlYW1Gb3JtYXRcIjtcbmV4cG9ydCB7IEF1ZGlvSW5wdXRTdHJlYW0sIFB1bGxBdWRpb0lucHV0U3RyZWFtLCBQdXNoQXVkaW9JbnB1dFN0cmVhbSB9IGZyb20gXCIuL0F1ZGlvL0F1ZGlvSW5wdXRTdHJlYW1cIjtcbmV4cG9ydCB7IEF1ZGlvT3V0cHV0U3RyZWFtLCBQdWxsQXVkaW9PdXRwdXRTdHJlYW0gfSBmcm9tIFwiLi9BdWRpby9BdWRpb091dHB1dFN0cmVhbVwiO1xuZXhwb3J0IHsgQ2FuY2VsbGF0aW9uUmVhc29uIH0gZnJvbSBcIi4vQ2FuY2VsbGF0aW9uUmVhc29uXCI7XG5leHBvcnQgeyBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrIH0gZnJvbSBcIi4vQXVkaW8vUHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFja1wiO1xuZXhwb3J0IHsgS2V5d29yZFJlY29nbml0aW9uTW9kZWwgfSBmcm9tIFwiLi9LZXl3b3JkUmVjb2duaXRpb25Nb2RlbFwiO1xuZXhwb3J0IHsgU2Vzc2lvbkV2ZW50QXJncyB9IGZyb20gXCIuL1Nlc3Npb25FdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFJlY29nbml0aW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4vUmVjb2duaXRpb25FdmVudEFyZ3NcIjtcbmV4cG9ydCB7IE91dHB1dEZvcm1hdCB9IGZyb20gXCIuL091dHB1dEZvcm1hdFwiO1xuZXhwb3J0IHsgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9JbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgUmVjb2duaXRpb25SZXN1bHQgfSBmcm9tIFwiLi9SZWNvZ25pdGlvblJlc3VsdFwiO1xuZXhwb3J0IHsgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQgfSBmcm9tIFwiLi9TcGVlY2hSZWNvZ25pdGlvblJlc3VsdFwiO1xuZXhwb3J0IHsgSW50ZW50UmVjb2duaXRpb25SZXN1bHQgfSBmcm9tIFwiLi9JbnRlbnRSZWNvZ25pdGlvblJlc3VsdFwiO1xuZXhwb3J0IHsgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwgfSBmcm9tIFwiLi9MYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbFwiO1xuZXhwb3J0IHsgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9TcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyB9IGZyb20gXCIuL1NwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9UcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBUcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJncyB9IGZyb20gXCIuL1RyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0IH0gZnJvbSBcIi4vVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdFwiO1xuZXhwb3J0IHsgVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQgfSBmcm9tIFwiLi9UcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdFwiO1xuZXhwb3J0IHsgUmVzdWx0UmVhc29uIH0gZnJvbSBcIi4vUmVzdWx0UmVhc29uXCI7XG5leHBvcnQgeyBTcGVlY2hDb25maWcsIFNwZWVjaENvbmZpZ0ltcGwgfSBmcm9tIFwiLi9TcGVlY2hDb25maWdcIjtcbmV4cG9ydCB7IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnIH0gZnJvbSBcIi4vU3BlZWNoVHJhbnNsYXRpb25Db25maWdcIjtcbmV4cG9ydCB7IFByb3BlcnR5Q29sbGVjdGlvbiB9IGZyb20gXCIuL1Byb3BlcnR5Q29sbGVjdGlvblwiO1xuZXhwb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuL1Byb3BlcnR5SWRcIjtcbmV4cG9ydCB7IFJlY29nbml6ZXIgfSBmcm9tIFwiLi9SZWNvZ25pemVyXCI7XG5leHBvcnQgeyBTcGVlY2hSZWNvZ25pemVyIH0gZnJvbSBcIi4vU3BlZWNoUmVjb2duaXplclwiO1xuZXhwb3J0IHsgSW50ZW50UmVjb2duaXplciB9IGZyb20gXCIuL0ludGVudFJlY29nbml6ZXJcIjtcbmV4cG9ydCB7IFRyYW5zbGF0aW9uUmVjb2duaXplciB9IGZyb20gXCIuL1RyYW5zbGF0aW9uUmVjb2duaXplclwiO1xuZXhwb3J0IHsgVHJhbnNsYXRpb25zIH0gZnJvbSBcIi4vVHJhbnNsYXRpb25zXCI7XG5leHBvcnQgeyBOb01hdGNoUmVhc29uIH0gZnJvbSBcIi4vTm9NYXRjaFJlYXNvblwiO1xuZXhwb3J0IHsgTm9NYXRjaERldGFpbHMgfSBmcm9tIFwiLi9Ob01hdGNoRGV0YWlsc1wiO1xuZXhwb3J0IHsgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzIH0gZnJvbSBcIi4vVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBJbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzIH0gZnJvbSBcIi4vSW50ZW50UmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgQ2FuY2VsbGF0aW9uRGV0YWlscyB9IGZyb20gXCIuL0NhbmNlbGxhdGlvbkRldGFpbHNcIjtcbmV4cG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZSB9IGZyb20gXCIuL0NhbmNlbGxhdGlvbkVycm9yQ29kZXNcIjtcbmV4cG9ydCB7IENvbm5lY3Rpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9Db25uZWN0aW9uRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBDb25uZWN0aW9uIH0gZnJvbSBcIi4vQ29ubmVjdGlvblwiO1xuZXhwb3J0IHsgUGhyYXNlTGlzdEdyYW1tYXIgfSBmcm9tIFwiLi9QaHJhc2VMaXN0R3JhbW1hclwiO1xuZXhwb3J0IHsgRGlhbG9nU2VydmljZUNvbmZpZyB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VDb25maWdcIjtcbmV4cG9ydCB7IEJvdEZyYW1ld29ya0NvbmZpZyB9IGZyb20gXCIuL0JvdEZyYW1ld29ya0NvbmZpZ1wiO1xuZXhwb3J0IHsgU3BlZWNoQ29tbWFuZHNDb25maWcgfSBmcm9tIFwiLi9TcGVlY2hDb21tYW5kc0NvbmZpZ1wiO1xuZXhwb3J0IHsgRGlhbG9nU2VydmljZUNvbm5lY3RvciB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VDb25uZWN0b3JcIjtcbmV4cG9ydCB7IEFjdGl2aXR5UmVjZWl2ZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9BY3Rpdml0eVJlY2VpdmVkRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBTZXJ2aWNlUHJvcGVydHlDaGFubmVsIH0gZnJvbSBcIi4vU2VydmljZVByb3BlcnR5Q2hhbm5lbFwiO1xuZXhwb3J0IHsgUHJvZmFuaXR5T3B0aW9uIH0gZnJvbSBcIi4vUHJvZmFuaXR5T3B0aW9uXCI7XG5leHBvcnQgeyBCYXNlQXVkaW9QbGF5ZXIgfSBmcm9tIFwiLi9BdWRpby9CYXNlQXVkaW9QbGF5ZXJcIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhwb3J0cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZSBwYXlsb2FkIG9mIGludGVudCByZWNvZ25pdGlvbiBjYW5jZWxlZCByZXN1bHQgZXZlbnRzLlxuICogQGNsYXNzIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgZXh0ZW5kcyBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gcmVzdWx0IC0gVGhlIHJlc3VsdCBvZiB0aGUgaW50ZW50IHJlY29nbml0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7SW50ZW50UmVjb2duaXRpb25SZXN1bHR9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUsIHJlc3VsdCwgb2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLnJlYXNvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7Q2FuY2VsbGF0aW9uUmVhc29ufSBTcGVjaWZpZXMgdGhlIHJlYXNvbiBjYW5jZWxlZC5cbiAgICAgKi9cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZXJyb3IgY29kZSBpbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMS4wLlxuICAgICAqIEByZXR1cm4gQW4gZXJyb3IgY29kZSB0aGF0IHJlcHJlc2VudHMgdGhlIGVycm9yIHJlYXNvbi5cbiAgICAgKi9cbiAgICBnZXQgZXJyb3JDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JDb2RlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbiwgcHJvdmlkZXMgZGV0YWlscyBvZiB0aGUgb2NjdXJyZWQgZXJyb3IuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5lcnJvckRldGFpbHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogSW50ZW50IHJlY29nbml0aW9uIHJlc3VsdCBldmVudCBhcmd1bWVudHMuXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzIGV4dGVuZHMgUmVjb2duaXRpb25FdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHJlc3VsdCAtIFRoZSByZXN1bHQgb2YgdGhlIGludGVudCByZWNvZ25pdGlvbi5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyB0aGUgaW50ZW50IHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0ludGVudFJlY29nbml0aW9uUmVzdWx0fSBSZXByZXNlbnRzIHRoZSBpbnRlbnQgcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCByZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIEludGVudCByZWNvZ25pdGlvbiByZXN1bHQuXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVudFJlY29nbml0aW9uUmVzdWx0IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIGludGVudElkIC0gVGhlIGludGVudCBpZC5cbiAgICAgKiBAcGFyYW0gcmVzdWx0SWQgLSBUaGUgcmVzdWx0IGlkLlxuICAgICAqIEBwYXJhbSByZWFzb24gLSBUaGUgcmVhc29uLlxuICAgICAqIEBwYXJhbSB0ZXh0IC0gVGhlIHJlY29nbml6ZWQgdGV4dC5cbiAgICAgKiBAcGFyYW0gZHVyYXRpb24gLSBUaGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtIG9mZnNldCAtIFRoZSBvZmZzZXQgaW50byB0aGUgc3RyZWFtLlxuICAgICAqIEBwYXJhbSBlcnJvckRldGFpbHMgLSBFcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ganNvbiAtIEFkZGl0aW9uYWwgSnNvbiwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHByb3BlcnRpZXMgLSBBZGRpdGlvbmFsIHByb3BlcnRpZXMsIGlmIHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGludGVudElkLCByZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIocmVzdWx0SWQsIHJlYXNvbiwgdGV4dCwgZHVyYXRpb24sIG9mZnNldCwgZXJyb3JEZXRhaWxzLCBqc29uLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgdGhpcy5wcml2SW50ZW50SWQgPSBpbnRlbnRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBpbnRlbnQgaWRlbnRpZmllciBiZWluZyByZWNvZ25pemVkLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLmludGVudElkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgaW50ZW50IGlkZW50aWZpZXIgYmVpbmcgcmVjb2duaXplZC5cbiAgICAgKi9cbiAgICBnZXQgaW50ZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJbnRlbnRJZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVudFJlY29nbml0aW9uUmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBZGRlZExtSW50ZW50LCBJbnRlbnRDb25uZWN0aW9uRmFjdG9yeSwgSW50ZW50U2VydmljZVJlY29nbml6ZXIsIFJlY29nbml0aW9uTW9kZSwgUmVjb2duaXplckNvbmZpZywgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQsIFJlY29nbml6ZXIsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBJbnRlbnQgcmVjb2duaXplci5cbiAqIEBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgSW50ZW50UmVjb2duaXplciBleHRlbmRzIFJlY29nbml6ZXIge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBJbnRlbnRSZWNvZ25pemVyLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoQ29uZmlnfSBzcGVlY2hDb25maWcgLSBUaGUgc2V0IG9mIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcy5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGlucHV0IGNvbmZpZyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHNwZWVjaENvbmZpZywgXCJzcGVlY2hDb25maWdcIik7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0ltcGwgPSBzcGVlY2hDb25maWc7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGNvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICBzdXBlcihhdWRpb0NvbmZpZywgY29uZmlnSW1wbC5wcm9wZXJ0aWVzLCBuZXcgSW50ZW50Q29ubmVjdGlvbkZhY3RvcnkoKSk7XG4gICAgICAgIHRoaXMucHJpdkFkZGVkSW50ZW50cyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZBZGRlZExtSW50ZW50cyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IGNvbmZpZ0ltcGwucHJvcGVydGllcztcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSksIFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3Bva2VuIGxhbmd1YWdlIG9mIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgc3Bva2VuIGxhbmd1YWdlIG9mIHJlY29nbml0aW9uLlxuICAgICAqL1xuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogTm90ZTogUGxlYXNlIHVzZSBhIHRva2VuIGRlcml2ZWQgZnJvbSB5b3VyIExhbmd1YWdlVW5kZXJzdGFuZGluZyBzdWJzY3JpcHRpb24ga2V5IGZvciB0aGUgSW50ZW50IHJlY29nbml6ZXIuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIEludGVudFJlY29nbml6ZXIuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyXG4gICAgICogICAgICAgICAgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgSW50ZW50UmVjb2duaXplci5cbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBpbnRlbnQgcmVjb2duaXRpb24sIGFuZCBzdG9wcyBhZnRlciB0aGUgZmlyc3QgdXR0ZXJhbmNlIGlzIHJlY29nbml6ZWQuXG4gICAgICogVGhlIHRhc2sgcmV0dXJucyB0aGUgcmVjb2duaXRpb24gdGV4dCBhbmQgaW50ZW50IGFzIHJlc3VsdC5cbiAgICAgKiBOb3RlOiBSZWNvZ25pemVPbmNlQXN5bmMoKSByZXR1cm5zIHdoZW4gdGhlIGZpcnN0IHV0dGVyYW5jZSBoYXMgYmVlbiByZWNvZ25pemVkLFxuICAgICAqICAgICAgIHNvIGl0IGlzIHN1aXRhYmxlIG9ubHkgZm9yIHNpbmdsZSBzaG90IHJlY29nbml0aW9uIGxpa2UgY29tbWFuZCBvciBxdWVyeS5cbiAgICAgKiAgICAgICBGb3IgbG9uZy1ydW5uaW5nIHJlY29nbml0aW9uLCB1c2UgU3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpIGluc3RlYWQuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5yZWNvZ25pemVPbmNlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgcmVjb2duaXRpb24gaGFzIGZpbmlzaGVkIHdpdGggYW4gSW50ZW50UmVjb2duaXRpb25SZXN1bHQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICByZWNvZ25pemVPbmNlQXN5bmMoY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnByaXZBZGRlZExtSW50ZW50cykubGVuZ3RoICE9PSAwIHx8IHVuZGVmaW5lZCAhPT0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5idWlsZFNwZWVjaENvbnRleHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvLnNwZWVjaENvbnRleHQuc2V0U2VjdGlvbihcImludGVudFwiLCBjb250ZXh0LkludGVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjby5keW5hbWljR3JhbW1hci5hZGRSZWZlcmVuY2VHcmFtbWFyKGNvbnRleHQuUmVmZXJlbmNlR3JhbW1hcnMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGludGVudFJlY28gPSB0aGlzLnByaXZSZWNvO1xuICAgICAgICAgICAgICAgIGludGVudFJlY28uc2V0SW50ZW50cyh0aGlzLnByaXZBZGRlZExtSW50ZW50cywgdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0YXJ0KFJlY29nbml0aW9uTW9kZS5JbnRlcmFjdGl2ZSwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgc3BlZWNoIHJlY29nbml0aW9uLCB1bnRpbCBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoKSBpcyBjYWxsZWQuXG4gICAgICogVXNlciBtdXN0IHN1YnNjcmliZSB0byBldmVudHMgdG8gcmVjZWl2ZSByZWNvZ25pdGlvbiByZXN1bHRzLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgdGhlIHJlY29nbml0aW9uIGhhcyBzdGFydGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplcik7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5idWlsZFNwZWVjaENvbnRleHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvLnNwZWVjaENvbnRleHQuc2V0U2VjdGlvbihcImludGVudFwiLCBjb250ZXh0LkludGVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjby5keW5hbWljR3JhbW1hci5hZGRSZWZlcmVuY2VHcmFtbWFyKGNvbnRleHQuUmVmZXJlbmNlR3JhbW1hcnMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGludGVudFJlY28gPSB0aGlzLnByaXZSZWNvO1xuICAgICAgICAgICAgICAgIGludGVudFJlY28uc2V0SW50ZW50cyh0aGlzLnByaXZBZGRlZExtSW50ZW50cywgdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0YXJ0KFJlY29nbml0aW9uTW9kZS5Db252ZXJzYXRpb24sIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIC8vIHJlcG9ydCByZXN1bHQgdG8gcHJvbWlzZS5cbiAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEZXN0cm95IHRoZSByZWNvZ25pemVyLlxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGNvbnRpbnVvdXMgaW50ZW50IHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgcmVjb2duaXRpb24gaGFzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEZXN0cm95IHRoZSByZWNvZ25pemVyLlxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBzcGVlY2ggcmVjb2duaXRpb24gd2l0aCBrZXl3b3JkIHNwb3R0aW5nLCB1bnRpbCBzdG9wS2V5d29yZFJlY29nbml0aW9uQXN5bmMoKSBpcyBjYWxsZWQuXG4gICAgICogVXNlciBtdXN0IHN1YnNjcmliZSB0byBldmVudHMgdG8gcmVjZWl2ZSByZWNvZ25pdGlvbiByZXN1bHRzLlxuICAgICAqIE5vdGU6IEtleSB3b3JkIHNwb3R0aW5nIGZ1bmN0aW9uYWxpdHkgaXMgb25seSBhdmFpbGFibGUgb24gdGhlIFNwZWVjaCBEZXZpY2VzIFNESy5cbiAgICAgKiAgICAgICBUaGlzIGZ1bmN0aW9uYWxpdHkgaXMgY3VycmVudGx5IG5vdCBpbmNsdWRlZCBpbiB0aGUgU0RLIGl0c2VsZi5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLnN0YXJ0S2V5d29yZFJlY29nbml0aW9uQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtLZXl3b3JkUmVjb2duaXRpb25Nb2RlbH0gbW9kZWwgLSBUaGUga2V5d29yZCByZWNvZ25pdGlvbiBtb2RlbCB0aGF0IHNwZWNpZmllcyB0aGUga2V5d29yZCB0byBiZSByZWNvZ25pemVkLlxuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgcmVjb2duaXRpb24gaGFzIHN0YXJ0ZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBzdGFydEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jKG1vZGVsLCBjYiwgZXJyKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChtb2RlbCwgXCJtb2RlbFwiKTtcbiAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICBlcnIoXCJOb3QgeWV0IGltcGxlbWVudGVkLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyBjb250aW51b3VzIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAgICAgKiBOb3RlOiBLZXkgd29yZCBzcG90dGluZyBmdW5jdGlvbmFsaXR5IGlzIG9ubHkgYXZhaWxhYmxlIG9uIHRoZSBTcGVlY2ggRGV2aWNlcyBTREsuXG4gICAgICogICAgICAgVGhpcyBmdW5jdGlvbmFsaXR5IGlzIGN1cnJlbnRseSBub3QgaW5jbHVkZWQgaW4gdGhlIFNESyBpdHNlbGYuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5zdG9wS2V5d29yZFJlY29nbml0aW9uQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwaHJhc2UgdGhhdCBzaG91bGQgYmUgcmVjb2duaXplZCBhcyBpbnRlbnQuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5hZGRJbnRlbnRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGludGVudElkIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBpZGVudGlmaWVyIG9mIHRoZSBpbnRlbnQgdG8gYmUgcmVjb2duaXplZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGhyYXNlIC0gQSBTdHJpbmcgdGhhdCBzcGVjaWZpZXMgdGhlIHBocmFzZSByZXByZXNlbnRpbmcgdGhlIGludGVudC5cbiAgICAgKi9cbiAgICBhZGRJbnRlbnQoc2ltcGxlUGhyYXNlLCBpbnRlbnRJZCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplcik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShpbnRlbnRJZCwgXCJpbnRlbnRJZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHNpbXBsZVBocmFzZSwgXCJzaW1wbGVQaHJhc2VcIik7XG4gICAgICAgIHRoaXMucHJpdkFkZGVkSW50ZW50cy5wdXNoKFtpbnRlbnRJZCwgc2ltcGxlUGhyYXNlXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gaW50ZW50IGZyb20gTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBzZXJ2aWNlIGZvciByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmFkZEludGVudFdpdGhMYW5ndWFnZU1vZGVsXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbnRlbnRJZCAtIEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgaWRlbnRpZmllciBvZiB0aGUgaW50ZW50XG4gICAgICogICAgICAgIHRvIGJlIHJlY29nbml6ZWQuIElnbm9yZWQgaWYgaW50ZW50TmFtZSBpcyBlbXB0eS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgLSBUaGUgaW50ZW50IG1vZGVsIGZyb20gTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBzZXJ2aWNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbnRlbnROYW1lIC0gVGhlIGludGVudCBuYW1lIGRlZmluZWQgaW4gdGhlIGludGVudCBtb2RlbC4gSWYgaXRcbiAgICAgKiAgICAgICAgaXMgZW1wdHksIGFsbCBpbnRlbnQgbmFtZXMgZGVmaW5lZCBpbiB0aGUgbW9kZWwgd2lsbCBiZSBhZGRlZC5cbiAgICAgKi9cbiAgICBhZGRJbnRlbnRXaXRoTGFuZ3VhZ2VNb2RlbChpbnRlbnRJZCwgbW9kZWwsIGludGVudE5hbWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoaW50ZW50SWQsIFwiaW50ZW50SWRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChtb2RlbCwgXCJtb2RlbFwiKTtcbiAgICAgICAgY29uc3QgbW9kZWxJbXBsID0gbW9kZWw7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShtb2RlbEltcGwuYXBwSWQsIFwibW9kZWwuYXBwSWRcIik7XG4gICAgICAgIHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzW2ludGVudElkXSA9IG5ldyBBZGRlZExtSW50ZW50KG1vZGVsSW1wbCwgaW50ZW50TmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBzdW1tYXJ5IEFkZHMgYWxsIGludGVudHMgZnJvbSB0aGUgc3BlY2lmaWVkIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgTW9kZWwuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5hZGRBbGxJbnRlbnRzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsfSBtb2RlbCAtIFRoZSBsYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsIGNvbnRhaW5pbmcgdGhlIGludGVudHMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGludGVudElkIC0gQSBjdXN0b20gaWQgU3RyaW5nIHRvIGJlIHJldHVybmVkIGluIHRoZSBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCdzIGdldEludGVudElkKCkgbWV0aG9kLlxuICAgICAqL1xuICAgIGFkZEFsbEludGVudHMobW9kZWwsIGludGVudElkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChtb2RlbCwgXCJtb2RlbFwiKTtcbiAgICAgICAgY29uc3QgbW9kZWxJbXBsID0gbW9kZWw7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShtb2RlbEltcGwuYXBwSWQsIFwibW9kZWwuYXBwSWRcIik7XG4gICAgICAgIHRoaXMucHJpdlVtYnJlbGxhSW50ZW50ID0gbmV3IEFkZGVkTG1JbnRlbnQobW9kZWxJbXBsLCBpbnRlbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNsb3NlcyBhbGwgZXh0ZXJuYWwgcmVzb3VyY2VzIGhlbGQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplcik7XG4gICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICB9XG4gICAgY3JlYXRlUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZywgdGhpcy5wcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgY3JlYXRlU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICBjb25zdCBhdWRpb0ltcGwgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRlbnRTZXJ2aWNlUmVjb2duaXplcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvSW1wbCwgcmVjb2duaXplckNvbmZpZywgdGhpcyk7XG4gICAgfVxuICAgIGRpc3Bvc2UoZGlzcG9zaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIgPSB0cnVlO1xuICAgICAgICAgICAgc3VwZXIuZGlzcG9zZShkaXNwb3NpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJ1aWxkU3BlZWNoQ29udGV4dCgpIHtcbiAgICAgICAgbGV0IGFwcElkO1xuICAgICAgICBsZXQgcmVnaW9uO1xuICAgICAgICBsZXQgc3Vic2NyaXB0aW9uS2V5O1xuICAgICAgICBjb25zdCByZWZHcmFtbWVycyA9IFtdO1xuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLnByaXZVbWJyZWxsYUludGVudCkge1xuICAgICAgICAgICAgYXBwSWQgPSB0aGlzLnByaXZVbWJyZWxsYUludGVudC5tb2RlbEltcGwuYXBwSWQ7XG4gICAgICAgICAgICByZWdpb24gPSB0aGlzLnByaXZVbWJyZWxsYUludGVudC5tb2RlbEltcGwucmVnaW9uO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uS2V5ID0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQubW9kZWxJbXBsLnN1YnNjcmlwdGlvbktleTtcbiAgICAgICAgfVxuICAgICAgICAvLyBCdWlsZCB0aGUgcmVmZXJlbmNlIGdyYW1tZXIgYXJyYXkuXG4gICAgICAgIGZvciAoY29uc3QgaW50ZW50SWQgb2YgT2JqZWN0LmtleXModGhpcy5wcml2QWRkZWRMbUludGVudHMpKSB7XG4gICAgICAgICAgICBjb25zdCBhZGRlZExtSW50ZW50ID0gdGhpcy5wcml2QWRkZWRMbUludGVudHNbaW50ZW50SWRdO1xuICAgICAgICAgICAgLy8gdmFsaWRhdGUgYWxsIHRoZSBzYW1lIG1vZGVsLCByZWdpb24sIGFuZCBrZXkuLi5cbiAgICAgICAgICAgIGlmIChhcHBJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYXBwSWQgPSBhZGRlZExtSW50ZW50Lm1vZGVsSW1wbC5hcHBJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChhcHBJZCAhPT0gYWRkZWRMbUludGVudC5tb2RlbEltcGwuYXBwSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW50ZW50cyBtdXN0IGFsbCBiZSBmcm9tIHRoZSBzYW1lIExVSVMgbW9kZWxcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlZ2lvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVnaW9uID0gYWRkZWRMbUludGVudC5tb2RlbEltcGwucmVnaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2lvbiAhPT0gYWRkZWRMbUludGVudC5tb2RlbEltcGwucmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludGVudHMgbXVzdCBhbGwgYmUgZnJvbSB0aGUgc2FtZSBMVUlTIG1vZGVsIGluIGEgc2luZ2xlIHJlZ2lvblwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25LZXkgPSBhZGRlZExtSW50ZW50Lm1vZGVsSW1wbC5zdWJzY3JpcHRpb25LZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uS2V5ICE9PSBhZGRlZExtSW50ZW50Lm1vZGVsSW1wbC5zdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW50ZW50cyBtdXN0IGFsbCB1c2UgdGhlIHNhbWUgc3Vic2NyaXB0aW9uIGtleVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBncmFtbWVyID0gXCJsdWlzL1wiICsgYXBwSWQgKyBcIi1QUk9EVUNUSU9OI1wiICsgaW50ZW50SWQ7XG4gICAgICAgICAgICByZWZHcmFtbWVycy5wdXNoKGdyYW1tZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBJbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICBpZDogYXBwSWQsXG4gICAgICAgICAgICAgICAga2V5OiAoc3Vic2NyaXB0aW9uS2V5ID09PSB1bmRlZmluZWQpID8gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5XSkgOiBzdWJzY3JpcHRpb25LZXksXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IFwiTFVJU1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFJlZmVyZW5jZUdyYW1tYXJzOiAodW5kZWZpbmVkID09PSB0aGlzLnByaXZVbWJyZWxsYUludGVudCkgPyByZWZHcmFtbWVycyA6IFtcImx1aXMvXCIgKyBhcHBJZCArIFwiLVBST0RVQ1RJT05cIl0sXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgZm9yIHJlY29nbml6aW5nIHdoZW5cbiAqIHRoZSB1c2VyIHNheXMgYSBrZXl3b3JkIHRvIGluaXRpYXRlIGZ1cnRoZXIgc3BlZWNoIHJlY29nbml0aW9uLlxuICogQGNsYXNzIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsXG4gKi9cbmV4cG9ydCBjbGFzcyBLZXl3b3JkUmVjb2duaXRpb25Nb2RlbCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuZCBpbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZS5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgdXNpbmcgdGhlIHNwZWNpZmllZCBmaWxlbmFtZS5cbiAgICAgKiBAbWVtYmVyIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsLmZyb21GaWxlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlTmFtZSAtIEEgc3RyaW5nIHRoYXQgcmVwcmVzZW50cyBmaWxlIG5hbWUgZm9yIHRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsLlxuICAgICAqICAgICAgICBOb3RlLCB0aGUgZmlsZSBjYW4gcG9pbnQgdG8gYSB6aXAgZmlsZSBpbiB3aGljaCBjYXNlIHRoZSBtb2RlbFxuICAgICAqICAgICAgICB3aWxsIGJlIGV4dHJhY3RlZCBmcm9tIHRoZSB6aXAuXG4gICAgICogQHJldHVybnMge0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsfSBUaGUga2V5d29yZCByZWNvZ25pdGlvbiBtb2RlbCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tRmlsZShmaWxlTmFtZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkZpbGVEb2VzTm90RXhpc3QoZmlsZU5hbWUsIFwiZmlsZU5hbWVcIik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCB5ZXQgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEga2V5d29yZCByZWNvZ25pdGlvbiBtb2RlbCB1c2luZyB0aGUgc3BlY2lmaWVkIGZpbGVuYW1lLlxuICAgICAqIEBtZW1iZXIgS2V5d29yZFJlY29nbml0aW9uTW9kZWwuZnJvbVN0cmVhbVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZSAtIEEgRmlsZSB0aGF0IHJlcHJlc2VudHMgZmlsZSBmb3IgdGhlIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwuXG4gICAgICogICAgICAgIE5vdGUsIHRoZSBmaWxlIGNhbiBwb2ludCB0byBhIHppcCBmaWxlIGluIHdoaWNoIGNhc2UgdGhlIG1vZGVsIHdpbGwgYmUgZXh0cmFjdGVkIGZyb20gdGhlIHppcC5cbiAgICAgKiBAcmV0dXJucyB7S2V5d29yZFJlY29nbml0aW9uTW9kZWx9IFRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21TdHJlYW0oZmlsZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoZmlsZSwgXCJmaWxlXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgeWV0IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBvZiBhc3NvY2lhdGVkIHJlc291cmNlcy5cbiAgICAgKiBAbWVtYmVyIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkRpc3Bvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5d29yZFJlY29nbml0aW9uTW9kZWwuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuLyoqXG4gKiBMYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsXG4gKiBAY2xhc3MgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxcbiAqL1xuZXhwb3J0IGNsYXNzIExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGxhbmd1YWdlIHVuZGVyc3RhbmRpbmcgbW9kZWwgdXNpbmcgdGhlIHNwZWNpZmllZCBlbmRwb2ludC5cbiAgICAgKiBAbWVtYmVyIExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsLmZyb21FbmRwb2ludFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1VSTH0gdXJpIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlbmRwb2ludCBvZiB0aGUgbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyB7TGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWx9IFRoZSBsYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21FbmRwb2ludCh1cmkpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKHVyaSwgXCJ1cmlcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh1cmkuaG9zdG5hbWUsIFwidXJpXCIpO1xuICAgICAgICBjb25zdCBsYW5nTW9kZWxJbXAgPSBuZXcgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxJbXBsKCk7XG4gICAgICAgIC8vIE5lZWQgdG8gZXh0cmFjdCB0aGUgYXBwIElEIGZyb20gdGhlIFVSTC5cbiAgICAgICAgLy8gVVJMIGlzIGluIHRoZSBmb3JtYXQ6IGh0dHBzOi8vPHJlZ2lvbj4uYXBpLmNvZ25pdGl2ZS5taWNyb3NvZnQuY29tL2x1aXMvdjIuMC9hcHBzLzxHdWlkPj9zdWJzY3JpcHRpb24ta2V5PTxrZXk+JnRpbWV6b25lT2Zmc2V0PS0zNjBcbiAgICAgICAgLy8gU3RhcnQgdGVhcmluZyB0aGUgc3RyaW5nIGFwYXJ0LlxuICAgICAgICAvLyByZWdpb24gY2FuIGJlIGV4dHJhY3RlZCBmcm9tIHRoZSBob3N0IG5hbWUuXG4gICAgICAgIGNvbnN0IGZpcnN0RG90ID0gdXJpLmhvc3QuaW5kZXhPZihcIi5cIik7XG4gICAgICAgIGlmICgtMSA9PT0gZmlyc3REb3QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBkZXRlcm1pbmUgcmVnaW9uIGZyb20gZW5kcG9pbnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGFuZ01vZGVsSW1wLnJlZ2lvbiA9IHVyaS5ob3N0LnN1YnN0cigwLCBmaXJzdERvdCk7XG4gICAgICAgIC8vIE5vdyB0aGUgYXBwIElELlxuICAgICAgICBjb25zdCBsYXN0U2VnbWVudCA9IHVyaS5wYXRobmFtZS5sYXN0SW5kZXhPZihcIi9cIikgKyAxO1xuICAgICAgICBpZiAoLTEgPT09IGxhc3RTZWdtZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZGV0ZXJtaW5lIGFwcElkIGZyb20gZW5kcG9pbnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGFuZ01vZGVsSW1wLmFwcElkID0gdXJpLnBhdGhuYW1lLnN1YnN0cihsYXN0U2VnbWVudCk7XG4gICAgICAgIC8vIEFuZCBmaW5hbGx5IHRoZSBrZXkuXG4gICAgICAgIGxhbmdNb2RlbEltcC5zdWJzY3JpcHRpb25LZXkgPSB1cmkuc2VhcmNoUGFyYW1zLmdldChcInN1YnNjcmlwdGlvbi1rZXlcIik7XG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IGxhbmdNb2RlbEltcC5zdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBkZXRlcm1pbmUgc3Vic2NyaXB0aW9uIGtleSBmcm9tIGVuZHBvaW50XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYW5nTW9kZWxJbXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbCB1c2luZyB0aGUgYXBwbGljYXRpb24gaWQgb2YgTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwuZnJvbUFwcElkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhcHBJZCAtIEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgYXBwbGljYXRpb24gaWQgb2YgTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBzZXJ2aWNlLlxuICAgICAqIEByZXR1cm5zIHtMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbH0gVGhlIGxhbmd1YWdlIHVuZGVyc3RhbmRpbmcgbW9kZWwgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUFwcElkKGFwcElkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShhcHBJZCwgXCJhcHBJZFwiKTtcbiAgICAgICAgY29uc3QgbGFuZ01vZGVsSW1wID0gbmV3IExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsSW1wbCgpO1xuICAgICAgICBsYW5nTW9kZWxJbXAuYXBwSWQgPSBhcHBJZDtcbiAgICAgICAgcmV0dXJuIGxhbmdNb2RlbEltcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGxhbmd1YWdlIHVuZGVyc3RhbmRpbmcgbW9kZWwgdXNpbmcgaG9zdG5hbWUsIHN1YnNjcmlwdGlvbiBrZXkgYW5kIGFwcGxpY2F0aW9uXG4gICAgICogaWQgb2YgTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwuZnJvbVN1YnNjcmlwdGlvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBzdWJzY3JpcHRpb24ga2V5IG9mXG4gICAgICogICAgICAgIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgc2VydmljZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXBwSWQgLSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGFwcGxpY2F0aW9uIGlkIG9mIExhbmd1YWdlXG4gICAgICogICAgICAgIFVuZGVyc3RhbmRpbmcgc2VydmljZS5cbiAgICAgKiBAcGFyYW0ge0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsfSByZWdpb24gLSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIHJlZ2lvblxuICAgICAqICAgICAgICBvZiB0aGUgTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBzZXJ2aWNlIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbH0gVGhlIGxhbmd1YWdlIHVuZGVyc3RhbmRpbmcgbW9kZWwgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25LZXksIGFwcElkLCByZWdpb24pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHN1YnNjcmlwdGlvbktleSwgXCJzdWJzY3JpcHRpb25LZXlcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShhcHBJZCwgXCJhcHBJZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZ2lvbiwgXCJyZWdpb25cIik7XG4gICAgICAgIGNvbnN0IGxhbmdNb2RlbEltcCA9IG5ldyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbEltcGwoKTtcbiAgICAgICAgbGFuZ01vZGVsSW1wLmFwcElkID0gYXBwSWQ7XG4gICAgICAgIGxhbmdNb2RlbEltcC5yZWdpb24gPSByZWdpb247XG4gICAgICAgIGxhbmdNb2RlbEltcC5zdWJzY3JpcHRpb25LZXkgPSBzdWJzY3JpcHRpb25LZXk7XG4gICAgICAgIHJldHVybiBsYW5nTW9kZWxJbXA7XG4gICAgfVxufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsSW1wbFxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbEltcGwgZXh0ZW5kcyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbCB7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZWNvZ25pdGlvblN0YXR1cywgU2ltcGxlU3BlZWNoUGhyYXNlIH0gZnJvbSBcIi4uLy4uL3NyYy9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IE5vTWF0Y2hSZWFzb24gfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIENvbnRhaW5zIGRldGFpbGVkIGluZm9ybWF0aW9uIGZvciBOb01hdGNoIHJlY29nbml0aW9uIHJlc3VsdHMuXG4gKiBAY2xhc3MgTm9NYXRjaERldGFpbHNcbiAqL1xuZXhwb3J0IGNsYXNzIE5vTWF0Y2hEZXRhaWxzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7Tm9NYXRjaFJlYXNvbn0gcmVhc29uIC0gVGhlIG5vLW1hdGNoIHJlYXNvbi5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZWFzb24pIHtcbiAgICAgICAgdGhpcy5wcml2UmVhc29uID0gcmVhc29uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIE5vTWF0Y2hEZXRhaWxzIG9iamVjdCBmb3IgdGhlIE5vTWF0Y2ggU3BlZWNoUmVjb2duaXRpb25SZXN1bHRzLlxuICAgICAqIEBtZW1iZXIgTm9NYXRjaERldGFpbHMuZnJvbVJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1NwZWVjaFJlY29nbml0aW9uUmVzdWx0IHwgSW50ZW50UmVjb2duaXRpb25SZXN1bHQgfCBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0fVxuICAgICAqICAgICAgICByZXN1bHQgLSBUaGUgcmVjb2duaXRpb24gcmVzdWx0IHRoYXQgd2FzIG5vdCByZWNvZ25pemVkLlxuICAgICAqIEByZXR1cm5zIHtOb01hdGNoRGV0YWlsc30gVGhlIG5vIG1hdGNoIGRldGFpbHMgb2JqZWN0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVNwZWVjaCA9IFNpbXBsZVNwZWVjaFBocmFzZS5mcm9tSlNPTihyZXN1bHQuanNvbik7XG4gICAgICAgIGxldCByZWFzb24gPSBOb01hdGNoUmVhc29uLk5vdFJlY29nbml6ZWQ7XG4gICAgICAgIHN3aXRjaCAoc2ltcGxlU3BlZWNoLlJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkJhYmJsZVRpbWVvdXQ6XG4gICAgICAgICAgICAgICAgcmVhc29uID0gTm9NYXRjaFJlYXNvbi5Jbml0aWFsQmFiYmxlVGltZW91dDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuSW5pdGlhbFNpbGVuY2VUaW1lb3V0OlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IE5vTWF0Y2hSZWFzb24uSW5pdGlhbFNpbGVuY2VUaW1lb3V0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBOb01hdGNoUmVhc29uLk5vdFJlY29nbml6ZWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBOb01hdGNoRGV0YWlscyhyZWFzb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmVhc29uIHRoZSByZWNvZ25pdGlvbiB3YXMgY2FuY2VsZWQuXG4gICAgICogQG1lbWJlciBOb01hdGNoRGV0YWlscy5wcm90b3R5cGUucmVhc29uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtOb01hdGNoUmVhc29ufSBTcGVjaWZpZXMgdGhlIHJlYXNvbiBjYW5jZWxlZC5cbiAgICAgKi9cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Tm9NYXRjaERldGFpbHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyB0aGUgcG9zc2libGUgcmVhc29ucyBhIHJlY29nbml0aW9uIHJlc3VsdCBtaWdodCBub3QgYmUgcmVjb2duaXplZC5cbiAqIEBjbGFzcyBOb01hdGNoUmVhc29uXG4gKi9cbmV4cG9ydCB2YXIgTm9NYXRjaFJlYXNvbjtcbihmdW5jdGlvbiAoTm9NYXRjaFJlYXNvbikge1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHNwZWVjaCB3YXMgZGV0ZWN0ZWQsIGJ1dCBub3QgcmVjb2duaXplZC5cbiAgICAgKiBAbWVtYmVyIE5vTWF0Y2hSZWFzb24uTm90UmVjb2duaXplZFxuICAgICAqL1xuICAgIE5vTWF0Y2hSZWFzb25bTm9NYXRjaFJlYXNvbltcIk5vdFJlY29nbml6ZWRcIl0gPSAwXSA9IFwiTm90UmVjb2duaXplZFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdGFydCBvZiB0aGUgYXVkaW8gc3RyZWFtIGNvbnRhaW5lZCBvbmx5IHNpbGVuY2UsXG4gICAgICogYW5kIHRoZSBzZXJ2aWNlIHRpbWVkIG91dCB3YWl0aW5nIGZvciBzcGVlY2guXG4gICAgICogQG1lbWJlciBOb01hdGNoUmVhc29uLkluaXRpYWxTaWxlbmNlVGltZW91dFxuICAgICAqL1xuICAgIE5vTWF0Y2hSZWFzb25bTm9NYXRjaFJlYXNvbltcIkluaXRpYWxTaWxlbmNlVGltZW91dFwiXSA9IDFdID0gXCJJbml0aWFsU2lsZW5jZVRpbWVvdXRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgc3RhcnQgb2YgdGhlIGF1ZGlvIHN0cmVhbSBjb250YWluZWQgb25seSBub2lzZSxcbiAgICAgKiBhbmQgdGhlIHNlcnZpY2UgdGltZWQgb3V0IHdhaXRpbmcgZm9yIHNwZWVjaC5cbiAgICAgKiBAbWVtYmVyIE5vTWF0Y2hSZWFzb24uSW5pdGlhbEJhYmJsZVRpbWVvdXRcbiAgICAgKi9cbiAgICBOb01hdGNoUmVhc29uW05vTWF0Y2hSZWFzb25bXCJJbml0aWFsQmFiYmxlVGltZW91dFwiXSA9IDJdID0gXCJJbml0aWFsQmFiYmxlVGltZW91dFwiO1xufSkoTm9NYXRjaFJlYXNvbiB8fCAoTm9NYXRjaFJlYXNvbiA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5vTWF0Y2hSZWFzb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lIFNwZWVjaCBSZWNvZ25pemVyIG91dHB1dCBmb3JtYXRzLlxuICogQGNsYXNzIE91dHB1dEZvcm1hdFxuICovXG5leHBvcnQgdmFyIE91dHB1dEZvcm1hdDtcbihmdW5jdGlvbiAoT3V0cHV0Rm9ybWF0KSB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBPdXRwdXRGb3JtYXQuU2ltcGxlXG4gICAgICovXG4gICAgT3V0cHV0Rm9ybWF0W091dHB1dEZvcm1hdFtcIlNpbXBsZVwiXSA9IDBdID0gXCJTaW1wbGVcIjtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIE91dHB1dEZvcm1hdC5EZXRhaWxlZFxuICAgICAqL1xuICAgIE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXRbXCJEZXRhaWxlZFwiXSA9IDFdID0gXCJEZXRhaWxlZFwiO1xufSkoT3V0cHV0Rm9ybWF0IHx8IChPdXRwdXRGb3JtYXQgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1PdXRwdXRGb3JtYXQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogQWxsb3dzIGFkZGl0aW9ucyBvZiBuZXcgcGhyYXNlcyB0byBpbXByb3ZlIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAqXG4gKiBQaHJhc2VzIGFkZGVkIHRvIHRoZSByZWNvZ25pemVyIGFyZSBlZmZlY3RpdmUgYXQgdGhlIHN0YXJ0IG9mIHRoZSBuZXh0IHJlY29nbml0aW9uLCBvciB0aGUgbmV4dCB0aW1lIHRoZSBTcGVlY2hTREsgbXVzdCByZWNvbm5lY3RcbiAqIHRvIHRoZSBzcGVlY2ggc2VydmljZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFBocmFzZUxpc3RHcmFtbWFyIHtcbiAgICBjb25zdHJ1Y3RvcihyZWNvZ0Jhc2UpIHtcbiAgICAgICAgdGhpcy5wcml2R3JhbW1lckJ1aWxkZXIgPSByZWNvZ0Jhc2UuZHluYW1pY0dyYW1tYXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBQaHJhc2VMaXN0R3JhbW1hciBmcm9tIGEgZ2l2ZW4gc3BlZWNoIHJlY29nbml6ZXIuIFdpbGwgYWNjZXB0IGFueSByZWNvZ25pemVyIHRoYXQgZGVyaXZlcyBmcm9tIEBjbGFzcyBSZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSByZWNvZ25pemVyIFRoZSByZWNvZ25pemVyIHRvIGFkZCBwaHJhc2UgbGlzdHMgdG8uXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZWNvZ25pemVyKHJlY29nbml6ZXIpIHtcbiAgICAgICAgY29uc3QgcmVjb0Jhc2UgPSByZWNvZ25pemVyLmludGVybmFsRGF0YTtcbiAgICAgICAgcmV0dXJuIG5ldyBQaHJhc2VMaXN0R3JhbW1hcihyZWNvQmFzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBzaW5nbGUgcGhyYXNlIHRvIHRoZSBjdXJyZW50IHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHBocmFzZSBQaHJhc2UgdG8gYWRkLlxuICAgICAqL1xuICAgIGFkZFBocmFzZShwaHJhc2UpIHtcbiAgICAgICAgdGhpcy5wcml2R3JhbW1lckJ1aWxkZXIuYWRkUGhyYXNlKHBocmFzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgbXVsdGlwbGUgcGhyYXNlcyB0byB0aGUgY3VycmVudCByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSBwaHJhc2VzIEFycmF5IG9mIHBocmFzZXMgdG8gYWRkLlxuICAgICAqL1xuICAgIGFkZFBocmFzZXMocGhyYXNlcykge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWVyQnVpbGRlci5hZGRQaHJhc2UocGhyYXNlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcGhyYXNlcyBhZGRlZCB0byB0aGUgY3VycmVudCByZWNvZ25pemVyLlxuICAgICAqL1xuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWVyQnVpbGRlci5jbGVhclBocmFzZXMoKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBocmFzZUxpc3RHcmFtbWFyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIFByb2Zhbml0eSBvcHRpb24uXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wLlxuICovXG5leHBvcnQgdmFyIFByb2Zhbml0eU9wdGlvbjtcbihmdW5jdGlvbiAoUHJvZmFuaXR5T3B0aW9uKSB7XG4gICAgUHJvZmFuaXR5T3B0aW9uW1Byb2Zhbml0eU9wdGlvbltcIk1hc2tlZFwiXSA9IDBdID0gXCJNYXNrZWRcIjtcbiAgICBQcm9mYW5pdHlPcHRpb25bUHJvZmFuaXR5T3B0aW9uW1wiUmVtb3ZlZFwiXSA9IDFdID0gXCJSZW1vdmVkXCI7XG4gICAgUHJvZmFuaXR5T3B0aW9uW1Byb2Zhbml0eU9wdGlvbltcIlJhd1wiXSA9IDJdID0gXCJSYXdcIjtcbn0pKFByb2Zhbml0eU9wdGlvbiB8fCAoUHJvZmFuaXR5T3B0aW9uID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvZmFuaXR5T3B0aW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzLlxuICogQGNsYXNzIFByb3BlcnR5Q29sbGVjdGlvblxuICovXG5leHBvcnQgY2xhc3MgUHJvcGVydHlDb2xsZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcml2S2V5cyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZWYWx1ZXMgPSBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgaW4gdHlwZSBTdHJpbmcuIFRoZSBwYXJhbWV0ZXIgbXVzdCBoYXZlIHRoZSBzYW1lIHR5cGUgYXMgU3RyaW5nLlxuICAgICAqIEN1cnJlbnRseSBvbmx5IFN0cmluZywgaW50IGFuZCBib29sIGFyZSBhbGxvd2VkLlxuICAgICAqIElmIHRoZSBuYW1lIGlzIG5vdCBhdmFpbGFibGUsIHRoZSBzcGVjaWZpZWQgZGVmYXVsdFZhbHVlIGlzIHJldHVybmVkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRQcm9wZXJ0eVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIHBhcmFtZXRlciBuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZWYgLSBUaGUgZGVmYXVsdCB2YWx1ZSB3aGljaCBpcyByZXR1cm5lZCBpZiB0aGUgcGFyYW1ldGVyXG4gICAgICogICAgICAgIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdmFsdWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRQcm9wZXJ0eShrZXksIGRlZikge1xuICAgICAgICBsZXQga2V5VG9Vc2U7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBrZXlUb1VzZSA9IGtleTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGtleVRvVXNlID0gUHJvcGVydHlJZFtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdGhpcy5wcml2S2V5cy5sZW5ndGg7IG4rKykge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdktleXNbbl0gPT09IGtleVRvVXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlZhbHVlc1tuXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBTdHJpbmcgdmFsdWUgb2YgdGhlIHBhcmFtZXRlciBzcGVjaWZpZWQgYnkgbmFtZS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5Q29sbGVjdGlvbi5wcm90b3R5cGUuc2V0UHJvcGVydHlcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRoZSBwYXJhbWV0ZXIgbmFtZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgdmFsdWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBzZXRQcm9wZXJ0eShrZXksIHZhbHVlKSB7XG4gICAgICAgIGxldCBrZXlUb1VzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGtleVRvVXNlID0ga2V5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAga2V5VG9Vc2UgPSBQcm9wZXJ0eUlkW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0aGlzLnByaXZLZXlzLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2S2V5c1tuXSA9PT0ga2V5VG9Vc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZWYWx1ZXNbbl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2S2V5cy5wdXNoKGtleVRvVXNlKTtcbiAgICAgICAgdGhpcy5wcml2VmFsdWVzLnB1c2godmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUNvbGxlY3Rpb24ucHJvdG90eXBlLmNsb25lXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IEEgY29weSBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKi9cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgY2xvbmVkTWFwID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMucHJpdktleXMubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgIGNsb25lZE1hcC5wcml2S2V5cy5wdXNoKHRoaXMucHJpdktleXNbbl0pO1xuICAgICAgICAgICAgY2xvbmVkTWFwLnByaXZWYWx1ZXMucHVzaCh0aGlzLnByaXZWYWx1ZXNbbl0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbG9uZWRNYXA7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eUNvbGxlY3Rpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyBzcGVlY2ggcHJvcGVydHkgaWRzLlxuICogQGNsYXNzIFByb3BlcnR5SWRcbiAqL1xuZXhwb3J0IHZhciBQcm9wZXJ0eUlkO1xuKGZ1bmN0aW9uIChQcm9wZXJ0eUlkKSB7XG4gICAgLyoqXG4gICAgICogVGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSBzdWJzY3JpcHRpb24gS2V5LiBJZiB5b3UgYXJlIHVzaW5nIGFuIGludGVudCByZWNvZ25pemVyLCB5b3UgbmVlZCB0byBzcGVjaWZ5XG4gICAgICogdG8gc3BlY2lmeSB0aGUgTFVJUyBlbmRwb2ludCBrZXkgZm9yIHlvdXIgcGFydGljdWxhciBMVUlTIGFwcC4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3RcbiAgICAgKiBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQsIHVzZSBbW1NwZWVjaENvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleVwiXSA9IDBdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXlcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIGVuZHBvaW50ICh1cmwpLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndFxuICAgICAqIGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLmZyb21FbmRwb2ludF1dLlxuICAgICAqIE5PVEU6IFRoaXMgZW5kcG9pbnQgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBlbmRwb2ludCB1c2VkIHRvIG9idGFpbiBhbiBhY2Nlc3MgdG9rZW4uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRcIl0gPSAxXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlZ2lvbi4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0b1xuICAgICAqIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQsIHVzZSBbW1NwZWVjaENvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXV0sIFtbU3BlZWNoQ29uZmlnLmZyb21FbmRwb2ludF1dLCBbW1NwZWVjaENvbmZpZy5mcm9tQXV0aG9yaXphdGlvblRva2VuXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvblxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvblwiXSA9IDJdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb25cIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIGF1dGhvcml6YXRpb24gdG9rZW4gKGFrYSBhY2Nlc3MgdG9rZW4pLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcyxcbiAgICAgKiB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLmZyb21BdXRob3JpemF0aW9uVG9rZW5dXSxcbiAgICAgKiBbW1NwZWVjaFJlY29nbml6ZXIuYXV0aG9yaXphdGlvblRva2VuXV0sIFtbSW50ZW50UmVjb2duaXplci5hdXRob3JpemF0aW9uVG9rZW5dXSwgW1tUcmFuc2xhdGlvblJlY29nbml6ZXIuYXV0aG9yaXphdGlvblRva2VuXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW5cIl0gPSAzXSA9IFwiU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW5cIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIGF1dGhvcml6YXRpb24gdHlwZS4gQ3VycmVudGx5IHVudXNlZC5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVHlwZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1R5cGVcIl0gPSA0XSA9IFwiU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVHlwZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgZW5kcG9pbnQgaWQuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0XG4gICAgICogaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tTcGVlY2hDb25maWcuZW5kcG9pbnRJZF1dLlxuICAgICAqIE5PVEU6IFRoZSBlbmRwb2ludCBpZCBpcyBhdmFpbGFibGUgaW4gdGhlIFNwZWVjaCBQb3J0YWwsIGxpc3RlZCB1bmRlciBFbmRwb2ludCBEZXRhaWxzLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZFwiXSA9IDVdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGxpc3Qgb2YgY29tbWEgc2VwYXJhdGVkIGxhbmd1YWdlcyAoQkNQLTQ3IGZvcm1hdCkgdXNlZCBhcyB0YXJnZXQgdHJhbnNsYXRpb24gbGFuZ3VhZ2VzLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcyxcbiAgICAgKiB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgW1tTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5hZGRUYXJnZXRMYW5ndWFnZV1dLFxuICAgICAqIFtbU3BlZWNoVHJhbnNsYXRpb25Db25maWcudGFyZ2V0TGFuZ3VhZ2VzXV0sIFtbVHJhbnNsYXRpb25SZWNvZ25pemVyLnRhcmdldExhbmd1YWdlc11dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlc1wiXSA9IDZdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIENvZ25pdGl2ZSBTZXJ2aWNlIFRleHQgdG8gU3BlZWNoIFNlcnZpY2UgVm9pY2UuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXNcbiAgICAgKiBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy52b2ljZU5hbWVdXS5cbiAgICAgKiBOT1RFOiBWYWxpZCB2b2ljZSBuYW1lcyBjYW4gYmUgZm91bmQgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3ZvaWNlbmFtZXNcIj5oZXJlPC9hPi5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2VcIl0gPSA3XSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZVwiO1xuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0aW9uIGZlYXR1cmVzLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvbkZlYXR1cmVzXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25GZWF0dXJlc1wiXSA9IDhdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvbkZlYXR1cmVzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgU2VydmljZSBSZWdpb24uIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxdXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW50ZW50UmVnaW9uXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW50ZW50UmVnaW9uXCJdID0gOV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0ludGVudFJlZ2lvblwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBob3N0IG5hbWUgb2YgdGhlIHByb3h5IHNlcnZlciB1c2VkIHRvIGNvbm5lY3QgdG8gdGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZS4gT25seSByZWxldmFudCBpbiBOb2RlLmpzIGVudmlyb25tZW50cy5cbiAgICAgKiBZb3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgPHNlZSBjcmVmPVwiU3BlZWNoQ29uZmlnLlNldFByb3h5KHN0cmluZyxpbnQsc3RyaW5nLHN0cmluZylcIi8+LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS40LjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZVwiXSA9IDEwXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBwb3J0IG9mIHRoZSBwcm94eSBzZXJ2ZXIgdXNlZCB0byBjb25uZWN0IHRvIHRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UuIE9ubHkgcmVsZXZhbnQgaW4gTm9kZS5qcyBlbnZpcm9ubWVudHMuXG4gICAgICogWW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQgdXNlIDxzZWUgY3JlZj1cIlNwZWVjaENvbmZpZy5TZXRQcm94eShzdHJpbmcsaW50LHN0cmluZyxzdHJpbmcpXCIvPi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNC4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UG9ydFwiXSA9IDExXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIHVzZXIgbmFtZSBvZiB0aGUgcHJveHkgc2VydmVyIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlLiBPbmx5IHJlbGV2YW50IGluIE5vZGUuanMgZW52aXJvbm1lbnRzLlxuICAgICAqIFlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkIHVzZSA8c2VlIGNyZWY9XCJTcGVlY2hDb25maWcuU2V0UHJveHkoc3RyaW5nLGludCxzdHJpbmcsc3RyaW5nKVwiLz4uXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjQuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lXCJdID0gMTJdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHBhc3N3b3JkIG9mIHRoZSBwcm94eSBzZXJ2ZXIgdXNlZCB0byBjb25uZWN0IHRvIHRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UuIE9ubHkgcmVsZXZhbnQgaW4gTm9kZS5qcyBlbnZpcm9ubWVudHMuXG4gICAgICogWW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQgdXNlIDxzZWUgY3JlZj1cIlNwZWVjaENvbmZpZy5TZXRQcm94eShzdHJpbmcsaW50LHN0cmluZyxzdHJpbmcpXCIvPi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNC4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UGFzc3dvcmRcIl0gPSAxM10gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UGFzc3dvcmRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlY29nbml0aW9uIE1vZGUuIENhbiBiZSBcIklOVEVSQUNUSVZFXCIsIFwiQ09OVkVSU0FUSU9OXCIsIFwiRElDVEFUSU9OXCIuXG4gICAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbnRlbmRlZCB0byBiZSByZWFkLW9ubHkuIFRoZSBTREsgaXMgdXNpbmcgaXQgaW50ZXJuYWxseS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb01vZGVcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTW9kZVwiXSA9IDE0XSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb01vZGVcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgc3Bva2VuIGxhbmd1YWdlIHRvIGJlIHJlY29nbml6ZWQgKGluIEJDUC00NyBmb3JtYXQpLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5XG4gICAgICogZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VdXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXCJdID0gMTVdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgc2Vzc2lvbiBpZC4gVGhpcyBpZCBpcyBhIHVuaXZlcnNhbGx5IHVuaXF1ZSBpZGVudGlmaWVyIChha2EgVVVJRCkgcmVwcmVzZW50aW5nIGEgc3BlY2lmaWMgYmluZGluZyBvZiBhbiBhdWRpbyBpbnB1dCBzdHJlYW1cbiAgICAgKiBhbmQgdGhlIHVuZGVybHlpbmcgc3BlZWNoIHJlY29nbml0aW9uIGluc3RhbmNlIHRvIHdoaWNoIGl0IGlzIGJvdW5kLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzXG4gICAgICogcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgW1tTZXNzaW9uRXZlbnRBcmdzLnNlc3Npb25JZF1dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hfU2Vzc2lvbklkXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoX1Nlc3Npb25JZFwiXSA9IDE2XSA9IFwiU3BlZWNoX1Nlc3Npb25JZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSByZXF1ZXN0ZWQgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlc3BvbnNlIG91dHB1dCBmb3JtYXQgKHNpbXBsZSBvciBkZXRhaWxlZCkuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmVcbiAgICAgKiB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkIHVzZSBbW1NwZWVjaENvbmZpZy5vdXRwdXRGb3JtYXRdXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3REZXRhaWxlZFJlc3VsdFRydWVGYWxzZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0RGV0YWlsZWRSZXN1bHRUcnVlRmFsc2VcIl0gPSAxN10gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0RGV0YWlsZWRSZXN1bHRUcnVlRmFsc2VcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVxdWVzdGVkIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSByZXNwb25zZSBvdXRwdXQgcHJvZmFuaXR5IGxldmVsLiBDdXJyZW50bHkgdW51c2VkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFByb2Zhbml0eUZpbHRlclRydWVGYWxzZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0UHJvZmFuaXR5RmlsdGVyVHJ1ZUZhbHNlXCJdID0gMThdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFByb2Zhbml0eUZpbHRlclRydWVGYWxzZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgcmVzcG9uc2Ugb3V0cHV0IChpbiBKU09OIGZvcm1hdCkuIFRoaXMgcHJvcGVydHkgaXMgYXZhaWxhYmxlIG9uIHJlY29nbml0aW9uIHJlc3VsdCBvYmplY3RzIG9ubHkuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcIl0gPSAxOV0gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSBlcnJvciBkZXRhaWxzIChpbiBKU09OIGZvcm1hdCkuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG9cbiAgICAgKiB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS4gSW5zdGVhZCB1c2UgW1tDYW5jZWxsYXRpb25EZXRhaWxzLmVycm9yRGV0YWlsc11dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvbkVycm9yRGV0YWlsc1xuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uRXJyb3JEZXRhaWxzXCJdID0gMjBdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvbkVycm9yRGV0YWlsc1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSBjYW5jZWxsYXRpb24gcmVhc29uLiBDdXJyZW50bHkgdW51c2VkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5DYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uXCJdID0gMjFdID0gXCJDYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBjYW5jZWxsYXRpb24gdGV4dC4gQ3VycmVudGx5IHVudXNlZC5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25UZXh0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25UZXh0XCJdID0gMjJdID0gXCJDYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblRleHRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ2FuY2VsbGF0aW9uIGRldGFpbGVkIHRleHQuIEN1cnJlbnRseSB1bnVzZWQuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uRGV0YWlsZWRUZXh0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25EZXRhaWxlZFRleHRcIl0gPSAyM10gPSBcIkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uRGV0YWlsZWRUZXh0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgU2VydmljZSByZXNwb25zZSBvdXRwdXQgKGluIEpTT04gZm9ybWF0KS4gQXZhaWxhYmxlIHZpYSBbW0ludGVudFJlY29nbml0aW9uUmVzdWx0XV1cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJMYW5ndWFnZVVuZGVyc3RhbmRpbmdTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdFwiXSA9IDI0XSA9IFwiTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgVVJMIHN0cmluZyBidWlsdCBmcm9tIHNwZWVjaCBjb25maWd1cmF0aW9uLlxuICAgICAqIFRoaXMgcHJvcGVydHkgaXMgaW50ZW5kZWQgdG8gYmUgcmVhZC1vbmx5LiBUaGUgU0RLIGlzIHVzaW5nIGl0IGludGVybmFsbHkuXG4gICAgICogTk9URTogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9VcmxcIl0gPSAyNV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1VybFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIHNpbGVuY2UgdGltZW91dCB2YWx1ZSAoaW4gbWlsbGlzZWNvbmRzKSB1c2VkIGJ5IHRoZSBzZXJ2aWNlLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Jbml0aWFsU2lsZW5jZVRpbWVvdXRNc1wiXSA9IDI2XSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW5pdGlhbFNpbGVuY2VUaW1lb3V0TXNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgZW5kIHNpbGVuY2UgdGltZW91dCB2YWx1ZSAoaW4gbWlsbGlzZWNvbmRzKSB1c2VkIGJ5IHRoZSBzZXJ2aWNlLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRTaWxlbmNlVGltZW91dE1zXCJdID0gMjddID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRTaWxlbmNlVGltZW91dE1zXCI7XG4gICAgLyoqXG4gICAgICogQSBib29sZWFuIHZhbHVlIHNwZWNpZnlpbmcgd2hldGhlciBhdWRpbyBsb2dnaW5nIGlzIGVuYWJsZWQgaW4gdGhlIHNlcnZpY2Ugb3Igbm90LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmFibGVBdWRpb0xvZ2dpbmdcIl0gPSAyOF0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuYWJsZUF1ZGlvTG9nZ2luZ1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSByZXF1ZXN0ZWQgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlc3BvbnNlIG91dHB1dCBwcm9mYW5pdHkgc2V0dGluZy5cbiAgICAgKiBBbGxvd2VkIHZhbHVlcyBhcmUgXCJtYXNrZWRcIiwgXCJyZW1vdmVkXCIsIGFuZCBcInJhd1wiLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1Byb2Zhbml0eU9wdGlvblwiXSA9IDI5XSA9IFwiU3BlZWNoU2VydmljZVJlc3BvbnNlX1Byb2Zhbml0eU9wdGlvblwiO1xuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHZhbHVlIHNwZWNpZnlpbmcgd2hpY2ggcG9zdCBwcm9jZXNzaW5nIG9wdGlvbiBzaG91bGQgYmUgdXNlZCBieSBzZXJ2aWNlLlxuICAgICAqIEFsbG93ZWQgdmFsdWVzIGFyZSBcIlRydWVUZXh0XCIuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Qb3N0UHJvY2Vzc2luZ09wdGlvblwiXSA9IDMwXSA9IFwiU3BlZWNoU2VydmljZVJlc3BvbnNlX1Bvc3RQcm9jZXNzaW5nT3B0aW9uXCI7XG4gICAgLyoqXG4gICAgICogIEEgYm9vbGVhbiB2YWx1ZSBzcGVjaWZ5aW5nIHdoZXRoZXIgdG8gaW5jbHVkZSB3b3JkLWxldmVsIHRpbWVzdGFtcHMgaW4gdGhlIHJlc3BvbnNlIHJlc3VsdC5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzXCJdID0gMzFdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFdvcmRMZXZlbFRpbWVzdGFtcHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHRpbWVzIGEgd29yZCBoYXMgdG8gYmUgaW4gcGFydGlhbCByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfU3RhYmxlUGFydGlhbFJlc3VsdFRocmVzaG9sZFwiXSA9IDMyXSA9IFwiU3BlZWNoU2VydmljZVJlc3BvbnNlX1N0YWJsZVBhcnRpYWxSZXN1bHRUaHJlc2hvbGRcIjtcbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyB2YWx1ZSBzcGVjaWZ5aW5nIHRoZSBvdXRwdXQgZm9ybWF0IG9wdGlvbiBpbiB0aGUgcmVzcG9uc2UgcmVzdWx0LiBJbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9PdXRwdXRGb3JtYXRPcHRpb25cIl0gPSAzM10gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9PdXRwdXRGb3JtYXRPcHRpb25cIjtcbiAgICAvKipcbiAgICAgKiBBIGJvb2xlYW4gdmFsdWUgdG8gcmVxdWVzdCBmb3Igc3RhYmlsaXppbmcgdHJhbnNsYXRpb24gcGFydGlhbCByZXN1bHRzIGJ5IG9taXR0aW5nIHdvcmRzIGluIHRoZSBlbmQuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfVHJhbnNsYXRpb25SZXF1ZXN0U3RhYmxlUGFydGlhbFJlc3VsdFwiXSA9IDM0XSA9IFwiU3BlZWNoU2VydmljZVJlc3BvbnNlX1RyYW5zbGF0aW9uUmVxdWVzdFN0YWJsZVBhcnRpYWxSZXN1bHRcIjtcbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVyIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgYmFja2VuZCBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkXCJdID0gMzVdID0gXCJDb252ZXJzYXRpb25fQXBwbGljYXRpb25JZFwiO1xuICAgIC8qKlxuICAgICAqIFR5cGUgb2YgZGlhbG9nIGJhY2tlbmQgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0RpYWxvZ1R5cGVcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDb252ZXJzYXRpb25fRGlhbG9nVHlwZVwiXSA9IDM2XSA9IFwiQ29udmVyc2F0aW9uX0RpYWxvZ1R5cGVcIjtcbiAgICAvKipcbiAgICAgKiBTaWxlbmNlIHRpbWVvdXQgZm9yIGxpc3RlbmluZ1xuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5Db252ZXJzYXRpb25fSW5pdGlhbF9TaWxlbmNlX1RpbWVvdXRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDb252ZXJzYXRpb25fSW5pdGlhbF9TaWxlbmNlX1RpbWVvdXRcIl0gPSAzN10gPSBcIkNvbnZlcnNhdGlvbl9Jbml0aWFsX1NpbGVuY2VfVGltZW91dFwiO1xuICAgIC8qKlxuICAgICAqIEZyb20gSWQgdG8gYWRkIHRvIHNwZWVjaCByZWNvZ25pdGlvbiBhY3Rpdml0aWVzLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRnJvbV9JZFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9Gcm9tX0lkXCJdID0gMzhdID0gXCJDb252ZXJzYXRpb25fRnJvbV9JZFwiO1xufSkoUHJvcGVydHlJZCB8fCAoUHJvcGVydHlJZCA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3BlcnR5SWQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFNlc3Npb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZXMgcGF5bG9hZCBmb3Igc2Vzc2lvbiBldmVudHMgbGlrZSBTcGVlY2ggU3RhcnQvRW5kIERldGVjdGVkXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIFJlY29nbml0aW9uRXZlbnRBcmdzIGV4dGVuZHMgU2Vzc2lvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIoc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2T2Zmc2V0ID0gb2Zmc2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRzIHRoZSBtZXNzYWdlIG9mZnNldFxuICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25FdmVudEFyZ3MucHJvdG90eXBlLm9mZnNldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgb2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2T2Zmc2V0O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb2duaXRpb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyByZXN1bHQgb2Ygc3BlZWNoIHJlY29nbml0aW9uLlxuICogQGNsYXNzIFJlY29nbml0aW9uUmVzdWx0XG4gKi9cbmV4cG9ydCBjbGFzcyBSZWNvZ25pdGlvblJlc3VsdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdWx0SWQgLSBUaGUgcmVzdWx0IGlkLlxuICAgICAqIEBwYXJhbSB7UmVzdWx0UmVhc29ufSByZWFzb24gLSBUaGUgcmVhc29uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGhlIHJlY29nbml6ZWQgdGV4dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gLSBUaGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQgaW50byB0aGUgc3RyZWFtLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckRldGFpbHMgLSBFcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ganNvbiAtIEFkZGl0aW9uYWwgSnNvbiwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtQcm9wZXJ0eUNvbGxlY3Rpb259IHByb3BlcnRpZXMgLSBBZGRpdGlvbmFsIHByb3BlcnRpZXMsIGlmIHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdElkLCByZWFzb24sIHRleHQsIGR1cmF0aW9uLCBvZmZzZXQsIGVycm9yRGV0YWlscywganNvbiwgcHJvcGVydGllcykge1xuICAgICAgICB0aGlzLnByaXZSZXN1bHRJZCA9IHJlc3VsdElkO1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgICAgIHRoaXMucHJpdlRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLnByaXZEdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICB0aGlzLnByaXZPZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMucHJpdkVycm9yRGV0YWlscyA9IGVycm9yRGV0YWlscztcbiAgICAgICAgdGhpcy5wcml2SnNvbiA9IGpzb247XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHJlc3VsdCBpZGVudGlmaWVyLlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLnJlc3VsdElkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFNwZWNpZmllcyB0aGUgcmVzdWx0IGlkZW50aWZpZXIuXG4gICAgICovXG4gICAgZ2V0IHJlc3VsdElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdWx0SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyBzdGF0dXMgb2YgdGhlIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5yZWFzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Jlc3VsdFJlYXNvbn0gU3BlY2lmaWVzIHN0YXR1cyBvZiB0aGUgcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXNlbnRzIHRoZSByZWNvZ25pemVkIHRleHQgaW4gdGhlIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS50ZXh0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFByZXNlbnRzIHRoZSByZWNvZ25pemVkIHRleHQgaW4gdGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgdGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIER1cmF0aW9uIG9mIHJlY29nbml6ZWQgc3BlZWNoIGluIDEwMCBuYW5vIHNlY29uZCBpbmNlbWVudHMuXG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUuZHVyYXRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gRHVyYXRpb24gb2YgcmVjb2duaXplZCBzcGVlY2ggaW4gMTAwIG5hbm8gc2Vjb25kIGluY2VtZW50cy5cbiAgICAgKi9cbiAgICBnZXQgZHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEdXJhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2Zmc2V0IG9mIHJlY29nbml6ZWQgc3BlZWNoIGluIDEwMCBuYW5vIHNlY29uZCBpbmNlbWVudHMuXG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUub2Zmc2V0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IE9mZnNldCBvZiByZWNvZ25pemVkIHNwZWVjaCBpbiAxMDAgbmFubyBzZWNvbmQgaW5jZW1lbnRzLlxuICAgICAqL1xuICAgIGdldCBvZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZPZmZzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHJlY29nbml0aW9uLCBwcm92aWRlcyBkZXRhaWxzIG9mIHRoZSBvY2N1cnJlZCBlcnJvci5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5lcnJvckRldGFpbHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gYSBicmllZiBkZXNjcmlwdGlvbiBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBnZXQgZXJyb3JEZXRhaWxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JEZXRhaWxzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyBjb250YWluaW5nIEpzb24gc2VyaWFsaXplZCByZWNvZ25pdGlvbiByZXN1bHQgYXMgaXQgd2FzIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUuanNvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybnMge3N0cmluZ30gSnNvbiBzZXJpYWxpemVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IGpzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZKc29uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiAgVGhlIHNldCBvZiBwcm9wZXJ0aWVzIGV4cG9zZWQgaW4gdGhlIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBzZXQgb2YgcHJvcGVydGllcyBleHBvc2VkIGluIHRoZSByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb2duaXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uLCBDb2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uLCBDb250ZXh0LCBPUywgU2VydmljZVJlY29nbml6ZXJCYXNlLCBTcGVlY2hTZXJ2aWNlQ29uZmlnLCB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IFByb21pc2VIZWxwZXIgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQXVkaW9Db25maWcsIFByb3BlcnR5SWQsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIHRoZSBiYXNlIGNsYXNzIFJlY29nbml6ZXIgd2hpY2ggbWFpbmx5IGNvbnRhaW5zIGNvbW1vbiBldmVudCBoYW5kbGVycy5cbiAqIEBjbGFzcyBSZWNvZ25pemVyXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWNvZ25pemVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiBhIFJlY29nbml6ZXJcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0lucHV0IC0gQW4gb3B0aW9uYWwgYXVkaW8gaW5wdXQgc3RyZWFtIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvQ29uZmlnLCBwcm9wZXJ0aWVzLCBjb25uZWN0aW9uRmFjdG9yeSkge1xuICAgICAgICB0aGlzLmF1ZGlvQ29uZmlnID0gKGF1ZGlvQ29uZmlnICE9PSB1bmRlZmluZWQpID8gYXVkaW9Db25maWcgOiBBdWRpb0NvbmZpZy5mcm9tRGVmYXVsdE1pY3JvcGhvbmVJbnB1dCgpO1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gcHJvcGVydGllcy5jbG9uZSgpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRmFjdG9yeSA9IGNvbm5lY3Rpb25GYWN0b3J5O1xuICAgICAgICB0aGlzLmltcGxDb21tb25SZWNvZ25pemVyU2V0dXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBvZiBhc3NvY2lhdGVkIHJlc291cmNlcy5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBASW50ZXJuYWxcbiAgICAgKiBJbnRlcm5hbCBkYXRhIG1lbWJlciB0byBzdXBwb3J0IGZyb21SZWNvZ25pemVyKiBwYXR0ZXJuIG1ldGhvZHMgb24gb3RoZXIgY2xhc3Nlcy5cbiAgICAgKiBEbyBub3QgdXNlIGV4dGVybmFsbHksIG9iamVjdCByZXR1cm5lZCB3aWxsIGNoYW5nZSB3aXRob3V0IHdhcm5pbmcgb3Igbm90aWNlLlxuICAgICAqL1xuICAgIGdldCBpbnRlcm5hbERhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWNvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBwZXJmb3JtcyBjbGVhbnVwIG9mIHJlc291cmNlcy5cbiAgICAgKiBUaGUgQm9vbGVhbiBwYXJhbWV0ZXIgZGlzcG9zaW5nIGluZGljYXRlcyB3aGV0aGVyIHRoZSBtZXRob2QgaXMgY2FsbGVkXG4gICAgICogZnJvbSBEaXNwb3NlIChpZiBkaXNwb3NpbmcgaXMgdHJ1ZSkgb3IgZnJvbSB0aGUgZmluYWxpemVyIChpZiBkaXNwb3NpbmcgaXMgZmFsc2UpLlxuICAgICAqIERlcml2ZWQgY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gZGlzcG9zZSByZXNvdXJjZSBpZiBuZWVkZWQuXG4gICAgICogQG1lbWJlciBSZWNvZ25pemVyLnByb3RvdHlwZS5kaXNwb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzcG9zaW5nIC0gRmxhZyB0byByZXF1ZXN0IGRpc3Bvc2FsLlxuICAgICAqL1xuICAgIGRpc3Bvc2UoZGlzcG9zaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZSZWNvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjby5hdWRpb1NvdXJjZS50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjby5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSB0ZWxlbWV0cnkgc2V0dGluZy5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml6ZXIucHJvdG90eXBlLnRlbGVtZXRyeUVuYWJsZWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgdGVsZW1ldHJ5IGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IHRlbGVtZXRyeUVuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiBTZXJ2aWNlUmVjb2duaXplckJhc2UudGVsZW1ldHJ5RGF0YUVuYWJsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGdsb2JhbGx5IGVuYWJsZXMgb3IgZGlzYWJsZXMgdGVsZW1ldHJ5LlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXplci5wcm90b3R5cGUuZW5hYmxlVGVsZW1ldHJ5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBlbmFibGVkIC0gR2xvYmFsIHNldHRpbmcgZm9yIHRlbGVtZXRyeSBjb2xsZWN0aW9uLlxuICAgICAqIElmIHNldCB0byB0cnVlLCB0ZWxlbWV0cnkgaW5mb3JtYXRpb24gbGlrZSBtaWNyb3Bob25lIGVycm9ycyxcbiAgICAgKiByZWNvZ25pdGlvbiBlcnJvcnMgYXJlIGNvbGxlY3RlZCBhbmQgc2VudCB0byBNaWNyb3NvZnQuXG4gICAgICogSWYgc2V0IHRvIGZhbHNlLCBubyB0ZWxlbWV0cnkgaXMgc2VudCB0byBNaWNyb3NvZnQuXG4gICAgICovXG4gICAgLyogdHNsaW50OmRpc2FibGU6bWVtYmVyLW9yZGVyaW5nICovXG4gICAgc3RhdGljIGVuYWJsZVRlbGVtZXRyeShlbmFibGVkKSB7XG4gICAgICAgIFNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgfVxuICAgIC8vIERvZXMgdGhlIGdlbmVyaWMgcmVjb2duaXplciBzZXR1cCB0aGF0IGlzIGNvbW1vbiBhY3Jvc3MgYWxsIHJlY29nbml6ZXIgdHlwZXMuXG4gICAgaW1wbENvbW1vblJlY29nbml6ZXJTZXR1cCgpIHtcbiAgICAgICAgbGV0IG9zUGxhdGZvcm0gPSAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikgPyBcIkJyb3dzZXJcIiA6IFwiTm9kZVwiO1xuICAgICAgICBsZXQgb3NOYW1lID0gXCJ1bmtub3duXCI7XG4gICAgICAgIGxldCBvc1ZlcnNpb24gPSBcInVua25vd25cIjtcbiAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIG9zUGxhdGZvcm0gPSBvc1BsYXRmb3JtICsgXCIvXCIgKyBuYXZpZ2F0b3IucGxhdGZvcm07XG4gICAgICAgICAgICBvc05hbWUgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgICAgICAgICAgb3NWZXJzaW9uID0gbmF2aWdhdG9yLmFwcFZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVjb2duaXplckNvbmZpZyA9IHRoaXMuY3JlYXRlUmVjb2duaXplckNvbmZpZyhuZXcgU3BlZWNoU2VydmljZUNvbmZpZyhuZXcgQ29udGV4dChuZXcgT1Mob3NQbGF0Zm9ybSwgb3NOYW1lLCBvc1ZlcnNpb24pKSkpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25LZXkgPSB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBhdXRoZW50aWNhdGlvbiA9IChzdWJzY3JpcHRpb25LZXkgJiYgc3Vic2NyaXB0aW9uS2V5ICE9PSBcIlwiKSA/XG4gICAgICAgICAgICBuZXcgQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24oc3Vic2NyaXB0aW9uS2V5KSA6XG4gICAgICAgICAgICBuZXcgQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbigoYXV0aEZldGNoRXZlbnRJZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25Ub2tlbiA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KGF1dGhvcml6YXRpb25Ub2tlbik7XG4gICAgICAgICAgICB9LCAoYXV0aEZldGNoRXZlbnRJZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25Ub2tlbiA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KGF1dGhvcml6YXRpb25Ub2tlbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcml2UmVjbyA9IHRoaXMuY3JlYXRlU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIHRoaXMucHJpdkNvbm5lY3Rpb25GYWN0b3J5LCB0aGlzLmF1ZGlvQ29uZmlnLCByZWNvZ25pemVyQ29uZmlnKTtcbiAgICB9XG4gICAgLy8gU3RhcnQgdGhlIHJlY29nbml0aW9uXG4gICAgaW1wbFJlY29nbml6ZXJTdGFydChyZWNvZ25pdGlvbk1vZGUsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgICAgICB0aGlzLnByaXZSZWNvLnJlY29nbml6ZShyZWNvZ25pdGlvbk1vZGUsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykub24oXG4gICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgIChyZXN1bHQpID0+IHsgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAoISFlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgLy8gSW50ZXJuYWwgZXJyb3Igd2l0aCBzZXJ2aWNlIGNvbW11bmljYXRpb24uXG4gICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayhcIlJ1bnRpbWUgZXJyb3I6IFwiICsgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbFJlY29nbml6ZXJTdG9wKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2UmVjbykge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjby5zdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIHRoZSBwb3NzaWJsZSByZWFzb25zIGEgcmVjb2duaXRpb24gcmVzdWx0IG1pZ2h0IGJlIGdlbmVyYXRlZC5cbiAqIEBjbGFzcyBSZXN1bHRSZWFzb25cbiAqL1xuZXhwb3J0IHZhciBSZXN1bHRSZWFzb247XG4oZnVuY3Rpb24gKFJlc3VsdFJlYXNvbikge1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBzcGVlY2ggY291bGQgbm90IGJlIHJlY29nbml6ZWQuIE1vcmUgZGV0YWlsc1xuICAgICAqIGNhbiBiZSBmb3VuZCBpbiB0aGUgTm9NYXRjaERldGFpbHMgb2JqZWN0LlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLk5vTWF0Y2hcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiTm9NYXRjaFwiXSA9IDBdID0gXCJOb01hdGNoXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC4gTW9yZSBkZXRhaWxzXG4gICAgICogY2FuIGJlIGZvdW5kIHVzaW5nIHRoZSBDYW5jZWxsYXRpb25EZXRhaWxzIG9iamVjdC5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5DYW5jZWxlZFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJDYW5jZWxlZFwiXSA9IDFdID0gXCJDYW5jZWxlZFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgc3BlZWNoIHJlc3VsdCBjb250YWlucyBoeXBvdGhlc2lzIHRleHQuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVjb2duaXplZFNwZWVjaFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJSZWNvZ25pemluZ1NwZWVjaFwiXSA9IDJdID0gXCJSZWNvZ25pemluZ1NwZWVjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgc3BlZWNoIHJlc3VsdCBjb250YWlucyBmaW5hbCB0ZXh0IHRoYXQgaGFzIGJlZW4gcmVjb2duaXplZC5cbiAgICAgKiBTcGVlY2ggUmVjb2duaXRpb24gaXMgbm93IGNvbXBsZXRlIGZvciB0aGlzIHBocmFzZS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5SZWNvZ25pemVkU3BlZWNoXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlJlY29nbml6ZWRTcGVlY2hcIl0gPSAzXSA9IFwiUmVjb2duaXplZFNwZWVjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgaW50ZW50IHJlc3VsdCBjb250YWlucyBoeXBvdGhlc2lzIHRleHQgYW5kIGludGVudC5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5SZWNvZ25pemluZ0ludGVudFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJSZWNvZ25pemluZ0ludGVudFwiXSA9IDRdID0gXCJSZWNvZ25pemluZ0ludGVudFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgaW50ZW50IHJlc3VsdCBjb250YWlucyBmaW5hbCB0ZXh0IGFuZCBpbnRlbnQuXG4gICAgICogU3BlZWNoIFJlY29nbml0aW9uIGFuZCBJbnRlbnQgZGV0ZXJtaW5hdGlvbiBhcmUgbm93IGNvbXBsZXRlIGZvciB0aGlzIHBocmFzZS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5SZWNvZ25pemVkSW50ZW50XG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlJlY29nbml6ZWRJbnRlbnRcIl0gPSA1XSA9IFwiUmVjb2duaXplZEludGVudFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgdHJhbnNsYXRpb24gcmVzdWx0IGNvbnRhaW5zIGh5cG90aGVzaXMgdGV4dCBhbmQgaXRzIHRyYW5zbGF0aW9uKHMpLlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlRyYW5zbGF0aW5nU3BlZWNoXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlRyYW5zbGF0aW5nU3BlZWNoXCJdID0gNl0gPSBcIlRyYW5zbGF0aW5nU3BlZWNoXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSB0cmFuc2xhdGlvbiByZXN1bHQgY29udGFpbnMgZmluYWwgdGV4dCBhbmQgY29ycmVzcG9uZGluZyB0cmFuc2xhdGlvbihzKS5cbiAgICAgKiBTcGVlY2ggUmVjb2duaXRpb24gYW5kIFRyYW5zbGF0aW9uIGFyZSBub3cgY29tcGxldGUgZm9yIHRoaXMgcGhyYXNlLlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlRyYW5zbGF0ZWRTcGVlY2hcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiVHJhbnNsYXRlZFNwZWVjaFwiXSA9IDddID0gXCJUcmFuc2xhdGVkU3BlZWNoXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSBzeW50aGVzaXplZCBhdWRpbyByZXN1bHQgY29udGFpbnMgYSBub24temVybyBhbW91bnQgb2YgYXVkaW8gZGF0YVxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlN5bnRoZXNpemluZ0F1ZGlvXCJdID0gOF0gPSBcIlN5bnRoZXNpemluZ0F1ZGlvXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSBzeW50aGVzaXplZCBhdWRpbyBpcyBub3cgY29tcGxldGUgZm9yIHRoaXMgcGhyYXNlLlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvQ29tcGxldGVkXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlN5bnRoZXNpemluZ0F1ZGlvQ29tcGxldGVkXCJdID0gOV0gPSBcIlN5bnRoZXNpemluZ0F1ZGlvQ29tcGxldGVkXCI7XG59KShSZXN1bHRSZWFzb24gfHwgKFJlc3VsdFJlYXNvbiA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3VsdFJlYXNvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIGNoYW5uZWxzIHVzZWQgdG8gcGFzcyBwcm9wZXJ0eSBzZXR0aW5ncyB0byBzZXJ2aWNlLlxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMC5cbiAqL1xuZXhwb3J0IHZhciBTZXJ2aWNlUHJvcGVydHlDaGFubmVsO1xuKGZ1bmN0aW9uIChTZXJ2aWNlUHJvcGVydHlDaGFubmVsKSB7XG4gICAgLyoqXG4gICAgICogVXNlcyBVUkkgcXVlcnkgcGFyYW1ldGVyIHRvIHBhc3MgcHJvcGVydHkgc2V0dGluZ3MgdG8gc2VydmljZS5cbiAgICAgKi9cbiAgICBTZXJ2aWNlUHJvcGVydHlDaGFubmVsW1NlcnZpY2VQcm9wZXJ0eUNoYW5uZWxbXCJVcmlRdWVyeVBhcmFtZXRlclwiXSA9IDBdID0gXCJVcmlRdWVyeVBhcmFtZXRlclwiO1xufSkoU2VydmljZVByb3BlcnR5Q2hhbm5lbCB8fCAoU2VydmljZVByb3BlcnR5Q2hhbm5lbCA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNlcnZpY2VQcm9wZXJ0eUNoYW5uZWwuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyBjb250ZW50IGZvciBzZXNzaW9uIGV2ZW50cyBsaWtlIFNlc3Npb25TdGFydGVkL1N0b3BwZWQsIFNvdW5kU3RhcnRlZC9TdG9wcGVkLlxuICogQGNsYXNzIFNlc3Npb25FdmVudEFyZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNlc3Npb25JZCkge1xuICAgICAgICB0aGlzLnByaXZTZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudHMgdGhlIHNlc3Npb24gaWRlbnRpZmllci5cbiAgICAgKiBAbWVtYmVyIFNlc3Npb25FdmVudEFyZ3MucHJvdG90eXBlLnNlc3Npb25JZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXByZXNlbnRzIHRoZSBzZXNzaW9uIGlkZW50aWZpZXIuXG4gICAgICovXG4gICAgZ2V0IHNlc3Npb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlc3Npb25JZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNlc3Npb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwgfSBmcm9tIFwiLi9EaWFsb2dTZXJ2aWNlQ29uZmlnXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBDbGFzcyB0aGF0IGRlZmluZXMgY29uZmlndXJhdGlvbnMgZm9yIHRoZSBkaWFsb2cgc2VydmljZSBjb25uZWN0b3Igb2JqZWN0IGZvciB1c2luZyBhIFNwZWVjaENvbW1hbmRzIGJhY2tlbmQuXG4gKiBAY2xhc3MgU3BlZWNoQ29tbWFuZHNDb25maWdcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaENvbW1hbmRzQ29uZmlnIGV4dGVuZHMgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU3BlZWNoQ29tbWFuZHNDb25maWcuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIGJvdCBmcmFtZXdvcmsgY29uZmlnIHdpdGggdGhlIHNwZWNpZmllZCBzdWJzY3JpcHRpb24gYW5kIHJlZ2lvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaENvbW1hbmRzQ29uZmlnLmZyb21TdWJzY3JpcHRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGFwcGxpY2F0aW9uSWQgU3BlZWNoIENvbW1hbmRzIGFwcGxpY2F0aW9uIGlkLlxuICAgICAqIEBwYXJhbSBzdWJzY3JpcHRpb24gU3Vic2NyaXB0aW9uIGtleSBhc3NvY2lhdGVkIHdpdGggdGhlIGJvdFxuICAgICAqIEBwYXJhbSByZWdpb24gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb21tYW5kc0NvbmZpZ30gQSBuZXcgYm90IGZyYW1ld29yayBjb25maWcuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21TdWJzY3JpcHRpb24oYXBwbGljYXRpb25JZCwgc3Vic2NyaXB0aW9uLCByZWdpb24pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGFwcGxpY2F0aW9uSWQsIFwiYXBwbGljYXRpb25JZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHN1YnNjcmlwdGlvbiwgXCJzdWJzY3JpcHRpb25cIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShyZWdpb24sIFwicmVnaW9uXCIpO1xuICAgICAgICBjb25zdCBzcGVlY2hDb21tYW5kc0NvbmZpZyA9IG5ldyBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbCgpO1xuICAgICAgICBzcGVlY2hDb21tYW5kc0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9EaWFsb2dUeXBlLCBcImN1c3RvbV9jb21tYW5kc1wiKTtcbiAgICAgICAgc3BlZWNoQ29tbWFuZHNDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZCwgYXBwbGljYXRpb25JZCk7XG4gICAgICAgIHNwZWVjaENvbW1hbmRzQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCBzdWJzY3JpcHRpb24pO1xuICAgICAgICBzcGVlY2hDb21tYW5kc0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgcmV0dXJuIHNwZWVjaENvbW1hbmRzQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBib3QgZnJhbWV3b3JrIGNvbmZpZyB3aXRoIHRoZSBzcGVjaWZpZWQgU3BlZWNoIENvbW1hbmRzIGFwcGxpY2F0aW9uIGlkLCBhdXRob3JpemF0aW9uIHRva2VuIGFuZCByZWdpb24uXG4gICAgICogTm90ZTogVGhlIGNhbGxlciBuZWVkcyB0byBlbnN1cmUgdGhhdCB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiBpcyB2YWxpZC4gQmVmb3JlIHRoZSBhdXRob3JpemF0aW9uIHRva2VuXG4gICAgICogZXhwaXJlcywgdGhlIGNhbGxlciBuZWVkcyB0byByZWZyZXNoIGl0IGJ5IGNhbGxpbmcgdGhpcyBzZXR0ZXIgd2l0aCBhIG5ldyB2YWxpZCB0b2tlbi5cbiAgICAgKiBBcyBjb25maWd1cmF0aW9uIHZhbHVlcyBhcmUgY29waWVkIHdoZW4gY3JlYXRpbmcgYSBuZXcgcmVjb2duaXplciwgdGhlIG5ldyB0b2tlbiB2YWx1ZSB3aWxsIG5vdCBhcHBseSB0byByZWNvZ25pemVycyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGNyZWF0ZWQuXG4gICAgICogRm9yIHJlY29nbml6ZXJzIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgYmVmb3JlLCB5b3UgbmVlZCB0byBzZXQgYXV0aG9yaXphdGlvbiB0b2tlbiBvZiB0aGUgY29ycmVzcG9uZGluZyByZWNvZ25pemVyXG4gICAgICogdG8gcmVmcmVzaCB0aGUgdG9rZW4uIE90aGVyd2lzZSwgdGhlIHJlY29nbml6ZXJzIHdpbGwgZW5jb3VudGVyIGVycm9ycyBkdXJpbmcgcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hDb21tYW5kc0NvbmZpZy5mcm9tQXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBhcHBsaWNhdGlvbklkIFNwZWVjaCBDb21tYW5kcyBhcHBsaWNhdGlvbiBpZC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvblRva2VuIFRoZSBhdXRob3JpemF0aW9uIHRva2VuIGFzc29jaWF0ZWQgd2l0aCB0aGUgYXBwbGljYXRpb24uXG4gICAgICogQHBhcmFtIHJlZ2lvbiBUaGUgcmVnaW9uIG5hbWUgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHJldHVybnMge1NwZWVjaENvbW1hbmRzQ29uZmlnfSBBIG5ldyBzcGVlY2ggY29tbWFuZHMgY29uZmlnLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tQXV0aG9yaXphdGlvblRva2VuKGFwcGxpY2F0aW9uSWQsIGF1dGhvcml6YXRpb25Ub2tlbiwgcmVnaW9uKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShhcHBsaWNhdGlvbklkLCBcImFwcGxpY2F0aW9uSWRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShhdXRob3JpemF0aW9uVG9rZW4sIFwiYXV0aG9yaXphdGlvblRva2VuXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3Qgc3BlZWNoQ29tbWFuZHNDb25maWcgPSBuZXcgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwoKTtcbiAgICAgICAgc3BlZWNoQ29tbWFuZHNDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZSwgXCJjdXN0b21fY29tbWFuZHNcIik7XG4gICAgICAgIHNwZWVjaENvbW1hbmRzQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWQsIGFwcGxpY2F0aW9uSWQpO1xuICAgICAgICBzcGVlY2hDb21tYW5kc0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCBhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICBzcGVlY2hDb21tYW5kc0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgcmV0dXJuIHNwZWVjaENvbW1hbmRzQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjb3JyZXNwb25kaW5nIGJhY2tlbmQgYXBwbGljYXRpb24gaWRlbnRpZmllci5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaENvbW1hbmRzQ29uZmlnLnByb3RvdHlwZS5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgYXBwbGljYXRpb24gaWRlbnRpZmllciB0byBzZXQuXG4gICAgICovXG4gICAgc2V0IGFwcGxpY2F0aW9uSWQodmFsdWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHZhbHVlLCBcInZhbHVlXCIpO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWQsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY29ycmVzcG9uZGluZyBiYWNrZW5kIGFwcGxpY2F0aW9uIGlkZW50aWZpZXIuXG4gICAgICogQG1lbWJlciBTcGVlY2hDb21tYW5kc0NvbmZpZy5wcm90b3R5cGUuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGFwcGxpY2F0aW9uIGlkZW50aWZpZXIgdG8gZ2V0LlxuICAgICAqL1xuICAgIGdldCBhcHBsaWNhdGlvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaENvbW1hbmRzQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBGb3JjZURpY3RhdGlvblByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgT3V0cHV0Rm9ybWF0LCBQcm9mYW5pdHlPcHRpb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogU3BlZWNoIGNvbmZpZ3VyYXRpb24uXG4gKiBAY2xhc3MgU3BlZWNoQ29uZmlnXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVlY2hDb25maWcge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgLyoqXG4gICAgICogU3RhdGljIGluc3RhbmNlIG9mIFNwZWVjaENvbmZpZyByZXR1cm5lZCBieSBwYXNzaW5nIHN1YnNjcmlwdGlvbktleSBhbmQgc2VydmljZSByZWdpb24uXG4gICAgICogTm90ZTogUGxlYXNlIHVzZSB5b3VyIExhbmd1YWdlVW5kZXJzdGFuZGluZyBzdWJzY3JpcHRpb24ga2V5IGluIGNhc2UgeW91IHdhbnQgdG8gdXNlIHRoZSBJbnRlbnQgcmVjb2duaXplci5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaENvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25LZXkgLSBUaGUgc3Vic2NyaXB0aW9uIGtleS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIC0gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IFRoZSBzcGVlY2ggZmFjdG9yeVxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbktleSwgcmVnaW9uKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzdWJzY3JpcHRpb25LZXksIFwic3Vic2NyaXB0aW9uS2V5XCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3Qgc3BlZWNoSW1wbCA9IG5ldyBTcGVlY2hDb25maWdJbXBsKCk7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9JbnRlbnRSZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHN1YnNjcmlwdGlvbktleSk7XG4gICAgICAgIHJldHVybiBzcGVlY2hJbXBsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBzcGVlY2ggY29uZmlnIHdpdGggc3BlY2lmaWVkIGVuZHBvaW50IGFuZCBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIG9ubHkgZm9yIHVzZXJzIHdobyB1c2UgYSBub24tc3RhbmRhcmQgc2VydmljZSBlbmRwb2ludCBvciBwYXJhbWV0ZXJzLlxuICAgICAqIE5vdGU6IFBsZWFzZSB1c2UgeW91ciBMYW5ndWFnZVVuZGVyc3RhbmRpbmcgc3Vic2NyaXB0aW9uIGtleSBpbiBjYXNlIHlvdSB3YW50IHRvIHVzZSB0aGUgSW50ZW50IHJlY29nbml6ZXIuXG4gICAgICogTm90ZTogVGhlIHF1ZXJ5IHBhcmFtZXRlcnMgc3BlY2lmaWVkIGluIHRoZSBlbmRwb2ludCBVUkwgYXJlIG5vdCBjaGFuZ2VkLCBldmVuIGlmIHRoZXkgYXJlIHNldCBieSBhbnkgb3RoZXIgQVBJcy5cbiAgICAgKiBGb3IgZXhhbXBsZSwgaWYgbGFuZ3VhZ2UgaXMgZGVmaW5lZCBpbiB0aGUgdXJpIGFzIHF1ZXJ5IHBhcmFtZXRlciBcImxhbmd1YWdlPWRlLURFXCIsIGFuZCBhbHNvIHNldCBieVxuICAgICAqICAgICAgICAgICAgICBTcGVlY2hDb25maWcuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSA9IFwiZW4tVVNcIiwgdGhlIGxhbmd1YWdlIHNldHRpbmcgaW4gdXJpIHRha2VzIHByZWNlZGVuY2UsXG4gICAgICogICAgICAgICAgICAgIGFuZCB0aGUgZWZmZWN0aXZlIGxhbmd1YWdlIGlzIFwiZGUtREVcIi4gT25seSB0aGUgcGFyYW1ldGVycyB0aGF0IGFyZSBub3Qgc3BlY2lmaWVkIGluIHRoZVxuICAgICAqICAgICAgICAgICAgICBlbmRwb2ludCBVUkwgY2FuIGJlIHNldCBieSBvdGhlciBBUElzLlxuICAgICAqIE5vdGU6IFRvIHVzZSBhdXRob3JpemF0aW9uIHRva2VuIHdpdGggZnJvbUVuZHBvaW50LCBwYXNzIGFuIGVtcHR5IHN0cmluZyB0byB0aGUgc3Vic2NyaXB0aW9uS2V5IGluIHRoZVxuICAgICAqICAgICAgIGZyb21FbmRwb2ludCBtZXRob2QsIGFuZCB0aGVuIHNldCBhdXRob3JpemF0aW9uVG9rZW49XCJ0b2tlblwiIG9uIHRoZSBjcmVhdGVkIFNwZWVjaENvbmZpZyBpbnN0YW5jZSB0b1xuICAgICAqICAgICAgIHVzZSB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaENvbmZpZy5mcm9tRW5kcG9pbnRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtVUkx9IGVuZHBvaW50IC0gVGhlIHNlcnZpY2UgZW5kcG9pbnQgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXkuIElmIGEgc3Vic2NyaXB0aW9uIGtleSBpcyBub3Qgc3BlY2lmaWVkLCBhbiBhdXRob3JpemF0aW9uIHRva2VuIG11c3QgYmUgc2V0LlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IEEgc3BlZWNoIGZhY3RvcnkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21FbmRwb2ludChlbmRwb2ludCwgc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChlbmRwb2ludCwgXCJlbmRwb2ludFwiKTtcbiAgICAgICAgY29uc3Qgc3BlZWNoSW1wbCA9IG5ldyBTcGVlY2hDb25maWdJbXBsKCk7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgZW5kcG9pbnQuaHJlZik7XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uS2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BlZWNoSW1wbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgc3BlZWNoIGZhY3Rvcnkgd2l0aCBzcGVjaWZpZWQgaW5pdGlhbCBhdXRob3JpemF0aW9uIHRva2VuIGFuZCByZWdpb24uXG4gICAgICogTm90ZTogVGhlIGNhbGxlciBuZWVkcyB0byBlbnN1cmUgdGhhdCB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiBpcyB2YWxpZC4gQmVmb3JlIHRoZSBhdXRob3JpemF0aW9uIHRva2VuXG4gICAgICogICAgICAgZXhwaXJlcywgdGhlIGNhbGxlciBuZWVkcyB0byByZWZyZXNoIGl0IGJ5IGNhbGxpbmcgdGhpcyBzZXR0ZXIgd2l0aCBhIG5ldyB2YWxpZCB0b2tlbi5cbiAgICAgKiBOb3RlOiBQbGVhc2UgdXNlIGEgdG9rZW4gZGVyaXZlZCBmcm9tIHlvdXIgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nIHN1YnNjcmlwdGlvbiBrZXkgaW4gY2FzZSB5b3Ugd2FudFxuICAgICAqICAgICAgIHRvIHVzZSB0aGUgSW50ZW50IHJlY29nbml6ZXIuIEFzIGNvbmZpZ3VyYXRpb24gdmFsdWVzIGFyZSBjb3BpZWQgd2hlbiBjcmVhdGluZyBhIG5ldyByZWNvZ25pemVyLFxuICAgICAqICAgICAgIHRoZSBuZXcgdG9rZW4gdmFsdWUgd2lsbCBub3QgYXBwbHkgdG8gcmVjb2duaXplcnMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBjcmVhdGVkLiBGb3IgcmVjb2duaXplcnNcbiAgICAgKiAgICAgICB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkIGJlZm9yZSwgeW91IG5lZWQgdG8gc2V0IGF1dGhvcml6YXRpb24gdG9rZW4gb2YgdGhlIGNvcnJlc3BvbmRpbmcgcmVjb2duaXplclxuICAgICAqICAgICAgIHRvIHJlZnJlc2ggdGhlIHRva2VuLiBPdGhlcndpc2UsIHRoZSByZWNvZ25pemVycyB3aWxsIGVuY291bnRlciBlcnJvcnMgZHVyaW5nIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoQ29uZmlnLmZyb21BdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml6YXRpb25Ub2tlbiAtIFRoZSBpbml0aWFsIGF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lvbiAtIFRoZSByZWdpb24gbmFtZSAoc2VlIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9ha2EubXMvY3NzcGVlY2gvcmVnaW9uXCI+cmVnaW9uIHBhZ2U8L2E+KS5cbiAgICAgKiBAcmV0dXJucyB7U3BlZWNoQ29uZmlnfSBBIHNwZWVjaCBmYWN0b3J5IGluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tQXV0aG9yaXphdGlvblRva2VuKGF1dGhvcml6YXRpb25Ub2tlbiwgcmVnaW9uKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChhdXRob3JpemF0aW9uVG9rZW4sIFwiYXV0aG9yaXphdGlvblRva2VuXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3Qgc3BlZWNoSW1wbCA9IG5ldyBTcGVlY2hDb25maWdJbXBsKCk7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9JbnRlbnRSZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHNwZWVjaEltcGwuYXV0aG9yaXphdGlvblRva2VuID0gYXV0aG9yaXphdGlvblRva2VuO1xuICAgICAgICByZXR1cm4gc3BlZWNoSW1wbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBjb25maWd1cmF0aW9uLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoQ29uZmlnLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgIGNsb3NlKCkgeyB9XG59XG4vKipcbiAqIEBwdWJsaWNcbiAqIEBjbGFzcyBTcGVlY2hDb25maWdJbXBsXG4gKi9cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFNwZWVjaENvbmZpZ0ltcGwgZXh0ZW5kcyBTcGVlY2hDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UgPSBcImVuLVVTXCI7IC8vIFNob3VsZCB3ZSBoYXZlIGEgZGVmYXVsdD9cbiAgICAgICAgdGhpcy5vdXRwdXRGb3JtYXQgPSBPdXRwdXRGb3JtYXQuU2ltcGxlO1xuICAgIH1cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIGdldCBlbmRQb2ludCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVUkwodGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50KSk7XG4gICAgfVxuICAgIGdldCBzdWJzY3JpcHRpb25LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5KTtcbiAgICB9XG4gICAgZ2V0IHJlZ2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24pO1xuICAgIH1cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuKTtcbiAgICB9XG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKTtcbiAgICB9XG4gICAgc2V0IHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSwgdmFsdWUpO1xuICAgIH1cbiAgICBnZXQgb3V0cHV0Rm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gT3V0cHV0Rm9ybWF0W3RoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCB1bmRlZmluZWQpXTtcbiAgICB9XG4gICAgc2V0IG91dHB1dEZvcm1hdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0W3ZhbHVlXSk7XG4gICAgfVxuICAgIGdldCBlbmRwb2ludElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQpO1xuICAgIH1cbiAgICBzZXQgZW5kcG9pbnRJZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZCwgdmFsdWUpO1xuICAgIH1cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgIH1cbiAgICBnZXRQcm9wZXJ0eShuYW1lLCBkZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkobmFtZSwgZGVmKTtcbiAgICB9XG4gICAgc2V0UHJveHkocHJveHlIb3N0TmFtZSwgcHJveHlQb3J0LCBwcm94eVVzZXJOYW1lLCBwcm94eVBhc3N3b3JkKSB7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5SG9zdE5hbWVdLCBwcm94eUhvc3ROYW1lKTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0XSwgcHJveHlQb3J0KTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlVc2VyTmFtZV0sIHByb3h5VXNlck5hbWUpO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBhc3N3b3JkXSwgcHJveHlQYXNzd29yZCk7XG4gICAgfVxuICAgIHNldFNlcnZpY2VQcm9wZXJ0eShuYW1lLCB2YWx1ZSwgY2hhbm5lbCkge1xuICAgICAgICBjb25zdCBjdXJyZW50UHJvcGVydGllcyA9IEpTT04ucGFyc2UodGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgXCJ7fVwiKSk7XG4gICAgICAgIGN1cnJlbnRQcm9wZXJ0aWVzW25hbWVdID0gdmFsdWU7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoU2VydmljZVByb3BlcnRpZXNQcm9wZXJ0eU5hbWUsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRQcm9wZXJ0aWVzKSk7XG4gICAgfVxuICAgIHNldFByb2Zhbml0eShwcm9mYW5pdHkpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Qcm9mYW5pdHlPcHRpb24sIFByb2Zhbml0eU9wdGlvbltwcm9mYW5pdHldKTtcbiAgICB9XG4gICAgZW5hYmxlQXVkaW9Mb2dnaW5nKCkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5hYmxlQXVkaW9Mb2dnaW5nLCBcInRydWVcIik7XG4gICAgfVxuICAgIHJlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzKCkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzLCBcInRydWVcIik7XG4gICAgfVxuICAgIGVuYWJsZURpY3RhdGlvbigpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShGb3JjZURpY3RhdGlvblByb3BlcnR5TmFtZSwgXCJ0cnVlXCIpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgcmV0ID0gbmV3IFNwZWVjaENvbmZpZ0ltcGwoKTtcbiAgICAgICAgcmV0LnByaXZQcm9wZXJ0aWVzID0gdGhpcy5wcml2UHJvcGVydGllcy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyBjb250ZW50IG9mIGEgUmVjb2duaXRpb25FcnJvckV2ZW50LlxuICogQGNsYXNzIFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgZXh0ZW5kcyBSZWNvZ25pdGlvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gcmVhc29uIC0gVGhlIGNhbmNlbGxhdGlvbiByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlLCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLnJlYXNvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7Q2FuY2VsbGF0aW9uUmVhc29ufSBTcGVjaWZpZXMgdGhlIHJlYXNvbiBjYW5jZWxlZC5cbiAgICAgKi9cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZXJyb3IgY29kZSBpbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMS4wLlxuICAgICAqIEByZXR1cm4gQW4gZXJyb3IgY29kZSB0aGF0IHJlcHJlc2VudHMgdGhlIGVycm9yIHJlYXNvbi5cbiAgICAgKi9cbiAgICBnZXQgZXJyb3JDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JDb2RlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbiwgcHJvdmlkZXMgZGV0YWlscyBvZiB0aGUgb2NjdXJyZWQgZXJyb3IuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5lcnJvckRldGFpbHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyBjb250ZW50cyBvZiBzcGVlY2ggcmVjb2duaXppbmcvcmVjb2duaXplZCBldmVudC5cbiAqIEBjbGFzcyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MgZXh0ZW5kcyBSZWNvZ25pdGlvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1NwZWVjaFJlY29nbml0aW9uUmVzdWx0fSByZXN1bHQgLSBUaGUgc3BlZWNoIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncy5wcm90b3R5cGUucmVzdWx0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtTcGVlY2hSZWNvZ25pdGlvblJlc3VsdH0gdGhlIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgcmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdWx0O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFJlY29nbml0aW9uUmVzdWx0IH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIHJlc3VsdCBvZiBzcGVlY2ggcmVjb2duaXRpb24uXG4gKiBAY2xhc3MgU3BlZWNoUmVjb2duaXRpb25SZXN1bHRcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0IGV4dGVuZHMgUmVjb2duaXRpb25SZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXN1bHRJZCAtIFRoZSByZXN1bHQgaWQuXG4gICAgICogQHBhcmFtIHtSZXN1bHRSZWFzb259IHJlYXNvbiAtIFRoZSByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgcmVjb2duaXplZCB0ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbnRvIHRoZSBzdHJlYW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqc29uIC0gQWRkaXRpb25hbCBKc29uLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gcHJvcGVydGllcyAtIEFkZGl0aW9uYWwgcHJvcGVydGllcywgaWYgcHJvdmlkZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0SWQsIHJlYXNvbiwgdGV4dCwgZHVyYXRpb24sIG9mZnNldCwgZXJyb3JEZXRhaWxzLCBqc29uLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHN1cGVyKHJlc3VsdElkLCByZWFzb24sIHRleHQsIGR1cmF0aW9uLCBvZmZzZXQsIGVycm9yRGV0YWlscywganNvbiwgcHJvcGVydGllcyk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hSZWNvZ25pdGlvblJlc3VsdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBSZWNvZ25pdGlvbk1vZGUsIFJlY29nbml6ZXJDb25maWcsIFNwZWVjaFNlcnZpY2VSZWNvZ25pemVyLCB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IFNwZWVjaENvbm5lY3Rpb25GYWN0b3J5IH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvU3BlZWNoQ29ubmVjdGlvbkZhY3RvcnlcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgT3V0cHV0Rm9ybWF0LCBQcm9wZXJ0eUlkLCBSZWNvZ25pemVyLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogUGVyZm9ybXMgc3BlZWNoIHJlY29nbml0aW9uIGZyb20gbWljcm9waG9uZSwgZmlsZSwgb3Igb3RoZXIgYXVkaW8gaW5wdXQgc3RyZWFtcywgYW5kIGdldHMgdHJhbnNjcmliZWQgdGV4dCBhcyByZXN1bHQuXG4gKiBAY2xhc3MgU3BlZWNoUmVjb2duaXplclxuICovXG5leHBvcnQgY2xhc3MgU3BlZWNoUmVjb2duaXplciBleHRlbmRzIFJlY29nbml6ZXIge1xuICAgIC8qKlxuICAgICAqIFNwZWVjaFJlY29nbml6ZXIgY29uc3RydWN0b3IuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTcGVlY2hDb25maWd9IHNwZWVjaENvbmZpZyAtIEFuIHNldCBvZiBpbml0aWFsIHByb3BlcnRpZXMgZm9yIHRoaXMgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7QXVkaW9Db25maWd9IGF1ZGlvQ29uZmlnIC0gQW4gb3B0aW9uYWwgYXVkaW8gY29uZmlndXJhdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNwZWVjaENvbmZpZ0ltcGwgPSBzcGVlY2hDb25maWc7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChzcGVlY2hDb25maWdJbXBsLCBcInNwZWVjaENvbmZpZ1wiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHNwZWVjaENvbmZpZ0ltcGwucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSksIFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VdKTtcbiAgICAgICAgc3VwZXIoYXVkaW9Db25maWcsIHNwZWVjaENvbmZpZ0ltcGwucHJvcGVydGllcywgbmV3IFNwZWVjaENvbm5lY3Rpb25GYWN0b3J5KCkpO1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlZFNwZWVjaFJlY29nbml6ZXIgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZW5kcG9pbnQgaWQgb2YgYSBjdXN0b21pemVkIHNwZWVjaCBtb2RlbCB0aGF0IGlzIHVzZWQgZm9yIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLmVuZHBvaW50SWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIGVuZHBvaW50IGlkIG9mIGEgY3VzdG9taXplZCBzcGVlY2ggbW9kZWwgdGhhdCBpcyB1c2VkIGZvciBzcGVlY2ggcmVjb2duaXRpb24uXG4gICAgICovXG4gICAgZ2V0IGVuZHBvaW50SWQoKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRTcGVlY2hSZWNvZ25pemVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQsIFwiMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHRva2VuKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0b2tlbiwgXCJ0b2tlblwiKTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3Bva2VuIGxhbmd1YWdlIG9mIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgc3Bva2VuIGxhbmd1YWdlIG9mIHJlY29nbml0aW9uLlxuICAgICAqL1xuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkU3BlZWNoUmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvdXRwdXQgZm9ybWF0IG9mIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUub3V0cHV0Rm9ybWF0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtPdXRwdXRGb3JtYXR9IFRoZSBvdXRwdXQgZm9ybWF0IG9mIHJlY29nbml0aW9uLlxuICAgICAqL1xuICAgIGdldCBvdXRwdXRGb3JtYXQoKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRTcGVlY2hSZWNvZ25pemVyKTtcbiAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuU2ltcGxlXSkgPT09IE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuU2ltcGxlXSkge1xuICAgICAgICAgICAgcmV0dXJuIE91dHB1dEZvcm1hdC5TaW1wbGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gT3V0cHV0Rm9ybWF0LkRldGFpbGVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIFNwZWVjaFJlY29nbml6ZXIuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIFNwZWVjaFJlY29nbml6ZXIuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgc3BlZWNoIHJlY29nbml0aW9uLCBhbmQgc3RvcHMgYWZ0ZXIgdGhlIGZpcnN0IHV0dGVyYW5jZSBpcyByZWNvZ25pemVkLlxuICAgICAqIFRoZSB0YXNrIHJldHVybnMgdGhlIHJlY29nbml0aW9uIHRleHQgYXMgcmVzdWx0LlxuICAgICAqIE5vdGU6IFJlY29nbml6ZU9uY2VBc3luYygpIHJldHVybnMgd2hlbiB0aGUgZmlyc3QgdXR0ZXJhbmNlIGhhcyBiZWVuIHJlY29nbml6ZWQsXG4gICAgICogICAgICAgc28gaXQgaXMgc3VpdGFibGUgb25seSBmb3Igc2luZ2xlIHNob3QgcmVjb2duaXRpb25cbiAgICAgKiAgICAgICBsaWtlIGNvbW1hbmQgb3IgcXVlcnkuIEZvciBsb25nLXJ1bm5pbmcgcmVjb2duaXRpb24sIHVzZSBTdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCkgaW5zdGVhZC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnJlY29nbml6ZU9uY2VBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayB0aGF0IHJlY2VpdmVkIHRoZSBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHJlY29nbml6ZU9uY2VBc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkU3BlZWNoUmVjb2duaXplcik7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0YXJ0KFJlY29nbml0aW9uTW9kZS5JbnRlcmFjdGl2ZSwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgc3BlZWNoIHJlY29nbml0aW9uLCB1bnRpbCBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoKSBpcyBjYWxsZWQuXG4gICAgICogVXNlciBtdXN0IHN1YnNjcmliZSB0byBldmVudHMgdG8gcmVjZWl2ZSByZWNvZ25pdGlvbiByZXN1bHRzLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgdGhlIHJlY29nbml0aW9uIGhhcyBzdGFydGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkU3BlZWNoUmVjb2duaXplcik7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0YXJ0KFJlY29nbml0aW9uTW9kZS5Db252ZXJzYXRpb24sIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIC8vIHJlcG9ydCByZXN1bHQgdG8gcHJvbWlzZS5cbiAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEZXN0cm95IHRoZSByZWNvZ25pemVyLlxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGNvbnRpbnVvdXMgc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgcmVjb2duaXRpb24gaGFzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFNwZWVjaFJlY29nbml6ZXIpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEZXN0cm95IHRoZSByZWNvZ25pemVyLlxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBzcGVlY2ggcmVjb2duaXRpb24gd2l0aCBrZXl3b3JkIHNwb3R0aW5nLCB1bnRpbFxuICAgICAqIHN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luYygpIGlzIGNhbGxlZC5cbiAgICAgKiBVc2VyIG11c3Qgc3Vic2NyaWJlIHRvIGV2ZW50cyB0byByZWNlaXZlIHJlY29nbml0aW9uIHJlc3VsdHMuXG4gICAgICogTm90ZTogS2V5IHdvcmQgc3BvdHRpbmcgZnVuY3Rpb25hbGl0eSBpcyBvbmx5IGF2YWlsYWJsZSBvbiB0aGVcbiAgICAgKiAgICAgIFNwZWVjaCBEZXZpY2VzIFNESy4gVGhpcyBmdW5jdGlvbmFsaXR5IGlzIGN1cnJlbnRseSBub3QgaW5jbHVkZWQgaW4gdGhlIFNESyBpdHNlbGYuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5zdGFydEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7S2V5d29yZFJlY29nbml0aW9uTW9kZWx9IG1vZGVsIFRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsIHRoYXRcbiAgICAgKiAgICAgICAgc3BlY2lmaWVzIHRoZSBrZXl3b3JkIHRvIGJlIHJlY29nbml6ZWQuXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0YXJ0S2V5d29yZFJlY29nbml0aW9uQXN5bmMobW9kZWwsIGNiLCBlcnIpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKG1vZGVsLCBcIm1vZGVsXCIpO1xuICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgIGVycihcIk5vdCB5ZXQgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGNvbnRpbnVvdXMgc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqIE5vdGU6IEtleSB3b3JkIHNwb3R0aW5nIGZ1bmN0aW9uYWxpdHkgaXMgb25seSBhdmFpbGFibGUgb24gdGhlXG4gICAgICogICAgICAgU3BlZWNoIERldmljZXMgU0RLLiBUaGlzIGZ1bmN0aW9uYWxpdHkgaXMgY3VycmVudGx5IG5vdCBpbmNsdWRlZCBpbiB0aGUgU0RLIGl0c2VsZi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgdGhlIHJlY29nbml0aW9uIGhhcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RvcEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogY2xvc2VzIGFsbCBleHRlcm5hbCByZXNvdXJjZXMgaGVsZCBieSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRTcGVlY2hSZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyBhbnkgcmVzb3VyY2VzIGhlbGQgYnkgdGhlIG9iamVjdC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLmRpc3Bvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtib29sZWFufSBkaXNwb3NpbmcgLSB0cnVlIGlmIGRpc3Bvc2luZyB0aGUgb2JqZWN0LlxuICAgICAqL1xuICAgIGRpc3Bvc2UoZGlzcG9zaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlZFNwZWVjaFJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRTcGVlY2hSZWNvZ25pemVyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5kaXNwb3NlKGRpc3Bvc2luZyk7XG4gICAgfVxuICAgIGNyZWF0ZVJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcsIHRoaXMucHJvcGVydGllcyk7XG4gICAgfVxuICAgIGNyZWF0ZVNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Db25maWcsIHJlY29nbml6ZXJDb25maWcpIHtcbiAgICAgICAgY29uc3QgY29uZmlnSW1wbCA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICByZXR1cm4gbmV3IFNwZWVjaFNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgY29uZmlnSW1wbCwgcmVjb2duaXplckNvbmZpZywgdGhpcyk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBGb3JjZURpY3RhdGlvblByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgT3V0cHV0Rm9ybWF0LCBQcm9mYW5pdHlPcHRpb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgU3BlZWNoQ29uZmlnLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogU3BlZWNoIHRyYW5zbGF0aW9uIGNvbmZpZ3VyYXRpb24uXG4gKiBAY2xhc3MgU3BlZWNoVHJhbnNsYXRpb25Db25maWdcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnIGV4dGVuZHMgU3BlZWNoQ29uZmlnIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHJlY29nbml6ZXIgY29uZmlnLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGF0aWMgaW5zdGFuY2Ugb2YgU3BlZWNoVHJhbnNsYXRpb25Db25maWcgcmV0dXJuZWQgYnkgcGFzc2luZyBhIHN1YnNjcmlwdGlvbiBrZXkgYW5kIHNlcnZpY2UgcmVnaW9uLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWcuZnJvbVN1YnNjcmlwdGlvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lvbiAtIFRoZSByZWdpb24gbmFtZSAoc2VlIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9ha2EubXMvY3NzcGVlY2gvcmVnaW9uXCI+cmVnaW9uIHBhZ2U8L2E+KS5cbiAgICAgKiBAcmV0dXJucyB7U3BlZWNoVHJhbnNsYXRpb25Db25maWd9IFRoZSBzcGVlY2ggdHJhbnNsYXRpb24gY29uZmlnLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbktleSwgcmVnaW9uKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzdWJzY3JpcHRpb25LZXksIFwic3Vic2NyaXB0aW9uS2V5XCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3QgcmV0ID0gbmV3IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCgpO1xuICAgICAgICByZXQucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uS2V5KTtcbiAgICAgICAgcmV0LnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBpbnN0YW5jZSBvZiBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyByZXR1cm5lZCBieSBwYXNzaW5nIGF1dGhvcml6YXRpb24gdG9rZW4gYW5kIHNlcnZpY2UgcmVnaW9uLlxuICAgICAqIE5vdGU6IFRoZSBjYWxsZXIgbmVlZHMgdG8gZW5zdXJlIHRoYXQgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gaXMgdmFsaWQuIEJlZm9yZSB0aGUgYXV0aG9yaXphdGlvbiB0b2tlblxuICAgICAqICAgICAgIGV4cGlyZXMsIHRoZSBjYWxsZXIgbmVlZHMgdG8gcmVmcmVzaCBpdCBieSBzZXR0aW5nIHRoZSBwcm9wZXJ0eSBhdXRob3JpemF0aW9uVG9rZW4gd2l0aCBhIG5ld1xuICAgICAqICAgICAgIHZhbGlkIHRva2VuLiBPdGhlcndpc2UsIGFsbCB0aGUgcmVjb2duaXplcnMgY3JlYXRlZCBieSB0aGlzIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnIGluc3RhbmNlXG4gICAgICogICAgICAgd2lsbCBlbmNvdW50ZXIgZXJyb3JzIGR1cmluZyByZWNvZ25pdGlvbi5cbiAgICAgKiBBcyBjb25maWd1cmF0aW9uIHZhbHVlcyBhcmUgY29waWVkIHdoZW4gY3JlYXRpbmcgYSBuZXcgcmVjb2duaXplciwgdGhlIG5ldyB0b2tlbiB2YWx1ZSB3aWxsIG5vdCBhcHBseVxuICAgICAqIHRvIHJlY29nbml6ZXJzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gY3JlYXRlZC5cbiAgICAgKiBGb3IgcmVjb2duaXplcnMgdGhhdCBoYXZlIGJlZW4gY3JlYXRlZCBiZWZvcmUsIHlvdSBuZWVkIHRvIHNldCBhdXRob3JpemF0aW9uIHRva2VuIG9mIHRoZSBjb3JyZXNwb25kaW5nIHJlY29nbml6ZXJcbiAgICAgKiB0byByZWZyZXNoIHRoZSB0b2tlbi4gT3RoZXJ3aXNlLCB0aGUgcmVjb2duaXplcnMgd2lsbCBlbmNvdW50ZXIgZXJyb3JzIGR1cmluZyByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLmZyb21BdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml6YXRpb25Ub2tlbiAtIFRoZSBhdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpb24gLSBUaGUgcmVnaW9uIG5hbWUgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHJldHVybnMge1NwZWVjaFRyYW5zbGF0aW9uQ29uZmlnfSBUaGUgc3BlZWNoIHRyYW5zbGF0aW9uIGNvbmZpZy5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUF1dGhvcml6YXRpb25Ub2tlbihhdXRob3JpemF0aW9uVG9rZW4sIHJlZ2lvbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoYXV0aG9yaXphdGlvblRva2VuLCBcImF1dGhvcml6YXRpb25Ub2tlblwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZ2lvbiwgXCJyZWdpb25cIik7XG4gICAgICAgIGNvbnN0IHJldCA9IG5ldyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwoKTtcbiAgICAgICAgcmV0LnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgYXV0aG9yaXphdGlvblRva2VuKTtcbiAgICAgICAgcmV0LnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIHNwZWVjaCB0cmFuc2xhdGlvbiBjb25maWcgd2l0aCBzcGVjaWZpZWQgZW5kcG9pbnQgYW5kIHN1YnNjcmlwdGlvbiBrZXkuXG4gICAgICogVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgb25seSBmb3IgdXNlcnMgd2hvIHVzZSBhIG5vbi1zdGFuZGFyZCBzZXJ2aWNlIGVuZHBvaW50IG9yIHBhcmFtdGVycy5cbiAgICAgKiBOb3RlOiBUaGUgcXVlcnkgcHJvcGVydGllcyBzcGVjaWZpZWQgaW4gdGhlIGVuZHBvaW50IFVSTCBhcmUgbm90IGNoYW5nZWQsIGV2ZW4gaWYgdGhleSBhcmVcbiAgICAgKiAgICAgICBzZXQgYnkgYW55IG90aGVyIEFQSXMuIEZvciBleGFtcGxlLCBpZiBsYW5ndWFnZSBpcyBkZWZpbmVkIGluIHRoZSB1cmkgYXMgcXVlcnkgcGFyYW1ldGVyXG4gICAgICogICAgICAgXCJsYW5ndWFnZT1kZS1ERVwiLCBhbmQgYWxzbyBzZXQgYnkgdGhlIHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UgcHJvcGVydHksIHRoZSBsYW5ndWFnZVxuICAgICAqICAgICAgIHNldHRpbmcgaW4gdXJpIHRha2VzIHByZWNlZGVuY2UsIGFuZCB0aGUgZWZmZWN0aXZlIGxhbmd1YWdlIGlzIFwiZGUtREVcIi5cbiAgICAgKiBPbmx5IHRoZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIG5vdCBzcGVjaWZpZWQgaW4gdGhlIGVuZHBvaW50IFVSTCBjYW4gYmUgc2V0IGJ5IG90aGVyIEFQSXMuXG4gICAgICogTm90ZTogVG8gdXNlIGF1dGhvcml6YXRpb24gdG9rZW4gd2l0aCBmcm9tRW5kcG9pbnQsIHBhc3MgYW4gZW1wdHkgc3RyaW5nIHRvIHRoZSBzdWJzY3JpcHRpb25LZXkgaW4gdGhlXG4gICAgICogICAgICAgZnJvbUVuZHBvaW50IG1ldGhvZCwgYW5kIHRoZW4gc2V0IGF1dGhvcml6YXRpb25Ub2tlbj1cInRva2VuXCIgb24gdGhlIGNyZWF0ZWQgU3BlZWNoQ29uZmlnIGluc3RhbmNlIHRvXG4gICAgICogICAgICAgdXNlIHRoZSBhdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWcuZnJvbUVuZHBvaW50XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7VVJMfSBlbmRwb2ludCAtIFRoZSBzZXJ2aWNlIGVuZHBvaW50IHRvIGNvbm5lY3QgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvbktleSAtIFRoZSBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ30gQSBzcGVlY2ggY29uZmlnIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tRW5kcG9pbnQoZW5kcG9pbnQsIHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoZW5kcG9pbnQsIFwiZW5kcG9pbnRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChzdWJzY3JpcHRpb25LZXksIFwic3Vic2NyaXB0aW9uS2V5XCIpO1xuICAgICAgICBjb25zdCByZXQgPSBuZXcgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsKCk7XG4gICAgICAgIHJldC5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQsIGVuZHBvaW50LmhyZWYpO1xuICAgICAgICByZXQucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uS2V5KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsXG4gKi9cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCBleHRlbmRzIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5vdXRwdXRGb3JtYXQgPSBPdXRwdXRGb3JtYXQuU2ltcGxlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICogSWYgdGhpcyBpcyBzZXQsIHN1YnNjcmlwdGlvbiBrZXkgaXMgaWdub3JlZC5cbiAgICAgKiBVc2VyIG5lZWRzIHRvIG1ha2Ugc3VyZSB0aGUgcHJvdmlkZWQgYXV0aG9yaXphdGlvbiB0b2tlbiBpcyB2YWxpZCBhbmQgbm90IGV4cGlyZWQuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgc3BlZWNoIHJlY29nbml0aW9uIGxhbmd1YWdlLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBhdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIHNldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUuc3Vic2NyaXB0aW9uS2V5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCBzdWJzY3JpcHRpb25LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXldKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb3V0cHV0IGZvcm1hdFxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5vdXRwdXRGb3JtYXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IG91dHB1dEZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIE91dHB1dEZvcm1hdFt0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgdW5kZWZpbmVkKV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgb3V0cHV0IGZvcm1hdFxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5vdXRwdXRGb3JtYXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2V0IG91dHB1dEZvcm1hdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0W3ZhbHVlXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZHBvaW50IGlkLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5lbmRwb2ludElkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCBlbmRwb2ludElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGVuZHBvaW50IGlkLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5lbmRwb2ludElkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNldCBlbmRwb2ludElkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSAodGV4dCkgdGFyZ2V0IGxhbmd1YWdlIHRvIHRyYW5zbGF0ZSBpbnRvLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5hZGRUYXJnZXRMYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgbGFuZ3VhZ2Ugc3VjaCBhcyBkZS1ERVxuICAgICAqL1xuICAgIGFkZFRhcmdldExhbmd1YWdlKHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VzID0gdGhpcy50YXJnZXRMYW5ndWFnZXM7XG4gICAgICAgIGxhbmd1YWdlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMsIGxhbmd1YWdlcy5qb2luKFwiLFwiKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlICh0ZXh0KSB0YXJnZXQgbGFuZ3VhZ2UgdG8gdHJhbnNsYXRlIGludG8uXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnRhcmdldExhbmd1YWdlc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgbGFuZ3VhZ2Ugc3VjaCBhcyBkZS1ERVxuICAgICAqL1xuICAgIGdldCB0YXJnZXRMYW5ndWFnZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcywgdW5kZWZpbmVkKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMpLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB2b2ljZSBuYW1lLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS52b2ljZU5hbWVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IHZvaWNlTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2VdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cy9TZXRzIHRoZSB2b2ljZSBvZiB0aGUgdHJhbnNsYXRlZCBsYW5ndWFnZSwgZW5hYmxlIHZvaWNlIHN5bnRoZXNpcyBvdXRwdXQuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnZvaWNlTmFtZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgbmFtZSBvZiB0aGUgdm9pY2UuXG4gICAgICovXG4gICAgc2V0IHZvaWNlTmFtZSh2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIHRoZSByZWdpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnJlZ2lvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcmVnaW9uLlxuICAgICAqL1xuICAgIGdldCByZWdpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uKTtcbiAgICB9XG4gICAgc2V0UHJveHkocHJveHlIb3N0TmFtZSwgcHJveHlQb3J0LCBwcm94eVVzZXJOYW1lLCBwcm94eVBhc3N3b3JkKSB7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5SG9zdE5hbWVdLCBwcm94eUhvc3ROYW1lKTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0XSwgcHJveHlQb3J0KTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlVc2VyTmFtZV0sIHByb3h5VXNlck5hbWUpO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBhc3N3b3JkXSwgcHJveHlQYXNzd29yZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gYXJiaXRyYXJ5IHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5nZXRQcm9wZXJ0eVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGVmIC0gVGhlIGRlZmF1bHQgdmFsdWUgb2YgdGhlIHByb3BlcnR5IGluIGNhc2UgaXQgaXMgbm90IHNldC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGdldFByb3BlcnR5KG5hbWUsIGRlZikge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShuYW1lLCBkZWYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgYW4gYXJiaXRyYXJ5IHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5zZXRQcm9wZXJ0eVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5LlxuICAgICAqL1xuICAgIHNldFByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBhY2Nlc3MgdG8gY3VzdG9tIHByb3BlcnRpZXMuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb3BlcnR5Q29sbGVjdGlvbn0gVGhlIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIG9mIGFzc29jaWF0ZWQgcmVzb3VyY2VzLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRTZXJ2aWNlUHJvcGVydHkobmFtZSwgdmFsdWUsIGNoYW5uZWwpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFByb3BlcnRpZXMgPSBKU09OLnBhcnNlKHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkoU2VydmljZVByb3BlcnRpZXNQcm9wZXJ0eU5hbWUsIFwie31cIikpO1xuICAgICAgICBjdXJyZW50UHJvcGVydGllc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lLCBKU09OLnN0cmluZ2lmeShjdXJyZW50UHJvcGVydGllcykpO1xuICAgIH1cbiAgICBzZXRQcm9mYW5pdHkocHJvZmFuaXR5KSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUHJvZmFuaXR5T3B0aW9uLCBQcm9mYW5pdHlPcHRpb25bcHJvZmFuaXR5XSk7XG4gICAgfVxuICAgIGVuYWJsZUF1ZGlvTG9nZ2luZygpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuYWJsZUF1ZGlvTG9nZ2luZywgXCJ0cnVlXCIpO1xuICAgIH1cbiAgICByZXF1ZXN0V29yZExldmVsVGltZXN0YW1wcygpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0V29yZExldmVsVGltZXN0YW1wcywgXCJ0cnVlXCIpO1xuICAgIH1cbiAgICBlbmFibGVEaWN0YXRpb24oKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoRm9yY2VEaWN0YXRpb25Qcm9wZXJ0eU5hbWUsIFwidHJ1ZVwiKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZSBwYXlsb2FkIG9mIHNwZWVjaCByZWNvZ25pdGlvbiBjYW5jZWxlZCByZXN1bHQgZXZlbnRzLlxuICogQGNsYXNzIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uaWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gY2FuY2VsbGF0aW9uUmVhc29uIC0gVGhlIGNhbmNlbGxhdGlvbiByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7VHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdH0gcmVzdWx0IC0gVGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzZXNzaW9uaWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUsIHJlc3VsdCkge1xuICAgICAgICB0aGlzLnByaXZDYW5jZWxSZWFzb24gPSBjYW5jZWxsYXRpb25SZWFzb247XG4gICAgICAgIHRoaXMucHJpdkVycm9yRGV0YWlscyA9IGVycm9yRGV0YWlscztcbiAgICAgICAgdGhpcy5wcml2UmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICB0aGlzLnByaXZTZXNzaW9uSWQgPSBzZXNzaW9uaWQ7XG4gICAgICAgIHRoaXMucHJpdkVycm9yQ29kZSA9IGVycm9yQ29kZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLnJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7VHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdH0gdGhlIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgcmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHNlc3Npb24gaWRlbnRpZmllci5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5wcm90b3R5cGUuc2Vzc2lvbklkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBzZXNzaW9uIGlkZW50aWZpZXIuXG4gICAgICovXG4gICAgZ2V0IHNlc3Npb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlc3Npb25JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJlYXNvbiB0aGUgcmVjb2duaXRpb24gd2FzIGNhbmNlbGVkLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5yZWFzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0NhbmNlbGxhdGlvblJlYXNvbn0gU3BlY2lmaWVzIHRoZSByZWFzb24gY2FuY2VsZWQuXG4gICAgICovXG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNhbmNlbFJlYXNvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGVycm9yIGNvZGUgaW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24uXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjEuMC5cbiAgICAgKiBAcmV0dXJuIEFuIGVycm9yIGNvZGUgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciByZWFzb24uXG4gICAgICovXG4gICAgZ2V0IGVycm9yQ29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yQ29kZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24sIHByb3ZpZGVzIGRldGFpbHMgb2YgdGhlIG9jY3VycmVkIGVycm9yLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5lcnJvckRldGFpbHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFJlY29nbml0aW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBUcmFuc2xhdGlvbiB0ZXh0IHJlc3VsdCBldmVudCBhcmd1bWVudHMuXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyBleHRlbmRzIFJlY29nbml0aW9uRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7VHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdH0gcmVzdWx0IC0gVGhlIHRyYW5zbGF0aW9uIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1RyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHR9IHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0IH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBUcmFuc2xhdGlvbiB0ZXh0IHJlc3VsdC5cbiAqIEBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0XG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtUcmFuc2xhdGlvbnN9IHRyYW5zbGF0aW9ucyAtIFRoZSB0cmFuc2xhdGlvbnMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlc3VsdElkIC0gVGhlIHJlc3VsdCBpZC5cbiAgICAgKiBAcGFyYW0ge1Jlc3VsdFJlYXNvbn0gcmVhc29uIC0gVGhlIHJlYXNvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSByZWNvZ25pemVkIHRleHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0IGludG8gdGhlIHN0cmVhbS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JEZXRhaWxzIC0gRXJyb3IgZGV0YWlscywgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGpzb24gLSBBZGRpdGlvbmFsIEpzb24sIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7UHJvcGVydHlDb2xsZWN0aW9ufSBwcm9wZXJ0aWVzIC0gQWRkaXRpb25hbCBwcm9wZXJ0aWVzLCBpZiBwcm92aWRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0cmFuc2xhdGlvbnMsIHJlc3VsdElkLCByZWFzb24sIHRleHQsIGR1cmF0aW9uLCBvZmZzZXQsIGVycm9yRGV0YWlscywganNvbiwgcHJvcGVydGllcykge1xuICAgICAgICBzdXBlcihyZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvbnMgPSB0cmFuc2xhdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXNlbnRzIHRoZSB0cmFuc2xhdGlvbiByZXN1bHRzLiBFYWNoIGl0ZW0gaW4gdGhlIGRpY3Rpb25hcnkgcmVwcmVzZW50c1xuICAgICAqIGEgdHJhbnNsYXRpb24gcmVzdWx0IGluIG9uZSBvZiB0YXJnZXQgbGFuZ3VhZ2VzLCB3aGVyZSB0aGUga2V5IGlzIHRoZSBuYW1lXG4gICAgICogb2YgdGhlIHRhcmdldCBsYW5ndWFnZSwgaW4gQkNQLTQ3IGZvcm1hdCwgYW5kIHRoZSB2YWx1ZSBpcyB0aGUgdHJhbnNsYXRpb25cbiAgICAgKiB0ZXh0IGluIHRoZSBzcGVjaWZpZWQgbGFuZ3VhZ2UuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS50cmFuc2xhdGlvbnNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1RyYW5zbGF0aW9uc30gdGhlIGN1cnJlbnQgdHJhbnNsYXRpb24gbWFwIHRoYXQgaG9sZHMgYWxsIHRyYW5zbGF0aW9ucyByZXF1ZXN0ZWQuXG4gICAgICovXG4gICAgZ2V0IHRyYW5zbGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9ucztcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFJlY29nbml0aW9uTW9kZSwgUmVjb2duaXplckNvbmZpZywgVHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeSwgVHJhbnNsYXRpb25TZXJ2aWNlUmVjb2duaXplciwgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQsIFJlY29nbml6ZXIsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBUcmFuc2xhdGlvbiByZWNvZ25pemVyXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pemVyXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml6ZXIgZXh0ZW5kcyBSZWNvZ25pemVyIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGUgVHJhbnNsYXRpb25SZWNvZ25pemVyLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoVHJhbnNsYXRpb25Db25maWd9IHNwZWVjaENvbmZpZyAtIFNldCBvZiBwcm9wZXJ0aWVzIHRvIGNvbmZpZ3VyZSB0aGlzIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9Db25maWcgLSBBbiBvcHRpb25hbCBhdWRpbyBjb25maWcgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNvZ25pemVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICBjb25zdCBjb25maWdJbXBsID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoY29uZmlnSW1wbCwgXCJzcGVlY2hDb25maWdcIik7XG4gICAgICAgIHN1cGVyKGF1ZGlvQ29uZmlnLCBjb25maWdJbXBsLnByb3BlcnRpZXMsIG5ldyBUcmFuc2xhdGlvbkNvbm5lY3Rpb25GYWN0b3J5KCkpO1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplciA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gY29uZmlnSW1wbC5wcm9wZXJ0aWVzLmNsb25lKCk7XG4gICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlLCB1bmRlZmluZWQpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlKSwgUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2VdKTtcbiAgICAgICAgfVxuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcyksIFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzXSk7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpLCBQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxhbmd1YWdlIG5hbWUgdGhhdCB3YXMgc2V0IHdoZW4gdGhlIHJlY29nbml6ZXIgd2FzIGNyZWF0ZWQuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gR2V0cyB0aGUgbGFuZ3VhZ2UgbmFtZSB0aGF0IHdhcyBzZXQgd2hlbiB0aGUgcmVjb2duaXplciB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRhcmdldCBsYW5ndWFnZXMgZm9yIHRyYW5zbGF0aW9uIHRoYXQgd2VyZSBzZXQgd2hlbiB0aGUgcmVjb2duaXplciB3YXMgY3JlYXRlZC5cbiAgICAgKiBUaGUgbGFuZ3VhZ2UgaXMgc3BlY2lmaWVkIGluIEJDUC00NyBmb3JtYXQuIFRoZSB0cmFuc2xhdGlvbiB3aWxsIHByb3ZpZGUgdHJhbnNsYXRlZCB0ZXh0IGZvciBlYWNoIG9mIGxhbmd1YWdlLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS50YXJnZXRMYW5ndWFnZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ1tdfSBHZXRzIHRhcmdldCBsYW5ndWFnZXMgZm9yIHRyYW5zbGF0aW9uIHRoYXQgd2VyZSBzZXQgd2hlbiB0aGUgcmVjb2duaXplciB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBnZXQgdGFyZ2V0TGFuZ3VhZ2VzKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMpLnNwbGl0KFwiLFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbmFtZSBvZiBvdXRwdXQgdm9pY2UuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnZvaWNlTmFtZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgbmFtZSBvZiBvdXRwdXQgdm9pY2UuXG4gICAgICovXG4gICAgZ2V0IHZvaWNlTmFtZSgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgZ2V0IGF1dGhvcml6YXRpb25Ub2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cy9TZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih2YWx1ZSkge1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBUcmFuc2xhdGlvblJlY29nbml6ZXIuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb3BlcnR5Q29sbGVjdGlvbn0gVGhlIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgVHJhbnNsYXRpb25SZWNvZ25pemVyLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHJlY29nbml0aW9uIGFuZCB0cmFuc2xhdGlvbiwgYW5kIHN0b3BzIGFmdGVyIHRoZSBmaXJzdCB1dHRlcmFuY2UgaXMgcmVjb2duaXplZC5cbiAgICAgKiBUaGUgdGFzayByZXR1cm5zIHRoZSB0cmFuc2xhdGlvbiB0ZXh0IGFzIHJlc3VsdC5cbiAgICAgKiBOb3RlOiByZWNvZ25pemVPbmNlQXN5bmMgcmV0dXJucyB3aGVuIHRoZSBmaXJzdCB1dHRlcmFuY2UgaGFzIGJlZW4gcmVjb2duaXplZCwgc28gaXQgaXMgc3VpdGFibGVvbmx5XG4gICAgICogICAgICAgZm9yIHNpbmdsZSBzaG90IHJlY29nbml0aW9uIGxpa2UgY29tbWFuZCBvciBxdWVyeS4gRm9yIGxvbmctcnVubmluZyByZWNvZ25pdGlvbixcbiAgICAgKiAgICAgICB1c2Ugc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpIGluc3RlYWQuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnJlY29nbml6ZU9uY2VBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayB0aGF0IHJlY2VpdmVkIHRoZSByZXN1bHQgd2hlbiB0aGUgdHJhbnNsYXRpb24gaGFzIGNvbXBsZXRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHJlY29nbml6ZU9uY2VBc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgICAgIHRoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RhcnQoUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgcmVjb2duaXRpb24gYW5kIHRyYW5zbGF0aW9uLCB1bnRpbCBzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoKSBpcyBjYWxsZWQuXG4gICAgICogVXNlciBtdXN0IHN1YnNjcmliZSB0byBldmVudHMgdG8gcmVjZWl2ZSB0cmFuc2xhdGlvbiByZXN1bHRzLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5zdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIHRoYXQgcmVjZWl2ZWQgdGhlIHRyYW5zbGF0aW9uIGhhcyBzdGFydGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgICAgIHRoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RhcnQoUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycihlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgZXJyKHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERlc3Ryb3kgdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgY29udGludW91cyByZWNvZ25pdGlvbiBhbmQgdHJhbnNsYXRpb24uXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayB0aGF0IHJlY2VpdmVkIHRoZSB0cmFuc2xhdGlvbiBoYXMgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgICAgIHRoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBjbG9zZXMgYWxsIGV4dGVybmFsIHJlc291cmNlcyBoZWxkIGJ5IGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgIH1cbiAgICBkaXNwb3NlKGRpc3Bvc2luZykge1xuICAgICAgICBpZiAodGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIgPSB0cnVlO1xuICAgICAgICAgICAgc3VwZXIuZGlzcG9zZShkaXNwb3NpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZVJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcsIHRoaXMucHJvcGVydGllcyk7XG4gICAgfVxuICAgIGNyZWF0ZVNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Db25maWcsIHJlY29nbml6ZXJDb25maWcpIHtcbiAgICAgICAgY29uc3QgY29uZmlnSW1wbCA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zbGF0aW9uU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBjb25maWdJbXBsLCByZWNvZ25pemVyQ29uZmlnLCB0aGlzKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uUmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgU2Vzc2lvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogVHJhbnNsYXRpb24gU3ludGhlc2lzIGV2ZW50IGFyZ3VtZW50c1xuICogQGNsYXNzIFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJncyBleHRlbmRzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdH0gcmVzdWx0IC0gVGhlIHRyYW5zbGF0aW9uIHN5bnRoZXNpcyByZXN1bHQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSB0cmFuc2xhdGlvbiBzeW50aGVzaXMgcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MucHJvdG90eXBlLnJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7VHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHR9IFNwZWNpZmllcyB0aGUgdHJhbnNsYXRpb24gc3ludGhlc2lzIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgcmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdWx0O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyB0cmFuc2xhdGlvbiBzeW50aGVzaXMgcmVzdWx0LCBpLmUuIHRoZSB2b2ljZSBvdXRwdXQgb2YgdGhlIHRyYW5zbGF0ZWRcbiAqIHRleHQgaW4gdGhlIHRhcmdldCBsYW5ndWFnZS5cbiAqIEBjbGFzcyBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdFxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtSZXN1bHRSZWFzb259IHJlYXNvbiAtIFRoZSBzeW50aGVzaXMgcmVhc29uLlxuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGF1ZGlvIC0gVGhlIGF1ZGlvIGRhdGEuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVhc29uLCBhdWRpbykge1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvID0gYXVkaW87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZWQgdGV4dCBpbiB0aGUgdGFyZ2V0IGxhbmd1YWdlLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQucHJvdG90eXBlLmF1ZGlvXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gVHJhbnNsYXRlZCBhdWRpbyBpbiB0aGUgdGFyZ2V0IGxhbmd1YWdlLlxuICAgICAqL1xuICAgIGdldCBhdWRpbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc3ludGhlc2lzIHN0YXR1cy5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0LnByb3RvdHlwZS5yZWFzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Jlc3VsdFJlYXNvbn0gVGhlIHN5bnRoZXNpcyBzdGF0dXMuXG4gICAgICovXG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYXNvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm9wZXJ0eUNvbGxlY3Rpb24gfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgY29sbGVjdGlvbiBvZiBwYXJhbWV0ZXJzIGFuZCB0aGVpciB2YWx1ZXMuXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9ucyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIFVzZSBhbiBQcm9wZXJ0eUNvbGxlY3Rpb24gaW50ZXJuYWxseSwganVzdCB3cmFwcGluZyBpdCB0byBoaWRlIHRoZSB8IGVudW0gc3ludGF4IGl0IGhhcy5cbiAgICAgICAgdGhpcy5wcml2TWFwID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwYXJhbWV0ZXIgdmFsdWUgaW4gdHlwZSBTdHJpbmcuIFRoZSBwYXJhbWV0ZXIgbXVzdCBoYXZlIHRoZSBzYW1lIHR5cGUgYXMgU3RyaW5nLlxuICAgICAqIEN1cnJlbnRseSBvbmx5IFN0cmluZywgaW50IGFuZCBib29sIGFyZSBhbGxvd2VkLlxuICAgICAqIElmIHRoZSBuYW1lIGlzIG5vdCBhdmFpbGFibGUsIHRoZSBzcGVjaWZpZWQgZGVmYXVsdFZhbHVlIGlzIHJldHVybmVkLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb24ucHJvdG90eXBlLmdldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIHBhcmFtZXRlciBuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZWYgLSBUaGUgZGVmYXVsdCB2YWx1ZSB3aGljaCBpcyByZXR1cm5lZCBpZiB0aGUgcGFyYW1ldGVyIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdmFsdWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXQoa2V5LCBkZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk1hcC5nZXRQcm9wZXJ0eShrZXksIGRlZik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIFN0cmluZyB2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyIHNwZWNpZmllZCBieSBuYW1lLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb24ucHJvdG90eXBlLnNldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIHBhcmFtZXRlciBuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSB2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIHNldChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdk1hcC5zZXRQcm9wZXJ0eShrZXksIHZhbHVlKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9ucy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcERlZmVyID0gKCkgPT4ge1xuXHRjb25zdCBkZWZlcnJlZCA9IHt9O1xuXG5cdGRlZmVycmVkLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0ZGVmZXJyZWQucmVzb2x2ZSA9IHJlc29sdmU7XG5cdFx0ZGVmZXJyZWQucmVqZWN0ID0gcmVqZWN0O1xuXHR9KTtcblxuXHRyZXR1cm4gZGVmZXJyZWQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBEZWZlcjtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbnZhciBydW50aW1lID0gKGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBPcCA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPcC5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLlxuICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yO1xuICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKHByb3RvR2VuZXJhdG9yLnByb3RvdHlwZSk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0cnlMb2NzTGlzdCB8fCBbXSk7XG5cbiAgICAvLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLlxuICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblxuICAgIHJldHVybiBnZW5lcmF0b3I7XG4gIH1cbiAgZXhwb3J0cy53cmFwID0gd3JhcDtcblxuICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb25cbiAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkXG4gIC8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZVxuICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWRcbiAgLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZ1xuICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZVxuICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGVcbiAgLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaFxuICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuXG4gIGZ1bmN0aW9uIHRyeUNhdGNoKGZuLCBvYmosIGFyZykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogZXJyIH07XG4gICAgfVxuICB9XG5cbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkID0gXCJzdXNwZW5kZWRZaWVsZFwiO1xuICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSBcImV4ZWN1dGluZ1wiO1xuICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xuXG4gIC8vIFJldHVybmluZyB0aGlzIG9iamVjdCBmcm9tIHRoZSBpbm5lckZuIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXNcbiAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LlxuICB2YXIgQ29udGludWVTZW50aW5lbCA9IHt9O1xuXG4gIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZFxuICAvLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0cy4gRm9yIGZ1bGwgc3BlYyBjb21wbGlhbmNlLCB5b3UgbWF5IHdpc2ggdG8gY29uZmlndXJlIHlvdXJcbiAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9XG5cbiAgLy8gVGhpcyBpcyBhIHBvbHlmaWxsIGZvciAlSXRlcmF0b3JQcm90b3R5cGUlIGZvciBlbnZpcm9ubWVudHMgdGhhdFxuICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LlxuICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcbiAgSXRlcmF0b3JQcm90b3R5cGVbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgdmFyIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG8gJiYgZ2V0UHJvdG8oZ2V0UHJvdG8odmFsdWVzKFtdKSkpO1xuICBpZiAoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiZcbiAgICAgIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPcCAmJlxuICAgICAgaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sKSkge1xuICAgIC8vIFRoaXMgZW52aXJvbm1lbnQgaGFzIGEgbmF0aXZlICVJdGVyYXRvclByb3RvdHlwZSU7IHVzZSBpdCBpbnN0ZWFkXG4gICAgLy8gb2YgdGhlIHBvbHlmaWxsLlxuICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU7XG4gIH1cblxuICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPVxuICAgIEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR3AuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvbjtcbiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGVbdG9TdHJpbmdUYWdTeW1ib2xdID1cbiAgICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IFwiR2VuZXJhdG9yRnVuY3Rpb25cIjtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBwcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09IFwiZnVuY3Rpb25cIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIGN0b3JcbiAgICAgID8gY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHxcbiAgICAgICAgLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhblxuICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuXG4gICAgICAgIChjdG9yLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZSkgPT09IFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICAgICAgOiBmYWxzZTtcbiAgfTtcblxuICBleHBvcnRzLm1hcmsgPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgICAgIGlmICghKHRvU3RyaW5nVGFnU3ltYm9sIGluIGdlbkZ1bikpIHtcbiAgICAgICAgZ2VuRnVuW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yRnVuY3Rpb25cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcbiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC5cbiAgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAvLyBJZiBhIHJlamVjdGVkIFByb21pc2Ugd2FzIHlpZWxkZWQsIHRocm93IHRoZSByZWplY3Rpb24gYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgaGFuZGxlZCB0aGVyZS5cbiAgICAgICAgICByZXR1cm4gaW52b2tlKFwidGhyb3dcIiwgZXJyb3IsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KVxuICAgICk7XG5cbiAgICByZXR1cm4gZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5tZXRob2QgPSBtZXRob2Q7XG4gICAgICBjb250ZXh0LmFyZyA9IGFyZztcblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG4gICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQgPT09IENvbnRpbnVlU2VudGluZWwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAvLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZztcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmFyZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29udGV4dC5hcmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZztcblxuICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cbiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uXG4gICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmVcbiAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcbiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsXG4gICAgICAgICAgICBkb25lOiBjb250ZXh0LmRvbmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZVxuICAgICAgICAgIC8vIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIENhbGwgZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdKGNvbnRleHQuYXJnKSBhbmQgaGFuZGxlIHRoZVxuICAvLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlXG4gIC8vIGRlbGVnYXRlIGl0ZXJhdG9yLCBvciBieSBtb2RpZnlpbmcgY29udGV4dC5tZXRob2QgYW5kIGNvbnRleHQuYXJnLFxuICAvLyBzZXR0aW5nIGNvbnRleHQuZGVsZWdhdGUgdG8gbnVsbCwgYW5kIHJldHVybmluZyB0aGUgQ29udGludWVTZW50aW5lbC5cbiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07XG4gICAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3dcbiAgICAgIC8vIG1ldGhvZCBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuXG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgLy8gTm90ZTogW1wicmV0dXJuXCJdIG11c3QgYmUgdXNlZCBmb3IgRVMzIHBhcnNpbmcgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgaWYgKGRlbGVnYXRlLml0ZXJhdG9yW1wicmV0dXJuXCJdKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYVxuICAgICAgICAgIC8vIGNoYW5jZSB0byBjbGVhbiB1cC5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG5cbiAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgLy8gSWYgbWF5YmVJbnZva2VEZWxlZ2F0ZShjb250ZXh0KSBjaGFuZ2VkIGNvbnRleHQubWV0aG9kIGZyb21cbiAgICAgICAgICAgIC8vIFwicmV0dXJuXCIgdG8gXCJ0aHJvd1wiLCBsZXQgdGhhdCBvdmVycmlkZSB0aGUgVHlwZUVycm9yIGJlbG93LlxuICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICBcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChtZXRob2QsIGRlbGVnYXRlLml0ZXJhdG9yLCBjb250ZXh0LmFyZyk7XG5cbiAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciBpbmZvID0gcmVjb3JkLmFyZztcblxuICAgIGlmICghIGluZm8pIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIik7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIGlmIChpbmZvLmRvbmUpIHtcbiAgICAgIC8vIEFzc2lnbiB0aGUgcmVzdWx0IG9mIHRoZSBmaW5pc2hlZCBkZWxlZ2F0ZSB0byB0aGUgdGVtcG9yYXJ5XG4gICAgICAvLyB2YXJpYWJsZSBzcGVjaWZpZWQgYnkgZGVsZWdhdGUucmVzdWx0TmFtZSAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWU7XG5cbiAgICAgIC8vIFJlc3VtZSBleGVjdXRpb24gYXQgdGhlIGRlc2lyZWQgbG9jYXRpb24gKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2M7XG5cbiAgICAgIC8vIElmIGNvbnRleHQubWV0aG9kIHdhcyBcInRocm93XCIgYnV0IHRoZSBkZWxlZ2F0ZSBoYW5kbGVkIHRoZVxuICAgICAgLy8gZXhjZXB0aW9uLCBsZXQgdGhlIG91dGVyIGdlbmVyYXRvciBwcm9jZWVkIG5vcm1hbGx5LiBJZlxuICAgICAgLy8gY29udGV4dC5tZXRob2Qgd2FzIFwibmV4dFwiLCBmb3JnZXQgY29udGV4dC5hcmcgc2luY2UgaXQgaGFzIGJlZW5cbiAgICAgIC8vIFwiY29uc3VtZWRcIiBieSB0aGUgZGVsZWdhdGUgaXRlcmF0b3IuIElmIGNvbnRleHQubWV0aG9kIHdhc1xuICAgICAgLy8gXCJyZXR1cm5cIiwgYWxsb3cgdGhlIG9yaWdpbmFsIC5yZXR1cm4gY2FsbCB0byBjb250aW51ZSBpbiB0aGVcbiAgICAgIC8vIG91dGVyIGdlbmVyYXRvci5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCAhPT0gXCJyZXR1cm5cIikge1xuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZS15aWVsZCB0aGUgcmVzdWx0IHJldHVybmVkIGJ5IHRoZSBkZWxlZ2F0ZSBtZXRob2QuXG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9XG5cbiAgICAvLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aFxuICAgIC8vIHRoZSBvdXRlciBnZW5lcmF0b3IuXG4gICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gIH1cblxuICAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZVxuICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCk7XG5cbiAgR3BbdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JcIjtcblxuICAvLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZVxuICAvLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZVxuICAvLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvclxuICAvLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuXG4gIEdwW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEdwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH07XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBleHBvcnRzLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuXG4gICAgICAgIGlmIChjYXVnaHQpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhISBjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlXG4gIC8vIG9yIG5vdCwgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCBzbyB0aGF0IHdlIGNhbiBkZWNsYXJlIHRoZSB2YXJpYWJsZVxuICAvLyByZWdlbmVyYXRvclJ1bnRpbWUgaW4gdGhlIG91dGVyIHNjb3BlLCB3aGljaCBhbGxvd3MgdGhpcyBtb2R1bGUgdG8gYmVcbiAgLy8gaW5qZWN0ZWQgZWFzaWx5IGJ5IGBiaW4vcmVnZW5lcmF0b3IgLS1pbmNsdWRlLXJ1bnRpbWUgc2NyaXB0LmpzYC5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oXG4gIC8vIElmIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZSwgdXNlIG1vZHVsZS5leHBvcnRzXG4gIC8vIGFzIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgbmFtZXNwYWNlLiBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVtcHR5XG4gIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgLy8gdGhlIHJlZ2VuZXJhdG9yUnVudGltZSB2YXJpYWJsZSBhdCB0aGUgdG9wIG9mIHRoaXMgZmlsZS5cbiAgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiA/IG1vZHVsZS5leHBvcnRzIDoge31cbikpO1xuXG50cnkge1xuICByZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xufSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHtcbiAgLy8gVGhpcyBtb2R1bGUgc2hvdWxkIG5vdCBiZSBydW5uaW5nIGluIHN0cmljdCBtb2RlLCBzbyB0aGUgYWJvdmVcbiAgLy8gYXNzaWdubWVudCBzaG91bGQgYWx3YXlzIHdvcmsgdW5sZXNzIHNvbWV0aGluZyBpcyBtaXNjb25maWd1cmVkLiBKdXN0XG4gIC8vIGluIGNhc2UgcnVudGltZS5qcyBhY2NpZGVudGFsbHkgcnVucyBpbiBzdHJpY3QgbW9kZSwgd2UgY2FuIGVzY2FwZVxuICAvLyBzdHJpY3QgbW9kZSB1c2luZyBhIGdsb2JhbCBGdW5jdGlvbiBjYWxsLiBUaGlzIGNvdWxkIGNvbmNlaXZhYmx5IGZhaWxcbiAgLy8gaWYgYSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBmb3JiaWRzIHVzaW5nIEZ1bmN0aW9uLCBidXQgaW4gdGhhdCBjYXNlXG4gIC8vIHRoZSBwcm9wZXIgc29sdXRpb24gaXMgdG8gZml4IHRoZSBhY2NpZGVudGFsIHN0cmljdCBtb2RlIHByb2JsZW0uIElmXG4gIC8vIHlvdSd2ZSBtaXNjb25maWd1cmVkIHlvdXIgYnVuZGxlciB0byBmb3JjZSBzdHJpY3QgbW9kZSBhbmQgYXBwbGllZCBhXG4gIC8vIENTUCB0byBmb3JiaWQgRnVuY3Rpb24sIGFuZCB5b3UncmUgbm90IHdpbGxpbmcgdG8gZml4IGVpdGhlciBvZiB0aG9zZVxuICAvLyBwcm9ibGVtcywgcGxlYXNlIGRldGFpbCB5b3VyIHVuaXF1ZSBwcmVkaWNhbWVudCBpbiBhIEdpdEh1YiBpc3N1ZS5cbiAgRnVuY3Rpb24oXCJyXCIsIFwicmVnZW5lcmF0b3JSdW50aW1lID0gclwiKShydW50aW1lKTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX21pY3Jvc29mdENvZ25pdGl2ZXNlcnZpY2VzU3BlZWNoID0gcmVxdWlyZShcIm1pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvbGliL21pY3Jvc29mdC5jb2duaXRpdmVzZXJ2aWNlcy5zcGVlY2guc2RrXCIpO1xuXG4vLyBXZSBhcmUgb25seSBpbXBvcnRpbmcgd2hhdCB3ZSBuZWVkLlxudmFyIF9kZWZhdWx0ID0ge1xuICBBdWRpb0NvbmZpZzogX21pY3Jvc29mdENvZ25pdGl2ZXNlcnZpY2VzU3BlZWNoLkF1ZGlvQ29uZmlnLFxuICBPdXRwdXRGb3JtYXQ6IF9taWNyb3NvZnRDb2duaXRpdmVzZXJ2aWNlc1NwZWVjaC5PdXRwdXRGb3JtYXQsXG4gIFJlc3VsdFJlYXNvbjogX21pY3Jvc29mdENvZ25pdGl2ZXNlcnZpY2VzU3BlZWNoLlJlc3VsdFJlYXNvbixcbiAgU3BlZWNoQ29uZmlnOiBfbWljcm9zb2Z0Q29nbml0aXZlc2VydmljZXNTcGVlY2guU3BlZWNoQ29uZmlnLFxuICBTcGVlY2hSZWNvZ25pemVyOiBfbWljcm9zb2Z0Q29nbml0aXZlc2VydmljZXNTcGVlY2guU3BlZWNoUmVjb2duaXplclxufTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoU0RLLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkXCIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiY3JlYXRlU3BlZWNoUmVjb2duaXRpb25Qb255ZmlsbEZyb21SZWNvZ25pemVyXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9jcmVhdGVTcGVlY2hSZWNvZ25pdGlvblBvbnlmaWxsLmNyZWF0ZVNwZWVjaFJlY29nbml0aW9uUG9ueWZpbGxGcm9tUmVjb2duaXplcjtcbiAgfVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfY3JlYXRlU3BlZWNoUmVjb2duaXRpb25Qb255ZmlsbCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCIuL1NwZWVjaFRvVGV4dC9jcmVhdGVTcGVlY2hSZWNvZ25pdGlvblBvbnlmaWxsXCIpKTtcblxudmFyIF9kZWZhdWx0ID0gX2NyZWF0ZVNwZWVjaFJlY29nbml0aW9uUG9ueWZpbGwuZGVmYXVsdDtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoVG9UZXh0LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdFwiKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrXCIpKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzXCIpKTtcblxuLyogZXNsaW50IGNsYXNzLW1ldGhvZHMtdXNlLXRoaXM6IFwib2ZmXCIgKi9cbnZhciBfZGVmYXVsdCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIF9kZWZhdWx0KCkge1xuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIF9kZWZhdWx0KTtcbiAgICB0aGlzLl9waHJhc2VzID0gW107XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShfZGVmYXVsdCwgW3tcbiAgICBrZXk6IFwiYWRkRnJvbVN0cmluZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRGcm9tU3RyaW5nKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdKU0dGIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicGhyYXNlc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3BocmFzZXM7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHRoaXMuX3BocmFzZXMgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLl9waHJhc2VzID0gW3ZhbHVlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBwcm92aWRlZCB2YWx1ZSBpcyBub3QgYW4gYXJyYXkgb3Igb2YgdHlwZSAnc3RyaW5nJ1wiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIF9kZWZhdWx0O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaEdyYW1tYXJMaXN0LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdFwiKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuXG52YXIgX2FycmF5VG9NYXAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi8uLi9VdGlsL2FycmF5VG9NYXBcIikpO1xuXG52YXIgX1NwZWVjaFNESyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL1NwZWVjaFNES1wiKSk7XG5cbnZhciBfU3BlZWNoU0RLJFJlc3VsdFJlYXMgPSBfU3BlZWNoU0RLLmRlZmF1bHQuUmVzdWx0UmVhc29uLFxuICAgIFJlY29nbml6aW5nU3BlZWNoID0gX1NwZWVjaFNESyRSZXN1bHRSZWFzLlJlY29nbml6aW5nU3BlZWNoLFxuICAgIFJlY29nbml6ZWRTcGVlY2ggPSBfU3BlZWNoU0RLJFJlc3VsdFJlYXMuUmVjb2duaXplZFNwZWVjaDtcblxuZnVuY3Rpb24gX2RlZmF1bHQocmVzdWx0KSB7XG4gIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fSxcbiAgICAgIF9yZWYkbWF4QWx0ZXJuYXRpdmVzID0gX3JlZi5tYXhBbHRlcm5hdGl2ZXMsXG4gICAgICBtYXhBbHRlcm5hdGl2ZXMgPSBfcmVmJG1heEFsdGVybmF0aXZlcyA9PT0gdm9pZCAwID8gSW5maW5pdHkgOiBfcmVmJG1heEFsdGVybmF0aXZlcyxcbiAgICAgIF9yZWYkdGV4dE5vcm1hbGl6YXRpbyA9IF9yZWYudGV4dE5vcm1hbGl6YXRpb24sXG4gICAgICB0ZXh0Tm9ybWFsaXphdGlvbiA9IF9yZWYkdGV4dE5vcm1hbGl6YXRpbyA9PT0gdm9pZCAwID8gJ2Rpc3BsYXknIDogX3JlZiR0ZXh0Tm9ybWFsaXphdGlvO1xuXG4gIGlmIChyZXN1bHQucmVhc29uID09PSBSZWNvZ25pemluZ1NwZWVjaCB8fCByZXN1bHQucmVhc29uID09PSBSZWNvZ25pemVkU3BlZWNoICYmICFyZXN1bHQuanNvbi5OQmVzdCkge1xuICAgIHZhciByZXN1bHRMaXN0ID0gW3tcbiAgICAgIGNvbmZpZGVuY2U6IC41LFxuICAgICAgdHJhbnNjcmlwdDogcmVzdWx0LnRleHRcbiAgICB9XTtcblxuICAgIGlmIChyZXN1bHQucmVhc29uID09PSBSZWNvZ25pemVkU3BlZWNoKSB7XG4gICAgICByZXN1bHRMaXN0LmlzRmluYWwgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRMaXN0O1xuICB9IGVsc2UgaWYgKHJlc3VsdC5yZWFzb24gPT09IFJlY29nbml6ZWRTcGVlY2gpIHtcbiAgICB2YXIgX3Jlc3VsdExpc3QgPSAoMCwgX2FycmF5VG9NYXAuZGVmYXVsdCkoKHJlc3VsdC5qc29uLk5CZXN0IHx8IFtdKS5zbGljZSgwLCBtYXhBbHRlcm5hdGl2ZXMpLm1hcChmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgIHZhciBjb25maWRlbmNlID0gX3JlZjIuQ29uZmlkZW5jZSxcbiAgICAgICAgICBkaXNwbGF5ID0gX3JlZjIuRGlzcGxheSxcbiAgICAgICAgICBpdG4gPSBfcmVmMi5JVE4sXG4gICAgICAgICAgbGV4aWNhbCA9IF9yZWYyLkxleGljYWwsXG4gICAgICAgICAgbWFza2VkSVROID0gX3JlZjIuTWFza2VkSVROO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29uZmlkZW5jZTogY29uZmlkZW5jZSxcbiAgICAgICAgdHJhbnNjcmlwdDogdGV4dE5vcm1hbGl6YXRpb24gPT09ICdpdG4nID8gaXRuIDogdGV4dE5vcm1hbGl6YXRpb24gPT09ICdsZXhpY2FsJyA/IGxleGljYWwgOiB0ZXh0Tm9ybWFsaXphdGlvbiA9PT0gJ21hc2tlZGl0bicgPyBtYXNrZWRJVE4gOiBkaXNwbGF5XG4gICAgICB9O1xuICAgIH0pLCB7XG4gICAgICBpc0ZpbmFsOiB0cnVlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3Jlc3VsdExpc3Q7XG4gIH1cblxuICByZXR1cm4gW107XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2duaXRpdmVTZXJ2aWNlRXZlbnRSZXN1bHRUb1dlYlNwZWVjaFJlY29nbml0aW9uUmVzdWx0TGlzdC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHRcIik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmNyZWF0ZVNwZWVjaFJlY29nbml0aW9uUG9ueWZpbGxGcm9tUmVjb2duaXplciA9IGNyZWF0ZVNwZWVjaFJlY29nbml0aW9uUG9ueWZpbGxGcm9tUmVjb2duaXplcjtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9yZWdlbmVyYXRvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yXCIpKTtcblxudmFyIF90b0NvbnN1bWFibGVBcnJheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5XCIpKTtcblxudmFyIF9hc3luY1RvR2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvclwiKSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzc1wiKSk7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm5cIikpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0UHJvdG90eXBlT2ZcIikpO1xuXG52YXIgX2luaGVyaXRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHNcIikpO1xuXG52YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHlcIikpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIikpO1xuXG52YXIgX2V2ZW50VGFyZ2V0U2hpbSA9IHJlcXVpcmUoXCIuLi8uLi9leHRlcm5hbC9ldmVudC10YXJnZXQtc2hpbVwiKTtcblxudmFyIF9jb2duaXRpdmVTZXJ2aWNlRXZlbnRSZXN1bHRUb1dlYlNwZWVjaFJlY29nbml0aW9uUmVzdWx0TGlzdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vY29nbml0aXZlU2VydmljZUV2ZW50UmVzdWx0VG9XZWJTcGVlY2hSZWNvZ25pdGlvblJlc3VsdExpc3RcIikpO1xuXG52YXIgX2NyZWF0ZVByb21pc2VRdWV1ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uLy4uL1V0aWwvY3JlYXRlUHJvbWlzZVF1ZXVlXCIpKTtcblxudmFyIF9wYXRjaE9wdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vcGF0Y2hPcHRpb25zXCIpKTtcblxudmFyIF9TcGVlY2hHcmFtbWFyTGlzdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vU3BlZWNoR3JhbW1hckxpc3RcIikpO1xuXG52YXIgX1NwZWVjaFNESyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL1NwZWVjaFNES1wiKSk7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuLy8gaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vZW4tdXMvamF2YXNjcmlwdC9hcGkvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvc3BlZWNoY29uZmlnP3ZpZXc9YXp1cmUtbm9kZS1sYXRlc3Qjb3V0cHV0Zm9ybWF0XG4vLyB7XG4vLyAgIFwiUmVjb2duaXRpb25TdGF0dXNcIjogXCJTdWNjZXNzXCIsXG4vLyAgIFwiT2Zmc2V0XCI6IDkwMDAwMCxcbi8vICAgXCJEdXJhdGlvblwiOiA0OTAwMDAwMCxcbi8vICAgXCJOQmVzdFwiOiBbXG4vLyAgICAge1xuLy8gICAgICAgXCJDb25maWRlbmNlXCI6IDAuNzM4OTE5LFxuLy8gICAgICAgXCJMZXhpY2FsXCI6IFwic2Vjb25kXCIsXG4vLyAgICAgICBcIklUTlwiOiBcInNlY29uZFwiLFxuLy8gICAgICAgXCJNYXNrZWRJVE5cIjogXCJzZWNvbmRcIixcbi8vICAgICAgIFwiRGlzcGxheVwiOiBcIlNlY29uZC5cIlxuLy8gICAgIH1cbi8vICAgXVxuLy8gfVxuLy8ge1xuLy8gICBcIlJlY29nbml0aW9uU3RhdHVzXCI6IFwiSW5pdGlhbFNpbGVuY2VUaW1lb3V0XCIsXG4vLyAgIFwiT2Zmc2V0XCI6IDUwMDAwMDAwLFxuLy8gICBcIkR1cmF0aW9uXCI6IDBcbi8vIH1cbnZhciBBdWRpb0NvbmZpZyA9IF9TcGVlY2hTREsuZGVmYXVsdC5BdWRpb0NvbmZpZyxcbiAgICBPdXRwdXRGb3JtYXQgPSBfU3BlZWNoU0RLLmRlZmF1bHQuT3V0cHV0Rm9ybWF0LFxuICAgIFJlc3VsdFJlYXNvbiA9IF9TcGVlY2hTREsuZGVmYXVsdC5SZXN1bHRSZWFzb24sXG4gICAgU3BlZWNoQ29uZmlnID0gX1NwZWVjaFNESy5kZWZhdWx0LlNwZWVjaENvbmZpZyxcbiAgICBTcGVlY2hSZWNvZ25pemVyID0gX1NwZWVjaFNESy5kZWZhdWx0LlNwZWVjaFJlY29nbml6ZXI7XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZVJlY29nbml0aW9uUmVzdWx0KF9yZWYpIHtcbiAgdmFyIGR1cmF0aW9uID0gX3JlZi5kdXJhdGlvbixcbiAgICAgIGVycm9yRGV0YWlscyA9IF9yZWYuZXJyb3JEZXRhaWxzLFxuICAgICAganNvbiA9IF9yZWYuanNvbixcbiAgICAgIG9mZnNldCA9IF9yZWYub2Zmc2V0LFxuICAgICAgcHJvcGVydGllcyA9IF9yZWYucHJvcGVydGllcyxcbiAgICAgIHJlYXNvbiA9IF9yZWYucmVhc29uLFxuICAgICAgcmVzdWx0SWQgPSBfcmVmLnJlc3VsdElkLFxuICAgICAgdGV4dCA9IF9yZWYudGV4dDtcbiAgcmV0dXJuIHtcbiAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgZXJyb3JEZXRhaWxzOiBlcnJvckRldGFpbHMsXG4gICAganNvbjogSlNPTi5wYXJzZShqc29uKSxcbiAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuICAgIHJlYXNvbjogcmVhc29uLFxuICAgIHJlc3VsdElkOiByZXN1bHRJZCxcbiAgICB0ZXh0OiB0ZXh0XG4gIH07XG59XG5cbmZ1bmN0aW9uIGltcHJvdmlzZUFzeW5jKGZuLCBpbXByb3Zpc2VyKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIGltcHJvdmlzZXIocmVzdWx0KTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXZlcmFnZUFtcGxpdHVkZShhcnJheUJ1ZmZlcikge1xuICB2YXIgYXJyYXkgPSBuZXcgSW50MTZBcnJheShhcnJheUJ1ZmZlcik7XG4gIHJldHVybiBbXS5yZWR1Y2UuY2FsbChhcnJheSwgZnVuY3Rpb24gKGF2ZXJhZ2VBbXBsaXR1ZGUsIGFtcGxpdHVkZSkge1xuICAgIHJldHVybiBhdmVyYWdlQW1wbGl0dWRlICsgTWF0aC5hYnMoYW1wbGl0dWRlKTtcbiAgfSwgMCkgLyBhcnJheS5sZW5ndGg7XG59XG5cbmZ1bmN0aW9uIGNvZ25pdGl2ZVNlcnZpY2VzQXN5bmNUb1Byb21pc2UoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh2b2lkIDAsIGFyZ3MuY29uY2F0KFtyZXNvbHZlLCByZWplY3RdKSk7XG4gICAgfSk7XG4gIH07XG59XG5cbnZhciBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50ID0gZnVuY3Rpb24gU3BlZWNoUmVjb2duaXRpb25FdmVudCh0eXBlKSB7XG4gIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge30sXG4gICAgICBkYXRhID0gX3JlZjIuZGF0YSxcbiAgICAgIGVtbWEgPSBfcmVmMi5lbW1hLFxuICAgICAgaW50ZXJwcmV0YXRpb24gPSBfcmVmMi5pbnRlcnByZXRhdGlvbixcbiAgICAgIHJlc3VsdEluZGV4ID0gX3JlZjIucmVzdWx0SW5kZXgsXG4gICAgICByZXN1bHRzID0gX3JlZjIucmVzdWx0cztcblxuICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50KTtcbiAgdGhpcy5kYXRhID0gZGF0YTtcbiAgdGhpcy5lbW1hID0gZW1tYTtcbiAgdGhpcy5pbnRlcnByZXRhdGlvbiA9IGludGVycHJldGF0aW9uO1xuICB0aGlzLnJlc3VsdEluZGV4ID0gcmVzdWx0SW5kZXg7XG4gIHRoaXMucmVzdWx0cyA9IHJlc3VsdHM7XG4gIHRoaXMudHlwZSA9IHR5cGU7XG59O1xuXG5mdW5jdGlvbiBwcmVwYXJlQXVkaW9Db25maWcoYXVkaW9Db25maWcpIHtcbiAgdmFyIG9yaWdpbmFsQXR0YWNoID0gYXVkaW9Db25maWcuYXR0YWNoO1xuICB2YXIgZmlyc3RDaHVuaztcbiAgdmFyIG11dGVkOyAvLyBXZSBtb2RpZnkgXCJhdHRhY2hcIiBmdW5jdGlvbiBhbmQgZGV0ZWN0IHdoZW4gYXVkaWJsZSBjaHVuayBpcyByZWFkLlxuICAvLyBXZSB3aWxsIG9ubHkgbW9kaWZ5IFwiYXR0YWNoXCIgZnVuY3Rpb24gb25jZS5cblxuICBhdWRpb0NvbmZpZy5hdHRhY2ggPSBpbXByb3Zpc2VBc3luYyhvcmlnaW5hbEF0dGFjaC5iaW5kKGF1ZGlvQ29uZmlnKSwgZnVuY3Rpb24gKHJlYWRlcikge1xuICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCByZWFkZXIsIHtcbiAgICAgIHJlYWQ6IGltcHJvdmlzZUFzeW5jKHJlYWRlci5yZWFkLmJpbmQocmVhZGVyKSwgZnVuY3Rpb24gKGNodW5rKSB7XG4gICAgICAgIC8vIFRoZSBtYWdpYyBudW1iZXIgMTUwIGlzIG1lYXN1cmVkIGJ5OlxuICAgICAgICAvLyAxLiBTZXQgbWljcm9waG9uZSB2b2x1bWUgdG8gMFxuICAgICAgICAvLyAyLiBPYnNlcnZlIHRoZSBhbXBsaXR1ZGUgKDEwMC0xMTApIGZvciB0aGUgZmlyc3QgZmV3IGNodW5rc1xuICAgICAgICAvLyAgICAoVGhlcmUgaXMgYSBzaG9ydCBzdGF0aWMgY2F1Z2h0IHdoZW4gdHVybmluZyBvbiB0aGUgbWljcm9waG9uZSlcbiAgICAgICAgLy8gMy4gU2V0IHRoZSBudW1iZXIgYSBiaXQgaGlnaGVyIHRoYW4gdGhlIG9ic2VydmF0aW9uXG4gICAgICAgIGlmICghZmlyc3RDaHVuayAmJiBhdmVyYWdlQW1wbGl0dWRlKGNodW5rLmJ1ZmZlcikgPiAxNTApIHtcbiAgICAgICAgICBhdWRpb0NvbmZpZy5ldmVudHMub25FdmVudCh7XG4gICAgICAgICAgICBuYW1lOiAnRmlyc3RBdWRpYmxlQ2h1bmsnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZmlyc3RDaHVuayA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobXV0ZWQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYnVmZmVyOiBuZXcgQXJyYXlCdWZmZXIoMCksXG4gICAgICAgICAgICBpc0VuZDogdHJ1ZSxcbiAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogRGF0ZS5ub3coKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2h1bms7XG4gICAgICB9KVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBhdWRpb0NvbmZpZzogYXVkaW9Db25maWcsXG4gICAgcGF1c2U6IGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgICAgbXV0ZWQgPSB0cnVlO1xuICAgIH0sXG4gICAgdW5wcmVwYXJlOiBmdW5jdGlvbiB1bnByZXBhcmUoKSB7XG4gICAgICBhdWRpb0NvbmZpZy5hdHRhY2ggPSBvcmlnaW5hbEF0dGFjaDtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNwZWVjaFJlY29nbml0aW9uUG9ueWZpbGxGcm9tUmVjb2duaXplcihfcmVmMykge1xuICB2YXIgY3JlYXRlUmVjb2duaXplciA9IF9yZWYzLmNyZWF0ZVJlY29nbml6ZXIsXG4gICAgICBlbmFibGVUZWxlbWV0cnkgPSBfcmVmMy5lbmFibGVUZWxlbWV0cnksXG4gICAgICBsb29zZUV2ZW50cyA9IF9yZWYzLmxvb3NlRXZlbnRzLFxuICAgICAgcmVmZXJlbmNlR3JhbW1hcnMgPSBfcmVmMy5yZWZlcmVuY2VHcmFtbWFycyxcbiAgICAgIHRleHROb3JtYWxpemF0aW9uID0gX3JlZjMudGV4dE5vcm1hbGl6YXRpb247XG4gIC8vIElmIGVuYWJsZVRlbGVtZXRyeSBpcyBzZXQgdG8gbnVsbCBvciBub24tYm9vbGVhbiwgd2Ugd2lsbCBkZWZhdWx0IHRvIHRydWUuXG4gIFNwZWVjaFJlY29nbml6ZXIuZW5hYmxlVGVsZW1ldHJ5KGVuYWJsZVRlbGVtZXRyeSAhPT0gZmFsc2UpO1xuXG4gIHZhciBTcGVlY2hSZWNvZ25pdGlvbiA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9FdmVudFRhcmdldCkge1xuICAgICgwLCBfaW5oZXJpdHMyLmRlZmF1bHQpKFNwZWVjaFJlY29nbml0aW9uLCBfRXZlbnRUYXJnZXQpO1xuXG4gICAgZnVuY3Rpb24gU3BlZWNoUmVjb2duaXRpb24oKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIFNwZWVjaFJlY29nbml0aW9uKTtcbiAgICAgIF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMi5kZWZhdWx0KSh0aGlzLCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShTcGVlY2hSZWNvZ25pdGlvbikuY2FsbCh0aGlzKSk7XG4gICAgICBfdGhpcy5fY29udGludW91cyA9IGZhbHNlO1xuICAgICAgX3RoaXMuX2ludGVyaW1SZXN1bHRzID0gZmFsc2U7XG4gICAgICBfdGhpcy5fbGFuZyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2xhbmcnKSB8fCB3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlIDogJ2VuLVVTJztcbiAgICAgIF90aGlzLl9ncmFtbWFycyA9IG5ldyBfU3BlZWNoR3JhbW1hckxpc3QuZGVmYXVsdCgpO1xuICAgICAgX3RoaXMuX21heEFsdGVybmF0aXZlcyA9IDE7XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgKDAsIF9jcmVhdGVDbGFzczIuZGVmYXVsdCkoU3BlZWNoUmVjb2duaXRpb24sIFt7XG4gICAgICBrZXk6IFwiZW1pdENvZ25pdGl2ZVNlcnZpY2VzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdENvZ25pdGl2ZVNlcnZpY2VzKHR5cGUsIGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudCgnY29nbml0aXZlc2VydmljZXMnLCB7XG4gICAgICAgICAgZGF0YTogX29iamVjdFNwcmVhZCh7fSwgZXZlbnQsIHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgICB9KVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInN0YXJ0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX3N0YXJ0T25jZSgpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBfdGhpczIuZGlzcGF0Y2hFdmVudChuZXcgRXJyb3JFdmVudCgnZXJyb3InLCB7XG4gICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyICYmIGVyci5tZXNzYWdlXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3N0YXJ0T25jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9zdGFydE9uY2UyID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KShcbiAgICAgICAgLyojX19QVVJFX18qL1xuICAgICAgICBfcmVnZW5lcmF0b3IuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICB2YXIgcmVjb2duaXplciwgX3ByZXBhcmVBdWRpb0NvbmZpZywgcGF1c2UsIHVucHJlcGFyZSwgcXVldWUsIHNvdW5kU3RhcnRlZCwgc3BlZWNoU3RhcnRlZCwgc3RvcHBpbmcsIF9yZWNvZ25pemVyJGF1ZGlvQ29uZiwgZGV0YWNoQXVkaW9Db25maWdFdmVudCwgcGhyYXNlcywgZHluYW1pY0dyYW1tYXIsIGF1ZGlvU3RhcnRlZCwgZmluYWxFdmVudCwgZmluYWxpemVkUmVzdWx0cywgX2xvb3AsIGxvb3AsIF9yZXQ7XG5cbiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dDIpIHtcbiAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVSZWNvZ25pemVyKHRoaXMubGFuZyk7XG5cbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICByZWNvZ25pemVyID0gX2NvbnRleHQyLnNlbnQ7XG4gICAgICAgICAgICAgICAgICBfcHJlcGFyZUF1ZGlvQ29uZmlnID0gcHJlcGFyZUF1ZGlvQ29uZmlnKHJlY29nbml6ZXIuYXVkaW9Db25maWcpLCBwYXVzZSA9IF9wcmVwYXJlQXVkaW9Db25maWcucGF1c2UsIHVucHJlcGFyZSA9IF9wcmVwYXJlQXVkaW9Db25maWcudW5wcmVwYXJlO1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA0O1xuICAgICAgICAgICAgICAgICAgcXVldWUgPSAoMCwgX2NyZWF0ZVByb21pc2VRdWV1ZS5kZWZhdWx0KSgpO1xuICAgICAgICAgICAgICAgICAgX3JlY29nbml6ZXIkYXVkaW9Db25mID0gcmVjb2duaXplci5hdWRpb0NvbmZpZy5ldmVudHMuYXR0YWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGV2ZW50Lm5hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdBdWRpb1NvdXJjZVJlYWR5RXZlbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb1NvdXJjZVJlYWR5OiB7fVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdBdWRpb1NvdXJjZU9mZkV2ZW50Jykge1xuICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9Tb3VyY2VPZmY6IHt9XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ0ZpcnN0QXVkaWJsZUNodW5rJykge1xuICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RBdWRpYmxlQ2h1bms6IHt9XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pLCBkZXRhY2hBdWRpb0NvbmZpZ0V2ZW50ID0gX3JlY29nbml6ZXIkYXVkaW9Db25mLmRldGFjaDtcblxuICAgICAgICAgICAgICAgICAgcmVjb2duaXplci5jYW5jZWxlZCA9IGZ1bmN0aW9uIChfLCBfcmVmNCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JEZXRhaWxzID0gX3JlZjQuZXJyb3JEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gX3JlZjQub2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uID0gX3JlZjQucmVhc29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkID0gX3JlZjQuc2Vzc2lvbklkO1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JEZXRhaWxzOiBlcnJvckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogcmVhc29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWRcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgcmVjb2duaXplci5yZWNvZ25pemVkID0gZnVuY3Rpb24gKF8sIF9yZWY1KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBfcmVmNS5vZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfcmVmNS5yZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSWQgPSBfcmVmNS5zZXNzaW9uSWQ7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIHJlY29nbml6ZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBzZXJpYWxpemVSZWNvZ25pdGlvblJlc3VsdChyZXN1bHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWRcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgcmVjb2duaXplci5yZWNvZ25pemluZyA9IGZ1bmN0aW9uIChfLCBfcmVmNikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gX3JlZjYub2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX3JlZjYucmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkID0gX3JlZjYuc2Vzc2lvbklkO1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICByZWNvZ25pemluZzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBvZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHNlcmlhbGl6ZVJlY29nbml0aW9uUmVzdWx0KHJlc3VsdCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25JZFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICByZWNvZ25pemVyLnNlc3Npb25TdGFydGVkID0gZnVuY3Rpb24gKF8sIF9yZWY3KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXNzaW9uSWQgPSBfcmVmNy5zZXNzaW9uSWQ7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdGFydGVkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25JZFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICByZWNvZ25pemVyLnNlc3Npb25TdG9wcGVkID0gZnVuY3Rpb24gKF8sIF9yZWY4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXNzaW9uSWQgPSBfcmVmOC5zZXNzaW9uSWQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIFwic2Vzc2lvblN0b3BwZWRcIiBpcyBuZXZlciBmaXJlZCwgcHJvYmFibHkgYmVjYXVzZSB3ZSBhcmUgdXNpbmcgc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyBpbnN0ZWFkIG9mIHJlY29nbml6ZU9uY2VBc3luYy5cbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3BwZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgIHJlY29nbml6ZXIuc3BlZWNoU3RhcnREZXRlY3RlZCA9IGZ1bmN0aW9uIChfLCBfcmVmOSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gX3JlZjkub2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkID0gX3JlZjkuc2Vzc2lvbklkO1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBzcGVlY2hTdGFydERldGVjdGVkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgIHJlY29nbml6ZXIuc3BlZWNoRW5kRGV0ZWN0ZWQgPSBmdW5jdGlvbiAoXywgX3JlZjEwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXNzaW9uSWQgPSBfcmVmMTAuc2Vzc2lvbklkO1xuICAgICAgICAgICAgICAgICAgICAvLyBcInNwZWVjaEVuZERldGVjdGVkXCIgaXMgbmV2ZXIgZmlyZWQsIHByb2JhYmx5IGJlY2F1c2Ugd2UgYXJlIHVzaW5nIHN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMgaW5zdGVhZCBvZiByZWNvZ25pemVPbmNlQXN5bmMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZTogXCJzcGVlY2hFbmREZXRlY3RlZFwiIGlzIGZpcmVkIGZvciBETFNwZWVjaC5saXN0ZW5PbmNlQXN5bmMoKVxuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBzcGVlY2hFbmREZXRlY3RlZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWRcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgcGhyYXNlcyA9IHRoaXMuZ3JhbW1hcnMucGhyYXNlczsgLy8gSEFDSzogV2UgYXJlIHVzaW5nIHRoZSBpbnRlcm5hbCBvZiBTcGVlY2hSZWNvZ25pemVyIGJlY2F1c2UgdGhleSBkaWQgbm90IGV4cG9zZSBpdFxuXG4gICAgICAgICAgICAgICAgICBkeW5hbWljR3JhbW1hciA9IHJlY29nbml6ZXIucHJpdlJlY28uZHluYW1pY0dyYW1tYXI7XG4gICAgICAgICAgICAgICAgICByZWZlcmVuY2VHcmFtbWFycyAmJiByZWZlcmVuY2VHcmFtbWFycy5sZW5ndGggJiYgZHluYW1pY0dyYW1tYXIuYWRkUmVmZXJlbmNlR3JhbW1hcihyZWZlcmVuY2VHcmFtbWFycyk7XG4gICAgICAgICAgICAgICAgICBwaHJhc2VzICYmIHBocmFzZXMubGVuZ3RoICYmIGR5bmFtaWNHcmFtbWFyLmFkZFBocmFzZShwaHJhc2VzKTtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjA7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gY29nbml0aXZlU2VydmljZXNBc3luY1RvUHJvbWlzZShyZWNvZ25pemVyLnN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMuYmluZChyZWNvZ25pemVyKSkoKTtcblxuICAgICAgICAgICAgICAgIGNhc2UgMjA6XG4gICAgICAgICAgICAgICAgICBpZiAocmVjb2duaXplci5zdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhYm9ydDoge31cbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXVlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcDoge31cbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWJvcnQgPSB0aGlzLnN0b3AgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGZpbmFsaXplZFJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgIF9sb29wID1cbiAgICAgICAgICAgICAgICAgIC8qI19fUFVSRV9fKi9cbiAgICAgICAgICAgICAgICAgIF9yZWdlbmVyYXRvci5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2xvb3AobG9vcCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnQsIGFib3J0LCBhdWRpb1NvdXJjZU9mZiwgYXVkaW9Tb3VyY2VSZWFkeSwgY2FuY2VsZWQsIGZpcnN0QXVkaWJsZUNodW5rLCByZWNvZ25pemVkLCByZWNvZ25pemluZywgc3RvcCwgZXJyb3JNZXNzYWdlLCByZXN1bHQsIHJlY29nbml6YWJsZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvci5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2xvb3AkKF9jb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxdWV1ZS5zaGlmdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IF9jb250ZXh0LnNlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQgPSBldmVudC5hYm9ydCwgYXVkaW9Tb3VyY2VPZmYgPSBldmVudC5hdWRpb1NvdXJjZU9mZiwgYXVkaW9Tb3VyY2VSZWFkeSA9IGV2ZW50LmF1ZGlvU291cmNlUmVhZHksIGNhbmNlbGVkID0gZXZlbnQuY2FuY2VsZWQsIGZpcnN0QXVkaWJsZUNodW5rID0gZXZlbnQuZmlyc3RBdWRpYmxlQ2h1bmssIHJlY29nbml6ZWQgPSBldmVudC5yZWNvZ25pemVkLCByZWNvZ25pemluZyA9IGV2ZW50LnJlY29nbml6aW5nLCBzdG9wID0gZXZlbnQuc3RvcDsgLy8gV2UgYXJlIGVtaXR0aW5nIGV2ZW50IFwiY29nbml0aXZlc2VydmljZXNcIiBmb3IgZGVidWdnaW5nIHB1cnBvc2UuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhldmVudCkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5lbWl0Q29nbml0aXZlU2VydmljZXMobmFtZSwgZXZlbnRbbmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGNhbmNlbGVkICYmIGNhbmNlbGVkLmVycm9yRGV0YWlscztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghL1Blcm1pc3Npb25bXFx0LVxcciBcXHhBMFxcdTE2ODBcXHUyMDAwLVxcdTIwMEFcXHUyMDI4XFx1MjAyOVxcdTIwMkZcXHUyMDVGXFx1MzAwMFxcdUZFRkZdZGVuaWVkLy50ZXN0KGVycm9yTWVzc2FnZSB8fCAnJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgbWljcm9waG9uZSBpcyBub3QgYWxsb3dlZCwgd2Ugc2hvdWxkIG5vdCBlbWl0IFwic3RhcnRcIiBldmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdub3QtYWxsb3dlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIFwiYnJlYWtcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbG9vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmRpc3BhdGNoRXZlbnQobmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnQoJ3N0YXJ0JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoLzEwMDYvLnRlc3QoZXJyb3JNZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmRpc3BhdGNoRXZlbnQobmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnQoJ2F1ZGlvc3RhcnQnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmRpc3BhdGNoRXZlbnQobmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnQoJ2F1ZGlvZW5kJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ25ldHdvcmsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ3Vua25vd24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgXCJicmVha1wiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGFib3J0IHx8IHN0b3ApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAnYWJvcnRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC8vIElmIHdlIGFyZSBhYm9ydGluZywgd2Ugd2lsbCBpZ25vcmUgbGluZ2VyaW5nIHJlY29nbml6aW5nL3JlY29nbml6ZWQgZXZlbnRzLiBCdXQgaWYgd2UgYXJlIHN0b3BwaW5nLCB3ZSBuZWVkIHRoZW0uXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BwaW5nID0gJ2Fib3J0JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB3ZSBwYXVzZSwgd2Ugd2lsbCBzZW5kIHsgaXNFbmQ6IHRydWUgfSwgU3BlZWNoIFNlcnZpY2VzIHdpbGwgc2VuZCB1cyBcInJlY29nbml6ZWRcIiBldmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wcGluZyA9ICdzdG9wJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IC8vIEFib3J0IHNob3VsZCBub3QgYmUgZGlzcGF0Y2hlZCB3aXRob3V0IHN1cHBvcnQgb2YgXCJzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmNcIi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCdXQgZm9yIGRlZmVuc2l2ZSBwdXJwb3NlLCB3ZSBtYWtlIHN1cmUgXCJzdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmNcIiBpcyBhdmFpbGFibGUgYmVmb3JlIHdlIGNhbiBjYWxsLlxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShhYm9ydCAmJiByZWNvZ25pemVyLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29nbml0aXZlU2VydmljZXNBc3luY1RvUHJvbWlzZShyZWNvZ25pemVyLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYy5iaW5kKHJlY29nbml6ZXIpKSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDYxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhdWRpb1NvdXJjZVJlYWR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuZGlzcGF0Y2hFdmVudChuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudCgnYXVkaW9zdGFydCcpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDYxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdEF1ZGlibGVDaHVuaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmRpc3BhdGNoRXZlbnQobmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnQoJ3NvdW5kc3RhcnQnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VuZFN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2MTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXVkaW9Tb3VyY2VPZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvb2tzIGxpa2Ugd2UgZG9uJ3QgbmVlZCB0aGlzIGxpbmUgYW5kIGFsbCB0aGUgdGVzdHMgYXJlIHN0aWxsIHdvcmtpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3Vlc3NpbmcgcHJvYmFibHkgc3RvcHBpbmcgaXMgYWxyZWFkeSB0cnV0aHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RvcHBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVjaFN0YXJ0ZWQgJiYgX3RoaXMzLmRpc3BhdGNoRXZlbnQobmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnQoJ3NwZWVjaGVuZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VuZFN0YXJ0ZWQgJiYgX3RoaXMzLmRpc3BhdGNoRXZlbnQobmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnQoJ3NvdW5kZW5kJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvU3RhcnRlZCAmJiBfdGhpczMuZGlzcGF0Y2hFdmVudChuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudCgnYXVkaW9lbmQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9TdGFydGVkID0gc291bmRTdGFydGVkID0gc3BlZWNoU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgXCJicmVha1wiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHN0b3BwaW5nICE9PSAnYWJvcnQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDYxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVjb2duaXplZCAmJiByZWNvZ25pemVkLnJlc3VsdCAmJiByZWNvZ25pemVkLnJlc3VsdC5yZWFzb24gPT09IFJlc3VsdFJlYXNvbi5Ob01hdGNoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxFdmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAnbm8tc3BlZWNoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2MTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlY29nbml6ZWQgfHwgcmVjb2duaXppbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWF1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5jb25maXJtZWQgcHJldmVudGlvbiBvZiBxdWlya3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5kaXNwYXRjaEV2ZW50KG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50KCdhdWRpb3N0YXJ0JykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdWRpb1N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc291bmRTdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuZGlzcGF0Y2hFdmVudChuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudCgnc291bmRzdGFydCcpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291bmRTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNwZWVjaFN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5kaXNwYXRjaEV2ZW50KG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50KCdzcGVlY2hzdGFydCcpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWNoU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWNvZ25pemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAoMCwgX2NvZ25pdGl2ZVNlcnZpY2VFdmVudFJlc3VsdFRvV2ViU3BlZWNoUmVjb2duaXRpb25SZXN1bHRMaXN0LmRlZmF1bHQpKHJlY29nbml6ZWQucmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBbHRlcm5hdGl2ZXM6IF90aGlzMy5tYXhBbHRlcm5hdGl2ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Tm9ybWFsaXphdGlvbjogdGV4dE5vcm1hbGl6YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvZ25pemFibGUgPSAhIXJlc3VsdFswXS50cmFuc2NyaXB0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlY29nbml6YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxpemVkUmVzdWx0cyA9IFtdLmNvbmNhdCgoMCwgX3RvQ29uc3VtYWJsZUFycmF5Mi5kZWZhdWx0KShmaW5hbGl6ZWRSZXN1bHRzKSwgW3Jlc3VsdF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmNvbnRpbnVvdXMgJiYgX3RoaXMzLmRpc3BhdGNoRXZlbnQobmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnQoJ3Jlc3VsdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogZmluYWxpemVkUmVzdWx0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gLy8gSWYgaXQgaXMgY29udGludW91cywgd2UganVzdCBzZW50IHRoZSBmaW5hbGl6ZWQgcmVzdWx0cy4gU28gd2UgZG9uJ3QgbmVlZCB0byBzZW5kIGl0IGFnYWluIGFmdGVyIFwiYXVkaW9lbmRcIiBldmVudC5cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMy5jb250aW51b3VzICYmIHJlY29nbml6YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxFdmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IGZpbmFsaXplZFJlc3VsdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZXN1bHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFfdGhpczMuY29udGludW91cyAmJiByZWNvZ25pemVyLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1NztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1NztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29nbml0aXZlU2VydmljZXNBc3luY1RvUHJvbWlzZShyZWNvZ25pemVyLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYy5iaW5kKHJlY29nbml6ZXIpKSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgZXZlbnQgb3JkZXIgY2FuIGJlIGxvb3NlbmVkLCB3ZSBjYW4gc2VuZCB0aGUgcmVjb2duaXplZCBldmVudCBhcyBzb29uIGFzIHdlIHJlY2VpdmUgaXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMS4gSWYgaXQgaXMgbm90IHJlY29nbml6YWJsZSAobm8tc3BlZWNoKSwgd2Ugc2hvdWxkIHNlbmQgYW4gXCJlcnJvclwiIGV2ZW50IGp1c3QgYmVmb3JlIFwiZW5kXCIgZXZlbnQuIFdlIHdpbGwgbm90IGxvb3NlbiBcImVycm9yXCIgZXZlbnRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb29zZUV2ZW50cyAmJiBmaW5hbEV2ZW50ICYmIHJlY29nbml6YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmRpc3BhdGNoRXZlbnQobmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnQoZmluYWxFdmVudC50eXBlLCBmaW5hbEV2ZW50KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRXZlbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2MTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmludGVyaW1SZXN1bHRzICYmIF90aGlzMy5kaXNwYXRjaEV2ZW50KG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50KCdyZXN1bHQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IFtdLmNvbmNhdCgoMCwgX3RvQ29uc3VtYWJsZUFycmF5Mi5kZWZhdWx0KShmaW5hbGl6ZWRSZXN1bHRzKSwgWygwLCBfY29nbml0aXZlU2VydmljZUV2ZW50UmVzdWx0VG9XZWJTcGVlY2hSZWNvZ25pdGlvblJlc3VsdExpc3QuZGVmYXVsdCkocmVjb2duaXppbmcucmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4QWx0ZXJuYXRpdmVzOiBfdGhpczMubWF4QWx0ZXJuYXRpdmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHROb3JtYWxpemF0aW9uOiB0ZXh0Tm9ybWFsaXphdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgX2xvb3ApO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICBsb29wID0gMDtcblxuICAgICAgICAgICAgICAgIGNhc2UgMjQ6XG4gICAgICAgICAgICAgICAgICBpZiAoISghc3RvcHBpbmcgfHwgYXVkaW9TdGFydGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDMyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5kZWxlZ2F0ZVlpZWxkKF9sb29wKGxvb3ApLCBcInQwXCIsIDI2KTtcblxuICAgICAgICAgICAgICAgIGNhc2UgMjY6XG4gICAgICAgICAgICAgICAgICBfcmV0ID0gX2NvbnRleHQyLnQwO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoIShfcmV0ID09PSBcImJyZWFrXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdChcImJyZWFrXCIsIDMyKTtcblxuICAgICAgICAgICAgICAgIGNhc2UgMjk6XG4gICAgICAgICAgICAgICAgICBsb29wKys7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI0O1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgICAgaWYgKHNwZWVjaFN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50KCdzcGVlY2hlbmQnKSk7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChzb3VuZFN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50KCdzb3VuZGVuZCcpKTtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKGF1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnQoJ2F1ZGlvZW5kJykpO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoZmluYWxFdmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxFdmVudC50eXBlID09PSAncmVzdWx0JyAmJiAhZmluYWxFdmVudC5yZXN1bHRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ25vLXNwZWVjaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbEV2ZW50LnR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEVycm9yRXZlbnQoJ2Vycm9yJywgZmluYWxFdmVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudChmaW5hbEV2ZW50LnR5cGUsIGZpbmFsRXZlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSAvLyBFdmVuIHRob3VnaCB0aGVyZSBpcyBubyBcInN0YXJ0XCIgZXZlbnQgZW1pdHRlZCwgd2Ugd2lsbCBzdGlsbCBlbWl0IFwiZW5kXCIgZXZlbnRcbiAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgbWFpbmx5IGZvciBcIm1pY3JvcGhvbmUgYmxvY2tlZFwiIHN0b3J5LlxuXG5cbiAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudCgnZW5kJykpO1xuICAgICAgICAgICAgICAgICAgZGV0YWNoQXVkaW9Db25maWdFdmVudCgpO1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0NDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNDA7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dDIudDEgPSBfY29udGV4dDJbXCJjYXRjaFwiXSg0KTtcbiAgICAgICAgICAgICAgICAgIC8vIExvZ2dpbmcgb3V0IHRoZSBlcm9yciBiZWNhdXNlIFNwZWVjaCBTREsgd291bGQgZmFpbCBzaWxlbnRseS5cbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQyLnQxKTtcbiAgICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0Mi50MTtcblxuICAgICAgICAgICAgICAgIGNhc2UgNDQ6XG4gICAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDQ0O1xuICAgICAgICAgICAgICAgICAgdW5wcmVwYXJlKCk7XG4gICAgICAgICAgICAgICAgICByZWNvZ25pemVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZmluaXNoKDQ0KTtcblxuICAgICAgICAgICAgICAgIGNhc2UgNDg6XG4gICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzQsIDQwLCA0NCwgNDhdXSk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBmdW5jdGlvbiBfc3RhcnRPbmNlKCkge1xuICAgICAgICAgIHJldHVybiBfc3RhcnRPbmNlMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9zdGFydE9uY2U7XG4gICAgICB9KClcbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY29udGludW91c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250aW51b3VzO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NvbnRpbnVvdXMgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ3JhbW1hcnNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ3JhbW1hcnM7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgX1NwZWVjaEdyYW1tYXJMaXN0LmRlZmF1bHQpIHtcbiAgICAgICAgICB0aGlzLl9ncmFtbWFycyA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBwcm92aWRlZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSAnU3BlZWNoR3JhbW1hckxpc3QnXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImludGVyaW1SZXN1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVyaW1SZXN1bHRzO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2ludGVyaW1SZXN1bHRzID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIm1heEFsdGVybmF0aXZlc1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXhBbHRlcm5hdGl2ZXM7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbWF4QWx0ZXJuYXRpdmVzID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImxhbmdcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGFuZztcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9sYW5nID0gdmFsdWU7XG4gICAgICB9XG4gICAgfV0pO1xuICAgIHJldHVybiBTcGVlY2hSZWNvZ25pdGlvbjtcbiAgfShfZXZlbnRUYXJnZXRTaGltLkV2ZW50VGFyZ2V0KTtcblxuICAoMCwgX2V2ZW50VGFyZ2V0U2hpbS5kZWZpbmVFdmVudEF0dHJpYnV0ZSkoU3BlZWNoUmVjb2duaXRpb24ucHJvdG90eXBlLCAnYXVkaW9lbmQnKTtcbiAgKDAsIF9ldmVudFRhcmdldFNoaW0uZGVmaW5lRXZlbnRBdHRyaWJ1dGUpKFNwZWVjaFJlY29nbml0aW9uLnByb3RvdHlwZSwgJ2F1ZGlvc3RhcnQnKTtcbiAgKDAsIF9ldmVudFRhcmdldFNoaW0uZGVmaW5lRXZlbnRBdHRyaWJ1dGUpKFNwZWVjaFJlY29nbml0aW9uLnByb3RvdHlwZSwgJ2NvZ25pdGl2ZXNlcnZpY2VzJyk7XG4gICgwLCBfZXZlbnRUYXJnZXRTaGltLmRlZmluZUV2ZW50QXR0cmlidXRlKShTcGVlY2hSZWNvZ25pdGlvbi5wcm90b3R5cGUsICdlbmQnKTtcbiAgKDAsIF9ldmVudFRhcmdldFNoaW0uZGVmaW5lRXZlbnRBdHRyaWJ1dGUpKFNwZWVjaFJlY29nbml0aW9uLnByb3RvdHlwZSwgJ2Vycm9yJyk7XG4gICgwLCBfZXZlbnRUYXJnZXRTaGltLmRlZmluZUV2ZW50QXR0cmlidXRlKShTcGVlY2hSZWNvZ25pdGlvbi5wcm90b3R5cGUsICdub21hdGNoJyk7XG4gICgwLCBfZXZlbnRUYXJnZXRTaGltLmRlZmluZUV2ZW50QXR0cmlidXRlKShTcGVlY2hSZWNvZ25pdGlvbi5wcm90b3R5cGUsICdyZXN1bHQnKTtcbiAgKDAsIF9ldmVudFRhcmdldFNoaW0uZGVmaW5lRXZlbnRBdHRyaWJ1dGUpKFNwZWVjaFJlY29nbml0aW9uLnByb3RvdHlwZSwgJ3NvdW5kZW5kJyk7XG4gICgwLCBfZXZlbnRUYXJnZXRTaGltLmRlZmluZUV2ZW50QXR0cmlidXRlKShTcGVlY2hSZWNvZ25pdGlvbi5wcm90b3R5cGUsICdzb3VuZHN0YXJ0Jyk7XG4gICgwLCBfZXZlbnRUYXJnZXRTaGltLmRlZmluZUV2ZW50QXR0cmlidXRlKShTcGVlY2hSZWNvZ25pdGlvbi5wcm90b3R5cGUsICdzcGVlY2hlbmQnKTtcbiAgKDAsIF9ldmVudFRhcmdldFNoaW0uZGVmaW5lRXZlbnRBdHRyaWJ1dGUpKFNwZWVjaFJlY29nbml0aW9uLnByb3RvdHlwZSwgJ3NwZWVjaHN0YXJ0Jyk7XG4gICgwLCBfZXZlbnRUYXJnZXRTaGltLmRlZmluZUV2ZW50QXR0cmlidXRlKShTcGVlY2hSZWNvZ25pdGlvbi5wcm90b3R5cGUsICdzdGFydCcpO1xuICByZXR1cm4ge1xuICAgIFNwZWVjaEdyYW1tYXJMaXN0OiBfU3BlZWNoR3JhbW1hckxpc3QuZGVmYXVsdCxcbiAgICBTcGVlY2hSZWNvZ25pdGlvbjogU3BlZWNoUmVjb2duaXRpb24sXG4gICAgU3BlZWNoUmVjb2duaXRpb25FdmVudDogU3BlZWNoUmVjb2duaXRpb25FdmVudFxuICB9O1xufVxuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiBfZGVmYXVsdChvcHRpb25zKSB7XG4gIHZhciBfcGF0Y2hPcHRpb25zID0gKDAsIF9wYXRjaE9wdGlvbnMyLmRlZmF1bHQpKG9wdGlvbnMpLFxuICAgICAgX3BhdGNoT3B0aW9ucyRhdWRpb0NvID0gX3BhdGNoT3B0aW9ucy5hdWRpb0NvbmZpZyxcbiAgICAgIGF1ZGlvQ29uZmlnID0gX3BhdGNoT3B0aW9ucyRhdWRpb0NvID09PSB2b2lkIDAgPyBBdWRpb0NvbmZpZy5mcm9tRGVmYXVsdE1pY3JvcGhvbmVJbnB1dCgpIDogX3BhdGNoT3B0aW9ucyRhdWRpb0NvLFxuICAgICAgX3BhdGNoT3B0aW9ucyRlbmFibGVUID0gX3BhdGNoT3B0aW9ucy5lbmFibGVUZWxlbWV0cnksXG4gICAgICBlbmFibGVUZWxlbWV0cnkgPSBfcGF0Y2hPcHRpb25zJGVuYWJsZVQgPT09IHZvaWQgMCA/IHRydWUgOiBfcGF0Y2hPcHRpb25zJGVuYWJsZVQsXG4gICAgICBmZXRjaENyZWRlbnRpYWxzID0gX3BhdGNoT3B0aW9ucy5mZXRjaENyZWRlbnRpYWxzLFxuICAgICAgbG9vc2VFdmVudHMgPSBfcGF0Y2hPcHRpb25zLmxvb3NlRXZlbnRzLFxuICAgICAgcmVmZXJlbmNlR3JhbW1hcnMgPSBfcGF0Y2hPcHRpb25zLnJlZmVyZW5jZUdyYW1tYXJzLFxuICAgICAgc3BlZWNoUmVjb2duaXRpb25FbmRwb2ludElkID0gX3BhdGNoT3B0aW9ucy5zcGVlY2hSZWNvZ25pdGlvbkVuZHBvaW50SWQsXG4gICAgICBfcGF0Y2hPcHRpb25zJHRleHROb3IgPSBfcGF0Y2hPcHRpb25zLnRleHROb3JtYWxpemF0aW9uLFxuICAgICAgdGV4dE5vcm1hbGl6YXRpb24gPSBfcGF0Y2hPcHRpb25zJHRleHROb3IgPT09IHZvaWQgMCA/ICdkaXNwbGF5JyA6IF9wYXRjaE9wdGlvbnMkdGV4dE5vcjtcblxuICBpZiAoIXdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzIHx8ICF3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICBjb25zb2xlLndhcm4oJ3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzOiBUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWJSVEMgYW5kIGl0IHdpbGwgbm90IHdvcmsgd2l0aCBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2VzLicpO1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIHZhciBjcmVhdGVSZWNvZ25pemVyID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYxMSA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoXG4gICAgLyojX19QVVJFX18qL1xuICAgIF9yZWdlbmVyYXRvci5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIobGFuZykge1xuICAgICAgdmFyIF9yZWYxMiwgYXV0aG9yaXphdGlvblRva2VuLCByZWdpb24sIHN1YnNjcmlwdGlvbktleSwgc3BlZWNoQ29uZmlnO1xuXG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQzKSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoQ3JlZGVudGlhbHMoKTtcblxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICBfcmVmMTIgPSBfY29udGV4dDMuc2VudDtcbiAgICAgICAgICAgICAgYXV0aG9yaXphdGlvblRva2VuID0gX3JlZjEyLmF1dGhvcml6YXRpb25Ub2tlbjtcbiAgICAgICAgICAgICAgcmVnaW9uID0gX3JlZjEyLnJlZ2lvbjtcbiAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uS2V5ID0gX3JlZjEyLnN1YnNjcmlwdGlvbktleTtcbiAgICAgICAgICAgICAgc3BlZWNoQ29uZmlnID0gYXV0aG9yaXphdGlvblRva2VuID8gU3BlZWNoQ29uZmlnLmZyb21BdXRob3JpemF0aW9uVG9rZW4oYXV0aG9yaXphdGlvblRva2VuLCByZWdpb24pIDogU3BlZWNoQ29uZmlnLmZyb21TdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uS2V5LCByZWdpb24pO1xuXG4gICAgICAgICAgICAgIGlmIChzcGVlY2hSZWNvZ25pdGlvbkVuZHBvaW50SWQpIHtcbiAgICAgICAgICAgICAgICBzcGVlY2hDb25maWcuZW5kcG9pbnRJZCA9IHNwZWVjaFJlY29nbml0aW9uRW5kcG9pbnRJZDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHNwZWVjaENvbmZpZy5vdXRwdXRGb3JtYXQgPSBPdXRwdXRGb3JtYXQuRGV0YWlsZWQ7XG4gICAgICAgICAgICAgIHNwZWVjaENvbmZpZy5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlID0gbGFuZyB8fCAnZW4tVVMnO1xuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdChcInJldHVyblwiLCBuZXcgU3BlZWNoUmVjb2duaXplcihzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKSk7XG5cbiAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTIpO1xuICAgIH0pKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVSZWNvZ25pemVyKF94KSB7XG4gICAgICByZXR1cm4gX3JlZjExLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfSgpO1xuXG4gIHJldHVybiBjcmVhdGVTcGVlY2hSZWNvZ25pdGlvblBvbnlmaWxsRnJvbVJlY29nbml6ZXIoe1xuICAgIGF1ZGlvQ29uZmlnOiBhdWRpb0NvbmZpZyxcbiAgICBjcmVhdGVSZWNvZ25pemVyOiBjcmVhdGVSZWNvZ25pemVyLFxuICAgIGVuYWJsZVRlbGVtZXRyeTogZW5hYmxlVGVsZW1ldHJ5LFxuICAgIGxvb3NlRXZlbnRzOiBsb29zZUV2ZW50cyxcbiAgICByZWZlcmVuY2VHcmFtbWFyczogcmVmZXJlbmNlR3JhbW1hcnMsXG4gICAgdGV4dE5vcm1hbGl6YXRpb246IHRleHROb3JtYWxpemF0aW9uXG4gIH0pO1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVTcGVlY2hSZWNvZ25pdGlvblBvbnlmaWxsLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdFwiKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHBhdGNoT3B0aW9ucztcblxudmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCIpKTtcblxudmFyIF9yZWdlbmVyYXRvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yXCIpKTtcblxudmFyIF9hc3luY1RvR2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvclwiKSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiKSk7XG5cbnZhciBfcmVzb2x2ZUZ1bmN0aW9uT3JSZXR1cm5WYWx1ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcmVzb2x2ZUZ1bmN0aW9uT3JSZXR1cm5WYWx1ZVwiKSk7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxudmFyIHNob3VsZFdhcm5PblN1YnNjcmlwdGlvbktleSA9IHRydWU7XG5cbmZ1bmN0aW9uIHBhdGNoT3B0aW9ucygpIHtcbiAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gIHZhciBhdXRob3JpemF0aW9uVG9rZW4gPSBfcmVmLmF1dGhvcml6YXRpb25Ub2tlbixcbiAgICAgIGNyZWRlbnRpYWxzID0gX3JlZi5jcmVkZW50aWFscyxcbiAgICAgIGxvb3NlRXZlbnQgPSBfcmVmLmxvb3NlRXZlbnQsXG4gICAgICBsb29zZUV2ZW50cyA9IF9yZWYubG9vc2VFdmVudHMsXG4gICAgICBfcmVmJHJlZ2lvbiA9IF9yZWYucmVnaW9uLFxuICAgICAgcmVnaW9uID0gX3JlZiRyZWdpb24gPT09IHZvaWQgMCA/ICd3ZXN0dXMnIDogX3JlZiRyZWdpb24sXG4gICAgICBzdWJzY3JpcHRpb25LZXkgPSBfcmVmLnN1YnNjcmlwdGlvbktleSxcbiAgICAgIG90aGVyT3B0aW9ucyA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyLmRlZmF1bHQpKF9yZWYsIFtcImF1dGhvcml6YXRpb25Ub2tlblwiLCBcImNyZWRlbnRpYWxzXCIsIFwibG9vc2VFdmVudFwiLCBcImxvb3NlRXZlbnRzXCIsIFwicmVnaW9uXCIsIFwic3Vic2NyaXB0aW9uS2V5XCJdKTtcblxuICBpZiAodHlwZW9mIGxvb3NlRXZlbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc29sZS53YXJuKCd3ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlczogVGhlIG9wdGlvbiBcImxvb3NlRXZlbnRcIiBzaG91bGQgYmUgbmFtZWQgYXMgXCJsb29zZUV2ZW50c1wiLicpO1xuICAgIGxvb3NlRXZlbnRzID0gbG9vc2VFdmVudDtcbiAgfVxuXG4gIGlmICghY3JlZGVudGlhbHMpIHtcbiAgICBpZiAoIWF1dGhvcml6YXRpb25Ub2tlbiAmJiAhc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzOiBDcmVkZW50aWFscyBtdXN0IGJlIHNwZWNpZmllZC4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCd3ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlczogV2UgYXJlIGRlcHJlY2F0aW5nIGF1dGhvcml6YXRpb25Ub2tlbiwgcmVnaW9uLCBhbmQgc3Vic2NyaXB0aW9uS2V5LiBQbGVhc2UgdXNlIGNyZWRlbnRpYWxzIGluc3RlYWQuIFRoZSBkZXByZWNhdGVkIG9wdGlvbiB3aWxsIGJlIHJlbW92ZWQgb24gb3IgYWZ0ZXIgMjAyMC0xMS0xNC4nKTtcblxuICAgICAgY3JlZGVudGlhbHMgPVxuICAgICAgLyojX19QVVJFX18qL1xuICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjIgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKFxuICAgICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAgIF9yZWdlbmVyYXRvci5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcbiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgIGlmICghYXV0aG9yaXphdGlvblRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9yZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlLmRlZmF1bHQpKGF1dGhvcml6YXRpb25Ub2tlbik7XG5cbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0LnNlbnQ7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dC50MiA9IHJlZ2lvbjtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0ge1xuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uVG9rZW46IF9jb250ZXh0LnQxLFxuICAgICAgICAgICAgICAgICAgICByZWdpb246IF9jb250ZXh0LnQyXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICBfY29udGV4dC50MyA9IHJlZ2lvbjtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX3Jlc29sdmVGdW5jdGlvbk9yUmV0dXJuVmFsdWUuZGVmYXVsdCkoc3Vic2NyaXB0aW9uS2V5KTtcblxuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICBfY29udGV4dC50NCA9IF9jb250ZXh0LnNlbnQ7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBfY29udGV4dC50MyxcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uS2V5OiBfY29udGV4dC50NFxuICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIF9jb250ZXh0LnQwKTtcblxuICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIF9jYWxsZWUpO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNyZWRlbnRpYWxzKCkge1xuICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgfSgpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBvdGhlck9wdGlvbnMsIHtcbiAgICBmZXRjaENyZWRlbnRpYWxzOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2ZldGNoQ3JlZGVudGlhbHMgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKFxuICAgICAgLyojX19QVVJFX18qL1xuICAgICAgX3JlZ2VuZXJhdG9yLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHtcbiAgICAgICAgdmFyIF9yZWYzLCBhdXRob3JpemF0aW9uVG9rZW4sIHJlZ2lvbiwgc3Vic2NyaXB0aW9uS2V5O1xuXG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfcmVzb2x2ZUZ1bmN0aW9uT3JSZXR1cm5WYWx1ZS5kZWZhdWx0KShjcmVkZW50aWFscyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIF9yZWYzID0gX2NvbnRleHQyLnNlbnQ7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvblRva2VuID0gX3JlZjMuYXV0aG9yaXphdGlvblRva2VuO1xuICAgICAgICAgICAgICAgIHJlZ2lvbiA9IF9yZWYzLnJlZ2lvbjtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25LZXkgPSBfcmVmMy5zdWJzY3JpcHRpb25LZXk7XG5cbiAgICAgICAgICAgICAgICBpZiAoISghYXV0aG9yaXphdGlvblRva2VuICYmICFzdWJzY3JpcHRpb25LZXkpKSB7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzOiBFaXRoZXIgYXV0aG9yaXphdGlvbiB0b2tlbiBhbmQgc3Vic2NyaXB0aW9uIGtleSBtdXN0IGJlIHByb3ZpZGVkLicpO1xuXG4gICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICBpZiAoIWF1dGhvcml6YXRpb25Ub2tlbikge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMztcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghKHR5cGVvZiBhdXRob3JpemF0aW9uVG9rZW4gIT09ICdzdHJpbmcnKSkge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignd2ViLXNwZWVjaC1jb2duaXRpdmUtc2VydmljZXM6IEF1dGhvcml6YXRpb24gdG9rZW4gbXVzdCBiZSBhIHN0cmluZy4nKTtcblxuICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2Ygc3Vic2NyaXB0aW9uS2V5ICE9PSAnc3RyaW5nJykpIHtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dlYi1zcGVlY2gtY29nbml0aXZlLXNlcnZpY2VzOiBTdWJzY3JpcHRpb24ga2V5IG11c3QgYmUgYSBzdHJpbmcuJyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkV2Fybk9uU3Vic2NyaXB0aW9uS2V5ICYmIHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCd3ZWItc3BlZWNoLWNvZ25pdGl2ZS1zZXJ2aWNlczogSW4gcHJvZHVjdGlvbiBlbnZpcm9ubWVudCwgc3Vic2NyaXB0aW9uIGtleSBzaG91bGQgbm90IGJlIHVzZWQsIGF1dGhvcml6YXRpb24gdG9rZW4gc2hvdWxkIGJlIHVzZWQgaW5zdGVhZC4nKTtcbiAgICAgICAgICAgICAgICAgIHNob3VsZFdhcm5PblN1YnNjcmlwdGlvbktleSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KFwicmV0dXJuXCIsIGF1dGhvcml6YXRpb25Ub2tlbiA/IHtcbiAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb25Ub2tlbjogYXV0aG9yaXphdGlvblRva2VuLFxuICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb25cbiAgICAgICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25LZXk6IHN1YnNjcmlwdGlvbktleVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWUyKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gZmV0Y2hDcmVkZW50aWFscygpIHtcbiAgICAgICAgcmV0dXJuIF9mZXRjaENyZWRlbnRpYWxzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmZXRjaENyZWRlbnRpYWxzO1xuICAgIH0oKSxcbiAgICBsb29zZUV2ZW50czogbG9vc2VFdmVudHNcbiAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXRjaE9wdGlvbnMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSByZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlO1xuXG5mdW5jdGlvbiByZXNvbHZlRnVuY3Rpb25PclJldHVyblZhbHVlKGZuT3JWYWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIGZuT3JWYWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/IGZuT3JWYWx1ZSgpIDogZm5PclZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb2x2ZUZ1bmN0aW9uT3JSZXR1cm5WYWx1ZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHRcIik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcblxudmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCIpKTtcblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7ICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmYXVsdChhcnJheSwgZXh0cmFzKSB7XG4gIHZhciBtYXAgPSBfb2JqZWN0U3ByZWFkKHt9LCBbXS5yZWR1Y2UuY2FsbChhcnJheSwgZnVuY3Rpb24gKG1hcCwgdmFsdWUsIGluZGV4KSB7XG4gICAgbWFwW2luZGV4XSA9IHZhbHVlO1xuICAgIHJldHVybiBtYXA7XG4gIH0sIHt9KSwge30sIGV4dHJhcywgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoe1xuICAgIGxlbmd0aDogYXJyYXkubGVuZ3RoXG4gIH0sIFN5bWJvbC5pdGVyYXRvciwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBbXS5zbGljZS5jYWxsKG1hcClbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICB9KSk7XG5cbiAgcmV0dXJuIG1hcDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFycmF5VG9NYXAuanMubWFwIiwiLy8gVGhlIE1JVCBMaWNlbnNlIChNSVQpXG4vL1xuLy8gQ29weXJpZ2h0IChjKSBTaW5kcmUgU29yaHVzIDxzaW5kcmVzb3JodXNAZ21haWwuY29tPiAoc2luZHJlc29yaHVzLmNvbSlcbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuLy8gVGhpcyBwaWVjZSBvZiBjb2RlIGlzIGFkb3B0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL3AtZGVmZXJcbi8vIFRoZSByZWFzb24gd2h5IHdlIG5lZWQgdG8gZm9yayBpdCBpcyBiZWNhdXNlOlxuLy8gLSBUaGUgb3JpZ2luYWwgcGFja2FnZSBwdWJsaXNoZWQgdG8gTlBNIGlzIG5vdCBFUzUtY29tcGxpYW50XG4vLyAgICAtIER1ZSB0byB0aGUgdXNlIG9mIGFycm93IGZ1bmN0aW9uc1xuLy8gLSBjcmVhdGUtcmVhY3QtYXBwQDEgZG9lcyBub3QgcGxheSBuaWNlIHdpdGggcGFja2FnZXMgdGhhdCBhcmUgbm90IEVTNS1jb21wbGlhbnRcbi8vICAgIC0gY3JlYXRlLXJlYWN0LWFwcEAyIGRvIHBsYXkgbmljZSwgYnV0IGl0IHdhcyBzbyBuZXcgdGhhdCBtb3N0IG9mIHRoZSBwZW9wbGUgYXJlIHN0aWxsIG9uIEAxXG4vLyBDcml0ZXJpYSB0byByZW1vdmUgdGhpcyBwYWNrYWdlOlxuLy8gLSBXaGVuIGNyZWF0ZS1yZWFjdC1hcHBAMiBiZWNvbWUgbWFpbnN0cmVhbVxuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gY3JlYXRlRGVmZXJyZWQ7XG5cbmZ1bmN0aW9uIGNyZWF0ZURlZmVycmVkKCkge1xuICB2YXIgcmV0ID0ge307XG4gIHJldC5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJldC5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICByZXQucmVqZWN0ID0gcmVqZWN0O1xuICB9KTtcbiAgcmV0dXJuIHJldDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZURlZmVycmVkLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdFwiKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuXG52YXIgX2NyZWF0ZURlZmVycmVkID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9jcmVhdGVEZWZlcnJlZFwiKSk7XG5cbmZ1bmN0aW9uIF9kZWZhdWx0KCkge1xuICB2YXIgc2hpZnREZWZlcnJlZDtcbiAgdmFyIHF1ZXVlID0gW107XG5cbiAgdmFyIHB1c2ggPSBmdW5jdGlvbiBwdXNoKHZhbHVlKSB7XG4gICAgaWYgKHNoaWZ0RGVmZXJyZWQpIHtcbiAgICAgIHZhciBfc2hpZnREZWZlcnJlZCA9IHNoaWZ0RGVmZXJyZWQsXG4gICAgICAgICAgcmVzb2x2ZSA9IF9zaGlmdERlZmVycmVkLnJlc29sdmU7XG4gICAgICBzaGlmdERlZmVycmVkID0gbnVsbDtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWV1ZS5wdXNoKHZhbHVlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHNoaWZ0ID0gZnVuY3Rpb24gc2hpZnQoKSB7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShxdWV1ZS5zaGlmdCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKHNoaWZ0RGVmZXJyZWQgfHwgKHNoaWZ0RGVmZXJyZWQgPSAoMCwgX2NyZWF0ZURlZmVycmVkLmRlZmF1bHQpKCkpKS5wcm9taXNlO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcHVzaDogcHVzaCxcbiAgICBzaGlmdDogc2hpZnRcbiAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZVByb21pc2VRdWV1ZS5qcy5tYXAiLCIvLyBUaGlzIGlzIGFkb3B0ZWQgZnJvbSBldmVudC10YXJnZXQtc2hpbUA1LjAuMSB1bmRlciBNSVQgTGljZW5zZS5cbi8vIFRoZSBzb3VyY2UgY29kZSBpcyBjb3BpZWQgaGVyZSBiZWNhdXNlIHRoZSBvcmlnaW5hbCBwYWNrYWdlIGRvIG5vdCBzdXBwb3J0IEVTNSBicm93c2Vycy5cblxuLyoqXG4gKiBAYXV0aG9yIFRvcnUgTmFnYXNoaW1hIDxodHRwczovL2dpdGh1Yi5jb20vbXlzdGljYXRlYT5cbiAqIEBjb3B5cmlnaHQgMjAxNSBUb3J1IE5hZ2FzaGltYS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFNlZSBMSUNFTlNFIGZpbGUgaW4gcm9vdCBkaXJlY3RvcnkgZm9yIGZ1bGwgbGljZW5zZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdFwiKTtcblxudmFyIF90eXBlb2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2ZcIikpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gUHJpdmF0ZURhdGFcbiAqIEBwcm9wZXJ0eSB7RXZlbnRUYXJnZXR9IGV2ZW50VGFyZ2V0IFRoZSBldmVudCB0YXJnZXQuXG4gKiBAcHJvcGVydHkge3t0eXBlOnN0cmluZ319IGV2ZW50IFRoZSBvcmlnaW5hbCBldmVudCBvYmplY3QuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZXZlbnRQaGFzZSBUaGUgY3VycmVudCBldmVudCBwaGFzZS5cbiAqIEBwcm9wZXJ0eSB7RXZlbnRUYXJnZXR8bnVsbH0gY3VycmVudFRhcmdldCBUaGUgY3VycmVudCBldmVudCB0YXJnZXQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGNhbmNlbGVkIFRoZSBmbGFnIHRvIHByZXZlbnQgZGVmYXVsdC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gc3RvcHBlZCBUaGUgZmxhZyB0byBzdG9wIHByb3BhZ2F0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBpbW1lZGlhdGVTdG9wcGVkIFRoZSBmbGFnIHRvIHN0b3AgcHJvcGFnYXRpb24gaW1tZWRpYXRlbHkuXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufG51bGx9IHBhc3NpdmVMaXN0ZW5lciBUaGUgbGlzdGVuZXIgaWYgdGhlIGN1cnJlbnQgbGlzdGVuZXIgaXMgcGFzc2l2ZS4gT3RoZXJ3aXNlIHRoaXMgaXMgbnVsbC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lU3RhbXAgVGhlIHVuaXggdGltZS5cbiAqIEBwcml2YXRlXG4gKi9cblxuLyoqXG4gKiBQcml2YXRlIGRhdGEgZm9yIGV2ZW50IHdyYXBwZXJzLlxuICogQHR5cGUge1dlYWtNYXA8RXZlbnQsIFByaXZhdGVEYXRhPn1cbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIHByaXZhdGVEYXRhID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogQ2FjaGUgZm9yIHdyYXBwZXIgY2xhc3Nlcy5cbiAqIEB0eXBlIHtXZWFrTWFwPE9iamVjdCwgRnVuY3Rpb24+fVxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgd3JhcHBlcnMgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBHZXQgcHJpdmF0ZSBkYXRhLlxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50IG9iamVjdCB0byBnZXQgcHJpdmF0ZSBkYXRhLlxuICogQHJldHVybnMge1ByaXZhdGVEYXRhfSBUaGUgcHJpdmF0ZSBkYXRhIG9mIHRoZSBldmVudC5cbiAqIEBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGQoZXZlbnQpIHtcbiAgdmFyIHJldHYgPSBwcml2YXRlRGF0YS5nZXQoZXZlbnQpO1xuICBjb25zb2xlLmFzc2VydChyZXR2ICE9IG51bGwsIFwiJ3RoaXMnIGlzIGV4cGVjdGVkIGFuIEV2ZW50IG9iamVjdCwgYnV0IGdvdFwiLCBldmVudCk7XG4gIHJldHVybiByZXR2O1xufVxuLyoqXG4gKiBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI3NldC10aGUtY2FuY2VsZWQtZmxhZ1xuICogQHBhcmFtIGRhdGEge1ByaXZhdGVEYXRhfSBwcml2YXRlIGRhdGEuXG4gKi9cblxuXG5mdW5jdGlvbiBzZXRDYW5jZWxGbGFnKGRhdGEpIHtcbiAgaWYgKGRhdGEucGFzc2l2ZUxpc3RlbmVyICE9IG51bGwpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGNvbnNvbGUuZXJyb3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBwcmV2ZW50RGVmYXVsdCBpbnNpZGUgcGFzc2l2ZSBldmVudCBsaXN0ZW5lciBpbnZvY2F0aW9uLlwiLCBkYXRhLnBhc3NpdmVMaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCFkYXRhLmV2ZW50LmNhbmNlbGFibGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBkYXRhLmNhbmNlbGVkID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGRhdGEuZXZlbnQucHJldmVudERlZmF1bHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGRhdGEuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxufVxuLyoqXG4gKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jaW50ZXJmYWNlLWV2ZW50XG4gKiBAcHJpdmF0ZVxuICovXG5cbi8qKlxuICogVGhlIGV2ZW50IHdyYXBwZXIuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IGV2ZW50VGFyZ2V0IFRoZSBldmVudCB0YXJnZXQgb2YgdGhpcyBkaXNwYXRjaGluZy5cbiAqIEBwYXJhbSB7RXZlbnR8e3R5cGU6c3RyaW5nfX0gZXZlbnQgVGhlIG9yaWdpbmFsIGV2ZW50IHRvIHdyYXAuXG4gKi9cblxuXG5mdW5jdGlvbiBFdmVudChldmVudFRhcmdldCwgZXZlbnQpIHtcbiAgcHJpdmF0ZURhdGEuc2V0KHRoaXMsIHtcbiAgICBldmVudFRhcmdldDogZXZlbnRUYXJnZXQsXG4gICAgZXZlbnQ6IGV2ZW50LFxuICAgIGV2ZW50UGhhc2U6IDIsXG4gICAgY3VycmVudFRhcmdldDogZXZlbnRUYXJnZXQsXG4gICAgY2FuY2VsZWQ6IGZhbHNlLFxuICAgIHN0b3BwZWQ6IGZhbHNlLFxuICAgIGltbWVkaWF0ZVN0b3BwZWQ6IGZhbHNlLFxuICAgIHBhc3NpdmVMaXN0ZW5lcjogbnVsbCxcbiAgICB0aW1lU3RhbXA6IGV2ZW50LnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpXG4gIH0pOyAvLyBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNVbmZvcmdlYWJsZVxuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzVHJ1c3RlZFwiLCB7XG4gICAgdmFsdWU6IGZhbHNlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSk7IC8vIERlZmluZSBhY2Nlc3NvcnNcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGV2ZW50KTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIga2V5ID0ga2V5c1tpXTtcblxuICAgIGlmICghKGtleSBpbiB0aGlzKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwgZGVmaW5lUmVkaXJlY3REZXNjcmlwdG9yKGtleSkpO1xuICAgIH1cbiAgfVxufSAvLyBTaG91bGQgYmUgZW51bWVyYWJsZSwgYnV0IGNsYXNzIG1ldGhvZHMgYXJlIG5vdCBlbnVtZXJhYmxlLlxuXG5cbkV2ZW50LnByb3RvdHlwZSA9IHtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIHRoaXMgZXZlbnQuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gcGQodGhpcykuZXZlbnQudHlwZTtcbiAgfSxcblxuICAvKipcbiAgICogVGhlIHRhcmdldCBvZiB0aGlzIGV2ZW50LlxuICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR9XG4gICAqL1xuICBnZXQgdGFyZ2V0KCkge1xuICAgIHJldHVybiBwZCh0aGlzKS5ldmVudFRhcmdldDtcbiAgfSxcblxuICAvKipcbiAgICogVGhlIHRhcmdldCBvZiB0aGlzIGV2ZW50LlxuICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR9XG4gICAqL1xuICBnZXQgY3VycmVudFRhcmdldCgpIHtcbiAgICByZXR1cm4gcGQodGhpcykuY3VycmVudFRhcmdldDtcbiAgfSxcblxuICAvKipcbiAgICogQHJldHVybnMge0V2ZW50VGFyZ2V0W119IFRoZSBjb21wb3NlZCBwYXRoIG9mIHRoaXMgZXZlbnQuXG4gICAqL1xuICBjb21wb3NlZFBhdGg6IGZ1bmN0aW9uIGNvbXBvc2VkUGF0aCgpIHtcbiAgICB2YXIgY3VycmVudFRhcmdldCA9IHBkKHRoaXMpLmN1cnJlbnRUYXJnZXQ7XG5cbiAgICBpZiAoY3VycmVudFRhcmdldCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIFtjdXJyZW50VGFyZ2V0XTtcbiAgfSxcblxuICAvKipcbiAgICogQ29uc3RhbnQgb2YgTk9ORS5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBOT05FKCkge1xuICAgIHJldHVybiAwO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDb25zdGFudCBvZiBDQVBUVVJJTkdfUEhBU0UuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgQ0FQVFVSSU5HX1BIQVNFKCkge1xuICAgIHJldHVybiAxO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDb25zdGFudCBvZiBBVF9UQVJHRVQuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgQVRfVEFSR0VUKCkge1xuICAgIHJldHVybiAyO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDb25zdGFudCBvZiBCVUJCTElOR19QSEFTRS5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBCVUJCTElOR19QSEFTRSgpIHtcbiAgICByZXR1cm4gMztcbiAgfSxcblxuICAvKipcbiAgICogVGhlIHRhcmdldCBvZiB0aGlzIGV2ZW50LlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGV2ZW50UGhhc2UoKSB7XG4gICAgcmV0dXJuIHBkKHRoaXMpLmV2ZW50UGhhc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFN0b3AgZXZlbnQgYnViYmxpbmcuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgc3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgdmFyIGRhdGEgPSBwZCh0aGlzKTtcbiAgICBkYXRhLnN0b3BwZWQgPSB0cnVlO1xuXG4gICAgaWYgKHR5cGVvZiBkYXRhLmV2ZW50LnN0b3BQcm9wYWdhdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBkYXRhLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU3RvcCBldmVudCBidWJibGluZy5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIHtcbiAgICB2YXIgZGF0YSA9IHBkKHRoaXMpO1xuICAgIGRhdGEuc3RvcHBlZCA9IHRydWU7XG4gICAgZGF0YS5pbW1lZGlhdGVTdG9wcGVkID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgZGF0YS5ldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgZGF0YS5ldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZSBmbGFnIHRvIGJlIGJ1YmJsaW5nLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBidWJibGVzKCkge1xuICAgIHJldHVybiBCb29sZWFuKHBkKHRoaXMpLmV2ZW50LmJ1YmJsZXMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUgZmxhZyB0byBiZSBjYW5jZWxhYmxlLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBjYW5jZWxhYmxlKCkge1xuICAgIHJldHVybiBCb29sZWFuKHBkKHRoaXMpLmV2ZW50LmNhbmNlbGFibGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDYW5jZWwgdGhpcyBldmVudC5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24gcHJldmVudERlZmF1bHQoKSB7XG4gICAgc2V0Q2FuY2VsRmxhZyhwZCh0aGlzKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZSBmbGFnIHRvIGluZGljYXRlIGNhbmNlbGxhdGlvbiBzdGF0ZS5cbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgZGVmYXVsdFByZXZlbnRlZCgpIHtcbiAgICByZXR1cm4gcGQodGhpcykuY2FuY2VsZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZSBmbGFnIHRvIGJlIGNvbXBvc2VkLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBjb21wb3NlZCgpIHtcbiAgICByZXR1cm4gQm9vbGVhbihwZCh0aGlzKS5ldmVudC5jb21wb3NlZCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZSB1bml4IHRpbWUgb2YgdGhpcyBldmVudC5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB0aW1lU3RhbXAoKSB7XG4gICAgcmV0dXJuIHBkKHRoaXMpLnRpbWVTdGFtcDtcbiAgfSxcblxuICAvKipcbiAgICogVGhlIHRhcmdldCBvZiB0aGlzIGV2ZW50LlxuICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR9XG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBnZXQgc3JjRWxlbWVudCgpIHtcbiAgICByZXR1cm4gcGQodGhpcykuZXZlbnRUYXJnZXQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZSBmbGFnIHRvIHN0b3AgZXZlbnQgYnViYmxpbmcuXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgZ2V0IGNhbmNlbEJ1YmJsZSgpIHtcbiAgICByZXR1cm4gcGQodGhpcykuc3RvcHBlZDtcbiAgfSxcblxuICBzZXQgY2FuY2VsQnViYmxlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBkYXRhID0gcGQodGhpcyk7XG4gICAgZGF0YS5zdG9wcGVkID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgZGF0YS5ldmVudC5jYW5jZWxCdWJibGUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICBkYXRhLmV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUgZmxhZyB0byBpbmRpY2F0ZSBjYW5jZWxsYXRpb24gc3RhdGUuXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgZ2V0IHJldHVyblZhbHVlKCkge1xuICAgIHJldHVybiAhcGQodGhpcykuY2FuY2VsZWQ7XG4gIH0sXG5cbiAgc2V0IHJldHVyblZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgc2V0Q2FuY2VsRmxhZyhwZCh0aGlzKSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoaXMgZXZlbnQgb2JqZWN0LiBCdXQgZG8gbm90aGluZyB1bmRlciBldmVudCBkaXNwYXRjaGluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2J1YmJsZXM9ZmFsc2VdIFRoZSBmbGFnIHRvIGJlIHBvc3NpYmxlIHRvIGJ1YmJsZSB1cC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbY2FuY2VsYWJsZT1mYWxzZV0gVGhlIGZsYWcgdG8gYmUgcG9zc2libGUgdG8gY2FuY2VsLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgaW5pdEV2ZW50OiBmdW5jdGlvbiBpbml0RXZlbnQoKSB7Ly8gRG8gbm90aGluZy5cbiAgfVxufTsgLy8gYGNvbnN0cnVjdG9yYCBpcyBub3QgZW51bWVyYWJsZS5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50LnByb3RvdHlwZSwgXCJjb25zdHJ1Y3RvclwiLCB7XG4gIHZhbHVlOiBFdmVudCxcbiAgY29uZmlndXJhYmxlOiB0cnVlLFxuICB3cml0YWJsZTogdHJ1ZVxufSk7IC8vIEVuc3VyZSBgZXZlbnQgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnRgIGlzIGB0cnVlYC5cblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5FdmVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBPYmplY3Quc2V0UHJvdG90eXBlT2YoRXZlbnQucHJvdG90eXBlLCB3aW5kb3cuRXZlbnQucHJvdG90eXBlKTsgLy8gTWFrZSBhc3NvY2lhdGlvbiBmb3Igd3JhcHBlcnMuXG5cbiAgd3JhcHBlcnMuc2V0KHdpbmRvdy5FdmVudC5wcm90b3R5cGUsIEV2ZW50KTtcbn1cbi8qKlxuICogR2V0IHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIHJlZGlyZWN0IGEgZ2l2ZW4gcHJvcGVydHkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFByb3BlcnR5IG5hbWUgdG8gZGVmaW5lIHByb3BlcnR5IGRlc2NyaXB0b3IuXG4gKiBAcmV0dXJucyB7UHJvcGVydHlEZXNjcmlwdG9yfSBUaGUgcHJvcGVydHkgZGVzY3JpcHRvciB0byByZWRpcmVjdCB0aGUgcHJvcGVydHkuXG4gKiBAcHJpdmF0ZVxuICovXG5cblxuZnVuY3Rpb24gZGVmaW5lUmVkaXJlY3REZXNjcmlwdG9yKGtleSkge1xuICByZXR1cm4ge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHBkKHRoaXMpLmV2ZW50W2tleV07XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgcGQodGhpcykuZXZlbnRba2V5XSA9IHZhbHVlO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfTtcbn1cbi8qKlxuICogR2V0IHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIGNhbGwgYSBnaXZlbiBtZXRob2QgcHJvcGVydHkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFByb3BlcnR5IG5hbWUgdG8gZGVmaW5lIHByb3BlcnR5IGRlc2NyaXB0b3IuXG4gKiBAcmV0dXJucyB7UHJvcGVydHlEZXNjcmlwdG9yfSBUaGUgcHJvcGVydHkgZGVzY3JpcHRvciB0byBjYWxsIHRoZSBtZXRob2QgcHJvcGVydHkuXG4gKiBAcHJpdmF0ZVxuICovXG5cblxuZnVuY3Rpb24gZGVmaW5lQ2FsbERlc2NyaXB0b3Ioa2V5KSB7XG4gIHJldHVybiB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkge1xuICAgICAgdmFyIGV2ZW50ID0gcGQodGhpcykuZXZlbnQ7XG4gICAgICByZXR1cm4gZXZlbnRba2V5XS5hcHBseShldmVudCwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH07XG59XG4vKipcbiAqIERlZmluZSBuZXcgd3JhcHBlciBjbGFzcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IEJhc2VFdmVudCBUaGUgYmFzZSB3cmFwcGVyIGNsYXNzLlxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvIFRoZSBwcm90b3R5cGUgb2YgdGhlIG9yaWdpbmFsIGV2ZW50LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBUaGUgZGVmaW5lZCB3cmFwcGVyIGNsYXNzLlxuICogQHByaXZhdGVcbiAqL1xuXG5cbmZ1bmN0aW9uIGRlZmluZVdyYXBwZXIoQmFzZUV2ZW50LCBwcm90bykge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3RvKTtcblxuICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gQmFzZUV2ZW50O1xuICB9XG4gIC8qKiBDdXN0b21FdmVudCAqL1xuXG5cbiAgZnVuY3Rpb24gQ3VzdG9tRXZlbnQoZXZlbnRUYXJnZXQsIGV2ZW50KSB7XG4gICAgQmFzZUV2ZW50LmNhbGwodGhpcywgZXZlbnRUYXJnZXQsIGV2ZW50KTtcbiAgfVxuXG4gIEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQmFzZUV2ZW50LnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogQ3VzdG9tRXZlbnQsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7IC8vIERlZmluZSBhY2Nlc3NvcnMuXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG5cbiAgICBpZiAoIShrZXkgaW4gQmFzZUV2ZW50LnByb3RvdHlwZSkpIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90bywga2V5KTtcbiAgICAgIHZhciBpc0Z1bmMgPSB0eXBlb2YgZGVzY3JpcHRvci52YWx1ZSA9PT0gXCJmdW5jdGlvblwiO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEN1c3RvbUV2ZW50LnByb3RvdHlwZSwga2V5LCBpc0Z1bmMgPyBkZWZpbmVDYWxsRGVzY3JpcHRvcihrZXkpIDogZGVmaW5lUmVkaXJlY3REZXNjcmlwdG9yKGtleSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBDdXN0b21FdmVudDtcbn1cbi8qKlxuICogR2V0IHRoZSB3cmFwcGVyIGNsYXNzIG9mIGEgZ2l2ZW4gcHJvdG90eXBlLlxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvIFRoZSBwcm90b3R5cGUgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRvIGdldCBpdHMgd3JhcHBlci5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gVGhlIHdyYXBwZXIgY2xhc3MuXG4gKiBAcHJpdmF0ZVxuICovXG5cblxuZnVuY3Rpb24gZ2V0V3JhcHBlcihwcm90bykge1xuICBpZiAocHJvdG8gPT0gbnVsbCB8fCBwcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgIHJldHVybiBFdmVudDtcbiAgfVxuXG4gIHZhciB3cmFwcGVyID0gd3JhcHBlcnMuZ2V0KHByb3RvKTtcblxuICBpZiAod3JhcHBlciA9PSBudWxsKSB7XG4gICAgd3JhcHBlciA9IGRlZmluZVdyYXBwZXIoZ2V0V3JhcHBlcihPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pKSwgcHJvdG8pO1xuICAgIHdyYXBwZXJzLnNldChwcm90bywgd3JhcHBlcik7XG4gIH1cblxuICByZXR1cm4gd3JhcHBlcjtcbn1cbi8qKlxuICogV3JhcCBhIGdpdmVuIGV2ZW50IHRvIG1hbmFnZW1lbnQgYSBkaXNwYXRjaGluZy5cbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IGV2ZW50VGFyZ2V0IFRoZSBldmVudCB0YXJnZXQgb2YgdGhpcyBkaXNwYXRjaGluZy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBUaGUgZXZlbnQgdG8gd3JhcC5cbiAqIEByZXR1cm5zIHtFdmVudH0gVGhlIHdyYXBwZXIgaW5zdGFuY2UuXG4gKiBAcHJpdmF0ZVxuICovXG5cblxuZnVuY3Rpb24gd3JhcEV2ZW50KGV2ZW50VGFyZ2V0LCBldmVudCkge1xuICB2YXIgV3JhcHBlciA9IGdldFdyYXBwZXIoT2JqZWN0LmdldFByb3RvdHlwZU9mKGV2ZW50KSk7XG4gIHJldHVybiBuZXcgV3JhcHBlcihldmVudFRhcmdldCwgZXZlbnQpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGltbWVkaWF0ZVN0b3BwZWQgZmxhZyBvZiBhIGdpdmVuIGV2ZW50LlxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGdldC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUaGUgZmxhZyB0byBzdG9wIHByb3BhZ2F0aW9uIGltbWVkaWF0ZWx5LlxuICogQHByaXZhdGVcbiAqL1xuXG5cbmZ1bmN0aW9uIGlzU3RvcHBlZChldmVudCkge1xuICByZXR1cm4gcGQoZXZlbnQpLmltbWVkaWF0ZVN0b3BwZWQ7XG59XG4vKipcbiAqIFNldCB0aGUgY3VycmVudCBldmVudCBwaGFzZSBvZiBhIGdpdmVuIGV2ZW50LlxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIHNldCBjdXJyZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBldmVudFBoYXNlIE5ldyBldmVudCBwaGFzZS5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuXG5cbmZ1bmN0aW9uIHNldEV2ZW50UGhhc2UoZXZlbnQsIGV2ZW50UGhhc2UpIHtcbiAgcGQoZXZlbnQpLmV2ZW50UGhhc2UgPSBldmVudFBoYXNlO1xufVxuLyoqXG4gKiBTZXQgdGhlIGN1cnJlbnQgdGFyZ2V0IG9mIGEgZ2l2ZW4gZXZlbnQuXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gc2V0IGN1cnJlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtFdmVudFRhcmdldHxudWxsfSBjdXJyZW50VGFyZ2V0IE5ldyBjdXJyZW50IHRhcmdldC5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuXG5cbmZ1bmN0aW9uIHNldEN1cnJlbnRUYXJnZXQoZXZlbnQsIGN1cnJlbnRUYXJnZXQpIHtcbiAgcGQoZXZlbnQpLmN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0O1xufVxuLyoqXG4gKiBTZXQgYSBwYXNzaXZlIGxpc3RlbmVyIG9mIGEgZ2l2ZW4gZXZlbnQuXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gc2V0IGN1cnJlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtGdW5jdGlvbnxudWxsfSBwYXNzaXZlTGlzdGVuZXIgTmV3IHBhc3NpdmUgbGlzdGVuZXIuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5mdW5jdGlvbiBzZXRQYXNzaXZlTGlzdGVuZXIoZXZlbnQsIHBhc3NpdmVMaXN0ZW5lcikge1xuICBwZChldmVudCkucGFzc2l2ZUxpc3RlbmVyID0gcGFzc2l2ZUxpc3RlbmVyO1xufVxuLyoqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBMaXN0ZW5lck5vZGVcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGxpc3RlbmVyXG4gKiBAcHJvcGVydHkgezF8MnwzfSBsaXN0ZW5lclR5cGVcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcGFzc2l2ZVxuICogQHByb3BlcnR5IHtib29sZWFufSBvbmNlXG4gKiBAcHJvcGVydHkge0xpc3RlbmVyTm9kZXxudWxsfSBuZXh0XG4gKiBAcHJpdmF0ZVxuICovXG5cbi8qKlxuICogQHR5cGUge1dlYWtNYXA8b2JqZWN0LCBNYXA8c3RyaW5nLCBMaXN0ZW5lck5vZGU+Pn1cbiAqIEBwcml2YXRlXG4gKi9cblxuXG52YXIgbGlzdGVuZXJzTWFwID0gbmV3IFdlYWtNYXAoKTsgLy8gTGlzdGVuZXIgdHlwZXNcblxudmFyIENBUFRVUkUgPSAxO1xudmFyIEJVQkJMRSA9IDI7XG52YXIgQVRUUklCVVRFID0gMztcbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIHZhbHVlIGlzIGFuIG9iamVjdCBvciBub3QuXG4gKiBAcGFyYW0ge2FueX0geCBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2YWx1ZSBpcyBhbiBvYmplY3QuXG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3QoeCkge1xuICByZXR1cm4geCAhPT0gbnVsbCAmJiAoMCwgX3R5cGVvZjIuZGVmYXVsdCkoeCkgPT09IFwib2JqZWN0XCI7IC8vZXNsaW50LWRpc2FibGUtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxufVxuLyoqXG4gKiBHZXQgbGlzdGVuZXJzLlxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gZXZlbnRUYXJnZXQgVGhlIGV2ZW50IHRhcmdldCB0byBnZXQuXG4gKiBAcmV0dXJucyB7TWFwPHN0cmluZywgTGlzdGVuZXJOb2RlPn0gVGhlIGxpc3RlbmVycy5cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5mdW5jdGlvbiBnZXRMaXN0ZW5lcnMoZXZlbnRUYXJnZXQpIHtcbiAgdmFyIGxpc3RlbmVycyA9IGxpc3RlbmVyc01hcC5nZXQoZXZlbnRUYXJnZXQpO1xuXG4gIGlmIChsaXN0ZW5lcnMgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCIndGhpcycgaXMgZXhwZWN0ZWQgYW4gRXZlbnRUYXJnZXQgb2JqZWN0LCBidXQgZ290IGFub3RoZXIgdmFsdWUuXCIpO1xuICB9XG5cbiAgcmV0dXJuIGxpc3RlbmVycztcbn1cbi8qKlxuICogR2V0IHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIGZvciB0aGUgZXZlbnQgYXR0cmlidXRlIG9mIGEgZ2l2ZW4gZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGdldCBwcm9wZXJ0eSBkZXNjcmlwdG9yLlxuICogQHJldHVybnMge1Byb3BlcnR5RGVzY3JpcHRvcn0gVGhlIHByb3BlcnR5IGRlc2NyaXB0b3IuXG4gKiBAcHJpdmF0ZVxuICovXG5cblxuZnVuY3Rpb24gZGVmaW5lRXZlbnRBdHRyaWJ1dGVEZXNjcmlwdG9yKGV2ZW50TmFtZSkge1xuICByZXR1cm4ge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIGxpc3RlbmVycyA9IGdldExpc3RlbmVycyh0aGlzKTtcbiAgICAgIHZhciBub2RlID0gbGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xuXG4gICAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChub2RlLmxpc3RlbmVyVHlwZSA9PT0gQVRUUklCVVRFKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGUubGlzdGVuZXI7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KGxpc3RlbmVyKSB7XG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSBcImZ1bmN0aW9uXCIgJiYgIWlzT2JqZWN0KGxpc3RlbmVyKSkge1xuICAgICAgICBsaXN0ZW5lciA9IG51bGw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIH1cblxuICAgICAgdmFyIGxpc3RlbmVycyA9IGdldExpc3RlbmVycyh0aGlzKTsgLy8gVHJhdmVyc2UgdG8gdGhlIHRhaWwgd2hpbGUgcmVtb3Zpbmcgb2xkIHZhbHVlLlxuXG4gICAgICB2YXIgcHJldiA9IG51bGw7XG4gICAgICB2YXIgbm9kZSA9IGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKTtcblxuICAgICAgd2hpbGUgKG5vZGUgIT0gbnVsbCkge1xuICAgICAgICBpZiAobm9kZS5saXN0ZW5lclR5cGUgPT09IEFUVFJJQlVURSkge1xuICAgICAgICAgIC8vIFJlbW92ZSBvbGQgdmFsdWUuXG4gICAgICAgICAgaWYgKHByZXYgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHByZXYubmV4dCA9IG5vZGUubmV4dDtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUubmV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGlzdGVuZXJzLnNldChldmVudE5hbWUsIG5vZGUubmV4dCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUoZXZlbnROYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJldiA9IG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xuICAgICAgfSAvLyBBZGQgbmV3IHZhbHVlLlxuXG5cbiAgICAgIGlmIChsaXN0ZW5lciAhPT0gbnVsbCkge1xuICAgICAgICB2YXIgbmV3Tm9kZSA9IHtcbiAgICAgICAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXG4gICAgICAgICAgbGlzdGVuZXJUeXBlOiBBVFRSSUJVVEUsXG4gICAgICAgICAgcGFzc2l2ZTogZmFsc2UsXG4gICAgICAgICAgb25jZTogZmFsc2UsXG4gICAgICAgICAgbmV4dDogbnVsbFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChwcmV2ID09PSBudWxsKSB7XG4gICAgICAgICAgbGlzdGVuZXJzLnNldChldmVudE5hbWUsIG5ld05vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByZXYubmV4dCA9IG5ld05vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH07XG59XG4vKipcbiAqIERlZmluZSBhbiBldmVudCBhdHRyaWJ1dGUgKGUuZy4gYGV2ZW50VGFyZ2V0Lm9uY2xpY2tgKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFRhcmdldFByb3RvdHlwZSBUaGUgZXZlbnQgdGFyZ2V0IHByb3RvdHlwZSB0byBkZWZpbmUgYW4gZXZlbnQgYXR0cmJpdGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGRlZmluZS5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5cblxuZnVuY3Rpb24gZGVmaW5lRXZlbnRBdHRyaWJ1dGUoZXZlbnRUYXJnZXRQcm90b3R5cGUsIGV2ZW50TmFtZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnRUYXJnZXRQcm90b3R5cGUsIFwib25cIi5jb25jYXQoZXZlbnROYW1lKSwgZGVmaW5lRXZlbnRBdHRyaWJ1dGVEZXNjcmlwdG9yKGV2ZW50TmFtZSkpO1xufVxuLyoqXG4gKiBEZWZpbmUgYSBjdXN0b20gRXZlbnRUYXJnZXQgd2l0aCBldmVudCBhdHRyaWJ1dGVzLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gZXZlbnROYW1lcyBFdmVudCBuYW1lcyBmb3IgZXZlbnQgYXR0cmlidXRlcy5cbiAqIEByZXR1cm5zIHtFdmVudFRhcmdldH0gVGhlIGN1c3RvbSBFdmVudFRhcmdldC5cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FdmVudFRhcmdldChldmVudE5hbWVzKSB7XG4gIC8qKiBDdXN0b21FdmVudFRhcmdldCAqL1xuICBmdW5jdGlvbiBDdXN0b21FdmVudFRhcmdldCgpIHtcbiAgICBFdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuICB9XG5cbiAgQ3VzdG9tRXZlbnRUYXJnZXQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudFRhcmdldC5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IEN1c3RvbUV2ZW50VGFyZ2V0LFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnROYW1lcy5sZW5ndGg7ICsraSkge1xuICAgIGRlZmluZUV2ZW50QXR0cmlidXRlKEN1c3RvbUV2ZW50VGFyZ2V0LnByb3RvdHlwZSwgZXZlbnROYW1lc1tpXSk7XG4gIH1cblxuICByZXR1cm4gQ3VzdG9tRXZlbnRUYXJnZXQ7XG59XG4vKipcbiAqIEV2ZW50VGFyZ2V0LlxuICpcbiAqIC0gVGhpcyBpcyBjb25zdHJ1Y3RvciBpZiBubyBhcmd1bWVudHMuXG4gKiAtIFRoaXMgaXMgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgQ3VzdG9tRXZlbnRUYXJnZXQgY29uc3RydWN0b3IgaWYgdGhlcmUgYXJlIGFyZ3VtZW50cy5cbiAqXG4gKiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgICAgY2xhc3MgQSBleHRlbmRzIEV2ZW50VGFyZ2V0IHt9XG4gKiAgICAgY2xhc3MgQiBleHRlbmRzIEV2ZW50VGFyZ2V0KFwibWVzc2FnZVwiKSB7fVxuICogICAgIGNsYXNzIEMgZXh0ZW5kcyBFdmVudFRhcmdldChcIm1lc3NhZ2VcIiwgXCJlcnJvclwiKSB7fVxuICogICAgIGNsYXNzIEQgZXh0ZW5kcyBFdmVudFRhcmdldChbXCJtZXNzYWdlXCIsIFwiZXJyb3JcIl0pIHt9XG4gKi9cblxuXG5mdW5jdGlvbiBFdmVudFRhcmdldCgpIHtcbiAgLyplc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuICBpZiAodGhpcyBpbnN0YW5jZW9mIEV2ZW50VGFyZ2V0KSB7XG4gICAgbGlzdGVuZXJzTWFwLnNldCh0aGlzLCBuZXcgTWFwKCkpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgIHJldHVybiBkZWZpbmVDdXN0b21FdmVudFRhcmdldChhcmd1bWVudHNbMF0pO1xuICB9XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIHR5cGVzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHR5cGVzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBkZWZpbmVDdXN0b21FdmVudFRhcmdldCh0eXBlcyk7XG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAvKmVzbGludC1lbmFibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbn0gLy8gU2hvdWxkIGJlIGVudW1lcmFibGUsIGJ1dCBjbGFzcyBtZXRob2RzIGFyZSBub3QgZW51bWVyYWJsZS5cblxuXG5FdmVudFRhcmdldC5wcm90b3R5cGUgPSB7XG4gIC8qKlxuICAgKiBBZGQgYSBnaXZlbiBsaXN0ZW5lciB0byB0aGlzIGV2ZW50IHRhcmdldC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZSB0byBhZGQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciB0byBhZGQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnx7Y2FwdHVyZT86Ym9vbGVhbixwYXNzaXZlPzpib29sZWFuLG9uY2U/OmJvb2xlYW59fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgZm9yIHRoaXMgbGlzdGVuZXIuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG4gICAgaWYgKGxpc3RlbmVyID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSBcImZ1bmN0aW9uXCIgJiYgIWlzT2JqZWN0KGxpc3RlbmVyKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIidsaXN0ZW5lcicgc2hvdWxkIGJlIGEgZnVuY3Rpb24gb3IgYW4gb2JqZWN0LlwiKTtcbiAgICB9XG5cbiAgICB2YXIgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKHRoaXMpO1xuICAgIHZhciBvcHRpb25zSXNPYmogPSBpc09iamVjdChvcHRpb25zKTtcbiAgICB2YXIgY2FwdHVyZSA9IG9wdGlvbnNJc09iaiA/IEJvb2xlYW4ob3B0aW9ucy5jYXB0dXJlKSA6IEJvb2xlYW4ob3B0aW9ucyk7XG4gICAgdmFyIGxpc3RlbmVyVHlwZSA9IGNhcHR1cmUgPyBDQVBUVVJFIDogQlVCQkxFO1xuICAgIHZhciBuZXdOb2RlID0ge1xuICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgICAgbGlzdGVuZXJUeXBlOiBsaXN0ZW5lclR5cGUsXG4gICAgICBwYXNzaXZlOiBvcHRpb25zSXNPYmogJiYgQm9vbGVhbihvcHRpb25zLnBhc3NpdmUpLFxuICAgICAgb25jZTogb3B0aW9uc0lzT2JqICYmIEJvb2xlYW4ob3B0aW9ucy5vbmNlKSxcbiAgICAgIG5leHQ6IG51bGxcbiAgICB9OyAvLyBTZXQgaXQgYXMgdGhlIGZpcnN0IG5vZGUgaWYgdGhlIGZpcnN0IG5vZGUgaXMgbnVsbC5cblxuICAgIHZhciBub2RlID0gbGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xuXG4gICAgaWYgKG5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgbGlzdGVuZXJzLnNldChldmVudE5hbWUsIG5ld05vZGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gVHJhdmVyc2UgdG8gdGhlIHRhaWwgd2hpbGUgY2hlY2tpbmcgZHVwbGljYXRpb24uLlxuXG5cbiAgICB2YXIgcHJldiA9IG51bGw7XG5cbiAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XG4gICAgICBpZiAobm9kZS5saXN0ZW5lciA9PT0gbGlzdGVuZXIgJiYgbm9kZS5saXN0ZW5lclR5cGUgPT09IGxpc3RlbmVyVHlwZSkge1xuICAgICAgICAvLyBTaG91bGQgaWdub3JlIGR1cGxpY2F0aW9uLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHByZXYgPSBub2RlO1xuICAgICAgbm9kZSA9IG5vZGUubmV4dDtcbiAgICB9IC8vIEFkZCBpdC5cblxuXG4gICAgcHJldi5uZXh0ID0gbmV3Tm9kZTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGEgZ2l2ZW4gbGlzdGVuZXIgZnJvbSB0aGlzIGV2ZW50IHRhcmdldC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZSB0byByZW1vdmUuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciB0byByZW1vdmUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnx7Y2FwdHVyZT86Ym9vbGVhbixwYXNzaXZlPzpib29sZWFuLG9uY2U/OmJvb2xlYW59fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgZm9yIHRoaXMgbGlzdGVuZXIuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG4gICAgaWYgKGxpc3RlbmVyID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKHRoaXMpO1xuICAgIHZhciBjYXB0dXJlID0gaXNPYmplY3Qob3B0aW9ucykgPyBCb29sZWFuKG9wdGlvbnMuY2FwdHVyZSkgOiBCb29sZWFuKG9wdGlvbnMpO1xuICAgIHZhciBsaXN0ZW5lclR5cGUgPSBjYXB0dXJlID8gQ0FQVFVSRSA6IEJVQkJMRTtcbiAgICB2YXIgcHJldiA9IG51bGw7XG4gICAgdmFyIG5vZGUgPSBsaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSk7XG5cbiAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XG4gICAgICBpZiAobm9kZS5saXN0ZW5lciA9PT0gbGlzdGVuZXIgJiYgbm9kZS5saXN0ZW5lclR5cGUgPT09IGxpc3RlbmVyVHlwZSkge1xuICAgICAgICBpZiAocHJldiAhPT0gbnVsbCkge1xuICAgICAgICAgIHByZXYubmV4dCA9IG5vZGUubmV4dDtcbiAgICAgICAgfSBlbHNlIGlmIChub2RlLm5leHQgIT09IG51bGwpIHtcbiAgICAgICAgICBsaXN0ZW5lcnMuc2V0KGV2ZW50TmFtZSwgbm9kZS5uZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGV2ZW50TmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHByZXYgPSBub2RlO1xuICAgICAgbm9kZSA9IG5vZGUubmV4dDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoIGEgZ2l2ZW4gZXZlbnQuXG4gICAqIEBwYXJhbSB7RXZlbnR8e3R5cGU6c3RyaW5nfX0gZXZlbnQgVGhlIGV2ZW50IHRvIGRpc3BhdGNoLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gYGZhbHNlYCBpZiBjYW5jZWxlZC5cbiAgICovXG4gIGRpc3BhdGNoRXZlbnQ6IGZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQgPT0gbnVsbCB8fCB0eXBlb2YgZXZlbnQudHlwZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJldmVudC50eXBlXCIgc2hvdWxkIGJlIGEgc3RyaW5nLicpO1xuICAgIH0gLy8gSWYgbGlzdGVuZXJzIGFyZW4ndCByZWdpc3RlcmVkLCB0ZXJtaW5hdGUuXG5cblxuICAgIHZhciBsaXN0ZW5lcnMgPSBnZXRMaXN0ZW5lcnModGhpcyk7XG4gICAgdmFyIGV2ZW50TmFtZSA9IGV2ZW50LnR5cGU7XG4gICAgdmFyIG5vZGUgPSBsaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSk7XG5cbiAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IC8vIFNpbmNlIHdlIGNhbm5vdCByZXdyaXRlIHNldmVyYWwgcHJvcGVydGllcywgc28gd3JhcCBvYmplY3QuXG5cblxuICAgIHZhciB3cmFwcGVkRXZlbnQgPSB3cmFwRXZlbnQodGhpcywgZXZlbnQpOyAvLyBUaGlzIGRvZXNuJ3QgcHJvY2VzcyBjYXB0dXJpbmcgcGhhc2UgYW5kIGJ1YmJsaW5nIHBoYXNlLlxuICAgIC8vIFRoaXMgaXNuJ3QgcGFydGljaXBhdGluZyBpbiBhIHRyZWUuXG5cbiAgICB2YXIgcHJldiA9IG51bGw7XG5cbiAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XG4gICAgICAvLyBSZW1vdmUgdGhpcyBsaXN0ZW5lciBpZiBpdCdzIG9uY2VcbiAgICAgIGlmIChub2RlLm9uY2UpIHtcbiAgICAgICAgaWYgKHByZXYgIT09IG51bGwpIHtcbiAgICAgICAgICBwcmV2Lm5leHQgPSBub2RlLm5leHQ7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5uZXh0ICE9PSBudWxsKSB7XG4gICAgICAgICAgbGlzdGVuZXJzLnNldChldmVudE5hbWUsIG5vZGUubmV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGlzdGVuZXJzLmRlbGV0ZShldmVudE5hbWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmV2ID0gbm9kZTtcbiAgICAgIH0gLy8gQ2FsbCB0aGlzIGxpc3RlbmVyXG5cblxuICAgICAgc2V0UGFzc2l2ZUxpc3RlbmVyKHdyYXBwZWRFdmVudCwgbm9kZS5wYXNzaXZlID8gbm9kZS5saXN0ZW5lciA6IG51bGwpO1xuXG4gICAgICBpZiAodHlwZW9mIG5vZGUubGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG5vZGUubGlzdGVuZXIuY2FsbCh0aGlzLCB3cmFwcGVkRXZlbnQpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGNvbnNvbGUuZXJyb3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChub2RlLmxpc3RlbmVyVHlwZSAhPT0gQVRUUklCVVRFICYmIHR5cGVvZiBub2RlLmxpc3RlbmVyLmhhbmRsZUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgbm9kZS5saXN0ZW5lci5oYW5kbGVFdmVudCh3cmFwcGVkRXZlbnQpO1xuICAgICAgfSAvLyBCcmVhayBpZiBgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uYCB3YXMgY2FsbGVkLlxuXG5cbiAgICAgIGlmIChpc1N0b3BwZWQod3JhcHBlZEV2ZW50KSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgbm9kZSA9IG5vZGUubmV4dDtcbiAgICB9XG5cbiAgICBzZXRQYXNzaXZlTGlzdGVuZXIod3JhcHBlZEV2ZW50LCBudWxsKTtcbiAgICBzZXRFdmVudFBoYXNlKHdyYXBwZWRFdmVudCwgMCk7XG4gICAgc2V0Q3VycmVudFRhcmdldCh3cmFwcGVkRXZlbnQsIG51bGwpO1xuICAgIHJldHVybiAhd3JhcHBlZEV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XG4gIH1cbn07IC8vIGBjb25zdHJ1Y3RvcmAgaXMgbm90IGVudW1lcmFibGUuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudFRhcmdldC5wcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwge1xuICB2YWx1ZTogRXZlbnRUYXJnZXQsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgd3JpdGFibGU6IHRydWVcbn0pOyAvLyBFbnN1cmUgYGV2ZW50VGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkV2ZW50VGFyZ2V0YCBpcyBgdHJ1ZWAuXG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB3aW5kb3cuRXZlbnRUYXJnZXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgT2JqZWN0LnNldFByb3RvdHlwZU9mKEV2ZW50VGFyZ2V0LnByb3RvdHlwZSwgd2luZG93LkV2ZW50VGFyZ2V0LnByb3RvdHlwZSk7XG59XG5cbmV4cG9ydHMuZGVmaW5lRXZlbnRBdHRyaWJ1dGUgPSBkZWZpbmVFdmVudEF0dHJpYnV0ZTtcbmV4cG9ydHMuRXZlbnRUYXJnZXQgPSBFdmVudFRhcmdldDtcbmV4cG9ydHMuZGVmYXVsdCA9IEV2ZW50VGFyZ2V0O1xubW9kdWxlLmV4cG9ydHMgPSBFdmVudFRhcmdldDtcbm1vZHVsZS5leHBvcnRzLkV2ZW50VGFyZ2V0ID0gbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gRXZlbnRUYXJnZXQ7XG5tb2R1bGUuZXhwb3J0cy5kZWZpbmVFdmVudEF0dHJpYnV0ZSA9IGRlZmluZUV2ZW50QXR0cmlidXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnQtdGFyZ2V0LXNoaW0uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4vc3JjL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIik7XG52YXIgRXhwb3J0c18yID0gcmVxdWlyZShcIi4vc3JjL2NvbW1vbi9FeHBvcnRzXCIpO1xuLy8gQ29tbW9uLlN0b3JhZ2UuU2V0TG9jYWxTdG9yYWdlKG5ldyBDb21tb24uQnJvd3Nlci5Mb2NhbFN0b3JhZ2UoKSk7XG4vLyBDb21tb24uU3RvcmFnZS5TZXRTZXNzaW9uU3RvcmFnZShuZXcgQ29tbW9uLkJyb3dzZXIuU2Vzc2lvblN0b3JhZ2UoKSk7XG5FeHBvcnRzXzIuRXZlbnRzLmluc3RhbmNlLmF0dGFjaExpc3RlbmVyKG5ldyBFeHBvcnRzXzEuQ29uc29sZUxvZ2dpbmdMaXN0ZW5lcigpKTtcbi8vIFNwZWVjaCBTREsgQVBJXG5fX2V4cG9ydChyZXF1aXJlKFwiLi9zcmMvc2RrL0V4cG9ydHNcIikpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWNyb3NvZnQuY29nbml0aXZlc2VydmljZXMuc3BlZWNoLnNkay5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9FeHBvcnRzXCIpO1xudmFyIENvbnNvbGVMb2dnaW5nTGlzdGVuZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29uc29sZUxvZ2dpbmdMaXN0ZW5lcihsb2dMZXZlbEZpbHRlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAobG9nTGV2ZWxGaWx0ZXIgPT09IHZvaWQgMCkgeyBsb2dMZXZlbEZpbHRlciA9IEV4cG9ydHNfMS5FdmVudFR5cGUuV2FybmluZzsgfVxuICAgICAgICB0aGlzLm9uRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5ldmVudFR5cGUgPj0gX3RoaXMucHJpdkxvZ0xldmVsRmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvZyA9IF90aGlzLnRvU3RyaW5nKGV2ZW50KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEV4cG9ydHNfMS5FdmVudFR5cGUuRGVidWc6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1Zyhsb2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRXhwb3J0c18xLkV2ZW50VHlwZS5JbmZvOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhsb2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRXhwb3J0c18xLkV2ZW50VHlwZS5XYXJuaW5nOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihsb2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRXhwb3J0c18xLkV2ZW50VHlwZS5FcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGxvZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhsb2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgbG9nRnJhZ21lbnRzID0gW1xuICAgICAgICAgICAgICAgIFwiXCIgKyBldmVudC5FdmVudFRpbWUsXG4gICAgICAgICAgICAgICAgXCJcIiArIGV2ZW50Lk5hbWUsXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wICYmIGV2ZW50Lmhhc093blByb3BlcnR5KHByb3ApICYmXG4gICAgICAgICAgICAgICAgICAgIHByb3AgIT09IFwiZXZlbnRUaW1lXCIgJiYgcHJvcCAhPT0gXCJldmVudFR5cGVcIiAmJlxuICAgICAgICAgICAgICAgICAgICBwcm9wICE9PSBcImV2ZW50SWRcIiAmJiBwcm9wICE9PSBcIm5hbWVcIiAmJlxuICAgICAgICAgICAgICAgICAgICBwcm9wICE9PSBcImNvbnN0cnVjdG9yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZXZlbnRbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZVRvTG9nID0gXCI8TlVMTD5cIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgKHZhbHVlKSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlVG9Mb2cgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb0xvZyA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb2dGcmFnbWVudHMucHVzaChwcm9wICsgXCI6IFwiICsgdmFsdWVUb0xvZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxvZ0ZyYWdtZW50cy5qb2luKFwiIHwgXCIpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZMb2dMZXZlbEZpbHRlciA9IGxvZ0xldmVsRmlsdGVyO1xuICAgIH1cbiAgICByZXR1cm4gQ29uc29sZUxvZ2dpbmdMaXN0ZW5lcjtcbn0oKSk7XG5leHBvcnRzLkNvbnNvbGVMb2dnaW5nTGlzdGVuZXIgPSBDb25zb2xlTG9nZ2luZ0xpc3RlbmVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25zb2xlTG9nZ2luZ0xpc3RlbmVyLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG59XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9Db25zb2xlTG9nZ2luZ0xpc3RlbmVyXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL01pY0F1ZGlvU291cmNlXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0ZpbGVBdWRpb1NvdXJjZVwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9QQ01SZWNvcmRlclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9XZWJzb2NrZXRDb25uZWN0aW9uXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1dlYnNvY2tldE1lc3NhZ2VBZGFwdGVyXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1JlcGxheWFibGVBdWRpb05vZGVcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vUHJveHlJbmZvXCIpKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhwb3J0cy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgQXVkaW9TdHJlYW1Gb3JtYXRfMSA9IHJlcXVpcmUoXCIuLi8uLi9zcmMvc2RrL0F1ZGlvL0F1ZGlvU3RyZWFtRm9ybWF0XCIpO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIik7XG52YXIgRXhwb3J0c18yID0gcmVxdWlyZShcIi4uL2NvbW1vbi9FeHBvcnRzXCIpO1xudmFyIEZpbGVBdWRpb1NvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBGaWxlQXVkaW9Tb3VyY2UoZmlsZSwgYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnByaXZTdHJlYW1zID0ge307XG4gICAgICAgIHRoaXMudHVybk9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBGaWxlUmVhZGVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yTXNnID0gXCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgRmlsZVJlYWRlci5cIjtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9Tb3VyY2VFcnJvckV2ZW50KGVycm9yTXNnLCBcIlwiKSk7IC8vIGluaXRpYWxpemF0aW9uIGVycm9yIC0gbm8gc3RyZWFtaWQgYXQgdGhpcyBwb2ludFxuICAgICAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzIuUHJvbWlzZUhlbHBlci5mcm9tRXJyb3IoZXJyb3JNc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMucHJpdkZpbGUubmFtZS5sYXN0SW5kZXhPZihcIi53YXZcIikgIT09IF90aGlzLnByaXZGaWxlLm5hbWUubGVuZ3RoIC0gNCkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvck1zZyA9IF90aGlzLnByaXZGaWxlLm5hbWUgKyBcIiBpcyBub3Qgc3VwcG9ydGVkLiBPbmx5IFdBVkUgZmlsZXMgYXJlIGFsbG93ZWQgYXQgdGhlIG1vbWVudC5cIjtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9Tb3VyY2VFcnJvckV2ZW50KGVycm9yTXNnLCBcIlwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEV4cG9ydHNfMi5Qcm9taXNlSGVscGVyLmZyb21FcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChfdGhpcy5wcml2RmlsZS5zaXplID4gRmlsZUF1ZGlvU291cmNlLk1BWF9TSVpFKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yTXNnID0gX3RoaXMucHJpdkZpbGUubmFtZSArIFwiIGV4Y2VlZHMgdGhlIG1heGltdW0gYWxsb3dlZCBmaWxlIHNpemUgKFwiICsgRmlsZUF1ZGlvU291cmNlLk1BWF9TSVpFICsgXCIpLlwiO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMi5BdWRpb1NvdXJjZUVycm9yRXZlbnQoZXJyb3JNc2csIFwiXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbUVycm9yKGVycm9yTXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMi5BdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50KF90aGlzLnByaXZJZCkpOyAvLyBubyBzdHJlYW0gaWRcbiAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMi5BdWRpb1NvdXJjZVJlYWR5RXZlbnQoX3RoaXMucHJpdklkKSk7XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2SWQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYXR0YWNoID0gZnVuY3Rpb24gKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQoX3RoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVwbG9hZChhdWRpb05vZGVJZCkub25TdWNjZXNzQ29udGludWVXaXRoKGZ1bmN0aW9uIChzdHJlYW1SZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudChfdGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1SZWFkZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudChfdGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGlkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXVkaW9Ob2RlSWQ7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJlYW1SZWFkZXIucmVhZCgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZXRhY2ggPSBmdW5jdGlvbiAoYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgICAgIGlmIChhdWRpb05vZGVJZCAmJiBfdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF0pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMi5BdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KF90aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50dXJuT2ZmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgc3RyZWFtSWQgaW4gX3RoaXMucHJpdlN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmVhbSA9IF90aGlzLnByaXZTdHJlYW1zW3N0cmVhbUlkXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmVhbSAmJiAhc3RyZWFtLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMi5BdWRpb1NvdXJjZU9mZkV2ZW50KF90aGlzLnByaXZJZCkpOyAvLyBubyBzdHJlYW0gbm93XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGxvYWQgPSBmdW5jdGlvbiAoYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50dXJuT24oKVxuICAgICAgICAgICAgICAgIC5vblN1Y2Nlc3NDb250aW51ZVdpdGgoZnVuY3Rpb24gKF8pIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RyZWFtID0gbmV3IEV4cG9ydHNfMi5TdHJlYW0oYXVkaW9Ob2RlSWQpO1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZTdHJlYW1zW2F1ZGlvTm9kZUlkXSA9IHN0cmVhbTtcbiAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRPZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBlbmRPZmZzZXQgPSBGaWxlQXVkaW9Tb3VyY2UuQ0hVTktfU0laRTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvY2Vzc05leHRDaHVuayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIG91dHB1dCBzdHJlYW0gd2FzIGNsb3NlZCAoc29tZWJvZHkgY2FsbGVkIFR1cm5PZmYpLiBXZSdyZSBkb25lIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLndyaXRlU3RyZWFtQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiByZWFkZXIucmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZE9mZnNldCA8IF90aGlzLnByaXZGaWxlLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0T2Zmc2V0ID0gZW5kT2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kT2Zmc2V0ID0gTWF0aC5taW4oZW5kT2Zmc2V0ICsgRmlsZUF1ZGlvU291cmNlLkNIVU5LX1NJWkUsIF90aGlzLnByaXZGaWxlLnNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNodW5rXzEgPSBfdGhpcy5wcml2RmlsZS5zbGljZShzdGFydE9mZnNldCwgZW5kT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihjaHVua18xKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3ZlIHdyaXR0ZW4gdGhlIGVudGlyZSBmaWxlIHRvIHRoZSBvdXRwdXQgc3RyZWFtLCBjYW4gY2xvc2UgaXQgbm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBwcm9jZXNzTmV4dENodW5rO1xuICAgICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvck1zZyA9IFwiRXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyAnXCIgKyBfdGhpcy5wcml2RmlsZS5uYW1lICsgXCInLiBcIiArIGV2ZW50O1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudChfdGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkLCBlcnJvck1zZykpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGNodW5rID0gX3RoaXMucHJpdkZpbGUuc2xpY2Uoc3RhcnRPZmZzZXQsIGVuZE9mZnNldCk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGNodW5rKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25FdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMucHJpdkV2ZW50cy5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIEV4cG9ydHNfMi5FdmVudHMuaW5zdGFuY2Uub25FdmVudChldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdklkID0gYXVkaW9Tb3VyY2VJZCA/IGF1ZGlvU291cmNlSWQgOiBFeHBvcnRzXzIuY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZFdmVudHMgPSBuZXcgRXhwb3J0c18yLkV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdkZpbGUgPSBmaWxlO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlsZUF1ZGlvU291cmNlLnByb3RvdHlwZSwgXCJmb3JtYXRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBGaWxlQXVkaW9Tb3VyY2UuRklMRUZPUk1BVDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbGVBdWRpb1NvdXJjZS5wcm90b3R5cGUsIFwiZXZlbnRzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlsZUF1ZGlvU291cmNlLnByb3RvdHlwZSwgXCJkZXZpY2VJbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh7XG4gICAgICAgICAgICAgICAgYml0c3BlcnNhbXBsZTogRmlsZUF1ZGlvU291cmNlLkZJTEVGT1JNQVQuYml0c1BlclNhbXBsZSxcbiAgICAgICAgICAgICAgICBjaGFubmVsY291bnQ6IEZpbGVBdWRpb1NvdXJjZS5GSUxFRk9STUFULmNoYW5uZWxzLFxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpdml0eTogRXhwb3J0c18xLmNvbm5lY3Rpdml0eS5Vbmtub3duLFxuICAgICAgICAgICAgICAgIG1hbnVmYWN0dXJlcjogXCJTcGVlY2ggU0RLXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiRmlsZVwiLFxuICAgICAgICAgICAgICAgIHNhbXBsZXJhdGU6IEZpbGVBdWRpb1NvdXJjZS5GSUxFRk9STUFULnNhbXBsZXNQZXJTZWMsXG4gICAgICAgICAgICAgICAgdHlwZTogRXhwb3J0c18xLnR5cGUuRmlsZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvLyBSZWNvbW1lbmRlZCBzYW1wbGUgcmF0ZSAoYnl0ZXMvc2Vjb25kKS5cbiAgICBGaWxlQXVkaW9Tb3VyY2UuU0FNUExFX1JBVEUgPSAxNjAwMCAqIDI7IC8vIDE2IGtIeiAqIDE2IGJpdHNcbiAgICAvLyBXZSBzaG91bGQgc3RyZWFtIGF1ZGlvIGF0IG5vIGZhc3RlciB0aGFuIDJ4IHJlYWwtdGltZSAoaS5lLiwgc2VuZCBmaXZlIGNodW5rc1xuICAgIC8vIHBlciBzZWNvbmQsIHdpdGggdGhlIGNodW5rIHNpemUgPT0gc2FtcGxlIHJhdGUgaW4gYnl0ZXMgcGVyIHNlY29uZCAqIDIgLyA1KS5cbiAgICBGaWxlQXVkaW9Tb3VyY2UuQ0hVTktfU0laRSA9IEZpbGVBdWRpb1NvdXJjZS5TQU1QTEVfUkFURSAqIDIgLyA1O1xuICAgIC8vIDEwIHNlY29uZHMgb2YgYXVkaW8gaW4gYnl0ZXMgPVxuICAgIC8vIHNhbXBsZSByYXRlIChieXRlcy9zZWNvbmQpICogNjAwIChzZWNvbmRzKSArIDQ0IChzaXplIG9mIHRoZSB3YXZlIGhlYWRlcikuXG4gICAgRmlsZUF1ZGlvU291cmNlLk1BWF9TSVpFID0gRmlsZUF1ZGlvU291cmNlLlNBTVBMRV9SQVRFICogNjAwICsgNDQ7XG4gICAgRmlsZUF1ZGlvU291cmNlLkZJTEVGT1JNQVQgPSBBdWRpb1N0cmVhbUZvcm1hdF8xLkF1ZGlvU3RyZWFtRm9ybWF0LmdldFdhdmVGb3JtYXRQQ00oMTYwMDAsIDE2LCAxKTtcbiAgICByZXR1cm4gRmlsZUF1ZGlvU291cmNlO1xufSgpKTtcbmV4cG9ydHMuRmlsZUF1ZGlvU291cmNlID0gRmlsZUF1ZGlvU291cmNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1GaWxlQXVkaW9Tb3VyY2UuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEF1ZGlvU3RyZWFtRm9ybWF0XzEgPSByZXF1aXJlKFwiLi4vLi4vc3JjL3Nkay9BdWRpby9BdWRpb1N0cmVhbUZvcm1hdFwiKTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCIpO1xudmFyIEV4cG9ydHNfMiA9IHJlcXVpcmUoXCIuLi9jb21tb24vRXhwb3J0c1wiKTtcbmV4cG9ydHMuQXVkaW9Xb3JrbGV0U291cmNlVVJMUHJvcGVydHlOYW1lID0gXCJNSUNST1BIT05FLVdvcmtsZXRTb3VyY2VVcmxcIjtcbnZhciBNaWNBdWRpb1NvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNaWNBdWRpb1NvdXJjZShwcml2UmVjb3JkZXIsIG91dHB1dENodW5rU2l6ZSwgYXVkaW9Tb3VyY2VJZCwgZGV2aWNlSWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5wcml2UmVjb3JkZXIgPSBwcml2UmVjb3JkZXI7XG4gICAgICAgIHRoaXMuZGV2aWNlSWQgPSBkZXZpY2VJZDtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtcyA9IHt9O1xuICAgICAgICB0aGlzLnR1cm5PbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucHJvbWlzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbCA9IG5ldyBFeHBvcnRzXzIuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIF90aGlzLmNyZWF0ZUF1ZGlvQ29udGV4dCgpO1xuICAgICAgICAgICAgdmFyIG5hdiA9IHdpbmRvdy5uYXZpZ2F0b3I7XG4gICAgICAgICAgICB2YXIgZ2V0VXNlck1lZGlhID0gKG5hdi5nZXRVc2VyTWVkaWEgfHxcbiAgICAgICAgICAgICAgICBuYXYud2Via2l0R2V0VXNlck1lZGlhIHx8XG4gICAgICAgICAgICAgICAgbmF2Lm1vekdldFVzZXJNZWRpYSB8fFxuICAgICAgICAgICAgICAgIG5hdi5tc0dldFVzZXJNZWRpYSk7XG4gICAgICAgICAgICBpZiAoISFuYXYubWVkaWFEZXZpY2VzKSB7XG4gICAgICAgICAgICAgICAgZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24gKGNvbnN0cmFpbnRzLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgbmF2Lm1lZGlhRGV2aWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLmdldFVzZXJNZWRpYShjb25zdHJhaW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3NDYWxsYmFjaylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnZXRVc2VyTWVkaWEpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JNc2cgPSBcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBnZXRVc2VyTWVkaWEuXCI7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbC5yZWplY3QoZXJyb3JNc2cpO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMi5BdWRpb1NvdXJjZUVycm9yRXZlbnQoZXJyb3JNc2csIFwiXCIpKTsgLy8gbWljIGluaXRpYWxpemVkIGVycm9yIC0gbm8gc3RyZWFtaWQgYXQgdGhpcyBwb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMi5BdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50KF90aGlzLnByaXZJZCkpOyAvLyBubyBzdHJlYW0gaWRcbiAgICAgICAgICAgICAgICAgICAgZ2V0VXNlck1lZGlhKHsgYXVkaW86IF90aGlzLmRldmljZUlkID8geyBkZXZpY2VJZDogX3RoaXMuZGV2aWNlSWQgfSA6IHRydWUsIHZpZGVvOiBmYWxzZSB9LCBmdW5jdGlvbiAobWVkaWFTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZNZWRpYVN0cmVhbSA9IG1lZGlhU3RyZWFtO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU291cmNlUmVhZHlFdmVudChfdGhpcy5wcml2SWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JNc2cgPSBcIkVycm9yIG9jY3VycmVkIGR1cmluZyBtaWNyb3Bob25lIGluaXRpYWxpemF0aW9uOiBcIiArIGVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IF90aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIQUNLOiB0aGlzIHNob3VsZCBiZSBoYW5kbGVkIHRocm91Z2ggb25FcnJvciBjYWxsYmFja3Mgb2YgYWxsIHByb21pc2VzIHVwIHRoZSBzdGFjay5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZm9ydHVuYXRlbHksIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIGRvZXMgbm90IHByb3ZpZGUgYW4gZWFzeSB3YXkgdG8gcmVqZWN0IHByb21pc2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aXRob3V0IGEgbG90IG9mIGNvZGUgcmVwbGljYXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBmaXggcHJvbWlzZSBpbXBsZW1lbnRhdGlvbiwgYWxsb3cgZm9yIGEgZ3JhY2VmdWwgcmVqZWN0IGNoYWluaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXAucmVqZWN0KGVycm9yTXNnKTsgLy8gdGhpcyB3aWxsIGJ1YmJsZSB1cCB0aHJvdWdoIHRoZSB3aG9sZSBjaGFpbiBvZiBwcm9taXNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggZWFjaCBuZXcgbGV2ZWwgYWRkaW5nIGV4dHJhIFwiVW5oYW5kbGVkIGNhbGxiYWNrIGVycm9yXCIgcHJlZml4IHRvIHRoZSBlcnJvciBtZXNzYWdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBsaW5lIGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU291cmNlRXJyb3JFdmVudChfdGhpcy5wcml2SWQsIGVycm9yTXNnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnByaXZDb250ZXh0LnN0YXRlID09PSBcInN1c3BlbmRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IE9uIGlPUywgdGhlIFdlYiBBdWRpbyBBUEkgcmVxdWlyZXMgc291bmRzIHRvIGJlIHRyaWdnZXJlZCBmcm9tIGFuIGV4cGxpY2l0IHVzZXIgYWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vV2ViQXVkaW8vd2ViLWF1ZGlvLWFwaS9pc3N1ZXMvNzkwXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZDb250ZXh0LnJlc3VtZSgpLnRoZW4obmV4dCwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbC5yZWplY3QoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBhdWRpbyBjb250ZXh0OiBcIiArIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2SWQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYXR0YWNoID0gZnVuY3Rpb24gKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQoX3RoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxpc3RlbihhdWRpb05vZGVJZCkub25TdWNjZXNzQ29udGludWVXaXRoKGZ1bmN0aW9uIChzdHJlYW1SZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudChfdGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1SZWFkZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudChfdGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGlkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXVkaW9Ob2RlSWQ7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJlYW1SZWFkZXIucmVhZCgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZXRhY2ggPSBmdW5jdGlvbiAoYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgICAgIGlmIChhdWRpb05vZGVJZCAmJiBfdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF0pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMi5BdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KF90aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50dXJuT2ZmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgc3RyZWFtSWQgaW4gX3RoaXMucHJpdlN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmVhbSA9IF90aGlzLnByaXZTdHJlYW1zW3N0cmVhbUlkXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9Tb3VyY2VPZmZFdmVudChfdGhpcy5wcml2SWQpKTsgLy8gbm8gc3RyZWFtIG5vd1xuICAgICAgICAgICAgX3RoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbCA9IG51bGw7XG4gICAgICAgICAgICBfdGhpcy5kZXN0cm95QXVkaW9Db250ZXh0KCk7XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5saXN0ZW4gPSBmdW5jdGlvbiAoYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50dXJuT24oKVxuICAgICAgICAgICAgICAgIC5vblN1Y2Nlc3NDb250aW51ZVdpdGgoZnVuY3Rpb24gKF8pIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RyZWFtID0gbmV3IEV4cG9ydHNfMi5DaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0oX3RoaXMucHJpdk91dHB1dENodW5rU2l6ZSwgYXVkaW9Ob2RlSWQpO1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZTdHJlYW1zW2F1ZGlvTm9kZUlkXSA9IHN0cmVhbTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVjb3JkZXIucmVjb3JkKF90aGlzLnByaXZDb250ZXh0LCBfdGhpcy5wcml2TWVkaWFTdHJlYW0sIHN0cmVhbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudChfdGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkLCBlcnJvcikpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLnByaXZFdmVudHMub25FdmVudChldmVudCk7XG4gICAgICAgICAgICBFeHBvcnRzXzIuRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNyZWF0ZUF1ZGlvQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghIV90aGlzLnByaXZDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0F1ZGlvQ29udGV4dFxuICAgICAgICAgICAgdmFyIEF1ZGlvQ29udGV4dCA9ICh3aW5kb3cuQXVkaW9Db250ZXh0KVxuICAgICAgICAgICAgICAgIHx8ICh3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KVxuICAgICAgICAgICAgICAgIHx8IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCFBdWRpb0NvbnRleHQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgV2ViIEF1ZGlvIEFQSSAoQXVkaW9Db250ZXh0IGlzIG5vdCBhdmFpbGFibGUpLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnByaXZDb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlc3Ryb3lBdWRpb0NvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLnByaXZDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMucHJpdlJlY29yZGVyLnJlbGVhc2VNZWRpYVJlc291cmNlcyhfdGhpcy5wcml2Q29udGV4dCk7XG4gICAgICAgICAgICAvLyBUaGlzIHBhdHRlcm4gYnJvdWdodCB0byB5b3UgYnkgYSBidWcgaW4gdGhlIFR5cGVTY3JpcHQgY29tcGlsZXIgd2hlcmUgaXRcbiAgICAgICAgICAgIC8vIGNvbmZ1c2VzIHRoZSAoXCJjbG9zZVwiIGluIHRoaXMucHJpdkNvbnRleHQpIHdpdGggdGhpcy5wcml2Q29udGV4dCBhbHdheXMgYmVpbmcgbnVsbCBhcyB0aGUgYWx0ZXJuYXRlLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8xMTQ5OFxuICAgICAgICAgICAgdmFyIGhhc0Nsb3NlID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoXCJjbG9zZVwiIGluIF90aGlzLnByaXZDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgaGFzQ2xvc2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkNvbnRleHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2Q29udGV4dCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChudWxsICE9PSBfdGhpcy5wcml2Q29udGV4dCAmJiBfdGhpcy5wcml2Q29udGV4dC5zdGF0ZSA9PT0gXCJydW5uaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBTdXNwZW5kIGFjdHVhbGx5IHRha2VzIGEgY2FsbGJhY2ssIGJ1dCBhbmFsb2dvdXMgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gcmVzdW1lIG1ldGhvZCwgaXQnbGwgYmUgb25seSBmaXJlZCBpZiBzdXNwZW5kIGlzIGNhbGxlZFxuICAgICAgICAgICAgICAgIC8vIGluIGEgZGlyZWN0IHJlc3BvbnNlIHRvIGEgdXNlciBhY3Rpb24uIFRoZSBsYXRlciBpcyBub3QgYWx3YXlzXG4gICAgICAgICAgICAgICAgLy8gdGhlIGNhc2UsIGFzIFR1cm5PZmYgaXMgYWxzbyBjYWxsZWQsIHdoZW4gd2UgcmVjZWl2ZSBhblxuICAgICAgICAgICAgICAgIC8vIGVuZC1vZi1zcGVlY2ggbWVzc2FnZSBmcm9tIHRoZSBzZXJ2aWNlLiBTbywgZG9pbmcgYSBiZXN0IGVmZm9ydFxuICAgICAgICAgICAgICAgIC8vIGZpcmUtYW5kLWZvcmdldCBoZXJlLlxuICAgICAgICAgICAgICAgIF90aGlzLnByaXZDb250ZXh0LnN1c3BlbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2T3V0cHV0Q2h1bmtTaXplID0gb3V0cHV0Q2h1bmtTaXplO1xuICAgICAgICB0aGlzLnByaXZJZCA9IGF1ZGlvU291cmNlSWQgPyBhdWRpb1NvdXJjZUlkIDogRXhwb3J0c18yLmNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRzID0gbmV3IEV4cG9ydHNfMi5FdmVudFNvdXJjZSgpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWljQXVkaW9Tb3VyY2UucHJvdG90eXBlLCBcImZvcm1hdFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1pY0F1ZGlvU291cmNlLkFVRElPRk9STUFUO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWljQXVkaW9Tb3VyY2UucHJvdG90eXBlLCBcImV2ZW50c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV2ZW50cztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1pY0F1ZGlvU291cmNlLnByb3RvdHlwZSwgXCJkZXZpY2VJbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRNaWNyb3Bob25lTGFiZWwoKS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoZnVuY3Rpb24gKGxhYmVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgYml0c3BlcnNhbXBsZTogTWljQXVkaW9Tb3VyY2UuQVVESU9GT1JNQVQuYml0c1BlclNhbXBsZSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbGNvdW50OiBNaWNBdWRpb1NvdXJjZS5BVURJT0ZPUk1BVC5jaGFubmVscyxcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGl2aXR5OiBFeHBvcnRzXzEuY29ubmVjdGl2aXR5LlVua25vd24sXG4gICAgICAgICAgICAgICAgICAgIG1hbnVmYWN0dXJlcjogXCJTcGVlY2ggU0RLXCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiBsYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlcmF0ZTogTWljQXVkaW9Tb3VyY2UuQVVESU9GT1JNQVQuc2FtcGxlc1BlclNlYyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogRXhwb3J0c18xLnR5cGUuTWljcm9waG9uZXMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBNaWNBdWRpb1NvdXJjZS5wcm90b3R5cGUuc2V0UHJvcGVydHkgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09IGV4cG9ydHMuQXVkaW9Xb3JrbGV0U291cmNlVVJMUHJvcGVydHlOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNvcmRlci5zZXRXb3JrbGV0VXJsKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3BlcnR5ICdcIiArIG5hbWUgKyBcIicgaXMgbm90IHN1cHBvcnRlZCBvbiBNaWNyb3Bob25lLlwiKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWljQXVkaW9Tb3VyY2UucHJvdG90eXBlLmdldE1pY3JvcGhvbmVMYWJlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGRlZmF1bHRNaWNyb3Bob25lTmFtZSA9IFwibWljcm9waG9uZVwiO1xuICAgICAgICAvLyBJZiB3ZSBkaWQgdGhpcyBhbHJlYWR5LCByZXR1cm4gdGhlIHZhbHVlLlxuICAgICAgICBpZiAodGhpcy5wcml2TWljcm9waG9uZUxhYmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzIuUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIHN0cmVhbSBpc24ndCBjdXJyZW50bHkgcnVubmluZywgd2UgY2FuJ3QgcXVlcnkgZGV2aWNlcyBiZWNhdXNlIHNlY3VyaXR5LlxuICAgICAgICBpZiAodGhpcy5wcml2TWVkaWFTdHJlYW0gPT09IHVuZGVmaW5lZCB8fCAhdGhpcy5wcml2TWVkaWFTdHJlYW0uYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdChkZWZhdWx0TWljcm9waG9uZU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNldHVwIGEgZGVmYXVsdFxuICAgICAgICB0aGlzLnByaXZNaWNyb3Bob25lTGFiZWwgPSBkZWZhdWx0TWljcm9waG9uZU5hbWU7XG4gICAgICAgIC8vIEdldCB0aGUgaWQgb2YgdGhlIGRldmljZSBydW5uaW5nIHRoZSBhdWRpbyB0cmFjay5cbiAgICAgICAgdmFyIG1pY3JvcGhvbmVEZXZpY2VJZCA9IHRoaXMucHJpdk1lZGlhU3RyZWFtLmdldFRyYWNrcygpWzBdLmdldFNldHRpbmdzKCkuZGV2aWNlSWQ7XG4gICAgICAgIC8vIElmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBnZXR0aW5nIHRoZSBkZXZpY2UgSUQsIHNldCBhIGRlZmF1bHQgYW5kIHJldHVybi5cbiAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbWljcm9waG9uZURldmljZUlkKSB7XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0aGlzLnByaXZNaWNyb3Bob25lTGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyBFeHBvcnRzXzIuRGVmZXJyZWQoKTtcbiAgICAgICAgLy8gRW51bWVyYXRlIHRoZSBtZWRpYSBkZXZpY2VzLlxuICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKS50aGVuKGZ1bmN0aW9uIChkZXZpY2VzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRldmljZXNfMSA9IGRldmljZXM7IF9pIDwgZGV2aWNlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBkZXZpY2UgPSBkZXZpY2VzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChkZXZpY2UuZGV2aWNlSWQgPT09IG1pY3JvcGhvbmVEZXZpY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGb3VuZCB0aGUgZGV2aWNlXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZNaWNyb3Bob25lTGFiZWwgPSBkZXZpY2UubGFiZWw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoX3RoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlZmVycmVkLnJlc29sdmUoX3RoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCk7IH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICAgIH07XG4gICAgTWljQXVkaW9Tb3VyY2UuQVVESU9GT1JNQVQgPSBBdWRpb1N0cmVhbUZvcm1hdF8xLkF1ZGlvU3RyZWFtRm9ybWF0LmdldERlZmF1bHRJbnB1dEZvcm1hdCgpO1xuICAgIHJldHVybiBNaWNBdWRpb1NvdXJjZTtcbn0oKSk7XG5leHBvcnRzLk1pY0F1ZGlvU291cmNlID0gTWljQXVkaW9Tb3VyY2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1pY0F1ZGlvU291cmNlLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL0V4cG9ydHNcIik7XG52YXIgUGNtUmVjb3JkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUGNtUmVjb3JkZXIoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMucmVjb3JkID0gZnVuY3Rpb24gKGNvbnRleHQsIG1lZGlhU3RyZWFtLCBvdXRwdXRTdHJlYW0pIHtcbiAgICAgICAgICAgIHZhciBkZXNpcmVkU2FtcGxlUmF0ZSA9IDE2MDAwO1xuICAgICAgICAgICAgdmFyIHNjcmlwdE5vZGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBidWZmZXJTaXplID0gMDtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoYnVmZmVyU2l6ZSwgMSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZWJraXQgKDw9IHZlcnNpb24gMzEpIHJlcXVpcmVzIGEgdmFsaWQgYnVmZmVyU2l6ZS5cbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyU2l6ZSA9IDIwNDg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdWRpb1NhbXBsZVJhdGUgPSBjb250ZXh0LnNhbXBsZVJhdGU7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChidWZmZXJTaXplIDwgMTYzODQgJiYgYXVkaW9TYW1wbGVSYXRlID49ICgyICogZGVzaXJlZFNhbXBsZVJhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJTaXplIDw8PSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9TYW1wbGVSYXRlID4+PSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihidWZmZXJTaXplLCAxLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgdmFyIHdhdmVTdHJlYW1FbmNvZGVyID0gbmV3IEV4cG9ydHNfMS5SaWZmUGNtRW5jb2Rlcihjb250ZXh0LnNhbXBsZVJhdGUsIGRlc2lyZWRTYW1wbGVSYXRlKTtcbiAgICAgICAgICAgIHZhciBuZWVkSGVhZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gX3RoaXM7XG4gICAgICAgICAgICBzY3JpcHROb2RlLm9uYXVkaW9wcm9jZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0RnJhbWUgPSBldmVudC5pbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0U3RyZWFtICYmICFvdXRwdXRTdHJlYW0uaXNDbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdhdmVGcmFtZSA9IHdhdmVTdHJlYW1FbmNvZGVyLmVuY29kZShuZWVkSGVhZGVyLCBpbnB1dEZyYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhd2F2ZUZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRTdHJlYW0ud3JpdGVTdHJlYW1DaHVuayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiB3YXZlRnJhbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZEhlYWRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBtaWNJbnB1dCA9IGNvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UobWVkaWFTdHJlYW0pO1xuICAgICAgICAgICAgLy8gaHR0cHM6Ly93ZWJhdWRpby5naXRodWIuaW8vd2ViLWF1ZGlvLWFwaS8jYXVkaW93b3JrbGV0XG4gICAgICAgICAgICAvLyBVc2luZyBBdWRpb1dvcmtsZXQgdG8gaW1wcm92ZSBhdWRpbyBxdWFsaXR5IGFuZCBhdm9pZCBhdWRpbyBnbGl0Y2hlcyBkdWUgdG8gYmxvY2tpbmcgdGhlIFVJIHRocmVhZFxuICAgICAgICAgICAgaWYgKCEhX3RoaXMucHJpdlNwZWVjaFByb2Nlc3NvclNjcmlwdCAmJiAhIWNvbnRleHQuYXVkaW9Xb3JrbGV0KSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5hdWRpb1dvcmtsZXRcbiAgICAgICAgICAgICAgICAgICAgLmFkZE1vZHVsZShfdGhpcy5wcml2U3BlZWNoUHJvY2Vzc29yU2NyaXB0KVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB3b3JrbGV0Tm9kZSA9IG5ldyBBdWRpb1dvcmtsZXROb2RlKGNvbnRleHQsIFwic3BlZWNoLXByb2Nlc3NvclwiKTtcbiAgICAgICAgICAgICAgICAgICAgd29ya2xldE5vZGUucG9ydC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dEZyYW1lID0gZXYuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXRTdHJlYW0gJiYgIW91dHB1dFN0cmVhbS5pc0Nsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3YXZlRnJhbWUgPSB3YXZlU3RyZWFtRW5jb2Rlci5lbmNvZGUobmVlZEhlYWRlciwgaW5wdXRGcmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhd2F2ZUZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFN0cmVhbS53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogd2F2ZUZyYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVlZEhlYWRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbWljSW5wdXQuY29ubmVjdCh3b3JrbGV0Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtsZXROb2RlLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZNZWRpYVJlc291cmNlcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdFByb2Nlc3Nvck5vZGU6IHdvcmtsZXROb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBtaWNJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbTogbWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbWljSW5wdXQuY29ubmVjdChzY3JpcHROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Tm9kZS5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRQcm9jZXNzb3JOb2RlOiBzY3JpcHROb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBtaWNJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbTogbWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaWNJbnB1dC5jb25uZWN0KHNjcmlwdE5vZGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdE5vZGUuY29ubmVjdChjb250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdFByb2Nlc3Nvck5vZGU6IHNjcmlwdE5vZGUsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbWljSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbTogbWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWxlYXNlTWVkaWFSZXNvdXJjZXMgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnByaXZNZWRpYVJlc291cmNlcykge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc2NyaXB0UHJvY2Vzc29yTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc2NyaXB0UHJvY2Vzc29yTm9kZS5kaXNjb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc2NyaXB0UHJvY2Vzc29yTm9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZNZWRpYVJlc291cmNlcy5zb3VyY2UuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7IHJldHVybiB0cmFjay5zdG9wKCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc291cmNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIFBjbVJlY29yZGVyLnByb3RvdHlwZS5zZXRXb3JrbGV0VXJsID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9jZXNzb3JTY3JpcHQgPSB1cmw7XG4gICAgfTtcbiAgICByZXR1cm4gUGNtUmVjb3JkZXI7XG59KCkpO1xuZXhwb3J0cy5QY21SZWNvcmRlciA9IFBjbVJlY29yZGVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QQ01SZWNvcmRlci5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL3Nkay9FeHBvcnRzXCIpO1xudmFyIFByb3h5SW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQcm94eUluZm8ocHJveHlIb3N0TmFtZSwgcHJveHlQb3J0LCBwcm94eVVzZXJOYW1lLCBwcm94eVBhc3N3b3JkKSB7XG4gICAgICAgIHRoaXMucHJpdlByb3h5SG9zdE5hbWUgPSBwcm94eUhvc3ROYW1lO1xuICAgICAgICB0aGlzLnByaXZQcm94eVBvcnQgPSBwcm94eVBvcnQ7XG4gICAgICAgIHRoaXMucHJpdlByb3h5VXNlck5hbWUgPSBwcm94eVVzZXJOYW1lO1xuICAgICAgICB0aGlzLnByaXZQcm94eVBhc3N3b3JkID0gcHJveHlQYXNzd29yZDtcbiAgICB9XG4gICAgUHJveHlJbmZvLmZyb21SZWNvZ25pemVyQ29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5SW5mbyhjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShFeHBvcnRzXzEuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eUhvc3ROYW1lKSwgcGFyc2VJbnQoY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRXhwb3J0c18xLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0KSwgMTApLCBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShFeHBvcnRzXzEuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lKSwgY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRXhwb3J0c18xLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQYXNzd29yZCkpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb3h5SW5mby5wcm90b3R5cGUsIFwiSG9zdE5hbWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZQcm94eUhvc3ROYW1lO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJveHlJbmZvLnByb3RvdHlwZSwgXCJQb3J0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJveHlQb3J0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJveHlJbmZvLnByb3RvdHlwZSwgXCJVc2VyTmFtZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3h5VXNlck5hbWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcm94eUluZm8ucHJvdG90eXBlLCBcIlBhc3N3b3JkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJveHlQYXNzd29yZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFByb3h5SW5mbztcbn0oKSk7XG5leHBvcnRzLlByb3h5SW5mbyA9IFByb3h5SW5mbztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJveHlJbmZvLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL0V4cG9ydHNcIik7XG52YXIgUmVwbGF5YWJsZUF1ZGlvTm9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXBsYXlhYmxlQXVkaW9Ob2RlKGF1ZGlvU291cmNlLCBmb3JtYXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5wcml2QnVmZmVycyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZSZXBsYXlPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZMYXN0U2hyaW5rT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2QnVmZmVyU3RhcnRPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZCdWZmZXJTZXJpYWwgPSAwO1xuICAgICAgICB0aGlzLnByaXZCdWZmZXJlZEJ5dGVzID0gMDtcbiAgICAgICAgdGhpcy5wcml2UmVwbGF5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkxhc3RDaHVua0FjcXVpcmVkVGltZSA9IDA7XG4gICAgICAgIHRoaXMuaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucHJpdkF1ZGlvTm9kZS5pZCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZBdWRpb05vZGUgPSBhdWRpb1NvdXJjZTtcbiAgICAgICAgdGhpcy5wcml2Rm9ybWF0ID0gZm9ybWF0O1xuICAgIH1cbiAgICAvLyBSZWFkcyBhbmQgcmV0dXJucyB0aGUgbmV4dCBjaHVuayBvZiBhdWRpbyBidWZmZXIuXG4gICAgLy8gSWYgcmVwbGF5IG9mIGV4aXN0aW5nIGJ1ZmZlcnMgYXJlIG5lZWRlZCwgcmVhZCgpIHdpbGwgZmlyc3Qgc2VlayBhbmQgcmVwbGF5XG4gICAgLy8gZXhpc3RpbmcgY29udGVudCwgYW5kIHVwb2luIGNvbXBsZXRpb24gaXQgd2lsbCByZWFkIG5ldyBjb250ZW50IGZyb20gdGhlIHVuZGVybHlpbmdcbiAgICAvLyBhdWRpbyBub2RlLCBzYXZpbmcgdGhhdCBjb250ZW50IGludG8gdGhlIHJlcGxheWFibGUgYnVmZmVycy5cbiAgICBSZXBsYXlhYmxlQXVkaW9Ob2RlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIHJlcGxheSByZXF1ZXN0IHRvIGhvbm9yLlxuICAgICAgICBpZiAoISF0aGlzLnByaXZSZXBsYXkgJiYgdGhpcy5wcml2QnVmZmVycy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHN0YXJ0IHBvaW50IGluIHRoZSBidWZmZXJzLlxuICAgICAgICAgICAgLy8gT2Zmc2V0cyBhcmUgaW4gMTAwbnMgaW5jcmVtZW50cy5cbiAgICAgICAgICAgIC8vIFNvIGhvdyBtYW55IGJ5dGVzIGRvIHdlIG5lZWQgdG8gc2VlayB0byBnZXQgdGhlIHJpZ2h0IG9mZnNldD9cbiAgICAgICAgICAgIHZhciBvZmZzZXRUb1NlZWsgPSB0aGlzLnByaXZSZXBsYXlPZmZzZXQgLSB0aGlzLnByaXZCdWZmZXJTdGFydE9mZnNldDtcbiAgICAgICAgICAgIHZhciBieXRlc1RvU2VlayA9IE1hdGgucm91bmQob2Zmc2V0VG9TZWVrICogdGhpcy5wcml2Rm9ybWF0LmF2Z0J5dGVzUGVyU2VjICogMWUtNyk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gKGJ5dGVzVG9TZWVrICUgMikpIHtcbiAgICAgICAgICAgICAgICBieXRlc1RvU2VlaysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnByaXZCdWZmZXJzLmxlbmd0aCAmJiBieXRlc1RvU2VlayA+PSB0aGlzLnByaXZCdWZmZXJzW2ldLmNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYnl0ZXNUb1NlZWsgLT0gdGhpcy5wcml2QnVmZmVyc1tpKytdLmNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJldFZhbCA9IHRoaXMucHJpdkJ1ZmZlcnNbaV0uY2h1bmsuYnVmZmVyLnNsaWNlKGJ5dGVzVG9TZWVrKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcGxheU9mZnNldCArPSAocmV0VmFsLmJ5dGVMZW5ndGggLyB0aGlzLnByaXZGb3JtYXQuYXZnQnl0ZXNQZXJTZWMpICogMWUrNztcbiAgICAgICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgYnVmZmVycywgc3RvcCByZXBsYXlpbmcuXG4gICAgICAgICAgICBpZiAoaSA9PT0gdGhpcy5wcml2QnVmZmVycy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVwbGF5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18xLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh7XG4gICAgICAgICAgICAgICAgYnVmZmVyOiByZXRWYWwsXG4gICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogdGhpcy5wcml2QnVmZmVyc1tpXS5jaHVuay50aW1lUmVjZWl2ZWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlLnJlYWQoKVxuICAgICAgICAgICAgLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aChmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZCdWZmZXJzLnB1c2gobmV3IEJ1ZmZlckVudHJ5KHJlc3VsdCwgX3RoaXMucHJpdkJ1ZmZlclNlcmlhbCsrLCBfdGhpcy5wcml2QnVmZmVyZWRCeXRlcykpO1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZCdWZmZXJlZEJ5dGVzICs9IHJlc3VsdC5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUmVwbGF5YWJsZUF1ZGlvTm9kZS5wcm90b3R5cGUuZGV0YWNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnByaXZBdWRpb05vZGUuZGV0YWNoKCk7XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlcnMgPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBSZXBsYXlhYmxlQXVkaW9Ob2RlLnByb3RvdHlwZS5yZXBsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLnByaXZCdWZmZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVwbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcGxheU9mZnNldCA9IHRoaXMucHJpdkxhc3RTaHJpbmtPZmZzZXQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIFNocmlua3MgdGhlIGV4aXN0aW5nIGF1ZGlvIGJ1ZmZlcnMgdG8gc3RhcnQgYXQgdGhlIG5ldyBvZmZzZXQsIG9yIGF0IHRoZVxuICAgIC8vIGJlZ2lubmluZyBvZiB0aGUgYnVmZmVyIGNsb3Nlc3QgdG8gdGhlIHJlcXVlc3RlZCBvZmZzZXQuXG4gICAgLy8gQSByZXBsYXkgcmVxdWVzdCB3aWxsIHN0YXJ0IGZyb20gdGhlIGxhc3Qgc2hyaW5rIHBvaW50LlxuICAgIFJlcGxheWFibGVBdWRpb05vZGUucHJvdG90eXBlLnNocmlua0J1ZmZlcnMgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgIHRoaXMucHJpdkxhc3RTaHJpbmtPZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIC8vIEZpbmQgdGhlIHN0YXJ0IHBvaW50IGluIHRoZSBidWZmZXJzLlxuICAgICAgICAvLyBPZmZzZXRzIGFyZSBpbiAxMDBucyBpbmNyZW1lbnRzLlxuICAgICAgICAvLyBTbyBob3cgbWFueSBieXRlcyBkbyB3ZSBuZWVkIHRvIHNlZWsgdG8gZ2V0IHRoZSByaWdodCBvZmZzZXQ/XG4gICAgICAgIHZhciBvZmZzZXRUb1NlZWsgPSBvZmZzZXQgLSB0aGlzLnByaXZCdWZmZXJTdGFydE9mZnNldDtcbiAgICAgICAgdmFyIGJ5dGVzVG9TZWVrID0gTWF0aC5yb3VuZChvZmZzZXRUb1NlZWsgKiB0aGlzLnByaXZGb3JtYXQuYXZnQnl0ZXNQZXJTZWMgKiAxZS03KTtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHRoaXMucHJpdkJ1ZmZlcnMubGVuZ3RoICYmIGJ5dGVzVG9TZWVrID49IHRoaXMucHJpdkJ1ZmZlcnNbaV0uY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgIGJ5dGVzVG9TZWVrIC09IHRoaXMucHJpdkJ1ZmZlcnNbaSsrXS5jaHVuay5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZCdWZmZXJTdGFydE9mZnNldCA9IE1hdGgucm91bmQob2Zmc2V0IC0gKChieXRlc1RvU2VlayAvIHRoaXMucHJpdkZvcm1hdC5hdmdCeXRlc1BlclNlYykgKiAxZSs3KSk7XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlcnMgPSB0aGlzLnByaXZCdWZmZXJzLnNsaWNlKGkpO1xuICAgIH07XG4gICAgLy8gRmluZHMgdGhlIHRpbWUgYSBidWZmZXIgb2YgYXVkaW8gd2FzIGZpcnN0IHNlZW4gYnkgb2Zmc2V0LlxuICAgIFJlcGxheWFibGVBdWRpb05vZGUucHJvdG90eXBlLmZpbmRUaW1lQXRPZmZzZXQgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgIGlmIChvZmZzZXQgPCB0aGlzLnByaXZCdWZmZXJTdGFydE9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucHJpdkJ1ZmZlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBfYVtfaV07XG4gICAgICAgICAgICB2YXIgc3RhcnRPZmZzZXQgPSAodmFsdWUuYnl0ZU9mZnNldCAvIHRoaXMucHJpdkZvcm1hdC5hdmdCeXRlc1BlclNlYykgKiAxZTc7XG4gICAgICAgICAgICB2YXIgZW5kT2Zmc2V0ID0gc3RhcnRPZmZzZXQgKyAoKHZhbHVlLmNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoIC8gdGhpcy5wcml2Rm9ybWF0LmF2Z0J5dGVzUGVyU2VjKSAqIDFlNyk7XG4gICAgICAgICAgICBpZiAob2Zmc2V0ID49IHN0YXJ0T2Zmc2V0ICYmIG9mZnNldCA8PSBlbmRPZmZzZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuY2h1bmsudGltZVJlY2VpdmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcGxheWFibGVBdWRpb05vZGU7XG59KCkpO1xuZXhwb3J0cy5SZXBsYXlhYmxlQXVkaW9Ob2RlID0gUmVwbGF5YWJsZUF1ZGlvTm9kZTtcbi8vIFByaW1hcnkgdXNlIG9mIHRoaXMgY2xhc3MgaXMgdG8gaGVscCBkZWJ1Z2dpbmcgcHJvYmxlbXMgd2l0aCB0aGUgcmVwbGF5XG4vLyBjb2RlLiBJZiB0aGUgbWVtb3J5IGNvc3Qgb2YgYWxsb2MgLyBkZWFsbG9jIGdldHMgdG9vIG11Y2gsIGRyb3AgaXQgYW5kIGp1c3QgdXNlXG4vLyB0aGUgQXJyYXlCdWZmZXIgZGlyZWN0bHkuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBCdWZmZXJFbnRyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCdWZmZXJFbnRyeShjaHVuaywgc2VyaWFsLCBieXRlT2Zmc2V0KSB7XG4gICAgICAgIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgICAgICAgdGhpcy5zZXJpYWwgPSBzZXJpYWw7XG4gICAgICAgIHRoaXMuYnl0ZU9mZnNldCA9IGJ5dGVPZmZzZXQ7XG4gICAgfVxuICAgIHJldHVybiBCdWZmZXJFbnRyeTtcbn0oKSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlcGxheWFibGVBdWRpb05vZGUuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24vRXhwb3J0c1wiKTtcbnZhciBXZWJzb2NrZXRNZXNzYWdlQWRhcHRlcl8xID0gcmVxdWlyZShcIi4vV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXJcIik7XG52YXIgV2Vic29ja2V0Q29ubmVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXZWJzb2NrZXRDb25uZWN0aW9uKHVyaSwgcXVlcnlQYXJhbWV0ZXJzLCBoZWFkZXJzLCBtZXNzYWdlRm9ybWF0dGVyLCBwcm94eUluZm8sIGNvbm5lY3Rpb25JZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnByaXZJc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2VBZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlQWRhcHRlci5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucHJpdklzRGlzcG9zZWQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlQWRhcHRlci5zdGF0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIub3BlbigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIuc2VuZChtZXNzYWdlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIucmVhZCgpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIXVyaSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEV4cG9ydHNfMS5Bcmd1bWVudE51bGxFcnJvcihcInVyaVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1lc3NhZ2VGb3JtYXR0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFeHBvcnRzXzEuQXJndW1lbnROdWxsRXJyb3IoXCJtZXNzYWdlRm9ybWF0dGVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdk1lc3NhZ2VGb3JtYXR0ZXIgPSBtZXNzYWdlRm9ybWF0dGVyO1xuICAgICAgICB2YXIgcXVlcnlQYXJhbXMgPSBcIlwiO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIGlmIChxdWVyeVBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHBhcmFtTmFtZSBpbiBxdWVyeVBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zICs9ICgoaSA9PT0gMCkgJiYgKHVyaS5pbmRleE9mKFwiP1wiKSA9PT0gLTEpKSA/IFwiP1wiIDogXCImXCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBlbmNvZGVVUklDb21wb25lbnQocXVlcnlQYXJhbWV0ZXJzW3BhcmFtTmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcyArPSBwYXJhbU5hbWUgKyBcIj1cIiArIHZhbDtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVhZGVycykge1xuICAgICAgICAgICAgZm9yICh2YXIgaGVhZGVyTmFtZSBpbiBoZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMgKz0gaSA9PT0gMCA/IFwiP1wiIDogXCImXCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBlbmNvZGVVUklDb21wb25lbnQoaGVhZGVyc1toZWFkZXJOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zICs9IGhlYWRlck5hbWUgKyBcIj1cIiArIHZhbDtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZVcmkgPSB1cmkgKyBxdWVyeVBhcmFtcztcbiAgICAgICAgdGhpcy5wcml2SWQgPSBjb25uZWN0aW9uSWQgPyBjb25uZWN0aW9uSWQgOiBFeHBvcnRzXzEuY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIgPSBuZXcgV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXJfMS5XZWJzb2NrZXRNZXNzYWdlQWRhcHRlcih0aGlzLnByaXZVcmksIHRoaXMuaWQsIHRoaXMucHJpdk1lc3NhZ2VGb3JtYXR0ZXIsIHByb3h5SW5mbyk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJzb2NrZXRDb25uZWN0aW9uLnByb3RvdHlwZSwgXCJpZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2Vic29ja2V0Q29ubmVjdGlvbi5wcm90b3R5cGUsIFwiZXZlbnRzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2VBZGFwdGVyLmV2ZW50cztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFdlYnNvY2tldENvbm5lY3Rpb247XG59KCkpO1xuZXhwb3J0cy5XZWJzb2NrZXRDb25uZWN0aW9uID0gV2Vic29ja2V0Q29ubmVjdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V2Vic29ja2V0Q29ubmVjdGlvbi5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9FeHBvcnRzXCIpO1xudmFyIEh0dHBzUHJveHlBZ2VudCA9IHJlcXVpcmUoXCJodHRwcy1wcm94eS1hZ2VudFwiKTtcbnZhciB3cyA9IHJlcXVpcmUoXCJ3c1wiKTtcbnZhciBvY3NwID0gcmVxdWlyZShcIi4uLy4uL2V4dGVybmFsL29jc3Avb2NzcFwiKTtcbnZhciBXZWJzb2NrZXRNZXNzYWdlQWRhcHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXZWJzb2NrZXRNZXNzYWdlQWRhcHRlcih1cmksIGNvbm5lY3Rpb25JZCwgbWVzc2FnZUZvcm1hdHRlciwgcHJveHlJbmZvKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMub3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID09PSBFeHBvcnRzXzEuQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzEuUHJvbWlzZUhlbHBlci5mcm9tRXJyb3IoXCJDYW5ub3Qgb3BlbiBhIGNvbm5lY3Rpb24gdGhhdCBpcyBpbiBcIiArIF90aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgKyBcIiBzdGF0ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwucHJvbWlzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbCA9IG5ldyBFeHBvcnRzXzEuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIF90aGlzLnByaXZDZXJ0aWZpY2F0ZVZhbGlkYXRlZERlZmVycmFsID0gbmV3IEV4cG9ydHNfMS5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgX3RoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSA9IEV4cG9ydHNfMS5Db25uZWN0aW9uU3RhdGUuQ29ubmVjdGluZztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBXZWJTb2NrZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgIVdlYnNvY2tldE1lc3NhZ2VBZGFwdGVyLmZvcmNlTnBtV2ViU29ja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEJyb3dzZXIgaGFuZGxlcyBjZXJ0IGNoZWNrcy5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdkNlcnRpZmljYXRlVmFsaWRhdGVkRGVmZXJyYWwucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdldlYnNvY2tldENsaWVudCA9IG5ldyBXZWJTb2NrZXQoX3RoaXMucHJpdlVyaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJveHlJbmZvICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3h5SW5mby5Ib3N0TmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm94eUluZm8uUG9ydCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodHRwUHJveHlPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3Q6IF90aGlzLnByb3h5SW5mby5Ib3N0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3J0OiBfdGhpcy5wcm94eUluZm8uUG9ydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBfdGhpcy5wcm94eUluZm8uVXNlck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwUHJveHlPcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiUHJveHktQXV0aGVudGljYXRpb25cIjogXCJCYXNpYyBcIiArIG5ldyBCdWZmZXIoX3RoaXMucHJveHlJbmZvLlVzZXJOYW1lICsgXCI6XCIgKyAoX3RoaXMucHJveHlJbmZvLlBhc3N3b3JkID09PSB1bmRlZmluZWQpID8gXCJcIiA6IF90aGlzLnByb3h5SW5mby5QYXNzd29yZCkudG9TdHJpbmcoXCJiYXNlNjRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVxdWVzdE9DU1BcIjogXCJ0cnVlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodHRwUHJveHlBZ2VudCA9IG5ldyBIdHRwc1Byb3h5QWdlbnQoaHR0cFByb3h5T3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHR0cHNPcHRpb25zXzEgPSB7IGFnZW50OiBodHRwUHJveHlBZ2VudCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdldlYnNvY2tldENsaWVudCA9IG5ldyB3cyhfdGhpcy5wcml2VXJpLCBodHRwc09wdGlvbnNfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWdpc3RlciB0byBiZSBub3RpZmllZCB3aGVuIFdlYlNvY2tldCB1cGdyYWRlIGhhcHBlbnMgc28gd2UgY2FuIGNoZWNrIHRoZSB2YWxpZGl0eSBvZiB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENlcnRpZmljYXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdldlYnNvY2tldENsaWVudC5hZGRMaXN0ZW5lcihcInVwZ3JhZGVcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGxzU29ja2V0ID0gZS5zb2NrZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBlZXIgPSB0bHNTb2NrZXQuZ2V0UGVlckNlcnRpZmljYXRlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcmsgdGhlIHNvY2tldCB1bnRpbCB3ZSBrbm93IGlmIHRoZSBjZXJ0IGlzIGdvb2QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGxzU29ja2V0LmNvcmsoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvY3NwLmNoZWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VydDogcGVlci5yYXcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBPcHRpb25zOiBodHRwc09wdGlvbnNfMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVyOiBwZWVyLmlzc3VlckNlcnRpZmljYXRlLnJhdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IsIHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZDZXJ0aWZpY2F0ZVZhbGlkYXRlZERlZmVycmFsLnJlamVjdChlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRsc1NvY2tldC5kZXN0cm95KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZDZXJ0aWZpY2F0ZVZhbGlkYXRlZERlZmVycmFsLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bHNTb2NrZXQudW5jb3JrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9jc3AgbGlicmFyeSB3aWxsIGhhbmRsZSB2YWxpZGF0aW9uIGZvciB1cyBhbmQgZmFpbCB0aGUgY29ubmVjdGlvbiBpZiBuZWVkZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2Q2VydGlmaWNhdGVWYWxpZGF0ZWREZWZlcnJhbC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9jc3BBZ2VudCA9IG5ldyBvY3NwLkFnZW50KHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0geyBhZ2VudDogb2NzcEFnZW50IH07XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50ID0gbmV3IHdzKF90aGlzLnByaXZVcmksIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnByaXZXZWJzb2NrZXRDbGllbnQuYmluYXJ5VHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVjZWl2aW5nTWVzc2FnZVF1ZXVlID0gbmV3IEV4cG9ydHNfMS5RdWV1ZSgpO1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZEaXNjb25uZWN0RGVmZXJyYWwgPSBuZXcgRXhwb3J0c18xLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdlNlbmRNZXNzYWdlUXVldWUgPSBuZXcgRXhwb3J0c18xLlF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc1NlbmRRdWV1ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbC5yZXNvbHZlKG5ldyBFeHBvcnRzXzEuQ29ubmVjdGlvbk9wZW5SZXNwb25zZSg1MDAsIGVycm9yKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwucHJvbWlzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMub25FdmVudChuZXcgRXhwb3J0c18xLkNvbm5lY3Rpb25TdGFydEV2ZW50KF90aGlzLnByaXZDb25uZWN0aW9uSWQsIF90aGlzLnByaXZVcmkpKTtcbiAgICAgICAgICAgIF90aGlzLnByaXZXZWJzb2NrZXRDbGllbnQub25vcGVuID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2Q2VydGlmaWNhdGVWYWxpZGF0ZWREZWZlcnJhbC5wcm9taXNlKCkub24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID0gRXhwb3J0c18xLkNvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQ7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMS5Db25uZWN0aW9uRXN0YWJsaXNoZWRFdmVudChfdGhpcy5wcml2Q29ubmVjdGlvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwucmVzb2x2ZShuZXcgRXhwb3J0c18xLkNvbm5lY3Rpb25PcGVuUmVzcG9uc2UoMjAwLCBcIlwiKSk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IFVuZGVyc3RhbmQgd2hhdCB0aGlzIGlzIGVycm9yIGlzLiBXaWxsIHdlIHN0aWxsIGdldCBvbkNsb3NlID9cbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSAhPT0gRXhwb3J0c18xLkNvbm5lY3Rpb25TdGF0ZS5Db25uZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IElzIHRoaXMgcmVxdWlyZWQgP1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25FcnJvckV2ZW50KGVycm9yTXNnLCBjb25uZWN0aW9uSWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMucHJpdldlYnNvY2tldENsaWVudC5vbmNsb3NlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSA9PT0gRXhwb3J0c18xLkNvbm5lY3Rpb25TdGF0ZS5Db25uZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPSBFeHBvcnRzXzEuQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZDtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5vbkV2ZW50KG5ldyBDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudCh0aGlzLmNvbm5lY3Rpb25JZCwgZS5jb2RlLCBlLnJlYXNvbikpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsLnJlc29sdmUobmV3IEV4cG9ydHNfMS5Db25uZWN0aW9uT3BlblJlc3BvbnNlKGUuY29kZSwgZS5yZWFzb24pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMS5Db25uZWN0aW9uQ2xvc2VkRXZlbnQoX3RoaXMucHJpdkNvbm5lY3Rpb25JZCwgZS5jb2RlLCBlLnJlYXNvbikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5vbkNsb3NlKGUuY29kZSwgZS5yZWFzb24pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLnByaXZXZWJzb2NrZXRDbGllbnQub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV0d29ya1JlY2VpdmVkVGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSA9PT0gRXhwb3J0c18xLkNvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkXzEgPSBuZXcgRXhwb3J0c18xLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBpZCA9ICsrdGhpcy5pZENvdW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZSZWNlaXZpbmdNZXNzYWdlUXVldWUuZW5xdWV1ZUZyb21Qcm9taXNlKGRlZmVycmVkXzEucHJvbWlzZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmF3TWVzc2FnZSA9IG5ldyBFeHBvcnRzXzEuUmF3V2Vic29ja2V0TWVzc2FnZShFeHBvcnRzXzEuTWVzc2FnZVR5cGUuQmluYXJ5LCBlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdk1lc3NhZ2VGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Db25uZWN0aW9uTWVzc2FnZShyYXdNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbihmdW5jdGlvbiAoY29ubmVjdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzEuQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50KF90aGlzLnByaXZDb25uZWN0aW9uSWQsIG5ldHdvcmtSZWNlaXZlZFRpbWUsIGNvbm5lY3Rpb25NZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWRfMS5yZXNvbHZlKGNvbm5lY3Rpb25NZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2ZW50cyBmb3IgdGhlc2UgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkXzEucmVqZWN0KFwiSW52YWxpZCBiaW5hcnkgbWVzc2FnZSBmb3JtYXQuIEVycm9yOiBcIiArIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhd01lc3NhZ2UgPSBuZXcgRXhwb3J0c18xLlJhd1dlYnNvY2tldE1lc3NhZ2UoRXhwb3J0c18xLk1lc3NhZ2VUeXBlLlRleHQsIGUuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2TWVzc2FnZUZvcm1hdHRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0Nvbm5lY3Rpb25NZXNzYWdlKHJhd01lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKGZ1bmN0aW9uIChjb25uZWN0aW9uTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9uRXZlbnQobmV3IEV4cG9ydHNfMS5Db25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQoX3RoaXMucHJpdkNvbm5lY3Rpb25JZCwgbmV0d29ya1JlY2VpdmVkVGltZSwgY29ubmVjdGlvbk1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZF8xLnJlc29sdmUoY29ubmVjdGlvbk1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogRXZlbnRzIGZvciB0aGVzZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWRfMS5yZWplY3QoXCJJbnZhbGlkIHRleHQgbWVzc2FnZSBmb3JtYXQuIEVycm9yOiBcIiArIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlICE9PSBFeHBvcnRzXzEuQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzEuUHJvbWlzZUhlbHBlci5mcm9tRXJyb3IoXCJDYW5ub3Qgc2VuZCBvbiBjb25uZWN0aW9uIHRoYXQgaXMgaW4gXCIgKyBfdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlICsgXCIgc3RhdGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWVzc2FnZVNlbmRTdGF0dXNEZWZlcnJhbCA9IG5ldyBFeHBvcnRzXzEuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlU2VuZERlZmVycmFsID0gbmV3IEV4cG9ydHNfMS5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgX3RoaXMucHJpdlNlbmRNZXNzYWdlUXVldWUuZW5xdWV1ZUZyb21Qcm9taXNlKG1lc3NhZ2VTZW5kRGVmZXJyYWwucHJvbWlzZSgpKTtcbiAgICAgICAgICAgIF90aGlzLnByaXZNZXNzYWdlRm9ybWF0dGVyXG4gICAgICAgICAgICAgICAgLmZyb21Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlKVxuICAgICAgICAgICAgICAgIC5vbihmdW5jdGlvbiAocmF3TWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VTZW5kRGVmZXJyYWwucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIFJhd1dlYnNvY2tldE1lc3NhZ2U6IHJhd01lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHNlbmRTdGF0dXNEZWZlcnJhbDogbWVzc2FnZVNlbmRTdGF0dXNEZWZlcnJhbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VTZW5kRGVmZXJyYWwucmVqZWN0KFwiRXJyb3IgZm9ybWF0dGluZyB0aGUgbWVzc2FnZS4gXCIgKyBlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlU2VuZFN0YXR1c0RlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgIT09IEV4cG9ydHNfMS5Db25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEV4cG9ydHNfMS5Qcm9taXNlSGVscGVyLmZyb21FcnJvcihcIkNhbm5vdCByZWFkIG9uIGNvbm5lY3Rpb24gdGhhdCBpcyBpbiBcIiArIF90aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgKyBcIiBzdGF0ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2UmVjZWl2aW5nTWVzc2FnZVF1ZXVlLmRlcXVldWUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbG9zZSA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgIT09IEV4cG9ydHNfMS5Db25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZXZWJzb2NrZXRDbGllbnQuY2xvc2UoMTAwMCwgcmVhc29uID8gcmVhc29uIDogXCJOb3JtYWwgY2xvc3VyZSBieSBjbGllbnRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmFsID0gbmV3IEV4cG9ydHNfMS5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgIGRlZmVycmFsLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2RGlzY29ubmVjdERlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kUmF3TWVzc2FnZSA9IGZ1bmN0aW9uIChzZW5kSXRlbSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBpbmRpY2F0ZXMgd2UgYXJlIGRyYWluaW5nIHRoZSBxdWV1ZSBhbmQgaXQgY2FtZSB3aXRoIG5vIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgaWYgKCFzZW5kSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRXhwb3J0c18xLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMub25FdmVudChuZXcgRXhwb3J0c18xLkNvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50KF90aGlzLnByaXZDb25uZWN0aW9uSWQsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgc2VuZEl0ZW0uTWVzc2FnZSkpO1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZXZWJzb2NrZXRDbGllbnQuc2VuZChzZW5kSXRlbS5SYXdXZWJzb2NrZXRNZXNzYWdlLnBheWxvYWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzEuUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRXhwb3J0c18xLlByb21pc2VIZWxwZXIuZnJvbUVycm9yKFwid2Vic29ja2V0IHNlbmQgZXJyb3I6IFwiICsgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25DbG9zZSA9IGZ1bmN0aW9uIChjb2RlLCByZWFzb24pIHtcbiAgICAgICAgICAgIHZhciBjbG9zZVJlYXNvbiA9IFwiQ29ubmVjdGlvbiBjbG9zZWQuIFwiICsgY29kZSArIFwiOiBcIiArIHJlYXNvbjtcbiAgICAgICAgICAgIF90aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPSBFeHBvcnRzXzEuQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZDtcbiAgICAgICAgICAgIF90aGlzLnByaXZEaXNjb25uZWN0RGVmZXJyYWwucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIF90aGlzLnByaXZSZWNlaXZpbmdNZXNzYWdlUXVldWUuZGlzcG9zZShyZWFzb24pO1xuICAgICAgICAgICAgX3RoaXMucHJpdlJlY2VpdmluZ01lc3NhZ2VRdWV1ZS5kcmFpbkFuZERpc3Bvc2UoZnVuY3Rpb24gKHBlbmRpbmdSZWNlaXZlSXRlbSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2ZW50cyBmb3IgdGhlc2UgP1xuICAgICAgICAgICAgICAgIC8vIExvZ2dlci5pbnN0YW5jZS5vbkV2ZW50KG5ldyBMb2dnaW5nRXZlbnQoTG9nVHlwZS5XYXJuaW5nLCBudWxsLCBgRmFpbGVkIHRvIHByb2Nlc3MgcmVjZWl2ZWQgbWVzc2FnZS4gUmVhc29uOiAke2Nsb3NlUmVhc29ufSwgTWVzc2FnZTogJHtKU09OLnN0cmluZ2lmeShwZW5kaW5nUmVjZWl2ZUl0ZW0pfWApKTtcbiAgICAgICAgICAgIH0sIGNsb3NlUmVhc29uKTtcbiAgICAgICAgICAgIF90aGlzLnByaXZTZW5kTWVzc2FnZVF1ZXVlLmRyYWluQW5kRGlzcG9zZShmdW5jdGlvbiAocGVuZGluZ1NlbmRJdGVtKSB7XG4gICAgICAgICAgICAgICAgcGVuZGluZ1NlbmRJdGVtLnNlbmRTdGF0dXNEZWZlcnJhbC5yZWplY3QoY2xvc2VSZWFzb24pO1xuICAgICAgICAgICAgfSwgY2xvc2VSZWFzb24pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByb2Nlc3NTZW5kUXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5wcml2U2VuZE1lc3NhZ2VRdWV1ZVxuICAgICAgICAgICAgICAgIC5kZXF1ZXVlKClcbiAgICAgICAgICAgICAgICAub24oZnVuY3Rpb24gKHNlbmRJdGVtKSB7XG4gICAgICAgICAgICAgICAgLy8gaW5kaWNhdGVzIHdlIGFyZSBkcmFpbmluZyB0aGUgcXVldWUgYW5kIGl0IGNhbWUgd2l0aCBubyBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIGlmICghc2VuZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5zZW5kUmF3TWVzc2FnZShzZW5kSXRlbSlcbiAgICAgICAgICAgICAgICAgICAgLm9uKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEl0ZW0uc2VuZFN0YXR1c0RlZmVycmFsLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc1NlbmRRdWV1ZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChzZW5kRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEl0ZW0uc2VuZFN0YXR1c0RlZmVycmFsLnJlamVjdChzZW5kRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzU2VuZFF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cy5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIEV4cG9ydHNfMS5FdmVudHMuaW5zdGFuY2Uub25FdmVudChldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICghdXJpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXhwb3J0c18xLkFyZ3VtZW50TnVsbEVycm9yKFwidXJpXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWVzc2FnZUZvcm1hdHRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEV4cG9ydHNfMS5Bcmd1bWVudE51bGxFcnJvcihcIm1lc3NhZ2VGb3JtYXR0ZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm94eUluZm8gPSBwcm94eUluZm87XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25FdmVudHMgPSBuZXcgRXhwb3J0c18xLkV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgdGhpcy5wcml2TWVzc2FnZUZvcm1hdHRlciA9IG1lc3NhZ2VGb3JtYXR0ZXI7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSA9IEV4cG9ydHNfMS5Db25uZWN0aW9uU3RhdGUuTm9uZTtcbiAgICAgICAgdGhpcy5wcml2VXJpID0gdXJpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIucHJvdG90eXBlLCBcInN0YXRlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvblN0YXRlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIucHJvdG90eXBlLCBcImV2ZW50c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25FdmVudHM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFdlYnNvY2tldE1lc3NhZ2VBZGFwdGVyLmZvcmNlTnBtV2ViU29ja2V0ID0gZmFsc2U7XG4gICAgcmV0dXJuIFdlYnNvY2tldE1lc3NhZ2VBZGFwdGVyO1xufSgpKTtcbmV4cG9ydHMuV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIgPSBXZWJzb2NrZXRNZXNzYWdlQWRhcHRlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyoqXG4gKiBAY2xhc3MgQWRkZWRMbUludGVudFxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBBZGRlZExtSW50ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIG1vZGVsSW1wbCAtIFRoZSBtb2RlbC5cbiAgICAgKiBAcGFyYW0gaW50ZW50TmFtZSAtIFRoZSBpbnRlbnQgbmFtZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBZGRlZExtSW50ZW50KG1vZGVsSW1wbCwgaW50ZW50TmFtZSkge1xuICAgICAgICB0aGlzLm1vZGVsSW1wbCA9IG1vZGVsSW1wbDtcbiAgICAgICAgdGhpcy5pbnRlbnROYW1lID0gaW50ZW50TmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIEFkZGVkTG1JbnRlbnQ7XG59KCkpO1xuZXhwb3J0cy5BZGRlZExtSW50ZW50ID0gQWRkZWRMbUludGVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWRkZWRMbUludGVudC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9FeHBvcnRzXCIpO1xudmFyIElBdXRoZW50aWNhdGlvbl8xID0gcmVxdWlyZShcIi4vSUF1dGhlbnRpY2F0aW9uXCIpO1xudmFyIEF1dGhIZWFkZXIgPSBcIk9jcC1BcGltLVN1YnNjcmlwdGlvbi1LZXlcIjtcbi8qKlxuICogQGNsYXNzXG4gKi9cbnZhciBDb2duaXRpdmVTdWJzY3JpcHRpb25LZXlBdXRoZW50aWNhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGUgQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24gY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvbktleSAtIFRoZSBzdWJzY3JpcHRpb24ga2V5XG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24oc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGZXRjaGVzIHRoZSBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAgICAgKiBAbWVtYmVyXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRoRmV0Y2hFdmVudElkIC0gVGhlIGlkIHRvIGZldGNoLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mZXRjaCA9IGZ1bmN0aW9uIChhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18xLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdChfdGhpcy5wcml2QXV0aEluZm8pO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRmV0Y2hlcyB0aGUgc3Vic2NyaXB0aW9uIGtleS5cbiAgICAgICAgICogQG1lbWJlclxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aEZldGNoRXZlbnRJZCAtIFRoZSBpZCB0byBmZXRjaC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmV0Y2hPbkV4cGlyeSA9IGZ1bmN0aW9uIChhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18xLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdChfdGhpcy5wcml2QXV0aEluZm8pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEV4cG9ydHNfMS5Bcmd1bWVudE51bGxFcnJvcihcInN1YnNjcmlwdGlvbktleVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZBdXRoSW5mbyA9IG5ldyBJQXV0aGVudGljYXRpb25fMS5BdXRoSW5mbyhBdXRoSGVhZGVyLCBzdWJzY3JpcHRpb25LZXkpO1xuICAgIH1cbiAgICByZXR1cm4gQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb247XG59KCkpO1xuZXhwb3J0cy5Db2duaXRpdmVTdWJzY3JpcHRpb25LZXlBdXRoZW50aWNhdGlvbiA9IENvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2duaXRpdmVTdWJzY3JpcHRpb25LZXlBdXRoZW50aWNhdGlvbi5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9FeHBvcnRzXCIpO1xudmFyIElBdXRoZW50aWNhdGlvbl8xID0gcmVxdWlyZShcIi4vSUF1dGhlbnRpY2F0aW9uXCIpO1xudmFyIEF1dGhIZWFkZXIgPSBcIkF1dGhvcml6YXRpb25cIjtcbnZhciBDb2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24oZmV0Y2hDYWxsYmFjaywgZmV0Y2hPbkV4cGlyeUNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZmV0Y2ggPSBmdW5jdGlvbiAoYXV0aEZldGNoRXZlbnRJZCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZGZXRjaENhbGxiYWNrKGF1dGhGZXRjaEV2ZW50SWQpLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aChmdW5jdGlvbiAodG9rZW4pIHsgcmV0dXJuIG5ldyBJQXV0aGVudGljYXRpb25fMS5BdXRoSW5mbyhBdXRoSGVhZGVyLCB0b2tlbik7IH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZldGNoT25FeHBpcnkgPSBmdW5jdGlvbiAoYXV0aEZldGNoRXZlbnRJZCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZGZXRjaE9uRXhwaXJ5Q2FsbGJhY2soYXV0aEZldGNoRXZlbnRJZCkub25TdWNjZXNzQ29udGludWVXaXRoKGZ1bmN0aW9uICh0b2tlbikgeyByZXR1cm4gbmV3IElBdXRoZW50aWNhdGlvbl8xLkF1dGhJbmZvKEF1dGhIZWFkZXIsIHRva2VuKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICghZmV0Y2hDYWxsYmFjaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEV4cG9ydHNfMS5Bcmd1bWVudE51bGxFcnJvcihcImZldGNoQ2FsbGJhY2tcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmZXRjaE9uRXhwaXJ5Q2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFeHBvcnRzXzEuQXJndW1lbnROdWxsRXJyb3IoXCJmZXRjaE9uRXhwaXJ5Q2FsbGJhY2tcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2RmV0Y2hDYWxsYmFjayA9IGZldGNoQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMucHJpdkZldGNoT25FeHBpcnlDYWxsYmFjayA9IGZldGNoT25FeHBpcnlDYWxsYmFjaztcbiAgICB9XG4gICAgcmV0dXJuIENvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb247XG59KCkpO1xuZXhwb3J0cy5Db2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uID0gQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbi5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqIFJlc3BvbnNpYmxlIGZvciBidWlsZGluZyB0aGUgb2JqZWN0IHRvIGJlIHNlbnQgdG8gdGhlIHNwZWVjaCBzZXJ2aWNlIHRvIHN1cHBvcnQgZHluYW1pYyBncmFtbWFycy5cbiAqIEBjbGFzcyBEeW5hbWljR3JhbW1hckJ1aWxkZXJcbiAqL1xudmFyIER5bmFtaWNHcmFtbWFyQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEeW5hbWljR3JhbW1hckJ1aWxkZXIoKSB7XG4gICAgfVxuICAgIC8vIEFkZHMgb25lIG1vcmUgcmVmZXJlbmNlIHBocmFzZXMgdG8gdGhlIGR5bmFtaWMgZ3JhbW1hciB0byBzZW5kLlxuICAgIC8vIEFsbCBhZGRlZCBwaHJhc2VzIGFyZSBnZW5lcmljIHBocmFzZXMuXG4gICAgRHluYW1pY0dyYW1tYXJCdWlsZGVyLnByb3RvdHlwZS5hZGRQaHJhc2UgPSBmdW5jdGlvbiAocGhyYXNlKSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2UGhyYXNlcykge1xuICAgICAgICAgICAgdGhpcy5wcml2UGhyYXNlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwaHJhc2UgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgdGhpcy5wcml2UGhyYXNlcyA9IHRoaXMucHJpdlBocmFzZXMuY29uY2F0KHBocmFzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByaXZQaHJhc2VzLnB1c2gocGhyYXNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gQ2xlYXJzIGFsbCBwaHJhc2VzIHN0b3JlZCBpbiB0aGUgY3VycmVudCBvYmplY3QuXG4gICAgRHluYW1pY0dyYW1tYXJCdWlsZGVyLnByb3RvdHlwZS5jbGVhclBocmFzZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJpdlBocmFzZXMgPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvLyBBZGRzIG9uZSBvciBtb3JlIHJlZmVyZW5jZSBncmFtbWFycyB0byB0aGUgY3VycmVudCBncmFtbWFyLlxuICAgIER5bmFtaWNHcmFtbWFyQnVpbGRlci5wcm90b3R5cGUuYWRkUmVmZXJlbmNlR3JhbW1hciA9IGZ1bmN0aW9uIChncmFtbWFyKSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2R3JhbW1hcnMpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkdyYW1tYXJzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdyYW1tYXIgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgdGhpcy5wcml2R3JhbW1hcnMgPSB0aGlzLnByaXZHcmFtbWFycy5jb25jYXQoZ3JhbW1hcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByaXZHcmFtbWFycy5wdXNoKGdyYW1tYXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBjbGVhcnMgYWxsIGdyYW1tYXJzIHN0b3JlZCBvbiB0aGUgcmVjb2duaXplci5cbiAgICBEeW5hbWljR3JhbW1hckJ1aWxkZXIucHJvdG90eXBlLmNsZWFyR3JhbW1hcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJpdkdyYW1tYXJzID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLy8gR2VuZXJhdGVzIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIGR5bmFtaWMgZ3JhbW1hciB1c2VkIGJ5IHRoZSBTcGVlY2ggU2VydmljZS5cbiAgICAvLyBUaGlzIGlzIGRvbmUgYnkgYnVpbGRpbmcgYW4gb2JqZWN0IHdpdGggdGhlIGNvcnJlY3QgbGF5b3V0IGJhc2VkIG9uIHRoZSBwaHJhc2VzIGFuZCByZWZlcmVuY2UgZ3JhbW1hcnMgYWRkZWQgdG8gdGhpcyBpbnN0YW5jZVxuICAgIC8vIG9mIGEgRHluYW1pY0dyYW1tYXJCdWlsZGVyXG4gICAgRHluYW1pY0dyYW1tYXJCdWlsZGVyLnByb3RvdHlwZS5nZW5lcmF0ZUdyYW1tYXJPYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZHcmFtbWFycyA9PT0gdW5kZWZpbmVkICYmIHRoaXMucHJpdlBocmFzZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmV0T2JqID0ge307XG4gICAgICAgIHJldE9iai5SZWZlcmVuY2VHcmFtbWFycyA9IHRoaXMucHJpdkdyYW1tYXJzO1xuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLnByaXZQaHJhc2VzICYmIDAgIT09IHRoaXMucHJpdlBocmFzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgcmV0UGhyYXNlc18xID0gW107XG4gICAgICAgICAgICB0aGlzLnByaXZQaHJhc2VzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICByZXRQaHJhc2VzXzEucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIFRleHQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXRPYmouR3JvdXBzID0gW3sgVHlwZTogXCJHZW5lcmljXCIsIEl0ZW1zOiByZXRQaHJhc2VzXzEgfV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldE9iajtcbiAgICB9O1xuICAgIHJldHVybiBEeW5hbWljR3JhbW1hckJ1aWxkZXI7XG59KCkpO1xuZXhwb3J0cy5EeW5hbWljR3JhbW1hckJ1aWxkZXIgPSBEeW5hbWljR3JhbW1hckJ1aWxkZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUR5bmFtaWNHcmFtbWFyQnVpbGRlci5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL3Nkay9FeHBvcnRzXCIpO1xudmFyIEV4cG9ydHNfMiA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG52YXIgRW51bVRyYW5zbGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVudW1UcmFuc2xhdGlvbigpIHtcbiAgICB9XG4gICAgRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVSZWNvZ25pdGlvblJlc3VsdCA9IGZ1bmN0aW9uIChyZWNvZ25pdGlvblN0YXR1cykge1xuICAgICAgICB2YXIgcmVhc29uID0gRXhwb3J0c18xLlJlc3VsdFJlYXNvbi5DYW5jZWxlZDtcbiAgICAgICAgc3dpdGNoIChyZWNvZ25pdGlvblN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSBFeHBvcnRzXzIuUmVjb2duaXRpb25TdGF0dXMuU3VjY2VzczpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBFeHBvcnRzXzEuUmVzdWx0UmVhc29uLlJlY29nbml6ZWRTcGVlY2g7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEV4cG9ydHNfMi5SZWNvZ25pdGlvblN0YXR1cy5Ob01hdGNoOlxuICAgICAgICAgICAgY2FzZSBFeHBvcnRzXzIuUmVjb2duaXRpb25TdGF0dXMuSW5pdGlhbFNpbGVuY2VUaW1lb3V0OlxuICAgICAgICAgICAgY2FzZSBFeHBvcnRzXzIuUmVjb2duaXRpb25TdGF0dXMuQmFiYmxlVGltZW91dDpcbiAgICAgICAgICAgIGNhc2UgRXhwb3J0c18yLlJlY29nbml0aW9uU3RhdHVzLkVuZE9mRGljdGF0aW9uOlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IEV4cG9ydHNfMS5SZXN1bHRSZWFzb24uTm9NYXRjaDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRXhwb3J0c18yLlJlY29nbml0aW9uU3RhdHVzLkVycm9yOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBFeHBvcnRzXzEuUmVzdWx0UmVhc29uLkNhbmNlbGVkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWFzb247XG4gICAgfTtcbiAgICBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdCA9IGZ1bmN0aW9uIChyZWNvZ25pdGlvblN0YXR1cykge1xuICAgICAgICB2YXIgcmVhc29uID0gRXhwb3J0c18xLkNhbmNlbGxhdGlvblJlYXNvbi5FbmRPZlN0cmVhbTtcbiAgICAgICAgc3dpdGNoIChyZWNvZ25pdGlvblN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSBFeHBvcnRzXzIuUmVjb2duaXRpb25TdGF0dXMuU3VjY2VzczpcbiAgICAgICAgICAgIGNhc2UgRXhwb3J0c18yLlJlY29nbml0aW9uU3RhdHVzLkVuZE9mRGljdGF0aW9uOlxuICAgICAgICAgICAgY2FzZSBFeHBvcnRzXzIuUmVjb2duaXRpb25TdGF0dXMuTm9NYXRjaDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBFeHBvcnRzXzEuQ2FuY2VsbGF0aW9uUmVhc29uLkVuZE9mU3RyZWFtO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBFeHBvcnRzXzIuUmVjb2duaXRpb25TdGF0dXMuSW5pdGlhbFNpbGVuY2VUaW1lb3V0OlxuICAgICAgICAgICAgY2FzZSBFeHBvcnRzXzIuUmVjb2duaXRpb25TdGF0dXMuQmFiYmxlVGltZW91dDpcbiAgICAgICAgICAgIGNhc2UgRXhwb3J0c18yLlJlY29nbml0aW9uU3RhdHVzLkVycm9yOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBFeHBvcnRzXzEuQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWFzb247XG4gICAgfTtcbiAgICByZXR1cm4gRW51bVRyYW5zbGF0aW9uO1xufSgpKTtcbmV4cG9ydHMuRW51bVRyYW5zbGF0aW9uID0gRW51bVRyYW5zbGF0aW9uO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbnVtVHJhbnNsYXRpb24uanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIE1ha2Ugc3VyZSBub3QgdG8gZXhwb3J0IGludGVybmFsIG1vZHVsZXMuXG4vL1xuX19leHBvcnQocmVxdWlyZShcIi4vQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb25cIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvblwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9JQXV0aGVudGljYXRpb25cIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vSW50ZW50Q29ubmVjdGlvbkZhY3RvcnlcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vUmVjb2duaXRpb25FdmVudHNcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vU2VydmljZVJlY29nbml6ZXJCYXNlXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1JlY29nbml6ZXJDb25maWdcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9TcGVlY2hDb25uZWN0aW9uRmFjdG9yeVwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9UcmFuc2xhdGlvbkNvbm5lY3Rpb25GYWN0b3J5XCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0VudW1UcmFuc2xhdGlvblwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9TZXJ2aWNlTWVzc2FnZXMvRW51bXNcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vU2VydmljZU1lc3NhZ2VzL1RyYW5zbGF0aW9uU3ludGhlc2lzRW5kXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1NlcnZpY2VNZXNzYWdlcy9UcmFuc2xhdGlvbkh5cG90aGVzaXNcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vU2VydmljZU1lc3NhZ2VzL1RyYW5zbGF0aW9uUGhyYXNlXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1RyYW5zbGF0aW9uU2VydmljZVJlY29nbml6ZXJcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vU2VydmljZU1lc3NhZ2VzL1NwZWVjaERldGVjdGVkXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1NlcnZpY2VNZXNzYWdlcy9TcGVlY2hIeXBvdGhlc2lzXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1NwZWVjaFNlcnZpY2VSZWNvZ25pemVyXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1NlcnZpY2VNZXNzYWdlcy9EZXRhaWxlZFNwZWVjaFBocmFzZVwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9TZXJ2aWNlTWVzc2FnZXMvU2ltcGxlU3BlZWNoUGhyYXNlXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0FkZGVkTG1JbnRlbnRcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vSW50ZW50U2VydmljZVJlY29nbml6ZXJcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vU2VydmljZU1lc3NhZ2VzL0ludGVudFJlc3BvbnNlXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1JlcXVlc3RTZXNzaW9uXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1NwZWVjaENvbnRleHRcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vRHluYW1pY0dyYW1tYXJCdWlsZGVyXCIpKTtcbmV4cG9ydHMuT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lID0gXCJPdXRwdXRGb3JtYXRcIjtcbmV4cG9ydHMuQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lID0gXCJDYW5jZWxsYXRpb25FcnJvckNvZGVcIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhwb3J0cy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgQXV0aEluZm8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXV0aEluZm8oaGVhZGVyTmFtZSwgdG9rZW4pIHtcbiAgICAgICAgdGhpcy5wcml2SGVhZGVyTmFtZSA9IGhlYWRlck5hbWU7XG4gICAgICAgIHRoaXMucHJpdlRva2VuID0gdG9rZW47XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdXRoSW5mby5wcm90b3R5cGUsIFwiaGVhZGVyTmFtZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkhlYWRlck5hbWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdXRoSW5mby5wcm90b3R5cGUsIFwidG9rZW5cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZUb2tlbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEF1dGhJbmZvO1xufSgpKTtcbmV4cG9ydHMuQXV0aEluZm8gPSBBdXRoSW5mbztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SUF1dGhlbnRpY2F0aW9uLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiKTtcbnZhciBFeHBvcnRzXzIgPSByZXF1aXJlKFwiLi4vc2RrL0V4cG9ydHNcIik7XG52YXIgRXhwb3J0c18zID0gcmVxdWlyZShcIi4vRXhwb3J0c1wiKTtcbnZhciBUZXN0SG9va3NQYXJhbU5hbWUgPSBcInRlc3Rob29rc1wiO1xudmFyIENvbm5lY3Rpb25JZEhlYWRlciA9IFwiWC1Db25uZWN0aW9uSWRcIjtcbnZhciBJbnRlbnRDb25uZWN0aW9uRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbnRlbnRDb25uZWN0aW9uRmFjdG9yeSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5jcmVhdGUgPSBmdW5jdGlvbiAoY29uZmlnLCBhdXRoSW5mbywgY29ubmVjdGlvbklkKSB7XG4gICAgICAgICAgICB2YXIgZW5kcG9pbnQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCk7XG4gICAgICAgICAgICBpZiAoIWVuZHBvaW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlZ2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0ludGVudFJlZ2lvbik7XG4gICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBcIndzczovL3NwZWVjaC5wbGF0Zm9ybS5iaW5nLmNvbS9zcGVlY2gvXCIgKyBfdGhpcy5nZXRTcGVlY2hSZWdpb25Gcm9tSW50ZW50UmVnaW9uKHJlZ2lvbikgKyBcIi9yZWNvZ25pdGlvbi9pbnRlcmFjdGl2ZS9jb2duaXRpdmVzZXJ2aWNlcy92MVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogXCJzaW1wbGVcIixcbiAgICAgICAgICAgICAgICBsYW5ndWFnZTogY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyc1thdXRoSW5mby5oZWFkZXJOYW1lXSA9IGF1dGhJbmZvLnRva2VuO1xuICAgICAgICAgICAgaGVhZGVyc1tDb25uZWN0aW9uSWRIZWFkZXJdID0gY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHBvcnRzXzEuV2Vic29ja2V0Q29ubmVjdGlvbihlbmRwb2ludCwgcXVlcnlQYXJhbXMsIGhlYWRlcnMsIG5ldyBFeHBvcnRzXzMuV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBFeHBvcnRzXzEuUHJveHlJbmZvLmZyb21SZWNvZ25pemVyQ29uZmlnKGNvbmZpZyksIGNvbm5lY3Rpb25JZCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIEludGVudENvbm5lY3Rpb25GYWN0b3J5LnByb3RvdHlwZS5nZXRTcGVlY2hSZWdpb25Gcm9tSW50ZW50UmVnaW9uID0gZnVuY3Rpb24gKGludGVudFJlZ2lvbikge1xuICAgICAgICBzd2l0Y2ggKGludGVudFJlZ2lvbikge1xuICAgICAgICAgICAgY2FzZSBcIldlc3QgVVNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBXZXN0XCI6XG4gICAgICAgICAgICBjYXNlIFwid2VzdHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXN3ZXN0XCI7XG4gICAgICAgICAgICBjYXNlIFwiV2VzdCBVUyAyXCI6XG4gICAgICAgICAgICBjYXNlIFwiVVMgV2VzdCAyXCI6XG4gICAgICAgICAgICBjYXNlIFwid2VzdHVzMlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInVzd2VzdDJcIjtcbiAgICAgICAgICAgIGNhc2UgXCJTb3V0aCBDZW50cmFsIFVTXCI6XG4gICAgICAgICAgICBjYXNlIFwiVVMgU291dGggQ2VudHJhbFwiOlxuICAgICAgICAgICAgY2FzZSBcInNvdXRoY2VudHJhbHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXNzb3V0aGNlbnRyYWxcIjtcbiAgICAgICAgICAgIGNhc2UgXCJXZXN0IENlbnRyYWwgVVNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBXZXN0IENlbnRyYWxcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ3ZXN0Y2VudHJhbHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXN3ZXN0Y2VudHJhbFwiO1xuICAgICAgICAgICAgY2FzZSBcIkVhc3QgVVNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBFYXN0XCI6XG4gICAgICAgICAgICBjYXNlIFwiZWFzdHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXNlYXN0XCI7XG4gICAgICAgICAgICBjYXNlIFwiRWFzdCBVUyAyXCI6XG4gICAgICAgICAgICBjYXNlIFwiVVMgRWFzdCAyXCI6XG4gICAgICAgICAgICBjYXNlIFwiZWFzdHVzMlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInVzZWFzdDJcIjtcbiAgICAgICAgICAgIGNhc2UgXCJXZXN0IEV1cm9wZVwiOlxuICAgICAgICAgICAgY2FzZSBcIkV1cm9wZSBXZXN0XCI6XG4gICAgICAgICAgICBjYXNlIFwid2VzdGV1cm9wZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImV1cm9wZXdlc3RcIjtcbiAgICAgICAgICAgIGNhc2UgXCJOb3J0aCBFdXJvcGVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJFdXJvcGUgTm9ydGhcIjpcbiAgICAgICAgICAgIGNhc2UgXCJub3J0aGV1cm9wZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImV1cm9wZW5vcnRoXCI7XG4gICAgICAgICAgICBjYXNlIFwiQnJhemlsIFNvdXRoXCI6XG4gICAgICAgICAgICBjYXNlIFwiU291dGggQnJhemlsXCI6XG4gICAgICAgICAgICBjYXNlIFwic291dGhicmF6aWxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJicmF6aWxzb3V0aFwiO1xuICAgICAgICAgICAgY2FzZSBcIkF1c3RyYWxpYSBFYXN0XCI6XG4gICAgICAgICAgICBjYXNlIFwiRWFzdCBBdXN0cmFsaWFcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlYXN0YXVzdHJhbGlhXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXVzdHJhbGlhZWFzdFwiO1xuICAgICAgICAgICAgY2FzZSBcIlNvdXRoZWFzdCBBc2lhXCI6XG4gICAgICAgICAgICBjYXNlIFwiQXNpYSBTb3V0aGVhc3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzb3V0aGVhc3Rhc2lhXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXNpYXNvdXRoZWFzdFwiO1xuICAgICAgICAgICAgY2FzZSBcIkVhc3QgQXNpYVwiOlxuICAgICAgICAgICAgY2FzZSBcIkFzaWEgRWFzdFwiOlxuICAgICAgICAgICAgY2FzZSBcImVhc3Rhc2lhXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXNpYWVhc3RcIjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGludGVudFJlZ2lvbjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEludGVudENvbm5lY3Rpb25GYWN0b3J5O1xufSgpKTtcbmV4cG9ydHMuSW50ZW50Q29ubmVjdGlvbkZhY3RvcnkgPSBJbnRlbnRDb25uZWN0aW9uRmFjdG9yeTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZW50Q29ubmVjdGlvbkZhY3RvcnkuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9FeHBvcnRzXCIpO1xudmFyIEV4cG9ydHNfMiA9IHJlcXVpcmUoXCIuLi9zZGsvRXhwb3J0c1wiKTtcbnZhciBFeHBvcnRzXzMgPSByZXF1aXJlKFwiLi9FeHBvcnRzXCIpO1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgSW50ZW50U2VydmljZVJlY29nbml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEludGVudFNlcnZpY2VSZWNvZ25pemVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEludGVudFNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHJlY29nbml6ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgcmVjb2duaXplcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJpdkludGVudFJlY29nbml6ZXIgPSByZWNvZ25pemVyO1xuICAgICAgICBfdGhpcy5wcml2SW50ZW50RGF0YVNlbnQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBJbnRlbnRTZXJ2aWNlUmVjb2duaXplci5wcm90b3R5cGUuc2V0SW50ZW50cyA9IGZ1bmN0aW9uIChhZGRlZEludGVudHMsIHVtYnJlbGxhSW50ZW50KSB7XG4gICAgICAgIHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzID0gYWRkZWRJbnRlbnRzO1xuICAgICAgICB0aGlzLnByaXZVbWJyZWxsYUludGVudCA9IHVtYnJlbGxhSW50ZW50O1xuICAgICAgICB0aGlzLnByaXZJbnRlbnREYXRhU2VudCA9IHRydWU7XG4gICAgfTtcbiAgICBJbnRlbnRTZXJ2aWNlUmVjb2duaXplci5wcm90b3R5cGUucHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzID0gZnVuY3Rpb24gKGNvbm5lY3Rpb25NZXNzYWdlLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2spIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdmFyIGV2O1xuICAgICAgICB2YXIgcmVzdWx0UHJvcHMgPSBuZXcgRXhwb3J0c18yLlByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBpZiAoY29ubmVjdGlvbk1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IEV4cG9ydHNfMS5NZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICByZXN1bHRQcm9wcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlIFwic3BlZWNoLmh5cG90aGVzaXNcIjpcbiAgICAgICAgICAgICAgICB2YXIgc3BlZWNoSHlwb3RoZXNpcyA9IEV4cG9ydHNfMy5TcGVlY2hIeXBvdGhlc2lzLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgRXhwb3J0c18yLkludGVudFJlY29nbml0aW9uUmVzdWx0KHVuZGVmaW5lZCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBFeHBvcnRzXzIuUmVzdWx0UmVhc29uLlJlY29nbml6aW5nSW50ZW50LCBzcGVlY2hIeXBvdGhlc2lzLlRleHQsIHNwZWVjaEh5cG90aGVzaXMuRHVyYXRpb24sIHNwZWVjaEh5cG90aGVzaXMuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCwgdW5kZWZpbmVkLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uSHlwb3RoZXNpcyhyZXN1bHQub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBldiA9IG5ldyBFeHBvcnRzXzIuSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBzcGVlY2hIeXBvdGhlc2lzLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5yZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5yZWNvZ25pemluZyh0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5waHJhc2VcIjpcbiAgICAgICAgICAgICAgICB2YXIgc2ltcGxlID0gRXhwb3J0c18zLlNpbXBsZVNwZWVjaFBocmFzZS5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEV4cG9ydHNfMi5JbnRlbnRSZWNvZ25pdGlvblJlc3VsdCh1bmRlZmluZWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgRXhwb3J0c18zLkVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlUmVjb2duaXRpb25SZXN1bHQoc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzKSwgc2ltcGxlLkRpc3BsYXlUZXh0LCBzaW1wbGUuRHVyYXRpb24sIHNpbXBsZS5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0LCB1bmRlZmluZWQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5LCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgZXYgPSBuZXcgRXhwb3J0c18yLkludGVudFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgcmVzdWx0Lm9mZnNldCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VuZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISFfdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5yZWNvZ25pemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLnJlY29nbml6ZWQoX3RoaXMucHJpdkludGVudFJlY29nbml6ZXIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyByZXBvcnQgcmVzdWx0IHRvIHByb21pc2UuXG4gICAgICAgICAgICAgICAgICAgIGlmICghIXN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyb3JDYWxsQmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaW52b2tlIHRoZSBjYWxsIGJhY2sgb25jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpZiBpdCdzIHN1Y2Nlc3NmdWwgZG9uJ3QgaW52b2tlIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IgYWZ0ZXIgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ2FsbEJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIElmIGludGVudCBkYXRhIHdhcyBzZW50LCB0aGUgdGVybWluYWwgcmVzdWx0IGZvciB0aGlzIHJlY29nbml6ZXIgaXMgYW4gaW50ZW50IGJlaW5nIGZvdW5kLlxuICAgICAgICAgICAgICAgIC8vIElmIG5vIGludGVudCBkYXRhIHdhcyBzZW50LCB0aGUgdGVybWluYWwgZXZlbnQgaXMgc3BlZWNoIHJlY29nbml0aW9uIGJlaW5nIHN1Y2Nlc3NmdWwuXG4gICAgICAgICAgICAgICAgaWYgKGZhbHNlID09PSB0aGlzLnByaXZJbnRlbnREYXRhU2VudCB8fCBFeHBvcnRzXzIuUmVzdWx0UmVhc29uLk5vTWF0Y2ggPT09IGV2LnJlc3VsdC5yZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgYnVmZmVycy5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QaHJhc2VSZWNvZ25pemVkKGV2Lm9mZnNldCArIGV2LnJlc3VsdC5kdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRFdmVudCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3F1aXJyZWwgYXdheSB0aGUgYXJncywgd2hlbiB0aGUgcmVzcG9uc2UgZXZlbnQgYXJyaXZlcyBpdCB3aWxsIGJ1aWxkIHVwb24gdGhlbVxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhlbiByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UGVuZGluZ0ludGVudEFyZ3MgPSBldjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmVzcG9uc2VcIjpcbiAgICAgICAgICAgICAgICAvLyBSZXNwb25zZSBmcm9tIExVSVNcbiAgICAgICAgICAgICAgICBldiA9IHRoaXMucHJpdlBlbmRpbmdJbnRlbnRBcmdzO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlBlbmRpbmdJbnRlbnRBcmdzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGV2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcIlwiID09PSBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjb25kaXRpb24gaGFwcGVucyBpZiB0aGVyZSBpcyBub3RoaW5nIGJ1dCBzaWxlbmNlIGluIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXVkaW8gc2VudCB0byB0aGUgc2VydmljZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBPZGQuLi4gTm90IHN1cmUgdGhpcyBjYW4gaGFwcGVuXG4gICAgICAgICAgICAgICAgICAgIGV2ID0gbmV3IEV4cG9ydHNfMi5JbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncyhuZXcgRXhwb3J0c18yLkludGVudFJlY29nbml0aW9uUmVzdWx0KCksIDAgLypUT0RPKi8sIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpbnRlbnRSZXNwb25zZSA9IEV4cG9ydHNfMy5JbnRlbnRSZXNwb25zZS5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgLy8gSWYgTFVJUyBkaWRuJ3QgcmV0dXJuIGFueXRoaW5nLCBzZW5kIHRoZSBleGlzdGluZyBldmVudCwgZWxzZVxuICAgICAgICAgICAgICAgIC8vIG1vZGlmeSBpdCB0byBzaG93IHRoZSBtYXRjaC5cbiAgICAgICAgICAgICAgICAvLyBTZWUgaWYgdGhlIGludGVudCBmb3VuZCBpcyBpbiB0aGUgbGlzdCBvZiBpbnRlbnRzIGFza2VkIGZvci5cbiAgICAgICAgICAgICAgICB2YXIgYWRkZWRJbnRlbnQgPSB0aGlzLnByaXZBZGRlZExtSW50ZW50c1tpbnRlbnRSZXNwb25zZS50b3BTY29yaW5nSW50ZW50LmludGVudF07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlVtYnJlbGxhSW50ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRJbnRlbnQgPSB0aGlzLnByaXZVbWJyZWxsYUludGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGludGVudFJlc3BvbnNlICYmIGFkZGVkSW50ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGludGVudElkID0gYWRkZWRJbnRlbnQuaW50ZW50TmFtZSA9PT0gdW5kZWZpbmVkID8gaW50ZW50UmVzcG9uc2UudG9wU2NvcmluZ0ludGVudC5pbnRlbnQgOiBhZGRlZEludGVudC5pbnRlbnROYW1lO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVhc29uID0gZXYucmVzdWx0LnJlYXNvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gaW50ZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbiA9IEV4cG9ydHNfMi5SZXN1bHRSZWFzb24uUmVjb2duaXplZEludGVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUsIHByb3BlcnRpZXMgaXMgc2V0LlxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9ICh1bmRlZmluZWQgIT09IGV2LnJlc3VsdC5wcm9wZXJ0aWVzKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBldi5yZXN1bHQucHJvcGVydGllcyA6IG5ldyBFeHBvcnRzXzIuUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMuc2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgZXYgPSBuZXcgRXhwb3J0c18yLkludGVudFJlY29nbml0aW9uRXZlbnRBcmdzKG5ldyBFeHBvcnRzXzIuSW50ZW50UmVjb2duaXRpb25SZXN1bHQoaW50ZW50SWQsIGV2LnJlc3VsdC5yZXN1bHRJZCwgcmVhc29uLCBldi5yZXN1bHQudGV4dCwgZXYucmVzdWx0LmR1cmF0aW9uLCBldi5yZXN1bHQub2Zmc2V0LCBldi5yZXN1bHQuZXJyb3JEZXRhaWxzLCBldi5yZXN1bHQuanNvbiwgcHJvcGVydGllcyksIGV2Lm9mZnNldCwgZXYuc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QaHJhc2VSZWNvZ25pemVkKGV2Lm9mZnNldCArIGV2LnJlc3VsdC5kdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5yZWNvZ25pemVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLnJlY29nbml6ZWQodGhpcy5wcml2SW50ZW50UmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyByZXBvcnQgcmVzdWx0IHRvIHByb21pc2UuXG4gICAgICAgICAgICAgICAgaWYgKCEhc3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2soZXYucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyb3JDYWxsQmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ2FsbEJhY2soZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBpbnZva2UgdGhlIGNhbGwgYmFjayBvbmNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IgYWZ0ZXIgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIENhbmNlbHMgcmVjb2duaXRpb24uXG4gICAgSW50ZW50U2VydmljZVJlY29nbml6ZXIucHJvdG90eXBlLmNhbmNlbFJlY29nbml0aW9uID0gZnVuY3Rpb24gKHNlc3Npb25JZCwgcmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IsIGNhbmNlbFJlY29DYWxsYmFjaykge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLmNhbmNlbGVkKSB7XG4gICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IG5ldyBFeHBvcnRzXzIuUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KEV4cG9ydHNfMy5DYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIEV4cG9ydHNfMi5DYW5jZWxsYXRpb25FcnJvckNvZGVbZXJyb3JDb2RlXSk7XG4gICAgICAgICAgICB2YXIgY2FuY2VsRXZlbnQgPSBuZXcgRXhwb3J0c18yLkludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MoY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvciwgZXJyb3JDb2RlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5jYW5jZWxlZCh0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLCBjYW5jZWxFdmVudCk7XG4gICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgICAgICBpZiAoISFjYW5jZWxSZWNvQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEV4cG9ydHNfMi5JbnRlbnRSZWNvZ25pdGlvblJlc3VsdCh1bmRlZmluZWQsIC8vIEludGVudCBJZFxuICAgICAgICAgICAgICAgIHJlcXVlc3RJZCwgRXhwb3J0c18yLlJlc3VsdFJlYXNvbi5DYW5jZWxlZCwgdW5kZWZpbmVkLCAvLyBUZXh0XG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBEcnVhdGlvblxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gT2Zmc2V0XG4gICAgICAgICAgICAgICAgZXJyb3IsIHVuZGVmaW5lZCwgLy8gSnNvblxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbFJlY29DYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoX2IpIHsgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gSW50ZW50U2VydmljZVJlY29nbml6ZXI7XG59KEV4cG9ydHNfMy5TZXJ2aWNlUmVjb2duaXplckJhc2UpKTtcbmV4cG9ydHMuSW50ZW50U2VydmljZVJlY29nbml6ZXIgPSBJbnRlbnRTZXJ2aWNlUmVjb2duaXplcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZW50U2VydmljZVJlY29nbml6ZXIuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFF1ZXJ5UGFyYW1ldGVyTmFtZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUXVlcnlQYXJhbWV0ZXJOYW1lcygpIHtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5UGFyYW1ldGVyTmFtZXMsIFwiVGVzdEhvb2tzUGFyYW1OYW1lXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJ0ZXN0aG9va3NcIjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5UGFyYW1ldGVyTmFtZXMsIFwiQ29ubmVjdGlvbklkSGVhZGVyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJYLUNvbm5lY3Rpb25JZFwiO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnlQYXJhbWV0ZXJOYW1lcywgXCJEZXBsb3ltZW50SWRQYXJhbU5hbWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBcImNpZFwiO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnlQYXJhbWV0ZXJOYW1lcywgXCJGb3JtYXRQYXJhbU5hbWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBcImZvcm1hdFwiO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnlQYXJhbWV0ZXJOYW1lcywgXCJMYW5ndWFnZVBhcmFtTmFtZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFwibGFuZ3VhZ2VcIjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5UGFyYW1ldGVyTmFtZXMsIFwiVHJhbnNsYXRpb25Gcm9tUGFyYW1OYW1lXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJmcm9tXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdWVyeVBhcmFtZXRlck5hbWVzLCBcIlRyYW5zbGF0aW9uVG9QYXJhbU5hbWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBcInRvXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBRdWVyeVBhcmFtZXRlck5hbWVzO1xufSgpKTtcbmV4cG9ydHMuUXVlcnlQYXJhbWV0ZXJOYW1lcyA9IFF1ZXJ5UGFyYW1ldGVyTmFtZXM7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXJ5UGFyYW1ldGVyTmFtZXMuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9FeHBvcnRzXCIpO1xudmFyIFNwZWVjaFJlY29nbml0aW9uRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwZWVjaFJlY29nbml0aW9uRXZlbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3BlZWNoUmVjb2duaXRpb25FdmVudChldmVudE5hbWUsIHJlcXVlc3RJZCwgc2Vzc2lvbklkLCBldmVudFR5cGUpIHtcbiAgICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gdm9pZCAwKSB7IGV2ZW50VHlwZSA9IEV4cG9ydHNfMS5FdmVudFR5cGUuSW5mbzsgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBldmVudE5hbWUsIGV2ZW50VHlwZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJpdlJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcbiAgICAgICAgX3RoaXMucHJpdlNlc3Npb25JZCA9IHNlc3Npb25JZDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3BlZWNoUmVjb2duaXRpb25FdmVudC5wcm90b3R5cGUsIFwicmVxdWVzdElkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVxdWVzdElkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3BlZWNoUmVjb2duaXRpb25FdmVudC5wcm90b3R5cGUsIFwic2Vzc2lvbklkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U2Vzc2lvbklkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gU3BlZWNoUmVjb2duaXRpb25FdmVudDtcbn0oRXhwb3J0c18xLlBsYXRmb3JtRXZlbnQpKTtcbmV4cG9ydHMuU3BlZWNoUmVjb2duaXRpb25FdmVudCA9IFNwZWVjaFJlY29nbml0aW9uRXZlbnQ7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBSZWNvZ25pdGlvblRyaWdnZXJlZEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZWNvZ25pdGlvblRyaWdnZXJlZEV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlY29nbml0aW9uVHJpZ2dlcmVkRXZlbnQocmVxdWVzdElkLCBzZXNzaW9uSWQsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudFwiLCByZXF1ZXN0SWQsIHNlc3Npb25JZCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJpdkF1ZGlvU291cmNlSWQgPSBhdWRpb1NvdXJjZUlkO1xuICAgICAgICBfdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudC5wcm90b3R5cGUsIFwiYXVkaW9Tb3VyY2VJZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvU291cmNlSWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pdGlvblRyaWdnZXJlZEV2ZW50LnByb3RvdHlwZSwgXCJhdWRpb05vZGVJZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvTm9kZUlkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudDtcbn0oU3BlZWNoUmVjb2duaXRpb25FdmVudCkpO1xuZXhwb3J0cy5SZWNvZ25pdGlvblRyaWdnZXJlZEV2ZW50ID0gUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudDtcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIExpc3RlbmluZ1N0YXJ0ZWRFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGlzdGVuaW5nU3RhcnRlZEV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIExpc3RlbmluZ1N0YXJ0ZWRFdmVudChyZXF1ZXN0SWQsIHNlc3Npb25JZCwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXCJMaXN0ZW5pbmdTdGFydGVkRXZlbnRcIiwgcmVxdWVzdElkLCBzZXNzaW9uSWQpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgX3RoaXMucHJpdkF1ZGlvTm9kZUlkID0gYXVkaW9Ob2RlSWQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpc3RlbmluZ1N0YXJ0ZWRFdmVudC5wcm90b3R5cGUsIFwiYXVkaW9Tb3VyY2VJZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvU291cmNlSWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMaXN0ZW5pbmdTdGFydGVkRXZlbnQucHJvdG90eXBlLCBcImF1ZGlvTm9kZUlkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBMaXN0ZW5pbmdTdGFydGVkRXZlbnQ7XG59KFNwZWVjaFJlY29nbml0aW9uRXZlbnQpKTtcbmV4cG9ydHMuTGlzdGVuaW5nU3RhcnRlZEV2ZW50ID0gTGlzdGVuaW5nU3RhcnRlZEV2ZW50O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb25uZWN0aW5nVG9TZXJ2aWNlRXZlbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50KHJlcXVlc3RJZCwgYXV0aEZldGNoRXZlbnRpZCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50XCIsIHJlcXVlc3RJZCwgc2Vzc2lvbklkKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2QXV0aEZldGNoRXZlbnRpZCA9IGF1dGhGZXRjaEV2ZW50aWQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbm5lY3RpbmdUb1NlcnZpY2VFdmVudC5wcm90b3R5cGUsIFwiYXV0aEZldGNoRXZlbnRpZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50aWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBDb25uZWN0aW5nVG9TZXJ2aWNlRXZlbnQ7XG59KFNwZWVjaFJlY29nbml0aW9uRXZlbnQpKTtcbmV4cG9ydHMuQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50ID0gQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgUmVjb2duaXRpb25TdGFydGVkRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlY29nbml0aW9uU3RhcnRlZEV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlY29nbml0aW9uU3RhcnRlZEV2ZW50KHJlcXVlc3RJZCwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQsIGF1dGhGZXRjaEV2ZW50SWQsIHNlc3Npb25JZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcIlJlY29nbml0aW9uU3RhcnRlZEV2ZW50XCIsIHJlcXVlc3RJZCwgc2Vzc2lvbklkKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCA9IGF1ZGlvU291cmNlSWQ7XG4gICAgICAgIF90aGlzLnByaXZBdWRpb05vZGVJZCA9IGF1ZGlvTm9kZUlkO1xuICAgICAgICBfdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29nbml0aW9uU3RhcnRlZEV2ZW50LnByb3RvdHlwZSwgXCJhdWRpb1NvdXJjZUlkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29nbml0aW9uU3RhcnRlZEV2ZW50LnByb3RvdHlwZSwgXCJhdWRpb05vZGVJZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvTm9kZUlkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb2duaXRpb25TdGFydGVkRXZlbnQucHJvdG90eXBlLCBcImF1dGhGZXRjaEV2ZW50SWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUmVjb2duaXRpb25TdGFydGVkRXZlbnQ7XG59KFNwZWVjaFJlY29nbml0aW9uRXZlbnQpKTtcbmV4cG9ydHMuUmVjb2duaXRpb25TdGFydGVkRXZlbnQgPSBSZWNvZ25pdGlvblN0YXJ0ZWRFdmVudDtcbnZhciBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXM7XG4oZnVuY3Rpb24gKFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1cykge1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJTdWNjZXNzXCJdID0gMF0gPSBcIlN1Y2Nlc3NcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiQXVkaW9Tb3VyY2VFcnJvclwiXSA9IDFdID0gXCJBdWRpb1NvdXJjZUVycm9yXCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIkF1ZGlvU291cmNlVGltZW91dFwiXSA9IDJdID0gXCJBdWRpb1NvdXJjZVRpbWVvdXRcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiQXV0aFRva2VuRmV0Y2hFcnJvclwiXSA9IDNdID0gXCJBdXRoVG9rZW5GZXRjaEVycm9yXCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIkF1dGhUb2tlbkZldGNoVGltZW91dFwiXSA9IDRdID0gXCJBdXRoVG9rZW5GZXRjaFRpbWVvdXRcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiVW5BdXRob3JpemVkXCJdID0gNV0gPSBcIlVuQXV0aG9yaXplZFwiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJDb25uZWN0VGltZW91dFwiXSA9IDZdID0gXCJDb25uZWN0VGltZW91dFwiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJDb25uZWN0RXJyb3JcIl0gPSA3XSA9IFwiQ29ubmVjdEVycm9yXCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIkNsaWVudFJlY29nbml0aW9uQWN0aXZpdHlUaW1lb3V0XCJdID0gOF0gPSBcIkNsaWVudFJlY29nbml0aW9uQWN0aXZpdHlUaW1lb3V0XCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIlVua25vd25FcnJvclwiXSA9IDldID0gXCJVbmtub3duRXJyb3JcIjtcbn0pKFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1cyA9IGV4cG9ydHMuUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzIHx8IChleHBvcnRzLlJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1cyA9IHt9KSk7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBSZWNvZ25pdGlvbkVuZGVkRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlY29nbml0aW9uRW5kZWRFdmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZWNvZ25pdGlvbkVuZGVkRXZlbnQocmVxdWVzdElkLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCwgYXV0aEZldGNoRXZlbnRJZCwgc2Vzc2lvbklkLCBzZXJ2aWNlVGFnLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiUmVjb2duaXRpb25FbmRlZEV2ZW50XCIsIHJlcXVlc3RJZCwgc2Vzc2lvbklkLCBzdGF0dXMgPT09IFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1cy5TdWNjZXNzID8gRXhwb3J0c18xLkV2ZW50VHlwZS5JbmZvIDogRXhwb3J0c18xLkV2ZW50VHlwZS5FcnJvcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJpdkF1ZGlvU291cmNlSWQgPSBhdWRpb1NvdXJjZUlkO1xuICAgICAgICBfdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICAgICAgX3RoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQgPSBhdXRoRmV0Y2hFdmVudElkO1xuICAgICAgICBfdGhpcy5wcml2U3RhdHVzID0gc3RhdHVzO1xuICAgICAgICBfdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICAgICAgX3RoaXMucHJpdlNlcnZpY2VUYWcgPSBzZXJ2aWNlVGFnO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pdGlvbkVuZGVkRXZlbnQucHJvdG90eXBlLCBcImF1ZGlvU291cmNlSWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb1NvdXJjZUlkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb2duaXRpb25FbmRlZEV2ZW50LnByb3RvdHlwZSwgXCJhdWRpb05vZGVJZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvTm9kZUlkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb2duaXRpb25FbmRlZEV2ZW50LnByb3RvdHlwZSwgXCJhdXRoRmV0Y2hFdmVudElkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29nbml0aW9uRW5kZWRFdmVudC5wcm90b3R5cGUsIFwic2VydmljZVRhZ1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlcnZpY2VUYWc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pdGlvbkVuZGVkRXZlbnQucHJvdG90eXBlLCBcInN0YXR1c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN0YXR1cztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29nbml0aW9uRW5kZWRFdmVudC5wcm90b3R5cGUsIFwiZXJyb3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFJlY29nbml0aW9uRW5kZWRFdmVudDtcbn0oU3BlZWNoUmVjb2duaXRpb25FdmVudCkpO1xuZXhwb3J0cy5SZWNvZ25pdGlvbkVuZGVkRXZlbnQgPSBSZWNvZ25pdGlvbkVuZGVkRXZlbnQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlY29nbml0aW9uRXZlbnRzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBSZWNvZ25pdGlvbk1vZGU7XG4oZnVuY3Rpb24gKFJlY29nbml0aW9uTW9kZSkge1xuICAgIFJlY29nbml0aW9uTW9kZVtSZWNvZ25pdGlvbk1vZGVbXCJJbnRlcmFjdGl2ZVwiXSA9IDBdID0gXCJJbnRlcmFjdGl2ZVwiO1xuICAgIFJlY29nbml0aW9uTW9kZVtSZWNvZ25pdGlvbk1vZGVbXCJDb252ZXJzYXRpb25cIl0gPSAxXSA9IFwiQ29udmVyc2F0aW9uXCI7XG4gICAgUmVjb2duaXRpb25Nb2RlW1JlY29nbml0aW9uTW9kZVtcIkRpY3RhdGlvblwiXSA9IDJdID0gXCJEaWN0YXRpb25cIjtcbn0pKFJlY29nbml0aW9uTW9kZSA9IGV4cG9ydHMuUmVjb2duaXRpb25Nb2RlIHx8IChleHBvcnRzLlJlY29nbml0aW9uTW9kZSA9IHt9KSk7XG52YXIgU3BlZWNoUmVzdWx0Rm9ybWF0O1xuKGZ1bmN0aW9uIChTcGVlY2hSZXN1bHRGb3JtYXQpIHtcbiAgICBTcGVlY2hSZXN1bHRGb3JtYXRbU3BlZWNoUmVzdWx0Rm9ybWF0W1wiU2ltcGxlXCJdID0gMF0gPSBcIlNpbXBsZVwiO1xuICAgIFNwZWVjaFJlc3VsdEZvcm1hdFtTcGVlY2hSZXN1bHRGb3JtYXRbXCJEZXRhaWxlZFwiXSA9IDFdID0gXCJEZXRhaWxlZFwiO1xufSkoU3BlZWNoUmVzdWx0Rm9ybWF0ID0gZXhwb3J0cy5TcGVlY2hSZXN1bHRGb3JtYXQgfHwgKGV4cG9ydHMuU3BlZWNoUmVzdWx0Rm9ybWF0ID0ge30pKTtcbnZhciBSZWNvZ25pemVyQ29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlY29nbml6ZXJDb25maWcoc3BlZWNoU2VydmljZUNvbmZpZywgcGFyYW1ldGVycykge1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pdGlvbk1vZGUgPSBSZWNvZ25pdGlvbk1vZGUuSW50ZXJhY3RpdmU7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFNlcnZpY2VDb25maWcgPSBzcGVlY2hTZXJ2aWNlQ29uZmlnID8gc3BlZWNoU2VydmljZUNvbmZpZyA6IG5ldyBTcGVlY2hTZXJ2aWNlQ29uZmlnKG5ldyBDb250ZXh0KG51bGwpKTtcbiAgICAgICAgdGhpcy5wcml2UGFyYW1ldGVycyA9IHBhcmFtZXRlcnM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pemVyQ29uZmlnLnByb3RvdHlwZSwgXCJwYXJhbWV0ZXJzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFyYW1ldGVycztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29nbml6ZXJDb25maWcucHJvdG90eXBlLCBcInJlY29nbml0aW9uTW9kZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY29nbml0aW9uTW9kZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml0aW9uTW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXRpb25BY3Rpdml0eVRpbWVvdXQgPSB2YWx1ZSA9PT0gUmVjb2duaXRpb25Nb2RlLkludGVyYWN0aXZlID8gODAwMCA6IDI1MDAwO1xuICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoU2VydmljZUNvbmZpZy5SZWNvZ25pdGlvbiA9IFJlY29nbml0aW9uTW9kZVt2YWx1ZV07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pemVyQ29uZmlnLnByb3RvdHlwZSwgXCJTcGVlY2hTZXJ2aWNlQ29uZmlnXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoU2VydmljZUNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29nbml6ZXJDb25maWcucHJvdG90eXBlLCBcInJlY29nbml0aW9uQWN0aXZpdHlUaW1lb3V0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjb2duaXRpb25BY3Rpdml0eVRpbWVvdXQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pemVyQ29uZmlnLnByb3RvdHlwZSwgXCJpc0NvbnRpbnVvdXNSZWNvZ25pdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY29nbml0aW9uTW9kZSAhPT0gUmVjb2duaXRpb25Nb2RlLkludGVyYWN0aXZlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUmVjb2duaXplckNvbmZpZztcbn0oKSk7XG5leHBvcnRzLlJlY29nbml6ZXJDb25maWcgPSBSZWNvZ25pemVyQ29uZmlnO1xuLy8gVGhlIGNvbmZpZyBpcyBzZXJpYWxpemVkIGFuZCBzZW50IGFzIHRoZSBTcGVlY2guQ29uZmlnXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBTcGVlY2hTZXJ2aWNlQ29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNwZWVjaFNlcnZpY2VDb25maWcoY29udGV4dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShfdGhpcywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXBsYWNlbWVudCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRbayAmJiBrLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgay5zdWJzdHJpbmcoMSldID0gdmFsdWVba107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaFNlcnZpY2VDb25maWcucHJvdG90eXBlLCBcIkNvbnRleHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hTZXJ2aWNlQ29uZmlnLnByb3RvdHlwZSwgXCJSZWNvZ25pdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjb2duaXRpb247XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlY29nbml0aW9uID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFNwZWVjaFNlcnZpY2VDb25maWc7XG59KCkpO1xuZXhwb3J0cy5TcGVlY2hTZXJ2aWNlQ29uZmlnID0gU3BlZWNoU2VydmljZUNvbmZpZztcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIENvbnRleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29udGV4dChvcykge1xuICAgICAgICB0aGlzLnN5c3RlbSA9IG5ldyBTeXN0ZW0oKTtcbiAgICAgICAgdGhpcy5vcyA9IG9zO1xuICAgIH1cbiAgICByZXR1cm4gQ29udGV4dDtcbn0oKSk7XG5leHBvcnRzLkNvbnRleHQgPSBDb250ZXh0O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHtcbiAgICAgICAgLy8gTm90ZTogYmVsb3cgd2lsbCBiZSBwYXRjaGVkIGZvciBvZmZpY2lhbCBidWlsZHMuXG4gICAgICAgIHZhciBTUEVFQ0hTREtfQ0xJRU5UU0RLX1ZFUlNJT04gPSBcIjEuNi4wXCI7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiU3BlZWNoU0RLXCI7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IFNQRUVDSFNES19DTElFTlRTREtfVkVSU0lPTjtcbiAgICAgICAgdGhpcy5idWlsZCA9IFwiSmF2YVNjcmlwdFwiO1xuICAgICAgICB0aGlzLmxhbmcgPSBcIkphdmFTY3JpcHRcIjtcbiAgICB9XG4gICAgcmV0dXJuIFN5c3RlbTtcbn0oKSk7XG5leHBvcnRzLlN5c3RlbSA9IFN5c3RlbTtcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIE9TID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9TKHBsYXRmb3JtLCBuYW1lLCB2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBwbGF0Zm9ybTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICB9XG4gICAgcmV0dXJuIE9TO1xufSgpKTtcbmV4cG9ydHMuT1MgPSBPUztcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIERldmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZXZpY2UobWFudWZhY3R1cmVyLCBtb2RlbCwgdmVyc2lvbikge1xuICAgICAgICB0aGlzLm1hbnVmYWN0dXJlciA9IG1hbnVmYWN0dXJlcjtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIH1cbiAgICByZXR1cm4gRGV2aWNlO1xufSgpKTtcbmV4cG9ydHMuRGV2aWNlID0gRGV2aWNlO1xudmFyIGNvbm5lY3Rpdml0eTtcbihmdW5jdGlvbiAoY29ubmVjdGl2aXR5KSB7XG4gICAgY29ubmVjdGl2aXR5W1wiQmx1ZXRvb3RoXCJdID0gXCJCbHVldG9vdGhcIjtcbiAgICBjb25uZWN0aXZpdHlbXCJXaXJlZFwiXSA9IFwiV2lyZWRcIjtcbiAgICBjb25uZWN0aXZpdHlbXCJXaUZpXCJdID0gXCJXaUZpXCI7XG4gICAgY29ubmVjdGl2aXR5W1wiQ2VsbHVsYXJcIl0gPSBcIkNlbGx1bGFyXCI7XG4gICAgY29ubmVjdGl2aXR5W1wiSW5CdWlsdFwiXSA9IFwiSW5CdWlsdFwiO1xuICAgIGNvbm5lY3Rpdml0eVtcIlVua25vd25cIl0gPSBcIlVua25vd25cIjtcbn0pKGNvbm5lY3Rpdml0eSA9IGV4cG9ydHMuY29ubmVjdGl2aXR5IHx8IChleHBvcnRzLmNvbm5lY3Rpdml0eSA9IHt9KSk7XG52YXIgdHlwZTtcbihmdW5jdGlvbiAodHlwZSkge1xuICAgIHR5cGVbXCJQaG9uZVwiXSA9IFwiUGhvbmVcIjtcbiAgICB0eXBlW1wiU3BlYWtlclwiXSA9IFwiU3BlYWtlclwiO1xuICAgIHR5cGVbXCJDYXJcIl0gPSBcIkNhclwiO1xuICAgIHR5cGVbXCJIZWFkc2V0XCJdID0gXCJIZWFkc2V0XCI7XG4gICAgdHlwZVtcIlRoZXJtb3N0YXRcIl0gPSBcIlRoZXJtb3N0YXRcIjtcbiAgICB0eXBlW1wiTWljcm9waG9uZXNcIl0gPSBcIk1pY3JvcGhvbmVzXCI7XG4gICAgdHlwZVtcIkRlc2twaG9uZVwiXSA9IFwiRGVza3Bob25lXCI7XG4gICAgdHlwZVtcIlJlbW90ZUNvbnRyb2xcIl0gPSBcIlJlbW90ZUNvbnRyb2xcIjtcbiAgICB0eXBlW1wiVW5rbm93blwiXSA9IFwiVW5rbm93blwiO1xuICAgIHR5cGVbXCJGaWxlXCJdID0gXCJGaWxlXCI7XG4gICAgdHlwZVtcIlN0cmVhbVwiXSA9IFwiU3RyZWFtXCI7XG59KSh0eXBlID0gZXhwb3J0cy50eXBlIHx8IChleHBvcnRzLnR5cGUgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWNvZ25pemVyQ29uZmlnLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL0V4cG9ydHNcIik7XG52YXIgUmVjb2duaXRpb25FdmVudHNfMSA9IHJlcXVpcmUoXCIuL1JlY29nbml0aW9uRXZlbnRzXCIpO1xudmFyIFNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lcl9JbnRlcm5hbF8xID0gcmVxdWlyZShcIi4vU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyLkludGVybmFsXCIpO1xudmFyIFJlcXVlc3RTZXNzaW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlcXVlc3RTZXNzaW9uKGF1ZGlvU291cmNlSWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZEZXRhY2hhYmxlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLnByaXZJc0F1ZGlvTm9kZURldGFjaGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklzUmVjb2duaXppbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNTcGVlY2hFbmRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucHJpdkxhc3RSZWNvT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2SHlwb3RoZXNpc1JlY2VpdmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkJ5dGVzU2VudCA9IDA7XG4gICAgICAgIHRoaXMub25BdWRpb1NvdXJjZUF0dGFjaENvbXBsZXRlZCA9IGZ1bmN0aW9uIChhdWRpb05vZGUsIGlzRXJyb3IsIGVycm9yKSB7XG4gICAgICAgICAgICBfdGhpcy5wcml2QXVkaW9Ob2RlID0gYXVkaW9Ob2RlO1xuICAgICAgICAgICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBSZWNvZ25pdGlvbkV2ZW50c18xLkxpc3RlbmluZ1N0YXJ0ZWRFdmVudChfdGhpcy5wcml2UmVxdWVzdElkLCBfdGhpcy5wcml2U2Vzc2lvbklkLCBfdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCwgX3RoaXMucHJpdkF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QcmVDb25uZWN0aW9uU3RhcnQgPSBmdW5jdGlvbiAoYXV0aEZldGNoRXZlbnRJZCwgY29ubmVjdGlvbklkKSB7XG4gICAgICAgICAgICBfdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgICAgICAgICBfdGhpcy5wcml2U2Vzc2lvbklkID0gY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgX3RoaXMub25FdmVudChuZXcgUmVjb2duaXRpb25FdmVudHNfMS5Db25uZWN0aW5nVG9TZXJ2aWNlRXZlbnQoX3RoaXMucHJpdlJlcXVlc3RJZCwgX3RoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQsIF90aGlzLnByaXZTZXNzaW9uSWQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkF1dGhDb21wbGV0ZWQgPSBmdW5jdGlvbiAoaXNFcnJvciwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uQ29ubmVjdGlvbkVzdGFibGlzaENvbXBsZXRlZCA9IGZ1bmN0aW9uIChzdGF0dXNDb2RlLCByZWFzb24pIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBSZWNvZ25pdGlvbkV2ZW50c18xLlJlY29nbml0aW9uU3RhcnRlZEV2ZW50KF90aGlzLnJlcXVlc3RJZCwgX3RoaXMucHJpdkF1ZGlvU291cmNlSWQsIF90aGlzLnByaXZBdWRpb05vZGVJZCwgX3RoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQsIF90aGlzLnByaXZTZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICBpZiAoISFfdGhpcy5wcml2QXVkaW9Ob2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZBdWRpb05vZGUucmVwbGF5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldCA9IF90aGlzLnByaXZMYXN0UmVjb09mZnNldDtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2Qnl0ZXNTZW50ID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25TZXJ2aWNlVHVybkVuZFJlc3BvbnNlID0gZnVuY3Rpb24gKGNvbnRpbnVvdXNSZWNvZ25pdGlvbikge1xuICAgICAgICAgICAgaWYgKCFjb250aW51b3VzUmVjb2duaXRpb24gfHwgX3RoaXMuaXNTcGVlY2hFbmRlZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IHJlcXVlc3Qgc2V0LlxuICAgICAgICAgICAgICAgIF90aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldCA9IF90aGlzLnByaXZMYXN0UmVjb09mZnNldDtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVxdWVzdElkID0gRXhwb3J0c18xLmNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2QXVkaW9Ob2RlLnJlcGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRpc3Bvc2UgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMucHJpdklzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICAvLyB3ZSBzaG91bGQgaGF2ZSBjb21wbGV0ZWQgYnkgbm93LiBJZiB3ZSBkaWQgbm90IGl0cyBhbiB1bmtub3duIGVycm9yLlxuICAgICAgICAgICAgICAgIF90aGlzLnByaXZJc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMucHJpdkRldGFjaGFibGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWNoYWJsZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWNoYWJsZS5kZXRhY2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0VGVsZW1ldHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuaGFzVGVsZW1ldHJ5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuZ2V0VGVsZW1ldHJ5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoISFfdGhpcy5wcml2U2VydmljZVRlbGVtZXRyeUxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEV4cG9ydHNfMS5FdmVudHMuaW5zdGFuY2Uub25FdmVudChldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Db21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghIV90aGlzLnByaXZJc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdklzUmVjb2duaXppbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5kZXRhY2hBdWRpb05vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZXRhY2hBdWRpb05vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLnByaXZJc0F1ZGlvTm9kZURldGFjaGVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdklzQXVkaW9Ob2RlRGV0YWNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcml2QXVkaW9Ob2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZBdWRpb05vZGUuZGV0YWNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdElkID0gRXhwb3J0c18xLmNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBFeHBvcnRzXzEuY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0Q29tcGxldGlvbkRlZmVycmFsID0gbmV3IEV4cG9ydHNfMS5EZWZlcnJlZCgpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVxdWVzdFNlc3Npb24ucHJvdG90eXBlLCBcInNlc3Npb25JZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlc3Npb25JZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlcXVlc3RTZXNzaW9uLnByb3RvdHlwZSwgXCJyZXF1ZXN0SWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZXF1ZXN0SWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXF1ZXN0U2Vzc2lvbi5wcm90b3R5cGUsIFwiYXVkaW9Ob2RlSWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGVJZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlcXVlc3RTZXNzaW9uLnByb3RvdHlwZSwgXCJjb21wbGV0aW9uUHJvbWlzZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlcXVlc3RDb21wbGV0aW9uRGVmZXJyYWwucHJvbWlzZSgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVxdWVzdFNlc3Npb24ucHJvdG90eXBlLCBcImlzU3BlZWNoRW5kZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJc1NwZWVjaEVuZGVkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVxdWVzdFNlc3Npb24ucHJvdG90eXBlLCBcImlzUmVjb2duaXppbmdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJc1JlY29nbml6aW5nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVxdWVzdFNlc3Npb24ucHJvdG90eXBlLCBcImN1cnJlbnRUdXJuQXVkaW9PZmZzZXRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlcXVlc3RTZXNzaW9uLnByb3RvdHlwZSwgXCJieXRlc1NlbnRcIiwge1xuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIGJ5dGVzIHNlbnQgZm9yIHRoZSBjdXJyZW50IGNvbm5lY3Rpb24uXG4gICAgICAgIC8vIENvdW50ZXIgaXMgcmVzZXQgdG8gMCBlYWNoIHRpbWUgYSBjb25uZWN0aW9uIGlzIGVzdGFibGlzaGVkLlxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZCeXRlc1NlbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFJlcXVlc3RTZXNzaW9uLnByb3RvdHlwZS5saXN0ZW5Gb3JTZXJ2aWNlVGVsZW1ldHJ5ID0gZnVuY3Rpb24gKGV2ZW50U291cmNlKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5wcml2RGV0YWNoYWJsZXMucHVzaChldmVudFNvdXJjZS5hdHRhY2hMaXN0ZW5lcih0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUmVxdWVzdFNlc3Npb24ucHJvdG90eXBlLnN0YXJ0TmV3UmVjb2duaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJpdklzU3BlZWNoRW5kZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNSZWNvZ25pemluZyA9IHRydWU7XG4gICAgICAgIHRoaXMucHJpdlR1cm5TdGFydEF1ZGlvT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2TGFzdFJlY29PZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSBFeHBvcnRzXzEuY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIgPSBuZXcgU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyX0ludGVybmFsXzEuU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyKHRoaXMucHJpdlJlcXVlc3RJZCwgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCwgdGhpcy5wcml2QXVkaW9Ob2RlSWQpO1xuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IFJlY29nbml0aW9uRXZlbnRzXzEuUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudCh0aGlzLnJlcXVlc3RJZCwgdGhpcy5wcml2U2Vzc2lvbklkLCB0aGlzLnByaXZBdWRpb1NvdXJjZUlkLCB0aGlzLnByaXZBdWRpb05vZGVJZCkpO1xuICAgIH07XG4gICAgUmVxdWVzdFNlc3Npb24ucHJvdG90eXBlLm9uSHlwb3RoZXNpcyA9IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByaXZIeXBvdGhlc2lzUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkh5cG90aGVzaXNSZWNlaXZlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuaHlwb3RoZXNpc1JlY2VpdmVkKHRoaXMucHJpdkF1ZGlvTm9kZS5maW5kVGltZUF0T2Zmc2V0KG9mZnNldCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZXF1ZXN0U2Vzc2lvbi5wcm90b3R5cGUub25QaHJhc2VSZWNvZ25pemVkID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICB0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIucGhyYXNlUmVjZWl2ZWQodGhpcy5wcml2QXVkaW9Ob2RlLmZpbmRUaW1lQXRPZmZzZXQob2Zmc2V0KSk7XG4gICAgICAgIHRoaXMub25TZXJ2aWNlUmVjb2duaXplZChvZmZzZXQpO1xuICAgIH07XG4gICAgUmVxdWVzdFNlc3Npb24ucHJvdG90eXBlLm9uU2VydmljZVJlY29nbml6ZWQgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgIHRoaXMucHJpdkxhc3RSZWNvT2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzUmVjZWl2ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlLnNocmlua0J1ZmZlcnMob2Zmc2V0KTtcbiAgICB9O1xuICAgIFJlcXVlc3RTZXNzaW9uLnByb3RvdHlwZS5vbkF1ZGlvU2VudCA9IGZ1bmN0aW9uIChieXRlc1NlbnQpIHtcbiAgICAgICAgdGhpcy5wcml2Qnl0ZXNTZW50ICs9IGJ5dGVzU2VudDtcbiAgICB9O1xuICAgIFJlcXVlc3RTZXNzaW9uLnByb3RvdHlwZS5vblN0b3BSZWNvZ25pemluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wcml2SXNSZWNvZ25pemluZyA9IGZhbHNlO1xuICAgIH07XG4gICAgLy8gU2hvdWxkIGJlIGNhbGxlZCB3aXRoIHRoZSBhdWRpb05vZGUgZm9yIHRoaXMgc2Vzc2lvbiBoYXMgaW5kaWNhdGVkIHRoYXQgaXQgaXMgb3V0IG9mIHNwZWVjaC5cbiAgICBSZXF1ZXN0U2Vzc2lvbi5wcm90b3R5cGUub25TcGVlY2hFbmRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wcml2SXNTcGVlY2hFbmRlZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gUmVxdWVzdFNlc3Npb247XG59KCkpO1xuZXhwb3J0cy5SZXF1ZXN0U2Vzc2lvbiA9IFJlcXVlc3RTZXNzaW9uO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXF1ZXN0U2Vzc2lvbi5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL0V4cG9ydHNcIik7XG52YXIgRGV0YWlsZWRTcGVlY2hQaHJhc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGV0YWlsZWRTcGVlY2hQaHJhc2UoanNvbikge1xuICAgICAgICB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzID0gRXhwb3J0c18xLlJlY29nbml0aW9uU3RhdHVzW3RoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzXTtcbiAgICB9XG4gICAgRGV0YWlsZWRTcGVlY2hQaHJhc2UuZnJvbUpTT04gPSBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IERldGFpbGVkU3BlZWNoUGhyYXNlKGpzb24pO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGFpbGVkU3BlZWNoUGhyYXNlLnByb3RvdHlwZSwgXCJSZWNvZ25pdGlvblN0YXR1c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0YWlsZWRTcGVlY2hQaHJhc2UucHJvdG90eXBlLCBcIk5CZXN0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuTkJlc3Q7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZXRhaWxlZFNwZWVjaFBocmFzZS5wcm90b3R5cGUsIFwiRHVyYXRpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5EdXJhdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGFpbGVkU3BlZWNoUGhyYXNlLnByb3RvdHlwZSwgXCJPZmZzZXRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5PZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBEZXRhaWxlZFNwZWVjaFBocmFzZTtcbn0oKSk7XG5leHBvcnRzLkRldGFpbGVkU3BlZWNoUGhyYXNlID0gRGV0YWlsZWRTcGVlY2hQaHJhc2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURldGFpbGVkU3BlZWNoUGhyYXNlLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogQGNsYXNzIFN5bnRoZXNpc1N0YXR1c1xuICogQHByaXZhdGVcbiAqL1xudmFyIFN5bnRoZXNpc1N0YXR1cztcbihmdW5jdGlvbiAoU3ludGhlc2lzU3RhdHVzKSB7XG4gICAgLyoqXG4gICAgICogVGhlIHJlc3BvbnNlIGNvbnRhaW5zIHZhbGlkIGF1ZGlvIGRhdGEuXG4gICAgICogQG1lbWJlciBTeW50aGVzaXNTdGF0dXMuU3VjY2Vzc1xuICAgICAqL1xuICAgIFN5bnRoZXNpc1N0YXR1c1tTeW50aGVzaXNTdGF0dXNbXCJTdWNjZXNzXCJdID0gMF0gPSBcIlN1Y2Nlc3NcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIGVuZCBvZiBhdWRpbyBkYXRhLiBObyB2YWxpZCBhdWRpbyBkYXRhIGlzIGluY2x1ZGVkIGluIHRoZSBtZXNzYWdlLlxuICAgICAqIEBtZW1iZXIgU3ludGhlc2lzU3RhdHVzLlN5bnRoZXNpc0VuZFxuICAgICAqL1xuICAgIFN5bnRoZXNpc1N0YXR1c1tTeW50aGVzaXNTdGF0dXNbXCJTeW50aGVzaXNFbmRcIl0gPSAxXSA9IFwiU3ludGhlc2lzRW5kXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBzeW50aGVzaXMgZGF0YSBwcm9jZXNzaW5nLlxuICAgICAqIEBtZW1iZXIgU3ludGhlc2lzU3RhdHVzLkVycm9yXG4gICAgICovXG4gICAgU3ludGhlc2lzU3RhdHVzW1N5bnRoZXNpc1N0YXR1c1tcIkVycm9yXCJdID0gMl0gPSBcIkVycm9yXCI7XG59KShTeW50aGVzaXNTdGF0dXMgPSBleHBvcnRzLlN5bnRoZXNpc1N0YXR1cyB8fCAoZXhwb3J0cy5TeW50aGVzaXNTdGF0dXMgPSB7fSkpO1xudmFyIFJlY29nbml0aW9uU3RhdHVzO1xuKGZ1bmN0aW9uIChSZWNvZ25pdGlvblN0YXR1cykge1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiU3VjY2Vzc1wiXSA9IDBdID0gXCJTdWNjZXNzXCI7XG4gICAgUmVjb2duaXRpb25TdGF0dXNbUmVjb2duaXRpb25TdGF0dXNbXCJOb01hdGNoXCJdID0gMV0gPSBcIk5vTWF0Y2hcIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIkluaXRpYWxTaWxlbmNlVGltZW91dFwiXSA9IDJdID0gXCJJbml0aWFsU2lsZW5jZVRpbWVvdXRcIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIkJhYmJsZVRpbWVvdXRcIl0gPSAzXSA9IFwiQmFiYmxlVGltZW91dFwiO1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiRXJyb3JcIl0gPSA0XSA9IFwiRXJyb3JcIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIkVuZE9mRGljdGF0aW9uXCJdID0gNV0gPSBcIkVuZE9mRGljdGF0aW9uXCI7XG59KShSZWNvZ25pdGlvblN0YXR1cyA9IGV4cG9ydHMuUmVjb2duaXRpb25TdGF0dXMgfHwgKGV4cG9ydHMuUmVjb2duaXRpb25TdGF0dXMgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbnVtcy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyByZXNwb25zZVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEludGVudFJlc3BvbnNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEludGVudFJlc3BvbnNlKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2SW50ZW50UmVzcG9uc2UgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgIH1cbiAgICBJbnRlbnRSZXNwb25zZS5mcm9tSlNPTiA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW50ZW50UmVzcG9uc2UoanNvbik7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW50ZW50UmVzcG9uc2UucHJvdG90eXBlLCBcInF1ZXJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2SW50ZW50UmVzcG9uc2UucXVlcnk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlbnRSZXNwb25zZS5wcm90b3R5cGUsIFwidG9wU2NvcmluZ0ludGVudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkludGVudFJlc3BvbnNlLnRvcFNjb3JpbmdJbnRlbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlbnRSZXNwb25zZS5wcm90b3R5cGUsIFwiZW50aXRpZXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJbnRlbnRSZXNwb25zZS5lbnRpdGllcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEludGVudFJlc3BvbnNlO1xufSgpKTtcbmV4cG9ydHMuSW50ZW50UmVzcG9uc2UgPSBJbnRlbnRSZXNwb25zZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZW50UmVzcG9uc2UuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi9FeHBvcnRzXCIpO1xudmFyIFNpbXBsZVNwZWVjaFBocmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaW1wbGVTcGVlY2hQaHJhc2UoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgICAgICB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuUmVjb2duaXRpb25TdGF0dXMgPSBFeHBvcnRzXzEuUmVjb2duaXRpb25TdGF0dXNbdGhpcy5wcml2U2ltcGxlU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzXTtcbiAgICB9XG4gICAgU2ltcGxlU3BlZWNoUGhyYXNlLmZyb21KU09OID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTcGVlY2hQaHJhc2UoanNvbik7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2ltcGxlU3BlZWNoUGhyYXNlLnByb3RvdHlwZSwgXCJSZWNvZ25pdGlvblN0YXR1c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNpbXBsZVNwZWVjaFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNpbXBsZVNwZWVjaFBocmFzZS5wcm90b3R5cGUsIFwiRGlzcGxheVRleHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuRGlzcGxheVRleHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaW1wbGVTcGVlY2hQaHJhc2UucHJvdG90eXBlLCBcIk9mZnNldFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNpbXBsZVNwZWVjaFBocmFzZS5PZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaW1wbGVTcGVlY2hQaHJhc2UucHJvdG90eXBlLCBcIkR1cmF0aW9uXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U2ltcGxlU3BlZWNoUGhyYXNlLkR1cmF0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gU2ltcGxlU3BlZWNoUGhyYXNlO1xufSgpKTtcbmV4cG9ydHMuU2ltcGxlU3BlZWNoUGhyYXNlID0gU2ltcGxlU3BlZWNoUGhyYXNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TaW1wbGVTcGVlY2hQaHJhc2UuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFNwZWVjaERldGVjdGVkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNwZWVjaERldGVjdGVkKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoU3RhcnREZXRlY3RlZCA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgfVxuICAgIFNwZWVjaERldGVjdGVkLmZyb21KU09OID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGVlY2hEZXRlY3RlZChqc29uKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hEZXRlY3RlZC5wcm90b3R5cGUsIFwiT2Zmc2V0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoU3RhcnREZXRlY3RlZC5PZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBTcGVlY2hEZXRlY3RlZDtcbn0oKSk7XG5leHBvcnRzLlNwZWVjaERldGVjdGVkID0gU3BlZWNoRGV0ZWN0ZWQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaERldGVjdGVkLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBTcGVlY2hIeXBvdGhlc2lzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNwZWVjaEh5cG90aGVzaXMoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hIeXBvdGhlc2lzID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICB9XG4gICAgU3BlZWNoSHlwb3RoZXNpcy5mcm9tSlNPTiA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3BlZWNoSHlwb3RoZXNpcyhqc29uKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hIeXBvdGhlc2lzLnByb3RvdHlwZSwgXCJUZXh0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoSHlwb3RoZXNpcy5UZXh0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3BlZWNoSHlwb3RoZXNpcy5wcm90b3R5cGUsIFwiT2Zmc2V0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoSHlwb3RoZXNpcy5PZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hIeXBvdGhlc2lzLnByb3RvdHlwZSwgXCJEdXJhdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEh5cG90aGVzaXMuRHVyYXRpb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBTcGVlY2hIeXBvdGhlc2lzO1xufSgpKTtcbmV4cG9ydHMuU3BlZWNoSHlwb3RoZXNpcyA9IFNwZWVjaEh5cG90aGVzaXM7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaEh5cG90aGVzaXMuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFRyYW5zbGF0aW9uU3RhdHVzXzEgPSByZXF1aXJlKFwiLi4vVHJhbnNsYXRpb25TdGF0dXNcIik7XG52YXIgVHJhbnNsYXRpb25IeXBvdGhlc2lzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRyYW5zbGF0aW9uSHlwb3RoZXNpcyhqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcyA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvblN0YXR1cyA9IFRyYW5zbGF0aW9uU3RhdHVzXzEuVHJhbnNsYXRpb25TdGF0dXNbdGhpcy5wcml2VHJhbnNsYXRpb25IeXBvdGhlc2lzLlRyYW5zbGF0aW9uLlRyYW5zbGF0aW9uU3RhdHVzXTtcbiAgICB9XG4gICAgVHJhbnNsYXRpb25IeXBvdGhlc2lzLmZyb21KU09OID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2xhdGlvbkh5cG90aGVzaXMoanNvbik7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNsYXRpb25IeXBvdGhlc2lzLnByb3RvdHlwZSwgXCJEdXJhdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5EdXJhdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uSHlwb3RoZXNpcy5wcm90b3R5cGUsIFwiT2Zmc2V0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNsYXRpb25IeXBvdGhlc2lzLk9mZnNldDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uSHlwb3RoZXNpcy5wcm90b3R5cGUsIFwiVGV4dFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5UZXh0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNsYXRpb25IeXBvdGhlc2lzLnByb3RvdHlwZSwgXCJUcmFuc2xhdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5UcmFuc2xhdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFRyYW5zbGF0aW9uSHlwb3RoZXNpcztcbn0oKSk7XG5leHBvcnRzLlRyYW5zbGF0aW9uSHlwb3RoZXNpcyA9IFRyYW5zbGF0aW9uSHlwb3RoZXNpcztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25IeXBvdGhlc2lzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vRXhwb3J0c1wiKTtcbnZhciBUcmFuc2xhdGlvblN0YXR1c18xID0gcmVxdWlyZShcIi4uL1RyYW5zbGF0aW9uU3RhdHVzXCIpO1xudmFyIFRyYW5zbGF0aW9uUGhyYXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRyYW5zbGF0aW9uUGhyYXNlKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5SZWNvZ25pdGlvblN0YXR1cyA9IEV4cG9ydHNfMS5SZWNvZ25pdGlvblN0YXR1c1t0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5SZWNvZ25pdGlvblN0YXR1c107XG4gICAgICAgIGlmICh0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5UcmFuc2xhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvblN0YXR1cyA9IFRyYW5zbGF0aW9uU3RhdHVzXzEuVHJhbnNsYXRpb25TdGF0dXNbdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuVHJhbnNsYXRpb24uVHJhbnNsYXRpb25TdGF0dXNdO1xuICAgICAgICB9XG4gICAgfVxuICAgIFRyYW5zbGF0aW9uUGhyYXNlLmZyb21KU09OID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2xhdGlvblBocmFzZShqc29uKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2xhdGlvblBocmFzZS5wcm90b3R5cGUsIFwiUmVjb2duaXRpb25TdGF0dXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5SZWNvZ25pdGlvblN0YXR1cztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uUGhyYXNlLnByb3RvdHlwZSwgXCJPZmZzZXRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5PZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2xhdGlvblBocmFzZS5wcm90b3R5cGUsIFwiRHVyYXRpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5EdXJhdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uUGhyYXNlLnByb3RvdHlwZSwgXCJUZXh0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuVGV4dDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uUGhyYXNlLnByb3RvdHlwZSwgXCJUcmFuc2xhdGlvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uUGhyYXNlLlRyYW5zbGF0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gVHJhbnNsYXRpb25QaHJhc2U7XG59KCkpO1xuZXhwb3J0cy5UcmFuc2xhdGlvblBocmFzZSA9IFRyYW5zbGF0aW9uUGhyYXNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblBocmFzZS5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL0V4cG9ydHNcIik7XG52YXIgVHJhbnNsYXRpb25TeW50aGVzaXNFbmQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVHJhbnNsYXRpb25TeW50aGVzaXNFbmQoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNFbmQgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNFbmQuU3ludGhlc2lzU3RhdHVzID0gRXhwb3J0c18xLlN5bnRoZXNpc1N0YXR1c1t0aGlzLnByaXZTeW50aGVzaXNFbmQuU3ludGhlc2lzU3RhdHVzXTtcbiAgICB9XG4gICAgVHJhbnNsYXRpb25TeW50aGVzaXNFbmQuZnJvbUpTT04gPSBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zbGF0aW9uU3ludGhlc2lzRW5kKGpzb24pO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uU3ludGhlc2lzRW5kLnByb3RvdHlwZSwgXCJTeW50aGVzaXNTdGF0dXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTeW50aGVzaXNFbmQuU3ludGhlc2lzU3RhdHVzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNsYXRpb25TeW50aGVzaXNFbmQucHJvdG90eXBlLCBcIkZhaWx1cmVSZWFzb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTeW50aGVzaXNFbmQuRmFpbHVyZVJlYXNvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFRyYW5zbGF0aW9uU3ludGhlc2lzRW5kO1xufSgpKTtcbmV4cG9ydHMuVHJhbnNsYXRpb25TeW50aGVzaXNFbmQgPSBUcmFuc2xhdGlvblN5bnRoZXNpc0VuZDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25TeW50aGVzaXNFbmQuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCIpO1xudmFyIEV4cG9ydHNfMiA9IHJlcXVpcmUoXCIuLi9jb21tb24vRXhwb3J0c1wiKTtcbnZhciBFeHBvcnRzXzMgPSByZXF1aXJlKFwiLi4vc2RrL0V4cG9ydHNcIik7XG52YXIgRXhwb3J0c180ID0gcmVxdWlyZShcIi4vRXhwb3J0c1wiKTtcbnZhciBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZV9JbnRlcm5hbF8xID0gcmVxdWlyZShcIi4vU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuSW50ZXJuYWxcIik7XG52YXIgU2VydmljZVJlY29nbml6ZXJCYXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNlcnZpY2VSZWNvZ25pemVyQmFzZShhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCByZWNvZ25pemVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2VuZFRlbGVtZXRyeURhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGVsZW1ldHJ5RGF0YSA9IF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5nZXRUZWxlbWV0cnkoKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybihcIlRlbGVtOiBcIiArIHRlbGVtZXRyeURhdGEpO1xuICAgICAgICAgICAgaWYgKFNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZCAhPT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgIF90aGlzLnByaXZJc0Rpc3Bvc2VkIHx8XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gdGVsZW1ldHJ5RGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzIuUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhU2VydmljZVJlY29nbml6ZXJCYXNlLnRlbGVtZXRyeURhdGEpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlUmVjb2duaXplckJhc2UudGVsZW1ldHJ5RGF0YSh0ZWxlbWV0cnlEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5mZXRjaENvbm5lY3Rpb24oKS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZV9JbnRlcm5hbF8xLlNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKEV4cG9ydHNfMi5NZXNzYWdlVHlwZS5UZXh0LCBcInRlbGVtZXRyeVwiLCBfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgdGVsZW1ldHJ5RGF0YSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmV0Y2hDb25uZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbmZpZ3VyZUNvbm5lY3Rpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWNlaXZlTWVzc2FnZSA9IGZ1bmN0aW9uIChzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5mZXRjaENvbm5lY3Rpb24oKS5vbihmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLnJlYWQoKVxuICAgICAgICAgICAgICAgICAgICAub25TdWNjZXNzQ29udGludWVXaXRoUHJvbWlzZShmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJpdklzRGlzcG9zZWQgfHwgIV90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSdyZSBkb25lLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEV4cG9ydHNfMi5Qcm9taXNlSGVscGVyLmZyb21SZXN1bHQodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBpbmRpY2F0ZXMgd2UgYXJlIGRyYWluaW5nIHRoZSBxdWV1ZSBhbmQgaXQgY2FtZSB3aXRoIG5vIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNSZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzIuUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlY2VpdmVNZXNzYWdlKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsQmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb25NZXNzYWdlID0gU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2VfSW50ZXJuYWxfMS5TcGVlY2hDb25uZWN0aW9uTWVzc2FnZS5mcm9tQ29ubmVjdGlvbk1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uTWVzc2FnZS5yZXF1ZXN0SWQudG9Mb3dlckNhc2UoKSA9PT0gX3RoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXJuLnN0YXJ0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZNdXN0UmVwb3J0RW5kT2ZTdHJlYW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3BlZWNoLnN0YXJ0ZGV0ZWN0ZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwZWVjaFN0YXJ0RGV0ZWN0ZWQgPSBFeHBvcnRzXzQuU3BlZWNoRGV0ZWN0ZWQuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BlZWNoU3RhcnRFdmVudEFyZ3MgPSBuZXcgRXhwb3J0c18zLlJlY29nbml0aW9uRXZlbnRBcmdzKHNwZWVjaFN0YXJ0RGV0ZWN0ZWQuT2Zmc2V0LCBfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhX3RoaXMucHJpdlJlY29nbml6ZXIuc3BlZWNoU3RhcnREZXRlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdlJlY29nbml6ZXIuc3BlZWNoU3RhcnREZXRlY3RlZChfdGhpcy5wcml2UmVjb2duaXplciwgc3BlZWNoU3RhcnRFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guZW5kZGV0ZWN0ZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzb24gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCB3YXMgZW1wdHksIHRoZSBKU09OIHJldHVybmVkIGlzIGVtcHR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IFwieyBPZmZzZXQ6IDAgfVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGVlY2hTdG9wRGV0ZWN0ZWQgPSBFeHBvcnRzXzQuU3BlZWNoRGV0ZWN0ZWQuZnJvbUpTT04oanNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblNlcnZpY2VSZWNvZ25pemVkKHNwZWVjaFN0b3BEZXRlY3RlZC5PZmZzZXQgKyBfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGVlY2hTdG9wRXZlbnRBcmdzID0gbmV3IEV4cG9ydHNfMy5SZWNvZ25pdGlvbkV2ZW50QXJncyhzcGVlY2hTdG9wRGV0ZWN0ZWQuT2Zmc2V0ICsgX3RoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFfdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hFbmREZXRlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdlJlY29nbml6ZXIuc3BlZWNoRW5kRGV0ZWN0ZWQoX3RoaXMucHJpdlJlY29nbml6ZXIsIHNwZWVjaFN0b3BFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXJuLmVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZW5kVGVsZW1ldHJ5RGF0YSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiYgX3RoaXMucHJpdk11c3RSZXBvcnRFbmRPZlN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdk11c3RSZXBvcnRFbmRPZlN0cmVhbSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FuY2VsUmVjb2duaXRpb25Mb2NhbChFeHBvcnRzXzMuQ2FuY2VsbGF0aW9uUmVhc29uLkVuZE9mU3RyZWFtLCBFeHBvcnRzXzMuQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLk5vRXJyb3IsIHVuZGVmaW5lZCwgc3VjY2Vzc0NhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Vzc2lvblN0b3BFdmVudEFyZ3MgPSBuZXcgRXhwb3J0c18zLlNlc3Npb25FdmVudEFyZ3MoX3RoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblNlcnZpY2VUdXJuRW5kUmVzcG9uc2UoX3RoaXMucHJpdlJlY29nbml6ZXJDb25maWcuaXNDb250aW51b3VzUmVjb2duaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLmlzQ29udGludW91c1JlY29nbml0aW9uIHx8IF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFfdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdG9wcGVkKF90aGlzLnByaXZSZWNvZ25pemVyLCBzZXNzaW9uU3RvcEV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZldGNoQ29ubmVjdGlvbigpLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aChmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlbmRTcGVlY2hDb250ZXh0KGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzVHlwZVNwZWNpZmljTWVzc2FnZXMoY29ubmVjdGlvbk1lc3NhZ2UsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsQmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlY2VpdmVNZXNzYWdlKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsQmFjayk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlbmRTcGVlY2hTZXJ2aWNlQ29uZmlnID0gZnVuY3Rpb24gKGNvbm5lY3Rpb24sIHJlcXVlc3RTZXNzaW9uLCBTcGVlY2hTZXJ2aWNlQ29uZmlnSnNvbikge1xuICAgICAgICAgICAgLy8gZmlsdGVyIG91dCBhbnl0aGluZyB0aGF0IGlzIG5vdCByZXF1aXJlZCBmb3IgdGhlIHNlcnZpY2UgdG8gd29yay5cbiAgICAgICAgICAgIGlmIChTZXJ2aWNlUmVjb2duaXplckJhc2UudGVsZW1ldHJ5RGF0YUVuYWJsZWQgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2l0aFRlbGVtZXRyeSA9IEpTT04ucGFyc2UoU3BlZWNoU2VydmljZUNvbmZpZ0pzb24pO1xuICAgICAgICAgICAgICAgIHZhciByZXBsYWNlbWVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtOiB3aXRoVGVsZW1ldHJ5LmNvbnRleHQuc3lzdGVtLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgU3BlZWNoU2VydmljZUNvbmZpZ0pzb24gPSBKU09OLnN0cmluZ2lmeShyZXBsYWNlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoU3BlZWNoU2VydmljZUNvbmZpZ0pzb24pIHsgLy8gJiYgdGhpcy5wcml2Q29ubmVjdGlvbklkICE9PSB0aGlzLnByaXZTcGVlY2hTZXJ2aWNlQ29uZmlnQ29ubmVjdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdlNwZWVjaFNlcnZpY2VDb25maWdDb25uZWN0aW9uSWQgPSBfdGhpcy5wcml2Q29ubmVjdGlvbklkO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlX0ludGVybmFsXzEuU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoRXhwb3J0c18yLk1lc3NhZ2VUeXBlLlRleHQsIFwic3BlZWNoLmNvbmZpZ1wiLCByZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vanNvblwiLCBTcGVlY2hTZXJ2aWNlQ29uZmlnSnNvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEV4cG9ydHNfMi5Qcm9taXNlSGVscGVyLmZyb21SZXN1bHQodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VuZFNwZWVjaENvbnRleHQgPSBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgdmFyIHNwZWVjaENvbnRleHRKc29uID0gX3RoaXMuc3BlZWNoQ29udGV4dC50b0pTT04oKTtcbiAgICAgICAgICAgIGlmIChzcGVlY2hDb250ZXh0SnNvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlX0ludGVybmFsXzEuU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoRXhwb3J0c18yLk1lc3NhZ2VUeXBlLlRleHQsIFwic3BlZWNoLmNvbnRleHRcIiwgX3RoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIHNwZWVjaENvbnRleHRKc29uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kQXVkaW8gPSBmdW5jdGlvbiAoYXVkaW9TdHJlYW1Ob2RlKSB7XG4gICAgICAgICAgICAvLyBOT1RFOiBIb21lLWJha2VkIHByb21pc2VzIGNyYXNoIGlvcyBzYWZhcmkgZHVyaW5nIHRoZSBpbnZvY2F0aW9uXG4gICAgICAgICAgICAvLyBvZiB0aGUgZXJyb3IgY2FsbGJhY2sgY2hhaW4gKGxvb2tzIGxpa2UgdGhlIHJlY3Vyc2lvbiBpcyB3YXkgdG9vIGRlZXAsIGFuZFxuICAgICAgICAgICAgLy8gaXQgYmxvd3MgdXAgdGhlIHN0YWNrKS4gVGhlIGZvbGxvd2luZyBjb25zdHJ1Y3QgaXMgYSBzdG9wLWdhcCB0aGF0IGRvZXMgbm90XG4gICAgICAgICAgICAvLyBidWJibGUgdGhlIGVycm9yIHVwIHRoZSBjYWxsYmFjayBjaGFpbiBhbmQgaGVuY2UgY2lyY3VtdmVudHMgdGhpcyBwcm9ibGVtLlxuICAgICAgICAgICAgLy8gVE9ETzogcmV3cml0ZSB3aXRoIEVTNiBwcm9taXNlcy5cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyBFeHBvcnRzXzIuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIC8vIFRoZSB0aW1lIHdlIGxhc3Qgc2VudCBkYXRhIHRvIHRoZSBzZXJ2aWNlLlxuICAgICAgICAgICAgdmFyIG5leHRTZW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB2YXIgYXVkaW9Gb3JtYXQgPSBfdGhpcy5wcml2QXVkaW9Tb3VyY2UuZm9ybWF0O1xuICAgICAgICAgICAgLy8gTWF4IGFtb3VudCB0byBzZW5kIGJlZm9yZSB3ZSBzdGFydCB0byB0aHJvdHRsZVxuICAgICAgICAgICAgdmFyIGZhc3RMYW5lU2l6ZU1zID0gX3RoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShcIlNQRUVDSC1UcmFuc21pdExlbmd0aEJlZm9yVGhyb3R0bGVNc1wiLCBcIjUwMDBcIik7XG4gICAgICAgICAgICB2YXIgbWF4U2VuZFVudGhyb3R0bGVkQnl0ZXMgPSBhdWRpb0Zvcm1hdC5hdmdCeXRlc1BlclNlYyAvIDEwMDAgKiBwYXJzZUludChmYXN0TGFuZVNpemVNcywgMTApO1xuICAgICAgICAgICAgdmFyIHJlYWRBbmRVcGxvYWRDeWNsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBzcGVlY2ggaXMgZG9uZSwgc3RvcCBzZW5kaW5nIGF1ZGlvLlxuICAgICAgICAgICAgICAgIGlmICghX3RoaXMucHJpdklzRGlzcG9zZWQgJiYgIV90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkICYmIF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZldGNoQ29ubmVjdGlvbigpLm9uKGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb1N0cmVhbU5vZGUucmVhZCgpLm9uKGZ1bmN0aW9uIChhdWRpb1N0cmVhbUNodW5rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBhIG5ldyBhdWRpbyBjaHVuayB0byB1cGxvYWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHNlcnZpY2UgYWxyZWFkeSByZWNvZ25pemVkIGF1ZGlvIGVuZCB0aGVuIGRvbid0IHNlbmQgYW55IG1vcmUgYXVkaW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGF5bG9hZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VuZERlbGF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdWRpb1N0cmVhbUNodW5rLmlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRGVsYXkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IGF1ZGlvU3RyZWFtQ2h1bmsuYnVmZmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25BdWRpb1NlbnQocGF5bG9hZC5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heFNlbmRVbnRocm90dGxlZEJ5dGVzID49IF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5ieXRlc1NlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmREZWxheSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRGVsYXkgPSBNYXRoLm1heCgwLCBuZXh0U2VuZFRpbWUgLSBEYXRlLm5vdygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcmUgd2UgcmVhZHkgdG8gc2VuZCwgb3IgbmVlZCB3ZSBkZWxheSBtb3JlP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF5bG9hZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNlbmRUaW1lID0gRGF0ZS5ub3coKSArIChwYXlsb2FkLmJ5dGVMZW5ndGggKiAxMDAwIC8gKGF1ZGlvRm9ybWF0LmF2Z0J5dGVzUGVyU2VjICogMikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGxvYWRlZCA9IGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2VfSW50ZXJuYWxfMS5TcGVlY2hDb25uZWN0aW9uTWVzc2FnZShFeHBvcnRzXzIuTWVzc2FnZVR5cGUuQmluYXJ5LCBcImF1ZGlvXCIsIF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIG51bGwsIHBheWxvYWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhdWRpb1N0cmVhbUNodW5rLmlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRlZC5jb250aW51ZVdpdGgoZnVuY3Rpb24gKF8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWdhcmRsZXNzIG9mIHN1Y2Nlc3Mgb3IgZmFpbHVyZSwgc2NoZWR1bGUgdGhlIG5leHQgdXBsb2FkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1bmRlcmx5aW5nIGNvbm5lY3Rpb24gd2FzIGJyb2tlbiwgdGhlIG5leHQgY3ljbGUgd2lsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBhIG5ldyBjb25uZWN0aW9uIGFuZCByZS10cmFuc21pdCBtaXNzaW5nIGF1ZGlvIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEFuZFVwbG9hZEN5Y2xlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBhdWRpbyBzdHJlYW0gaGFzIGJlZW4gY2xvc2VkLCBubyBuZWVkIHRvIHNjaGVkdWxlIG5leHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlYWQtdXBsb2FkIGN5Y2xlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU3BlZWNoRW5kZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBzZW5kRGVsYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciB3aGF0ZXZlciByZWFzb24sIFJlamVjdCBpcyB1c2VkIHRvIHJlbW92ZSBxdWV1ZSBzdWJzY3JpYmVycyBpbnNpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIFF1ZXVlLkRyYWluQW5kRGlzcG9zZSBpbnZva2VkIGZyb20gRGV0YWNoQXVkaW9Ob2RlIGRvd24gYmVsb3csIHdoaWNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lYW5zIHRoYXQgc29tZXRpbWVzIHRoaW5ncyBjYW4gYmUgcmVqZWN0ZWQgaW4gbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHdpdGhvdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW55IGVycm9ycy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0cnVlKTsgLy8gVE9ETzogcmVtb3ZlIHRoZSBhcmd1bWVudCwgaXQncyBpcyBjb21wbGV0ZWx5IG1lYW5pbmdsZXNzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSByZWplY3QsIGlmIHRoZXJlIHdhcyBhIHByb3BlciBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVhZEFuZFVwbG9hZEN5Y2xlKCk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXhwb3J0c18yLkFyZ3VtZW50TnVsbEVycm9yKFwiYXV0aGVudGljYXRpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uRmFjdG9yeSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEV4cG9ydHNfMi5Bcmd1bWVudE51bGxFcnJvcihcImNvbm5lY3Rpb25GYWN0b3J5XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYXVkaW9Tb3VyY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFeHBvcnRzXzIuQXJndW1lbnROdWxsRXJyb3IoXCJhdWRpb1NvdXJjZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlY29nbml6ZXJDb25maWcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFeHBvcnRzXzIuQXJndW1lbnROdWxsRXJyb3IoXCJyZWNvZ25pemVyQ29uZmlnXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdk11c3RSZXBvcnRFbmRPZlN0cmVhbSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZBdXRoZW50aWNhdGlvbiA9IGF1dGhlbnRpY2F0aW9uO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRmFjdG9yeSA9IGNvbm5lY3Rpb25GYWN0b3J5O1xuICAgICAgICB0aGlzLnByaXZBdWRpb1NvdXJjZSA9IGF1ZGlvU291cmNlO1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnID0gcmVjb2duaXplckNvbmZpZztcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyID0gcmVjb2duaXplcjtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24gPSBuZXcgRXhwb3J0c180LlJlcXVlc3RTZXNzaW9uKHRoaXMucHJpdkF1ZGlvU291cmNlLmlkKCkpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXZlbnRzID0gbmV3IEV4cG9ydHNfMi5FdmVudFNvdXJjZSgpO1xuICAgICAgICB0aGlzLnByaXZEeW5hbWljR3JhbW1hciA9IG5ldyBFeHBvcnRzXzQuRHluYW1pY0dyYW1tYXJCdWlsZGVyKCk7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaENvbnRleHQgPSBuZXcgRXhwb3J0c180LlNwZWVjaENvbnRleHQodGhpcy5wcml2RHluYW1pY0dyYW1tYXIpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2VydmljZVJlY29nbml6ZXJCYXNlLnByb3RvdHlwZSwgXCJhdWRpb1NvdXJjZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvU291cmNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2VydmljZVJlY29nbml6ZXJCYXNlLnByb3RvdHlwZSwgXCJzcGVlY2hDb250ZXh0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoQ29udGV4dDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNlcnZpY2VSZWNvZ25pemVyQmFzZS5wcm90b3R5cGUsIFwiZHluYW1pY0dyYW1tYXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZEeW5hbWljR3JhbW1hcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU2VydmljZVJlY29nbml6ZXJCYXNlLnByb3RvdHlwZS5pc0Rpc3Bvc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNEaXNwb3NlZDtcbiAgICB9O1xuICAgIFNlcnZpY2VSZWNvZ25pemVyQmFzZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmRpc3Bvc2UocmVhc29uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2VydmljZVJlY29nbml6ZXJCYXNlLnByb3RvdHlwZSwgXCJjb25uZWN0aW9uRXZlbnRzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNlcnZpY2VSZWNvZ25pemVyQmFzZS5wcm90b3R5cGUsIFwicmVjb2duaXRpb25Nb2RlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5yZWNvZ25pdGlvbk1vZGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFNlcnZpY2VSZWNvZ25pemVyQmFzZS5wcm90b3R5cGUucmVjb2duaXplID0gZnVuY3Rpb24gKHJlY29Nb2RlLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2spIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGV4aXN0aW5nIGNvbmZpZ3VyYXRpb24gcHJvbWlzZSB0byBmb3JjZSBhIHJlLXRyYW5zbWlzc2lvbiBvZiBjb25maWcgYW5kIGNvbnRleHQuXG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucmVjb2duaXRpb25Nb2RlID0gcmVjb01vZGU7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnN0YXJ0TmV3UmVjb2duaXRpb24oKTtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ubGlzdGVuRm9yU2VydmljZVRlbGVtZXRyeSh0aGlzLnByaXZBdWRpb1NvdXJjZS5ldmVudHMpO1xuICAgICAgICAvLyBTdGFydCB0aGUgY29ubmVjdGlvbiB0byB0aGUgc2VydmljZS4gVGhlIHByb21pc2UgdGhpcyB3aWxsIGNyZWF0ZSBpcyBzdG9yZWQgYW5kIHdpbGwgYmUgdXNlZCBieSBjb25maWd1cmVDb25uZWN0aW9uKCkuXG4gICAgICAgIHRoaXMuY29ubmVjdEltcGwoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVkaW9Tb3VyY2VcbiAgICAgICAgICAgIC5hdHRhY2godGhpcy5wcml2UmVxdWVzdFNlc3Npb24uYXVkaW9Ob2RlSWQpXG4gICAgICAgICAgICAuY29udGludWVXaXRoUHJvbWlzZShmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB2YXIgYXVkaW9Ob2RlO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5pc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2FuY2VsUmVjb2duaXRpb25Mb2NhbChFeHBvcnRzXzMuQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBFeHBvcnRzXzMuQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLkNvbm5lY3Rpb25GYWlsdXJlLCByZXN1bHQuZXJyb3IsIHN1Y2Nlc3NDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEV4cG9ydHNfMi5Qcm9taXNlSGVscGVyLmZyb21FcnJvcihyZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXVkaW9Ob2RlID0gbmV3IEV4cG9ydHNfMS5SZXBsYXlhYmxlQXVkaW9Ob2RlKHJlc3VsdC5yZXN1bHQsIF90aGlzLmF1ZGlvU291cmNlLmZvcm1hdCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uQXVkaW9Tb3VyY2VBdHRhY2hDb21wbGV0ZWQoYXVkaW9Ob2RlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuYXVkaW9Tb3VyY2UuZGV2aWNlSW5mby5vblN1Y2Nlc3NDb250aW51ZVdpdGhQcm9taXNlKGZ1bmN0aW9uIChkZXZpY2VJbmZvKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdlJlY29nbml6ZXJDb25maWcuU3BlZWNoU2VydmljZUNvbmZpZy5Db250ZXh0LmF1ZGlvID0geyBzb3VyY2U6IGRldmljZUluZm8gfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29uZmlndXJlQ29ubmVjdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIC5vbihmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2Vzc2lvblN0YXJ0RXZlbnRBcmdzID0gbmV3IEV4cG9ydHNfMy5TZXNzaW9uRXZlbnRBcmdzKF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISFfdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdlJlY29nbml6ZXIuc2Vzc2lvblN0YXJ0ZWQoX3RoaXMucHJpdlJlY29nbml6ZXIsIHNlc3Npb25TdGFydEV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VSZXRyaWV2YWxQcm9taXNlID0gX3RoaXMucmVjZWl2ZU1lc3NhZ2Uoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxCYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF1ZGlvU2VuZFByb21pc2UgPSBfdGhpcy5zZW5kQXVkaW8oYXVkaW9Ob2RlKTtcbiAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgYXVkaW9TZW5kUHJvbWlzZS5vbihmdW5jdGlvbiAoXykgeyB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoRXhwb3J0c18zLkNhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgRXhwb3J0c18zLkNhbmNlbGxhdGlvbkVycm9yQ29kZS5SdW50aW1lRXJyb3IsIGVycm9yLCBzdWNjZXNzQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRpb25Qcm9taXNlID0gRXhwb3J0c18yLlByb21pc2VIZWxwZXIud2hlbkFsbChbbWVzc2FnZVJldHJpZXZhbFByb21pc2UsIGF1ZGlvU2VuZFByb21pc2VdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRpb25Qcm9taXNlLm9uKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYW5jZWxSZWNvZ25pdGlvbkxvY2FsKEV4cG9ydHNfMy5DYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIEV4cG9ydHNfMy5DYW5jZWxsYXRpb25FcnJvckNvZGUuUnVudGltZUVycm9yLCBlcnJvciwgc3VjY2Vzc0NhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoRXhwb3J0c18zLkNhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgRXhwb3J0c18zLkNhbmNlbGxhdGlvbkVycm9yQ29kZS5Db25uZWN0aW9uRmFpbHVyZSwgZXJyb3IsIHN1Y2Nlc3NDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfSkuY29udGludWVXaXRoUHJvbWlzZShmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaXNFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEV4cG9ydHNfMi5Qcm9taXNlSGVscGVyLmZyb21FcnJvcihyZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEV4cG9ydHNfMi5Qcm9taXNlSGVscGVyLmZyb21SZXN1bHQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFNlcnZpY2VSZWNvZ25pemVyQmFzZS5wcm90b3R5cGUuc3RvcFJlY29nbml6aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNSZWNvZ25pemluZykge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZFRlbGVtZXRyeURhdGEoKTtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9Tb3VyY2UudHVybk9mZigpO1xuICAgICAgICAgICAgdGhpcy5zZW5kRmluYWxBdWRpbygpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTZXJ2aWNlUmVjb2duaXplckJhc2UucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdEltcGwoKS5yZXN1bHQoKTtcbiAgICB9O1xuICAgIFNlcnZpY2VSZWNvZ25pemVyQmFzZS5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbkxvY2FsKEV4cG9ydHNfMy5DYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIEV4cG9ydHNfMy5DYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvciwgXCJEaXNjb25uZWN0aW5nXCIsIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZS5yZXN1bHQoKS5pc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZS5yZXN1bHQoKS5pc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UucmVzdWx0KCkucmVzdWx0LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBDYW5jZWxzIHJlY29nbml0aW9uLlxuICAgIFNlcnZpY2VSZWNvZ25pemVyQmFzZS5wcm90b3R5cGUuY2FuY2VsUmVjb2duaXRpb25Mb2NhbCA9IGZ1bmN0aW9uIChjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IsIGNhbmNlbFJlY29DYWxsYmFjaykge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblN0b3BSZWNvZ25pemluZygpO1xuICAgICAgICAgICAgdGhpcy5zZW5kVGVsZW1ldHJ5RGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbih0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yLCBjYW5jZWxSZWNvQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBFc3RhYmxpc2hlcyBhIHdlYnNvY2tldCBjb25uZWN0aW9uIHRvIHRoZSBlbmQgcG9pbnQuXG4gICAgU2VydmljZVJlY29nbml6ZXJCYXNlLnByb3RvdHlwZS5jb25uZWN0SW1wbCA9IGZ1bmN0aW9uIChpc1VuQXV0aG9yaXplZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoaXNVbkF1dGhvcml6ZWQgPT09IHZvaWQgMCkgeyBpc1VuQXV0aG9yaXplZCA9IGZhbHNlOyB9XG4gICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlLnJlc3VsdCgpLmlzQ29tcGxldGVkICYmXG4gICAgICAgICAgICAgICAgKHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlLnJlc3VsdCgpLmlzRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgfHwgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UucmVzdWx0KCkucmVzdWx0LnN0YXRlKCkgPT09IEV4cG9ydHNfMi5Db25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3RJbXBsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IEV4cG9ydHNfMi5jcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IEV4cG9ydHNfMi5jcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUHJlQ29ubmVjdGlvblN0YXJ0KHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQsIHRoaXMucHJpdkNvbm5lY3Rpb25JZCk7XG4gICAgICAgIHZhciBhdXRoUHJvbWlzZSA9IGlzVW5BdXRob3JpemVkID8gdGhpcy5wcml2QXV0aGVudGljYXRpb24uZmV0Y2hPbkV4cGlyeSh0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkKSA6IHRoaXMucHJpdkF1dGhlbnRpY2F0aW9uLmZldGNoKHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZSA9IGF1dGhQcm9taXNlXG4gICAgICAgICAgICAuY29udGludWVXaXRoUHJvbWlzZShmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25BdXRoQ29tcGxldGVkKHRydWUsIHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25BdXRoQ29tcGxldGVkKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb25uZWN0aW9uID0gX3RoaXMucHJpdkNvbm5lY3Rpb25GYWN0b3J5LmNyZWF0ZShfdGhpcy5wcml2UmVjb2duaXplckNvbmZpZywgcmVzdWx0LnJlc3VsdCwgX3RoaXMucHJpdkNvbm5lY3Rpb25JZCk7XG4gICAgICAgICAgICBfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ubGlzdGVuRm9yU2VydmljZVRlbGVtZXRyeShjb25uZWN0aW9uLmV2ZW50cyk7XG4gICAgICAgICAgICAvLyBBdHRhY2ggdG8gdGhlIHVuZGVybHlpbmcgZXZlbnQuIE5vIG5lZWQgdG8gaG9sZCBvbnRvIHRoZSBkZXRhY2ggcG9pbnRlcnMgYXMgaW4gdGhlIGV2ZW50IHRoZSBjb25uZWN0aW9uIGdvZXMgYXdheSxcbiAgICAgICAgICAgIC8vIGl0J2xsIHN0b3Agc2VuZGluZyBldmVudHMuXG4gICAgICAgICAgICBjb25uZWN0aW9uLmV2ZW50cy5hdHRhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29ubmVjdGlvbkV2ZW50cy5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24ub3BlbigpLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aFByb21pc2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QcmVDb25uZWN0aW9uU3RhcnQoX3RoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQsIF90aGlzLnByaXZDb25uZWN0aW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25Db25uZWN0aW9uRXN0YWJsaXNoQ29tcGxldGVkKHJlc3BvbnNlLnN0YXR1c0NvZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdChjb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gNDAzICYmICFpc1VuQXV0aG9yaXplZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29ubmVjdEltcGwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25Db25uZWN0aW9uRXN0YWJsaXNoQ29tcGxldGVkKHJlc3BvbnNlLnN0YXR1c0NvZGUsIHJlc3BvbnNlLnJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzIuUHJvbWlzZUhlbHBlci5mcm9tRXJyb3IoXCJVbmFibGUgdG8gY29udGFjdCBzZXJ2ZXIuIFN0YXR1c0NvZGU6IFwiICsgcmVzcG9uc2Uuc3RhdHVzQ29kZSArIFwiLCBcIiArIF90aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRXhwb3J0c18zLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQpICsgXCIgUmVhc29uOiBcIiArIHJlc3BvbnNlLnJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2U7XG4gICAgfTtcbiAgICAvLyBUYWtlcyBhbiBlc3RhYmxpc2hlZCB3ZWJzb2NrZXQgY29ubmVjdGlvbiB0byB0aGUgZW5kcG9pbnQgYW5kIHNlbmRzIHNwZWVjaCBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uLlxuICAgIFNlcnZpY2VSZWNvZ25pemVyQmFzZS5wcm90b3R5cGUuY29uZmlndXJlQ29ubmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZS5yZXN1bHQoKS5pc0NvbXBsZXRlZCAmJlxuICAgICAgICAgICAgICAgICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UucmVzdWx0KCkuaXNFcnJvclxuICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UucmVzdWx0KCkucmVzdWx0LnN0YXRlKCkgPT09IEV4cG9ydHNfMi5Db25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJlQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgPSB0aGlzLmNvbm5lY3RJbXBsKCkub25TdWNjZXNzQ29udGludWVXaXRoUHJvbWlzZShmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNlbmRTcGVlY2hTZXJ2aWNlQ29uZmlnKGNvbm5lY3Rpb24sIF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbiwgX3RoaXMucHJpdlJlY29nbml6ZXJDb25maWcuU3BlZWNoU2VydmljZUNvbmZpZy5zZXJpYWxpemUoKSlcbiAgICAgICAgICAgICAgICAub25TdWNjZXNzQ29udGludWVXaXRoUHJvbWlzZShmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZW5kU3BlZWNoQ29udGV4dChjb25uZWN0aW9uKS5vblN1Y2Nlc3NDb250aW51ZVdpdGgoZnVuY3Rpb24gKF8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb247XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2U7XG4gICAgfTtcbiAgICBTZXJ2aWNlUmVjb2duaXplckJhc2UucHJvdG90eXBlLnNlbmRGaW5hbEF1ZGlvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRXhwb3J0c18yLkRlZmVycmVkKCk7XG4gICAgICAgIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCkub24oZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2VfSW50ZXJuYWxfMS5TcGVlY2hDb25uZWN0aW9uTWVzc2FnZShFeHBvcnRzXzIuTWVzc2FnZVR5cGUuQmluYXJ5LCBcImF1ZGlvXCIsIF90aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIG51bGwsIG51bGwpKS5vbihmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gICAgfTtcbiAgICBTZXJ2aWNlUmVjb2duaXplckJhc2UudGVsZW1ldHJ5RGF0YUVuYWJsZWQgPSB0cnVlO1xuICAgIHJldHVybiBTZXJ2aWNlUmVjb2duaXplckJhc2U7XG59KCkpO1xuZXhwb3J0cy5TZXJ2aWNlUmVjb2duaXplckJhc2UgPSBTZXJ2aWNlUmVjb2duaXplckJhc2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNlcnZpY2VSZWNvZ25pemVyQmFzZS5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9FeHBvcnRzXCIpO1xudmFyIFJlY29nbml0aW9uRXZlbnRzXzEgPSByZXF1aXJlKFwiLi9SZWNvZ25pdGlvbkV2ZW50c1wiKTtcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIFNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIocmVxdWVzdElkLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkxpc3RlbmluZ1RyaWdnZXJNZXRyaWMgPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZNaWNNZXRyaWMgPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljID0gbnVsbDtcbiAgICAgICAgdGhpcy5vbkV2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2SXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmVjb2duaXRpb25FdmVudHNfMS5SZWNvZ25pdGlvblRyaWdnZXJlZEV2ZW50ICYmIGUucmVxdWVzdElkID09PSBfdGhpcy5wcml2UmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkxpc3RlbmluZ1RyaWdnZXJNZXRyaWMgPSB7XG4gICAgICAgICAgICAgICAgICAgIEVuZDogZS5ldmVudFRpbWUsXG4gICAgICAgICAgICAgICAgICAgIE5hbWU6IFwiTGlzdGVuaW5nVHJpZ2dlclwiLFxuICAgICAgICAgICAgICAgICAgICBTdGFydDogZS5ldmVudFRpbWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXhwb3J0c18xLkF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50ICYmIGUuYXVkaW9Tb3VyY2VJZCA9PT0gX3RoaXMucHJpdkF1ZGlvU291cmNlSWQgJiYgZS5hdWRpb05vZGVJZCA9PT0gX3RoaXMucHJpdkF1ZGlvTm9kZUlkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdk1pY1N0YXJ0VGltZSA9IGUuZXZlbnRUaW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFeHBvcnRzXzEuQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudCAmJiBlLmF1ZGlvU291cmNlSWQgPT09IF90aGlzLnByaXZBdWRpb1NvdXJjZUlkICYmIGUuYXVkaW9Ob2RlSWQgPT09IF90aGlzLnByaXZBdWRpb05vZGVJZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZNaWNTdGFydFRpbWUgPSBlLmV2ZW50VGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXhwb3J0c18xLkF1ZGlvU291cmNlRXJyb3JFdmVudCAmJiBlLmF1ZGlvU291cmNlSWQgPT09IF90aGlzLnByaXZBdWRpb1NvdXJjZUlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5wcml2TWljTWV0cmljKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZNaWNNZXRyaWMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFbmQ6IGUuZXZlbnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgRXJyb3I6IGUuZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBOYW1lOiBcIk1pY3JvcGhvbmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0OiBfdGhpcy5wcml2TWljU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXhwb3J0c18xLkF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnQgJiYgZS5hdWRpb1NvdXJjZUlkID09PSBfdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCAmJiBlLmF1ZGlvTm9kZUlkID09PSBfdGhpcy5wcml2QXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnByaXZNaWNNZXRyaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdk1pY01ldHJpYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVuZDogZS5ldmVudFRpbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBFcnJvcjogZS5lcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWU6IFwiTWljcm9waG9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IF90aGlzLnByaXZNaWNTdGFydFRpbWUsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFeHBvcnRzXzEuQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCAmJiBlLmF1ZGlvU291cmNlSWQgPT09IF90aGlzLnByaXZBdWRpb1NvdXJjZUlkICYmIGUuYXVkaW9Ob2RlSWQgPT09IF90aGlzLnByaXZBdWRpb05vZGVJZCkge1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXMucHJpdk1pY01ldHJpYykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2TWljTWV0cmljID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgRW5kOiBlLmV2ZW50VGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWU6IFwiTWljcm9waG9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IF90aGlzLnByaXZNaWNTdGFydFRpbWUsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBSZWNvZ25pdGlvbkV2ZW50c18xLkNvbm5lY3RpbmdUb1NlcnZpY2VFdmVudCAmJiBlLnJlcXVlc3RJZCA9PT0gX3RoaXMucHJpdlJlcXVlc3RJZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZDb25uZWN0aW9uSWQgPSBlLnNlc3Npb25JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXhwb3J0c18xLkNvbm5lY3Rpb25TdGFydEV2ZW50ICYmIGUuY29ubmVjdGlvbklkID09PSBfdGhpcy5wcml2Q29ubmVjdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkNvbm5lY3Rpb25TdGFydFRpbWUgPSBlLmV2ZW50VGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXhwb3J0c18xLkNvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50ICYmIGUuY29ubmVjdGlvbklkID09PSBfdGhpcy5wcml2Q29ubmVjdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVuZDogZS5ldmVudFRpbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBJZDogX3RoaXMucHJpdkNvbm5lY3Rpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWU6IFwiQ29ubmVjdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IF90aGlzLnByaXZDb25uZWN0aW9uU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXhwb3J0c18xLkNvbm5lY3Rpb25Fc3RhYmxpc2hFcnJvckV2ZW50ICYmIGUuY29ubmVjdGlvbklkID09PSBfdGhpcy5wcml2Q29ubmVjdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVuZDogZS5ldmVudFRpbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBFcnJvcjogX3RoaXMuZ2V0Q29ubmVjdGlvbkVycm9yKGUuc3RhdHVzQ29kZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBJZDogX3RoaXMucHJpdkNvbm5lY3Rpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWU6IFwiQ29ubmVjdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IF90aGlzLnByaXZDb25uZWN0aW9uU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXhwb3J0c18xLkNvbm5lY3Rpb25NZXNzYWdlUmVjZWl2ZWRFdmVudCAmJiBlLmNvbm5lY3Rpb25JZCA9PT0gX3RoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgICAgIGlmIChlLm1lc3NhZ2UgJiYgZS5tZXNzYWdlLmhlYWRlcnMgJiYgZS5tZXNzYWdlLmhlYWRlcnMucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzW2UubWVzc2FnZS5oZWFkZXJzLnBhdGhdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVjZWl2ZWRNZXNzYWdlc1tlLm1lc3NhZ2UuaGVhZGVycy5wYXRoXSA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzW2UubWVzc2FnZS5oZWFkZXJzLnBhdGhdLnB1c2goZS5uZXR3b3JrUmVjZWl2ZWRUaW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0VGVsZW1ldHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1ldHJpY3MgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYykge1xuICAgICAgICAgICAgICAgIG1ldHJpY3MucHVzaChfdGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMucHJpdk1pY01ldHJpYykge1xuICAgICAgICAgICAgICAgIG1ldHJpY3MucHVzaChfdGhpcy5wcml2TWljTWV0cmljKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYykge1xuICAgICAgICAgICAgICAgIG1ldHJpY3MucHVzaChfdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMucHJpdlBocmFzZUxhdGVuY2llcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbWV0cmljcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgUGhyYXNlTGF0ZW5jeU1zOiBfdGhpcy5wcml2UGhyYXNlTGF0ZW5jaWVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzLnByaXZIeXBvdGhlc2lzTGF0ZW5jaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBtZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBGaXJzdEh5cG90aGVzaXNMYXRlbmN5TXM6IF90aGlzLnByaXZIeXBvdGhlc2lzTGF0ZW5jaWVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRlbGVtZXRyeSA9IHtcbiAgICAgICAgICAgICAgICBNZXRyaWNzOiBtZXRyaWNzLFxuICAgICAgICAgICAgICAgIFJlY2VpdmVkTWVzc2FnZXM6IF90aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkodGVsZW1ldHJ5KTtcbiAgICAgICAgICAgIC8vIFdlIGRvbnQgd2FudCB0byBzZW5kIHRoZSBzYW1lIHRlbGVtZXRyeSBhZ2Fpbi4gU28gY2xlYW4gdGhvc2Ugb3V0LlxuICAgICAgICAgICAgX3RoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXMgPSB7fTtcbiAgICAgICAgICAgIF90aGlzLnByaXZMaXN0ZW5pbmdUcmlnZ2VyTWV0cmljID0gbnVsbDtcbiAgICAgICAgICAgIF90aGlzLnByaXZNaWNNZXRyaWMgPSBudWxsO1xuICAgICAgICAgICAgX3RoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMgPSBudWxsO1xuICAgICAgICAgICAgX3RoaXMucHJpdlBocmFzZUxhdGVuY2llcyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMucHJpdkh5cG90aGVzaXNMYXRlbmNpZXMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBqc29uO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q29ubmVjdGlvbkVycm9yID0gZnVuY3Rpb24gKHN0YXR1c0NvZGUpIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAtLSBXZWJzb2NrZXQgc3RhdHVzIGNvZGVzIC0tXG4gICAgICAgICAgICBOb3JtYWxDbG9zdXJlID0gMTAwMCxcbiAgICAgICAgICAgIEVuZHBvaW50VW5hdmFpbGFibGUgPSAxMDAxLFxuICAgICAgICAgICAgUHJvdG9jb2xFcnJvciA9IDEwMDIsXG4gICAgICAgICAgICBJbnZhbGlkTWVzc2FnZVR5cGUgPSAxMDAzLFxuICAgICAgICAgICAgRW1wdHkgPSAxMDA1LFxuICAgICAgICAgICAgSW52YWxpZFBheWxvYWREYXRhID0gMTAwNyxcbiAgICAgICAgICAgIFBvbGljeVZpb2xhdGlvbiA9IDEwMDgsXG4gICAgICAgICAgICBNZXNzYWdlVG9vQmlnID0gMTAwOSxcbiAgICAgICAgICAgIE1hbmRhdG9yeUV4dGVuc2lvbiA9IDEwMTAsXG4gICAgICAgICAgICBJbnRlcm5hbFNlcnZlckVycm9yID0gMTAxMVxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHN3aXRjaCAoc3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgNDAwOlxuICAgICAgICAgICAgICAgIGNhc2UgMTAwMjpcbiAgICAgICAgICAgICAgICBjYXNlIDEwMDM6XG4gICAgICAgICAgICAgICAgY2FzZSAxMDA1OlxuICAgICAgICAgICAgICAgIGNhc2UgMTAwNzpcbiAgICAgICAgICAgICAgICBjYXNlIDEwMDg6XG4gICAgICAgICAgICAgICAgY2FzZSAxMDA5OiByZXR1cm4gXCJCYWRSZXF1ZXN0XCI7XG4gICAgICAgICAgICAgICAgY2FzZSA0MDE6IHJldHVybiBcIlVuYXV0aG9yaXplZFwiO1xuICAgICAgICAgICAgICAgIGNhc2UgNDAzOiByZXR1cm4gXCJGb3JiaWRkZW5cIjtcbiAgICAgICAgICAgICAgICBjYXNlIDUwMzpcbiAgICAgICAgICAgICAgICBjYXNlIDEwMDE6IHJldHVybiBcIlNlcnZlclVuYXZhaWxhYmxlXCI7XG4gICAgICAgICAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgICAgICAgY2FzZSAxMDExOiByZXR1cm4gXCJTZXJ2ZXJFcnJvclwiO1xuICAgICAgICAgICAgICAgIGNhc2UgNDA4OlxuICAgICAgICAgICAgICAgIGNhc2UgNTA0OiByZXR1cm4gXCJUaW1lb3V0XCI7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIFwic3RhdHVzY29kZTpcIiArIHN0YXR1c0NvZGUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdElkID0gcmVxdWVzdElkO1xuICAgICAgICB0aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICAgICAgdGhpcy5wcml2UmVjZWl2ZWRNZXNzYWdlcyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2SHlwb3RoZXNpc0xhdGVuY2llcyA9IFtdO1xuICAgIH1cbiAgICBTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIucHJvdG90eXBlLnBocmFzZVJlY2VpdmVkID0gZnVuY3Rpb24gKGF1ZGlvUmVjZWl2ZWRUaW1lKSB7XG4gICAgICAgIGlmIChhdWRpb1JlY2VpdmVkVGltZSA+IDApIHsgLy8gMCBpbmRpY2F0ZXMgdGhlIHRpbWUgaXMgdW5rbm93bi4gRHJvcCBpdC5cbiAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZUxhdGVuY2llcy5wdXNoKERhdGUubm93KCkgLSBhdWRpb1JlY2VpdmVkVGltZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5wcm90b3R5cGUuaHlwb3RoZXNpc1JlY2VpdmVkID0gZnVuY3Rpb24gKGF1ZGlvUmVjZWl2ZWRUaW1lKSB7XG4gICAgICAgIGlmIChhdWRpb1JlY2VpdmVkVGltZSA+IDApIHsgLy8gMCBpbmRpY2F0ZXMgdGhlIHRpbWUgaXMgdW5rbm93bi4gRHJvcCBpdC5cbiAgICAgICAgICAgIHRoaXMucHJpdkh5cG90aGVzaXNMYXRlbmNpZXMucHVzaChEYXRlLm5vdygpIC0gYXVkaW9SZWNlaXZlZFRpbWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyLnByb3RvdHlwZSwgXCJoYXNUZWxlbWV0cnlcIiwge1xuICAgICAgICAvLyBEZXRlcm1pbmVzIGlmIHRoZXJlIGFyZSBhbnkgdGVsZW1ldHJ5IGV2ZW50cyB0byBzZW5kIHRvIHRoZSBzZXJ2aWNlLlxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAoT2JqZWN0LmtleXModGhpcy5wcml2UmVjZWl2ZWRNZXNzYWdlcykubGVuZ3RoICE9PSAwIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdk1pY01ldHJpYyAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMgIT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMubGVuZ3RoICE9PSAwIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SHlwb3RoZXNpc0xhdGVuY2llcy5sZW5ndGggIT09IDApO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyO1xufSgpKTtcbmV4cG9ydHMuU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyID0gU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuSW50ZXJuYWwuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCIpO1xudmFyIEV4cG9ydHNfMiA9IHJlcXVpcmUoXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIik7XG52YXIgRXhwb3J0c18zID0gcmVxdWlyZShcIi4uL3Nkay9FeHBvcnRzXCIpO1xudmFyIEV4cG9ydHNfNCA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG52YXIgUXVlcnlQYXJhbWV0ZXJOYW1lc18xID0gcmVxdWlyZShcIi4vUXVlcnlQYXJhbWV0ZXJOYW1lc1wiKTtcbnZhciBTcGVlY2hDb25uZWN0aW9uRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTcGVlY2hDb25uZWN0aW9uRmFjdG9yeSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5pbnRlcmFjdGl2ZVJlbGF0aXZlVXJpID0gXCIvc3BlZWNoL3JlY29nbml0aW9uL2ludGVyYWN0aXZlL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uUmVsYXRpdmVVcmkgPSBcIi9zcGVlY2gvcmVjb2duaXRpb24vY29udmVyc2F0aW9uL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgIHRoaXMuZGljdGF0aW9uUmVsYXRpdmVVcmkgPSBcIi9zcGVlY2gvcmVjb2duaXRpb24vZGljdGF0aW9uL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24gKGNvbmZpZywgYXV0aEluZm8sIGNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgdmFyIGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRXhwb3J0c18zLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB2YXIgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIHZhciBlbmRwb2ludElkID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRXhwb3J0c18zLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHZhciBsYW5ndWFnZSA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KEV4cG9ydHNfMy5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmIChlbmRwb2ludElkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbmRwb2ludCB8fCBlbmRwb2ludC5zZWFyY2goUXVlcnlQYXJhbWV0ZXJOYW1lc18xLlF1ZXJ5UGFyYW1ldGVyTmFtZXMuRGVwbG95bWVudElkUGFyYW1OYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lc18xLlF1ZXJ5UGFyYW1ldGVyTmFtZXMuRGVwbG95bWVudElkUGFyYW1OYW1lXSA9IGVuZHBvaW50SWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVuZHBvaW50IHx8IGVuZHBvaW50LnNlYXJjaChRdWVyeVBhcmFtZXRlck5hbWVzXzEuUXVlcnlQYXJhbWV0ZXJOYW1lcy5MYW5ndWFnZVBhcmFtTmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXNfMS5RdWVyeVBhcmFtZXRlck5hbWVzLkxhbmd1YWdlUGFyYW1OYW1lXSA9IGxhbmd1YWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZW5kcG9pbnQgfHwgZW5kcG9pbnQuc2VhcmNoKFF1ZXJ5UGFyYW1ldGVyTmFtZXNfMS5RdWVyeVBhcmFtZXRlck5hbWVzLkZvcm1hdFBhcmFtTmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lc18xLlF1ZXJ5UGFyYW1ldGVyTmFtZXMuRm9ybWF0UGFyYW1OYW1lXSA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5PdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIEV4cG9ydHNfMy5PdXRwdXRGb3JtYXRbRXhwb3J0c18zLk91dHB1dEZvcm1hdC5TaW1wbGVdKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlbmRwb2ludCkge1xuICAgICAgICAgICAgICAgIHZhciByZWdpb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShFeHBvcnRzXzMuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgdmFyIGhvc3QgPSBcIndzczovL1wiICsgcmVnaW9uICsgXCIuc3R0LnNwZWVjaC5taWNyb3NvZnQuY29tXCI7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChjb25maWcucmVjb2duaXRpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRXhwb3J0c180LlJlY29nbml0aW9uTW9kZS5Db252ZXJzYXRpb246XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGhvc3QgKyBfdGhpcy5jb252ZXJzYXRpb25SZWxhdGl2ZVVyaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEV4cG9ydHNfNC5SZWNvZ25pdGlvbk1vZGUuRGljdGF0aW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBob3N0ICsgX3RoaXMuZGljdGF0aW9uUmVsYXRpdmVVcmk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gaG9zdCArIF90aGlzLmludGVyYWN0aXZlUmVsYXRpdmVVcmk7IC8vIGRlZmF1bHQgaXMgaW50ZXJhY3RpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJzW2F1dGhJbmZvLmhlYWRlck5hbWVdID0gYXV0aEluZm8udG9rZW47XG4gICAgICAgICAgICBoZWFkZXJzW1F1ZXJ5UGFyYW1ldGVyTmFtZXNfMS5RdWVyeVBhcmFtZXRlck5hbWVzLkNvbm5lY3Rpb25JZEhlYWRlcl0gPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEV4cG9ydHNfMS5XZWJzb2NrZXRDb25uZWN0aW9uKGVuZHBvaW50LCBxdWVyeVBhcmFtcywgaGVhZGVycywgbmV3IEV4cG9ydHNfNC5XZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyKCksIEV4cG9ydHNfMS5Qcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgY29ubmVjdGlvbklkKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIFNwZWVjaENvbm5lY3Rpb25GYWN0b3J5O1xufSgpKTtcbmV4cG9ydHMuU3BlZWNoQ29ubmVjdGlvbkZhY3RvcnkgPSBTcGVlY2hDb25uZWN0aW9uRmFjdG9yeTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoQ29ubmVjdGlvbkZhY3RvcnkuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9FeHBvcnRzXCIpO1xudmFyIFBhdGhIZWFkZXJOYW1lID0gXCJwYXRoXCI7XG52YXIgQ29udGVudFR5cGVIZWFkZXJOYW1lID0gXCJjb250ZW50LXR5cGVcIjtcbnZhciBSZXF1ZXN0SWRIZWFkZXJOYW1lID0gXCJ4LXJlcXVlc3RpZFwiO1xudmFyIFJlcXVlc3RUaW1lc3RhbXBIZWFkZXJOYW1lID0gXCJ4LXRpbWVzdGFtcFwiO1xudmFyIFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTcGVlY2hDb25uZWN0aW9uTWVzc2FnZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShtZXNzYWdlVHlwZSwgcGF0aCwgcmVxdWVzdElkLCBjb250ZW50VHlwZSwgYm9keSwgYWRkaXRpb25hbEhlYWRlcnMsIGlkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghcGF0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEV4cG9ydHNfMS5Bcmd1bWVudE51bGxFcnJvcihcInBhdGhcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFeHBvcnRzXzEuQXJndW1lbnROdWxsRXJyb3IoXCJyZXF1ZXN0SWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhlYWRlcnMgPSB7fTtcbiAgICAgICAgaGVhZGVyc1tQYXRoSGVhZGVyTmFtZV0gPSBwYXRoO1xuICAgICAgICBoZWFkZXJzW1JlcXVlc3RJZEhlYWRlck5hbWVdID0gcmVxdWVzdElkO1xuICAgICAgICBoZWFkZXJzW1JlcXVlc3RUaW1lc3RhbXBIZWFkZXJOYW1lXSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgaWYgKGNvbnRlbnRUeXBlKSB7XG4gICAgICAgICAgICBoZWFkZXJzW0NvbnRlbnRUeXBlSGVhZGVyTmFtZV0gPSBjb250ZW50VHlwZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWRkaXRpb25hbEhlYWRlcnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGhlYWRlck5hbWUgaW4gYWRkaXRpb25hbEhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2hlYWRlck5hbWVdID0gYWRkaXRpb25hbEhlYWRlcnNbaGVhZGVyTmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlVHlwZSwgYm9keSwgaGVhZGVycywgaWQpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2VUeXBlLCBib2R5LCBoZWFkZXJzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnByaXZQYXRoID0gcGF0aDtcbiAgICAgICAgX3RoaXMucHJpdlJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcbiAgICAgICAgX3RoaXMucHJpdkNvbnRlbnRUeXBlID0gY29udGVudFR5cGU7XG4gICAgICAgIF90aGlzLnByaXZBZGRpdGlvbmFsSGVhZGVycyA9IGFkZGl0aW9uYWxIZWFkZXJzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hDb25uZWN0aW9uTWVzc2FnZS5wcm90b3R5cGUsIFwicGF0aFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhdGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hDb25uZWN0aW9uTWVzc2FnZS5wcm90b3R5cGUsIFwicmVxdWVzdElkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVxdWVzdElkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UucHJvdG90eXBlLCBcImNvbnRlbnRUeXBlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29udGVudFR5cGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hDb25uZWN0aW9uTWVzc2FnZS5wcm90b3R5cGUsIFwiYWRkaXRpb25hbEhlYWRlcnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZBZGRpdGlvbmFsSGVhZGVycztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuZnJvbUNvbm5lY3Rpb25NZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIHBhdGggPSBudWxsO1xuICAgICAgICB2YXIgcmVxdWVzdElkID0gbnVsbDtcbiAgICAgICAgdmFyIGNvbnRlbnRUeXBlID0gbnVsbDtcbiAgICAgICAgdmFyIHJlcXVlc3RUaW1lc3RhbXAgPSBudWxsO1xuICAgICAgICB2YXIgYWRkaXRpb25hbEhlYWRlcnMgPSB7fTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaGVhZGVycykge1xuICAgICAgICAgICAgZm9yICh2YXIgaGVhZGVyTmFtZSBpbiBtZXNzYWdlLmhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpID09PSBQYXRoSGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gbWVzc2FnZS5oZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRlck5hbWUudG9Mb3dlckNhc2UoKSA9PT0gUmVxdWVzdElkSGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQgPSBtZXNzYWdlLmhlYWRlcnNbaGVhZGVyTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpID09PSBSZXF1ZXN0VGltZXN0YW1wSGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VGltZXN0YW1wID0gbWVzc2FnZS5oZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRlck5hbWUudG9Mb3dlckNhc2UoKSA9PT0gQ29udGVudFR5cGVIZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gbWVzc2FnZS5oZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEhlYWRlcnNbaGVhZGVyTmFtZV0gPSBtZXNzYWdlLmhlYWRlcnNbaGVhZGVyTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShtZXNzYWdlLm1lc3NhZ2VUeXBlLCBwYXRoLCByZXF1ZXN0SWQsIGNvbnRlbnRUeXBlLCBtZXNzYWdlLmJvZHksIGFkZGl0aW9uYWxIZWFkZXJzLCBtZXNzYWdlLmlkKTtcbiAgICB9O1xuICAgIHJldHVybiBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZTtcbn0oRXhwb3J0c18xLkNvbm5lY3Rpb25NZXNzYWdlKSk7XG5leHBvcnRzLlNwZWVjaENvbm5lY3Rpb25NZXNzYWdlID0gU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaENvbm5lY3Rpb25NZXNzYWdlLkludGVybmFsLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgSlNPTiB1c2VkIGluIHRoZSBzcGVlY2guY29udGV4dCBtZXNzYWdlIHNlbnQgdG8gdGhlIHNwZWVjaCBzZXJ2aWNlLlxuICogVGhlIGR5bmFtaWMgZ3JhbW1hciBpcyBhbHdheXMgcmVmcmVzaGVkIGZyb20gdGhlIGVuY2Fwc3VsYXRlZCBkeW5hbWljIGdyYW1tYXIgb2JqZWN0LlxuICovXG52YXIgU3BlZWNoQ29udGV4dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTcGVlY2hDb250ZXh0KGR5bmFtaWNHcmFtbWFyKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbnRleHQgPSB7fTtcbiAgICAgICAgdGhpcy5wcml2RHluYW1pY0dyYW1tYXIgPSBkeW5hbWljR3JhbW1hcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHNlY3Rpb24gdG8gdGhlIHNwZWVjaC5jb250ZXh0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0gc2VjdGlvbk5hbWUgTmFtZSBvZiB0aGUgc2VjdGlvbiB0byBhZGQuXG4gICAgICogQHBhcmFtIHZhbHVlIEpTT04gc2VyaWFsaXplYWJsZSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSB2YWx1ZS5cbiAgICAgKi9cbiAgICBTcGVlY2hDb250ZXh0LnByb3RvdHlwZS5zZXRTZWN0aW9uID0gZnVuY3Rpb24gKHNlY3Rpb25OYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZDb250ZXh0W3NlY3Rpb25OYW1lXSA9IHZhbHVlO1xuICAgIH07XG4gICAgU3BlZWNoQ29udGV4dC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGdpID0gdGhpcy5wcml2RHluYW1pY0dyYW1tYXIuZ2VuZXJhdGVHcmFtbWFyT2JqZWN0KCk7XG4gICAgICAgIHRoaXMuc2V0U2VjdGlvbihcImRnaVwiLCBkZ2kpO1xuICAgICAgICB2YXIgcmV0ID0gSlNPTi5zdHJpbmdpZnkodGhpcy5wcml2Q29udGV4dCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICByZXR1cm4gU3BlZWNoQ29udGV4dDtcbn0oKSk7XG5leHBvcnRzLlNwZWVjaENvbnRleHQgPSBTcGVlY2hDb250ZXh0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hDb250ZXh0LmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi9zZGsvRXhwb3J0c1wiKTtcbnZhciBFeHBvcnRzXzIgPSByZXF1aXJlKFwiLi9FeHBvcnRzXCIpO1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgU3BlZWNoU2VydmljZVJlY29nbml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwZWVjaFNlcnZpY2VSZWNvZ25pemVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNwZWVjaFNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHNwZWVjaFJlY29nbml6ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgc3BlZWNoUmVjb2duaXplcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIgPSBzcGVlY2hSZWNvZ25pemVyO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFNwZWVjaFNlcnZpY2VSZWNvZ25pemVyLnByb3RvdHlwZS5wcm9jZXNzVHlwZVNwZWNpZmljTWVzc2FnZXMgPSBmdW5jdGlvbiAoY29ubmVjdGlvbk1lc3NhZ2UsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsQmFjaykge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB2YXIgcmVzdWx0UHJvcHMgPSBuZXcgRXhwb3J0c18xLlByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICByZXN1bHRQcm9wcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzEuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5oeXBvdGhlc2lzXCI6XG4gICAgICAgICAgICAgICAgdmFyIGh5cG90aGVzaXMgPSBFeHBvcnRzXzIuU3BlZWNoSHlwb3RoZXNpcy5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IGh5cG90aGVzaXMuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldDtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgRXhwb3J0c18xLlNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgRXhwb3J0c18xLlJlc3VsdFJlYXNvbi5SZWNvZ25pemluZ1NwZWVjaCwgaHlwb3RoZXNpcy5UZXh0LCBoeXBvdGhlc2lzLkR1cmF0aW9uLCBvZmZzZXQsIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkh5cG90aGVzaXMob2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB2YXIgZXYgPSBuZXcgRXhwb3J0c18xLlNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgaHlwb3RoZXNpcy5EdXJhdGlvbiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLnJlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLnJlY29nbml6aW5nKHRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3BlZWNoLnBocmFzZVwiOlxuICAgICAgICAgICAgICAgIHZhciBzaW1wbGUgPSBFeHBvcnRzXzIuU2ltcGxlU3BlZWNoUGhyYXNlLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0UmVhc29uID0gRXhwb3J0c18yLkVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlUmVjb2duaXRpb25SZXN1bHQoc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblBocmFzZVJlY29nbml6ZWQodGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCArIHNpbXBsZS5PZmZzZXQgKyBzaW1wbGUuRHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmIChFeHBvcnRzXzEuUmVzdWx0UmVhc29uLkNhbmNlbGVkID09PSByZXN1bHRSZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbmNlbFJlYXNvbiA9IEV4cG9ydHNfMi5FbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdChzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgRXhwb3J0c18xLlNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgcmVzdWx0UmVhc29uLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5LCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW5jZWxFdmVudCA9IG5ldyBFeHBvcnRzXzEuU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyhjYW5jZWxSZWFzb24sIHVuZGVmaW5lZCwgY2FuY2VsUmVhc29uID09PSBFeHBvcnRzXzEuQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yID8gRXhwb3J0c18xLkNhbmNlbGxhdGlvbkVycm9yQ29kZS5TZXJ2aWNlRXJyb3IgOiBFeHBvcnRzXzEuQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLk5vRXJyb3IsIHVuZGVmaW5lZCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoUmVjb2duaXplci5jYW5jZWxlZCh0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLCBjYW5jZWxFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiYgcmVzdWx0UmVhc29uID09PSBFeHBvcnRzXzEuUmVzdWx0UmVhc29uLk5vTWF0Y2ggJiYgc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzICE9PSBFeHBvcnRzXzIuUmVjb2duaXRpb25TdGF0dXMuSW5pdGlhbFNpbGVuY2VUaW1lb3V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShFeHBvcnRzXzIuT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lKSA9PT0gRXhwb3J0c18xLk91dHB1dEZvcm1hdFtFeHBvcnRzXzEuT3V0cHV0Rm9ybWF0LlNpbXBsZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgRXhwb3J0c18xLlNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgcmVzdWx0UmVhc29uLCBzaW1wbGUuRGlzcGxheVRleHQsIHNpbXBsZS5EdXJhdGlvbiwgc2ltcGxlLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxlZCA9IEV4cG9ydHNfMi5EZXRhaWxlZFNwZWVjaFBocmFzZS5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEV4cG9ydHNfMS5TcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlc3VsdFJlYXNvbiwgZGV0YWlsZWQuUmVjb2duaXRpb25TdGF0dXMgPT09IEV4cG9ydHNfMi5SZWNvZ25pdGlvblN0YXR1cy5TdWNjZXNzID8gZGV0YWlsZWQuTkJlc3RbMF0uRGlzcGxheSA6IHVuZGVmaW5lZCwgZGV0YWlsZWQuRHVyYXRpb24sIGRldGFpbGVkLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudF8xID0gbmV3IEV4cG9ydHNfMS5TcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIHJlc3VsdC5vZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLnJlY29nbml6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLnJlY29nbml6ZWQodGhpcy5wcml2U3BlZWNoUmVjb2duaXplciwgZXZlbnRfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgIGlmICghIXN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWVycm9yQ2FsbEJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaW52b2tlIHRoZSBjYWxsIGJhY2sgb25jZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGlmIGl0J3Mgc3VjY2Vzc2Z1bCBkb24ndCBpbnZva2UgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsQmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBDYW5jZWxzIHJlY29nbml0aW9uLlxuICAgIFNwZWVjaFNlcnZpY2VSZWNvZ25pemVyLnByb3RvdHlwZS5jYW5jZWxSZWNvZ25pdGlvbiA9IGZ1bmN0aW9uIChzZXNzaW9uSWQsIHJlcXVlc3RJZCwgY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yLCBjYW5jZWxSZWNvQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBuZXcgRXhwb3J0c18xLlByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KEV4cG9ydHNfMi5DYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIEV4cG9ydHNfMS5DYW5jZWxsYXRpb25FcnJvckNvZGVbZXJyb3JDb2RlXSk7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIHZhciBjYW5jZWxFdmVudCA9IG5ldyBFeHBvcnRzXzEuU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyhjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yLCBlcnJvckNvZGUsIHVuZGVmaW5lZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoUmVjb2duaXplci5jYW5jZWxlZCh0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLCBjYW5jZWxFdmVudCk7XG4gICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhY2FuY2VsUmVjb0NhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEV4cG9ydHNfMS5TcGVlY2hSZWNvZ25pdGlvblJlc3VsdChyZXF1ZXN0SWQsIEV4cG9ydHNfMS5SZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHVuZGVmaW5lZCwgLy8gVGV4dFxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBEcnVhdGlvblxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBPZmZzZXRcbiAgICAgICAgICAgIGVycm9yLCB1bmRlZmluZWQsIC8vIEpzb25cbiAgICAgICAgICAgIHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjYW5jZWxSZWNvQ2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9iKSB7IH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNwZWVjaFNlcnZpY2VSZWNvZ25pemVyO1xufShFeHBvcnRzXzIuU2VydmljZVJlY29nbml6ZXJCYXNlKSk7XG5leHBvcnRzLlNwZWVjaFNlcnZpY2VSZWNvZ25pemVyID0gU3BlZWNoU2VydmljZVJlY29nbml6ZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiKTtcbnZhciBFeHBvcnRzXzIgPSByZXF1aXJlKFwiLi4vc2RrL0V4cG9ydHNcIik7XG52YXIgRXhwb3J0c18zID0gcmVxdWlyZShcIi4vRXhwb3J0c1wiKTtcbnZhciBUZXN0SG9va3NQYXJhbU5hbWUgPSBcInRlc3Rob29rc1wiO1xudmFyIENvbm5lY3Rpb25JZEhlYWRlciA9IFwiWC1Db25uZWN0aW9uSWRcIjtcbnZhciBUcmFuc2xhdGlvbkNvbm5lY3Rpb25GYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRyYW5zbGF0aW9uQ29ubmVjdGlvbkZhY3RvcnkoKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24gKGNvbmZpZywgYXV0aEluZm8sIGNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgdmFyIGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBpZiAoIWVuZHBvaW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlZ2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBlbmRwb2ludCA9IFwid3NzOi8vXCIgKyByZWdpb24gKyBcIi5zMnMuc3BlZWNoLm1pY3Jvc29mdC5jb20vc3BlZWNoL3RyYW5zbGF0aW9uL2NvZ25pdGl2ZXNlcnZpY2VzL3YxXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcXVlcnlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgZnJvbTogY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKSxcbiAgICAgICAgICAgICAgICB0bzogY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcyksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHZvaWNlTmFtZSA9IFwidm9pY2VcIjtcbiAgICAgICAgICAgIHZhciBmZWF0dXJlTmFtZSA9IFwiZmVhdHVyZXNcIjtcbiAgICAgICAgICAgIGlmIChjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlLCB1bmRlZmluZWQpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtc1t2b2ljZU5hbWVdID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZSk7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNbZmVhdHVyZU5hbWVdID0gXCJ0ZXh0dG9zcGVlY2hcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJzW2F1dGhJbmZvLmhlYWRlck5hbWVdID0gYXV0aEluZm8udG9rZW47XG4gICAgICAgICAgICBoZWFkZXJzW0Nvbm5lY3Rpb25JZEhlYWRlcl0gPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEV4cG9ydHNfMS5XZWJzb2NrZXRDb25uZWN0aW9uKGVuZHBvaW50LCBxdWVyeVBhcmFtcywgaGVhZGVycywgbmV3IEV4cG9ydHNfMy5XZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyKCksIEV4cG9ydHNfMS5Qcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgY29ubmVjdGlvbklkKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIFRyYW5zbGF0aW9uQ29ubmVjdGlvbkZhY3Rvcnk7XG59KCkpO1xuZXhwb3J0cy5UcmFuc2xhdGlvbkNvbm5lY3Rpb25GYWN0b3J5ID0gVHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeS5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL0V4cG9ydHNcIik7XG52YXIgRXhwb3J0c18yID0gcmVxdWlyZShcIi4uL3Nkay9FeHBvcnRzXCIpO1xudmFyIEV4cG9ydHNfMyA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBUcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRyYW5zbGF0aW9uU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgdHJhbnNsYXRpb25SZWNvZ25pemVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHRyYW5zbGF0aW9uUmVjb2duaXplcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciA9IHRyYW5zbGF0aW9uUmVjb2duaXplcjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBUcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyLnByb3RvdHlwZS5wcm9jZXNzVHlwZVNwZWNpZmljTWVzc2FnZXMgPSBmdW5jdGlvbiAoY29ubmVjdGlvbk1lc3NhZ2UsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsQmFjaykge1xuICAgICAgICB2YXIgcmVzdWx0UHJvcHMgPSBuZXcgRXhwb3J0c18yLlByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBpZiAoY29ubmVjdGlvbk1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IEV4cG9ydHNfMS5NZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICByZXN1bHRQcm9wcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRpb24uaHlwb3RoZXNpc1wiOlxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmZpcmVFdmVudEZvclJlc3VsdChFeHBvcnRzXzMuVHJhbnNsYXRpb25IeXBvdGhlc2lzLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uSHlwb3RoZXNpcyh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgcmVzdWx0Lm9mZnNldCk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIucmVjb2duaXppbmcodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGlvbi5waHJhc2VcIjpcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlZFBocmFzZSA9IEV4cG9ydHNfMy5UcmFuc2xhdGlvblBocmFzZS5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QaHJhc2VSZWNvZ25pemVkKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQgKyB0cmFuc2xhdGVkUGhyYXNlLk9mZnNldCArIHRyYW5zbGF0ZWRQaHJhc2UuRHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc2xhdGVkUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzID09PSBFeHBvcnRzXzMuUmVjb2duaXRpb25TdGF0dXMuU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBPSywgdGhlIHJlY29nbml0aW9uIHdhcyBzdWNjZXNzZnVsLiBIb3cnZCB0aGUgdHJhbnNsYXRpb24gZG8/XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IHRoaXMuZmlyZUV2ZW50Rm9yUmVzdWx0KHRyYW5zbGF0ZWRQaHJhc2UsIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6ZWQodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCByZXN1bHRfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoISFzdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdF8xLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWVycm9yQ2FsbEJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsQmFjayhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGludm9rZSB0aGUgY2FsbCBiYWNrIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlYXNvbiA9IEV4cG9ydHNfMy5FbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZVJlY29nbml0aW9uUmVzdWx0KHRyYW5zbGF0ZWRQaHJhc2UuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzIgPSBuZXcgRXhwb3J0c18yLlRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQodW5kZWZpbmVkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlYXNvbiwgdHJhbnNsYXRlZFBocmFzZS5UZXh0LCB0cmFuc2xhdGVkUGhyYXNlLkR1cmF0aW9uLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgdHJhbnNsYXRlZFBocmFzZS5PZmZzZXQsIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYXNvbiA9PT0gRXhwb3J0c18yLlJlc3VsdFJlYXNvbi5DYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbmNlbFJlYXNvbiA9IEV4cG9ydHNfMy5FbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdCh0cmFuc2xhdGVkUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldiA9IG5ldyBFeHBvcnRzXzIuVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCwgY2FuY2VsUmVhc29uLCBudWxsLCBjYW5jZWxSZWFzb24gPT09IEV4cG9ydHNfMi5DYW5jZWxsYXRpb25SZWFzb24uRXJyb3IgPyBFeHBvcnRzXzIuQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlNlcnZpY2VFcnJvciA6IEV4cG9ydHNfMi5DYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvciwgcmVzdWx0XzIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLmNhbmNlbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLmNhbmNlbGVkKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNTcGVlY2hFbmRlZCAmJiByZWFzb24gPT09IEV4cG9ydHNfMi5SZXN1bHRSZWFzb24uTm9NYXRjaCAmJiB0cmFuc2xhdGVkUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzICE9PSBFeHBvcnRzXzMuUmVjb2duaXRpb25TdGF0dXMuSW5pdGlhbFNpbGVuY2VUaW1lb3V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldiA9IG5ldyBFeHBvcnRzXzIuVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHRfMiwgcmVzdWx0XzIub2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5yZWNvZ25pemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIucmVjb2duaXplZCh0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoISFzdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdF8yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyb3JDYWxsQmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxCYWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaW52b2tlIHRoZSBjYWxsIGJhY2sgb25jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpZiBpdCdzIHN1Y2Nlc3NmdWwgZG9uJ3QgaW52b2tlIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IgYWZ0ZXIgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ2FsbEJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRpb24uc3ludGhlc2lzXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kU3ludGhlc2lzQXVkaW8oY29ubmVjdGlvbk1lc3NhZ2UuYmluYXJ5Qm9keSwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGlvbi5zeW50aGVzaXMuZW5kXCI6XG4gICAgICAgICAgICAgICAgdmFyIHN5bnRoRW5kID0gRXhwb3J0c18zLlRyYW5zbGF0aW9uU3ludGhlc2lzRW5kLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHN5bnRoRW5kLlN5bnRoZXNpc1N0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEV4cG9ydHNfMy5TeW50aGVzaXNTdGF0dXMuRXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuc3ludGhlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8zID0gbmV3IEV4cG9ydHNfMi5UcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdChFeHBvcnRzXzIuUmVzdWx0UmVhc29uLkNhbmNlbGVkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXRFdmVudCA9IG5ldyBFeHBvcnRzXzIuVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MocmVzdWx0XzMsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnN5bnRoZXNpemluZyh0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIsIHJldEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFuZCByYWlzZSBhIGNhbmNlbGVkIGV2ZW50IHRvIHNlbmQgdGhlIHJpY2goZXIpIGVycm9yIG1lc3NhZ2UgYmFjay5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FuY2VsZWRSZXN1bHQgPSBuZXcgRXhwb3J0c18yLlRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIEV4cG9ydHNfMi5DYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIHN5bnRoRW5kLkZhaWx1cmVSZWFzb24sIEV4cG9ydHNfMi5DYW5jZWxsYXRpb25FcnJvckNvZGUuU2VydmljZUVycm9yLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuY2FuY2VsZWQodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCBjYW5jZWxlZFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBFeHBvcnRzXzMuU3ludGhlc2lzU3RhdHVzLlN1Y2Nlc3M6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRTeW50aGVzaXNBdWRpbyh1bmRlZmluZWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIENhbmNlbHMgcmVjb2duaXRpb24uXG4gICAgVHJhbnNsYXRpb25TZXJ2aWNlUmVjb2duaXplci5wcm90b3R5cGUuY2FuY2VsUmVjb2duaXRpb24gPSBmdW5jdGlvbiAoc2Vzc2lvbklkLCByZXF1ZXN0SWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JDb2RlLCBlcnJvciwgY2FuY2VsUmVjb0NhbGxiYWNrKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBuZXcgRXhwb3J0c18yLlByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICAgICAgcHJvcGVydGllcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzMuQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBFeHBvcnRzXzIuQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW2Vycm9yQ29kZV0pO1xuICAgICAgICAgICAgdmFyIGNhbmNlbEV2ZW50ID0gbmV3IEV4cG9ydHNfMi5UcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3Moc2Vzc2lvbklkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yLCBlcnJvckNvZGUsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5jYW5jZWxlZCh0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIsIGNhbmNlbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgIGlmICghIWNhbmNlbFJlY29DYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgRXhwb3J0c18yLlRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQodW5kZWZpbmVkLCAvLyBUcmFuc2xhdGlvbnNcbiAgICAgICAgICAgICAgICByZXF1ZXN0SWQsIEV4cG9ydHNfMi5SZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHVuZGVmaW5lZCwgLy8gVGV4dFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gRHJ1YXRpb25cbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsIC8vIE9mZnNldFxuICAgICAgICAgICAgICAgIGVycm9yLCB1bmRlZmluZWQsIC8vIEpzb25cbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWxSZWNvQ2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9iKSB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgVHJhbnNsYXRpb25TZXJ2aWNlUmVjb2duaXplci5wcm90b3R5cGUuZmlyZUV2ZW50Rm9yUmVzdWx0ID0gZnVuY3Rpb24gKHNlcnZpY2VSZXN1bHQsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgdmFyIHRyYW5zbGF0aW9ucztcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvbnMpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0aW9ucyA9IG5ldyBFeHBvcnRzXzIuVHJhbnNsYXRpb25zKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0aW9uID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9ucy5zZXQodHJhbnNsYXRpb24uTGFuZ3VhZ2UsIHRyYW5zbGF0aW9uLlRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHRSZWFzb247XG4gICAgICAgIGlmIChzZXJ2aWNlUmVzdWx0IGluc3RhbmNlb2YgRXhwb3J0c18zLlRyYW5zbGF0aW9uUGhyYXNlKSB7XG4gICAgICAgICAgICBpZiAoc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvblN0YXR1cyA9PT0gRXhwb3J0c18xLlRyYW5zbGF0aW9uU3RhdHVzLlN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRSZWFzb24gPSBFeHBvcnRzXzIuUmVzdWx0UmVhc29uLlRyYW5zbGF0ZWRTcGVlY2g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRSZWFzb24gPSBFeHBvcnRzXzIuUmVzdWx0UmVhc29uLlJlY29nbml6ZWRTcGVlY2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRSZWFzb24gPSBFeHBvcnRzXzIuUmVzdWx0UmVhc29uLlRyYW5zbGF0aW5nU3BlZWNoO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvZmZzZXQgPSBzZXJ2aWNlUmVzdWx0Lk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgIHZhciByZXN1bHQgPSBuZXcgRXhwb3J0c18yLlRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQodHJhbnNsYXRpb25zLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlc3VsdFJlYXNvbiwgc2VydmljZVJlc3VsdC5UZXh0LCBzZXJ2aWNlUmVzdWx0LkR1cmF0aW9uLCBvZmZzZXQsIHNlcnZpY2VSZXN1bHQuVHJhbnNsYXRpb24uRmFpbHVyZVJlYXNvbiwgSlNPTi5zdHJpbmdpZnkoc2VydmljZVJlc3VsdCksIHByb3BlcnRpZXMpO1xuICAgICAgICB2YXIgZXYgPSBuZXcgRXhwb3J0c18yLlRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBvZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgIHJldHVybiBldjtcbiAgICB9O1xuICAgIFRyYW5zbGF0aW9uU2VydmljZVJlY29nbml6ZXIucHJvdG90eXBlLnNlbmRTeW50aGVzaXNBdWRpbyA9IGZ1bmN0aW9uIChhdWRpbywgc2Vzc2lvbklkKSB7XG4gICAgICAgIHZhciByZWFzb24gPSAodW5kZWZpbmVkID09PSBhdWRpbykgPyBFeHBvcnRzXzIuUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvQ29tcGxldGVkIDogRXhwb3J0c18yLlJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpbztcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBFeHBvcnRzXzIuVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQocmVhc29uLCBhdWRpbyk7XG4gICAgICAgIHZhciByZXRFdmVudCA9IG5ldyBFeHBvcnRzXzIuVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MocmVzdWx0LCBzZXNzaW9uSWQpO1xuICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuc3ludGhlc2l6aW5nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5zeW50aGVzaXppbmcodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCByZXRFdmVudCk7XG4gICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyO1xufShFeHBvcnRzXzMuU2VydmljZVJlY29nbml6ZXJCYXNlKSk7XG5leHBvcnRzLlRyYW5zbGF0aW9uU2VydmljZVJlY29nbml6ZXIgPSBUcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogRGVmaW5lcyB0cmFuc2xhdGlvbiBzdGF0dXMuXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25TdGF0dXNcbiAqL1xudmFyIFRyYW5zbGF0aW9uU3RhdHVzO1xuKGZ1bmN0aW9uIChUcmFuc2xhdGlvblN0YXR1cykge1xuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25TdGF0dXMuU3VjY2Vzc1xuICAgICAqL1xuICAgIFRyYW5zbGF0aW9uU3RhdHVzW1RyYW5zbGF0aW9uU3RhdHVzW1wiU3VjY2Vzc1wiXSA9IDBdID0gXCJTdWNjZXNzXCI7XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblN0YXR1cy5FcnJvclxuICAgICAqL1xuICAgIFRyYW5zbGF0aW9uU3RhdHVzW1RyYW5zbGF0aW9uU3RhdHVzW1wiRXJyb3JcIl0gPSAxXSA9IFwiRXJyb3JcIjtcbn0pKFRyYW5zbGF0aW9uU3RhdHVzID0gZXhwb3J0cy5UcmFuc2xhdGlvblN0YXR1cyB8fCAoZXhwb3J0cy5UcmFuc2xhdGlvblN0YXR1cyA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uU3RhdHVzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL0V4cG9ydHNcIik7XG52YXIgQ1JMRiA9IFwiXFxyXFxuXCI7XG52YXIgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnRvQ29ubmVjdGlvbk1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyIGRlZmVycmFsID0gbmV3IEV4cG9ydHNfMS5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gRXhwb3J0c18xLk1lc3NhZ2VUeXBlLlRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRleHRNZXNzYWdlID0gbWVzc2FnZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJCb2R5U3BsaXQgPSB0ZXh0TWVzc2FnZS5zcGxpdChcIlxcclxcblxcclxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJCb2R5U3BsaXQgJiYgaGVhZGVyQm9keVNwbGl0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gX3RoaXMucGFyc2VIZWFkZXJzKGhlYWRlckJvZHlTcGxpdFswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlckJvZHlTcGxpdC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSBoZWFkZXJCb2R5U3BsaXRbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmFsLnJlc29sdmUobmV3IEV4cG9ydHNfMS5Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlLm1lc3NhZ2VUeXBlLCBib2R5LCBoZWFkZXJzLCBtZXNzYWdlLmlkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IEV4cG9ydHNfMS5NZXNzYWdlVHlwZS5CaW5hcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpbmFyeU1lc3NhZ2UgPSBtZXNzYWdlLmJpbmFyeUNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBib2R5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiaW5hcnlNZXNzYWdlIHx8IGJpbmFyeU1lc3NhZ2UuYnl0ZUxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYmluYXJ5IG1lc3NhZ2UgZm9ybWF0LiBIZWFkZXIgbGVuZ3RoIG1pc3NpbmcuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhiaW5hcnlNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlckxlbmd0aCA9IGRhdGFWaWV3LmdldEludDE2KDApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmluYXJ5TWVzc2FnZS5ieXRlTGVuZ3RoIDwgaGVhZGVyTGVuZ3RoICsgMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBiaW5hcnkgbWVzc2FnZSBmb3JtYXQuIEhlYWRlciBjb250ZW50IG1pc3NpbmcuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXJMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1N0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChkYXRhVmlldykuZ2V0SW50OChpICsgMikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBfdGhpcy5wYXJzZUhlYWRlcnMoaGVhZGVyc1N0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiaW5hcnlNZXNzYWdlLmJ5dGVMZW5ndGggPiBoZWFkZXJMZW5ndGggKyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0gYmluYXJ5TWVzc2FnZS5zbGljZSgyICsgaGVhZGVyTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKG5ldyBFeHBvcnRzXzEuQ29ubmVjdGlvbk1lc3NhZ2UobWVzc2FnZS5tZXNzYWdlVHlwZSwgYm9keSwgaGVhZGVycywgbWVzc2FnZS5pZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyYWwucmVqZWN0KFwiRXJyb3IgZm9ybWF0dGluZyB0aGUgbWVzc2FnZS4gRXJyb3I6IFwiICsgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyYWwucHJvbWlzZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZyb21Db25uZWN0aW9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyYWwgPSBuZXcgRXhwb3J0c18xLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBFeHBvcnRzXzEuTWVzc2FnZVR5cGUuVGV4dCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGF5bG9hZCA9IFwiXCIgKyBfdGhpcy5tYWtlSGVhZGVycyhtZXNzYWdlKSArIENSTEYgKyAobWVzc2FnZS50ZXh0Qm9keSA/IG1lc3NhZ2UudGV4dEJvZHkgOiBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyYWwucmVzb2x2ZShuZXcgRXhwb3J0c18xLlJhd1dlYnNvY2tldE1lc3NhZ2UoRXhwb3J0c18xLk1lc3NhZ2VUeXBlLlRleHQsIHBheWxvYWQsIG1lc3NhZ2UuaWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gRXhwb3J0c18xLk1lc3NhZ2VUeXBlLkJpbmFyeSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVyc1N0cmluZyA9IF90aGlzLm1ha2VIZWFkZXJzKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IG1lc3NhZ2UuYmluYXJ5Qm9keTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlckludDhBcnJheSA9IG5ldyBJbnQ4QXJyYXkoX3RoaXMuc3RyaW5nVG9BcnJheUJ1ZmZlcihoZWFkZXJzU3RyaW5nKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXlsb2FkID0gbmV3IEFycmF5QnVmZmVyKDIgKyBoZWFkZXJJbnQ4QXJyYXkuYnl0ZUxlbmd0aCArIChjb250ZW50ID8gY29udGVudC5ieXRlTGVuZ3RoIDogMCkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcocGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDE2KDAsIGhlYWRlckludDhBcnJheS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlYWRlckludDhBcnJheS5ieXRlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDgoMiArIGksIGhlYWRlckludDhBcnJheVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib2R5SW50OEFycmF5ID0gbmV3IEludDhBcnJheShjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm9keUludDhBcnJheS5ieXRlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRJbnQ4KDIgKyBoZWFkZXJJbnQ4QXJyYXkuYnl0ZUxlbmd0aCArIGksIGJvZHlJbnQ4QXJyYXlbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmFsLnJlc29sdmUobmV3IEV4cG9ydHNfMS5SYXdXZWJzb2NrZXRNZXNzYWdlKEV4cG9ydHNfMS5NZXNzYWdlVHlwZS5CaW5hcnksIHBheWxvYWQsIG1lc3NhZ2UuaWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGRlZmVycmFsLnJlamVjdChcIkVycm9yIGZvcm1hdHRpbmcgdGhlIG1lc3NhZ2UuIFwiICsgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyYWwucHJvbWlzZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1ha2VIZWFkZXJzID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJzU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBoZWFkZXIgaW4gbWVzc2FnZS5oZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNTdHJpbmcgKz0gaGVhZGVyICsgXCI6IFwiICsgbWVzc2FnZS5oZWFkZXJzW2hlYWRlcl0gKyBDUkxGO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhlYWRlcnNTdHJpbmc7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucGFyc2VIZWFkZXJzID0gZnVuY3Rpb24gKGhlYWRlcnNTdHJpbmcpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XG4gICAgICAgICAgICBpZiAoaGVhZGVyc1N0cmluZykge1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJNYXRjaGVzID0gaGVhZGVyc1N0cmluZy5tYXRjaCgvW15cXHJcXG5dKy9nKTtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGhlYWRlck1hdGNoZXNfMSA9IGhlYWRlck1hdGNoZXM7IF9pIDwgaGVhZGVyTWF0Y2hlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlciA9IGhlYWRlck1hdGNoZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcGFyYXRvckluZGV4ID0gaGVhZGVyLmluZGV4T2YoXCI6XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJOYW1lID0gc2VwYXJhdG9ySW5kZXggPiAwID8gaGVhZGVyLnN1YnN0cigwLCBzZXBhcmF0b3JJbmRleCkudHJpbSgpLnRvTG93ZXJDYXNlKCkgOiBoZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlclZhbHVlID0gc2VwYXJhdG9ySW5kZXggPiAwICYmIGhlYWRlci5sZW5ndGggPiAoc2VwYXJhdG9ySW5kZXggKyAxKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5zdWJzdHIoc2VwYXJhdG9ySW5kZXggKyAxKS50cmltKCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbaGVhZGVyTmFtZV0gPSBoZWFkZXJWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoZWFkZXJzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0cmluZ1RvQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGgpO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRVaW50OChpLCBzdHIuY2hhckNvZGVBdChpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcjtcbn0oKSk7XG5leHBvcnRzLldlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIgPSBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1XZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFBsYXRmb3JtRXZlbnRfMSA9IHJlcXVpcmUoXCIuL1BsYXRmb3JtRXZlbnRcIik7XG52YXIgQXVkaW9Tb3VyY2VFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXVkaW9Tb3VyY2VFdmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBdWRpb1NvdXJjZUV2ZW50KGV2ZW50TmFtZSwgYXVkaW9Tb3VyY2VJZCwgZXZlbnRUeXBlKSB7XG4gICAgICAgIGlmIChldmVudFR5cGUgPT09IHZvaWQgMCkgeyBldmVudFR5cGUgPSBQbGF0Zm9ybUV2ZW50XzEuRXZlbnRUeXBlLkluZm87IH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZXZlbnROYW1lLCBldmVudFR5cGUpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXVkaW9Tb3VyY2VFdmVudC5wcm90b3R5cGUsIFwiYXVkaW9Tb3VyY2VJZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvU291cmNlSWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBBdWRpb1NvdXJjZUV2ZW50O1xufShQbGF0Zm9ybUV2ZW50XzEuUGxhdGZvcm1FdmVudCkpO1xuZXhwb3J0cy5BdWRpb1NvdXJjZUV2ZW50ID0gQXVkaW9Tb3VyY2VFdmVudDtcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIEF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudChhdWRpb1NvdXJjZUlkKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBcIkF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnQ7XG59KEF1ZGlvU291cmNlRXZlbnQpKTtcbmV4cG9ydHMuQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudCA9IEF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnQ7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBBdWRpb1NvdXJjZVJlYWR5RXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF1ZGlvU291cmNlUmVhZHlFdmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBdWRpb1NvdXJjZVJlYWR5RXZlbnQoYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgXCJBdWRpb1NvdXJjZVJlYWR5RXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEF1ZGlvU291cmNlUmVhZHlFdmVudDtcbn0oQXVkaW9Tb3VyY2VFdmVudCkpO1xuZXhwb3J0cy5BdWRpb1NvdXJjZVJlYWR5RXZlbnQgPSBBdWRpb1NvdXJjZVJlYWR5RXZlbnQ7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBBdWRpb1NvdXJjZU9mZkV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBdWRpb1NvdXJjZU9mZkV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEF1ZGlvU291cmNlT2ZmRXZlbnQoYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgXCJBdWRpb1NvdXJjZU9mZkV2ZW50XCIsIGF1ZGlvU291cmNlSWQpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBBdWRpb1NvdXJjZU9mZkV2ZW50O1xufShBdWRpb1NvdXJjZUV2ZW50KSk7XG5leHBvcnRzLkF1ZGlvU291cmNlT2ZmRXZlbnQgPSBBdWRpb1NvdXJjZU9mZkV2ZW50O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgQXVkaW9Tb3VyY2VFcnJvckV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBdWRpb1NvdXJjZUVycm9yRXZlbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXVkaW9Tb3VyY2VFcnJvckV2ZW50KGF1ZGlvU291cmNlSWQsIGVycm9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiQXVkaW9Tb3VyY2VFcnJvckV2ZW50XCIsIGF1ZGlvU291cmNlSWQsIFBsYXRmb3JtRXZlbnRfMS5FdmVudFR5cGUuRXJyb3IpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByaXZFcnJvciA9IGVycm9yO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdWRpb1NvdXJjZUVycm9yRXZlbnQucHJvdG90eXBlLCBcImVycm9yXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3I7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBBdWRpb1NvdXJjZUVycm9yRXZlbnQ7XG59KEF1ZGlvU291cmNlRXZlbnQpKTtcbmV4cG9ydHMuQXVkaW9Tb3VyY2VFcnJvckV2ZW50ID0gQXVkaW9Tb3VyY2VFcnJvckV2ZW50O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgQXVkaW9TdHJlYW1Ob2RlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF1ZGlvU3RyZWFtTm9kZUV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEF1ZGlvU3RyZWFtTm9kZUV2ZW50KGV2ZW50TmFtZSwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZXZlbnROYW1lLCBhdWRpb1NvdXJjZUlkKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXVkaW9TdHJlYW1Ob2RlRXZlbnQucHJvdG90eXBlLCBcImF1ZGlvTm9kZUlkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBBdWRpb1N0cmVhbU5vZGVFdmVudDtcbn0oQXVkaW9Tb3VyY2VFdmVudCkpO1xuZXhwb3J0cy5BdWRpb1N0cmVhbU5vZGVFdmVudCA9IEF1ZGlvU3RyZWFtTm9kZUV2ZW50O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50KGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBcIkF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50XCIsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQ7XG59KEF1ZGlvU3RyZWFtTm9kZUV2ZW50KSk7XG5leHBvcnRzLkF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50ID0gQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQ7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQoYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIFwiQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudFwiLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQ7XG59KEF1ZGlvU3RyZWFtTm9kZUV2ZW50KSk7XG5leHBvcnRzLkF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQgPSBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBcIkF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50O1xufShBdWRpb1N0cmVhbU5vZGVFdmVudCkpO1xuZXhwb3J0cy5BdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50ID0gQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudDtcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIEF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudChhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCwgZXJyb3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXCJBdWRpb1N0cmVhbU5vZGVFcnJvckV2ZW50XCIsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudC5wcm90b3R5cGUsIFwiZXJyb3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnQ7XG59KEF1ZGlvU3RyZWFtTm9kZUV2ZW50KSk7XG5leHBvcnRzLkF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnQgPSBBdWRpb1N0cmVhbU5vZGVFcnJvckV2ZW50O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb1NvdXJjZUV2ZW50cy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi9FeHBvcnRzXCIpO1xudmFyIENodW5rZWRBcnJheUJ1ZmZlclN0cmVhbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENodW5rZWRBcnJheUJ1ZmZlclN0cmVhbSh0YXJnZXRDaHVua1NpemUsIHN0cmVhbUlkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHN0cmVhbUlkKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2VGFyZ2V0Q2h1bmtTaXplID0gdGFyZ2V0Q2h1bmtTaXplO1xuICAgICAgICBfdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMgPSAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIENodW5rZWRBcnJheUJ1ZmZlclN0cmVhbS5wcm90b3R5cGUud3JpdGVTdHJlYW1DaHVuayA9IGZ1bmN0aW9uIChjaHVuaykge1xuICAgICAgICAvLyBObyBwZW5kaW5nIHdyaXRlLCBhbmQgdGhlIGJ1ZmZlciBpcyB0aGUgcmlnaHQgc2l6ZSBzbyB3cml0ZSBpdC5cbiAgICAgICAgaWYgKGNodW5rLmlzRW5kIHx8XG4gICAgICAgICAgICAoMCA9PT0gdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMgJiYgY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGggPT09IHRoaXMucHJpdlRhcmdldENodW5rU2l6ZSkpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUud3JpdGVTdHJlYW1DaHVuay5jYWxsKHRoaXMsIGNodW5rKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYnl0ZXNDb3BpZWRGcm9tQnVmZmVyID0gMDtcbiAgICAgICAgd2hpbGUgKGJ5dGVzQ29waWVkRnJvbUJ1ZmZlciA8IGNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBGaWxsIHRoZSBuZXh0IGJ1ZmZlci5cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMucHJpdk5leHRCdWZmZXJUb1dyaXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TmV4dEJ1ZmZlclRvV3JpdGUgPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5wcml2VGFyZ2V0Q2h1bmtTaXplKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZOZXh0QnVmZmVyU3RhcnRUaW1lID0gY2h1bmsudGltZVJlY2VpdmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluZCBvdXQgaG93IG1hbnkgYnl0ZXMgd2UgY2FuIGNvcHkgaW50byB0aGUgcmVhZCBidWZmZXIuXG4gICAgICAgICAgICB2YXIgYnl0ZXNUb0NvcHkgPSBNYXRoLm1pbihjaHVuay5idWZmZXIuYnl0ZUxlbmd0aCAtIGJ5dGVzQ29waWVkRnJvbUJ1ZmZlciwgdGhpcy5wcml2VGFyZ2V0Q2h1bmtTaXplIC0gdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMpO1xuICAgICAgICAgICAgdmFyIHRhcmdldFZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLnByaXZOZXh0QnVmZmVyVG9Xcml0ZSk7XG4gICAgICAgICAgICB2YXIgc291cmNlVmlldyA9IG5ldyBVaW50OEFycmF5KGNodW5rLmJ1ZmZlci5zbGljZShieXRlc0NvcGllZEZyb21CdWZmZXIsIGJ5dGVzVG9Db3B5ICsgYnl0ZXNDb3BpZWRGcm9tQnVmZmVyKSk7XG4gICAgICAgICAgICB0YXJnZXRWaWV3LnNldChzb3VyY2VWaWV3LCB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyk7XG4gICAgICAgICAgICB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyArPSBieXRlc1RvQ29weTtcbiAgICAgICAgICAgIGJ5dGVzQ29waWVkRnJvbUJ1ZmZlciArPSBieXRlc1RvQ29weTtcbiAgICAgICAgICAgIC8vIEFyZSB3ZSByZWFkeSB0byB3cml0ZT9cbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyA9PT0gdGhpcy5wcml2VGFyZ2V0Q2h1bmtTaXplKSB7XG4gICAgICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS53cml0ZVN0cmVhbUNodW5rLmNhbGwodGhpcywge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHRoaXMucHJpdk5leHRCdWZmZXJUb1dyaXRlLFxuICAgICAgICAgICAgICAgICAgICBpc0VuZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogdGhpcy5wcml2TmV4dEJ1ZmZlclN0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TmV4dEJ1ZmZlclRvV3JpdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENodW5rZWRBcnJheUJ1ZmZlclN0cmVhbS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFNlbmQgd2hhdGV2ZXIgaXMgcGVuZGluZywgdGhlbiBjbG9zZSB0aGUgYmFzZSBjbGFzcy5cbiAgICAgICAgaWYgKDAgIT09IHRoaXMucHJpdk5leHRCdWZmZXJSZWFkeUJ5dGVzICYmICF0aGlzLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLndyaXRlU3RyZWFtQ2h1bmsuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICAgICAgYnVmZmVyOiB0aGlzLnByaXZOZXh0QnVmZmVyVG9Xcml0ZS5zbGljZSgwLCB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyksXG4gICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogdGhpcy5wcml2TmV4dEJ1ZmZlclN0YXJ0VGltZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xvc2UuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBDaHVua2VkQXJyYXlCdWZmZXJTdHJlYW07XG59KEV4cG9ydHNfMS5TdHJlYW0pKTtcbmV4cG9ydHMuQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtID0gQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0uanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgUGxhdGZvcm1FdmVudF8xID0gcmVxdWlyZShcIi4vUGxhdGZvcm1FdmVudFwiKTtcbnZhciBDb25uZWN0aW9uRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbm5lY3Rpb25FdmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb25uZWN0aW9uRXZlbnQoZXZlbnROYW1lLCBjb25uZWN0aW9uSWQsIGV2ZW50VHlwZSkge1xuICAgICAgICBpZiAoZXZlbnRUeXBlID09PSB2b2lkIDApIHsgZXZlbnRUeXBlID0gUGxhdGZvcm1FdmVudF8xLkV2ZW50VHlwZS5JbmZvOyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGV2ZW50TmFtZSwgZXZlbnRUeXBlKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2Q29ubmVjdGlvbklkID0gY29ubmVjdGlvbklkO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uRXZlbnQucHJvdG90eXBlLCBcImNvbm5lY3Rpb25JZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25JZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIENvbm5lY3Rpb25FdmVudDtcbn0oUGxhdGZvcm1FdmVudF8xLlBsYXRmb3JtRXZlbnQpKTtcbmV4cG9ydHMuQ29ubmVjdGlvbkV2ZW50ID0gQ29ubmVjdGlvbkV2ZW50O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgQ29ubmVjdGlvblN0YXJ0RXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbm5lY3Rpb25TdGFydEV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbm5lY3Rpb25TdGFydEV2ZW50KGNvbm5lY3Rpb25JZCwgdXJpLCBoZWFkZXJzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiQ29ubmVjdGlvblN0YXJ0RXZlbnRcIiwgY29ubmVjdGlvbklkKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2VXJpID0gdXJpO1xuICAgICAgICBfdGhpcy5wcml2SGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbm5lY3Rpb25TdGFydEV2ZW50LnByb3RvdHlwZSwgXCJ1cmlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZVcmk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uU3RhcnRFdmVudC5wcm90b3R5cGUsIFwiaGVhZGVyc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkhlYWRlcnM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBDb25uZWN0aW9uU3RhcnRFdmVudDtcbn0oQ29ubmVjdGlvbkV2ZW50KSk7XG5leHBvcnRzLkNvbm5lY3Rpb25TdGFydEV2ZW50ID0gQ29ubmVjdGlvblN0YXJ0RXZlbnQ7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBDb25uZWN0aW9uRXN0YWJsaXNoZWRFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnQoY29ubmVjdGlvbklkLCBtZXRhZGF0YSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgXCJDb25uZWN0aW9uRXN0YWJsaXNoZWRFdmVudFwiLCBjb25uZWN0aW9uSWQpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBDb25uZWN0aW9uRXN0YWJsaXNoZWRFdmVudDtcbn0oQ29ubmVjdGlvbkV2ZW50KSk7XG5leHBvcnRzLkNvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50ID0gQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnQ7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBDb25uZWN0aW9uQ2xvc2VkRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbm5lY3Rpb25DbG9zZWRFdmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb25uZWN0aW9uQ2xvc2VkRXZlbnQoY29ubmVjdGlvbklkLCBzdGF0dXNDb2RlLCByZWFzb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXCJDb25uZWN0aW9uQ2xvc2VkRXZlbnRcIiwgY29ubmVjdGlvbklkLCBQbGF0Zm9ybUV2ZW50XzEuRXZlbnRUeXBlLkRlYnVnKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2UnJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgX3RoaXMucHJpdlN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uQ2xvc2VkRXZlbnQucHJvdG90eXBlLCBcInJlYXNvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJyZWFzb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uQ2xvc2VkRXZlbnQucHJvdG90eXBlLCBcInN0YXR1c0NvZGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTdGF0dXNDb2RlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gQ29ubmVjdGlvbkNsb3NlZEV2ZW50O1xufShDb25uZWN0aW9uRXZlbnQpKTtcbmV4cG9ydHMuQ29ubmVjdGlvbkNsb3NlZEV2ZW50ID0gQ29ubmVjdGlvbkNsb3NlZEV2ZW50O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgQ29ubmVjdGlvbkVzdGFibGlzaEVycm9yRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbm5lY3Rpb25Fc3RhYmxpc2hFcnJvckV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbm5lY3Rpb25Fc3RhYmxpc2hFcnJvckV2ZW50KGNvbm5lY3Rpb25JZCwgc3RhdHVzY29kZSwgcmVhc29uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiQ29ubmVjdGlvbkVzdGFibGlzaEVycm9yRXZlbnRcIiwgY29ubmVjdGlvbklkLCBQbGF0Zm9ybUV2ZW50XzEuRXZlbnRUeXBlLkVycm9yKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2U3RhdHVzQ29kZSA9IHN0YXR1c2NvZGU7XG4gICAgICAgIF90aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbm5lY3Rpb25Fc3RhYmxpc2hFcnJvckV2ZW50LnByb3RvdHlwZSwgXCJyZWFzb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudC5wcm90b3R5cGUsIFwic3RhdHVzQ29kZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN0YXR1c0NvZGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudDtcbn0oQ29ubmVjdGlvbkV2ZW50KSk7XG5leHBvcnRzLkNvbm5lY3Rpb25Fc3RhYmxpc2hFcnJvckV2ZW50ID0gQ29ubmVjdGlvbkVzdGFibGlzaEVycm9yRXZlbnQ7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbm5lY3Rpb25NZXNzYWdlUmVjZWl2ZWRFdmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQoY29ubmVjdGlvbklkLCBuZXR3b3JrUmVjZWl2ZWRUaW1lSVNPLCBtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50XCIsIGNvbm5lY3Rpb25JZCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJpdk5ldHdvcmtSZWNlaXZlZFRpbWUgPSBuZXR3b3JrUmVjZWl2ZWRUaW1lSVNPO1xuICAgICAgICBfdGhpcy5wcml2TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbm5lY3Rpb25NZXNzYWdlUmVjZWl2ZWRFdmVudC5wcm90b3R5cGUsIFwibmV0d29ya1JlY2VpdmVkVGltZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdk5ldHdvcmtSZWNlaXZlZFRpbWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQucHJvdG90eXBlLCBcIm1lc3NhZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZNZXNzYWdlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50O1xufShDb25uZWN0aW9uRXZlbnQpKTtcbmV4cG9ydHMuQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50ID0gQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgQ29ubmVjdGlvbk1lc3NhZ2VTZW50RXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50KGNvbm5lY3Rpb25JZCwgbmV0d29ya1NlbnRUaW1lSVNPLCBtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiQ29ubmVjdGlvbk1lc3NhZ2VTZW50RXZlbnRcIiwgY29ubmVjdGlvbklkKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2TmV0d29ya1NlbnRUaW1lID0gbmV0d29ya1NlbnRUaW1lSVNPO1xuICAgICAgICBfdGhpcy5wcml2TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50LnByb3RvdHlwZSwgXCJuZXR3b3JrU2VudFRpbWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZOZXR3b3JrU2VudFRpbWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uTWVzc2FnZVNlbnRFdmVudC5wcm90b3R5cGUsIFwibWVzc2FnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdk1lc3NhZ2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBDb25uZWN0aW9uTWVzc2FnZVNlbnRFdmVudDtcbn0oQ29ubmVjdGlvbkV2ZW50KSk7XG5leHBvcnRzLkNvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50ID0gQ29ubmVjdGlvbk1lc3NhZ2VTZW50RXZlbnQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb25FdmVudHMuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEVycm9yXzEgPSByZXF1aXJlKFwiLi9FcnJvclwiKTtcbnZhciBHdWlkXzEgPSByZXF1aXJlKFwiLi9HdWlkXCIpO1xudmFyIE1lc3NhZ2VUeXBlO1xuKGZ1bmN0aW9uIChNZXNzYWdlVHlwZSkge1xuICAgIE1lc3NhZ2VUeXBlW01lc3NhZ2VUeXBlW1wiVGV4dFwiXSA9IDBdID0gXCJUZXh0XCI7XG4gICAgTWVzc2FnZVR5cGVbTWVzc2FnZVR5cGVbXCJCaW5hcnlcIl0gPSAxXSA9IFwiQmluYXJ5XCI7XG59KShNZXNzYWdlVHlwZSA9IGV4cG9ydHMuTWVzc2FnZVR5cGUgfHwgKGV4cG9ydHMuTWVzc2FnZVR5cGUgPSB7fSkpO1xudmFyIENvbm5lY3Rpb25NZXNzYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2VUeXBlLCBib2R5LCBoZWFkZXJzLCBpZCkge1xuICAgICAgICB0aGlzLnByaXZCb2R5ID0gbnVsbDtcbiAgICAgICAgaWYgKG1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0ICYmIGJvZHkgJiYgISh0eXBlb2YgKGJvZHkpID09PSBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiUGF5bG9hZCBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuQmluYXJ5ICYmIGJvZHkgJiYgIShib2R5IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3JfMS5JbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJQYXlsb2FkIG11c3QgYmUgQXJyYXlCdWZmZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2TWVzc2FnZVR5cGUgPSBtZXNzYWdlVHlwZTtcbiAgICAgICAgdGhpcy5wcml2Qm9keSA9IGJvZHk7XG4gICAgICAgIHRoaXMucHJpdkhlYWRlcnMgPSBoZWFkZXJzID8gaGVhZGVycyA6IHt9O1xuICAgICAgICB0aGlzLnByaXZJZCA9IGlkID8gaWQgOiBHdWlkXzEuY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29ubmVjdGlvbk1lc3NhZ2UucHJvdG90eXBlLCBcIm1lc3NhZ2VUeXBlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2TWVzc2FnZVR5cGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uTWVzc2FnZS5wcm90b3R5cGUsIFwiaGVhZGVyc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkhlYWRlcnM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uTWVzc2FnZS5wcm90b3R5cGUsIFwiYm9keVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkJvZHk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uTWVzc2FnZS5wcm90b3R5cGUsIFwidGV4dEJvZHlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZNZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuQmluYXJ5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiTm90IHN1cHBvcnRlZCBmb3IgYmluYXJ5IG1lc3NhZ2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Qm9keTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbm5lY3Rpb25NZXNzYWdlLnByb3RvdHlwZSwgXCJiaW5hcnlCb2R5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2TWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3JfMS5JbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJOb3Qgc3VwcG9ydGVkIGZvciB0ZXh0IG1lc3NhZ2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Qm9keTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbm5lY3Rpb25NZXNzYWdlLnByb3RvdHlwZSwgXCJpZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gQ29ubmVjdGlvbk1lc3NhZ2U7XG59KCkpO1xuZXhwb3J0cy5Db25uZWN0aW9uTWVzc2FnZSA9IENvbm5lY3Rpb25NZXNzYWdlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0aW9uTWVzc2FnZS5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgQ29ubmVjdGlvbk9wZW5SZXNwb25zZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb25uZWN0aW9uT3BlblJlc3BvbnNlKHN0YXR1c0NvZGUsIHJlYXNvbikge1xuICAgICAgICB0aGlzLnByaXZTdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICAgICAgdGhpcy5wcml2UmVhc29uID0gcmVhc29uO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29ubmVjdGlvbk9wZW5SZXNwb25zZS5wcm90b3R5cGUsIFwic3RhdHVzQ29kZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN0YXR1c0NvZGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25uZWN0aW9uT3BlblJlc3BvbnNlLnByb3RvdHlwZSwgXCJyZWFzb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBDb25uZWN0aW9uT3BlblJlc3BvbnNlO1xufSgpKTtcbmV4cG9ydHMuQ29ubmVjdGlvbk9wZW5SZXNwb25zZSA9IENvbm5lY3Rpb25PcGVuUmVzcG9uc2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb25PcGVuUmVzcG9uc2UuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqIFRoZSBlcnJvciB0aGF0IGlzIHRocm93biB3aGVuIGFuIGFyZ3VtZW50IHBhc3NlZCBpbiBpcyBudWxsLlxuICpcbiAqIEBleHBvcnRcbiAqIEBjbGFzcyBBcmd1bWVudE51bGxFcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG52YXIgQXJndW1lbnROdWxsRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFyZ3VtZW50TnVsbEVycm9yLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQXJndW1lbnROdWxsRXJyb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXJndW1lbnROYW1lIC0gTmFtZSBvZiB0aGUgYXJndW1lbnQgdGhhdCBpcyBudWxsXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgQXJndW1lbnROdWxsRXJyb3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBcmd1bWVudE51bGxFcnJvcihhcmd1bWVudE5hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYXJndW1lbnROYW1lKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5uYW1lID0gXCJBcmd1bWVudE51bGxcIjtcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IGFyZ3VtZW50TmFtZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQXJndW1lbnROdWxsRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLkFyZ3VtZW50TnVsbEVycm9yID0gQXJndW1lbnROdWxsRXJyb3I7XG4vKipcbiAqIFRoZSBlcnJvciB0aGF0IGlzIHRocm93biB3aGVuIGFuIGludmFsaWQgb3BlcmF0aW9uIGlzIHBlcmZvcm1lZCBpbiB0aGUgY29kZS5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgSW52YWxpZE9wZXJhdGlvbkVycm9yXG4gKiBAZXh0ZW5kcyB7RXJyb3J9XG4gKi9cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIEludmFsaWRPcGVyYXRpb25FcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW52YWxpZE9wZXJhdGlvbkVycm9yLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgSW52YWxpZE9wZXJhdGlvbkVycm9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yIC0gVGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgSW52YWxpZE9wZXJhdGlvbkVycm9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW52YWxpZE9wZXJhdGlvbkVycm9yKGVycm9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGVycm9yKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5uYW1lID0gXCJJbnZhbGlkT3BlcmF0aW9uXCI7XG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBlcnJvcjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gSW52YWxpZE9wZXJhdGlvbkVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0cy5JbnZhbGlkT3BlcmF0aW9uRXJyb3IgPSBJbnZhbGlkT3BlcmF0aW9uRXJyb3I7XG4vKipcbiAqIFRoZSBlcnJvciB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9iamVjdCBpcyBkaXNwb3NlZC5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgT2JqZWN0RGlzcG9zZWRFcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBPYmplY3REaXNwb3NlZEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPYmplY3REaXNwb3NlZEVycm9yLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgT2JqZWN0RGlzcG9zZWRFcnJvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvYmplY3ROYW1lIC0gVGhlIG9iamVjdCB0aGF0IGlzIGRpc3Bvc2VkXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yIC0gVGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgT2JqZWN0RGlzcG9zZWRFcnJvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE9iamVjdERpc3Bvc2VkRXJyb3Iob2JqZWN0TmFtZSwgZXJyb3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZXJyb3IpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5hbWUgPSBvYmplY3ROYW1lICsgXCJPYmplY3REaXNwb3NlZFwiO1xuICAgICAgICBfdGhpcy5tZXNzYWdlID0gZXJyb3I7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdERpc3Bvc2VkRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLk9iamVjdERpc3Bvc2VkRXJyb3IgPSBPYmplY3REaXNwb3NlZEVycm9yO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FcnJvci5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXJyb3JfMSA9IHJlcXVpcmUoXCIuL0Vycm9yXCIpO1xudmFyIEd1aWRfMSA9IHJlcXVpcmUoXCIuL0d1aWRcIik7XG52YXIgRXZlbnRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXZlbnRTb3VyY2UobWV0YWRhdGEpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5wcml2RXZlbnRMaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9uRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAobmV3IEVycm9yXzEuT2JqZWN0RGlzcG9zZWRFcnJvcihcIkV2ZW50U291cmNlXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5tZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHBhcmFtTmFtZSBpbiBfdGhpcy5tZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQubWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50Lm1ldGFkYXRhW3BhcmFtTmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQubWV0YWRhdGFbcGFyYW1OYW1lXSA9IF90aGlzLm1ldGFkYXRhW3BhcmFtTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgZXZlbnRJZCBpbiBfdGhpcy5wcml2RXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRJZCAmJiBfdGhpcy5wcml2RXZlbnRMaXN0ZW5lcnNbZXZlbnRJZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdkV2ZW50TGlzdGVuZXJzW2V2ZW50SWRdKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYXR0YWNoID0gZnVuY3Rpb24gKG9uRXZlbnRDYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIGlkID0gR3VpZF8xLmNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgICAgIF90aGlzLnByaXZFdmVudExpc3RlbmVyc1tpZF0gPSBvbkV2ZW50Q2FsbGJhY2s7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRldGFjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMucHJpdkV2ZW50TGlzdGVuZXJzW2lkXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hdHRhY2hMaXN0ZW5lciA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmF0dGFjaChsaXN0ZW5lci5vbkV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZJc0Rpc3Bvc2VkO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5wcml2RXZlbnRMaXN0ZW5lcnMgPSBudWxsO1xuICAgICAgICAgICAgX3RoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZNZXRhZGF0YSA9IG1ldGFkYXRhO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRTb3VyY2UucHJvdG90eXBlLCBcIm1ldGFkYXRhXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2TWV0YWRhdGE7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBFdmVudFNvdXJjZTtcbn0oKSk7XG5leHBvcnRzLkV2ZW50U291cmNlID0gRXZlbnRTb3VyY2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50U291cmNlLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFcnJvcl8xID0gcmVxdWlyZShcIi4vRXJyb3JcIik7XG52YXIgRXZlbnRTb3VyY2VfMSA9IHJlcXVpcmUoXCIuL0V2ZW50U291cmNlXCIpO1xudmFyIEV2ZW50cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFdmVudHMoKSB7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudHMsIFwiaW5zdGFuY2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBFdmVudHMucHJpdkluc3RhbmNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBFdmVudHMucHJpdkluc3RhbmNlID0gbmV3IEV2ZW50U291cmNlXzEuRXZlbnRTb3VyY2UoKTtcbiAgICBFdmVudHMuc2V0RXZlbnRTb3VyY2UgPSBmdW5jdGlvbiAoZXZlbnRTb3VyY2UpIHtcbiAgICAgICAgaWYgKCFldmVudFNvdXJjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuQXJndW1lbnROdWxsRXJyb3IoXCJldmVudFNvdXJjZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBFdmVudHMucHJpdkluc3RhbmNlID0gZXZlbnRTb3VyY2U7XG4gICAgfTtcbiAgICByZXR1cm4gRXZlbnRzO1xufSgpKTtcbmV4cG9ydHMuRXZlbnRzID0gRXZlbnRzO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudHMuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0F1ZGlvU291cmNlRXZlbnRzXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0Nvbm5lY3Rpb25FdmVudHNcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vQ29ubmVjdGlvbk1lc3NhZ2VcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vQ29ubmVjdGlvbk9wZW5SZXNwb25zZVwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9FcnJvclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9FdmVudHNcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vRXZlbnRTb3VyY2VcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vR3VpZFwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9JQ29ubmVjdGlvblwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9MaXN0XCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1BsYXRmb3JtRXZlbnRcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vUHJvbWlzZVwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9RdWV1ZVwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9SYXdXZWJzb2NrZXRNZXNzYWdlXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1JpZmZQY21FbmNvZGVyXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1N0cmVhbVwiKSk7XG52YXIgVHJhbnNsYXRpb25TdGF0dXNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24uc3BlZWNoL1RyYW5zbGF0aW9uU3RhdHVzXCIpO1xuZXhwb3J0cy5UcmFuc2xhdGlvblN0YXR1cyA9IFRyYW5zbGF0aW9uU3RhdHVzXzEuVHJhbnNsYXRpb25TdGF0dXM7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9DaHVua2VkQXJyYXlCdWZmZXJTdHJlYW1cIikpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FeHBvcnRzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBjcmVhdGVHdWlkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdmFyIGd1aWQgPSBcInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgdmFyIHIgPSAoZCArIE1hdGgucmFuZG9tKCkgKiAxNikgJSAxNiB8IDA7XG4gICAgICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7XG4gICAgICAgIHJldHVybiAoYyA9PT0gXCJ4XCIgPyByIDogKHIgJiAweDMgfCAweDgpKS50b1N0cmluZygxNik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGd1aWQ7XG59O1xuZXhwb3J0cy5jcmVhdGVHdWlkID0gY3JlYXRlR3VpZDtcbnZhciBjcmVhdGVOb0Rhc2hHdWlkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjcmVhdGVHdWlkKCkucmVwbGFjZShuZXcgUmVnRXhwKFwiLVwiLCBcImdcIiksIFwiXCIpLnRvVXBwZXJDYXNlKCk7XG59O1xuZXhwb3J0cy5jcmVhdGVOb0Rhc2hHdWlkID0gY3JlYXRlTm9EYXNoR3VpZDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R3VpZC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgQ29ubmVjdGlvblN0YXRlO1xuKGZ1bmN0aW9uIChDb25uZWN0aW9uU3RhdGUpIHtcbiAgICBDb25uZWN0aW9uU3RhdGVbQ29ubmVjdGlvblN0YXRlW1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgQ29ubmVjdGlvblN0YXRlW0Nvbm5lY3Rpb25TdGF0ZVtcIkNvbm5lY3RlZFwiXSA9IDFdID0gXCJDb25uZWN0ZWRcIjtcbiAgICBDb25uZWN0aW9uU3RhdGVbQ29ubmVjdGlvblN0YXRlW1wiQ29ubmVjdGluZ1wiXSA9IDJdID0gXCJDb25uZWN0aW5nXCI7XG4gICAgQ29ubmVjdGlvblN0YXRlW0Nvbm5lY3Rpb25TdGF0ZVtcIkRpc2Nvbm5lY3RlZFwiXSA9IDNdID0gXCJEaXNjb25uZWN0ZWRcIjtcbn0pKENvbm5lY3Rpb25TdGF0ZSA9IGV4cG9ydHMuQ29ubmVjdGlvblN0YXRlIHx8IChleHBvcnRzLkNvbm5lY3Rpb25TdGF0ZSA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlDb25uZWN0aW9uLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFcnJvcl8xID0gcmVxdWlyZShcIi4vRXJyb3JcIik7XG52YXIgTGlzdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMaXN0KGxpc3QpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5wcml2U3Vic2NyaXB0aW9uSWRDb3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5wcml2QWRkU3Vic2NyaXB0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zID0ge307XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkU3Vic2NyaXB0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlUmVhc29uID0gbnVsbDtcbiAgICAgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoaXRlbUluZGV4KSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2TGlzdFtpdGVtSW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldCgwKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5sYXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldChfdGhpcy5sZW5ndGgoKSAtIDEpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIF90aGlzLmluc2VydEF0KF90aGlzLnByaXZMaXN0Lmxlbmd0aCwgaXRlbSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkxpc3QudW5zaGlmdChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGluZGV4ID09PSBfdGhpcy5wcml2TGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2TGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkxpc3Quc3BsaWNlKGluZGV4LCAwLCBpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnRyaWdnZXJTdWJzY3JpcHRpb25zKF90aGlzLnByaXZBZGRTdWJzY3JpcHRpb25zKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZW1vdmVGaXJzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZUF0KDApO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlbW92ZUxhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVBdChfdGhpcy5sZW5ndGgoKSAtIDEpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlbW92ZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmUoaW5kZXgsIDEpWzBdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uIChpbmRleCwgY291bnQpIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgdmFyIHJlbW92ZWRFbGVtZW50cyA9IF90aGlzLnByaXZMaXN0LnNwbGljZShpbmRleCwgY291bnQpO1xuICAgICAgICAgICAgX3RoaXMudHJpZ2dlclN1YnNjcmlwdGlvbnMoX3RoaXMucHJpdlJlbW92ZVN1YnNjcmlwdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlbW92ZWRFbGVtZW50cztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgX3RoaXMucmVtb3ZlKDAsIF90aGlzLmxlbmd0aCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2TGlzdC5sZW5ndGg7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25BZGRlZCA9IGZ1bmN0aW9uIChhZGRlZENhbGxiYWNrKSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25JZCA9IF90aGlzLnByaXZTdWJzY3JpcHRpb25JZENvdW50ZXIrKztcbiAgICAgICAgICAgIF90aGlzLnByaXZBZGRTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSA9IGFkZGVkQ2FsbGJhY2s7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRldGFjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMucHJpdkFkZFN1YnNjcmlwdGlvbnNbc3Vic2NyaXB0aW9uSWRdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUmVtb3ZlZCA9IGZ1bmN0aW9uIChyZW1vdmVkQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbklkID0gX3RoaXMucHJpdlN1YnNjcmlwdGlvbklkQ291bnRlcisrO1xuICAgICAgICAgICAgX3RoaXMucHJpdlJlbW92ZVN1YnNjcmlwdGlvbnNbc3Vic2NyaXB0aW9uSWRdID0gcmVtb3ZlZENhbGxiYWNrO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkZXRhY2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRpc3Bvc2VkID0gZnVuY3Rpb24gKGRpc3Bvc2VkQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbklkID0gX3RoaXMucHJpdlN1YnNjcmlwdGlvbklkQ291bnRlcisrO1xuICAgICAgICAgICAgX3RoaXMucHJpdkRpc3Bvc2VkU3Vic2NyaXB0aW9uc1tzdWJzY3JpcHRpb25JZF0gPSBkaXNwb3NlZENhbGxiYWNrO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkZXRhY2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLnByaXZEaXNwb3NlZFN1YnNjcmlwdGlvbnNbc3Vic2NyaXB0aW9uSWRdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmpvaW4gPSBmdW5jdGlvbiAoc2VwZXJhdG9yKSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2TGlzdC5qb2luKHNlcGVyYXRvcik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjbG9uZUNvcHkgPSBBcnJheSgpO1xuICAgICAgICAgICAgX3RoaXMucHJpdkxpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgY2xvbmVDb3B5LnB1c2godmFsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lQ29weTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hbnkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLndoZXJlKGNhbGxiYWNrKS5sZW5ndGgoKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubGVuZ3RoKCkgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFsbCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgX3RoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMud2hlcmUoY2FsbGJhY2spLmxlbmd0aCgpID09PSBfdGhpcy5sZW5ndGgoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMubGVuZ3RoKCk7IGkrKykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKF90aGlzLnByaXZMaXN0W2ldLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZWxlY3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdExpc3QgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMucHJpdkxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RMaXN0LnB1c2goY2FsbGJhY2soX3RoaXMucHJpdkxpc3RbaV0sIGkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdChzZWxlY3RMaXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy53aGVyZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgX3RoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICB2YXIgZmlsdGVyZWRMaXN0ID0gbmV3IExpc3QoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMucHJpdkxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soX3RoaXMucHJpdkxpc3RbaV0sIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkTGlzdC5hZGQoX3RoaXMucHJpdkxpc3RbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJlZExpc3Q7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub3JkZXJCeSA9IGZ1bmN0aW9uIChjb21wYXJlRm4pIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgdmFyIGNsb25lZEFycmF5ID0gX3RoaXMudG9BcnJheSgpO1xuICAgICAgICAgICAgdmFyIG9yZGVyZWRBcnJheSA9IGNsb25lZEFycmF5LnNvcnQoY29tcGFyZUZuKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdChvcmRlcmVkQXJyYXkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9yZGVyQnlEZXNjID0gZnVuY3Rpb24gKGNvbXBhcmVGbikge1xuICAgICAgICAgICAgX3RoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMub3JkZXJCeShmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gY29tcGFyZUZuKGIsIGEpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0KF90aGlzLnRvQXJyYXkoKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29uY2F0ID0gZnVuY3Rpb24gKGxpc3QpIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0KF90aGlzLnByaXZMaXN0LmNvbmNhdChsaXN0LnRvQXJyYXkoKSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNvbmNhdEFycmF5ID0gZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdChfdGhpcy5wcml2TGlzdC5jb25jYXQoYXJyYXkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZMaXN0ID09IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMuaXNEaXNwb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkRpc3Bvc2VSZWFzb24gPSByZWFzb247XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkxpc3QgPSBudWxsO1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZBZGRTdWJzY3JpcHRpb25zID0gbnVsbDtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVtb3ZlU3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlclN1YnNjcmlwdGlvbnMoX3RoaXMucHJpdkRpc3Bvc2VkU3Vic2NyaXB0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLmlzRGlzcG9zZWQoKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcl8xLk9iamVjdERpc3Bvc2VkRXJyb3IoXCJMaXN0XCIsIF90aGlzLnByaXZEaXNwb3NlUmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHN1YnNjcmlwdGlvbklkIGluIHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZMaXN0ID0gW107XG4gICAgICAgIC8vIGNvcHkgdGhlIGxpc3QgcmF0aGVyIHRoYW4gdGFraW5nIGFzIGlzLlxuICAgICAgICBpZiAobGlzdCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBsaXN0XzEgPSBsaXN0OyBfaSA8IGxpc3RfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGxpc3RfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBMaXN0O1xufSgpKTtcbmV4cG9ydHMuTGlzdCA9IExpc3Q7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpc3QuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEd1aWRfMSA9IHJlcXVpcmUoXCIuL0d1aWRcIik7XG52YXIgRXZlbnRUeXBlO1xuKGZ1bmN0aW9uIChFdmVudFR5cGUpIHtcbiAgICBFdmVudFR5cGVbRXZlbnRUeXBlW1wiRGVidWdcIl0gPSAwXSA9IFwiRGVidWdcIjtcbiAgICBFdmVudFR5cGVbRXZlbnRUeXBlW1wiSW5mb1wiXSA9IDFdID0gXCJJbmZvXCI7XG4gICAgRXZlbnRUeXBlW0V2ZW50VHlwZVtcIldhcm5pbmdcIl0gPSAyXSA9IFwiV2FybmluZ1wiO1xuICAgIEV2ZW50VHlwZVtFdmVudFR5cGVbXCJFcnJvclwiXSA9IDNdID0gXCJFcnJvclwiO1xufSkoRXZlbnRUeXBlID0gZXhwb3J0cy5FdmVudFR5cGUgfHwgKGV4cG9ydHMuRXZlbnRUeXBlID0ge30pKTtcbnZhciBQbGF0Zm9ybUV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBsYXRmb3JtRXZlbnQoZXZlbnROYW1lLCBldmVudFR5cGUpIHtcbiAgICAgICAgdGhpcy5wcml2TmFtZSA9IGV2ZW50TmFtZTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRJZCA9IEd1aWRfMS5jcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdkV2ZW50VGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuICAgICAgICB0aGlzLnByaXZNZXRhZGF0YSA9IHt9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUGxhdGZvcm1FdmVudC5wcm90b3R5cGUsIFwibmFtZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdk5hbWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQbGF0Zm9ybUV2ZW50LnByb3RvdHlwZSwgXCJldmVudElkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRJZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBsYXRmb3JtRXZlbnQucHJvdG90eXBlLCBcImV2ZW50VGltZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV2ZW50VGltZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBsYXRmb3JtRXZlbnQucHJvdG90eXBlLCBcImV2ZW50VHlwZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV2ZW50VHlwZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBsYXRmb3JtRXZlbnQucHJvdG90eXBlLCBcIm1ldGFkYXRhXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2TWV0YWRhdGE7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBQbGF0Zm9ybUV2ZW50O1xufSgpKTtcbmV4cG9ydHMuUGxhdGZvcm1FdmVudCA9IFBsYXRmb3JtRXZlbnQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBsYXRmb3JtRXZlbnQuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEVycm9yXzEgPSByZXF1aXJlKFwiLi9FcnJvclwiKTtcbnZhciBQcm9taXNlU3RhdGU7XG4oZnVuY3Rpb24gKFByb21pc2VTdGF0ZSkge1xuICAgIFByb21pc2VTdGF0ZVtQcm9taXNlU3RhdGVbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICBQcm9taXNlU3RhdGVbUHJvbWlzZVN0YXRlW1wiUmVzb2x2ZWRcIl0gPSAxXSA9IFwiUmVzb2x2ZWRcIjtcbiAgICBQcm9taXNlU3RhdGVbUHJvbWlzZVN0YXRlW1wiUmVqZWN0ZWRcIl0gPSAyXSA9IFwiUmVqZWN0ZWRcIjtcbn0pKFByb21pc2VTdGF0ZSA9IGV4cG9ydHMuUHJvbWlzZVN0YXRlIHx8IChleHBvcnRzLlByb21pc2VTdGF0ZSA9IHt9KSk7XG52YXIgUHJvbWlzZVJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQcm9taXNlUmVzdWx0KHByb21pc2VSZXN1bHRFdmVudFNvdXJjZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnRocm93SWZFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgX3RoaXMuZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHByb21pc2VSZXN1bHRFdmVudFNvdXJjZS5vbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLnByaXZJc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZJc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdklzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2UmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMucHJpdklzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdklzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2SXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdkVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJvbWlzZVJlc3VsdC5wcm90b3R5cGUsIFwiaXNDb21wbGV0ZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJc0NvbXBsZXRlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb21pc2VSZXN1bHQucHJvdG90eXBlLCBcImlzRXJyb3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Vycm9yO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJvbWlzZVJlc3VsdC5wcm90b3R5cGUsIFwiZXJyb3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb21pc2VSZXN1bHQucHJvdG90eXBlLCBcInJlc3VsdFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFByb21pc2VSZXN1bHQ7XG59KCkpO1xuZXhwb3J0cy5Qcm9taXNlUmVzdWx0ID0gUHJvbWlzZVJlc3VsdDtcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIFByb21pc2VSZXN1bHRFdmVudFNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQcm9taXNlUmVzdWx0RXZlbnRTb3VyY2UoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2V0UmVzdWx0ID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgX3RoaXMucHJpdk9uU2V0UmVzdWx0KHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIF90aGlzLnByaXZPblNldEVycm9yKGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbiA9IGZ1bmN0aW9uIChvblNldFJlc3VsdCwgb25TZXRFcnJvcikge1xuICAgICAgICAgICAgX3RoaXMucHJpdk9uU2V0UmVzdWx0ID0gb25TZXRSZXN1bHQ7XG4gICAgICAgICAgICBfdGhpcy5wcml2T25TZXRFcnJvciA9IG9uU2V0RXJyb3I7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlUmVzdWx0RXZlbnRTb3VyY2U7XG59KCkpO1xuZXhwb3J0cy5Qcm9taXNlUmVzdWx0RXZlbnRTb3VyY2UgPSBQcm9taXNlUmVzdWx0RXZlbnRTb3VyY2U7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBQcm9taXNlSGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFByb21pc2VIZWxwZXIoKSB7XG4gICAgfVxuICAgIFByb21pc2VIZWxwZXIud2hlbkFsbCA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgICAgICBpZiAoIXByb21pc2VzIHx8IHByb21pc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuQXJndW1lbnROdWxsRXJyb3IoXCJwcm9taXNlc1wiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgdmFyIGVycm9ycyA9IFtdO1xuICAgICAgICB2YXIgY29tcGxldGVkUHJvbWlzZXMgPSAwO1xuICAgICAgICB2YXIgY2hlY2tGb3JDb21wbGV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29tcGxldGVkUHJvbWlzZXMrKztcbiAgICAgICAgICAgIGlmIChjb21wbGV0ZWRQcm9taXNlcyA9PT0gcHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcnMuam9pbihcIiwgXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcHJvbWlzZXNfMSA9IHByb21pc2VzOyBfaSA8IHByb21pc2VzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHByb21pc2VzXzFbX2ldO1xuICAgICAgICAgICAgcHJvbWlzZS5vbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgIGNoZWNrRm9yQ29tcGxldGlvbigpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChlKTtcbiAgICAgICAgICAgICAgICBjaGVja0ZvckNvbXBsZXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gICAgfTtcbiAgICBQcm9taXNlSGVscGVyLmZyb21SZXN1bHQgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gICAgfTtcbiAgICBQcm9taXNlSGVscGVyLmZyb21FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgICB9O1xuICAgIHJldHVybiBQcm9taXNlSGVscGVyO1xufSgpKTtcbmV4cG9ydHMuUHJvbWlzZUhlbHBlciA9IFByb21pc2VIZWxwZXI7XG4vLyBUT0RPOiByZXBsYWNlIHdpdGggRVM2IHByb21pc2VzXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBQcm9taXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFByb21pc2Uoc2luaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnJlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2U2luay5yZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29udGludWVXaXRoID0gZnVuY3Rpb24gKGNvbnRpbnVhdGlvbkNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoIWNvbnRpbnVhdGlvbkNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuQXJndW1lbnROdWxsRXJyb3IoXCJjb250aW51YXRpb25DYWxsYmFja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb250aW51YXRpb25EZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgX3RoaXMucHJpdlNpbmsub24oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGludWF0aW9uUmVzdWx0ID0gY29udGludWF0aW9uQ2FsbGJhY2soX3RoaXMucHJpdlNpbmsucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVzb2x2ZShjb250aW51YXRpb25SZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb25EZWZlcnJhbC5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRpbnVhdGlvblJlc3VsdCA9IGNvbnRpbnVhdGlvbkNhbGxiYWNrKF90aGlzLnByaXZTaW5rLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvbkRlZmVycmFsLnJlc29sdmUoY29udGludWF0aW9uUmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVqZWN0KFwiJ0Vycm9yIGhhbmRsZXIgZm9yIGVycm9yIFwiICsgZXJyb3IgKyBcIiB0aHJldyBlcnJvciBcIiArIGUgKyBcIidcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY29udGludWF0aW9uRGVmZXJyYWwucHJvbWlzZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aCA9IGZ1bmN0aW9uIChjb250aW51YXRpb25DYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKCFjb250aW51YXRpb25DYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcl8xLkFyZ3VtZW50TnVsbEVycm9yKFwiY29udGludWF0aW9uQ2FsbGJhY2tcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29udGludWF0aW9uRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIF90aGlzLnByaXZTaW5rLm9uKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRpbnVhdGlvblJlc3VsdCA9IGNvbnRpbnVhdGlvbkNhbGxiYWNrKHIpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb25EZWZlcnJhbC5yZXNvbHZlKGNvbnRpbnVhdGlvblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvbkRlZmVycmFsLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb250aW51YXRpb25EZWZlcnJhbC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY29udGludWF0aW9uRGVmZXJyYWwucHJvbWlzZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNvbnRpbnVlV2l0aFByb21pc2UgPSBmdW5jdGlvbiAoY29udGludWF0aW9uQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmICghY29udGludWF0aW9uQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3JfMS5Bcmd1bWVudE51bGxFcnJvcihcImNvbnRpbnVhdGlvbkNhbGxiYWNrXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbnRpbnVhdGlvbkRlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICBfdGhpcy5wcml2U2luay5vbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250aW51YXRpb25Qcm9taXNlID0gY29udGludWF0aW9uQ2FsbGJhY2soX3RoaXMucHJpdlNpbmsucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250aW51YXRpb25Qcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInQ29udGludWF0aW9uIGNhbGxiYWNrIGRpZCBub3QgcmV0dXJuIHByb21pc2UnXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvblByb21pc2Uub24oZnVuY3Rpb24gKGNvbnRpbnVhdGlvblJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVzb2x2ZShjb250aW51YXRpb25SZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250aW51YXRpb25Qcm9taXNlID0gY29udGludWF0aW9uQ2FsbGJhY2soX3RoaXMucHJpdlNpbmsucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250aW51YXRpb25Qcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250aW51YXRpb24gY2FsbGJhY2sgZGlkIG5vdCByZXR1cm4gcHJvbWlzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51YXRpb25Qcm9taXNlLm9uKGZ1bmN0aW9uIChjb250aW51YXRpb25SZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvbkRlZmVycmFsLnJlc29sdmUoY29udGludWF0aW9uUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvbkRlZmVycmFsLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvbkRlZmVycmFsLnJlamVjdChcIidFcnJvciBoYW5kbGVyIGZvciBlcnJvciBcIiArIGVycm9yICsgXCIgdGhyZXcgZXJyb3IgXCIgKyBlICsgXCInXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRpbnVhdGlvbkRlZmVycmFsLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblN1Y2Nlc3NDb250aW51ZVdpdGhQcm9taXNlID0gZnVuY3Rpb24gKGNvbnRpbnVhdGlvbkNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoIWNvbnRpbnVhdGlvbkNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuQXJndW1lbnROdWxsRXJyb3IoXCJjb250aW51YXRpb25DYWxsYmFja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb250aW51YXRpb25EZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgX3RoaXMucHJpdlNpbmsub24oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGludWF0aW9uUHJvbWlzZSA9IGNvbnRpbnVhdGlvbkNhbGxiYWNrKHIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRpbnVhdGlvblByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRpbnVhdGlvbiBjYWxsYmFjayBkaWQgbm90IHJldHVybiBwcm9taXNlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvblByb21pc2Uub24oZnVuY3Rpb24gKGNvbnRpbnVhdGlvblJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVzb2x2ZShjb250aW51YXRpb25SZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uRGVmZXJyYWwucmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVhdGlvbkRlZmVycmFsLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb250aW51YXRpb25EZWZlcnJhbC5wcm9taXNlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub24gPSBmdW5jdGlvbiAoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoIXN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcl8xLkFyZ3VtZW50TnVsbEVycm9yKFwic3VjY2Vzc0NhbGxiYWNrXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuQXJndW1lbnROdWxsRXJyb3IoXCJlcnJvckNhbGxiYWNrXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMucHJpdlNpbmsub24oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5maW5hbGx5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuQXJndW1lbnROdWxsRXJyb3IoXCJjYWxsYmFja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjYWxsYmFja1dyYXBwZXIgPSBmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9uKGNhbGxiYWNrV3JhcHBlciwgY2FsbGJhY2tXcmFwcGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2U2luayA9IHNpbms7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlO1xufSgpKTtcbmV4cG9ydHMuUHJvbWlzZSA9IFByb21pc2U7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBEZWZlcnJlZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWZlcnJlZCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2U2luay5zdGF0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaXZQcm9taXNlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlc29sdmUgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBfdGhpcy5wcml2U2luay5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVqZWN0ID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBfdGhpcy5wcml2U2luay5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZTaW5rID0gbmV3IFNpbmsoKTtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZSA9IG5ldyBQcm9taXNlKHRoaXMucHJpdlNpbmspO1xuICAgIH1cbiAgICByZXR1cm4gRGVmZXJyZWQ7XG59KCkpO1xuZXhwb3J0cy5EZWZlcnJlZCA9IERlZmVycmVkO1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgU2luayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaW5rKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnByaXZTdGF0ZSA9IFByb21pc2VTdGF0ZS5Ob25lO1xuICAgICAgICB0aGlzLnByaXZQcm9taXNlUmVzdWx0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZVJlc3VsdEV2ZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NIYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZFcnJvckhhbmRsZXJzID0gW107XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2U3RhdGUgIT09IFByb21pc2VTdGF0ZS5Ob25lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ0Nhbm5vdCByZXNvbHZlIGEgY29tcGxldGVkIHByb21pc2UnXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMucHJpdlN0YXRlID0gUHJvbWlzZVN0YXRlLlJlc29sdmVkO1xuICAgICAgICAgICAgX3RoaXMucHJpdlByb21pc2VSZXN1bHRFdmVudHMuc2V0UmVzdWx0KHJlc3VsdCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLnByaXZTdWNjZXNzSGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5leGVjdXRlU3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCwgX3RoaXMucHJpdlN1Y2Nlc3NIYW5kbGVyc1tpXSwgX3RoaXMucHJpdkVycm9ySGFuZGxlcnNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuZGV0YWNoSGFuZGxlcnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWplY3QgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2U3RhdGUgIT09IFByb21pc2VTdGF0ZS5Ob25lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ0Nhbm5vdCByZWplY3QgYSBjb21wbGV0ZWQgcHJvbWlzZSdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5wcml2U3RhdGUgPSBQcm9taXNlU3RhdGUuUmVqZWN0ZWQ7XG4gICAgICAgICAgICBfdGhpcy5wcml2UHJvbWlzZVJlc3VsdEV2ZW50cy5zZXRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMucHJpdkVycm9ySGFuZGxlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9ySGFuZGxlciA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBfdGhpcy5leGVjdXRlRXJyb3JDYWxsYmFjayhlcnJvciwgZXJyb3JIYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLmRldGFjaEhhbmRsZXJzKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub24gPSBmdW5jdGlvbiAoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoc3VjY2Vzc0NhbGxiYWNrID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2sgPSBmdW5jdGlvbiAocikgeyByZXR1cm47IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMucHJpdlN0YXRlID09PSBQcm9taXNlU3RhdGUuTm9uZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZTdWNjZXNzSGFuZGxlcnMucHVzaChzdWNjZXNzQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZFcnJvckhhbmRsZXJzLnB1c2goZXJyb3JDYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJpdlN0YXRlID09PSBQcm9taXNlU3RhdGUuUmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhlY3V0ZVN1Y2Nlc3NDYWxsYmFjayhfdGhpcy5wcml2UHJvbWlzZVJlc3VsdC5yZXN1bHQsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKF90aGlzLnByaXZTdGF0ZSA9PT0gUHJvbWlzZVN0YXRlLlJlamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmV4ZWN1dGVFcnJvckNhbGxiYWNrKF90aGlzLnByaXZQcm9taXNlUmVzdWx0LmVycm9yLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuZGV0YWNoSGFuZGxlcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5leGVjdXRlU3VjY2Vzc0NhbGxiYWNrID0gZnVuY3Rpb24gKHJlc3VsdCwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5leGVjdXRlRXJyb3JDYWxsYmFjayhcIidVbmhhbmRsZWQgY2FsbGJhY2sgZXJyb3I6IFwiICsgZSArIFwiJ1wiLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5leGVjdXRlRXJyb3JDYWxsYmFjayA9IGZ1bmN0aW9uIChlcnJvciwgZXJyb3JDYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ1VuaGFuZGxlZCBjYWxsYmFjayBlcnJvcjogXCIgKyBlICsgXCIuIElubmVyRXJyb3I6IFwiICsgZXJyb3IgKyBcIidcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ1VuaGFuZGxlZCBlcnJvcjogXCIgKyBlcnJvciArIFwiJ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZXRhY2hIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnByaXZFcnJvckhhbmRsZXJzID0gW107XG4gICAgICAgICAgICBfdGhpcy5wcml2U3VjY2Vzc0hhbmRsZXJzID0gW107XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdlByb21pc2VSZXN1bHRFdmVudHMgPSBuZXcgUHJvbWlzZVJlc3VsdEV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdlByb21pc2VSZXN1bHQgPSBuZXcgUHJvbWlzZVJlc3VsdCh0aGlzLnByaXZQcm9taXNlUmVzdWx0RXZlbnRzKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNpbmsucHJvdG90eXBlLCBcInN0YXRlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaW5rLnByb3RvdHlwZSwgXCJyZXN1bHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9taXNlUmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gU2luaztcbn0oKSk7XG5leHBvcnRzLlNpbmsgPSBTaW5rO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9taXNlLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFcnJvcl8xID0gcmVxdWlyZShcIi4vRXJyb3JcIik7XG52YXIgTGlzdF8xID0gcmVxdWlyZShcIi4vTGlzdFwiKTtcbnZhciBQcm9taXNlXzEgPSByZXF1aXJlKFwiLi9Qcm9taXNlXCIpO1xudmFyIFN1YnNjcmliZXJUeXBlO1xuKGZ1bmN0aW9uIChTdWJzY3JpYmVyVHlwZSkge1xuICAgIFN1YnNjcmliZXJUeXBlW1N1YnNjcmliZXJUeXBlW1wiRGVxdWV1ZVwiXSA9IDBdID0gXCJEZXF1ZXVlXCI7XG4gICAgU3Vic2NyaWJlclR5cGVbU3Vic2NyaWJlclR5cGVbXCJQZWVrXCJdID0gMV0gPSBcIlBlZWtcIjtcbn0pKFN1YnNjcmliZXJUeXBlIHx8IChTdWJzY3JpYmVyVHlwZSA9IHt9KSk7XG52YXIgUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUXVldWUobGlzdCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnByaXZQcm9taXNlU3RvcmUgPSBuZXcgTGlzdF8xLkxpc3QoKTtcbiAgICAgICAgdGhpcy5wcml2SXNEcmFpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZVJlYXNvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuZW5xdWV1ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZSgpO1xuICAgICAgICAgICAgX3RoaXMuZW5xdWV1ZUZyb21Qcm9taXNlKFByb21pc2VfMS5Qcm9taXNlSGVscGVyLmZyb21SZXN1bHQoaXRlbSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVucXVldWVGcm9tUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgICAgICBfdGhpcy50aHJvd0lmRGlzcG9zZSgpO1xuICAgICAgICAgICAgX3RoaXMucHJpdlByb21pc2VTdG9yZS5hZGQocHJvbWlzZSk7XG4gICAgICAgICAgICBwcm9taXNlLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChfdGhpcy5wcml2UHJvbWlzZVN0b3JlLmxlbmd0aCgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnByaXZQcm9taXNlU3RvcmUuZmlyc3QoKS5yZXN1bHQoKS5pc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IF90aGlzLnByaXZQcm9taXNlU3RvcmUucmVtb3ZlRmlyc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcC5yZXN1bHQoKS5pc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdkxpc3QuYWRkKHAucmVzdWx0KCkucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IExvZyBhcyB3YXJuaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGVxdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlKCk7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWRTdWJzY3JpYmVyID0gbmV3IFByb21pc2VfMS5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgaWYgKF90aGlzLnByaXZTdWJzY3JpYmVycykge1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZTdWJzY3JpYmVycy5hZGQoeyBkZWZlcnJhbDogZGVmZXJyZWRTdWJzY3JpYmVyLCB0eXBlOiBTdWJzY3JpYmVyVHlwZS5EZXF1ZXVlIH0pO1xuICAgICAgICAgICAgICAgIF90aGlzLmRyYWluKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWRTdWJzY3JpYmVyLnByb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wZWVrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZFN1YnNjcmliZXIgPSBuZXcgUHJvbWlzZV8xLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB2YXIgc3VicyA9IF90aGlzLnByaXZTdWJzY3JpYmVycztcbiAgICAgICAgICAgIGlmIChzdWJzKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdlN1YnNjcmliZXJzLmFkZCh7IGRlZmVycmFsOiBkZWZlcnJlZFN1YnNjcmliZXIsIHR5cGU6IFN1YnNjcmliZXJUeXBlLlBlZWsgfSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuZHJhaW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZFN1YnNjcmliZXIucHJvbWlzZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnRocm93SWZEaXNwb3NlKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucHJpdkxpc3QubGVuZ3RoKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2U3Vic2NyaWJlcnMgPT0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kcmFpbkFuZERpc3Bvc2UgPSBmdW5jdGlvbiAocGVuZGluZ0l0ZW1Qcm9jZXNzb3IsIHJlYXNvbikge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0Rpc3Bvc2VkKCkgJiYgIV90aGlzLnByaXZJc0Rpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZEaXNwb3NlUmVhc29uID0gcmVhc29uO1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZJc0Rpc3Bvc2luZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnMgPSBfdGhpcy5wcml2U3Vic2NyaWJlcnM7XG4gICAgICAgICAgICAgICAgaWYgKHN1YnMpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN1YnMubGVuZ3RoKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaWJlciA9IHN1YnMucmVtb3ZlRmlyc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHRoaXMgbmVlZHMgd29yayAoUmVzb2x2ZShudWxsKSBpbnN0ZWFkPykuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmRlZmVycmFsLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN1YnNjcmliZXIuZGVmZXJyYWwucmVqZWN0KFwiRGlzcG9zZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gbm90ZTogdGhpcyBibG9jayBhc3N1bWVzIGNvb3BlcmF0aXZlIG11bHRpdGFza2luZywgaS5lLixcbiAgICAgICAgICAgICAgICAgICAgLy8gYmV0d2VlbiB0aGUgaWYtc3RhdGVtZW50IGFuZCB0aGUgYXNzaWdubWVudCB0aGVyZSBhcmUgbm9cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhyZWFkIHN3aXRjaGVzLlxuICAgICAgICAgICAgICAgICAgICAvLyBSZWFzb24gaXMgdGhhdCBiZXR3ZWVuIHRoZSBpbml0aWFsIGNvbnN0ID0gdGhpcy47IGFuZCB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHBvaW50IHRoZXJlIGlzIHRoZSBkZXJyYWwucmVzb2x2ZSgpIG9wZXJhdGlvbiB0aGF0IG1pZ2h0IGhhdmVcbiAgICAgICAgICAgICAgICAgICAgLy8gY2F1c2VkIHJlY3Vyc2l2ZSBjYWxscyB0byB0aGUgUXVldWUsIGVzcGVjaWFsbHksIGNhbGxpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcG9zZSgpIG9uIHRoZSBxdWV1ZSBhbHJlZHkgKHdoaWNoIHdvdWxkIHJlc2V0IHRoZSB2YXJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGVyZSB0byBudWxsISkuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoYXQgc2hvdWxkIGdlbmVyYWxseSBob2xkIHRydWUgZm9yIGphdmFzY3JpcHQuLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnByaXZTdWJzY3JpYmVycyA9PT0gc3Vicykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdlN1YnNjcmliZXJzID0gc3VicztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMucHJpdkRldGFjaGFibGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWNoYWJsZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWNoYWJsZS5kZXRhY2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnByaXZQcm9taXNlU3RvcmUubGVuZ3RoKCkgPiAwICYmIHBlbmRpbmdJdGVtUHJvY2Vzc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlXzEuUHJvbWlzZUhlbHBlclxuICAgICAgICAgICAgICAgICAgICAgICAgLndoZW5BbGwoX3RoaXMucHJpdlByb21pc2VTdG9yZS50b0FycmF5KCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29udGludWVXaXRoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZTdWJzY3JpYmVycyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdJdGVtUHJvY2Vzc29yKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2TGlzdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2U3Vic2NyaWJlcnMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2TGlzdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VfMS5Qcm9taXNlSGVscGVyLmZyb21SZXN1bHQodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIF90aGlzLmRyYWluQW5kRGlzcG9zZShudWxsLCByZWFzb24pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRyYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5wcml2SXNEcmFpbkluUHJvZ3Jlc3MgJiYgIV90aGlzLnByaXZJc0Rpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZJc0RyYWluSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnMgPSBfdGhpcy5wcml2U3Vic2NyaWJlcnM7XG4gICAgICAgICAgICAgICAgdmFyIGxpc3RzID0gX3RoaXMucHJpdkxpc3Q7XG4gICAgICAgICAgICAgICAgaWYgKHN1YnMgJiYgbGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGxpc3RzLmxlbmd0aCgpID4gMCAmJiBzdWJzLmxlbmd0aCgpID4gMCAmJiAhX3RoaXMucHJpdklzRGlzcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaWJlciA9IHN1YnMucmVtb3ZlRmlyc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLnR5cGUgPT09IFN1YnNjcmliZXJUeXBlLlBlZWspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmRlZmVycmFsLnJlc29sdmUobGlzdHMuZmlyc3QoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVxdWV1ZWRJdGVtID0gbGlzdHMucmVtb3ZlRmlyc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmRlZmVycmFsLnJlc29sdmUoZGVxdWV1ZWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBub3RlOiB0aGlzIGJsb2NrIGFzc3VtZXMgY29vcGVyYXRpdmUgbXVsdGl0YXNraW5nLCBpLmUuLFxuICAgICAgICAgICAgICAgICAgICAvLyBiZXR3ZWVuIHRoZSBpZi1zdGF0ZW1lbnQgYW5kIHRoZSBhc3NpZ25tZW50IHRoZXJlIGFyZSBub1xuICAgICAgICAgICAgICAgICAgICAvLyB0aHJlYWQgc3dpdGNoZXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlYXNvbiBpcyB0aGF0IGJldHdlZW4gdGhlIGluaXRpYWwgY29uc3QgPSB0aGlzLjsgYW5kIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9pbnQgdGhlcmUgaXMgdGhlIGRlcnJhbC5yZXNvbHZlKCkgb3BlcmF0aW9uIHRoYXQgbWlnaHQgaGF2ZVxuICAgICAgICAgICAgICAgICAgICAvLyBjYXVzZWQgcmVjdXJzaXZlIGNhbGxzIHRvIHRoZSBRdWV1ZSwgZXNwZWNpYWxseSwgY2FsbGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBEaXNwb3NlKCkgb24gdGhlIHF1ZXVlIGFscmVkeSAod2hpY2ggd291bGQgcmVzZXQgdGhlIHZhclxuICAgICAgICAgICAgICAgICAgICAvLyBoZXJlIHRvIG51bGwhKS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhhdCBzaG91bGQgZ2VuZXJhbGx5IGhvbGQgdHJ1ZSBmb3IgamF2YXNjcmlwdC4uLlxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJpdlN1YnNjcmliZXJzID09PSBzdWJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2U3Vic2NyaWJlcnMgPSBzdWJzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGU6IHRoaXMgYmxvY2sgYXNzdW1lcyBjb29wZXJhdGl2ZSBtdWx0aXRhc2tpbmcsIGkuZS4sXG4gICAgICAgICAgICAgICAgICAgIC8vIGJldHdlZW4gdGhlIGlmLXN0YXRlbWVudCBhbmQgdGhlIGFzc2lnbm1lbnQgdGhlcmUgYXJlIG5vXG4gICAgICAgICAgICAgICAgICAgIC8vIHRocmVhZCBzd2l0Y2hlcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVhc29uIGlzIHRoYXQgYmV0d2VlbiB0aGUgaW5pdGlhbCBjb25zdCA9IHRoaXMuOyBhbmQgdGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyBwb2ludCB0aGVyZSBpcyB0aGUgZGVycmFsLnJlc29sdmUoKSBvcGVyYXRpb24gdGhhdCBtaWdodCBoYXZlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhdXNlZCByZWN1cnNpdmUgY2FsbHMgdG8gdGhlIFF1ZXVlLCBlc3BlY2lhbGx5LCBjYWxsaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIERpc3Bvc2UoKSBvbiB0aGUgcXVldWUgYWxyZWR5ICh3aGljaCB3b3VsZCByZXNldCB0aGUgdmFyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhlcmUgdG8gbnVsbCEpLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGF0IHNob3VsZCBnZW5lcmFsbHkgaG9sZCB0cnVlIGZvciBqYXZhc2NyaXB0Li4uXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcml2TGlzdCA9PT0gbGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByaXZMaXN0ID0gbGlzdHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucHJpdklzRHJhaW5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMuaXNEaXNwb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnByaXZEaXNwb3NlUmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcl8xLkludmFsaWRPcGVyYXRpb25FcnJvcihfdGhpcy5wcml2RGlzcG9zZVJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcl8xLk9iamVjdERpc3Bvc2VkRXJyb3IoXCJRdWV1ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKF90aGlzLnByaXZJc0Rpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcl8xLkludmFsaWRPcGVyYXRpb25FcnJvcihcIlF1ZXVlIGRpc3Bvc2luZ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2TGlzdCA9IGxpc3QgPyBsaXN0IDogbmV3IExpc3RfMS5MaXN0KCk7XG4gICAgICAgIHRoaXMucHJpdkRldGFjaGFibGVzID0gW107XG4gICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gbmV3IExpc3RfMS5MaXN0KCk7XG4gICAgICAgIHRoaXMucHJpdkRldGFjaGFibGVzLnB1c2godGhpcy5wcml2TGlzdC5vbkFkZGVkKHRoaXMuZHJhaW4pKTtcbiAgICB9XG4gICAgcmV0dXJuIFF1ZXVlO1xufSgpKTtcbmV4cG9ydHMuUXVldWUgPSBRdWV1ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UXVldWUuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIENvbm5lY3Rpb25NZXNzYWdlXzEgPSByZXF1aXJlKFwiLi9Db25uZWN0aW9uTWVzc2FnZVwiKTtcbnZhciBFcnJvcl8xID0gcmVxdWlyZShcIi4vRXJyb3JcIik7XG52YXIgR3VpZF8xID0gcmVxdWlyZShcIi4vR3VpZFwiKTtcbnZhciBSYXdXZWJzb2NrZXRNZXNzYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJhd1dlYnNvY2tldE1lc3NhZ2UobWVzc2FnZVR5cGUsIHBheWxvYWQsIGlkKSB7XG4gICAgICAgIHRoaXMucHJpdlBheWxvYWQgPSBudWxsO1xuICAgICAgICBpZiAoIXBheWxvYWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcl8xLkFyZ3VtZW50TnVsbEVycm9yKFwicGF5bG9hZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZVR5cGUgPT09IENvbm5lY3Rpb25NZXNzYWdlXzEuTWVzc2FnZVR5cGUuQmluYXJ5ICYmICEocGF5bG9hZCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiUGF5bG9hZCBtdXN0IGJlIEFycmF5QnVmZmVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gQ29ubmVjdGlvbk1lc3NhZ2VfMS5NZXNzYWdlVHlwZS5UZXh0ICYmICEodHlwZW9mIChwYXlsb2FkKSA9PT0gXCJzdHJpbmdcIikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcl8xLkludmFsaWRPcGVyYXRpb25FcnJvcihcIlBheWxvYWQgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZNZXNzYWdlVHlwZSA9IG1lc3NhZ2VUeXBlO1xuICAgICAgICB0aGlzLnByaXZQYXlsb2FkID0gcGF5bG9hZDtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBpZCA/IGlkIDogR3VpZF8xLmNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJhd1dlYnNvY2tldE1lc3NhZ2UucHJvdG90eXBlLCBcIm1lc3NhZ2VUeXBlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2TWVzc2FnZVR5cGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSYXdXZWJzb2NrZXRNZXNzYWdlLnByb3RvdHlwZSwgXCJwYXlsb2FkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UGF5bG9hZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJhd1dlYnNvY2tldE1lc3NhZ2UucHJvdG90eXBlLCBcInRleHRDb250ZW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2TWVzc2FnZVR5cGUgPT09IENvbm5lY3Rpb25NZXNzYWdlXzEuTWVzc2FnZVR5cGUuQmluYXJ5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiTm90IHN1cHBvcnRlZCBmb3IgYmluYXJ5IG1lc3NhZ2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UGF5bG9hZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJhd1dlYnNvY2tldE1lc3NhZ2UucHJvdG90eXBlLCBcImJpbmFyeUNvbnRlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZNZXNzYWdlVHlwZSA9PT0gQ29ubmVjdGlvbk1lc3NhZ2VfMS5NZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiTm90IHN1cHBvcnRlZCBmb3IgdGV4dCBtZXNzYWdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBheWxvYWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSYXdXZWJzb2NrZXRNZXNzYWdlLnByb3RvdHlwZSwgXCJpZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUmF3V2Vic29ja2V0TWVzc2FnZTtcbn0oKSk7XG5leHBvcnRzLlJhd1dlYnNvY2tldE1lc3NhZ2UgPSBSYXdXZWJzb2NrZXRNZXNzYWdlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SYXdXZWJzb2NrZXRNZXNzYWdlLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBSaWZmUGNtRW5jb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSaWZmUGNtRW5jb2RlcihhY3R1YWxTYW1wbGVSYXRlLCBkZXNpcmVkU2FtcGxlUmF0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnByaXZDaGFubmVsQ291bnQgPSAxO1xuICAgICAgICB0aGlzLmVuY29kZSA9IGZ1bmN0aW9uIChuZWVkSGVhZGVyLCBhY3R1YWxBdWRpb0ZyYW1lKSB7XG4gICAgICAgICAgICB2YXIgYXVkaW9GcmFtZSA9IF90aGlzLmRvd25TYW1wbGVBdWRpb0ZyYW1lKGFjdHVhbEF1ZGlvRnJhbWUsIF90aGlzLnByaXZBY3R1YWxTYW1wbGVSYXRlLCBfdGhpcy5wcml2RGVzaXJlZFNhbXBsZVJhdGUpO1xuICAgICAgICAgICAgaWYgKCFhdWRpb0ZyYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXVkaW9MZW5ndGggPSBhdWRpb0ZyYW1lLmxlbmd0aCAqIDI7XG4gICAgICAgICAgICBpZiAoIW5lZWRIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnVmZmVyXzEgPSBuZXcgQXJyYXlCdWZmZXIoYXVkaW9MZW5ndGgpO1xuICAgICAgICAgICAgICAgIHZhciB2aWV3XzEgPSBuZXcgRGF0YVZpZXcoYnVmZmVyXzEpO1xuICAgICAgICAgICAgICAgIF90aGlzLmZsb2F0VG8xNkJpdFBDTSh2aWV3XzEsIDAsIGF1ZGlvRnJhbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBidWZmZXJfMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNDQgKyBhdWRpb0xlbmd0aCk7XG4gICAgICAgICAgICB2YXIgYml0c1BlclNhbXBsZSA9IDE2O1xuICAgICAgICAgICAgdmFyIGJ5dGVzUGVyU2FtcGxlID0gYml0c1BlclNhbXBsZSAvIDg7XG4gICAgICAgICAgICAvLyBXZSBkb250IGtub3cgYWhlYWQgb2YgdGltZSBhYm91dCB0aGUgbGVuZ3RoIG9mIGF1ZGlvIHRvIHN0cmVhbS4gU28gc2V0IHRvIDAuXG4gICAgICAgICAgICB2YXIgZmlsZUxlbmd0aCA9IDA7XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRhVmlld1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICAgICAgICAgIC8qIFJJRkYgaWRlbnRpZmllciAqL1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RyaW5nKHZpZXcsIDAsIFwiUklGRlwiKTtcbiAgICAgICAgICAgIC8qIGZpbGUgbGVuZ3RoICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMig0LCBmaWxlTGVuZ3RoLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIFJJRkYgdHlwZSAmIEZvcm1hdCAqL1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RyaW5nKHZpZXcsIDgsIFwiV0FWRWZtdCBcIik7XG4gICAgICAgICAgICAvKiBmb3JtYXQgY2h1bmsgbGVuZ3RoICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMigxNiwgMTYsIHRydWUpO1xuICAgICAgICAgICAgLyogc2FtcGxlIGZvcm1hdCAocmF3KSAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoMjAsIDEsIHRydWUpO1xuICAgICAgICAgICAgLyogY2hhbm5lbCBjb3VudCAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoMjIsIF90aGlzLnByaXZDaGFubmVsQ291bnQsIHRydWUpO1xuICAgICAgICAgICAgLyogc2FtcGxlIHJhdGUgKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDI0LCBfdGhpcy5wcml2RGVzaXJlZFNhbXBsZVJhdGUsIHRydWUpO1xuICAgICAgICAgICAgLyogYnl0ZSByYXRlIChzYW1wbGUgcmF0ZSAqIGJsb2NrIGFsaWduKSAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoMjgsIF90aGlzLnByaXZEZXNpcmVkU2FtcGxlUmF0ZSAqIF90aGlzLnByaXZDaGFubmVsQ291bnQgKiBieXRlc1BlclNhbXBsZSwgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBibG9jayBhbGlnbiAoY2hhbm5lbCBjb3VudCAqIGJ5dGVzIHBlciBzYW1wbGUpICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQxNigzMiwgX3RoaXMucHJpdkNoYW5uZWxDb3VudCAqIGJ5dGVzUGVyU2FtcGxlLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIGJpdHMgcGVyIHNhbXBsZSAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoMzQsIGJpdHNQZXJTYW1wbGUsIHRydWUpO1xuICAgICAgICAgICAgLyogZGF0YSBjaHVuayBpZGVudGlmaWVyICovXG4gICAgICAgICAgICBfdGhpcy5zZXRTdHJpbmcodmlldywgMzYsIFwiZGF0YVwiKTtcbiAgICAgICAgICAgIC8qIGRhdGEgY2h1bmsgbGVuZ3RoICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMig0MCwgZmlsZUxlbmd0aCwgdHJ1ZSk7XG4gICAgICAgICAgICBfdGhpcy5mbG9hdFRvMTZCaXRQQ00odmlldywgNDQsIGF1ZGlvRnJhbWUpO1xuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRTdHJpbmcgPSBmdW5jdGlvbiAodmlldywgb2Zmc2V0LCBzdHIpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHIuY2hhckNvZGVBdChpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmxvYXRUbzE2Qml0UENNID0gZnVuY3Rpb24gKHZpZXcsIG9mZnNldCwgaW5wdXQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyssIG9mZnNldCArPSAyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgaW5wdXRbaV0pKTtcbiAgICAgICAgICAgICAgICB2aWV3LnNldEludDE2KG9mZnNldCwgcyA8IDAgPyBzICogMHg4MDAwIDogcyAqIDB4N0ZGRiwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZG93blNhbXBsZUF1ZGlvRnJhbWUgPSBmdW5jdGlvbiAoc3JjRnJhbWUsIHNyY1JhdGUsIGRzdFJhdGUpIHtcbiAgICAgICAgICAgIGlmIChkc3RSYXRlID09PSBzcmNSYXRlIHx8IGRzdFJhdGUgPiBzcmNSYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNyY0ZyYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJhdGlvID0gc3JjUmF0ZSAvIGRzdFJhdGU7XG4gICAgICAgICAgICB2YXIgZHN0TGVuZ3RoID0gTWF0aC5yb3VuZChzcmNGcmFtZS5sZW5ndGggLyByYXRpbyk7XG4gICAgICAgICAgICB2YXIgZHN0RnJhbWUgPSBuZXcgRmxvYXQzMkFycmF5KGRzdExlbmd0aCk7XG4gICAgICAgICAgICB2YXIgc3JjT2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIHZhciBkc3RPZmZzZXQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGRzdE9mZnNldCA8IGRzdExlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBuZXh0U3JjT2Zmc2V0ID0gTWF0aC5yb3VuZCgoZHN0T2Zmc2V0ICsgMSkgKiByYXRpbyk7XG4gICAgICAgICAgICAgICAgdmFyIGFjY3VtID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChzcmNPZmZzZXQgPCBuZXh0U3JjT2Zmc2V0ICYmIHNyY09mZnNldCA8IHNyY0ZyYW1lLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhY2N1bSArPSBzcmNGcmFtZVtzcmNPZmZzZXQrK107XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRzdEZyYW1lW2RzdE9mZnNldCsrXSA9IGFjY3VtIC8gY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZHN0RnJhbWU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdkFjdHVhbFNhbXBsZVJhdGUgPSBhY3R1YWxTYW1wbGVSYXRlO1xuICAgICAgICB0aGlzLnByaXZEZXNpcmVkU2FtcGxlUmF0ZSA9IGRlc2lyZWRTYW1wbGVSYXRlO1xuICAgIH1cbiAgICByZXR1cm4gUmlmZlBjbUVuY29kZXI7XG59KCkpO1xuZXhwb3J0cy5SaWZmUGNtRW5jb2RlciA9IFJpZmZQY21FbmNvZGVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SaWZmUGNtRW5jb2Rlci5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXJyb3JfMSA9IHJlcXVpcmUoXCIuL0Vycm9yXCIpO1xudmFyIEd1aWRfMSA9IHJlcXVpcmUoXCIuL0d1aWRcIik7XG52YXIgUXVldWVfMSA9IHJlcXVpcmUoXCIuL1F1ZXVlXCIpO1xudmFyIFN0cmVhbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdHJlYW0oc3RyZWFtSWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5wcml2UmVhZGVySWRDb3VudGVyID0gMTtcbiAgICAgICAgdGhpcy5wcml2SXNFbmRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdldFJlYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZWFkZXJJZCA9IF90aGlzLnByaXZSZWFkZXJJZENvdW50ZXI7XG4gICAgICAgICAgICBfdGhpcy5wcml2UmVhZGVySWRDb3VudGVyKys7XG4gICAgICAgICAgICB2YXIgcmVhZGVyUXVldWUgPSBuZXcgUXVldWVfMS5RdWV1ZSgpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRMZW5ndGggPSBfdGhpcy5wcml2U3RyZWFtYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgIF90aGlzLnByaXZSZWFkZXJRdWV1ZXNbcmVhZGVySWRdID0gcmVhZGVyUXVldWU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGN1cnJlbnRMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlYWRlclF1ZXVlLmVucXVldWUoX3RoaXMucHJpdlN0cmVhbWJ1ZmZlcltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0cmVhbVJlYWRlcihfdGhpcy5wcml2SWQsIHJlYWRlclF1ZXVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLnByaXZSZWFkZXJRdWV1ZXNbcmVhZGVySWRdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGhyb3dJZkNsb3NlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcml2SXNFbmRlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcl8xLkludmFsaWRPcGVyYXRpb25FcnJvcihcIlN0cmVhbSBjbG9zZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJpdklkID0gc3RyZWFtSWQgPyBzdHJlYW1JZCA6IEd1aWRfMS5jcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdlN0cmVhbWJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLnByaXZSZWFkZXJRdWV1ZXMgPSB7fTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmVhbS5wcm90b3R5cGUsIFwiaXNDbG9zZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJc0VuZGVkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyZWFtLnByb3RvdHlwZSwgXCJpZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdHJlYW0ucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJpdklzRW5kZWQpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVTdHJlYW1DaHVuayh7XG4gICAgICAgICAgICAgICAgYnVmZmVyOiBudWxsLFxuICAgICAgICAgICAgICAgIGlzRW5kOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcml2SXNFbmRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0cmVhbS5wcm90b3R5cGUud3JpdGVTdHJlYW1DaHVuayA9IGZ1bmN0aW9uIChzdHJlYW1DaHVuaykge1xuICAgICAgICB0aGlzLnRocm93SWZDbG9zZWQoKTtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtYnVmZmVyLnB1c2goc3RyZWFtQ2h1bmspO1xuICAgICAgICBmb3IgKHZhciByZWFkZXJJZCBpbiB0aGlzLnByaXZSZWFkZXJRdWV1ZXMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2UmVhZGVyUXVldWVzW3JlYWRlcklkXS5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWFkZXJRdWV1ZXNbcmVhZGVySWRdLmVucXVldWUoc3RyZWFtQ2h1bmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3RyZWFtO1xufSgpKTtcbmV4cG9ydHMuU3RyZWFtID0gU3RyZWFtO1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgU3RyZWFtUmVhZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0cmVhbVJlYWRlcihzdHJlYW1JZCwgcmVhZGVyUXVldWUsIG9uQ2xvc2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5wcml2SXNDbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yXzEuSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiU3RyZWFtUmVhZGVyIGNsb3NlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2UmVhZGVyUXVldWVcbiAgICAgICAgICAgICAgICAuZGVxdWV1ZSgpXG4gICAgICAgICAgICAgICAgLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aChmdW5jdGlvbiAoc3RyZWFtQ2h1bmspIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtQ2h1bmsuaXNFbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJpdlJlYWRlclF1ZXVlLmRpc3Bvc2UoXCJFbmQgb2Ygc3RyZWFtIHJlYWNoZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJlYW1DaHVuaztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5wcml2SXNDbG9zZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2SXNDbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF90aGlzLnByaXZSZWFkZXJRdWV1ZS5kaXNwb3NlKFwiU3RyZWFtUmVhZGVyIGNsb3NlZFwiKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcml2T25DbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZSZWFkZXJRdWV1ZSA9IHJlYWRlclF1ZXVlO1xuICAgICAgICB0aGlzLnByaXZPbkNsb3NlID0gb25DbG9zZTtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtSWQgPSBzdHJlYW1JZDtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmVhbVJlYWRlci5wcm90b3R5cGUsIFwiaXNDbG9zZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Nsb3NlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmVhbVJlYWRlci5wcm90b3R5cGUsIFwic3RyZWFtSWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTdHJlYW1JZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFN0cmVhbVJlYWRlcjtcbn0oKSk7XG5leHBvcnRzLlN0cmVhbVJlYWRlciA9IFN0cmVhbVJlYWRlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RyZWFtLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCIpO1xudmFyIENvbnRyYWN0c18xID0gcmVxdWlyZShcIi4uL0NvbnRyYWN0c1wiKTtcbnZhciBFeHBvcnRzXzIgPSByZXF1aXJlKFwiLi4vRXhwb3J0c1wiKTtcbnZhciBBdWRpb0lucHV0U3RyZWFtXzEgPSByZXF1aXJlKFwiLi9BdWRpb0lucHV0U3RyZWFtXCIpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb24gdXNlZCBmb3Igc3BlY2lmeWluZyB3aGF0IHR5cGUgb2YgaW5wdXQgdG8gdXNlIChtaWNyb3Bob25lLCBmaWxlLCBzdHJlYW0pLlxuICogQGNsYXNzIEF1ZGlvQ29uZmlnXG4gKi9cbnZhciBBdWRpb0NvbmZpZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBdWRpb0NvbmZpZygpIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBBdWRpb0NvbmZpZyBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBkZWZhdWx0IG1pY3JvcGhvbmUgb24gdGhlIHN5c3RlbS5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21EZWZhdWx0TWljcm9waG9uZUlucHV0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbmZpZ30gVGhlIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBBdWRpb0NvbmZpZy5mcm9tRGVmYXVsdE1pY3JvcGhvbmVJbnB1dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBjbVJlY29yZGVyID0gbmV3IEV4cG9ydHNfMS5QY21SZWNvcmRlcigpO1xuICAgICAgICByZXR1cm4gbmV3IEF1ZGlvQ29uZmlnSW1wbChuZXcgRXhwb3J0c18xLk1pY0F1ZGlvU291cmNlKHBjbVJlY29yZGVyLCBBdWRpb0lucHV0U3RyZWFtXzEuYnVmZmVyU2l6ZSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBBdWRpb0NvbmZpZyBvYmplY3QgcmVwcmVzZW50aW5nIGEgbWljcm9waG9uZSB3aXRoIHRoZSBzcGVjaWZpZWQgZGV2aWNlIElELlxuICAgICAqIEBtZW1iZXIgQXVkaW9Db25maWcuZnJvbU1pY3JvcGhvbmVJbnB1dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IHVuZGVmaW5lZH0gZGV2aWNlSWQgLSBTcGVjaWZpZXMgdGhlIGRldmljZSBJRCBvZiB0aGUgbWljcm9waG9uZSB0byBiZSB1c2VkLlxuICAgICAqICAgICAgICBEZWZhdWx0IG1pY3JvcGhvbmUgaXMgdXNlZCB0aGUgdmFsdWUgaXMgb21pdHRlZC5cbiAgICAgKiBAcmV0dXJucyB7QXVkaW9Db25maWd9IFRoZSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9uIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgQXVkaW9Db25maWcuZnJvbU1pY3JvcGhvbmVJbnB1dCA9IGZ1bmN0aW9uIChkZXZpY2VJZCkge1xuICAgICAgICB2YXIgcGNtUmVjb3JkZXIgPSBuZXcgRXhwb3J0c18xLlBjbVJlY29yZGVyKCk7XG4gICAgICAgIHJldHVybiBuZXcgQXVkaW9Db25maWdJbXBsKG5ldyBFeHBvcnRzXzEuTWljQXVkaW9Tb3VyY2UocGNtUmVjb3JkZXIsIEF1ZGlvSW5wdXRTdHJlYW1fMS5idWZmZXJTaXplLCBkZXZpY2VJZCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBBdWRpb0NvbmZpZyBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgZmlsZS5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21XYXZGaWxlSW5wdXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtGaWxlfSBmaWxlTmFtZSAtIFNwZWNpZmllcyB0aGUgYXVkaW8gaW5wdXQgZmlsZS4gQ3VycmVudGx5LCBvbmx5IFdBViAvIFBDTSB3aXRoIDE2LWJpdFxuICAgICAqICAgICAgICBzYW1wbGVzLCAxNiBrSHogc2FtcGxlIHJhdGUsIGFuZCBhIHNpbmdsZSBjaGFubmVsIChNb25vKSBpcyBzdXBwb3J0ZWQuXG4gICAgICogQHJldHVybnMge0F1ZGlvQ29uZmlnfSBUaGUgYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbiBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIEF1ZGlvQ29uZmlnLmZyb21XYXZGaWxlSW5wdXQgPSBmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICByZXR1cm4gbmV3IEF1ZGlvQ29uZmlnSW1wbChuZXcgRXhwb3J0c18xLkZpbGVBdWRpb1NvdXJjZShmaWxlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIEF1ZGlvQ29uZmlnIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBzdHJlYW0uXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tU3RyZWFtSW5wdXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtBdWRpb0lucHV0U3RyZWFtIHwgUHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFja30gYXVkaW9TdHJlYW0gLSBTcGVjaWZpZXMgdGhlIGN1c3RvbSBhdWRpbyBpbnB1dFxuICAgICAqICAgICAgICBzdHJlYW0uIEN1cnJlbnRseSwgb25seSBXQVYgLyBQQ00gd2l0aCAxNi1iaXQgc2FtcGxlcywgMTYga0h6IHNhbXBsZSByYXRlLCBhbmQgYSBzaW5nbGUgY2hhbm5lbFxuICAgICAqICAgICAgICAoTW9ubykgaXMgc3VwcG9ydGVkLlxuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbmZpZ30gVGhlIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBBdWRpb0NvbmZpZy5mcm9tU3RyZWFtSW5wdXQgPSBmdW5jdGlvbiAoYXVkaW9TdHJlYW0pIHtcbiAgICAgICAgaWYgKGF1ZGlvU3RyZWFtIGluc3RhbmNlb2YgRXhwb3J0c18yLlB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9Db25maWdJbXBsKG5ldyBBdWRpb0lucHV0U3RyZWFtXzEuUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsKGF1ZGlvU3RyZWFtKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1ZGlvU3RyZWFtIGluc3RhbmNlb2YgRXhwb3J0c18yLkF1ZGlvSW5wdXRTdHJlYW0pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9Db25maWdJbXBsKGF1ZGlvU3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgU3VwcG9ydGVkIFR5cGVcIik7XG4gICAgfTtcbiAgICByZXR1cm4gQXVkaW9Db25maWc7XG59KCkpO1xuZXhwb3J0cy5BdWRpb0NvbmZpZyA9IEF1ZGlvQ29uZmlnO1xuLyoqXG4gKiBSZXByZXNlbnRzIGF1ZGlvIGlucHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIEF1ZGlvQ29uZmlnSW1wbFxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBBdWRpb0NvbmZpZ0ltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF1ZGlvQ29uZmlnSW1wbCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7SUF1ZGlvU291cmNlfSBzb3VyY2UgLSBBbiBhdWRpbyBzb3VyY2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQXVkaW9Db25maWdJbXBsKHNvdXJjZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2U291cmNlID0gc291cmNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLCBcImZvcm1hdFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3JtYXQgaW5mb3JtYXRpb24gZm9yIHRoZSBhdWRpb1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U291cmNlLmZvcm1hdDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJpdlNvdXJjZS50dXJuT2ZmKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuaWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgQXVkaW9Db25maWdJbXBsLnByb3RvdHlwZS5pZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5pZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLnR1cm5PblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gQSBwcm9taXNlLlxuICAgICAqL1xuICAgIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUudHVybk9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U291cmNlLnR1cm5PbigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLmF0dGFjaFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXVkaW9Ob2RlSWQgLSBUaGUgYXVkaW8gbm9kZSBpZC5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxJQXVkaW9TdHJlYW1Ob2RlPn0gQSBwcm9taXNlLlxuICAgICAqL1xuICAgIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuYXR0YWNoID0gZnVuY3Rpb24gKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuYXR0YWNoKGF1ZGlvTm9kZUlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXVkaW9Db25maWdJbXBsLnByb3RvdHlwZS5kZXRhY2hcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF1ZGlvTm9kZUlkIC0gVGhlIGF1ZGlvIG5vZGUgaWQuXG4gICAgICovXG4gICAgQXVkaW9Db25maWdJbXBsLnByb3RvdHlwZS5kZXRhY2ggPSBmdW5jdGlvbiAoYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGV0YWNoKGF1ZGlvTm9kZUlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXVkaW9Db25maWdJbXBsLnByb3RvdHlwZS50dXJuT2ZmXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBBIHByb21pc2UuXG4gICAgICovXG4gICAgQXVkaW9Db25maWdJbXBsLnByb3RvdHlwZS50dXJuT2ZmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U291cmNlLnR1cm5PZmYoKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLCBcImV2ZW50c1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuZXZlbnRzXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudFNvdXJjZTxBdWRpb1NvdXJjZUV2ZW50Pn0gQW4gZXZlbnQgc291cmNlIGZvciBhdWRpbyBldmVudHMuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuZXZlbnRzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLnNldFByb3BlcnR5ID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbCh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5wcml2U291cmNlLnNldFByb3BlcnR5KSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTb3VyY2Uuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBBdWRpb0NvbmZpZyBpbnN0YW5jZSBkb2VzIG5vdCBzdXBwb3J0IHNldHRpbmcgcHJvcGVydGllcy5cIik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuZ2V0UHJvcGVydHkgPSBmdW5jdGlvbiAobmFtZSwgZGVmKSB7XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHRoaXMucHJpdlNvdXJjZS5nZXRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5nZXRQcm9wZXJ0eShuYW1lLCBkZWYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBBdWRpb0NvbmZpZyBpbnN0YW5jZSBkb2VzIG5vdCBzdXBwb3J0IGdldHRpbmcgcHJvcGVydGllcy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZjtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLCBcImRldmljZUluZm9cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuZGV2aWNlSW5mbztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEF1ZGlvQ29uZmlnSW1wbDtcbn0oQXVkaW9Db25maWcpKTtcbmV4cG9ydHMuQXVkaW9Db25maWdJbXBsID0gQXVkaW9Db25maWdJbXBsO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb0NvbmZpZy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBHdWlkXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vc3JjL2NvbW1vbi9HdWlkXCIpO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIik7XG52YXIgRXhwb3J0c18yID0gcmVxdWlyZShcIi4uLy4uL2NvbW1vbi9FeHBvcnRzXCIpO1xudmFyIEV4cG9ydHNfMyA9IHJlcXVpcmUoXCIuLi9FeHBvcnRzXCIpO1xudmFyIEF1ZGlvU3RyZWFtRm9ybWF0XzEgPSByZXF1aXJlKFwiLi9BdWRpb1N0cmVhbUZvcm1hdFwiKTtcbmV4cG9ydHMuYnVmZmVyU2l6ZSA9IDQwOTY7XG4vKipcbiAqIFJlcHJlc2VudHMgYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBjbGFzcyBBdWRpb0lucHV0U3RyZWFtXG4gKi9cbnZhciBBdWRpb0lucHV0U3RyZWFtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEF1ZGlvSW5wdXRTdHJlYW0oKSB7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBtZW1vcnkgYmFja2VkIFB1c2hBdWRpb0lucHV0U3RyZWFtIHdpdGggdGhlIHNwZWNpZmllZCBhdWRpbyBmb3JtYXQuXG4gICAgICogQG1lbWJlciBBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZVB1c2hTdHJlYW1cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIGRhdGEgZm9ybWF0IGluIHdoaWNoIGF1ZGlvIHdpbGwgYmVcbiAgICAgKiAgICAgICAgd3JpdHRlbiB0byB0aGUgcHVzaCBhdWRpbyBzdHJlYW0ncyB3cml0ZSgpIG1ldGhvZCAoY3VycmVudGx5IG9ubHkgc3VwcG9ydCAxNiBrSHogMTZiaXQgbW9ubyBQQ00pLlxuICAgICAqIEByZXR1cm5zIHtQdXNoQXVkaW9JbnB1dFN0cmVhbX0gVGhlIGF1ZGlvIGlucHV0IHN0cmVhbSBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIEF1ZGlvSW5wdXRTdHJlYW0uY3JlYXRlUHVzaFN0cmVhbSA9IGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIFB1c2hBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZShmb3JtYXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFB1bGxBdWRpb0lucHV0U3RyZWFtIHRoYXQgZGVsZWdhdGVzIHRvIHRoZSBzcGVjaWZpZWQgY2FsbGJhY2sgaW50ZXJmYWNlIGZvciByZWFkKClcbiAgICAgKiBhbmQgY2xvc2UoKSBtZXRob2RzLlxuICAgICAqIEBtZW1iZXIgQXVkaW9JbnB1dFN0cmVhbS5jcmVhdGVQdWxsU3RyZWFtXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7UHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFja30gY2FsbGJhY2sgLSBUaGUgY3VzdG9tIGF1ZGlvIGlucHV0IG9iamVjdCwgZGVyaXZlZCBmcm9tXG4gICAgICogICAgICAgIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge0F1ZGlvU3RyZWFtRm9ybWF0fSBmb3JtYXQgLSBUaGUgYXVkaW8gZGF0YSBmb3JtYXQgaW4gd2hpY2ggYXVkaW8gd2lsbCBiZSByZXR1cm5lZCBmcm9tXG4gICAgICogICAgICAgIHRoZSBjYWxsYmFjaydzIHJlYWQoKSBtZXRob2QgKGN1cnJlbnRseSBvbmx5IHN1cHBvcnQgMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAcmV0dXJucyB7UHVsbEF1ZGlvSW5wdXRTdHJlYW19IFRoZSBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZVB1bGxTdHJlYW0gPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gUHVsbEF1ZGlvSW5wdXRTdHJlYW0uY3JlYXRlKGNhbGxiYWNrLCBmb3JtYXQpO1xuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJPb3BzXCIpO1xuICAgIH07XG4gICAgcmV0dXJuIEF1ZGlvSW5wdXRTdHJlYW07XG59KCkpO1xuZXhwb3J0cy5BdWRpb0lucHV0U3RyZWFtID0gQXVkaW9JbnB1dFN0cmVhbTtcbi8qKlxuICogUmVwcmVzZW50cyBtZW1vcnkgYmFja2VkIHB1c2ggYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBjbGFzcyBQdXNoQXVkaW9JbnB1dFN0cmVhbVxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBQdXNoQXVkaW9JbnB1dFN0cmVhbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUHVzaEF1ZGlvSW5wdXRTdHJlYW0sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUHVzaEF1ZGlvSW5wdXRTdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG1lbW9yeSBiYWNrZWQgUHVzaEF1ZGlvSW5wdXRTdHJlYW0gd2l0aCB0aGUgc3BlY2lmaWVkIGF1ZGlvIGZvcm1hdC5cbiAgICAgKiBAbWVtYmVyIFB1c2hBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0F1ZGlvU3RyZWFtRm9ybWF0fSBmb3JtYXQgLSBUaGUgYXVkaW8gZGF0YSBmb3JtYXQgaW4gd2hpY2ggYXVkaW8gd2lsbCBiZSB3cml0dGVuIHRvIHRoZVxuICAgICAqICAgICAgICBwdXNoIGF1ZGlvIHN0cmVhbSdzIHdyaXRlKCkgbWV0aG9kIChjdXJyZW50bHkgb25seSBzdXBwb3J0IDE2IGtIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICogQHJldHVybnMge1B1c2hBdWRpb0lucHV0U3RyZWFtfSBUaGUgcHVzaCBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBQdXNoQXVkaW9JbnB1dFN0cmVhbS5jcmVhdGUgPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsKGV4cG9ydHMuYnVmZmVyU2l6ZSwgZm9ybWF0KTtcbiAgICB9O1xuICAgIHJldHVybiBQdXNoQXVkaW9JbnB1dFN0cmVhbTtcbn0oQXVkaW9JbnB1dFN0cmVhbSkpO1xuZXhwb3J0cy5QdXNoQXVkaW9JbnB1dFN0cmVhbSA9IFB1c2hBdWRpb0lucHV0U3RyZWFtO1xuLyoqXG4gKiBSZXByZXNlbnRzIG1lbW9yeSBiYWNrZWQgcHVzaCBhdWRpbyBpbnB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGxcbiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGwsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGFsaXplcyBhbiBpbnN0YW5jZSB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIHN0cmVhbSBmb3JtYXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsKGNodW5rU2l6ZSwgZm9ybWF0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9uRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLnByaXZFdmVudHMub25FdmVudChldmVudCk7XG4gICAgICAgICAgICBFeHBvcnRzXzIuRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLnByaXZGb3JtYXQgPSBBdWRpb1N0cmVhbUZvcm1hdF8xLkF1ZGlvU3RyZWFtRm9ybWF0SW1wbC5nZXREZWZhdWx0SW5wdXRGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLnByaXZGb3JtYXQgPSBmb3JtYXQ7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMucHJpdkV2ZW50cyA9IG5ldyBFeHBvcnRzXzIuRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgX3RoaXMucHJpdklkID0gR3VpZF8xLmNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgX3RoaXMucHJpdlN0cmVhbSA9IG5ldyBFeHBvcnRzXzIuQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtKGNodW5rU2l6ZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFB1c2hBdWRpb0lucHV0U3RyZWFtSW1wbC5wcm90b3R5cGUsIFwiZm9ybWF0XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZvcm1hdCBpbmZvcm1hdGlvbiBmb3IgdGhlIGF1ZGlvXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZGb3JtYXQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIFdyaXRlcyB0aGUgYXVkaW8gZGF0YSBzcGVjaWZpZWQgYnkgbWFraW5nIGFuIGludGVybmFsIGNvcHkgb2YgdGhlIGRhdGEuXG4gICAgICogQG1lbWJlciBQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGwucHJvdG90eXBlLndyaXRlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGRhdGFCdWZmZXIgLSBUaGUgYXVkaW8gYnVmZmVyIG9mIHdoaWNoIHRoaXMgZnVuY3Rpb24gd2lsbCBtYWtlIGEgY29weS5cbiAgICAgKi9cbiAgICBQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGRhdGFCdWZmZXIpIHtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtLndyaXRlU3RyZWFtQ2h1bmsoe1xuICAgICAgICAgICAgYnVmZmVyOiBkYXRhQnVmZmVyLFxuICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0uXG4gICAgICogQG1lbWJlciBQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGwucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIFB1c2hBdWRpb0lucHV0U3RyZWFtSW1wbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJpdlN0cmVhbS5jbG9zZSgpO1xuICAgIH07XG4gICAgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5pZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH07XG4gICAgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS50dXJuT24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnQodGhpcy5wcml2SWQpKTsgLy8gbm8gc3RyZWFtIGlkXG4gICAgICAgIHRoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU291cmNlUmVhZHlFdmVudCh0aGlzLnByaXZJZCkpO1xuICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICB9O1xuICAgIFB1c2hBdWRpb0lucHV0U3RyZWFtSW1wbC5wcm90b3R5cGUuYXR0YWNoID0gZnVuY3Rpb24gKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICByZXR1cm4gdGhpcy50dXJuT24oKVxuICAgICAgICAgICAgLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aChmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgLy8gRm9yIG5vdyB3ZSBzdXBwb3J0IGEgc2luZ2xlIHBhcmFsbGVsIHJlYWRlciBvZiB0aGUgcHVzaGVkIHN0cmVhbS5cbiAgICAgICAgICAgIC8vIFNvIHdlIGNhbiBzaW1pcGx5IGhhbmQgdGhlIHN0cmVhbSB0byB0aGUgcmVjb2duaXplciBhbmQgbGV0IGl0IHJlY29nbml6ZS5cbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcml2U3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aChmdW5jdGlvbiAoc3RyZWFtUmVhZGVyKSB7XG4gICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudChfdGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRldGFjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW1SZWFkZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQoX3RoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXVkaW9Ob2RlSWQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZWFkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJlYW1SZWFkZXIucmVhZCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFB1c2hBdWRpb0lucHV0U3RyZWFtSW1wbC5wcm90b3R5cGUuZGV0YWNoID0gZnVuY3Rpb24gKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgfTtcbiAgICBQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGwucHJvdG90eXBlLnR1cm5PZmYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBFeHBvcnRzXzIuUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KGZhbHNlKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGwucHJvdG90eXBlLCBcImV2ZW50c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV2ZW50cztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFB1c2hBdWRpb0lucHV0U3RyZWFtSW1wbC5wcm90b3R5cGUsIFwiZGV2aWNlSW5mb1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEV4cG9ydHNfMi5Qcm9taXNlSGVscGVyLmZyb21SZXN1bHQoe1xuICAgICAgICAgICAgICAgIGJpdHNwZXJzYW1wbGU6IHRoaXMucHJpdkZvcm1hdC5iaXRzUGVyU2FtcGxlLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxjb3VudDogdGhpcy5wcml2Rm9ybWF0LmNoYW5uZWxzLFxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpdml0eTogRXhwb3J0c18xLmNvbm5lY3Rpdml0eS5Vbmtub3duLFxuICAgICAgICAgICAgICAgIG1hbnVmYWN0dXJlcjogXCJTcGVlY2ggU0RLXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiUHVzaFN0cmVhbVwiLFxuICAgICAgICAgICAgICAgIHNhbXBsZXJhdGU6IHRoaXMucHJpdkZvcm1hdC5zYW1wbGVzUGVyU2VjLFxuICAgICAgICAgICAgICAgIHR5cGU6IEV4cG9ydHNfMS50eXBlLlN0cmVhbSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsO1xufShQdXNoQXVkaW9JbnB1dFN0cmVhbSkpO1xuZXhwb3J0cy5QdXNoQXVkaW9JbnB1dFN0cmVhbUltcGwgPSBQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGw7XG4vKlxuICogUmVwcmVzZW50cyBhdWRpbyBpbnB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQGNsYXNzIFB1bGxBdWRpb0lucHV0U3RyZWFtXG4gKi9cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIFB1bGxBdWRpb0lucHV0U3RyZWFtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQdWxsQXVkaW9JbnB1dFN0cmVhbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbmQgaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHVsbEF1ZGlvSW5wdXRTdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgUHVsbEF1ZGlvSW5wdXRTdHJlYW0gdGhhdCBkZWxlZ2F0ZXMgdG8gdGhlIHNwZWNpZmllZCBjYWxsYmFjayBpbnRlcmZhY2UgZm9yXG4gICAgICogcmVhZCgpIGFuZCBjbG9zZSgpIG1ldGhvZHMsIHVzaW5nIHRoZSBkZWZhdWx0IGZvcm1hdCAoMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAbWVtYmVyIFB1bGxBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1B1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2t9IGNhbGxiYWNrIC0gVGhlIGN1c3RvbSBhdWRpbyBpbnB1dCBvYmplY3QsXG4gICAgICogICAgICAgIGRlcml2ZWQgZnJvbSBQdWxsQXVkaW9JbnB1dFN0cmVhbUN1c3RvbUNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIGRhdGEgZm9ybWF0IGluIHdoaWNoIGF1ZGlvIHdpbGwgYmVcbiAgICAgKiAgICAgICAgcmV0dXJuZWQgZnJvbSB0aGUgY2FsbGJhY2sncyByZWFkKCkgbWV0aG9kIChjdXJyZW50bHkgb25seSBzdXBwb3J0IDE2IGtIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICogQHJldHVybnMge1B1bGxBdWRpb0lucHV0U3RyZWFtfSBUaGUgcHVzaCBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBQdWxsQXVkaW9JbnB1dFN0cmVhbS5jcmVhdGUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gbmV3IFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbChjYWxsYmFjaywgZm9ybWF0KTtcbiAgICB9O1xuICAgIHJldHVybiBQdWxsQXVkaW9JbnB1dFN0cmVhbTtcbn0oQXVkaW9JbnB1dFN0cmVhbSkpO1xuZXhwb3J0cy5QdWxsQXVkaW9JbnB1dFN0cmVhbSA9IFB1bGxBdWRpb0lucHV0U3RyZWFtO1xuLyoqXG4gKiBSZXByZXNlbnRzIGF1ZGlvIGlucHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbFxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgUHVsbEF1ZGlvSW5wdXRTdHJlYW0gdGhhdCBkZWxlZ2F0ZXMgdG8gdGhlIHNwZWNpZmllZCBjYWxsYmFjayBpbnRlcmZhY2UgZm9yXG4gICAgICogcmVhZCgpIGFuZCBjbG9zZSgpIG1ldGhvZHMsIHVzaW5nIHRoZSBkZWZhdWx0IGZvcm1hdCAoMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1B1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2t9IGNhbGxiYWNrIC0gVGhlIGN1c3RvbSBhdWRpbyBpbnB1dCBvYmplY3QsXG4gICAgICogICAgICAgIGRlcml2ZWQgZnJvbSBQdWxsQXVkaW9JbnB1dFN0cmVhbUN1c3RvbUNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIGRhdGEgZm9ybWF0IGluIHdoaWNoIGF1ZGlvIHdpbGwgYmVcbiAgICAgKiAgICAgICAgcmV0dXJuZWQgZnJvbSB0aGUgY2FsbGJhY2sncyByZWFkKCkgbWV0aG9kIChjdXJyZW50bHkgb25seSBzdXBwb3J0IDE2IGtIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsKGNhbGxiYWNrLCBmb3JtYXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMub25FdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMucHJpdkV2ZW50cy5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIEV4cG9ydHNfMi5FdmVudHMuaW5zdGFuY2Uub25FdmVudChldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IGZvcm1hdCkge1xuICAgICAgICAgICAgX3RoaXMucHJpdkZvcm1hdCA9IEV4cG9ydHNfMy5BdWRpb1N0cmVhbUZvcm1hdC5nZXREZWZhdWx0SW5wdXRGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLnByaXZGb3JtYXQgPSBmb3JtYXQ7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMucHJpdkV2ZW50cyA9IG5ldyBFeHBvcnRzXzIuRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgX3RoaXMucHJpdklkID0gR3VpZF8xLmNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgX3RoaXMucHJpdkNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIF90aGlzLnByaXZJc0Nsb3NlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGwucHJvdG90eXBlLCBcImZvcm1hdFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3JtYXQgaW5mb3JtYXRpb24gZm9yIHRoZSBhdWRpb1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Rm9ybWF0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIHN0cmVhbS5cbiAgICAgKiBAbWVtYmVyIFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbC5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wcml2SXNDbG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnByaXZDYWxsYmFjay5jbG9zZSgpO1xuICAgIH07XG4gICAgUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5pZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH07XG4gICAgUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS50dXJuT24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU291cmNlSW5pdGlhbGl6aW5nRXZlbnQodGhpcy5wcml2SWQpKTsgLy8gbm8gc3RyZWFtIGlkXG4gICAgICAgIHRoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU291cmNlUmVhZHlFdmVudCh0aGlzLnByaXZJZCkpO1xuICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh0cnVlKTtcbiAgICB9O1xuICAgIFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbC5wcm90b3R5cGUuYXR0YWNoID0gZnVuY3Rpb24gKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICByZXR1cm4gdGhpcy50dXJuT24oKVxuICAgICAgICAgICAgLm9uU3VjY2Vzc0NvbnRpbnVlV2l0aChmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBfdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudChfdGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRldGFjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcml2Q2FsbGJhY2suY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub25FdmVudChuZXcgRXhwb3J0c18yLkF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQoX3RoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXVkaW9Ob2RlSWQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZWFkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbEJ5dGVzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zbWl0QnVmZjtcbiAgICAgICAgICAgICAgICAgICAgLy8gVW50aWwgd2UgaGF2ZSB0aGUgbWluaW11bSBudW1iZXIgb2YgYnl0ZXMgdG8gc2VuZCBpbiBhIHRyYW5zbWlzc2lvbiwga2VlcCBhc2tpbmcgZm9yIG1vcmUuXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0b3RhbEJ5dGVzIDwgZXhwb3J0cy5idWZmZXJTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaXppbmcgdGhlIHJlYWQgYnVmZmVyIHRvIHRoZSBkZWx0YSBiZXR3ZWVuIHRoZSBwZXJmZWN0IHNpemUgYW5kIHdoYXQncyBsZWZ0IG1lYW5zIHdlIHdvbid0IGV2ZXIgZ2V0IHRvbyBtdWNoXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGJhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZEJ1ZmYgPSBuZXcgQXJyYXlCdWZmZXIoZXhwb3J0cy5idWZmZXJTaXplIC0gdG90YWxCeXRlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHVsbGVkQnl0ZXMgPSBfdGhpcy5wcml2Q2FsbGJhY2sucmVhZChyZWFkQnVmZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyByZXR1cm4gYnVmZmVyIHlldCBkZWZpbmVkLCBzZXQgdGhlIHJldHVybiBidWZmZXIgdG8gdGhlIHRoYXQgd2FzIGp1c3QgcG9wdWxhdGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3YXMsIGlmIHdlIGhhdmUgZW5vdWdoIGRhdGEgdGhlcmUncyBubyBjb3B5IHBlbmFsdHksIGJ1dCBpZiB3ZSBkb24ndCB3ZSBoYXZlIGEgYnVmZmVyIHRoYXQncyB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZWZlcnJlZCBzaXplIGFsbG9jYXRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRyYW5zbWl0QnVmZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbWl0QnVmZiA9IHJlYWRCdWZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IHRoZSBmaXJzdCBiaXRlIGF0IHRoZSBhcHBsZSwgc28gZmlsbCB0aGUgcmV0dXJuIGJ1ZmZlciB3aXRoIHRoZSBkYXRhIHdlIGdvdCBiYWNrLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnRWaWV3ID0gbmV3IEludDhBcnJheSh0cmFuc21pdEJ1ZmYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludFZpZXcuc2V0KG5ldyBJbnQ4QXJyYXkocmVhZEJ1ZmYpLCB0b3RhbEJ5dGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBieXRlcyB0byByZWFkLCBqdXN0IGJyZWFrIG91dCBhbmQgYmUgZG9uZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBwdWxsZWRCeXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxCeXRlcyArPSBwdWxsZWRCeXRlcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHRyYW5zbWl0QnVmZi5zbGljZSgwLCB0b3RhbEJ5dGVzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRW5kOiBfdGhpcy5wcml2SXNDbG9zZWQgfHwgdG90YWxCeXRlcyA9PT0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5kZXRhY2ggPSBmdW5jdGlvbiAoYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBFeHBvcnRzXzIuQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICB9O1xuICAgIFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbC5wcm90b3R5cGUudHVybk9mZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEV4cG9ydHNfMi5Qcm9taXNlSGVscGVyLmZyb21SZXN1bHQoZmFsc2UpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbC5wcm90b3R5cGUsIFwiZXZlbnRzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZSwgXCJkZXZpY2VJbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdCh7XG4gICAgICAgICAgICAgICAgYml0c3BlcnNhbXBsZTogdGhpcy5wcml2Rm9ybWF0LmJpdHNQZXJTYW1wbGUsXG4gICAgICAgICAgICAgICAgY2hhbm5lbGNvdW50OiB0aGlzLnByaXZGb3JtYXQuY2hhbm5lbHMsXG4gICAgICAgICAgICAgICAgY29ubmVjdGl2aXR5OiBFeHBvcnRzXzEuY29ubmVjdGl2aXR5LlVua25vd24sXG4gICAgICAgICAgICAgICAgbWFudWZhY3R1cmVyOiBcIlNwZWVjaCBTREtcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJQdWxsU3RyZWFtXCIsXG4gICAgICAgICAgICAgICAgc2FtcGxlcmF0ZTogdGhpcy5wcml2Rm9ybWF0LnNhbXBsZXNQZXJTZWMsXG4gICAgICAgICAgICAgICAgdHlwZTogRXhwb3J0c18xLnR5cGUuU3RyZWFtLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGw7XG59KFB1bGxBdWRpb0lucHV0U3RyZWFtKSk7XG5leHBvcnRzLlB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbCA9IFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXVkaW9JbnB1dFN0cmVhbS5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogUmVwcmVzZW50cyBhdWRpbyBzdHJlYW0gZm9ybWF0IHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBjbGFzcyBBdWRpb1N0cmVhbUZvcm1hdFxuICovXG52YXIgQXVkaW9TdHJlYW1Gb3JtYXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXVkaW9TdHJlYW1Gb3JtYXQoKSB7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXVkaW8gc3RyZWFtIGZvcm1hdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBkZWZhdWx0IGF1ZGlvIHN0cmVhbVxuICAgICAqIGZvcm1hdCAoMTZLSHogMTZiaXQgbW9ubyBQQ00pLlxuICAgICAqIEBtZW1iZXIgQXVkaW9TdHJlYW1Gb3JtYXQuZ2V0RGVmYXVsdElucHV0Rm9ybWF0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtBdWRpb1N0cmVhbUZvcm1hdH0gVGhlIGF1ZGlvIHN0cmVhbSBmb3JtYXQgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBBdWRpb1N0cmVhbUZvcm1hdC5nZXREZWZhdWx0SW5wdXRGb3JtYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBdWRpb1N0cmVhbUZvcm1hdEltcGwuZ2V0RGVmYXVsdElucHV0Rm9ybWF0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGF1ZGlvIHN0cmVhbSBmb3JtYXQgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBwY20gd2F2ZWZvcm1hdCBjaGFyYWN0ZXJpc3RpY3MuXG4gICAgICogQG1lbWJlciBBdWRpb1N0cmVhbUZvcm1hdC5nZXRXYXZlRm9ybWF0UENNXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzYW1wbGVzUGVyU2Vjb25kIC0gU2FtcGxlIHJhdGUsIGluIHNhbXBsZXMgcGVyIHNlY29uZCAoSGVydHopLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRzUGVyU2FtcGxlIC0gQml0cyBwZXIgc2FtcGxlLCB0eXBpY2FsbHkgMTYuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNoYW5uZWxzIC0gTnVtYmVyIG9mIGNoYW5uZWxzIGluIHRoZSB3YXZlZm9ybS1hdWRpbyBkYXRhLiBNb25hdXJhbCBkYXRhXG4gICAgICogICAgICAgIHVzZXMgb25lIGNoYW5uZWwgYW5kIHN0ZXJlbyBkYXRhIHVzZXMgdHdvIGNoYW5uZWxzLlxuICAgICAqIEByZXR1cm5zIHtBdWRpb1N0cmVhbUZvcm1hdH0gVGhlIGF1ZGlvIHN0cmVhbSBmb3JtYXQgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBBdWRpb1N0cmVhbUZvcm1hdC5nZXRXYXZlRm9ybWF0UENNID0gZnVuY3Rpb24gKHNhbXBsZXNQZXJTZWNvbmQsIGJpdHNQZXJTYW1wbGUsIGNoYW5uZWxzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsKHNhbXBsZXNQZXJTZWNvbmQsIGJpdHNQZXJTYW1wbGUsIGNoYW5uZWxzKTtcbiAgICB9O1xuICAgIHJldHVybiBBdWRpb1N0cmVhbUZvcm1hdDtcbn0oKSk7XG5leHBvcnRzLkF1ZGlvU3RyZWFtRm9ybWF0ID0gQXVkaW9TdHJlYW1Gb3JtYXQ7XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsXG4gKi9cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxudmFyIEF1ZGlvU3RyZWFtRm9ybWF0SW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzYW1wbGVzUGVyU2VjIC0gU2FtcGxlcyBwZXIgc2Vjb25kLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRzUGVyU2FtcGxlIC0gQml0cyBwZXIgc2FtcGxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFubmVscyAtIE51bWJlciBvZiBjaGFubmVscy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBdWRpb1N0cmVhbUZvcm1hdEltcGwoc2FtcGxlc1BlclNlYywgYml0c1BlclNhbXBsZSwgY2hhbm5lbHMpIHtcbiAgICAgICAgaWYgKHNhbXBsZXNQZXJTZWMgPT09IHZvaWQgMCkgeyBzYW1wbGVzUGVyU2VjID0gMTYwMDA7IH1cbiAgICAgICAgaWYgKGJpdHNQZXJTYW1wbGUgPT09IHZvaWQgMCkgeyBiaXRzUGVyU2FtcGxlID0gMTY7IH1cbiAgICAgICAgaWYgKGNoYW5uZWxzID09PSB2b2lkIDApIHsgY2hhbm5lbHMgPSAxOyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmZvcm1hdFRhZyA9IDE7XG4gICAgICAgIF90aGlzLmJpdHNQZXJTYW1wbGUgPSBiaXRzUGVyU2FtcGxlO1xuICAgICAgICBfdGhpcy5zYW1wbGVzUGVyU2VjID0gc2FtcGxlc1BlclNlYztcbiAgICAgICAgX3RoaXMuY2hhbm5lbHMgPSBjaGFubmVscztcbiAgICAgICAgX3RoaXMuYXZnQnl0ZXNQZXJTZWMgPSBfdGhpcy5zYW1wbGVzUGVyU2VjICogX3RoaXMuY2hhbm5lbHMgKiAoX3RoaXMuYml0c1BlclNhbXBsZSAvIDgpO1xuICAgICAgICBfdGhpcy5ibG9ja0FsaWduID0gX3RoaXMuY2hhbm5lbHMgKiBNYXRoLm1heChfdGhpcy5iaXRzUGVyU2FtcGxlLCA4KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGRlZmF1bHQgaW5wdXQgZm9ybWF0LlxuICAgICAqIEBtZW1iZXIgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLmdldERlZmF1bHRJbnB1dEZvcm1hdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7QXVkaW9TdHJlYW1Gb3JtYXRJbXBsfSBUaGUgZGVmYXVsdCBpbnB1dCBmb3JtYXQuXG4gICAgICovXG4gICAgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLmdldERlZmF1bHRJbnB1dEZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb1N0cmVhbUZvcm1hdEltcGwoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAgICogQG1lbWJlciBBdWRpb1N0cmVhbUZvcm1hdEltcGwucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIEF1ZGlvU3RyZWFtRm9ybWF0SW1wbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7IHJldHVybjsgfTtcbiAgICByZXR1cm4gQXVkaW9TdHJlYW1Gb3JtYXRJbXBsO1xufShBdWRpb1N0cmVhbUZvcm1hdCkpO1xuZXhwb3J0cy5BdWRpb1N0cmVhbUZvcm1hdEltcGwgPSBBdWRpb1N0cmVhbUZvcm1hdEltcGw7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1ZGlvU3RyZWFtRm9ybWF0LmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogQW4gYWJzdHJhY3QgYmFzZSBjbGFzcyB0aGF0IGRlZmluZXMgY2FsbGJhY2sgbWV0aG9kcyAocmVhZCgpIGFuZCBjbG9zZSgpKSBmb3JcbiAqIGN1c3RvbSBhdWRpbyBpbnB1dCBzdHJlYW1zKS5cbiAqIEBjbGFzcyBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrXG4gKi9cbnZhciBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2soKSB7XG4gICAgfVxuICAgIHJldHVybiBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrO1xufSgpKTtcbmV4cG9ydHMuUHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFjayA9IFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2s7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2suanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIik7XG52YXIgRXhwb3J0c18yID0gcmVxdWlyZShcIi4vRXhwb3J0c1wiKTtcbi8qKlxuICogQ29udGFpbnMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgd2h5IGEgcmVzdWx0IHdhcyBjYW5jZWxlZC5cbiAqIEBjbGFzcyBDYW5jZWxsYXRpb25EZXRhaWxzXG4gKi9cbnZhciBDYW5jZWxsYXRpb25EZXRhaWxzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtDYW5jZWxsYXRpb25SZWFzb259IHJlYXNvbiAtIFRoZSBjYW5jZWxsYXRpb24gcmVhc29uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckRldGFpbHMgLSBUaGUgZXJyb3IgZGV0YWlscywgaWYgcHJvdmlkZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2FuY2VsbGF0aW9uRGV0YWlscyhyZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlKSB7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQ2FuY2VsbGF0aW9uRGV0YWlscyBvYmplY3QgZm9yIHRoZSBjYW5jZWxlZCBSZWNvZ25pdGlvblJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvbkRldGFpbHMuZnJvbVJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1JlY29nbml0aW9uUmVzdWx0fSByZXN1bHQgLSBUaGUgcmVzdWx0IHRoYXQgd2FzIGNhbmNlbGVkLlxuICAgICAqIEByZXR1cm5zIHtDYW5jZWxsYXRpb25EZXRhaWxzfSBUaGUgY2FuY2VsbGF0aW9uIGRldGFpbHMgb2JqZWN0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRGV0YWlscy5mcm9tUmVzdWx0ID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICB2YXIgcmVhc29uID0gRXhwb3J0c18yLkNhbmNlbGxhdGlvblJlYXNvbi5FcnJvcjtcbiAgICAgICAgdmFyIGVycm9yQ29kZSA9IEV4cG9ydHNfMi5DYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvcjtcbiAgICAgICAgaWYgKCEhcmVzdWx0Lmpzb24pIHtcbiAgICAgICAgICAgIHZhciBzaW1wbGVTcGVlY2ggPSBFeHBvcnRzXzEuU2ltcGxlU3BlZWNoUGhyYXNlLmZyb21KU09OKHJlc3VsdC5qc29uKTtcbiAgICAgICAgICAgIHJlYXNvbiA9IEV4cG9ydHNfMS5FbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdChzaW1wbGVTcGVlY2guUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIXJlc3VsdC5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBlcnJvckNvZGUgPSBFeHBvcnRzXzIuQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW3Jlc3VsdC5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KEV4cG9ydHNfMS5DYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIEV4cG9ydHNfMi5DYW5jZWxsYXRpb25FcnJvckNvZGVbRXhwb3J0c18yLkNhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yXSldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ2FuY2VsbGF0aW9uRGV0YWlscyhyZWFzb24sIHJlc3VsdC5lcnJvckRldGFpbHMsIGVycm9yQ29kZSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FuY2VsbGF0aW9uRGV0YWlscy5wcm90b3R5cGUsIFwicmVhc29uXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZWFzb24gdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC5cbiAgICAgICAgICogQG1lbWJlciBDYW5jZWxsYXRpb25EZXRhaWxzLnByb3RvdHlwZS5yZWFzb25cbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge0NhbmNlbGxhdGlvblJlYXNvbn0gU3BlY2lmaWVzIHRoZSByZWFzb24gY2FuY2VsZWQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW5jZWxsYXRpb25EZXRhaWxzLnByb3RvdHlwZSwgXCJlcnJvckRldGFpbHNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogSW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24sIHByb3ZpZGVzIGRldGFpbHMgb2YgdGhlIG9jY3VycmVkIGVycm9yLlxuICAgICAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvbkRldGFpbHMucHJvdG90eXBlLmVycm9yRGV0YWlsc1xuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGVycm9yIGRldGFpbHMuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW5jZWxsYXRpb25EZXRhaWxzLnByb3RvdHlwZSwgXCJFcnJvckNvZGVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGVycm9yIGNvZGUgaW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24uXG4gICAgICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xLjAuXG4gICAgICAgICAqIEByZXR1cm4gQW4gZXJyb3IgY29kZSB0aGF0IHJlcHJlc2VudHMgdGhlIGVycm9yIHJlYXNvbi5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yQ29kZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIENhbmNlbGxhdGlvbkRldGFpbHM7XG59KCkpO1xuZXhwb3J0cy5DYW5jZWxsYXRpb25EZXRhaWxzID0gQ2FuY2VsbGF0aW9uRGV0YWlscztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2FuY2VsbGF0aW9uRGV0YWlscy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqICBEZWZpbmVzIGVycm9yIGNvZGUgaW4gY2FzZSB0aGF0IENhbmNlbGxhdGlvblJlYXNvbiBpcyBFcnJvci5cbiAqICBBZGRlZCBpbiB2ZXJzaW9uIDEuMS4wLlxuICovXG52YXIgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlO1xuKGZ1bmN0aW9uIChDYW5jZWxsYXRpb25FcnJvckNvZGUpIHtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCBubyBlcnJvciBvY2N1cnJlZCBkdXJpbmcgc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJOb0Vycm9yXCJdID0gMF0gPSBcIk5vRXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgYW4gYXV0aGVudGljYXRpb24gZXJyb3IuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIkF1dGhlbnRpY2F0aW9uRmFpbHVyZVwiXSA9IDFdID0gXCJBdXRoZW50aWNhdGlvbkZhaWx1cmVcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCBvbmUgb3IgbW9yZSByZWNvZ25pdGlvbiBwYXJhbWV0ZXJzIGFyZSBpbnZhbGlkLlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJCYWRSZXF1ZXN0UGFyYW1ldGVyc1wiXSA9IDJdID0gXCJCYWRSZXF1ZXN0UGFyYW1ldGVyc1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBudW1iZXIgb2YgcGFyYWxsZWwgcmVxdWVzdHMgZXhjZWVkZWQgdGhlIG51bWJlciBvZiBhbGxvd2VkXG4gICAgICogY29uY3VycmVudCB0cmFuc2NyaXB0aW9ucyBmb3IgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW1wiVG9vTWFueVJlcXVlc3RzXCJdID0gM10gPSBcIlRvb01hbnlSZXF1ZXN0c1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBhIGNvbm5lY3Rpb24gZXJyb3IuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIkNvbm5lY3Rpb25GYWlsdXJlXCJdID0gNF0gPSBcIkNvbm5lY3Rpb25GYWlsdXJlXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGEgdGltZS1vdXQgZXJyb3Igd2hlbiB3YWl0aW5nIGZvciByZXNwb25zZSBmcm9tIHNlcnZpY2UuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIlNlcnZpY2VUaW1lb3V0XCJdID0gNV0gPSBcIlNlcnZpY2VUaW1lb3V0XCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgYW4gZXJyb3IgaXMgcmV0dXJuZWQgYnkgdGhlIHNlcnZpY2UuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIlNlcnZpY2VFcnJvclwiXSA9IDZdID0gXCJTZXJ2aWNlRXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgYW4gdW5leHBlY3RlZCBydW50aW1lIGVycm9yLlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJSdW50aW1lRXJyb3JcIl0gPSA3XSA9IFwiUnVudGltZUVycm9yXCI7XG59KShDYW5jZWxsYXRpb25FcnJvckNvZGUgPSBleHBvcnRzLkNhbmNlbGxhdGlvbkVycm9yQ29kZSB8fCAoZXhwb3J0cy5DYW5jZWxsYXRpb25FcnJvckNvZGUgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DYW5jZWxsYXRpb25FcnJvckNvZGVzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogRGVmaW5lcyB0aGUgcG9zc2libGUgcmVhc29ucyBhIHJlY29nbml0aW9uIHJlc3VsdCBtaWdodCBiZSBjYW5jZWxlZC5cbiAqIEBjbGFzcyBDYW5jZWxsYXRpb25SZWFzb25cbiAqL1xudmFyIENhbmNlbGxhdGlvblJlYXNvbjtcbihmdW5jdGlvbiAoQ2FuY2VsbGF0aW9uUmVhc29uKSB7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgYW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvclxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvblJlYXNvbltDYW5jZWxsYXRpb25SZWFzb25bXCJFcnJvclwiXSA9IDBdID0gXCJFcnJvclwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBlbmQgb2YgdGhlIGF1ZGlvIHN0cmVhbSB3YXMgcmVhY2hlZC5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvblJlYXNvbi5FbmRPZlN0cmVhbVxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvblJlYXNvbltDYW5jZWxsYXRpb25SZWFzb25bXCJFbmRPZlN0cmVhbVwiXSA9IDFdID0gXCJFbmRPZlN0cmVhbVwiO1xufSkoQ2FuY2VsbGF0aW9uUmVhc29uID0gZXhwb3J0cy5DYW5jZWxsYXRpb25SZWFzb24gfHwgKGV4cG9ydHMuQ2FuY2VsbGF0aW9uUmVhc29uID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2FuY2VsbGF0aW9uUmVhc29uLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vL1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuIFNlZSBMSUNFTlNFLm1kIGZpbGUgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgZnVsbCBsaWNlbnNlIGluZm9ybWF0aW9uLlxuLy9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi9FeHBvcnRzXCIpO1xuLyoqXG4gKiBDb25uZWN0aW9uIGlzIGEgcHJveHkgY2xhc3MgZm9yIG1hbmFnaW5nIGNvbm5lY3Rpb24gdG8gdGhlIHNwZWVjaCBzZXJ2aWNlIG9mIHRoZSBzcGVjaWZpZWQgUmVjb2duaXplci5cbiAqIEJ5IGRlZmF1bHQsIGEgUmVjb2duaXplciBhdXRvbm9tb3VzbHkgbWFuYWdlcyBjb25uZWN0aW9uIHRvIHNlcnZpY2Ugd2hlbiBuZWVkZWQuXG4gKiBUaGUgQ29ubmVjdGlvbiBjbGFzcyBwcm92aWRlcyBhZGRpdGlvbmFsIG1ldGhvZHMgZm9yIHVzZXJzIHRvIGV4cGxpY2l0bHkgb3BlbiBvciBjbG9zZSBhIGNvbm5lY3Rpb24gYW5kXG4gKiB0byBzdWJzY3JpYmUgdG8gY29ubmVjdGlvbiBzdGF0dXMgY2hhbmdlcy5cbiAqIFRoZSB1c2Ugb2YgQ29ubmVjdGlvbiBpcyBvcHRpb25hbCwgYW5kIG1haW5seSBmb3Igc2NlbmFyaW9zIHdoZXJlIGZpbmUgdHVuaW5nIG9mIGFwcGxpY2F0aW9uXG4gKiBiZWhhdmlvciBiYXNlZCBvbiBjb25uZWN0aW9uIHN0YXR1cyBpcyBuZWVkZWQuIFVzZXJzIGNhbiBvcHRpb25hbGx5IGNhbGwgT3BlbigpIHRvIG1hbnVhbGx5IHNldCB1cCBhIGNvbm5lY3Rpb25cbiAqIGluIGFkdmFuY2UgYmVmb3JlIHN0YXJ0aW5nIHJlY29nbml0aW9uIG9uIHRoZSBSZWNvZ25pemVyIGFzc29jaWF0ZWQgd2l0aCB0aGlzIENvbm5lY3Rpb24uXG4gKiBJZiB0aGUgUmVjb2duaXplciBuZWVkcyB0byBjb25uZWN0IG9yIGRpc2Nvbm5lY3QgdG8gc2VydmljZSwgaXQgd2lsbFxuICogc2V0dXAgb3Igc2h1dGRvd24gdGhlIGNvbm5lY3Rpb24gaW5kZXBlbmRlbnRseS4gSW4gdGhpcyBjYXNlIHRoZSBDb25uZWN0aW9uIHdpbGwgYmUgbm90aWZpZWQgYnkgY2hhbmdlIG9mIGNvbm5lY3Rpb25cbiAqIHN0YXR1cyB2aWEgQ29ubmVjdGVkL0Rpc2Nvbm5lY3RlZCBldmVudHMuXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMi4wLlxuICovXG52YXIgQ29ubmVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb25uZWN0aW9uKCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBDb25uZWN0aW9uIGluc3RhbmNlIGZyb20gdGhlIHNwZWNpZmllZCByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSByZWNvZ25pemVyIFRoZSByZWNvZ25pemVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgY29ubmVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIFRoZSBDb25uZWN0aW9uIGluc3RhbmNlIG9mIHRoZSByZWNvZ25pemVyLlxuICAgICAqL1xuICAgIENvbm5lY3Rpb24uZnJvbVJlY29nbml6ZXIgPSBmdW5jdGlvbiAocmVjb2duaXplcikge1xuICAgICAgICB2YXIgcmVjb0Jhc2UgPSByZWNvZ25pemVyLmludGVybmFsRGF0YTtcbiAgICAgICAgdmFyIHJldCA9IG5ldyBDb25uZWN0aW9uKCk7XG4gICAgICAgIHJldC5wcml2U2VydmljZVJlY29nbml6ZXIgPSByZWNvQmFzZTtcbiAgICAgICAgcmV0LnByaXZFdmVudExpc3RlbmVyID0gcmV0LnByaXZTZXJ2aWNlUmVjb2duaXplci5jb25uZWN0aW9uRXZlbnRzLmF0dGFjaChmdW5jdGlvbiAoY29ubmVjdGlvbkV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbkV2ZW50Lm5hbWUgPT09IFwiQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghIXJldC5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LmNvbm5lY3RlZChuZXcgRXhwb3J0c18xLkNvbm5lY3Rpb25FdmVudEFyZ3MoY29ubmVjdGlvbkV2ZW50LmNvbm5lY3Rpb25JZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbm5lY3Rpb25FdmVudC5uYW1lID09PSBcIkNvbm5lY3Rpb25DbG9zZWRFdmVudFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhcmV0LmRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXQuZGlzY29ubmVjdGVkKG5ldyBFeHBvcnRzXzEuQ29ubmVjdGlvbkV2ZW50QXJncyhjb25uZWN0aW9uRXZlbnQuY29ubmVjdGlvbklkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0byBzZXQgdXAgY29ubmVjdGlvbiB0byB0aGUgc2VydmljZS5cbiAgICAgKiBVc2VycyBjYW4gb3B0aW9uYWxseSBjYWxsIG9wZW5Db25uZWN0aW9uKCkgdG8gbWFudWFsbHkgc2V0IHVwIGEgY29ubmVjdGlvbiBpbiBhZHZhbmNlIGJlZm9yZSBzdGFydGluZyByZWNvZ25pdGlvbiBvbiB0aGVcbiAgICAgKiBSZWNvZ25pemVyIGFzc29jaWF0ZWQgd2l0aCB0aGlzIENvbm5lY3Rpb24uIEFmdGVyIHN0YXJ0aW5nIHJlY29nbml0aW9uLCBjYWxsaW5nIE9wZW4oKSB3aWxsIGhhdmUgbm8gZWZmZWN0XG4gICAgICpcbiAgICAgKiBOb3RlOiBPbiByZXR1cm4sIHRoZSBjb25uZWN0aW9uIG1pZ2h0IG5vdCBiZSByZWFkeSB5ZXQuIFBsZWFzZSBzdWJzY3JpYmUgdG8gdGhlIENvbm5lY3RlZCBldmVudCB0b1xuICAgICAqIGJlIG5vdGZpZWQgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZC5cbiAgICAgKi9cbiAgICBDb25uZWN0aW9uLnByb3RvdHlwZS5vcGVuQ29ubmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wcml2U2VydmljZVJlY29nbml6ZXIuY29ubmVjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBjb25uZWN0aW9uIHRoZSBzZXJ2aWNlLlxuICAgICAqIFVzZXJzIGNhbiBvcHRpb25hbGx5IGNhbGwgY2xvc2VDb25uZWN0aW9uKCkgdG8gbWFudWFsbHkgc2h1dGRvd24gdGhlIGNvbm5lY3Rpb24gb2YgdGhlIGFzc29jaWF0ZWQgUmVjb2duaXplci5cbiAgICAgKlxuICAgICAqIElmIGNsb3NlQ29ubmVjdGlvbigpIGlzIGNhbGxlZCBkdXJpbmcgcmVjb2duaXRpb24sIHJlY29nbml0aW9uIHdpbGwgZmFpbCBhbmQgY2FuY2VsIHd0aWggYW4gZXJyb3IuXG4gICAgICovXG4gICAgQ29ubmVjdGlvbi5wcm90b3R5cGUuY2xvc2VDb25uZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnByaXZTZXJ2aWNlUmVjb2duaXplci5kaXNjb25uZWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIG9mIGFzc29jaWF0ZWQgcmVzb3VyY2VzLlxuICAgICAqL1xuICAgIENvbm5lY3Rpb24ucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuICAgIH07XG4gICAgcmV0dXJuIENvbm5lY3Rpb247XG59KCkpO1xuZXhwb3J0cy5Db25uZWN0aW9uID0gQ29ubmVjdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ubmVjdGlvbi5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy9cbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBmaWxlIGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGZ1bGwgbGljZW5zZSBpbmZvcm1hdGlvbi5cbi8vXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi9FeHBvcnRzXCIpO1xuLyoqXG4gKiBEZWZpbmVzIHBheWxvYWQgZm9yIGNvbm5lY3Rpb24gZXZlbnRzIGxpa2UgQ29ubmVjdGVkL0Rpc2Nvbm5lY3RlZC5cbiAqIEFkZGVkIGluIHZlcnNpb24gMS4yLjBcbiAqL1xudmFyIENvbm5lY3Rpb25FdmVudEFyZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbm5lY3Rpb25FdmVudEFyZ3MsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29ubmVjdGlvbkV2ZW50QXJncygpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQ29ubmVjdGlvbkV2ZW50QXJncztcbn0oRXhwb3J0c18xLlNlc3Npb25FdmVudEFyZ3MpKTtcbmV4cG9ydHMuQ29ubmVjdGlvbkV2ZW50QXJncyA9IENvbm5lY3Rpb25FdmVudEFyZ3M7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb25FdmVudEFyZ3MuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyoqXG4gKiBAY2xhc3MgQ29udHJhY3RzXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgQ29udHJhY3RzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbnRyYWN0cygpIHtcbiAgICB9XG4gICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQgPSBmdW5jdGlvbiAocGFyYW0sIG5hbWUpIHtcbiAgICAgICAgaWYgKHBhcmFtID09PSB1bmRlZmluZWQgfHwgcGFyYW0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRocm93SWZOdWxsT3JVbmRlZmluZWQ6XCIgKyBuYW1lKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29udHJhY3RzLnRocm93SWZOdWxsID0gZnVuY3Rpb24gKHBhcmFtLCBuYW1lKSB7XG4gICAgICAgIGlmIChwYXJhbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhyb3dJZk51bGw6XCIgKyBuYW1lKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlID0gZnVuY3Rpb24gKHBhcmFtLCBuYW1lKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHBhcmFtLCBuYW1lKTtcbiAgICAgICAgaWYgKChcIlwiICsgcGFyYW0pLnRyaW0oKS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aHJvd0lmTnVsbE9yV2hpdGVzcGFjZTpcIiArIG5hbWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkID0gZnVuY3Rpb24gKGlzRGlzcG9zZWQpIHtcbiAgICAgICAgaWYgKGlzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRoZSBvYmplY3QgaXMgYWxyZWFkeSBkaXNwb3NlZFwiKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29udHJhY3RzLnRocm93SWZBcnJheUVtcHR5T3JXaGl0ZXNwYWNlID0gZnVuY3Rpb24gKGFycmF5LCBuYW1lKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGFycmF5LCBuYW1lKTtcbiAgICAgICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhyb3dJZkFycmF5RW1wdHlPcldoaXRlc3BhY2U6XCIgKyBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFycmF5XzEgPSBhcnJheTsgX2kgPCBhcnJheV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBhcnJheV8xW19pXTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShpdGVtLCBuYW1lKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29udHJhY3RzLnRocm93SWZGaWxlRG9lc05vdEV4aXN0ID0gZnVuY3Rpb24gKHBhcmFtLCBuYW1lKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShwYXJhbSwgbmFtZSk7XG4gICAgICAgIC8vIFRPRE8gY2hlY2sgZm9yIGZpbGUgZXhpc3RlbmNlLlxuICAgIH07XG4gICAgcmV0dXJuIENvbnRyYWN0cztcbn0oKSk7XG5leHBvcnRzLkNvbnRyYWN0cyA9IENvbnRyYWN0cztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udHJhY3RzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBBdWRpb0NvbmZpZ18xID0gcmVxdWlyZShcIi4vQXVkaW8vQXVkaW9Db25maWdcIik7XG5leHBvcnRzLkF1ZGlvQ29uZmlnID0gQXVkaW9Db25maWdfMS5BdWRpb0NvbmZpZztcbnZhciBBdWRpb1N0cmVhbUZvcm1hdF8xID0gcmVxdWlyZShcIi4vQXVkaW8vQXVkaW9TdHJlYW1Gb3JtYXRcIik7XG5leHBvcnRzLkF1ZGlvU3RyZWFtRm9ybWF0ID0gQXVkaW9TdHJlYW1Gb3JtYXRfMS5BdWRpb1N0cmVhbUZvcm1hdDtcbnZhciBBdWRpb0lucHV0U3RyZWFtXzEgPSByZXF1aXJlKFwiLi9BdWRpby9BdWRpb0lucHV0U3RyZWFtXCIpO1xuZXhwb3J0cy5BdWRpb0lucHV0U3RyZWFtID0gQXVkaW9JbnB1dFN0cmVhbV8xLkF1ZGlvSW5wdXRTdHJlYW07XG5leHBvcnRzLlB1bGxBdWRpb0lucHV0U3RyZWFtID0gQXVkaW9JbnB1dFN0cmVhbV8xLlB1bGxBdWRpb0lucHV0U3RyZWFtO1xuZXhwb3J0cy5QdXNoQXVkaW9JbnB1dFN0cmVhbSA9IEF1ZGlvSW5wdXRTdHJlYW1fMS5QdXNoQXVkaW9JbnB1dFN0cmVhbTtcbnZhciBDYW5jZWxsYXRpb25SZWFzb25fMSA9IHJlcXVpcmUoXCIuL0NhbmNlbGxhdGlvblJlYXNvblwiKTtcbmV4cG9ydHMuQ2FuY2VsbGF0aW9uUmVhc29uID0gQ2FuY2VsbGF0aW9uUmVhc29uXzEuQ2FuY2VsbGF0aW9uUmVhc29uO1xudmFyIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2tfMSA9IHJlcXVpcmUoXCIuL0F1ZGlvL1B1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2tcIik7XG5leHBvcnRzLlB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2sgPSBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrXzEuUHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFjaztcbnZhciBLZXl3b3JkUmVjb2duaXRpb25Nb2RlbF8xID0gcmVxdWlyZShcIi4vS2V5d29yZFJlY29nbml0aW9uTW9kZWxcIik7XG5leHBvcnRzLktleXdvcmRSZWNvZ25pdGlvbk1vZGVsID0gS2V5d29yZFJlY29nbml0aW9uTW9kZWxfMS5LZXl3b3JkUmVjb2duaXRpb25Nb2RlbDtcbnZhciBTZXNzaW9uRXZlbnRBcmdzXzEgPSByZXF1aXJlKFwiLi9TZXNzaW9uRXZlbnRBcmdzXCIpO1xuZXhwb3J0cy5TZXNzaW9uRXZlbnRBcmdzID0gU2Vzc2lvbkV2ZW50QXJnc18xLlNlc3Npb25FdmVudEFyZ3M7XG52YXIgUmVjb2duaXRpb25FdmVudEFyZ3NfMSA9IHJlcXVpcmUoXCIuL1JlY29nbml0aW9uRXZlbnRBcmdzXCIpO1xuZXhwb3J0cy5SZWNvZ25pdGlvbkV2ZW50QXJncyA9IFJlY29nbml0aW9uRXZlbnRBcmdzXzEuUmVjb2duaXRpb25FdmVudEFyZ3M7XG52YXIgT3V0cHV0Rm9ybWF0XzEgPSByZXF1aXJlKFwiLi9PdXRwdXRGb3JtYXRcIik7XG5leHBvcnRzLk91dHB1dEZvcm1hdCA9IE91dHB1dEZvcm1hdF8xLk91dHB1dEZvcm1hdDtcbnZhciBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJnc18xID0gcmVxdWlyZShcIi4vSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3NcIik7XG5leHBvcnRzLkludGVudFJlY29nbml0aW9uRXZlbnRBcmdzID0gSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3NfMS5JbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncztcbnZhciBSZWNvZ25pdGlvblJlc3VsdF8xID0gcmVxdWlyZShcIi4vUmVjb2duaXRpb25SZXN1bHRcIik7XG5leHBvcnRzLlJlY29nbml0aW9uUmVzdWx0ID0gUmVjb2duaXRpb25SZXN1bHRfMS5SZWNvZ25pdGlvblJlc3VsdDtcbnZhciBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdF8xID0gcmVxdWlyZShcIi4vU3BlZWNoUmVjb2duaXRpb25SZXN1bHRcIik7XG5leHBvcnRzLlNwZWVjaFJlY29nbml0aW9uUmVzdWx0ID0gU3BlZWNoUmVjb2duaXRpb25SZXN1bHRfMS5TcGVlY2hSZWNvZ25pdGlvblJlc3VsdDtcbnZhciBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdF8xID0gcmVxdWlyZShcIi4vSW50ZW50UmVjb2duaXRpb25SZXN1bHRcIik7XG5leHBvcnRzLkludGVudFJlY29nbml0aW9uUmVzdWx0ID0gSW50ZW50UmVjb2duaXRpb25SZXN1bHRfMS5JbnRlbnRSZWNvZ25pdGlvblJlc3VsdDtcbnZhciBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbF8xID0gcmVxdWlyZShcIi4vTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxcIik7XG5leHBvcnRzLkxhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsID0gTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxfMS5MYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbDtcbnZhciBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJnc18xID0gcmVxdWlyZShcIi4vU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3NcIik7XG5leHBvcnRzLlNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzID0gU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3NfMS5TcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncztcbnZhciBTcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzXzEgPSByZXF1aXJlKFwiLi9TcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzXCIpO1xuZXhwb3J0cy5TcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzID0gU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJnc18xLlNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3M7XG52YXIgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJnc18xID0gcmVxdWlyZShcIi4vVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJnc1wiKTtcbmV4cG9ydHMuVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyA9IFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3NfMS5UcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzO1xudmFyIFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzXzEgPSByZXF1aXJlKFwiLi9UcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJnc1wiKTtcbmV4cG9ydHMuVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MgPSBUcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJnc18xLlRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzO1xudmFyIFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHRfMSA9IHJlcXVpcmUoXCIuL1RyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHRcIik7XG5leHBvcnRzLlRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQgPSBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0XzEuVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdDtcbnZhciBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdF8xID0gcmVxdWlyZShcIi4vVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHRcIik7XG5leHBvcnRzLlRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0ID0gVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHRfMS5UcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdDtcbnZhciBSZXN1bHRSZWFzb25fMSA9IHJlcXVpcmUoXCIuL1Jlc3VsdFJlYXNvblwiKTtcbmV4cG9ydHMuUmVzdWx0UmVhc29uID0gUmVzdWx0UmVhc29uXzEuUmVzdWx0UmVhc29uO1xudmFyIFNwZWVjaENvbmZpZ18xID0gcmVxdWlyZShcIi4vU3BlZWNoQ29uZmlnXCIpO1xuZXhwb3J0cy5TcGVlY2hDb25maWcgPSBTcGVlY2hDb25maWdfMS5TcGVlY2hDb25maWc7XG52YXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdfMSA9IHJlcXVpcmUoXCIuL1NwZWVjaFRyYW5zbGF0aW9uQ29uZmlnXCIpO1xuZXhwb3J0cy5TcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyA9IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnXzEuU3BlZWNoVHJhbnNsYXRpb25Db25maWc7XG52YXIgUHJvcGVydHlDb2xsZWN0aW9uXzEgPSByZXF1aXJlKFwiLi9Qcm9wZXJ0eUNvbGxlY3Rpb25cIik7XG5leHBvcnRzLlByb3BlcnR5Q29sbGVjdGlvbiA9IFByb3BlcnR5Q29sbGVjdGlvbl8xLlByb3BlcnR5Q29sbGVjdGlvbjtcbnZhciBQcm9wZXJ0eUlkXzEgPSByZXF1aXJlKFwiLi9Qcm9wZXJ0eUlkXCIpO1xuZXhwb3J0cy5Qcm9wZXJ0eUlkID0gUHJvcGVydHlJZF8xLlByb3BlcnR5SWQ7XG52YXIgUmVjb2duaXplcl8xID0gcmVxdWlyZShcIi4vUmVjb2duaXplclwiKTtcbmV4cG9ydHMuUmVjb2duaXplciA9IFJlY29nbml6ZXJfMS5SZWNvZ25pemVyO1xudmFyIFNwZWVjaFJlY29nbml6ZXJfMSA9IHJlcXVpcmUoXCIuL1NwZWVjaFJlY29nbml6ZXJcIik7XG5leHBvcnRzLlNwZWVjaFJlY29nbml6ZXIgPSBTcGVlY2hSZWNvZ25pemVyXzEuU3BlZWNoUmVjb2duaXplcjtcbnZhciBJbnRlbnRSZWNvZ25pemVyXzEgPSByZXF1aXJlKFwiLi9JbnRlbnRSZWNvZ25pemVyXCIpO1xuZXhwb3J0cy5JbnRlbnRSZWNvZ25pemVyID0gSW50ZW50UmVjb2duaXplcl8xLkludGVudFJlY29nbml6ZXI7XG52YXIgVHJhbnNsYXRpb25SZWNvZ25pemVyXzEgPSByZXF1aXJlKFwiLi9UcmFuc2xhdGlvblJlY29nbml6ZXJcIik7XG5leHBvcnRzLlRyYW5zbGF0aW9uUmVjb2duaXplciA9IFRyYW5zbGF0aW9uUmVjb2duaXplcl8xLlRyYW5zbGF0aW9uUmVjb2duaXplcjtcbnZhciBUcmFuc2xhdGlvbnNfMSA9IHJlcXVpcmUoXCIuL1RyYW5zbGF0aW9uc1wiKTtcbmV4cG9ydHMuVHJhbnNsYXRpb25zID0gVHJhbnNsYXRpb25zXzEuVHJhbnNsYXRpb25zO1xudmFyIE5vTWF0Y2hSZWFzb25fMSA9IHJlcXVpcmUoXCIuL05vTWF0Y2hSZWFzb25cIik7XG5leHBvcnRzLk5vTWF0Y2hSZWFzb24gPSBOb01hdGNoUmVhc29uXzEuTm9NYXRjaFJlYXNvbjtcbnZhciBOb01hdGNoRGV0YWlsc18xID0gcmVxdWlyZShcIi4vTm9NYXRjaERldGFpbHNcIik7XG5leHBvcnRzLk5vTWF0Y2hEZXRhaWxzID0gTm9NYXRjaERldGFpbHNfMS5Ob01hdGNoRGV0YWlscztcbnZhciBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NfMSA9IHJlcXVpcmUoXCIuL1RyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJnc1wiKTtcbmV4cG9ydHMuVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzID0gVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzXzEuVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzO1xudmFyIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NfMSA9IHJlcXVpcmUoXCIuL0ludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcIik7XG5leHBvcnRzLkludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgPSBJbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzXzEuSW50ZW50UmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncztcbnZhciBDYW5jZWxsYXRpb25EZXRhaWxzXzEgPSByZXF1aXJlKFwiLi9DYW5jZWxsYXRpb25EZXRhaWxzXCIpO1xuZXhwb3J0cy5DYW5jZWxsYXRpb25EZXRhaWxzID0gQ2FuY2VsbGF0aW9uRGV0YWlsc18xLkNhbmNlbGxhdGlvbkRldGFpbHM7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3JDb2Rlc18xID0gcmVxdWlyZShcIi4vQ2FuY2VsbGF0aW9uRXJyb3JDb2Rlc1wiKTtcbmV4cG9ydHMuQ2FuY2VsbGF0aW9uRXJyb3JDb2RlID0gQ2FuY2VsbGF0aW9uRXJyb3JDb2Rlc18xLkNhbmNlbGxhdGlvbkVycm9yQ29kZTtcbnZhciBDb25uZWN0aW9uRXZlbnRBcmdzXzEgPSByZXF1aXJlKFwiLi9Db25uZWN0aW9uRXZlbnRBcmdzXCIpO1xuZXhwb3J0cy5Db25uZWN0aW9uRXZlbnRBcmdzID0gQ29ubmVjdGlvbkV2ZW50QXJnc18xLkNvbm5lY3Rpb25FdmVudEFyZ3M7XG52YXIgQ29ubmVjdGlvbl8xID0gcmVxdWlyZShcIi4vQ29ubmVjdGlvblwiKTtcbmV4cG9ydHMuQ29ubmVjdGlvbiA9IENvbm5lY3Rpb25fMS5Db25uZWN0aW9uO1xudmFyIFBocmFzZUxpc3RHcmFtbWFyXzEgPSByZXF1aXJlKFwiLi9QaHJhc2VMaXN0R3JhbW1hclwiKTtcbmV4cG9ydHMuUGhyYXNlTGlzdEdyYW1tYXIgPSBQaHJhc2VMaXN0R3JhbW1hcl8xLlBocmFzZUxpc3RHcmFtbWFyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FeHBvcnRzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vKipcbiAqIERlZmluZSBwYXlsb2FkIG9mIGludGVudCByZWNvZ25pdGlvbiBjYW5jZWxlZCByZXN1bHQgZXZlbnRzLlxuICogQGNsYXNzIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcbiAqL1xudmFyIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gcmVzdWx0IC0gVGhlIHJlc3VsdCBvZiB0aGUgaW50ZW50IHJlY29nbml0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7SW50ZW50UmVjb2duaXRpb25SZXN1bHR9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MocmVhc29uLCBlcnJvckRldGFpbHMsIGVycm9yQ29kZSwgcmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCByZXN1bHQsIG9mZnNldCwgc2Vzc2lvbklkKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2UmVhc29uID0gcmVhc29uO1xuICAgICAgICBfdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICBfdGhpcy5wcml2RXJyb3JDb2RlID0gZXJyb3JDb2RlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZSwgXCJyZWFzb25cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHJlYXNvbiB0aGUgcmVjb2duaXRpb24gd2FzIGNhbmNlbGVkLlxuICAgICAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLnJlYXNvblxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7Q2FuY2VsbGF0aW9uUmVhc29ufSBTcGVjaWZpZXMgdGhlIHJlYXNvbiBjYW5jZWxlZC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYXNvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLCBcImVycm9yQ29kZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXJyb3IgY29kZSBpbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbi5cbiAgICAgICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjEuMC5cbiAgICAgICAgICogQHJldHVybiBBbiBlcnJvciBjb2RlIHRoYXQgcmVwcmVzZW50cyB0aGUgZXJyb3IgcmVhc29uLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JDb2RlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW50ZW50UmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5wcm90b3R5cGUsIFwiZXJyb3JEZXRhaWxzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHJlY29nbml0aW9uLCBwcm92aWRlcyBkZXRhaWxzIG9mIHRoZSBvY2N1cnJlZCBlcnJvci5cbiAgICAgICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5lcnJvckRldGFpbHNcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciBkZXRhaWxzLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JEZXRhaWxzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gSW50ZW50UmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncztcbn0oRXhwb3J0c18xLkludGVudFJlY29nbml0aW9uRXZlbnRBcmdzKSk7XG5leHBvcnRzLkludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgPSBJbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vKipcbiAqIEludGVudCByZWNvZ25pdGlvbiByZXN1bHQgZXZlbnQgYXJndW1lbnRzLlxuICogQGNsYXNzXG4gKi9cbnZhciBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gcmVzdWx0IC0gVGhlIHJlc3VsdCBvZiB0aGUgaW50ZW50IHJlY29nbml0aW9uLlxuICAgICAqIEBwYXJhbSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSBzZXNzaW9uSWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIG9mZnNldCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9mZnNldCwgc2Vzc2lvbklkKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2UmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncy5wcm90b3R5cGUsIFwicmVzdWx0XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgdGhlIGludGVudCByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MucHJvdG90eXBlLnJlc3VsdFxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7SW50ZW50UmVjb2duaXRpb25SZXN1bHR9IFJlcHJlc2VudHMgdGhlIGludGVudCByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncztcbn0oRXhwb3J0c18xLlJlY29nbml0aW9uRXZlbnRBcmdzKSk7XG5leHBvcnRzLkludGVudFJlY29nbml0aW9uRXZlbnRBcmdzID0gSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3M7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVudFJlY29nbml0aW9uRXZlbnRBcmdzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vKipcbiAqIEludGVudCByZWNvZ25pdGlvbiByZXN1bHQuXG4gKiBAY2xhc3NcbiAqL1xudmFyIEludGVudFJlY29nbml0aW9uUmVzdWx0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSBpbnRlbnRJZCAtIFRoZSBpbnRlbnQgaWQuXG4gICAgICogQHBhcmFtIHJlc3VsdElkIC0gVGhlIHJlc3VsdCBpZC5cbiAgICAgKiBAcGFyYW0gcmVhc29uIC0gVGhlIHJlYXNvbi5cbiAgICAgKiBAcGFyYW0gdGV4dCAtIFRoZSByZWNvZ25pemVkIHRleHQuXG4gICAgICogQHBhcmFtIGR1cmF0aW9uIC0gVGhlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSBvZmZzZXQgLSBUaGUgb2Zmc2V0IGludG8gdGhlIHN0cmVhbS5cbiAgICAgKiBAcGFyYW0gZXJyb3JEZXRhaWxzIC0gRXJyb3IgZGV0YWlscywgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIGpzb24gLSBBZGRpdGlvbmFsIEpzb24sIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gQWRkaXRpb25hbCBwcm9wZXJ0aWVzLCBpZiBwcm92aWRlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdChpbnRlbnRJZCwgcmVzdWx0SWQsIHJlYXNvbiwgdGV4dCwgZHVyYXRpb24sIG9mZnNldCwgZXJyb3JEZXRhaWxzLCBqc29uLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHJlc3VsdElkLCByZWFzb24sIHRleHQsIGR1cmF0aW9uLCBvZmZzZXQsIGVycm9yRGV0YWlscywganNvbiwgcHJvcGVydGllcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJpdkludGVudElkID0gaW50ZW50SWQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEludGVudFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZSwgXCJpbnRlbnRJZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGludGVudCBpZGVudGlmaWVyIGJlaW5nIHJlY29nbml6ZWQuXG4gICAgICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLmludGVudElkXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgaW50ZW50IGlkZW50aWZpZXIgYmVpbmcgcmVjb2duaXplZC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkludGVudElkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gSW50ZW50UmVjb2duaXRpb25SZXN1bHQ7XG59KEV4cG9ydHNfMS5TcGVlY2hSZWNvZ25pdGlvblJlc3VsdCkpO1xuZXhwb3J0cy5JbnRlbnRSZWNvZ25pdGlvblJlc3VsdCA9IEludGVudFJlY29nbml0aW9uUmVzdWx0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZWNvZ25pdGlvblJlc3VsdC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCIpO1xudmFyIENvbnRyYWN0c18xID0gcmVxdWlyZShcIi4vQ29udHJhY3RzXCIpO1xudmFyIEV4cG9ydHNfMiA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vKipcbiAqIEludGVudCByZWNvZ25pemVyLlxuICogQGNsYXNzXG4gKi9cbnZhciBJbnRlbnRSZWNvZ25pemVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbnRlbnRSZWNvZ25pemVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBJbnRlbnRSZWNvZ25pemVyLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoQ29uZmlnfSBzcGVlY2hDb25maWcgLSBUaGUgc2V0IG9mIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcy5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGlucHV0IGNvbmZpZyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbnRlbnRSZWNvZ25pemVyKHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoc3BlZWNoQ29uZmlnLCBcInNwZWVjaENvbmZpZ1wiKTtcbiAgICAgICAgdmFyIGNvbmZpZ0ltcGwgPSBzcGVlY2hDb25maWc7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGNvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGF1ZGlvQ29uZmlnLCBjb25maWdJbXBsLnByb3BlcnRpZXMsIG5ldyBFeHBvcnRzXzEuSW50ZW50Q29ubmVjdGlvbkZhY3RvcnkoKSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJpdkFkZGVkSW50ZW50cyA9IFtdO1xuICAgICAgICBfdGhpcy5wcml2QWRkZWRMbUludGVudHMgPSB7fTtcbiAgICAgICAgX3RoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplciA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5wcml2UHJvcGVydGllcyA9IGNvbmZpZ0ltcGwucHJvcGVydGllcztcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKF90aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKSwgRXhwb3J0c18yLlByb3BlcnR5SWRbRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLCBcInNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgc3Bva2VuIGxhbmd1YWdlIG9mIHJlY29nbml0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHNwb2tlbiBsYW5ndWFnZSBvZiByZWNvZ25pdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUsIFwiYXV0aG9yaXphdGlvblRva2VuXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMvU2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICAgICAqIE5vdGU6IFBsZWFzZSB1c2UgYSB0b2tlbiBkZXJpdmVkIGZyb20geW91ciBMYW5ndWFnZVVuZGVyc3RhbmRpbmcgc3Vic2NyaXB0aW9uIGtleSBmb3IgdGhlIEludGVudCByZWNvZ25pemVyLlxuICAgICAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUsIFwicHJvcGVydGllc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBJbnRlbnRSZWNvZ25pemVyLlxuICAgICAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge1Byb3BlcnR5Q29sbGVjdGlvbn0gVGhlIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXJcbiAgICAgICAgICogICAgICAgICAgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgSW50ZW50UmVjb2duaXplci5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBpbnRlbnQgcmVjb2duaXRpb24sIGFuZCBzdG9wcyBhZnRlciB0aGUgZmlyc3QgdXR0ZXJhbmNlIGlzIHJlY29nbml6ZWQuXG4gICAgICogVGhlIHRhc2sgcmV0dXJucyB0aGUgcmVjb2duaXRpb24gdGV4dCBhbmQgaW50ZW50IGFzIHJlc3VsdC5cbiAgICAgKiBOb3RlOiBSZWNvZ25pemVPbmNlQXN5bmMoKSByZXR1cm5zIHdoZW4gdGhlIGZpcnN0IHV0dGVyYW5jZSBoYXMgYmVlbiByZWNvZ25pemVkLFxuICAgICAqICAgICAgIHNvIGl0IGlzIHN1aXRhYmxlIG9ubHkgZm9yIHNpbmdsZSBzaG90IHJlY29nbml0aW9uIGxpa2UgY29tbWFuZCBvciBxdWVyeS5cbiAgICAgKiAgICAgICBGb3IgbG9uZy1ydW5uaW5nIHJlY29nbml0aW9uLCB1c2UgU3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpIGluc3RlYWQuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5yZWNvZ25pemVPbmNlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgcmVjb2duaXRpb24gaGFzIGZpbmlzaGVkIHdpdGggYW4gSW50ZW50UmVjb2duaXRpb25SZXN1bHQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5yZWNvZ25pemVPbmNlQXN5bmMgPSBmdW5jdGlvbiAoY2IsIGVycikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnByaXZBZGRlZExtSW50ZW50cykubGVuZ3RoICE9PSAwIHx8IHVuZGVmaW5lZCAhPT0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuYnVpbGRTcGVlY2hDb250ZXh0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjby5zcGVlY2hDb250ZXh0LnNldFNlY3Rpb24oXCJpbnRlbnRcIiwgY29udGV4dC5JbnRlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY28uZHluYW1pY0dyYW1tYXIuYWRkUmVmZXJlbmNlR3JhbW1hcihjb250ZXh0LlJlZmVyZW5jZUdyYW1tYXJzKTtcbiAgICAgICAgICAgICAgICB2YXIgaW50ZW50UmVjbyA9IHRoaXMucHJpdlJlY287XG4gICAgICAgICAgICAgICAgaW50ZW50UmVjby5zZXRJbnRlbnRzKHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzLCB0aGlzLnByaXZVbWJyZWxsYUludGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RhcnQoRXhwb3J0c18xLlJlY29nbml0aW9uTW9kZS5JbnRlcmFjdGl2ZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgICAgICBjYihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHNwZWVjaCByZWNvZ25pdGlvbiwgdW50aWwgc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCkgaXMgY2FsbGVkLlxuICAgICAqIFVzZXIgbXVzdCBzdWJzY3JpYmUgdG8gZXZlbnRzIHRvIHJlY2VpdmUgcmVjb2duaXRpb24gcmVzdWx0cy5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLnN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLnN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMgPSBmdW5jdGlvbiAoY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnByaXZBZGRlZExtSW50ZW50cykubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmJ1aWxkU3BlZWNoQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY28uc3BlZWNoQ29udGV4dC5zZXRTZWN0aW9uKFwiaW50ZW50XCIsIGNvbnRleHQuSW50ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvLmR5bmFtaWNHcmFtbWFyLmFkZFJlZmVyZW5jZUdyYW1tYXIoY29udGV4dC5SZWZlcmVuY2VHcmFtbWFycyk7XG4gICAgICAgICAgICAgICAgdmFyIGludGVudFJlY28gPSB0aGlzLnByaXZSZWNvO1xuICAgICAgICAgICAgICAgIGludGVudFJlY28uc2V0SW50ZW50cyh0aGlzLnByaXZBZGRlZExtSW50ZW50cywgdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0YXJ0KEV4cG9ydHNfMS5SZWNvZ25pdGlvbk1vZGUuQ29udmVyc2F0aW9uLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAvLyByZXBvcnQgcmVzdWx0IHRvIHByb21pc2UuXG4gICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNiID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgZXJyKHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERlc3Ryb3kgdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0b3BzIGNvbnRpbnVvdXMgaW50ZW50IHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgcmVjb2duaXRpb24gaGFzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5zdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMgPSBmdW5jdGlvbiAoY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHNwZWVjaCByZWNvZ25pdGlvbiB3aXRoIGtleXdvcmQgc3BvdHRpbmcsIHVudGlsIHN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luYygpIGlzIGNhbGxlZC5cbiAgICAgKiBVc2VyIG11c3Qgc3Vic2NyaWJlIHRvIGV2ZW50cyB0byByZWNlaXZlIHJlY29nbml0aW9uIHJlc3VsdHMuXG4gICAgICogTm90ZTogS2V5IHdvcmQgc3BvdHRpbmcgZnVuY3Rpb25hbGl0eSBpcyBvbmx5IGF2YWlsYWJsZSBvbiB0aGUgU3BlZWNoIERldmljZXMgU0RLLlxuICAgICAqICAgICAgIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBjdXJyZW50bHkgbm90IGluY2x1ZGVkIGluIHRoZSBTREsgaXRzZWxmLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuc3RhcnRLZXl3b3JkUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsfSBtb2RlbCAtIFRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsIHRoYXQgc3BlY2lmaWVzIHRoZSBrZXl3b3JkIHRvIGJlIHJlY29nbml6ZWQuXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLnN0YXJ0S2V5d29yZFJlY29nbml0aW9uQXN5bmMgPSBmdW5jdGlvbiAobW9kZWwsIGNiLCBlcnIpIHtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsKG1vZGVsLCBcIm1vZGVsXCIpO1xuICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgIGVycihcIk5vdCB5ZXQgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdG9wcyBjb250aW51b3VzIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAgICAgKiBOb3RlOiBLZXkgd29yZCBzcG90dGluZyBmdW5jdGlvbmFsaXR5IGlzIG9ubHkgYXZhaWxhYmxlIG9uIHRoZSBTcGVlY2ggRGV2aWNlcyBTREsuXG4gICAgICogICAgICAgVGhpcyBmdW5jdGlvbmFsaXR5IGlzIGN1cnJlbnRseSBub3QgaW5jbHVkZWQgaW4gdGhlIFNESyBpdHNlbGYuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5zdG9wS2V5d29yZFJlY29nbml0aW9uQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLnN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luYyA9IGZ1bmN0aW9uIChjYiwgZXJyKSB7XG4gICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcGhyYXNlIHRoYXQgc2hvdWxkIGJlIHJlY29nbml6ZWQgYXMgaW50ZW50LlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuYWRkSW50ZW50XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbnRlbnRJZCAtIEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgaWRlbnRpZmllciBvZiB0aGUgaW50ZW50IHRvIGJlIHJlY29nbml6ZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBocmFzZSAtIEEgU3RyaW5nIHRoYXQgc3BlY2lmaWVzIHRoZSBwaHJhc2UgcmVwcmVzZW50aW5nIHRoZSBpbnRlbnQuXG4gICAgICovXG4gICAgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuYWRkSW50ZW50ID0gZnVuY3Rpb24gKHNpbXBsZVBocmFzZSwgaW50ZW50SWQpIHtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoaW50ZW50SWQsIFwiaW50ZW50SWRcIik7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzaW1wbGVQaHJhc2UsIFwic2ltcGxlUGhyYXNlXCIpO1xuICAgICAgICB0aGlzLnByaXZBZGRlZEludGVudHMucHVzaChbaW50ZW50SWQsIHNpbXBsZVBocmFzZV0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBpbnRlbnQgZnJvbSBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UgZm9yIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuYWRkSW50ZW50V2l0aExhbmd1YWdlTW9kZWxcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGludGVudElkIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBpZGVudGlmaWVyIG9mIHRoZSBpbnRlbnRcbiAgICAgKiAgICAgICAgdG8gYmUgcmVjb2duaXplZC4gSWdub3JlZCBpZiBpbnRlbnROYW1lIGlzIGVtcHR5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCAtIFRoZSBpbnRlbnQgbW9kZWwgZnJvbSBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGludGVudE5hbWUgLSBUaGUgaW50ZW50IG5hbWUgZGVmaW5lZCBpbiB0aGUgaW50ZW50IG1vZGVsLiBJZiBpdFxuICAgICAqICAgICAgICBpcyBlbXB0eSwgYWxsIGludGVudCBuYW1lcyBkZWZpbmVkIGluIHRoZSBtb2RlbCB3aWxsIGJlIGFkZGVkLlxuICAgICAqL1xuICAgIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmFkZEludGVudFdpdGhMYW5ndWFnZU1vZGVsID0gZnVuY3Rpb24gKGludGVudElkLCBtb2RlbCwgaW50ZW50TmFtZSkge1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplcik7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShpbnRlbnRJZCwgXCJpbnRlbnRJZFwiKTtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsKG1vZGVsLCBcIm1vZGVsXCIpO1xuICAgICAgICB2YXIgbW9kZWxJbXBsID0gbW9kZWw7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShtb2RlbEltcGwuYXBwSWQsIFwibW9kZWwuYXBwSWRcIik7XG4gICAgICAgIHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzW2ludGVudElkXSA9IG5ldyBFeHBvcnRzXzEuQWRkZWRMbUludGVudChtb2RlbEltcGwsIGludGVudE5hbWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHN1bW1hcnkgQWRkcyBhbGwgaW50ZW50cyBmcm9tIHRoZSBzcGVjaWZpZWQgTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBNb2RlbC5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmFkZEFsbEludGVudHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7TGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWx9IG1vZGVsIC0gVGhlIGxhbmd1YWdlIHVuZGVyc3RhbmRpbmcgbW9kZWwgY29udGFpbmluZyB0aGUgaW50ZW50cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW50ZW50SWQgLSBBIGN1c3RvbSBpZCBTdHJpbmcgdG8gYmUgcmV0dXJuZWQgaW4gdGhlIEludGVudFJlY29nbml0aW9uUmVzdWx0J3MgZ2V0SW50ZW50SWQoKSBtZXRob2QuXG4gICAgICovXG4gICAgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuYWRkQWxsSW50ZW50cyA9IGZ1bmN0aW9uIChtb2RlbCwgaW50ZW50SWQpIHtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsKG1vZGVsLCBcIm1vZGVsXCIpO1xuICAgICAgICB2YXIgbW9kZWxJbXBsID0gbW9kZWw7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShtb2RlbEltcGwuYXBwSWQsIFwibW9kZWwuYXBwSWRcIik7XG4gICAgICAgIHRoaXMucHJpdlVtYnJlbGxhSW50ZW50ID0gbmV3IEV4cG9ydHNfMS5BZGRlZExtSW50ZW50KG1vZGVsSW1wbCwgaW50ZW50SWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogY2xvc2VzIGFsbCBleHRlcm5hbCByZXNvdXJjZXMgaGVsZCBieSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRJbnRlbnRSZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgIH07XG4gICAgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuY3JlYXRlUmVjb2duaXplckNvbmZpZyA9IGZ1bmN0aW9uIChzcGVlY2hDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFeHBvcnRzXzEuUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcsIHRoaXMucHJvcGVydGllcyk7XG4gICAgfTtcbiAgICBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5jcmVhdGVTZXJ2aWNlUmVjb2duaXplciA9IGZ1bmN0aW9uIChhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvQ29uZmlnLCByZWNvZ25pemVyQ29uZmlnKSB7XG4gICAgICAgIHZhciBhdWRpb0ltcGwgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgcmV0dXJuIG5ldyBFeHBvcnRzXzEuSW50ZW50U2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0ltcGwsIHJlY29nbml6ZXJDb25maWcsIHRoaXMpO1xuICAgIH07XG4gICAgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChkaXNwb3NpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplciA9IHRydWU7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLCBkaXNwb3NpbmcpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5idWlsZFNwZWVjaENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcHBJZDtcbiAgICAgICAgdmFyIHJlZ2lvbjtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbktleTtcbiAgICAgICAgdmFyIHJlZkdyYW1tZXJzID0gW107XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHRoaXMucHJpdlVtYnJlbGxhSW50ZW50KSB7XG4gICAgICAgICAgICBhcHBJZCA9IHRoaXMucHJpdlVtYnJlbGxhSW50ZW50Lm1vZGVsSW1wbC5hcHBJZDtcbiAgICAgICAgICAgIHJlZ2lvbiA9IHRoaXMucHJpdlVtYnJlbGxhSW50ZW50Lm1vZGVsSW1wbC5yZWdpb247XG4gICAgICAgICAgICBzdWJzY3JpcHRpb25LZXkgPSB0aGlzLnByaXZVbWJyZWxsYUludGVudC5tb2RlbEltcGwuc3Vic2NyaXB0aW9uS2V5O1xuICAgICAgICB9XG4gICAgICAgIC8vIEJ1aWxkIHRoZSByZWZlcmVuY2UgZ3JhbW1lciBhcnJheS5cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBpbnRlbnRJZCA9IF9hW19pXTtcbiAgICAgICAgICAgIHZhciBhZGRlZExtSW50ZW50ID0gdGhpcy5wcml2QWRkZWRMbUludGVudHNbaW50ZW50SWRdO1xuICAgICAgICAgICAgLy8gdmFsaWRhdGUgYWxsIHRoZSBzYW1lIG1vZGVsLCByZWdpb24sIGFuZCBrZXkuLi5cbiAgICAgICAgICAgIGlmIChhcHBJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYXBwSWQgPSBhZGRlZExtSW50ZW50Lm1vZGVsSW1wbC5hcHBJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChhcHBJZCAhPT0gYWRkZWRMbUludGVudC5tb2RlbEltcGwuYXBwSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW50ZW50cyBtdXN0IGFsbCBiZSBmcm9tIHRoZSBzYW1lIExVSVMgbW9kZWxcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlZ2lvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVnaW9uID0gYWRkZWRMbUludGVudC5tb2RlbEltcGwucmVnaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2lvbiAhPT0gYWRkZWRMbUludGVudC5tb2RlbEltcGwucmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludGVudHMgbXVzdCBhbGwgYmUgZnJvbSB0aGUgc2FtZSBMVUlTIG1vZGVsIGluIGEgc2luZ2xlIHJlZ2lvblwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25LZXkgPSBhZGRlZExtSW50ZW50Lm1vZGVsSW1wbC5zdWJzY3JpcHRpb25LZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uS2V5ICE9PSBhZGRlZExtSW50ZW50Lm1vZGVsSW1wbC5zdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW50ZW50cyBtdXN0IGFsbCB1c2UgdGhlIHNhbWUgc3Vic2NyaXB0aW9uIGtleVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ3JhbW1lciA9IFwibHVpcy9cIiArIGFwcElkICsgXCItUFJPRFVDVElPTiNcIiArIGludGVudElkO1xuICAgICAgICAgICAgcmVmR3JhbW1lcnMucHVzaChncmFtbWVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgSW50ZW50OiB7XG4gICAgICAgICAgICAgICAgaWQ6IGFwcElkLFxuICAgICAgICAgICAgICAgIGtleTogKHN1YnNjcmlwdGlvbktleSA9PT0gdW5kZWZpbmVkKSA/IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWRbRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5XSkgOiBzdWJzY3JpcHRpb25LZXksXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IFwiTFVJU1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFJlZmVyZW5jZUdyYW1tYXJzOiAodW5kZWZpbmVkID09PSB0aGlzLnByaXZVbWJyZWxsYUludGVudCkgPyByZWZHcmFtbWVycyA6IFtcImx1aXMvXCIgKyBhcHBJZCArIFwiLVBST0RVQ1RJT05cIl0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gSW50ZW50UmVjb2duaXplcjtcbn0oRXhwb3J0c18yLlJlY29nbml6ZXIpKTtcbmV4cG9ydHMuSW50ZW50UmVjb2duaXplciA9IEludGVudFJlY29nbml6ZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVudFJlY29nbml6ZXIuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIENvbnRyYWN0c18xID0gcmVxdWlyZShcIi4vQ29udHJhY3RzXCIpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEga2V5d29yZCByZWNvZ25pdGlvbiBtb2RlbCBmb3IgcmVjb2duaXppbmcgd2hlblxuICogdGhlIHVzZXIgc2F5cyBhIGtleXdvcmQgdG8gaW5pdGlhdGUgZnVydGhlciBzcGVlY2ggcmVjb2duaXRpb24uXG4gKiBAY2xhc3MgS2V5d29yZFJlY29nbml0aW9uTW9kZWxcbiAqL1xudmFyIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgaW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gS2V5d29yZFJlY29nbml0aW9uTW9kZWwoKSB7XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsIHVzaW5nIHRoZSBzcGVjaWZpZWQgZmlsZW5hbWUuXG4gICAgICogQG1lbWJlciBLZXl3b3JkUmVjb2duaXRpb25Nb2RlbC5mcm9tRmlsZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZU5hbWUgLSBBIHN0cmluZyB0aGF0IHJlcHJlc2VudHMgZmlsZSBuYW1lIGZvciB0aGUga2V5d29yZCByZWNvZ25pdGlvbiBtb2RlbC5cbiAgICAgKiAgICAgICAgTm90ZSwgdGhlIGZpbGUgY2FuIHBvaW50IHRvIGEgemlwIGZpbGUgaW4gd2hpY2ggY2FzZSB0aGUgbW9kZWxcbiAgICAgKiAgICAgICAgd2lsbCBiZSBleHRyYWN0ZWQgZnJvbSB0aGUgemlwLlxuICAgICAqIEByZXR1cm5zIHtLZXl3b3JkUmVjb2duaXRpb25Nb2RlbH0gVGhlIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBLZXl3b3JkUmVjb2duaXRpb25Nb2RlbC5mcm9tRmlsZSA9IGZ1bmN0aW9uIChmaWxlTmFtZSkge1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZkZpbGVEb2VzTm90RXhpc3QoZmlsZU5hbWUsIFwiZmlsZU5hbWVcIik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCB5ZXQgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgdXNpbmcgdGhlIHNwZWNpZmllZCBmaWxlbmFtZS5cbiAgICAgKiBAbWVtYmVyIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsLmZyb21TdHJlYW1cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGUgLSBBIEZpbGUgdGhhdCByZXByZXNlbnRzIGZpbGUgZm9yIHRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsLlxuICAgICAqICAgICAgICBOb3RlLCB0aGUgZmlsZSBjYW4gcG9pbnQgdG8gYSB6aXAgZmlsZSBpbiB3aGljaCBjYXNlIHRoZSBtb2RlbCB3aWxsIGJlIGV4dHJhY3RlZCBmcm9tIHRoZSB6aXAuXG4gICAgICogQHJldHVybnMge0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsfSBUaGUga2V5d29yZCByZWNvZ25pdGlvbiBtb2RlbCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsLmZyb21TdHJlYW0gPSBmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGwoZmlsZSwgXCJmaWxlXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgeWV0IGltcGxlbWVudGVkLlwiKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc3Bvc2Ugb2YgYXNzb2NpYXRlZCByZXNvdXJjZXMuXG4gICAgICogQG1lbWJlciBLZXl3b3JkUmVjb2duaXRpb25Nb2RlbC5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgS2V5d29yZFJlY29nbml0aW9uTW9kZWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2RGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZEaXNwb3NlZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gS2V5d29yZFJlY29nbml0aW9uTW9kZWw7XG59KCkpO1xuZXhwb3J0cy5LZXl3b3JkUmVjb2duaXRpb25Nb2RlbCA9IEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1LZXl3b3JkUmVjb2duaXRpb25Nb2RlbC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBDb250cmFjdHNfMSA9IHJlcXVpcmUoXCIuL0NvbnRyYWN0c1wiKTtcbi8qKlxuICogTGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbFxuICogQGNsYXNzIExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsXG4gKi9cbnZhciBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsKCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGxhbmd1YWdlIHVuZGVyc3RhbmRpbmcgbW9kZWwgdXNpbmcgdGhlIHNwZWNpZmllZCBlbmRwb2ludC5cbiAgICAgKiBAbWVtYmVyIExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsLmZyb21FbmRwb2ludFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1VSTH0gdXJpIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlbmRwb2ludCBvZiB0aGUgbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyB7TGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWx9IFRoZSBsYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwuZnJvbUVuZHBvaW50ID0gZnVuY3Rpb24gKHVyaSkge1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGwodXJpLCBcInVyaVwiKTtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHVyaS5ob3N0bmFtZSwgXCJ1cmlcIik7XG4gICAgICAgIHZhciBsYW5nTW9kZWxJbXAgPSBuZXcgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxJbXBsKCk7XG4gICAgICAgIC8vIE5lZWQgdG8gZXh0cmFjdCB0aGUgYXBwIElEIGZyb20gdGhlIFVSTC5cbiAgICAgICAgLy8gVVJMIGlzIGluIHRoZSBmb3JtYXQ6IGh0dHBzOi8vPHJlZ2lvbj4uYXBpLmNvZ25pdGl2ZS5taWNyb3NvZnQuY29tL2x1aXMvdjIuMC9hcHBzLzxHdWlkPj9zdWJzY3JpcHRpb24ta2V5PTxrZXk+JnRpbWV6b25lT2Zmc2V0PS0zNjBcbiAgICAgICAgLy8gU3RhcnQgdGVhcmluZyB0aGUgc3RyaW5nIGFwYXJ0LlxuICAgICAgICAvLyByZWdpb24gY2FuIGJlIGV4dHJhY3RlZCBmcm9tIHRoZSBob3N0IG5hbWUuXG4gICAgICAgIHZhciBmaXJzdERvdCA9IHVyaS5ob3N0LmluZGV4T2YoXCIuXCIpO1xuICAgICAgICBpZiAoLTEgPT09IGZpcnN0RG90KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZGV0ZXJtaW5lIHJlZ2lvbiBmcm9tIGVuZHBvaW50XCIpO1xuICAgICAgICB9XG4gICAgICAgIGxhbmdNb2RlbEltcC5yZWdpb24gPSB1cmkuaG9zdC5zdWJzdHIoMCwgZmlyc3REb3QpO1xuICAgICAgICAvLyBOb3cgdGhlIGFwcCBJRC5cbiAgICAgICAgdmFyIGxhc3RTZWdtZW50ID0gdXJpLnBhdGhuYW1lLmxhc3RJbmRleE9mKFwiL1wiKSArIDE7XG4gICAgICAgIGlmICgtMSA9PT0gbGFzdFNlZ21lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBkZXRlcm1pbmUgYXBwSWQgZnJvbSBlbmRwb2ludFwiKTtcbiAgICAgICAgfVxuICAgICAgICBsYW5nTW9kZWxJbXAuYXBwSWQgPSB1cmkucGF0aG5hbWUuc3Vic3RyKGxhc3RTZWdtZW50KTtcbiAgICAgICAgLy8gQW5kIGZpbmFsbHkgdGhlIGtleS5cbiAgICAgICAgbGFuZ01vZGVsSW1wLnN1YnNjcmlwdGlvbktleSA9IHVyaS5zZWFyY2hQYXJhbXMuZ2V0KFwic3Vic2NyaXB0aW9uLWtleVwiKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbGFuZ01vZGVsSW1wLnN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGRldGVybWluZSBzdWJzY3JpcHRpb24ga2V5IGZyb20gZW5kcG9pbnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxhbmdNb2RlbEltcDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbCB1c2luZyB0aGUgYXBwbGljYXRpb24gaWQgb2YgTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwuZnJvbUFwcElkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhcHBJZCAtIEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgYXBwbGljYXRpb24gaWQgb2YgTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBzZXJ2aWNlLlxuICAgICAqIEByZXR1cm5zIHtMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbH0gVGhlIGxhbmd1YWdlIHVuZGVyc3RhbmRpbmcgbW9kZWwgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbC5mcm9tQXBwSWQgPSBmdW5jdGlvbiAoYXBwSWQpIHtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGFwcElkLCBcImFwcElkXCIpO1xuICAgICAgICB2YXIgbGFuZ01vZGVsSW1wID0gbmV3IExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsSW1wbCgpO1xuICAgICAgICBsYW5nTW9kZWxJbXAuYXBwSWQgPSBhcHBJZDtcbiAgICAgICAgcmV0dXJuIGxhbmdNb2RlbEltcDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBsYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsIHVzaW5nIGhvc3RuYW1lLCBzdWJzY3JpcHRpb24ga2V5IGFuZCBhcHBsaWNhdGlvblxuICAgICAqIGlkIG9mIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsLmZyb21TdWJzY3JpcHRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvbktleSAtIEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgc3Vic2NyaXB0aW9uIGtleSBvZlxuICAgICAqICAgICAgICBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFwcElkIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBhcHBsaWNhdGlvbiBpZCBvZiBMYW5ndWFnZVxuICAgICAqICAgICAgICBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQHBhcmFtIHtMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbH0gcmVnaW9uIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSByZWdpb25cbiAgICAgKiAgICAgICAgb2YgdGhlIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgc2VydmljZSAoc2VlIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9ha2EubXMvY3NzcGVlY2gvcmVnaW9uXCI+cmVnaW9uIHBhZ2U8L2E+KS5cbiAgICAgKiBAcmV0dXJucyB7TGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWx9IFRoZSBsYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwuZnJvbVN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb25LZXksIGFwcElkLCByZWdpb24pIHtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHN1YnNjcmlwdGlvbktleSwgXCJzdWJzY3JpcHRpb25LZXlcIik7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShhcHBJZCwgXCJhcHBJZFwiKTtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZ2lvbiwgXCJyZWdpb25cIik7XG4gICAgICAgIHZhciBsYW5nTW9kZWxJbXAgPSBuZXcgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxJbXBsKCk7XG4gICAgICAgIGxhbmdNb2RlbEltcC5hcHBJZCA9IGFwcElkO1xuICAgICAgICBsYW5nTW9kZWxJbXAucmVnaW9uID0gcmVnaW9uO1xuICAgICAgICBsYW5nTW9kZWxJbXAuc3Vic2NyaXB0aW9uS2V5ID0gc3Vic2NyaXB0aW9uS2V5O1xuICAgICAgICByZXR1cm4gbGFuZ01vZGVsSW1wO1xuICAgIH07XG4gICAgcmV0dXJuIExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsO1xufSgpKTtcbmV4cG9ydHMuTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwgPSBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbDtcbi8qKlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbEltcGxcbiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbEltcGwsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxJbXBsKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbEltcGw7XG59KExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsKSk7XG5leHBvcnRzLkxhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsSW1wbCA9IExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsSW1wbDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9zcmMvY29tbW9uLnNwZWVjaC9FeHBvcnRzXCIpO1xudmFyIEV4cG9ydHNfMiA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vKipcbiAqIENvbnRhaW5zIGRldGFpbGVkIGluZm9ybWF0aW9uIGZvciBOb01hdGNoIHJlY29nbml0aW9uIHJlc3VsdHMuXG4gKiBAY2xhc3MgTm9NYXRjaERldGFpbHNcbiAqL1xudmFyIE5vTWF0Y2hEZXRhaWxzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtOb01hdGNoUmVhc29ufSByZWFzb24gLSBUaGUgbm8tbWF0Y2ggcmVhc29uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE5vTWF0Y2hEZXRhaWxzKHJlYXNvbikge1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgTm9NYXRjaERldGFpbHMgb2JqZWN0IGZvciB0aGUgTm9NYXRjaCBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdHMuXG4gICAgICogQG1lbWJlciBOb01hdGNoRGV0YWlscy5mcm9tUmVzdWx0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7U3BlZWNoUmVjb2duaXRpb25SZXN1bHQgfCBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCB8IFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHR9XG4gICAgICogICAgICAgIHJlc3VsdCAtIFRoZSByZWNvZ25pdGlvbiByZXN1bHQgdGhhdCB3YXMgbm90IHJlY29nbml6ZWQuXG4gICAgICogQHJldHVybnMge05vTWF0Y2hEZXRhaWxzfSBUaGUgbm8gbWF0Y2ggZGV0YWlscyBvYmplY3QgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBOb01hdGNoRGV0YWlscy5mcm9tUmVzdWx0ID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICB2YXIgc2ltcGxlU3BlZWNoID0gRXhwb3J0c18xLlNpbXBsZVNwZWVjaFBocmFzZS5mcm9tSlNPTihyZXN1bHQuanNvbik7XG4gICAgICAgIHZhciByZWFzb24gPSBFeHBvcnRzXzIuTm9NYXRjaFJlYXNvbi5Ob3RSZWNvZ25pemVkO1xuICAgICAgICBzd2l0Y2ggKHNpbXBsZVNwZWVjaC5SZWNvZ25pdGlvblN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSBFeHBvcnRzXzEuUmVjb2duaXRpb25TdGF0dXMuQmFiYmxlVGltZW91dDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBFeHBvcnRzXzIuTm9NYXRjaFJlYXNvbi5Jbml0aWFsQmFiYmxlVGltZW91dDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRXhwb3J0c18xLlJlY29nbml0aW9uU3RhdHVzLkluaXRpYWxTaWxlbmNlVGltZW91dDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBFeHBvcnRzXzIuTm9NYXRjaFJlYXNvbi5Jbml0aWFsU2lsZW5jZVRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IEV4cG9ydHNfMi5Ob01hdGNoUmVhc29uLk5vdFJlY29nbml6ZWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBOb01hdGNoRGV0YWlscyhyZWFzb24pO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5vTWF0Y2hEZXRhaWxzLnByb3RvdHlwZSwgXCJyZWFzb25cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHJlYXNvbiB0aGUgcmVjb2duaXRpb24gd2FzIGNhbmNlbGVkLlxuICAgICAgICAgKiBAbWVtYmVyIE5vTWF0Y2hEZXRhaWxzLnByb3RvdHlwZS5yZWFzb25cbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge05vTWF0Y2hSZWFzb259IFNwZWNpZmllcyB0aGUgcmVhc29uIGNhbmNlbGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gTm9NYXRjaERldGFpbHM7XG59KCkpO1xuZXhwb3J0cy5Ob01hdGNoRGV0YWlscyA9IE5vTWF0Y2hEZXRhaWxzO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Ob01hdGNoRGV0YWlscy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqIERlZmluZXMgdGhlIHBvc3NpYmxlIHJlYXNvbnMgYSByZWNvZ25pdGlvbiByZXN1bHQgbWlnaHQgbm90IGJlIHJlY29nbml6ZWQuXG4gKiBAY2xhc3MgTm9NYXRjaFJlYXNvblxuICovXG52YXIgTm9NYXRjaFJlYXNvbjtcbihmdW5jdGlvbiAoTm9NYXRjaFJlYXNvbikge1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHNwZWVjaCB3YXMgZGV0ZWN0ZWQsIGJ1dCBub3QgcmVjb2duaXplZC5cbiAgICAgKiBAbWVtYmVyIE5vTWF0Y2hSZWFzb24uTm90UmVjb2duaXplZFxuICAgICAqL1xuICAgIE5vTWF0Y2hSZWFzb25bTm9NYXRjaFJlYXNvbltcIk5vdFJlY29nbml6ZWRcIl0gPSAwXSA9IFwiTm90UmVjb2duaXplZFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdGFydCBvZiB0aGUgYXVkaW8gc3RyZWFtIGNvbnRhaW5lZCBvbmx5IHNpbGVuY2UsXG4gICAgICogYW5kIHRoZSBzZXJ2aWNlIHRpbWVkIG91dCB3YWl0aW5nIGZvciBzcGVlY2guXG4gICAgICogQG1lbWJlciBOb01hdGNoUmVhc29uLkluaXRpYWxTaWxlbmNlVGltZW91dFxuICAgICAqL1xuICAgIE5vTWF0Y2hSZWFzb25bTm9NYXRjaFJlYXNvbltcIkluaXRpYWxTaWxlbmNlVGltZW91dFwiXSA9IDFdID0gXCJJbml0aWFsU2lsZW5jZVRpbWVvdXRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgc3RhcnQgb2YgdGhlIGF1ZGlvIHN0cmVhbSBjb250YWluZWQgb25seSBub2lzZSxcbiAgICAgKiBhbmQgdGhlIHNlcnZpY2UgdGltZWQgb3V0IHdhaXRpbmcgZm9yIHNwZWVjaC5cbiAgICAgKiBAbWVtYmVyIE5vTWF0Y2hSZWFzb24uSW5pdGlhbEJhYmJsZVRpbWVvdXRcbiAgICAgKi9cbiAgICBOb01hdGNoUmVhc29uW05vTWF0Y2hSZWFzb25bXCJJbml0aWFsQmFiYmxlVGltZW91dFwiXSA9IDJdID0gXCJJbml0aWFsQmFiYmxlVGltZW91dFwiO1xufSkoTm9NYXRjaFJlYXNvbiA9IGV4cG9ydHMuTm9NYXRjaFJlYXNvbiB8fCAoZXhwb3J0cy5Ob01hdGNoUmVhc29uID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Tm9NYXRjaFJlYXNvbi5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqIERlZmluZSBTcGVlY2ggUmVjb2duaXplciBvdXRwdXQgZm9ybWF0cy5cbiAqIEBjbGFzcyBPdXRwdXRGb3JtYXRcbiAqL1xudmFyIE91dHB1dEZvcm1hdDtcbihmdW5jdGlvbiAoT3V0cHV0Rm9ybWF0KSB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBPdXRwdXRGb3JtYXQuU2ltcGxlXG4gICAgICovXG4gICAgT3V0cHV0Rm9ybWF0W091dHB1dEZvcm1hdFtcIlNpbXBsZVwiXSA9IDBdID0gXCJTaW1wbGVcIjtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIE91dHB1dEZvcm1hdC5EZXRhaWxlZFxuICAgICAqL1xuICAgIE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXRbXCJEZXRhaWxlZFwiXSA9IDFdID0gXCJEZXRhaWxlZFwiO1xufSkoT3V0cHV0Rm9ybWF0ID0gZXhwb3J0cy5PdXRwdXRGb3JtYXQgfHwgKGV4cG9ydHMuT3V0cHV0Rm9ybWF0ID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3V0cHV0Rm9ybWF0LmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogQWxsb3dzIGFkZGl0aW9ucyBvZiBuZXcgcGhyYXNlcyB0byBpbXByb3ZlIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAqXG4gKiBQaHJhc2VzIGFkZGVkIHRvIHRoZSByZWNvZ25pemVyIGFyZSBlZmZlY3RpdmUgYXQgdGhlIHN0YXJ0IG9mIHRoZSBuZXh0IHJlY29nbml0aW9uLCBvciB0aGUgbmV4dCB0aW1lIHRoZSBTcGVlY2hTREsgbXVzdCByZWNvbm5lY3RcbiAqIHRvIHRoZSBzcGVlY2ggc2VydmljZS5cbiAqL1xudmFyIFBocmFzZUxpc3RHcmFtbWFyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBocmFzZUxpc3RHcmFtbWFyKHJlY29nQmFzZSkge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWVyQnVpbGRlciA9IHJlY29nQmFzZS5keW5hbWljR3JhbW1hcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFBocmFzZUxpc3RHcmFtbWFyIGZyb20gYSBnaXZlbiBzcGVlY2ggcmVjb2duaXplci4gV2lsbCBhY2NlcHQgYW55IHJlY29nbml6ZXIgdGhhdCBkZXJpdmVzIGZyb20gQGNsYXNzIFJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHJlY29nbml6ZXIgVGhlIHJlY29nbml6ZXIgdG8gYWRkIHBocmFzZSBsaXN0cyB0by5cbiAgICAgKi9cbiAgICBQaHJhc2VMaXN0R3JhbW1hci5mcm9tUmVjb2duaXplciA9IGZ1bmN0aW9uIChyZWNvZ25pemVyKSB7XG4gICAgICAgIHZhciByZWNvQmFzZSA9IHJlY29nbml6ZXIuaW50ZXJuYWxEYXRhO1xuICAgICAgICByZXR1cm4gbmV3IFBocmFzZUxpc3RHcmFtbWFyKHJlY29CYXNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSBzaW5nbGUgcGhyYXNlIHRvIHRoZSBjdXJyZW50IHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHBocmFzZSBQaHJhc2UgdG8gYWRkLlxuICAgICAqL1xuICAgIFBocmFzZUxpc3RHcmFtbWFyLnByb3RvdHlwZS5hZGRQaHJhc2UgPSBmdW5jdGlvbiAocGhyYXNlKSB7XG4gICAgICAgIHRoaXMucHJpdkdyYW1tZXJCdWlsZGVyLmFkZFBocmFzZShwaHJhc2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBtdWx0aXBsZSBwaHJhc2VzIHRvIHRoZSBjdXJyZW50IHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHBocmFzZXMgQXJyYXkgb2YgcGhyYXNlcyB0byBhZGQuXG4gICAgICovXG4gICAgUGhyYXNlTGlzdEdyYW1tYXIucHJvdG90eXBlLmFkZFBocmFzZXMgPSBmdW5jdGlvbiAocGhyYXNlcykge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWVyQnVpbGRlci5hZGRQaHJhc2UocGhyYXNlcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhcnMgYWxsIHBocmFzZXMgYWRkZWQgdG8gdGhlIGN1cnJlbnQgcmVjb2duaXplci5cbiAgICAgKi9cbiAgICBQaHJhc2VMaXN0R3JhbW1hci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJpdkdyYW1tZXJCdWlsZGVyLmNsZWFyUGhyYXNlcygpO1xuICAgIH07XG4gICAgcmV0dXJuIFBocmFzZUxpc3RHcmFtbWFyO1xufSgpKTtcbmV4cG9ydHMuUGhyYXNlTGlzdEdyYW1tYXIgPSBQaHJhc2VMaXN0R3JhbW1hcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGhyYXNlTGlzdEdyYW1tYXIuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vKipcbiAqIFJlcHJlc2VudHMgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMuXG4gKiBAY2xhc3MgUHJvcGVydHlDb2xsZWN0aW9uXG4gKi9cbnZhciBQcm9wZXJ0eUNvbGxlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUHJvcGVydHlDb2xsZWN0aW9uKCkge1xuICAgICAgICB0aGlzLnByaXZLZXlzID0gW107XG4gICAgICAgIHRoaXMucHJpdlZhbHVlcyA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBpbiB0eXBlIFN0cmluZy4gVGhlIHBhcmFtZXRlciBtdXN0IGhhdmUgdGhlIHNhbWUgdHlwZSBhcyBTdHJpbmcuXG4gICAgICogQ3VycmVudGx5IG9ubHkgU3RyaW5nLCBpbnQgYW5kIGJvb2wgYXJlIGFsbG93ZWQuXG4gICAgICogSWYgdGhlIG5hbWUgaXMgbm90IGF2YWlsYWJsZSwgdGhlIHNwZWNpZmllZCBkZWZhdWx0VmFsdWUgaXMgcmV0dXJuZWQuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldFByb3BlcnR5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUaGUgcGFyYW1ldGVyIG5hbWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRlZiAtIFRoZSBkZWZhdWx0IHZhbHVlIHdoaWNoIGlzIHJldHVybmVkIGlmIHRoZSBwYXJhbWV0ZXJcbiAgICAgKiAgICAgICAgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIFByb3BlcnR5Q29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0UHJvcGVydHkgPSBmdW5jdGlvbiAoa2V5LCBkZWYpIHtcbiAgICAgICAgdmFyIGtleVRvVXNlO1xuICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAga2V5VG9Vc2UgPSBrZXk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBrZXlUb1VzZSA9IEV4cG9ydHNfMS5Qcm9wZXJ0eUlkW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0aGlzLnByaXZLZXlzLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2S2V5c1tuXSA9PT0ga2V5VG9Vc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2VmFsdWVzW25dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWY7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBTdHJpbmcgdmFsdWUgb2YgdGhlIHBhcmFtZXRlciBzcGVjaWZpZWQgYnkgbmFtZS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5Q29sbGVjdGlvbi5wcm90b3R5cGUuc2V0UHJvcGVydHlcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRoZSBwYXJhbWV0ZXIgbmFtZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgdmFsdWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUNvbGxlY3Rpb24ucHJvdG90eXBlLnNldFByb3BlcnR5ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGtleVRvVXNlO1xuICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAga2V5VG9Vc2UgPSBrZXk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBrZXlUb1VzZSA9IEV4cG9ydHNfMS5Qcm9wZXJ0eUlkW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0aGlzLnByaXZLZXlzLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2S2V5c1tuXSA9PT0ga2V5VG9Vc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZWYWx1ZXNbbl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2S2V5cy5wdXNoKGtleVRvVXNlKTtcbiAgICAgICAgdGhpcy5wcml2VmFsdWVzLnB1c2godmFsdWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xvbmVzIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlDb2xsZWN0aW9uLnByb3RvdHlwZS5jbG9uZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBBIGNvcHkgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICovXG4gICAgUHJvcGVydHlDb2xsZWN0aW9uLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNsb25lZE1hcCA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0aGlzLnByaXZLZXlzLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICBjbG9uZWRNYXAucHJpdktleXMucHVzaCh0aGlzLnByaXZLZXlzW25dKTtcbiAgICAgICAgICAgIGNsb25lZE1hcC5wcml2VmFsdWVzLnB1c2godGhpcy5wcml2VmFsdWVzW25dKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmVkTWFwO1xuICAgIH07XG4gICAgcmV0dXJuIFByb3BlcnR5Q29sbGVjdGlvbjtcbn0oKSk7XG5leHBvcnRzLlByb3BlcnR5Q29sbGVjdGlvbiA9IFByb3BlcnR5Q29sbGVjdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvcGVydHlDb2xsZWN0aW9uLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogRGVmaW5lcyBzcGVlY2ggcHJvcGVydHkgaWRzLlxuICogQGNsYXNzIFByb3BlcnR5SWRcbiAqL1xudmFyIFByb3BlcnR5SWQ7XG4oZnVuY3Rpb24gKFByb3BlcnR5SWQpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHN1YnNjcmlwdGlvbiBLZXkuIElmIHlvdSBhcmUgdXNpbmcgYW4gaW50ZW50IHJlY29nbml6ZXIsIHlvdSBuZWVkIHRvIHNwZWNpZnlcbiAgICAgKiB0byBzcGVjaWZ5IHRoZSBMVUlTIGVuZHBvaW50IGtleSBmb3IgeW91ciBwYXJ0aWN1bGFyIExVSVMgYXBwLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndFxuICAgICAqIGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLmZyb21TdWJzY3JpcHRpb25dXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5XCJdID0gMF0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgZW5kcG9pbnQgKHVybCkuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0XG4gICAgICogaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tTcGVlY2hDb25maWcuZnJvbUVuZHBvaW50XV0uXG4gICAgICogTk9URTogVGhpcyBlbmRwb2ludCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIGVuZHBvaW50IHVzZWQgdG8gb2J0YWluIGFuIGFjY2VzcyB0b2tlbi5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludFwiXSA9IDFdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgcmVnaW9uLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvXG4gICAgICogdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLmZyb21TdWJzY3JpcHRpb25dXSwgW1tTcGVlY2hDb25maWcuZnJvbUVuZHBvaW50XV0sIFtbU3BlZWNoQ29uZmlnLmZyb21BdXRob3JpemF0aW9uVG9rZW5dXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uXCJdID0gMl0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvblwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgYXV0aG9yaXphdGlvbiB0b2tlbiAoYWthIGFjY2VzcyB0b2tlbikuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLFxuICAgICAqIHlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tTcGVlY2hDb25maWcuZnJvbUF1dGhvcml6YXRpb25Ub2tlbl1dLFxuICAgICAqIFtbU3BlZWNoUmVjb2duaXplci5hdXRob3JpemF0aW9uVG9rZW5dXSwgW1tJbnRlbnRSZWNvZ25pemVyLmF1dGhvcml6YXRpb25Ub2tlbl1dLCBbW1RyYW5zbGF0aW9uUmVjb2duaXplci5hdXRob3JpemF0aW9uVG9rZW5dXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlblwiXSA9IDNdID0gXCJTcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlblwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgYXV0aG9yaXphdGlvbiB0eXBlLiBDdXJyZW50bHkgdW51c2VkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9UeXBlXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVHlwZVwiXSA9IDRdID0gXCJTcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9UeXBlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSBlbmRwb2ludCBpZC4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3RcbiAgICAgKiBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQsIHVzZSBbW1NwZWVjaENvbmZpZy5lbmRwb2ludElkXV0uXG4gICAgICogTk9URTogVGhlIGVuZHBvaW50IGlkIGlzIGF2YWlsYWJsZSBpbiB0aGUgU3BlZWNoIFBvcnRhbCwgbGlzdGVkIHVuZGVyIEVuZHBvaW50IERldGFpbHMuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkXCJdID0gNV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgbGlzdCBvZiBjb21tYSBzZXBhcmF0ZWQgbGFuZ3VhZ2VzIChCQ1AtNDcgZm9ybWF0KSB1c2VkIGFzIHRhcmdldCB0cmFuc2xhdGlvbiBsYW5ndWFnZXMuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLFxuICAgICAqIHlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkIHVzZSBbW1NwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLmFkZFRhcmdldExhbmd1YWdlXV0sXG4gICAgICogW1tTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy50YXJnZXRMYW5ndWFnZXNdXSwgW1tUcmFuc2xhdGlvblJlY29nbml6ZXIudGFyZ2V0TGFuZ3VhZ2VzXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXNcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzXCJdID0gNl0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgQ29nbml0aXZlIFNlcnZpY2UgVGV4dCB0byBTcGVlY2ggU2VydmljZSBWb2ljZS4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpc1xuICAgICAqIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQsIHVzZSBbW1NwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLnZvaWNlTmFtZV1dLlxuICAgICAqIE5PVEU6IFZhbGlkIHZvaWNlIG5hbWVzIGNhbiBiZSBmb3VuZCA8YSBocmVmPVwiaHR0cHM6Ly9ha2EubXMvY3NzcGVlY2gvdm9pY2VuYW1lc1wiPmhlcmU8L2E+LlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZVwiXSA9IDddID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlXCI7XG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRpb24gZmVhdHVyZXMuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uRmVhdHVyZXNcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvbkZlYXR1cmVzXCJdID0gOF0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uRmVhdHVyZXNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBTZXJ2aWNlIFJlZ2lvbi4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbF1dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9JbnRlbnRSZWdpb25cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9JbnRlbnRSZWdpb25cIl0gPSA5XSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW50ZW50UmVnaW9uXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGhvc3QgbmFtZSBvZiB0aGUgcHJveHkgc2VydmVyIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlLiBPbmx5IHJlbGV2YW50IGluIE5vZGUuanMgZW52aXJvbm1lbnRzLlxuICAgICAqIFlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkIHVzZSA8c2VlIGNyZWY9XCJTcGVlY2hDb25maWcuU2V0UHJveHkoc3RyaW5nLGludCxzdHJpbmcsc3RyaW5nKVwiLz4uXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjQuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eUhvc3ROYW1lXCJdID0gMTBdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eUhvc3ROYW1lXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHBvcnQgb2YgdGhlIHByb3h5IHNlcnZlciB1c2VkIHRvIGNvbm5lY3QgdG8gdGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZS4gT25seSByZWxldmFudCBpbiBOb2RlLmpzIGVudmlyb25tZW50cy5cbiAgICAgKiBZb3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgPHNlZSBjcmVmPVwiU3BlZWNoQ29uZmlnLlNldFByb3h5KHN0cmluZyxpbnQsc3RyaW5nLHN0cmluZylcIi8+LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS40LjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0XCJdID0gMTFdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBvcnRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgdXNlciBuYW1lIG9mIHRoZSBwcm94eSBzZXJ2ZXIgdXNlZCB0byBjb25uZWN0IHRvIHRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UuIE9ubHkgcmVsZXZhbnQgaW4gTm9kZS5qcyBlbnZpcm9ubWVudHMuXG4gICAgICogWW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQgdXNlIDxzZWUgY3JlZj1cIlNwZWVjaENvbmZpZy5TZXRQcm94eShzdHJpbmcsaW50LHN0cmluZyxzdHJpbmcpXCIvPi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNC4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5VXNlck5hbWVcIl0gPSAxMl0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5VXNlck5hbWVcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcGFzc3dvcmQgb2YgdGhlIHByb3h5IHNlcnZlciB1c2VkIHRvIGNvbm5lY3QgdG8gdGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZS4gT25seSByZWxldmFudCBpbiBOb2RlLmpzIGVudmlyb25tZW50cy5cbiAgICAgKiBZb3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgPHNlZSBjcmVmPVwiU3BlZWNoQ29uZmlnLlNldFByb3h5KHN0cmluZyxpbnQsc3RyaW5nLHN0cmluZylcIi8+LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS40LjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQYXNzd29yZFwiXSA9IDEzXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQYXNzd29yZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgcmVjb2duaXRpb24gTW9kZS4gQ2FuIGJlIFwiSU5URVJBQ1RJVkVcIiwgXCJDT05WRVJTQVRJT05cIiwgXCJESUNUQVRJT05cIi5cbiAgICAgKiBUaGlzIHByb3BlcnR5IGlzIGludGVuZGVkIHRvIGJlIHJlYWQtb25seS4gVGhlIFNESyBpcyB1c2luZyBpdCBpbnRlcm5hbGx5LlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTW9kZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29Nb2RlXCJdID0gMTRdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTW9kZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBzcG9rZW4gbGFuZ3VhZ2UgdG8gYmUgcmVjb2duaXplZCAoaW4gQkNQLTQ3IGZvcm1hdCkuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHlcbiAgICAgKiBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tTcGVlY2hDb25maWcuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZV1dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VcIl0gPSAxNV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBzZXNzaW9uIGlkLiBUaGlzIGlkIGlzIGEgdW5pdmVyc2FsbHkgdW5pcXVlIGlkZW50aWZpZXIgKGFrYSBVVUlEKSByZXByZXNlbnRpbmcgYSBzcGVjaWZpYyBiaW5kaW5nIG9mIGFuIGF1ZGlvIGlucHV0IHN0cmVhbVxuICAgICAqIGFuZCB0aGUgdW5kZXJseWluZyBzcGVlY2ggcmVjb2duaXRpb24gaW5zdGFuY2UgdG8gd2hpY2ggaXQgaXMgYm91bmQuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXNcbiAgICAgKiBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkIHVzZSBbW1Nlc3Npb25FdmVudEFyZ3Muc2Vzc2lvbklkXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaF9TZXNzaW9uSWRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hfU2Vzc2lvbklkXCJdID0gMTZdID0gXCJTcGVlY2hfU2Vzc2lvbklkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3RlZCBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgcmVzcG9uc2Ugb3V0cHV0IGZvcm1hdCAoc2ltcGxlIG9yIGRldGFpbGVkKS4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZVxuICAgICAqIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQgdXNlIFtbU3BlZWNoQ29uZmlnLm91dHB1dEZvcm1hdF1dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdERldGFpbGVkUmVzdWx0VHJ1ZUZhbHNlXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3REZXRhaWxlZFJlc3VsdFRydWVGYWxzZVwiXSA9IDE3XSA9IFwiU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3REZXRhaWxlZFJlc3VsdFRydWVGYWxzZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSByZXF1ZXN0ZWQgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlc3BvbnNlIG91dHB1dCBwcm9mYW5pdHkgbGV2ZWwuIEN1cnJlbnRseSB1bnVzZWQuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0UHJvZmFuaXR5RmlsdGVyVHJ1ZUZhbHNlXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RQcm9mYW5pdHlGaWx0ZXJUcnVlRmFsc2VcIl0gPSAxOF0gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0UHJvZmFuaXR5RmlsdGVyVHJ1ZUZhbHNlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSByZXNwb25zZSBvdXRwdXQgKGluIEpTT04gZm9ybWF0KS4gVGhpcyBwcm9wZXJ0eSBpcyBhdmFpbGFibGUgb24gcmVjb2duaXRpb24gcmVzdWx0IG9iamVjdHMgb25seS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdFwiXSA9IDE5XSA9IFwiU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIGVycm9yIGRldGFpbHMgKGluIEpTT04gZm9ybWF0KS4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0b1xuICAgICAqIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LiBJbnN0ZWFkIHVzZSBbW0NhbmNlbGxhdGlvbkRldGFpbHMuZXJyb3JEZXRhaWxzXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uRXJyb3JEZXRhaWxzXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25FcnJvckRldGFpbHNcIl0gPSAyMF0gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uRXJyb3JEZXRhaWxzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGNhbmNlbGxhdGlvbiByZWFzb24uIEN1cnJlbnRseSB1bnVzZWQuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25cIl0gPSAyMV0gPSBcIkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGNhbmNlbGxhdGlvbiB0ZXh0LiBDdXJyZW50bHkgdW51c2VkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5DYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblRleHRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblRleHRcIl0gPSAyMl0gPSBcIkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uVGV4dFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDYW5jZWxsYXRpb24gZGV0YWlsZWQgdGV4dC4gQ3VycmVudGx5IHVudXNlZC5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25EZXRhaWxlZFRleHRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvbkRldGFpbGVkVGV4dFwiXSA9IDIzXSA9IFwiQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25EZXRhaWxlZFRleHRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBTZXJ2aWNlIHJlc3BvbnNlIG91dHB1dCAoaW4gSlNPTiBmb3JtYXQpLiBBdmFpbGFibGUgdmlhIFtbSW50ZW50UmVjb2duaXRpb25SZXN1bHRdXVxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5MYW5ndWFnZVVuZGVyc3RhbmRpbmdTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkxhbmd1YWdlVW5kZXJzdGFuZGluZ1NlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0XCJdID0gMjRdID0gXCJMYW5ndWFnZVVuZGVyc3RhbmRpbmdTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdFwiO1xufSkoUHJvcGVydHlJZCA9IGV4cG9ydHMuUHJvcGVydHlJZCB8fCAoZXhwb3J0cy5Qcm9wZXJ0eUlkID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvcGVydHlJZC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi9FeHBvcnRzXCIpO1xuLyoqXG4gKiBEZWZpbmVzIHBheWxvYWQgZm9yIHNlc3Npb24gZXZlbnRzIGxpa2UgU3BlZWNoIFN0YXJ0L0VuZCBEZXRlY3RlZFxuICogQGNsYXNzXG4gKi9cbnZhciBSZWNvZ25pdGlvbkV2ZW50QXJncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVjb2duaXRpb25FdmVudEFyZ3MsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVjb2duaXRpb25FdmVudEFyZ3Mob2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc2Vzc2lvbklkKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2T2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pdGlvbkV2ZW50QXJncy5wcm90b3R5cGUsIFwib2Zmc2V0XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgdGhlIG1lc3NhZ2Ugb2Zmc2V0XG4gICAgICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25FdmVudEFyZ3MucHJvdG90eXBlLm9mZnNldFxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2T2Zmc2V0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUmVjb2duaXRpb25FdmVudEFyZ3M7XG59KEV4cG9ydHNfMS5TZXNzaW9uRXZlbnRBcmdzKSk7XG5leHBvcnRzLlJlY29nbml0aW9uRXZlbnRBcmdzID0gUmVjb2duaXRpb25FdmVudEFyZ3M7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlY29nbml0aW9uRXZlbnRBcmdzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogRGVmaW5lcyByZXN1bHQgb2Ygc3BlZWNoIHJlY29nbml0aW9uLlxuICogQGNsYXNzIFJlY29nbml0aW9uUmVzdWx0XG4gKi9cbnZhciBSZWNvZ25pdGlvblJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXN1bHRJZCAtIFRoZSByZXN1bHQgaWQuXG4gICAgICogQHBhcmFtIHtSZXN1bHRSZWFzb259IHJlYXNvbiAtIFRoZSByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgcmVjb2duaXplZCB0ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbnRvIHRoZSBzdHJlYW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqc29uIC0gQWRkaXRpb25hbCBKc29uLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gcHJvcGVydGllcyAtIEFkZGl0aW9uYWwgcHJvcGVydGllcywgaWYgcHJvdmlkZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVjb2duaXRpb25SZXN1bHQocmVzdWx0SWQsIHJlYXNvbiwgdGV4dCwgZHVyYXRpb24sIG9mZnNldCwgZXJyb3JEZXRhaWxzLCBqc29uLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdElkID0gcmVzdWx0SWQ7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2VGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMucHJpdkR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgIHRoaXMucHJpdk9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZKc29uID0ganNvbjtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IHByb3BlcnRpZXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUsIFwicmVzdWx0SWRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSByZXN1bHQgaWRlbnRpZmllci5cbiAgICAgICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUucmVzdWx0SWRcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gU3BlY2lmaWVzIHRoZSByZXN1bHQgaWRlbnRpZmllci5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdElkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLCBcInJlYXNvblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgc3RhdHVzIG9mIHRoZSByZXN1bHQuXG4gICAgICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLnJlYXNvblxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7UmVzdWx0UmVhc29ufSBTcGVjaWZpZXMgc3RhdHVzIG9mIHRoZSByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUsIFwidGV4dFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmVzZW50cyB0aGUgcmVjb2duaXplZCB0ZXh0IGluIHRoZSByZXN1bHQuXG4gICAgICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLnRleHRcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gUHJlc2VudHMgdGhlIHJlY29nbml6ZWQgdGV4dCBpbiB0aGUgcmVzdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZSwgXCJkdXJhdGlvblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEdXJhdGlvbiBvZiByZWNvZ25pemVkIHNwZWVjaCBpbiAxMDAgbmFubyBzZWNvbmQgaW5jZW1lbnRzLlxuICAgICAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5kdXJhdGlvblxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBEdXJhdGlvbiBvZiByZWNvZ25pemVkIHNwZWVjaCBpbiAxMDAgbmFubyBzZWNvbmQgaW5jZW1lbnRzLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RHVyYXRpb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUsIFwib2Zmc2V0XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9mZnNldCBvZiByZWNvZ25pemVkIHNwZWVjaCBpbiAxMDAgbmFubyBzZWNvbmQgaW5jZW1lbnRzLlxuICAgICAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5vZmZzZXRcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge251bWJlcn0gT2Zmc2V0IG9mIHJlY29nbml6ZWQgc3BlZWNoIGluIDEwMCBuYW5vIHNlY29uZCBpbmNlbWVudHMuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZPZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUsIFwiZXJyb3JEZXRhaWxzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHJlY29nbml0aW9uLCBwcm92aWRlcyBkZXRhaWxzIG9mIHRoZSBvY2N1cnJlZCBlcnJvci5cbiAgICAgICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUuZXJyb3JEZXRhaWxzXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGEgYnJpZWYgZGVzY3JpcHRpb24gb2YgYW4gZXJyb3IuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUsIFwianNvblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHN0cmluZyBjb250YWluaW5nIEpzb24gc2VyaWFsaXplZCByZWNvZ25pdGlvbiByZXN1bHQgYXMgaXQgd2FzIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZpY2UuXG4gICAgICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLmpzb25cbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEpzb24gc2VyaWFsaXplZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgcmVzdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2SnNvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZSwgXCJwcm9wZXJ0aWVzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBUaGUgc2V0IG9mIHByb3BlcnRpZXMgZXhwb3NlZCBpbiB0aGUgcmVzdWx0LlxuICAgICAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBzZXQgb2YgcHJvcGVydGllcyBleHBvc2VkIGluIHRoZSByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUmVjb2duaXRpb25SZXN1bHQ7XG59KCkpO1xuZXhwb3J0cy5SZWNvZ25pdGlvblJlc3VsdCA9IFJlY29nbml0aW9uUmVzdWx0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWNvZ25pdGlvblJlc3VsdC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiKTtcbnZhciBFeHBvcnRzXzIgPSByZXF1aXJlKFwiLi4vY29tbW9uL0V4cG9ydHNcIik7XG52YXIgQ29udHJhY3RzXzEgPSByZXF1aXJlKFwiLi9Db250cmFjdHNcIik7XG52YXIgRXhwb3J0c18zID0gcmVxdWlyZShcIi4vRXhwb3J0c1wiKTtcbi8qKlxuICogRGVmaW5lcyB0aGUgYmFzZSBjbGFzcyBSZWNvZ25pemVyIHdoaWNoIG1haW5seSBjb250YWlucyBjb21tb24gZXZlbnQgaGFuZGxlcnMuXG4gKiBAY2xhc3MgUmVjb2duaXplclxuICovXG52YXIgUmVjb2duaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiBhIFJlY29nbml6ZXJcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0lucHV0IC0gQW4gb3B0aW9uYWwgYXVkaW8gaW5wdXQgc3RyZWFtIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlY29nbml6ZXIoYXVkaW9Db25maWcsIHByb3BlcnRpZXMsIGNvbm5lY3Rpb25GYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuYXVkaW9Db25maWcgPSAoYXVkaW9Db25maWcgIT09IHVuZGVmaW5lZCkgPyBhdWRpb0NvbmZpZyA6IEV4cG9ydHNfMy5BdWRpb0NvbmZpZy5mcm9tRGVmYXVsdE1pY3JvcGhvbmVJbnB1dCgpO1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gcHJvcGVydGllcy5jbG9uZSgpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRmFjdG9yeSA9IGNvbm5lY3Rpb25GYWN0b3J5O1xuICAgICAgICB0aGlzLmltcGxDb21tb25SZWNvZ25pemVyU2V0dXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBvZiBhc3NvY2lhdGVkIHJlc291cmNlcy5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIFJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29nbml6ZXIucHJvdG90eXBlLCBcImludGVybmFsRGF0YVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBASW50ZXJuYWxcbiAgICAgICAgICogSW50ZXJuYWwgZGF0YSBtZW1iZXIgdG8gc3VwcG9ydCBmcm9tUmVjb2duaXplciogcGF0dGVybiBtZXRob2RzIG9uIG90aGVyIGNsYXNzZXMuXG4gICAgICAgICAqIERvIG5vdCB1c2UgZXh0ZXJuYWxseSwgb2JqZWN0IHJldHVybmVkIHdpbGwgY2hhbmdlIHdpdGhvdXQgd2FybmluZyBvciBub3RpdmUuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZWNvO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBwZXJmb3JtcyBjbGVhbnVwIG9mIHJlc291cmNlcy5cbiAgICAgKiBUaGUgQm9vbGVhbiBwYXJhbWV0ZXIgZGlzcG9zaW5nIGluZGljYXRlcyB3aGV0aGVyIHRoZSBtZXRob2QgaXMgY2FsbGVkXG4gICAgICogZnJvbSBEaXNwb3NlIChpZiBkaXNwb3NpbmcgaXMgdHJ1ZSkgb3IgZnJvbSB0aGUgZmluYWxpemVyIChpZiBkaXNwb3NpbmcgaXMgZmFsc2UpLlxuICAgICAqIERlcml2ZWQgY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gZGlzcG9zZSByZXNvdXJjZSBpZiBuZWVkZWQuXG4gICAgICogQG1lbWJlciBSZWNvZ25pemVyLnByb3RvdHlwZS5kaXNwb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzcG9zaW5nIC0gRmxhZyB0byByZXF1ZXN0IGRpc3Bvc2FsLlxuICAgICAqL1xuICAgIFJlY29nbml6ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoZGlzcG9zaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZSZWNvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjby5hdWRpb1NvdXJjZS50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjby5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWQgPSB0cnVlO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29nbml6ZXIsIFwidGVsZW1ldHJ5RW5hYmxlZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSB0ZWxlbWV0cnkgc2V0dGluZy5cbiAgICAgICAgICogQG1lbWJlciBSZWNvZ25pemVyLnByb3RvdHlwZS50ZWxlbWV0cnlFbmFibGVkXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHRlbGVtZXRyeSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzEuU2VydmljZVJlY29nbml6ZXJCYXNlLnRlbGVtZXRyeURhdGFFbmFibGVkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBnbG9iYWxseSBlbmFibGVzIG9yIGRpc2FibGVzIHRlbGVtZXRyeS5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml6ZXIucHJvdG90eXBlLmVuYWJsZVRlbGVtZXRyeVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gZW5hYmxlZCAtIEdsb2JhbCBzZXR0aW5nIGZvciB0ZWxlbWV0cnkgY29sbGVjdGlvbi5cbiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGVsZW1ldHJ5IGluZm9ybWF0aW9uIGxpa2UgbWljcm9waG9uZSBlcnJvcnMsXG4gICAgICogcmVjb2duaXRpb24gZXJyb3JzIGFyZSBjb2xsZWN0ZWQgYW5kIHNlbnQgdG8gTWljcm9zb2Z0LlxuICAgICAqIElmIHNldCB0byBmYWxzZSwgbm8gdGVsZW1ldHJ5IGlzIHNlbnQgdG8gTWljcm9zb2Z0LlxuICAgICAqL1xuICAgIC8qIHRzbGludDpkaXNhYmxlOm1lbWJlci1vcmRlcmluZyAqL1xuICAgIFJlY29nbml6ZXIuZW5hYmxlVGVsZW1ldHJ5ID0gZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICAgICAgRXhwb3J0c18xLlNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgfTtcbiAgICAvLyBEb2VzIHRoZSBnZW5lcmljIHJlY29nbml6ZXIgc2V0dXAgdGhhdCBpcyBjb21tb24gYWNjcm9zcyBhbGwgcmVjb2duaXplciB0eXBlcy5cbiAgICBSZWNvZ25pemVyLnByb3RvdHlwZS5pbXBsQ29tbW9uUmVjb2duaXplclNldHVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3NQbGF0Zm9ybSA9ICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSA/IFwiQnJvd3NlclwiIDogXCJOb2RlXCI7XG4gICAgICAgIHZhciBvc05hbWUgPSBcInVua25vd25cIjtcbiAgICAgICAgdmFyIG9zVmVyc2lvbiA9IFwidW5rbm93blwiO1xuICAgICAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgb3NQbGF0Zm9ybSA9IG9zUGxhdGZvcm0gKyBcIi9cIiArIG5hdmlnYXRvci5wbGF0Zm9ybTtcbiAgICAgICAgICAgIG9zTmFtZSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG4gICAgICAgICAgICBvc1ZlcnNpb24gPSBuYXZpZ2F0b3IuYXBwVmVyc2lvbjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVjb2duaXplckNvbmZpZyA9IHRoaXMuY3JlYXRlUmVjb2duaXplckNvbmZpZyhuZXcgRXhwb3J0c18xLlNwZWVjaFNlcnZpY2VDb25maWcobmV3IEV4cG9ydHNfMS5Db250ZXh0KG5ldyBFeHBvcnRzXzEuT1Mob3NQbGF0Zm9ybSwgb3NOYW1lLCBvc1ZlcnNpb24pKSkpO1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uS2V5ID0gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShFeHBvcnRzXzMuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHVuZGVmaW5lZCk7XG4gICAgICAgIHZhciBhdXRoZW50aWNhdGlvbiA9IChzdWJzY3JpcHRpb25LZXkgJiYgc3Vic2NyaXB0aW9uS2V5ICE9PSBcIlwiKSA/XG4gICAgICAgICAgICBuZXcgRXhwb3J0c18xLkNvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uKHN1YnNjcmlwdGlvbktleSkgOlxuICAgICAgICAgICAgbmV3IEV4cG9ydHNfMS5Db2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uKGZ1bmN0aW9uIChhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF1dGhvcml6YXRpb25Ub2tlbiA9IF90aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KEV4cG9ydHNfMy5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzIuUHJvbWlzZUhlbHBlci5mcm9tUmVzdWx0KGF1dGhvcml6YXRpb25Ub2tlbik7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXV0aEZldGNoRXZlbnRJZCkge1xuICAgICAgICAgICAgICAgIHZhciBhdXRob3JpemF0aW9uVG9rZW4gPSBfdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShFeHBvcnRzXzMuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLlByb21pc2VIZWxwZXIuZnJvbVJlc3VsdChhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJpdlJlY28gPSB0aGlzLmNyZWF0ZVNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCB0aGlzLnByaXZDb25uZWN0aW9uRmFjdG9yeSwgdGhpcy5hdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZyk7XG4gICAgfTtcbiAgICAvLyBTdGFydCB0aGUgcmVjb2duaXRpb25cbiAgICBSZWNvZ25pemVyLnByb3RvdHlwZS5pbXBsUmVjb2duaXplclN0YXJ0ID0gZnVuY3Rpb24gKHJlY29nbml0aW9uTW9kZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMucHJpdlJlY28ucmVjb2duaXplKHJlY29nbml0aW9uTW9kZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKS5vbihcbiAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbiAgICAgICAgZnVuY3Rpb24gKHJlc3VsdCkgeyB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghIWVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAvLyBJbnRlcm5hbCBlcnJvciB3aXRoIHNlcnZpY2UgY29tbXVuaWNhdGlvbi5cbiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKFwiUnVudGltZSBlcnJvcjogXCIgKyBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUmVjb2duaXplci5wcm90b3R5cGUuaW1wbFJlY29nbml6ZXJTdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2UmVjbykge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjby5zdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFJlY29nbml6ZXI7XG59KCkpO1xuZXhwb3J0cy5SZWNvZ25pemVyID0gUmVjb2duaXplcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb2duaXplci5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqIERlZmluZXMgdGhlIHBvc3NpYmxlIHJlYXNvbnMgYSByZWNvZ25pdGlvbiByZXN1bHQgbWlnaHQgYmUgZ2VuZXJhdGVkLlxuICogQGNsYXNzIFJlc3VsdFJlYXNvblxuICovXG52YXIgUmVzdWx0UmVhc29uO1xuKGZ1bmN0aW9uIChSZXN1bHRSZWFzb24pIHtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgc3BlZWNoIGNvdWxkIG5vdCBiZSByZWNvZ25pemVkLiBNb3JlIGRldGFpbHNcbiAgICAgKiBjYW4gYmUgZm91bmQgaW4gdGhlIE5vTWF0Y2hEZXRhaWxzIG9iamVjdC5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5Ob01hdGNoXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIk5vTWF0Y2hcIl0gPSAwXSA9IFwiTm9NYXRjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSByZWNvZ25pdGlvbiB3YXMgY2FuY2VsZWQuIE1vcmUgZGV0YWlsc1xuICAgICAqIGNhbiBiZSBmb3VuZCB1c2luZyB0aGUgQ2FuY2VsbGF0aW9uRGV0YWlscyBvYmplY3QuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uQ2FuY2VsZWRcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiQ2FuY2VsZWRcIl0gPSAxXSA9IFwiQ2FuY2VsZWRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHNwZWVjaCByZXN1bHQgY29udGFpbnMgaHlwb3RoZXNpcyB0ZXh0LlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlJlY29nbml6ZWRTcGVlY2hcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiUmVjb2duaXppbmdTcGVlY2hcIl0gPSAyXSA9IFwiUmVjb2duaXppbmdTcGVlY2hcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHNwZWVjaCByZXN1bHQgY29udGFpbnMgZmluYWwgdGV4dCB0aGF0IGhhcyBiZWVuIHJlY29nbml6ZWQuXG4gICAgICogU3BlZWNoIFJlY29nbml0aW9uIGlzIG5vdyBjb21wbGV0ZSBmb3IgdGhpcyBwaHJhc2UuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVjb2duaXplZFNwZWVjaFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJSZWNvZ25pemVkU3BlZWNoXCJdID0gM10gPSBcIlJlY29nbml6ZWRTcGVlY2hcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIGludGVudCByZXN1bHQgY29udGFpbnMgaHlwb3RoZXNpcyB0ZXh0IGFuZCBpbnRlbnQuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVjb2duaXppbmdJbnRlbnRcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiUmVjb2duaXppbmdJbnRlbnRcIl0gPSA0XSA9IFwiUmVjb2duaXppbmdJbnRlbnRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIGludGVudCByZXN1bHQgY29udGFpbnMgZmluYWwgdGV4dCBhbmQgaW50ZW50LlxuICAgICAqIFNwZWVjaCBSZWNvZ25pdGlvbiBhbmQgSW50ZW50IGRldGVybWluYXRpb24gYXJlIG5vdyBjb21wbGV0ZSBmb3IgdGhpcyBwaHJhc2UuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVjb2duaXplZEludGVudFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJSZWNvZ25pemVkSW50ZW50XCJdID0gNV0gPSBcIlJlY29nbml6ZWRJbnRlbnRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHRyYW5zbGF0aW9uIHJlc3VsdCBjb250YWlucyBoeXBvdGhlc2lzIHRleHQgYW5kIGl0cyB0cmFuc2xhdGlvbihzKS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5UcmFuc2xhdGluZ1NwZWVjaFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJUcmFuc2xhdGluZ1NwZWVjaFwiXSA9IDZdID0gXCJUcmFuc2xhdGluZ1NwZWVjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgdHJhbnNsYXRpb24gcmVzdWx0IGNvbnRhaW5zIGZpbmFsIHRleHQgYW5kIGNvcnJlc3BvbmRpbmcgdHJhbnNsYXRpb24ocykuXG4gICAgICogU3BlZWNoIFJlY29nbml0aW9uIGFuZCBUcmFuc2xhdGlvbiBhcmUgbm93IGNvbXBsZXRlIGZvciB0aGlzIHBocmFzZS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5UcmFuc2xhdGVkU3BlZWNoXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlRyYW5zbGF0ZWRTcGVlY2hcIl0gPSA3XSA9IFwiVHJhbnNsYXRlZFNwZWVjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgc3ludGhlc2l6ZWQgYXVkaW8gcmVzdWx0IGNvbnRhaW5zIGEgbm9uLXplcm8gYW1vdW50IG9mIGF1ZGlvIGRhdGFcbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpb1xuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJTeW50aGVzaXppbmdBdWRpb1wiXSA9IDhdID0gXCJTeW50aGVzaXppbmdBdWRpb1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgc3ludGhlc2l6ZWQgYXVkaW8gaXMgbm93IGNvbXBsZXRlIGZvciB0aGlzIHBocmFzZS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpb0NvbXBsZXRlZFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJTeW50aGVzaXppbmdBdWRpb0NvbXBsZXRlZFwiXSA9IDldID0gXCJTeW50aGVzaXppbmdBdWRpb0NvbXBsZXRlZFwiO1xufSkoUmVzdWx0UmVhc29uID0gZXhwb3J0cy5SZXN1bHRSZWFzb24gfHwgKGV4cG9ydHMuUmVzdWx0UmVhc29uID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVzdWx0UmVhc29uLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogRGVmaW5lcyBjb250ZW50IGZvciBzZXNzaW9uIGV2ZW50cyBsaWtlIFNlc3Npb25TdGFydGVkL1N0b3BwZWQsIFNvdW5kU3RhcnRlZC9TdG9wcGVkLlxuICogQGNsYXNzIFNlc3Npb25FdmVudEFyZ3NcbiAqL1xudmFyIFNlc3Npb25FdmVudEFyZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gU2Vzc2lvbkV2ZW50QXJncyhzZXNzaW9uSWQpIHtcbiAgICAgICAgdGhpcy5wcml2U2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2Vzc2lvbkV2ZW50QXJncy5wcm90b3R5cGUsIFwic2Vzc2lvbklkXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgdGhlIHNlc3Npb24gaWRlbnRpZmllci5cbiAgICAgICAgICogQG1lbWJlciBTZXNzaW9uRXZlbnRBcmdzLnByb3RvdHlwZS5zZXNzaW9uSWRcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gUmVwcmVzZW50cyB0aGUgc2Vzc2lvbiBpZGVudGlmaWVyLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U2Vzc2lvbklkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gU2Vzc2lvbkV2ZW50QXJncztcbn0oKSk7XG5leHBvcnRzLlNlc3Npb25FdmVudEFyZ3MgPSBTZXNzaW9uRXZlbnRBcmdzO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXNzaW9uRXZlbnRBcmdzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIik7XG52YXIgQ29udHJhY3RzXzEgPSByZXF1aXJlKFwiLi9Db250cmFjdHNcIik7XG52YXIgRXhwb3J0c18yID0gcmVxdWlyZShcIi4vRXhwb3J0c1wiKTtcbi8qKlxuICogU3BlZWNoIGNvbmZpZ3VyYXRpb24uXG4gKiBAY2xhc3MgU3BlZWNoQ29uZmlnXG4gKi9cbnZhciBTcGVlY2hDb25maWcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gU3BlZWNoQ29uZmlnKCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGF0aWMgaW5zdGFuY2Ugb2YgU3BlZWNoQ29uZmlnIHJldHVybmVkIGJ5IHBhc3Npbmcgc3Vic2NyaXB0aW9uS2V5IGFuZCBzZXJ2aWNlIHJlZ2lvbi5cbiAgICAgKiBOb3RlOiBQbGVhc2UgdXNlIHlvdXIgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nIHN1YnNjcmlwdGlvbiBrZXkgaW4gY2FzZSB5b3Ugd2FudCB0byB1c2UgdGhlIEludGVudCByZWNvZ25pemVyLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoQ29uZmlnLmZyb21TdWJzY3JpcHRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvbktleSAtIFRoZSBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpb24gLSBUaGUgcmVnaW9uIG5hbWUgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHJldHVybnMge1NwZWVjaENvbmZpZ30gVGhlIHNwZWVjaCBmYWN0b3J5XG4gICAgICovXG4gICAgU3BlZWNoQ29uZmlnLmZyb21TdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uS2V5LCByZWdpb24pIHtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHN1YnNjcmlwdGlvbktleSwgXCJzdWJzY3JpcHRpb25LZXlcIik7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShyZWdpb24sIFwicmVnaW9uXCIpO1xuICAgICAgICB2YXIgc3BlZWNoSW1wbCA9IG5ldyBTcGVlY2hDb25maWdJbXBsKCk7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uLCByZWdpb24pO1xuICAgICAgICBzcGVlY2hJbXBsLnNldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0ludGVudFJlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHN1YnNjcmlwdGlvbktleSk7XG4gICAgICAgIHJldHVybiBzcGVlY2hJbXBsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgc3BlZWNoIGNvbmZpZyB3aXRoIHNwZWNpZmllZCBlbmRwb2ludCBhbmQgc3Vic2NyaXB0aW9uIGtleS5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBvbmx5IGZvciB1c2VycyB3aG8gdXNlIGEgbm9uLXN0YW5kYXJkIHNlcnZpY2UgZW5kcG9pbnQgb3IgcGFyYW1ldGVycy5cbiAgICAgKiBOb3RlOiBQbGVhc2UgdXNlIHlvdXIgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nIHN1YnNjcmlwdGlvbiBrZXkgaW4gY2FzZSB5b3Ugd2FudCB0byB1c2UgdGhlIEludGVudCByZWNvZ25pemVyLlxuICAgICAqIE5vdGU6IFRoZSBxdWVyeSBwYXJhbWV0ZXJzIHNwZWNpZmllZCBpbiB0aGUgZW5kcG9pbnQgVVJMIGFyZSBub3QgY2hhbmdlZCwgZXZlbiBpZiB0aGV5IGFyZSBzZXQgYnkgYW55IG90aGVyIEFQSXMuXG4gICAgICogRm9yIGV4YW1wbGUsIGlmIGxhbmd1YWdlIGlzIGRlZmluZWQgaW4gdGhlIHVyaSBhcyBxdWVyeSBwYXJhbWV0ZXIgXCJsYW5ndWFnZT1kZS1ERVwiLCBhbmQgYWxzbyBzZXQgYnlcbiAgICAgKiAgICAgICAgICAgICAgU3BlZWNoQ29uZmlnLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UgPSBcImVuLVVTXCIsIHRoZSBsYW5ndWFnZSBzZXR0aW5nIGluIHVyaSB0YWtlcyBwcmVjZWRlbmNlLFxuICAgICAqICAgICAgICAgICAgICBhbmQgdGhlIGVmZmVjdGl2ZSBsYW5ndWFnZSBpcyBcImRlLURFXCIuIE9ubHkgdGhlIHBhcmFtZXRlcnMgdGhhdCBhcmUgbm90IHNwZWNpZmllZCBpbiB0aGVcbiAgICAgKiAgICAgICAgICAgICAgZW5kcG9pbnQgVVJMIGNhbiBiZSBzZXQgYnkgb3RoZXIgQVBJcy5cbiAgICAgKiBOb3RlOiBUbyB1c2UgYXV0aG9yaXphdGlvbiB0b2tlbiB3aXRoIGZyb21FbmRwb2ludCwgcGFzcyBhbiBlbXB0eSBzdHJpbmcgdG8gdGhlIHN1YnNjcmlwdGlvbktleSBpbiB0aGVcbiAgICAgKiAgICAgICBmcm9tRW5kcG9pbnQgbWV0aG9kLCBhbmQgdGhlbiBzZXQgYXV0aG9yaXphdGlvblRva2VuPVwidG9rZW5cIiBvbiB0aGUgY3JlYXRlZCBTcGVlY2hDb25maWcgaW5zdGFuY2UgdG9cbiAgICAgKiAgICAgICB1c2UgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICogQG1lbWJlciBTcGVlY2hDb25maWcuZnJvbUVuZHBvaW50XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7VVJMfSBlbmRwb2ludCAtIFRoZSBzZXJ2aWNlIGVuZHBvaW50IHRvIGNvbm5lY3QgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvbktleSAtIFRoZSBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IEEgc3BlZWNoIGZhY3RvcnkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgU3BlZWNoQ29uZmlnLmZyb21FbmRwb2ludCA9IGZ1bmN0aW9uIChlbmRwb2ludCwgc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbChlbmRwb2ludCwgXCJlbmRwb2ludFwiKTtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsKHN1YnNjcmlwdGlvbktleSwgXCJzdWJzY3JpcHRpb25LZXlcIik7XG4gICAgICAgIHZhciBzcGVlY2hJbXBsID0gbmV3IFNwZWVjaENvbmZpZ0ltcGwoKTtcbiAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgZW5kcG9pbnQuaHJlZik7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCBzdWJzY3JpcHRpb25LZXkpO1xuICAgICAgICByZXR1cm4gc3BlZWNoSW1wbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIHNwZWVjaCBmYWN0b3J5IHdpdGggc3BlY2lmaWVkIGluaXRpYWwgYXV0aG9yaXphdGlvbiB0b2tlbiBhbmQgcmVnaW9uLlxuICAgICAqIE5vdGU6IFRoZSBjYWxsZXIgbmVlZHMgdG8gZW5zdXJlIHRoYXQgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gaXMgdmFsaWQuIEJlZm9yZSB0aGUgYXV0aG9yaXphdGlvbiB0b2tlblxuICAgICAqICAgICAgIGV4cGlyZXMsIHRoZSBjYWxsZXIgbmVlZHMgdG8gcmVmcmVzaCBpdCBieSBjYWxsaW5nIHRoaXMgc2V0dGVyIHdpdGggYSBuZXcgdmFsaWQgdG9rZW4uXG4gICAgICogTm90ZTogUGxlYXNlIHVzZSBhIHRva2VuIGRlcml2ZWQgZnJvbSB5b3VyIExhbmd1YWdlVW5kZXJzdGFuZGluZyBzdWJzY3JpcHRpb24ga2V5IGluIGNhc2UgeW91IHdhbnRcbiAgICAgKiAgICAgICB0byB1c2UgdGhlIEludGVudCByZWNvZ25pemVyLiBBcyBjb25maWd1cmF0aW9uIHZhbHVlcyBhcmUgY29waWVkIHdoZW4gY3JlYXRpbmcgYSBuZXcgcmVjb2duaXplcixcbiAgICAgKiAgICAgICB0aGUgbmV3IHRva2VuIHZhbHVlIHdpbGwgbm90IGFwcGx5IHRvIHJlY29nbml6ZXJzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gY3JlYXRlZC4gRm9yIHJlY29nbml6ZXJzXG4gICAgICogICAgICAgdGhhdCBoYXZlIGJlZW4gY3JlYXRlZCBiZWZvcmUsIHlvdSBuZWVkIHRvIHNldCBhdXRob3JpemF0aW9uIHRva2VuIG9mIHRoZSBjb3JyZXNwb25kaW5nIHJlY29nbml6ZXJcbiAgICAgKiAgICAgICB0byByZWZyZXNoIHRoZSB0b2tlbi4gT3RoZXJ3aXNlLCB0aGUgcmVjb2duaXplcnMgd2lsbCBlbmNvdW50ZXIgZXJyb3JzIGR1cmluZyByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaENvbmZpZy5mcm9tQXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpemF0aW9uVG9rZW4gLSBUaGUgaW5pdGlhbCBhdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpb24gLSBUaGUgcmVnaW9uIG5hbWUgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHJldHVybnMge1NwZWVjaENvbmZpZ30gQSBzcGVlY2ggZmFjdG9yeSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBTcGVlY2hDb25maWcuZnJvbUF1dGhvcml6YXRpb25Ub2tlbiA9IGZ1bmN0aW9uIChhdXRob3JpemF0aW9uVG9rZW4sIHJlZ2lvbikge1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGwoYXV0aG9yaXphdGlvblRva2VuLCBcImF1dGhvcml6YXRpb25Ub2tlblwiKTtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZ2lvbiwgXCJyZWdpb25cIik7XG4gICAgICAgIHZhciBzcGVlY2hJbXBsID0gbmV3IFNwZWVjaENvbmZpZ0ltcGwoKTtcbiAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW50ZW50UmVnaW9uLCByZWdpb24pO1xuICAgICAgICBzcGVlY2hJbXBsLmF1dGhvcml6YXRpb25Ub2tlbiA9IGF1dGhvcml6YXRpb25Ub2tlbjtcbiAgICAgICAgcmV0dXJuIHNwZWVjaEltcGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hDb25maWcucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG4gICAgU3BlZWNoQ29uZmlnLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICByZXR1cm4gU3BlZWNoQ29uZmlnO1xufSgpKTtcbmV4cG9ydHMuU3BlZWNoQ29uZmlnID0gU3BlZWNoQ29uZmlnO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIFNwZWVjaENvbmZpZ0ltcGxcbiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1jbGFzc2VzLXBlci1maWxlXG52YXIgU3BlZWNoQ29uZmlnSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3BlZWNoQ29uZmlnSW1wbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTcGVlY2hDb25maWdJbXBsKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2UHJvcGVydGllcyA9IG5ldyBFeHBvcnRzXzIuUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIF90aGlzLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UgPSBcImVuLVVTXCI7IC8vIFNob3VsZCB3ZSBoYXZlIGEgZGVmYXVsdD9cbiAgICAgICAgX3RoaXMub3V0cHV0Rm9ybWF0ID0gRXhwb3J0c18yLk91dHB1dEZvcm1hdC5TaW1wbGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaENvbmZpZ0ltcGwucHJvdG90eXBlLCBcInByb3BlcnRpZXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3BlZWNoQ29uZmlnSW1wbC5wcm90b3R5cGUsIFwiZW5kUG9pbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVVJMKHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQpKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaENvbmZpZ0ltcGwucHJvdG90eXBlLCBcInN1YnNjcmlwdGlvbktleVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5KTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaENvbmZpZ0ltcGwucHJvdG90eXBlLCBcInJlZ2lvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaENvbmZpZ0ltcGwucHJvdG90eXBlLCBcImF1dGhvcml6YXRpb25Ub2tlblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3BlZWNoQ29uZmlnSW1wbC5wcm90b3R5cGUsIFwic3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlLCB2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hDb25maWdJbXBsLnByb3RvdHlwZSwgXCJvdXRwdXRGb3JtYXRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBFeHBvcnRzXzIuT3V0cHV0Rm9ybWF0W3RoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18xLk91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgdW5kZWZpbmVkKV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KEV4cG9ydHNfMS5PdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIEV4cG9ydHNfMi5PdXRwdXRGb3JtYXRbdmFsdWVdKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaENvbmZpZ0ltcGwucHJvdG90eXBlLCBcImVuZHBvaW50SWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkLCB2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFNwZWVjaENvbmZpZ0ltcGwucHJvdG90eXBlLnNldFByb3BlcnR5ID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbCh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gICAgfTtcbiAgICBTcGVlY2hDb25maWdJbXBsLnByb3RvdHlwZS5nZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lLCBkZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkobmFtZSwgZGVmKTtcbiAgICB9O1xuICAgIFNwZWVjaENvbmZpZ0ltcGwucHJvdG90eXBlLnNldFByb3h5ID0gZnVuY3Rpb24gKHByb3h5SG9zdE5hbWUsIHByb3h5UG9ydCwgcHJveHlVc2VyTmFtZSwgcHJveHlQYXNzd29yZCkge1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkW0V4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5SG9zdE5hbWVdLCBwcm94eUhvc3ROYW1lKTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZFtFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBvcnRdLCBwcm94eVBvcnQpO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkW0V4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5VXNlck5hbWVdLCBwcm94eVVzZXJOYW1lKTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZFtFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBhc3N3b3JkXSwgcHJveHlQYXNzd29yZCk7XG4gICAgfTtcbiAgICBTcGVlY2hDb25maWdJbXBsLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJldCA9IG5ldyBTcGVlY2hDb25maWdJbXBsKCk7XG4gICAgICAgIHJldC5wcml2UHJvcGVydGllcyA9IHRoaXMucHJpdlByb3BlcnRpZXMuY2xvbmUoKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuICAgIHJldHVybiBTcGVlY2hDb25maWdJbXBsO1xufShTcGVlY2hDb25maWcpKTtcbmV4cG9ydHMuU3BlZWNoQ29uZmlnSW1wbCA9IFNwZWVjaENvbmZpZ0ltcGw7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaENvbmZpZy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi9FeHBvcnRzXCIpO1xuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnQgb2YgYSBSZWNvZ25pdGlvbkVycm9yRXZlbnQuXG4gKiBAY2xhc3MgU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJnc1xuICovXG52YXIgU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7Q2FuY2VsbGF0aW9uUmVhc29ufSByZWFzb24gLSBUaGUgY2FuY2VsbGF0aW9uIHJlYXNvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JEZXRhaWxzIC0gRXJyb3IgZGV0YWlscywgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MocmVhc29uLCBlcnJvckRldGFpbHMsIGVycm9yQ29kZSwgb2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb2Zmc2V0LCBzZXNzaW9uSWQpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgICAgIF90aGlzLnByaXZFcnJvckRldGFpbHMgPSBlcnJvckRldGFpbHM7XG4gICAgICAgIF90aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLCBcInJlYXNvblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmVhc29uIHRoZSByZWNvZ25pdGlvbiB3YXMgY2FuY2VsZWQuXG4gICAgICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5wcm90b3R5cGUucmVhc29uXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtDYW5jZWxsYXRpb25SZWFzb259IFNwZWNpZmllcyB0aGUgcmVhc29uIGNhbmNlbGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5wcm90b3R5cGUsIFwiZXJyb3JDb2RlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBlcnJvciBjb2RlIGluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHJlY29nbml0aW9uLlxuICAgICAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMS4wLlxuICAgICAgICAgKiBAcmV0dXJuIEFuIGVycm9yIGNvZGUgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciByZWFzb24uXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckNvZGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZSwgXCJlcnJvckRldGFpbHNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogSW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24sIHByb3ZpZGVzIGRldGFpbHMgb2YgdGhlIG9jY3VycmVkIGVycm9yLlxuICAgICAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLmVycm9yRGV0YWlsc1xuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGVycm9yIGRldGFpbHMuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBTcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzO1xufShFeHBvcnRzXzEuUmVjb2duaXRpb25FdmVudEFyZ3MpKTtcbmV4cG9ydHMuU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyA9IFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3M7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4vRXhwb3J0c1wiKTtcbi8qKlxuICogRGVmaW5lcyBjb250ZW50cyBvZiBzcGVlY2ggcmVjb2duaXppbmcvcmVjb2duaXplZCBldmVudC5cbiAqIEBjbGFzcyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJnc1xuICovXG52YXIgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTcGVlY2hSZWNvZ25pdGlvblJlc3VsdH0gcmVzdWx0IC0gVGhlIHNwZWVjaCByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgb2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb2Zmc2V0LCBzZXNzaW9uSWQpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByaXZSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzLnByb3RvdHlwZSwgXCJyZXN1bHRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MucHJvdG90eXBlLnJlc3VsdFxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7U3BlZWNoUmVjb2duaXRpb25SZXN1bHR9IHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncztcbn0oRXhwb3J0c18xLlJlY29nbml0aW9uRXZlbnRBcmdzKSk7XG5leHBvcnRzLlNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzID0gU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3M7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vKipcbiAqIERlZmluZXMgcmVzdWx0IG9mIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAqIEBjbGFzcyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdFxuICovXG52YXIgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwZWVjaFJlY29nbml0aW9uUmVzdWx0LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXN1bHRJZCAtIFRoZSByZXN1bHQgaWQuXG4gICAgICogQHBhcmFtIHtSZXN1bHRSZWFzb259IHJlYXNvbiAtIFRoZSByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgcmVjb2duaXplZCB0ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbnRvIHRoZSBzdHJlYW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqc29uIC0gQWRkaXRpb25hbCBKc29uLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gcHJvcGVydGllcyAtIEFkZGl0aW9uYWwgcHJvcGVydGllcywgaWYgcHJvdmlkZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gU3BlZWNoUmVjb2duaXRpb25SZXN1bHQocmVzdWx0SWQsIHJlYXNvbiwgdGV4dCwgZHVyYXRpb24sIG9mZnNldCwgZXJyb3JEZXRhaWxzLCBqc29uLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCByZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdDtcbn0oRXhwb3J0c18xLlJlY29nbml0aW9uUmVzdWx0KSk7XG5leHBvcnRzLlNwZWVjaFJlY29nbml0aW9uUmVzdWx0ID0gU3BlZWNoUmVjb2duaXRpb25SZXN1bHQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFJlY29nbml0aW9uUmVzdWx0LmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIik7XG52YXIgU3BlZWNoQ29ubmVjdGlvbkZhY3RvcnlfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24uc3BlZWNoL1NwZWVjaENvbm5lY3Rpb25GYWN0b3J5XCIpO1xudmFyIENvbnRyYWN0c18xID0gcmVxdWlyZShcIi4vQ29udHJhY3RzXCIpO1xudmFyIEV4cG9ydHNfMiA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vKipcbiAqIFBlcmZvcm1zIHNwZWVjaCByZWNvZ25pdGlvbiBmcm9tIG1pY3JvcGhvbmUsIGZpbGUsIG9yIG90aGVyIGF1ZGlvIGlucHV0IHN0cmVhbXMsIGFuZCBnZXRzIHRyYW5zY3JpYmVkIHRleHQgYXMgcmVzdWx0LlxuICogQGNsYXNzIFNwZWVjaFJlY29nbml6ZXJcbiAqL1xudmFyIFNwZWVjaFJlY29nbml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwZWVjaFJlY29nbml6ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogU3BlZWNoUmVjb2duaXplciBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1NwZWVjaENvbmZpZ30gc3BlZWNoQ29uZmlnIC0gQW4gc2V0IG9mIGluaXRpYWwgcHJvcGVydGllcyBmb3IgdGhpcyByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9Db25maWcgLSBBbiBvcHRpb25hbCBhdWRpbyBjb25maWd1cmF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNwZWVjaFJlY29nbml6ZXIoc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc3BlZWNoQ29uZmlnSW1wbCA9IHNwZWVjaENvbmZpZztcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsKHNwZWVjaENvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uoc3BlZWNoQ29uZmlnSW1wbC5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSksIEV4cG9ydHNfMi5Qcm9wZXJ0eUlkW0V4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZV0pO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGF1ZGlvQ29uZmlnLCBzcGVlY2hDb25maWdJbXBsLnByb3BlcnRpZXMsIG5ldyBTcGVlY2hDb25uZWN0aW9uRmFjdG9yeV8xLlNwZWVjaENvbm5lY3Rpb25GYWN0b3J5KCkpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByaXZEaXNwb3NlZFNwZWVjaFJlY29nbml6ZXIgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUsIFwiZW5kcG9pbnRJZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBlbmRwb2ludCBpZCBvZiBhIGN1c3RvbWl6ZWQgc3BlZWNoIG1vZGVsIHRoYXQgaXMgdXNlZCBmb3Igc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLmVuZHBvaW50SWRcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIGVuZHBvaW50IGlkIG9mIGEgY3VzdG9taXplZCBzcGVlY2ggbW9kZWwgdGhhdCBpcyB1c2VkIGZvciBzcGVlY2ggcmVjb2duaXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRTcGVlY2hSZWNvZ25pemVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZCwgXCIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDBcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZSwgXCJhdXRob3JpemF0aW9uVG9rZW5cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cy9TZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodG9rZW4sIFwidG9rZW5cIik7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHRva2VuKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLCBcInNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgc3Bva2VuIGxhbmd1YWdlIG9mIHJlY29nbml0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHNwb2tlbiBsYW5ndWFnZSBvZiByZWNvZ25pdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFNwZWVjaFJlY29nbml6ZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUsIFwib3V0cHV0Rm9ybWF0XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIG91dHB1dCBmb3JtYXQgb2YgcmVjb2duaXRpb24uXG4gICAgICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUub3V0cHV0Rm9ybWF0XG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtPdXRwdXRGb3JtYXR9IFRoZSBvdXRwdXQgZm9ybWF0IG9mIHJlY29nbml0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkU3BlZWNoUmVjb2duaXplcik7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KEV4cG9ydHNfMS5PdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIEV4cG9ydHNfMi5PdXRwdXRGb3JtYXRbRXhwb3J0c18yLk91dHB1dEZvcm1hdC5TaW1wbGVdKSA9PT0gRXhwb3J0c18yLk91dHB1dEZvcm1hdFtFeHBvcnRzXzIuT3V0cHV0Rm9ybWF0LlNpbXBsZV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLk91dHB1dEZvcm1hdC5TaW1wbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRXhwb3J0c18yLk91dHB1dEZvcm1hdC5EZXRhaWxlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLCBcInByb3BlcnRpZXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgU3BlZWNoUmVjb2duaXplci5cbiAgICAgICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIFNwZWVjaFJlY29nbml6ZXIuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBTdGFydHMgc3BlZWNoIHJlY29nbml0aW9uLCBhbmQgc3RvcHMgYWZ0ZXIgdGhlIGZpcnN0IHV0dGVyYW5jZSBpcyByZWNvZ25pemVkLlxuICAgICAqIFRoZSB0YXNrIHJldHVybnMgdGhlIHJlY29nbml0aW9uIHRleHQgYXMgcmVzdWx0LlxuICAgICAqIE5vdGU6IFJlY29nbml6ZU9uY2VBc3luYygpIHJldHVybnMgd2hlbiB0aGUgZmlyc3QgdXR0ZXJhbmNlIGhhcyBiZWVuIHJlY29nbml6ZWQsXG4gICAgICogICAgICAgc28gaXQgaXMgc3VpdGFibGUgb25seSBmb3Igc2luZ2xlIHNob3QgcmVjb2duaXRpb25cbiAgICAgKiAgICAgICBsaWtlIGNvbW1hbmQgb3IgcXVlcnkuIEZvciBsb25nLXJ1bm5pbmcgcmVjb2duaXRpb24sIHVzZSBTdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCkgaW5zdGVhZC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnJlY29nbml6ZU9uY2VBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayB0aGF0IHJlY2VpdmVkIHRoZSBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnJlY29nbml6ZU9uY2VBc3luYyA9IGZ1bmN0aW9uIChjYiwgZXJyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkU3BlZWNoUmVjb2duaXplcik7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0YXJ0KEV4cG9ydHNfMS5SZWNvZ25pdGlvbk1vZGUuSW50ZXJhY3RpdmUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgZXJyKHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERlc3Ryb3kgdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBzcGVlY2ggcmVjb2duaXRpb24sIHVudGlsIHN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpIGlzIGNhbGxlZC5cbiAgICAgKiBVc2VyIG11c3Qgc3Vic2NyaWJlIHRvIGV2ZW50cyB0byByZWNlaXZlIHJlY29nbml0aW9uIHJlc3VsdHMuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5zdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgcmVjb2duaXRpb24gaGFzIHN0YXJ0ZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5zdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jID0gZnVuY3Rpb24gKGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRTcGVlY2hSZWNvZ25pemVyKTtcbiAgICAgICAgICAgIHRoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RhcnQoRXhwb3J0c18xLlJlY29nbml0aW9uTW9kZS5Db252ZXJzYXRpb24sIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIC8vIHJlcG9ydCByZXN1bHQgdG8gcHJvbWlzZS5cbiAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RvcHMgY29udGludW91cyBzcGVlY2ggcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5zdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyA9IGZ1bmN0aW9uIChjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkU3BlZWNoUmVjb2duaXplcik7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycihlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEZXN0cm95IHRoZSByZWNvZ25pemVyLlxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdGFydHMgc3BlZWNoIHJlY29nbml0aW9uIHdpdGgga2V5d29yZCBzcG90dGluZywgdW50aWxcbiAgICAgKiBzdG9wS2V5d29yZFJlY29nbml0aW9uQXN5bmMoKSBpcyBjYWxsZWQuXG4gICAgICogVXNlciBtdXN0IHN1YnNjcmliZSB0byBldmVudHMgdG8gcmVjZWl2ZSByZWNvZ25pdGlvbiByZXN1bHRzLlxuICAgICAqIE5vdGU6IEtleSB3b3JkIHNwb3R0aW5nIGZ1bmN0aW9uYWxpdHkgaXMgb25seSBhdmFpbGFibGUgb24gdGhlXG4gICAgICogICAgICBTcGVlY2ggRGV2aWNlcyBTREsuIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBjdXJyZW50bHkgbm90IGluY2x1ZGVkIGluIHRoZSBTREsgaXRzZWxmLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuc3RhcnRLZXl3b3JkUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsfSBtb2RlbCBUaGUga2V5d29yZCByZWNvZ25pdGlvbiBtb2RlbCB0aGF0XG4gICAgICogICAgICAgIHNwZWNpZmllcyB0aGUga2V5d29yZCB0byBiZSByZWNvZ25pemVkLlxuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgcmVjb2duaXRpb24gaGFzIHN0YXJ0ZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5zdGFydEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jID0gZnVuY3Rpb24gKG1vZGVsLCBjYiwgZXJyKSB7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbChtb2RlbCwgXCJtb2RlbFwiKTtcbiAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICBlcnIoXCJOb3QgeWV0IGltcGxlbWVudGVkLlwiKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RvcHMgY29udGludW91cyBzcGVlY2ggcmVjb2duaXRpb24uXG4gICAgICogTm90ZTogS2V5IHdvcmQgc3BvdHRpbmcgZnVuY3Rpb25hbGl0eSBpcyBvbmx5IGF2YWlsYWJsZSBvbiB0aGVcbiAgICAgKiAgICAgICBTcGVlY2ggRGV2aWNlcyBTREsuIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBjdXJyZW50bHkgbm90IGluY2x1ZGVkIGluIHRoZSBTREsgaXRzZWxmLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuc3RvcEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgcmVjb2duaXRpb24gaGFzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5zdG9wS2V5d29yZFJlY29nbml0aW9uQXN5bmMgPSBmdW5jdGlvbiAoY2IsIGVycikge1xuICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogY2xvc2VzIGFsbCBleHRlcm5hbCByZXNvdXJjZXMgaGVsZCBieSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRTcGVlY2hSZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzcG9zZXMgYW55IHJlc291cmNlcyBoZWxkIGJ5IHRoZSBvYmplY3QuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5kaXNwb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzcG9zaW5nIC0gdHJ1ZSBpZiBkaXNwb3NpbmcgdGhlIG9iamVjdC5cbiAgICAgKi9cbiAgICBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKGRpc3Bvc2luZykge1xuICAgICAgICBpZiAodGhpcy5wcml2RGlzcG9zZWRTcGVlY2hSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpc3Bvc2luZykge1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkU3BlZWNoUmVjb2duaXplciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcywgZGlzcG9zaW5nKTtcbiAgICB9O1xuICAgIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLmNyZWF0ZVJlY29nbml6ZXJDb25maWcgPSBmdW5jdGlvbiAoc3BlZWNoQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgRXhwb3J0c18xLlJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnLCB0aGlzLnByb3BlcnRpZXMpO1xuICAgIH07XG4gICAgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuY3JlYXRlU2VydmljZVJlY29nbml6ZXIgPSBmdW5jdGlvbiAoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICB2YXIgY29uZmlnSW1wbCA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICByZXR1cm4gbmV3IEV4cG9ydHNfMS5TcGVlY2hTZXJ2aWNlUmVjb2duaXplcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGNvbmZpZ0ltcGwsIHJlY29nbml6ZXJDb25maWcsIHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIFNwZWVjaFJlY29nbml6ZXI7XG59KEV4cG9ydHNfMi5SZWNvZ25pemVyKSk7XG5leHBvcnRzLlNwZWVjaFJlY29nbml6ZXIgPSBTcGVlY2hSZWNvZ25pemVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hSZWNvZ25pemVyLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIik7XG52YXIgQ29udHJhY3RzXzEgPSByZXF1aXJlKFwiLi9Db250cmFjdHNcIik7XG52YXIgRXhwb3J0c18yID0gcmVxdWlyZShcIi4vRXhwb3J0c1wiKTtcbi8qKlxuICogU3BlZWNoIHRyYW5zbGF0aW9uIGNvbmZpZ3VyYXRpb24uXG4gKiBAY2xhc3MgU3BlZWNoVHJhbnNsYXRpb25Db25maWdcbiAqL1xudmFyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHJlY29nbml6ZXIgY29uZmlnLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhdGljIGluc3RhbmNlIG9mIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnIHJldHVybmVkIGJ5IHBhc3NpbmcgYSBzdWJzY3JpcHRpb24ga2V5IGFuZCBzZXJ2aWNlIHJlZ2lvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLmZyb21TdWJzY3JpcHRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvbktleSAtIFRoZSBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpb24gLSBUaGUgcmVnaW9uIG5hbWUgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHJldHVybnMge1NwZWVjaFRyYW5zbGF0aW9uQ29uZmlnfSBUaGUgc3BlZWNoIHRyYW5zbGF0aW9uIGNvbmZpZy5cbiAgICAgKi9cbiAgICBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5mcm9tU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbktleSwgcmVnaW9uKSB7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzdWJzY3JpcHRpb25LZXksIFwic3Vic2NyaXB0aW9uS2V5XCIpO1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgdmFyIHJldCA9IG5ldyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwoKTtcbiAgICAgICAgcmV0LnByb3BlcnRpZXMuc2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCBzdWJzY3JpcHRpb25LZXkpO1xuICAgICAgICByZXQucHJvcGVydGllcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdGF0aWMgaW5zdGFuY2Ugb2YgU3BlZWNoVHJhbnNsYXRpb25Db25maWcgcmV0dXJuZWQgYnkgcGFzc2luZyBhdXRob3JpemF0aW9uIHRva2VuIGFuZCBzZXJ2aWNlIHJlZ2lvbi5cbiAgICAgKiBOb3RlOiBUaGUgY2FsbGVyIG5lZWRzIHRvIGVuc3VyZSB0aGF0IHRoZSBhdXRob3JpemF0aW9uIHRva2VuIGlzIHZhbGlkLiBCZWZvcmUgdGhlIGF1dGhvcml6YXRpb24gdG9rZW5cbiAgICAgKiAgICAgICBleHBpcmVzLCB0aGUgY2FsbGVyIG5lZWRzIHRvIHJlZnJlc2ggaXQgYnkgc2V0dGluZyB0aGUgcHJvcGVydHkgYXV0aG9yaXphdGlvblRva2VuIHdpdGggYSBuZXdcbiAgICAgKiAgICAgICB2YWxpZCB0b2tlbi4gT3RoZXJ3aXNlLCBhbGwgdGhlIHJlY29nbml6ZXJzIGNyZWF0ZWQgYnkgdGhpcyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyBpbnN0YW5jZVxuICAgICAqICAgICAgIHdpbGwgZW5jb3VudGVyIGVycm9ycyBkdXJpbmcgcmVjb2duaXRpb24uXG4gICAgICogQXMgY29uZmlndXJhdGlvbiB2YWx1ZXMgYXJlIGNvcGllZCB3aGVuIGNyZWF0aW5nIGEgbmV3IHJlY29nbml6ZXIsIHRoZSBuZXcgdG9rZW4gdmFsdWUgd2lsbCBub3QgYXBwbHlcbiAgICAgKiB0byByZWNvZ25pemVycyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGNyZWF0ZWQuXG4gICAgICogRm9yIHJlY29nbml6ZXJzIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgYmVmb3JlLCB5b3UgbmVlZCB0byBzZXQgYXV0aG9yaXphdGlvbiB0b2tlbiBvZiB0aGUgY29ycmVzcG9uZGluZyByZWNvZ25pemVyXG4gICAgICogdG8gcmVmcmVzaCB0aGUgdG9rZW4uIE90aGVyd2lzZSwgdGhlIHJlY29nbml6ZXJzIHdpbGwgZW5jb3VudGVyIGVycm9ycyBkdXJpbmcgcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5mcm9tQXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpemF0aW9uVG9rZW4gLSBUaGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIC0gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ30gVGhlIHNwZWVjaCB0cmFuc2xhdGlvbiBjb25maWcuXG4gICAgICovXG4gICAgU3BlZWNoVHJhbnNsYXRpb25Db25maWcuZnJvbUF1dGhvcml6YXRpb25Ub2tlbiA9IGZ1bmN0aW9uIChhdXRob3JpemF0aW9uVG9rZW4sIHJlZ2lvbikge1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoYXV0aG9yaXphdGlvblRva2VuLCBcImF1dGhvcml6YXRpb25Ub2tlblwiKTtcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHJlZ2lvbiwgXCJyZWdpb25cIik7XG4gICAgICAgIHZhciByZXQgPSBuZXcgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsKCk7XG4gICAgICAgIHJldC5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCBhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICByZXQucHJvcGVydGllcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBzcGVlY2ggdHJhbnNsYXRpb24gY29uZmlnIHdpdGggc3BlY2lmaWVkIGVuZHBvaW50IGFuZCBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIG9ubHkgZm9yIHVzZXJzIHdobyB1c2UgYSBub24tc3RhbmRhcmQgc2VydmljZSBlbmRwb2ludCBvciBwYXJhbXRlcnMuXG4gICAgICogTm90ZTogVGhlIHF1ZXJ5IHByb3BlcnRpZXMgc3BlY2lmaWVkIGluIHRoZSBlbmRwb2ludCBVUkwgYXJlIG5vdCBjaGFuZ2VkLCBldmVuIGlmIHRoZXkgYXJlXG4gICAgICogICAgICAgc2V0IGJ5IGFueSBvdGhlciBBUElzLiBGb3IgZXhhbXBsZSwgaWYgbGFuZ3VhZ2UgaXMgZGVmaW5lZCBpbiB0aGUgdXJpIGFzIHF1ZXJ5IHBhcmFtZXRlclxuICAgICAqICAgICAgIFwibGFuZ3VhZ2U9ZGUtREVcIiwgYW5kIGFsc28gc2V0IGJ5IHRoZSBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlIHByb3BlcnR5LCB0aGUgbGFuZ3VhZ2VcbiAgICAgKiAgICAgICBzZXR0aW5nIGluIHVyaSB0YWtlcyBwcmVjZWRlbmNlLCBhbmQgdGhlIGVmZmVjdGl2ZSBsYW5ndWFnZSBpcyBcImRlLURFXCIuXG4gICAgICogT25seSB0aGUgcHJvcGVydGllcyB0aGF0IGFyZSBub3Qgc3BlY2lmaWVkIGluIHRoZSBlbmRwb2ludCBVUkwgY2FuIGJlIHNldCBieSBvdGhlciBBUElzLlxuICAgICAqIE5vdGU6IFRvIHVzZSBhdXRob3JpemF0aW9uIHRva2VuIHdpdGggZnJvbUVuZHBvaW50LCBwYXNzIGFuIGVtcHR5IHN0cmluZyB0byB0aGUgc3Vic2NyaXB0aW9uS2V5IGluIHRoZVxuICAgICAqICAgICAgIGZyb21FbmRwb2ludCBtZXRob2QsIGFuZCB0aGVuIHNldCBhdXRob3JpemF0aW9uVG9rZW49XCJ0b2tlblwiIG9uIHRoZSBjcmVhdGVkIFNwZWVjaENvbmZpZyBpbnN0YW5jZSB0b1xuICAgICAqICAgICAgIHVzZSB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLmZyb21FbmRwb2ludFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1VSTH0gZW5kcG9pbnQgLSBUaGUgc2VydmljZSBlbmRwb2ludCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25LZXkgLSBUaGUgc3Vic2NyaXB0aW9uIGtleS5cbiAgICAgKiBAcmV0dXJucyB7U3BlZWNoVHJhbnNsYXRpb25Db25maWd9IEEgc3BlZWNoIGNvbmZpZyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5mcm9tRW5kcG9pbnQgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGwoZW5kcG9pbnQsIFwiZW5kcG9pbnRcIik7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbChzdWJzY3JpcHRpb25LZXksIFwic3Vic2NyaXB0aW9uS2V5XCIpO1xuICAgICAgICB2YXIgcmV0ID0gbmV3IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCgpO1xuICAgICAgICByZXQucHJvcGVydGllcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgZW5kcG9pbnQuaHJlZik7XG4gICAgICAgIHJldC5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uS2V5KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuICAgIHJldHVybiBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZztcbn0oRXhwb3J0c18yLlNwZWVjaENvbmZpZykpO1xuZXhwb3J0cy5TcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyA9IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbFxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWNsYXNzZXMtcGVyLWZpbGVcbnZhciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzID0gbmV3IEV4cG9ydHNfMi5Qcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgX3RoaXMub3V0cHV0Rm9ybWF0ID0gRXhwb3J0c18yLk91dHB1dEZvcm1hdC5TaW1wbGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUsIFwiYXV0aG9yaXphdGlvblRva2VuXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMvU2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgICAgICogSWYgdGhpcyBpcyBzZXQsIHN1YnNjcmlwdGlvbiBrZXkgaXMgaWdub3JlZC5cbiAgICAgICAgICogVXNlciBuZWVkcyB0byBtYWtlIHN1cmUgdGhlIHByb3ZpZGVkIGF1dGhvcml6YXRpb24gdG9rZW4gaXMgdmFsaWQgYW5kIG5vdCBleHBpcmVkLlxuICAgICAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBhdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUsIFwic3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzL1NldHMgdGhlIHNwZWVjaCByZWNvZ25pdGlvbiBsYW5ndWFnZS5cbiAgICAgICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHZhbHVlLCBcInZhbHVlXCIpO1xuICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UsIHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUsIFwic3Vic2NyaXB0aW9uS2V5XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5zdWJzY3JpcHRpb25LZXlcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWRbRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5XSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLCBcIm91dHB1dEZvcm1hdFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBvdXRwdXQgZm9ybWF0XG4gICAgICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5vdXRwdXRGb3JtYXRcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEV4cG9ydHNfMi5PdXRwdXRGb3JtYXRbdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShFeHBvcnRzXzEuT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCB1bmRlZmluZWQpXTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMvU2V0cyB0aGUgb3V0cHV0IGZvcm1hdFxuICAgICAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUub3V0cHV0Rm9ybWF0XG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzEuT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBFeHBvcnRzXzIuT3V0cHV0Rm9ybWF0W3ZhbHVlXSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLCBcImVuZHBvaW50SWRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgZW5kcG9pbnQgaWQuXG4gICAgICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5lbmRwb2ludElkXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cy9TZXRzIHRoZSBlbmRwb2ludCBpZC5cbiAgICAgICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLmVuZHBvaW50SWRcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50LCB2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIEFkZCBhICh0ZXh0KSB0YXJnZXQgbGFuZ3VhZ2UgdG8gdHJhbnNsYXRlIGludG8uXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLmFkZFRhcmdldExhbmd1YWdlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBsYW5ndWFnZSBzdWNoIGFzIGRlLURFXG4gICAgICovXG4gICAgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5hZGRUYXJnZXRMYW5ndWFnZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgIHZhciBsYW5ndWFnZXMgPSB0aGlzLnRhcmdldExhbmd1YWdlcztcbiAgICAgICAgbGFuZ3VhZ2VzLnB1c2godmFsdWUpO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMsIGxhbmd1YWdlcy5qb2luKFwiLFwiKSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZSwgXCJ0YXJnZXRMYW5ndWFnZXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgKHRleHQpIHRhcmdldCBsYW5ndWFnZSB0byB0cmFuc2xhdGUgaW50by5cbiAgICAgICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnRhcmdldExhbmd1YWdlc1xuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgbGFuZ3VhZ2Ugc3VjaCBhcyBkZS1ERVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzLCB1bmRlZmluZWQpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzKS5zcGxpdChcIixcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLCBcInZvaWNlTmFtZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSB2b2ljZSBuYW1lLlxuICAgICAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUudm9pY2VOYW1lXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkW0V4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2VdKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMvU2V0cyB0aGUgdm9pY2Ugb2YgdGhlIHRyYW5zbGF0ZWQgbGFuZ3VhZ2UsIGVuYWJsZSB2b2ljZSBzeW50aGVzaXMgb3V0cHV0LlxuICAgICAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUudm9pY2VOYW1lXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBuYW1lIG9mIHRoZSB2b2ljZS5cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2UsIHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUsIFwicmVnaW9uXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3ZpZGVzIHRoZSByZWdpb24uXG4gICAgICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5yZWdpb25cbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHJlZ2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5zZXRQcm94eSA9IGZ1bmN0aW9uIChwcm94eUhvc3ROYW1lLCBwcm94eVBvcnQsIHByb3h5VXNlck5hbWUsIHByb3h5UGFzc3dvcmQpIHtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZFtFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eUhvc3ROYW1lXSwgcHJveHlIb3N0TmFtZSk7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWRbRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0XSwgcHJveHlQb3J0KTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZFtFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lXSwgcHJveHlVc2VyTmFtZSk7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWRbRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQYXNzd29yZF0sIHByb3h5UGFzc3dvcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBhcmJpdHJhcnkgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLmdldFByb3BlcnR5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZWYgLSBUaGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgaW4gY2FzZSBpdCBpcyBub3Qgc2V0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuXG4gICAgICovXG4gICAgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5nZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lLCBkZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkobmFtZSwgZGVmKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyBhbiBhcmJpdHJhcnkgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnNldFByb3BlcnR5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuXG4gICAgICovXG4gICAgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5zZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLCBcInByb3BlcnRpZXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUHJvdmlkZXMgYWNjZXNzIHRvIGN1c3RvbSBwcm9wZXJ0aWVzLlxuICAgICAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBUaGUgcHJvcGVydGllcy5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIERpc3Bvc2Ugb2YgYXNzb2NpYXRlZCByZXNvdXJjZXMuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIHJldHVybiBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGw7XG59KFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnKSk7XG5leHBvcnRzLlNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCA9IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoVHJhbnNsYXRpb25Db25maWcuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyoqXG4gKiBEZWZpbmUgcGF5bG9hZCBvZiBzcGVlY2ggcmVjb2duaXRpb24gY2FuY2VsZWQgcmVzdWx0IGV2ZW50cy5cbiAqIEBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcbiAqL1xudmFyIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uaWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gY2FuY2VsbGF0aW9uUmVhc29uIC0gVGhlIGNhbmNlbGxhdGlvbiByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7VHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdH0gcmVzdWx0IC0gVGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3Moc2Vzc2lvbmlkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlLCByZXN1bHQpIHtcbiAgICAgICAgdGhpcy5wcml2Q2FuY2VsUmVhc29uID0gY2FuY2VsbGF0aW9uUmVhc29uO1xuICAgICAgICB0aGlzLnByaXZFcnJvckRldGFpbHMgPSBlcnJvckRldGFpbHM7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgdGhpcy5wcml2U2Vzc2lvbklkID0gc2Vzc2lvbmlkO1xuICAgICAgICB0aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLCBcInJlc3VsdFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLnJlc3VsdFxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7VHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdH0gdGhlIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5wcm90b3R5cGUsIFwic2Vzc2lvbklkXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgc2Vzc2lvbiBpZGVudGlmaWVyLlxuICAgICAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5wcm90b3R5cGUuc2Vzc2lvbklkXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBzZXNzaW9uIGlkZW50aWZpZXIuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTZXNzaW9uSWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLCBcInJlYXNvblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmVhc29uIHRoZSByZWNvZ25pdGlvbiB3YXMgY2FuY2VsZWQuXG4gICAgICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5yZWFzb25cbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge0NhbmNlbGxhdGlvblJlYXNvbn0gU3BlY2lmaWVzIHRoZSByZWFzb24gY2FuY2VsZWQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDYW5jZWxSZWFzb247XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLCBcImVycm9yQ29kZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXJyb3IgY29kZSBpbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbi5cbiAgICAgICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjEuMC5cbiAgICAgICAgICogQHJldHVybiBBbiBlcnJvciBjb2RlIHRoYXQgcmVwcmVzZW50cyB0aGUgZXJyb3IgcmVhc29uLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JDb2RlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZSwgXCJlcnJvckRldGFpbHNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogSW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24sIHByb3ZpZGVzIGRldGFpbHMgb2YgdGhlIG9jY3VycmVkIGVycm9yLlxuICAgICAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5wcm90b3R5cGUuZXJyb3JEZXRhaWxzXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgZXJyb3IgZGV0YWlscy5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yRGV0YWlscztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncztcbn0oKSk7XG5leHBvcnRzLlRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyA9IFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEV4cG9ydHNfMSA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vKipcbiAqIFRyYW5zbGF0aW9uIHRleHQgcmVzdWx0IGV2ZW50IGFyZ3VtZW50cy5cbiAqIEBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzXG4gKi9cbnZhciBUcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0fSByZXN1bHQgLSBUaGUgdHJhbnNsYXRpb24gcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgb2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb2Zmc2V0LCBzZXNzaW9uSWQpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByaXZSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MucHJvdG90eXBlLCBcInJlc3VsdFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge1RyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHR9IHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBUcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzO1xufShFeHBvcnRzXzEuUmVjb2duaXRpb25FdmVudEFyZ3MpKTtcbmV4cG9ydHMuVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyA9IFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3M7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4vRXhwb3J0c1wiKTtcbi8qKlxuICogVHJhbnNsYXRpb24gdGV4dCByZXN1bHQuXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdFxuICovXG52YXIgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7VHJhbnNsYXRpb25zfSB0cmFuc2xhdGlvbnMgLSBUaGUgdHJhbnNsYXRpb25zLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXN1bHRJZCAtIFRoZSByZXN1bHQgaWQuXG4gICAgICogQHBhcmFtIHtSZXN1bHRSZWFzb259IHJlYXNvbiAtIFRoZSByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgcmVjb2duaXplZCB0ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbnRvIHRoZSBzdHJlYW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqc29uIC0gQWRkaXRpb25hbCBKc29uLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gcHJvcGVydGllcyAtIEFkZGl0aW9uYWwgcHJvcGVydGllcywgaWYgcHJvdmlkZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCh0cmFuc2xhdGlvbnMsIHJlc3VsdElkLCByZWFzb24sIHRleHQsIGR1cmF0aW9uLCBvZmZzZXQsIGVycm9yRGV0YWlscywganNvbiwgcHJvcGVydGllcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCByZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByaXZUcmFuc2xhdGlvbnMgPSB0cmFuc2xhdGlvbnM7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLCBcInRyYW5zbGF0aW9uc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmVzZW50cyB0aGUgdHJhbnNsYXRpb24gcmVzdWx0cy4gRWFjaCBpdGVtIGluIHRoZSBkaWN0aW9uYXJ5IHJlcHJlc2VudHNcbiAgICAgICAgICogYSB0cmFuc2xhdGlvbiByZXN1bHQgaW4gb25lIG9mIHRhcmdldCBsYW5ndWFnZXMsIHdoZXJlIHRoZSBrZXkgaXMgdGhlIG5hbWVcbiAgICAgICAgICogb2YgdGhlIHRhcmdldCBsYW5ndWFnZSwgaW4gQkNQLTQ3IGZvcm1hdCwgYW5kIHRoZSB2YWx1ZSBpcyB0aGUgdHJhbnNsYXRpb25cbiAgICAgICAgICogdGV4dCBpbiB0aGUgc3BlY2lmaWVkIGxhbmd1YWdlLlxuICAgICAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLnRyYW5zbGF0aW9uc1xuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7VHJhbnNsYXRpb25zfSB0aGUgY3VycmVudCB0cmFuc2xhdGlvbiBtYXAgdGhhdCBob2xkcyBhbGwgdHJhbnNsYXRpb25zIHJlcXVlc3RlZC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9ucztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQ7XG59KEV4cG9ydHNfMS5TcGVlY2hSZWNvZ25pdGlvblJlc3VsdCkpO1xuZXhwb3J0cy5UcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0ID0gVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCIpO1xudmFyIENvbnRyYWN0c18xID0gcmVxdWlyZShcIi4vQ29udHJhY3RzXCIpO1xudmFyIEV4cG9ydHNfMiA9IHJlcXVpcmUoXCIuL0V4cG9ydHNcIik7XG4vKipcbiAqIFRyYW5zbGF0aW9uIHJlY29nbml6ZXJcbiAqIEBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml6ZXJcbiAqL1xudmFyIFRyYW5zbGF0aW9uUmVjb2duaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVHJhbnNsYXRpb25SZWNvZ25pemVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBUcmFuc2xhdGlvblJlY29nbml6ZXIuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ30gc3BlZWNoQ29uZmlnIC0gU2V0IG9mIHByb3BlcnRpZXMgdG8gY29uZmlndXJlIHRoaXMgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGNvbmZpZyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmFuc2xhdGlvblJlY29nbml6ZXIoc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY29uZmlnSW1wbCA9IHNwZWVjaENvbmZpZztcbiAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZOdWxsKGNvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGF1ZGlvQ29uZmlnLCBjb25maWdJbXBsLnByb3BlcnRpZXMsIG5ldyBFeHBvcnRzXzEuVHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeSgpKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMucHJpdlByb3BlcnRpZXMgPSBjb25maWdJbXBsLnByb3BlcnRpZXMuY2xvbmUoKTtcbiAgICAgICAgaWYgKF90aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZSwgdW5kZWZpbmVkKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoX3RoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlKSwgRXhwb3J0c18yLlByb3BlcnR5SWRbRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZV0pO1xuICAgICAgICB9XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShfdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMpLCBFeHBvcnRzXzIuUHJvcGVydHlJZFtFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzXSk7XG4gICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShfdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSksIEV4cG9ydHNfMi5Qcm9wZXJ0eUlkW0V4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZV0pO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLCBcInNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgbGFuZ3VhZ2UgbmFtZSB0aGF0IHdhcyBzZXQgd2hlbiB0aGUgcmVjb2duaXplciB3YXMgY3JlYXRlZC5cbiAgICAgICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gR2V0cyB0aGUgbGFuZ3VhZ2UgbmFtZSB0aGF0IHdhcyBzZXQgd2hlbiB0aGUgcmVjb2duaXplciB3YXMgY3JlYXRlZC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgQ29udHJhY3RzXzEuQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KEV4cG9ydHNfMi5Qcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLCBcInRhcmdldExhbmd1YWdlc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRhcmdldCBsYW5ndWFnZXMgZm9yIHRyYW5zbGF0aW9uIHRoYXQgd2VyZSBzZXQgd2hlbiB0aGUgcmVjb2duaXplciB3YXMgY3JlYXRlZC5cbiAgICAgICAgICogVGhlIGxhbmd1YWdlIGlzIHNwZWNpZmllZCBpbiBCQ1AtNDcgZm9ybWF0LiBUaGUgdHJhbnNsYXRpb24gd2lsbCBwcm92aWRlIHRyYW5zbGF0ZWQgdGV4dCBmb3IgZWFjaCBvZiBsYW5ndWFnZS5cbiAgICAgICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnRhcmdldExhbmd1YWdlc1xuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IEdldHMgdGFyZ2V0IGxhbmd1YWdlcyBmb3IgdHJhbnNsYXRpb24gdGhhdCB3ZXJlIHNldCB3aGVuIHRoZSByZWNvZ25pemVyIHdhcyBjcmVhdGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcykuc3BsaXQoXCIsXCIpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZSwgXCJ2b2ljZU5hbWVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgbmFtZSBvZiBvdXRwdXQgdm9pY2UuXG4gICAgICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS52b2ljZU5hbWVcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIG5hbWUgb2Ygb3V0cHV0IHZvaWNlLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUsIFwiYXV0aG9yaXphdGlvblRva2VuXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoRXhwb3J0c18yLlByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cy9TZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShFeHBvcnRzXzIuUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZSwgXCJwcm9wZXJ0aWVzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIFRyYW5zbGF0aW9uUmVjb2duaXplci5cbiAgICAgICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge1Byb3BlcnR5Q29sbGVjdGlvbn0gVGhlIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgVHJhbnNsYXRpb25SZWNvZ25pemVyLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHJlY29nbml0aW9uIGFuZCB0cmFuc2xhdGlvbiwgYW5kIHN0b3BzIGFmdGVyIHRoZSBmaXJzdCB1dHRlcmFuY2UgaXMgcmVjb2duaXplZC5cbiAgICAgKiBUaGUgdGFzayByZXR1cm5zIHRoZSB0cmFuc2xhdGlvbiB0ZXh0IGFzIHJlc3VsdC5cbiAgICAgKiBOb3RlOiByZWNvZ25pemVPbmNlQXN5bmMgcmV0dXJucyB3aGVuIHRoZSBmaXJzdCB1dHRlcmFuY2UgaGFzIGJlZW4gcmVjb2duaXplZCwgc28gaXQgaXMgc3VpdGFibGVvbmx5XG4gICAgICogICAgICAgZm9yIHNpbmdsZSBzaG90IHJlY29nbml0aW9uIGxpa2UgY29tbWFuZCBvciBxdWVyeS4gRm9yIGxvbmctcnVubmluZyByZWNvZ25pdGlvbixcbiAgICAgKiAgICAgICB1c2Ugc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpIGluc3RlYWQuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnJlY29nbml6ZU9uY2VBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayB0aGF0IHJlY2VpdmVkIHRoZSByZXN1bHQgd2hlbiB0aGUgdHJhbnNsYXRpb24gaGFzIGNvbXBsZXRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUucmVjb2duaXplT25jZUFzeW5jID0gZnVuY3Rpb24gKGNiLCBlcnIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuaW1wbFJlY29nbml6ZXJTdGFydChFeHBvcnRzXzEuUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgICAgICBjYihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHJlY29nbml0aW9uIGFuZCB0cmFuc2xhdGlvbiwgdW50aWwgc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCkgaXMgY2FsbGVkLlxuICAgICAqIFVzZXIgbXVzdCBzdWJzY3JpYmUgdG8gZXZlbnRzIHRvIHJlY2VpdmUgdHJhbnNsYXRpb24gcmVzdWx0cy5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayB0aGF0IHJlY2VpdmVkIHRoZSB0cmFuc2xhdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyA9IGZ1bmN0aW9uIChjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgICAgIHRoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RhcnQoRXhwb3J0c18xLlJlY29nbml0aW9uTW9kZS5Db252ZXJzYXRpb24sIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIC8vIHJlcG9ydCByZXN1bHQgdG8gcHJvbWlzZS5cbiAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RvcHMgY29udGludW91cyByZWNvZ25pdGlvbiBhbmQgdHJhbnNsYXRpb24uXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayB0aGF0IHJlY2VpdmVkIHRoZSB0cmFuc2xhdGlvbiBoYXMgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jID0gZnVuY3Rpb24gKGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0c18xLkNvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIpO1xuICAgICAgICAgICAgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVzdHJveSB0aGUgcmVjb2duaXplci5cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogY2xvc2VzIGFsbCBleHRlcm5hbCByZXNvdXJjZXMgaGVsZCBieSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBDb250cmFjdHNfMS5Db250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkVHJhbnNsYXRpb25SZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgIH07XG4gICAgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKGRpc3Bvc2luZykge1xuICAgICAgICBpZiAodGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIgPSB0cnVlO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcywgZGlzcG9zaW5nKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5jcmVhdGVSZWNvZ25pemVyQ29uZmlnID0gZnVuY3Rpb24gKHNwZWVjaENvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IEV4cG9ydHNfMS5SZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZywgdGhpcy5wcm9wZXJ0aWVzKTtcbiAgICB9O1xuICAgIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUuY3JlYXRlU2VydmljZVJlY29nbml6ZXIgPSBmdW5jdGlvbiAoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICB2YXIgY29uZmlnSW1wbCA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICByZXR1cm4gbmV3IEV4cG9ydHNfMS5UcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgY29uZmlnSW1wbCwgcmVjb2duaXplckNvbmZpZywgdGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gVHJhbnNsYXRpb25SZWNvZ25pemVyO1xufShFeHBvcnRzXzIuUmVjb2duaXplcikpO1xuZXhwb3J0cy5UcmFuc2xhdGlvblJlY29nbml6ZXIgPSBUcmFuc2xhdGlvblJlY29nbml6ZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uUmVjb2duaXplci5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFeHBvcnRzXzEgPSByZXF1aXJlKFwiLi9FeHBvcnRzXCIpO1xuLyoqXG4gKiBUcmFuc2xhdGlvbiBTeW50aGVzaXMgZXZlbnQgYXJndW1lbnRzXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3NcbiAqL1xudmFyIFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJncywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7VHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHR9IHJlc3VsdCAtIFRoZSB0cmFuc2xhdGlvbiBzeW50aGVzaXMgcmVzdWx0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJncyhyZXN1bHQsIHNlc3Npb25JZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzZXNzaW9uSWQpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByaXZSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzLnByb3RvdHlwZSwgXCJyZXN1bHRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSB0cmFuc2xhdGlvbiBzeW50aGVzaXMgcmVzdWx0LlxuICAgICAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJldHVybnMge1RyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0fSBTcGVjaWZpZXMgdGhlIHRyYW5zbGF0aW9uIHN5bnRoZXNpcyByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBUcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJncztcbn0oRXhwb3J0c18xLlNlc3Npb25FdmVudEFyZ3MpKTtcbmV4cG9ydHMuVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MgPSBUcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJncztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyoqXG4gKiBEZWZpbmVzIHRyYW5zbGF0aW9uIHN5bnRoZXNpcyByZXN1bHQsIGkuZS4gdGhlIHZvaWNlIG91dHB1dCBvZiB0aGUgdHJhbnNsYXRlZFxuICogdGV4dCBpbiB0aGUgdGFyZ2V0IGxhbmd1YWdlLlxuICogQGNsYXNzIFRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0XG4gKi9cbnZhciBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7UmVzdWx0UmVhc29ufSByZWFzb24gLSBUaGUgc3ludGhlc2lzIHJlYXNvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhdWRpbyAtIFRoZSBhdWRpbyBkYXRhLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0KHJlYXNvbiwgYXVkaW8pIHtcbiAgICAgICAgdGhpcy5wcml2UmVhc29uID0gcmVhc29uO1xuICAgICAgICB0aGlzLnByaXZBdWRpbyA9IGF1ZGlvO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQucHJvdG90eXBlLCBcImF1ZGlvXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYW5zbGF0ZWQgdGV4dCBpbiB0aGUgdGFyZ2V0IGxhbmd1YWdlLlxuICAgICAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0LnByb3RvdHlwZS5hdWRpb1xuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IFRyYW5zbGF0ZWQgYXVkaW8gaW4gdGhlIHRhcmdldCBsYW5ndWFnZS5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQucHJvdG90eXBlLCBcInJlYXNvblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc3ludGhlc2lzIHN0YXR1cy5cbiAgICAgICAgICogQG1lbWJlciBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdC5wcm90b3R5cGUucmVhc29uXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEByZXR1cm5zIHtSZXN1bHRSZWFzb259IFRoZSBzeW50aGVzaXMgc3RhdHVzLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQ7XG59KCkpO1xuZXhwb3J0cy5UcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdCA9IFRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRXhwb3J0c18xID0gcmVxdWlyZShcIi4vRXhwb3J0c1wiKTtcbi8qKlxuICogUmVwcmVzZW50cyBjb2xsZWN0aW9uIG9mIHBhcmFtZXRlcnMgYW5kIHRoZWlyIHZhbHVlcy5cbiAqIEBjbGFzcyBUcmFuc2xhdGlvblxuICovXG52YXIgVHJhbnNsYXRpb25zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRyYW5zbGF0aW9ucygpIHtcbiAgICAgICAgLy8gVXNlIGFuIFByb3BlcnR5Q29sbGVjdGlvbiBpbnRlcm5hbGx5LCBqdXN0IHdyYXBwaW5nIGl0IHRvIGhpZGUgdGhlIHwgZW51bSBzeW50YXggaXQgaGFzLlxuICAgICAgICB0aGlzLnByaXZNYXAgPSBuZXcgRXhwb3J0c18xLlByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwYXJhbWV0ZXIgdmFsdWUgaW4gdHlwZSBTdHJpbmcuIFRoZSBwYXJhbWV0ZXIgbXVzdCBoYXZlIHRoZSBzYW1lIHR5cGUgYXMgU3RyaW5nLlxuICAgICAqIEN1cnJlbnRseSBvbmx5IFN0cmluZywgaW50IGFuZCBib29sIGFyZSBhbGxvd2VkLlxuICAgICAqIElmIHRoZSBuYW1lIGlzIG5vdCBhdmFpbGFibGUsIHRoZSBzcGVjaWZpZWQgZGVmYXVsdFZhbHVlIGlzIHJldHVybmVkLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb24ucHJvdG90eXBlLmdldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIHBhcmFtZXRlciBuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZWYgLSBUaGUgZGVmYXVsdCB2YWx1ZSB3aGljaCBpcyByZXR1cm5lZCBpZiB0aGUgcGFyYW1ldGVyIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdmFsdWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBUcmFuc2xhdGlvbnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXksIGRlZikge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWFwLmdldFByb3BlcnR5KGtleSwgZGVmKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIFN0cmluZyB2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyIHNwZWNpZmllZCBieSBuYW1lLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb24ucHJvdG90eXBlLnNldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIHBhcmFtZXRlciBuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSB2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIFRyYW5zbGF0aW9ucy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcml2TWFwLnNldFByb3BlcnR5KGtleSwgdmFsdWUpO1xuICAgIH07XG4gICAgcmV0dXJuIFRyYW5zbGF0aW9ucztcbn0oKSk7XG5leHBvcnRzLlRyYW5zbGF0aW9ucyA9IFRyYW5zbGF0aW9ucztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25zLmpzLm1hcFxuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIl0sInNvdXJjZVJvb3QiOiIifQ==